function validElementString(e){try{return 0!==angular.element(e).length}catch(e){return!1}}function registerTextAngularTool(e,t){if(!e||""===e||taTools.hasOwnProperty(e))throw"textAngular Error: A unique name is required for a Tool Definition";if(t.display&&(""===t.display||!validElementString(t.display))||!t.display&&!t.buttontext&&!t.iconclass)throw'textAngular Error: Tool Definition for "'+e+'" does not have a valid display/iconclass/buttontext value';taTools[e]=t}!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=Q.type(e);return"function"!==n&&!Q.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(Q.isFunction(t))return Q.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return Q.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(se.test(t))return Q.filter(t,e,n);t=Q.filter(t,e)}return Q.grep(e,function(e){return U.call(t,e)>=0!==n})}function i(e,t){for(;(e=e[t])&&1!==e.nodeType;);return e}function o(e){var t=pe[e]={};return Q.each(e.match(fe)||[],function(e,n){t[n]=!0}),t}function a(){J.removeEventListener("DOMContentLoaded",a,!1),e.removeEventListener("load",a,!1),Q.ready()}function s(){Object.defineProperty(this.cache={},0,{get:function(){return{}}}),this.expando=Q.expando+Math.random()}function l(e,t,n){var r;if(void 0===n&&1===e.nodeType)if(r="data-"+t.replace(be,"-$1").toLowerCase(),"string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:ye.test(n)?Q.parseJSON(n):n)}catch(e){}ve.set(e,t,n)}else n=void 0;return n}function u(){return!0}function c(){return!1}function d(){try{return J.activeElement}catch(e){}}function f(e,t){return Q.nodeName(e,"table")&&Q.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function p(e){return e.type=(null!==e.getAttribute("type"))+"/"+e.type,e}function h(e){var t=Fe.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function g(e,t){for(var n=0,r=e.length;r>n;n++)me.set(e[n],"globalEval",!t||me.get(t[n],"globalEval"))}function m(e,t){var n,r,i,o,a,s,l,u;if(1===t.nodeType){if(me.hasData(e)&&(o=me.access(e),a=me.set(t,o),u=o.events)){delete a.handle,a.events={};for(i in u)for(n=0,r=u[i].length;r>n;n++)Q.event.add(t,i,u[i][n])}ve.hasData(e)&&(s=ve.access(e),l=Q.extend({},s),ve.set(t,l))}}function v(e,t){var n=e.getElementsByTagName?e.getElementsByTagName(t||"*"):e.querySelectorAll?e.querySelectorAll(t||"*"):[];return void 0===t||t&&Q.nodeName(e,t)?Q.merge([e],n):n}function y(e,t){var n=t.nodeName.toLowerCase();"input"===n&&Ce.test(e.type)?t.checked=e.checked:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}function b(t,n){var r,i=Q(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:Q.css(i[0],"display");return i.detach(),o}function x(e){var t=J,n=je[e];return n||("none"!==(n=b(e,t))&&n||(Ie=(Ie||Q("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),(t=Ie[0].contentDocument).write(),t.close(),n=b(e,t),Ie.detach()),je[e]=n),n}function w(e,t,n){var r,i,o,a,s=e.style;return(n=n||He(e))&&(a=n.getPropertyValue(t)||n[t]),n&&(""!==a||Q.contains(e.ownerDocument,e)||(a=Q.style(e,t)),ze.test(a)&&Ye.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0!==a?a+"":a}function _(e,t){return{get:function(){return e()?void delete this.get:(this.get=t).apply(this,arguments)}}}function C(e,t){if(t in e)return t;for(var n=t[0].toUpperCase()+t.slice(1),r=t,i=qe.length;i--;)if((t=qe[i]+n)in e)return t;return r}function k(e,t,n){var r=Be.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function S(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=Q.css(e,n+we[o],!0,i)),r?("content"===n&&(a-=Q.css(e,"padding"+we[o],!0,i)),"margin"!==n&&(a-=Q.css(e,"border"+we[o]+"Width",!0,i))):(a+=Q.css(e,"padding"+we[o],!0,i),"padding"!==n&&(a+=Q.css(e,"border"+we[o]+"Width",!0,i)));return a}function $(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=He(e),a="border-box"===Q.css(e,"boxSizing",!1,o);if(0>=i||null==i){if((0>(i=w(e,t,o))||null==i)&&(i=e.style[t]),ze.test(i))return i;r=a&&(X.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+S(e,t,n||(a?"border":"content"),r,o)+"px"}function M(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)(r=e[a]).style&&(o[a]=me.get(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&_e(r)&&(o[a]=me.access(r,"olddisplay",x(r.nodeName)))):(i=_e(r),"none"===n&&i||me.set(r,"olddisplay",i?n:Q.css(r,"display"))));for(a=0;s>a;a++)(r=e[a]).style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function T(e,t,n,r,i){return new T.prototype.init(e,t,n,r,i)}function D(){return setTimeout(function(){Ke=void 0}),Ke=Q.now()}function E(e,t){var n,r=0,i={height:e};for(t=t?1:0;4>r;r+=2-t)n=we[r],i["margin"+n]=i["padding"+n]=e;return t&&(i.opacity=i.width=e),i}function L(e,t,n){for(var r,i=(tt[t]||[]).concat(tt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function A(e,t,n){var r,i,o,a,s,l,u,c=this,d={},f=e.style,p=e.nodeType&&_e(e),h=me.get(e,"fxshow");n.queue||(null==(s=Q._queueHooks(e,"fx")).unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,Q.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=Q.css(e,"display"),"inline"===("none"===u?me.get(e,"olddisplay")||x(e.nodeName):u)&&"none"===Q.css(e,"float")&&(f.display="inline-block")),n.overflow&&(f.overflow="hidden",c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],Je.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;p=!0}d[r]=h&&h[r]||Q.style(e,r)}else u=void 0;if(Q.isEmptyObject(d))"inline"===("none"===u?x(e.nodeName):u)&&(f.display=u);else{h?"hidden"in h&&(p=h.hidden):h=me.access(e,"fxshow",{}),o&&(h.hidden=!p),p?Q(e).show():c.done(function(){Q(e).hide()}),c.done(function(){var t;me.remove(e,"fxshow");for(t in d)Q.style(e,t,d[t])});for(r in d)a=L(p?h[r]:0,r,c),r in h||(h[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function R(e,t){var n,r,i,o,a;for(n in e)if(r=Q.camelCase(n),i=t[r],o=e[n],Q.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=Q.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function P(e,t,n){var r,i,o=0,a=et.length,s=Q.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=Ke||D(),n=Math.max(0,u.startTime+u.duration-t),r=1-(n/u.duration||0),o=0,a=u.tweens.length;a>o;o++)u.tweens[o].run(r);return s.notifyWith(e,[u,r,n]),1>r&&a?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:Q.extend({},t),opts:Q.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:Ke||D(),duration:n.duration,tweens:[],createTween:function(t,n){var r=Q.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(R(c,u.opts.specialEasing);a>o;o++)if(r=et[o].call(u,e,c,u.opts))return r;return Q.map(c,L,u),Q.isFunction(u.opts.start)&&u.opts.start.call(e,u),Q.fx.timer(Q.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function F(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(fe)||[];if(Q.isFunction(n))for(;r=o[i++];)"+"===r[0]?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function O(e,t,n,r){function i(s){var l;return o[s]=!0,Q.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===bt;return i(t.dataTypes[0])||!o["*"]&&i("*")}function N(e,t){var n,r,i=Q.ajaxSettings.flatOptions||{};for(n in t)void 0!==t[n]&&((i[n]?e:r||(r={}))[n]=t[n]);return r&&Q.extend(!0,e,r),e}function I(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===r&&(r=e.mimeType||t.getResponseHeader("Content-Type"));if(r)for(i in s)if(s[i]&&s[i].test(r)){l.unshift(i);break}if(l[0]in n)o=l[0];else{for(i in n){if(!l[0]||e.converters[i+" "+l[0]]){o=i;break}a||(a=i)}o=o||a}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function j(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if((s=i.split(" "))[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e.throws)t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function Y(e,t,n,r){var i;if(Q.isArray(t))Q.each(t,function(t,i){n||_t.test(e)?r(e,i):Y(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==Q.type(t))r(e,t);else for(i in t)Y(e+"["+i+"]",t[i],n,r)}function z(e){return Q.isWindow(e)?e:9===e.nodeType&&e.defaultView}var H=[],V=H.slice,B=H.concat,W=H.push,U=H.indexOf,G={},q=G.toString,K=G.hasOwnProperty,X={},J=e.document,Z="2.1.1",Q=function(e,t){return new Q.fn.init(e,t)},ee=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,te=/^-ms-/,ne=/-([\da-z])/gi,re=function(e,t){return t.toUpperCase()};Q.fn=Q.prototype={jquery:Z,constructor:Q,selector:"",length:0,toArray:function(){return V.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:V.call(this)},pushStack:function(e){var t=Q.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return Q.each(this,e,t)},map:function(e){return this.pushStack(Q.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:W,sort:H.sort,splice:H.splice},Q.extend=Q.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||Q.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(e=arguments[s]))for(t in e)n=a[t],r=e[t],a!==r&&(u&&r&&(Q.isPlainObject(r)||(i=Q.isArray(r)))?(i?(i=!1,o=n&&Q.isArray(n)?n:[]):o=n&&Q.isPlainObject(n)?n:{},a[t]=Q.extend(u,o,r)):void 0!==r&&(a[t]=r));return a},Q.extend({expando:"jQuery"+(Z+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===Q.type(e)},isArray:Array.isArray,isWindow:function(e){return null!=e&&e===e.window},isNumeric:function(e){return!Q.isArray(e)&&e-parseFloat(e)>=0},isPlainObject:function(e){return"object"===Q.type(e)&&!e.nodeType&&!Q.isWindow(e)&&!(e.constructor&&!K.call(e.constructor.prototype,"isPrototypeOf"))},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?G[q.call(e)]||"object":typeof e},globalEval:function(e){var t,n=eval;(e=Q.trim(e))&&(1===e.indexOf("use strict")?(t=J.createElement("script"),t.text=e,J.head.appendChild(t).parentNode.removeChild(t)):n(e))},camelCase:function(e){return e.replace(te,"ms-").replace(ne,re)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,o=e.length,a=n(e);if(r){if(a)for(;o>i&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(a)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(ee,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?Q.merge(r,"string"==typeof e?[e]:e):W.call(r,e)),r},inArray:function(e,t,n){return null==t?-1:U.call(t,e,n)},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;r++)e[i++]=t[r];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;o>i;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,r){var i,o=0,a=e.length,s=[];if(n(e))for(;a>o;o++)null!=(i=t(e[o],o,r))&&s.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&s.push(i);return B.apply([],s)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(n=e[t],t=e,e=n),Q.isFunction(e)?(r=V.call(arguments,2),i=function(){return e.apply(t||this,r.concat(V.call(arguments)))},i.guid=e.guid=e.guid||Q.guid++,i):void 0},now:Date.now,support:X}),Q.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){G["[object "+t+"]"]=t.toLowerCase()});var ie=function(e){function t(e,t,n,r){var i,o,a,s,u,d,f,p,h,g;if((t?t.ownerDocument||t:I)!==E&&D(t),t=t||E,n=n||[],!e||"string"!=typeof e)return n;if(1!==(s=t.nodeType)&&9!==s)return[];if(A&&!r){if(i=me.exec(e))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&O(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return J.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&b.getElementsByClassName&&t.getElementsByClassName)return J.apply(n,t.getElementsByClassName(a)),n}if(b.qsa&&(!R||!R.test(e))){if(p=f=N,h=t,g=9===s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(d=C(e),(f=t.getAttribute("id"))?p=f.replace(ye,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",u=d.length;u--;)d[u]=p+c(d[u]);h=ve.test(e)&&l(t.parentNode)||t,g=d.join(",")}if(g)try{return J.apply(n,h.querySelectorAll(g)),n}catch(e){}finally{f||t.removeAttribute("id")}}}return S(e.replace(ae,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>x.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[N]=!0,e}function i(e){var t=E.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)x.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||U)-(~e.sourceIndex||U);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function l(e){return e&&typeof e.getElementsByTagName!==W&&e}function u(){}function c(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function d(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=Y++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[j,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[N]||(t[N]={}),(s=l[r])&&s[0]===j&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function f(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function p(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function h(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function g(e,t,n,i,o,a){return i&&!i[N]&&(i=g(i)),o&&!o[N]&&(o=g(o,a)),r(function(r,a,s,l){var u,c,d,f=[],g=[],m=a.length,v=r||p(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:h(v,f,e,s,l),b=n?o||(r?e:m||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=h(b,g),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[g[c]]=!(y[g[c]]=d));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?Q.call(r,d):f[c])>-1&&(r[u]=!(a[u]=d))}}else b=h(b===a?b.splice(m,b.length):b),o?o(null,a,b,l):J.apply(a,b)})}function m(e){for(var t,n,r,i=e.length,o=x.relative[e[0].type],a=o||x.relative[" "],s=o?1:0,l=d(function(e){return e===t},a,!0),u=d(function(e){return Q.call(t,e)>-1},a,!0),p=[function(e,n,r){return!o&&(r||n!==$)||((t=n).nodeType?l(e,n,r):u(e,n,r))}];i>s;s++)if(n=x.relative[e[s].type])p=[d(f(p),n)];else{if((n=x.filter[e[s].type].apply(null,e[s].matches))[N]){for(r=++s;i>r&&!x.relative[e[r].type];r++);return g(s>1&&f(p),s>1&&c(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(ae,"$1"),n,r>s&&m(e.slice(s,r)),i>r&&m(e=e.slice(r)),i>r&&c(e))}p.push(n)}return f(p)}function v(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,f,p=0,g="0",m=r&&[],v=[],y=$,b=r||o&&x.find.TAG("*",u),w=j+=null==y?1:Math.random()||.1,_=b.length;for(u&&($=a!==E&&a);g!==_&&null!=(c=b[g]);g++){if(o&&c){for(d=0;f=e[d++];)if(f(c,a,s)){l.push(c);break}u&&(j=w)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=g,i&&g!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;g--;)m[g]||v[g]||(v[g]=K.call(l));v=h(v)}J.apply(l,v),u&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(j=w,$=y),m};return i?r(a):a}var y,b,x,w,_,C,k,S,$,M,T,D,E,L,A,R,P,F,O,N="sizzle"+-new Date,I=e.document,j=0,Y=0,z=n(),H=n(),V=n(),B=function(e,t){return e===t&&(T=!0),0},W="undefined",U=1<<31,G={}.hasOwnProperty,q=[],K=q.pop,X=q.push,J=q.push,Z=q.slice,Q=q.indexOf||function(e){for(var t=0,n=this.length;n>t;t++)if(this[t]===e)return t;return-1},ee="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",te="[\\x20\\t\\r\\n\\f]",ne="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",re=ne.replace("w","w#"),ie="\\["+te+"*("+ne+")(?:"+te+"*([*^$|!~]?=)"+te+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+re+"))|)"+te+"*\\]",oe=":("+ne+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+ie+")*)|.*)\\)|)",ae=new RegExp("^"+te+"+|((?:^|[^\\\\])(?:\\\\.)*)"+te+"+$","g"),se=new RegExp("^"+te+"*,"+te+"*"),le=new RegExp("^"+te+"*([>+~]|"+te+")"+te+"*"),ue=new RegExp("="+te+"*([^\\]'\"]*?)"+te+"*\\]","g"),ce=new RegExp(oe),de=new RegExp("^"+re+"$"),fe={ID:new RegExp("^#("+ne+")"),CLASS:new RegExp("^\\.("+ne+")"),TAG:new RegExp("^("+ne.replace("w","w*")+")"),ATTR:new RegExp("^"+ie),PSEUDO:new RegExp("^"+oe),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+te+"*(even|odd|(([+-]|)(\\d*)n|)"+te+"*(?:([+-]|)"+te+"*(\\d+)|))"+te+"*\\)|)","i"),bool:new RegExp("^(?:"+ee+")$","i"),needsContext:new RegExp("^"+te+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+te+"*((?:-\\d)?\\d*)"+te+"*\\)|)(?=[^-]|$)","i")},pe=/^(?:input|select|textarea|button)$/i,he=/^h\d$/i,ge=/^[^{]+\{\s*\[native \w/,me=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,ve=/[+~]/,ye=/'|\\/g,be=new RegExp("\\\\([\\da-f]{1,6}"+te+"?|("+te+")|.)","ig"),xe=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)};try{J.apply(q=Z.call(I.childNodes),I.childNodes),q[I.childNodes.length].nodeType}catch(e){J={apply:q.length?function(e,t){X.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}b=t.support={},_=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},D=t.setDocument=function(e){var t,n=e?e.ownerDocument||e:I,r=n.defaultView;return n!==E&&9===n.nodeType&&n.documentElement?(E=n,L=n.documentElement,A=!_(n),r&&r!==r.top&&(r.addEventListener?r.addEventListener("unload",function(){D()},!1):r.attachEvent&&r.attachEvent("onunload",function(){D()})),b.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),b.getElementsByTagName=i(function(e){return e.appendChild(n.createComment("")),!e.getElementsByTagName("*").length}),b.getElementsByClassName=ge.test(n.getElementsByClassName)&&i(function(e){return e.innerHTML="<div class='a'></div><div class='a i'></div>",e.firstChild.className="i",2===e.getElementsByClassName("i").length}),b.getById=i(function(e){return L.appendChild(e).id=N,!n.getElementsByName||!n.getElementsByName(N).length}),b.getById?(x.find.ID=function(e,t){if(typeof t.getElementById!==W&&A){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},x.filter.ID=function(e){var t=e.replace(be,xe);return function(e){return e.getAttribute("id")===t}}):(delete x.find.ID,x.filter.ID=function(e){var t=e.replace(be,xe);return function(e){var n=typeof e.getAttributeNode!==W&&e.getAttributeNode("id");return n&&n.value===t}}),x.find.TAG=b.getElementsByTagName?function(e,t){return typeof t.getElementsByTagName!==W?t.getElementsByTagName(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},x.find.CLASS=b.getElementsByClassName&&function(e,t){return typeof t.getElementsByClassName!==W&&A?t.getElementsByClassName(e):void 0},P=[],R=[],(b.qsa=ge.test(n.querySelectorAll))&&(i(function(e){e.innerHTML="<select msallowclip=''><option selected=''></option></select>",e.querySelectorAll("[msallowclip^='']").length&&R.push("[*^$]="+te+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||R.push("\\["+te+"*(?:value|"+ee+")"),e.querySelectorAll(":checked").length||R.push(":checked")}),i(function(e){var t=n.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&R.push("name"+te+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||R.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),R.push(",.*:")})),(b.matchesSelector=ge.test(F=L.matches||L.webkitMatchesSelector||L.mozMatchesSelector||L.oMatchesSelector||L.msMatchesSelector))&&i(function(e){b.disconnectedMatch=F.call(e,"div"),F.call(e,"[s!='']:x"),P.push("!=",oe)}),R=R.length&&new RegExp(R.join("|")),P=P.length&&new RegExp(P.join("|")),t=ge.test(L.compareDocumentPosition),O=t||ge.test(L.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},B=t?function(e,t){if(e===t)return T=!0,0;var r=!e.compareDocumentPosition-!t.compareDocumentPosition;return r||(r=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&r||!b.sortDetached&&t.compareDocumentPosition(e)===r?e===n||e.ownerDocument===I&&O(I,e)?-1:t===n||t.ownerDocument===I&&O(I,t)?1:M?Q.call(M,e)-Q.call(M,t):0:4&r?-1:1)}:function(e,t){if(e===t)return T=!0,0;var r,i=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===n?-1:t===n?1:o?-1:s?1:M?Q.call(M,e)-Q.call(M,t):0;if(o===s)return a(e,t);for(r=e;r=r.parentNode;)l.unshift(r);for(r=t;r=r.parentNode;)u.unshift(r);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===I?-1:u[i]===I?1:0},n):E},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==E&&D(e),n=n.replace(ue,"='$1']"),!(!b.matchesSelector||!A||P&&P.test(n)||R&&R.test(n)))try{var r=F.call(e,n);if(r||b.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,E,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==E&&D(e),O(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==E&&D(e);var n=x.attrHandle[t.toLowerCase()],r=n&&G.call(x.attrHandle,t.toLowerCase())?n(e,t,!A):void 0;return void 0!==r?r:b.attributes||!A?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(T=!b.detectDuplicates,M=!b.sortStable&&e.slice(0),e.sort(B),T){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return M=null,e},w=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=w(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=w(t);return n},(x=t.selectors={cacheLength:50,createPseudo:r,match:fe,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(be,xe),e[3]=(e[3]||e[4]||e[5]||"").replace(be,xe),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return fe.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&ce.test(n)&&(t=C(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(be,xe).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+te+")"+e+"("+te+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||typeof e.getAttribute!==W&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,g=o!==a?"nextSibling":"previousSibling",m=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(m){if(o){for(;g;){for(d=t;d=d[g];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=g="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?m.firstChild:m.lastChild],a&&y){for(p=(u=(c=m[N]||(m[N]={}))[e]||[])[0]===j&&u[1],f=u[0]===j&&u[2],d=p&&m.childNodes[p];d=++p&&d&&d[g]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[j,p,f];break}}else if(y&&(u=(t[N]||(t[N]={}))[e])&&u[0]===j)f=u[1];else for(;(d=++p&&d&&d[g]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[N]||(d[N]={}))[e]=[j,f]),d!==t)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=x.pseudos[e]||x.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[N]?o(n):o.length>1?(i=[e,e,"",n],x.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=Q.call(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(ae,"$1"));return i[N]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return function(t){return(t.textContent||t.innerText||w(t)).indexOf(e)>-1}}),lang:r(function(e){return de.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(be,xe).toLowerCase(),function(t){var n;do{if(n=A?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===L},focus:function(e){return e===E.activeElement&&(!E.hasFocus||E.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!x.pseudos.empty(e)},header:function(e){return he.test(e.nodeName)},input:function(e){return pe.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:s(function(){return[0]}),last:s(function(e,t){return[t-1]}),eq:s(function(e,t,n){return[0>n?n+t:n]}),even:s(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:s(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:s(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:s(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}}).pseudos.nth=x.pseudos.eq;for(y in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})x.pseudos[y]=function(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}(y);for(y in{submit:!0,reset:!0})x.pseudos[y]=function(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}(y);return u.prototype=x.filters=x.pseudos,x.setFilters=new u,C=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=H[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=x.preFilter;s;){(!r||(i=se.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=le.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(ae," ")}),s=s.slice(r.length));for(a in x.filter)!(i=fe[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):H(e,l).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=V[e+" "];if(!o){for(t||(t=C(e)),n=t.length;n--;)o=m(t[n]),o[N]?r.push(o):i.push(o);(o=V(e,v(i,r))).selector=e}return o},S=t.select=function(e,t,n,r){var i,o,a,s,u,d="function"==typeof e&&e,f=!r&&C(e=d.selector||e);if(n=n||[],1===f.length){if((o=f[0]=f[0].slice(0)).length>2&&"ID"===(a=o[0]).type&&b.getById&&9===t.nodeType&&A&&x.relative[o[1].type]){if(!(t=(x.find.ID(a.matches[0].replace(be,xe),t)||[])[0]))return n;d&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=fe.needsContext.test(e)?0:o.length;i--&&(a=o[i],!x.relative[s=a.type]);)if((u=x.find[s])&&(r=u(a.matches[0].replace(be,xe),ve.test(o[0].type)&&l(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&c(o)))return J.apply(n,r),n;break}}return(d||k(e,f))(r,t,!A,n,ve.test(e)&&l(t.parentNode)||t),n},b.sortStable=N.split("").sort(B).join("")===N,b.detectDuplicates=!!T,D(),b.sortDetached=i(function(e){return 1&e.compareDocumentPosition(E.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),b.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(ee,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);Q.find=ie,Q.expr=ie.selectors,Q.expr[":"]=Q.expr.pseudos,Q.unique=ie.uniqueSort,Q.text=ie.getText,Q.isXMLDoc=ie.isXML,Q.contains=ie.contains;var oe=Q.expr.match.needsContext,ae=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,se=/^.[^:#\[\.,]*$/;Q.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?Q.find.matchesSelector(r,e)?[r]:[]:Q.find.matches(e,Q.grep(t,function(e){return 1===e.nodeType}))},Q.fn.extend({find:function(e){var t,n=this.length,r=[],i=this;if("string"!=typeof e)return this.pushStack(Q(e).filter(function(){for(t=0;n>t;t++)if(Q.contains(i[t],this))return!0}));for(t=0;n>t;t++)Q.find(e,i[t],r);return r=this.pushStack(n>1?Q.unique(r):r),r.selector=this.selector?this.selector+" "+e:e,r},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&oe.test(e)?Q(e):e||[],!1).length}});var le,ue=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(Q.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e[0]&&">"===e[e.length-1]&&e.length>=3?[null,e,null]:ue.exec(e))||!n[1]&&t)return!t||t.jquery?(t||le).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof Q?t[0]:t,Q.merge(this,Q.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:J,!0)),ae.test(n[1])&&Q.isPlainObject(t))for(n in t)Q.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}return(r=J.getElementById(n[2]))&&r.parentNode&&(this.length=1,this[0]=r),this.context=J,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):Q.isFunction(e)?void 0!==le.ready?le.ready(e):e(Q):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),Q.makeArray(e,this))}).prototype=Q.fn,le=Q(J);var ce=/^(?:parents|prev(?:Until|All))/,de={children:!0,contents:!0,next:!0,prev:!0};Q.extend({dir:function(e,t,n){for(var r=[],i=void 0!==n;(e=e[t])&&9!==e.nodeType;)if(1===e.nodeType){if(i&&Q(e).is(n))break;r.push(e)}return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),Q.fn.extend({has:function(e){var t=Q(e,this),n=t.length;return this.filter(function(){for(var e=0;n>e;e++)if(Q.contains(this,t[e]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=oe.test(e)||"string"!=typeof e?Q(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&Q.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?Q.unique(o):o)},index:function(e){return e?"string"==typeof e?U.call(Q(e),this[0]):U.call(this,e.jquery?e[0]:e):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(Q.unique(Q.merge(this.get(),Q(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),Q.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return Q.dir(e,"parentNode")},parentsUntil:function(e,t,n){return Q.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return Q.dir(e,"nextSibling")},prevAll:function(e){return Q.dir(e,"previousSibling")},nextUntil:function(e,t,n){return Q.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return Q.dir(e,"previousSibling",n)},siblings:function(e){return Q.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return Q.sibling(e.firstChild)},contents:function(e){return e.contentDocument||Q.merge([],e.childNodes)}},function(e,t){Q.fn[e]=function(n,r){var i=Q.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=Q.filter(r,i)),this.length>1&&(de[e]||Q.unique(i),ce.test(e)&&i.reverse()),this.pushStack(i)}});var fe=/\S+/g,pe={};Q.Callbacks=function(e){var t,n,r,i,a,s,l=[],u=!(e="string"==typeof e?pe[e]||o(e):Q.extend({},e)).once&&[],c=function(o){for(t=e.memory&&o,n=!0,s=i||0,i=0,a=l.length,r=!0;l&&a>s;s++)if(!1===l[s].apply(o[0],o[1])&&e.stopOnFalse){t=!1;break}r=!1,l&&(u?u.length&&c(u.shift()):t?l=[]:d.disable())},d={add:function(){if(l){var n=l.length;!function t(n){Q.each(n,function(n,r){var i=Q.type(r);"function"===i?e.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),r?a=l.length:t&&(i=n,c(t))}return this},remove:function(){return l&&Q.each(arguments,function(e,t){for(var n;(n=Q.inArray(t,l,n))>-1;)l.splice(n,1),r&&(a>=n&&a--,s>=n&&s--)}),this},has:function(e){return e?Q.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],a=0,this},disable:function(){return l=u=t=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,t||d.disable(),this},locked:function(){return!u},fireWith:function(e,t){return!l||n&&!u||(t=t||[],t=[e,t.slice?t.slice():t],r?u.push(t):c(t)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!n}};return d},Q.extend({Deferred:function(e){var t=[["resolve","done",Q.Callbacks("once memory"),"resolved"],["reject","fail",Q.Callbacks("once memory"),"rejected"],["notify","progress",Q.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return Q.Deferred(function(n){Q.each(t,function(t,o){var a=Q.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&Q.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?Q.extend(e,r):r}},i={};return r.pipe=r.then,Q.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=V.call(arguments),a=o.length,s=1!==a||e&&Q.isFunction(e.promise)?a:0,l=1===s?e:Q.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?V.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&Q.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}});var he;Q.fn.ready=function(e){return Q.ready.promise().done(e),this},Q.extend({isReady:!1,readyWait:1,holdReady:function(e){e?Q.readyWait++:Q.ready(!0)},ready:function(e){(!0===e?--Q.readyWait:Q.isReady)||(Q.isReady=!0,!0!==e&&--Q.readyWait>0||(he.resolveWith(J,[Q]),Q.fn.triggerHandler&&(Q(J).triggerHandler("ready"),Q(J).off("ready"))))}}),Q.ready.promise=function(t){return he||(he=Q.Deferred(),"complete"===J.readyState?setTimeout(Q.ready):(J.addEventListener("DOMContentLoaded",a,!1),e.addEventListener("load",a,!1))),he.promise(t)},Q.ready.promise();var ge=Q.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===Q.type(n)){i=!0;for(s in n)Q.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,Q.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(Q(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o};Q.acceptData=function(e){return 1===e.nodeType||9===e.nodeType||!+e.nodeType},s.uid=1,s.accepts=Q.acceptData,s.prototype={key:function(e){if(!s.accepts(e))return 0;var t={},n=e[this.expando];if(!n){n=s.uid++;try{t[this.expando]={value:n},Object.defineProperties(e,t)}catch(r){t[this.expando]=n,Q.extend(e,t)}}return this.cache[n]||(this.cache[n]={}),n},set:function(e,t,n){var r,i=this.key(e),o=this.cache[i];if("string"==typeof t)o[t]=n;else if(Q.isEmptyObject(o))Q.extend(this.cache[i],t);else for(r in t)o[r]=t[r];return o},get:function(e,t){var n=this.cache[this.key(e)];return void 0===t?n:n[t]},access:function(e,t,n){var r;return void 0===t||t&&"string"==typeof t&&void 0===n?(r=this.get(e,t),void 0!==r?r:this.get(e,Q.camelCase(t))):(this.set(e,t,n),void 0!==n?n:t)},remove:function(e,t){var n,r,i,o=this.key(e),a=this.cache[o];if(void 0===t)this.cache[o]={};else{Q.isArray(t)?r=t.concat(t.map(Q.camelCase)):(i=Q.camelCase(t),t in a?r=[t,i]:(r=i,r=r in a?[r]:r.match(fe)||[])),n=r.length;for(;n--;)delete a[r[n]]}},hasData:function(e){return!Q.isEmptyObject(this.cache[e[this.expando]]||{})},discard:function(e){e[this.expando]&&delete this.cache[e[this.expando]]}};var me=new s,ve=new s,ye=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,be=/([A-Z])/g;Q.extend({hasData:function(e){return ve.hasData(e)||me.hasData(e)},data:function(e,t,n){return ve.access(e,t,n)},removeData:function(e,t){ve.remove(e,t)},_data:function(e,t,n){return me.access(e,t,n)},_removeData:function(e,t){me.remove(e,t)}}),Q.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ve.get(o),1===o.nodeType&&!me.get(o,"hasDataAttrs"))){for(n=a.length;n--;)a[n]&&0===(r=a[n].name).indexOf("data-")&&(r=Q.camelCase(r.slice(5)),l(o,r,i[r]));me.set(o,"hasDataAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ve.set(this,e)}):ge(this,function(t){var n,r=Q.camelCase(e);if(o&&void 0===t){if(void 0!==(n=ve.get(o,e)))return n;if(void 0!==(n=ve.get(o,r)))return n;if(void 0!==(n=l(o,r,void 0)))return n}else this.each(function(){var n=ve.get(this,r);ve.set(this,r,t),-1!==e.indexOf("-")&&void 0!==n&&ve.set(this,e,t)})},null,t,arguments.length>1,null,!0)},removeData:function(e){return this.each(function(){ve.remove(this,e)})}}),Q.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=me.get(e,t),n&&(!r||Q.isArray(n)?r=me.access(e,t,Q.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=Q.queue(e,t),r=n.length,i=n.shift(),o=Q._queueHooks(e,t),a=function(){Q.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return me.get(e,n)||me.access(e,n,{empty:Q.Callbacks("once memory").add(function(){me.remove(e,[t+"queue",n])})})}}),Q.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?Q.queue(this[0],e):void 0===t?this:this.each(function(){var n=Q.queue(this,e,t);Q._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&Q.dequeue(this,e)})},dequeue:function(e){return this.each(function(){Q.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=Q.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=me.get(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var xe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,we=["Top","Right","Bottom","Left"],_e=function(e,t){return e=t||e,"none"===Q.css(e,"display")||!Q.contains(e.ownerDocument,e)},Ce=/^(?:checkbox|radio)$/i;!function(){var e=J.createDocumentFragment().appendChild(J.createElement("div")),t=J.createElement("input");t.setAttribute("type","radio"),t.setAttribute("checked","checked"),t.setAttribute("name","t"),e.appendChild(t),X.checkClone=e.cloneNode(!0).cloneNode(!0).lastChild.checked,e.innerHTML="<textarea>x</textarea>",X.noCloneChecked=!!e.cloneNode(!0).lastChild.defaultValue}();var ke="undefined";X.focusinBubbles="onfocusin"in e;var Se=/^key/,$e=/^(?:mouse|pointer|contextmenu)|click/,Me=/^(?:focusinfocus|focusoutblur)$/,Te=/^([^.]*)(?:\.(.+)|)$/;Q.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,g,m=me.get(e);if(m)for(n.handler&&(o=n,n=o.handler,i=o.selector),n.guid||(n.guid=Q.guid++),(l=m.events)||(l=m.events={}),(a=m.handle)||(a=m.handle=function(t){return typeof Q!==ke&&Q.event.triggered!==t.type?Q.event.dispatch.apply(e,arguments):void 0}),u=(t=(t||"").match(fe)||[""]).length;u--;)s=Te.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p&&(d=Q.event.special[p]||{},p=(i?d.delegateType:d.bindType)||p,d=Q.event.special[p]||{},c=Q.extend({type:p,origType:g,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&Q.expr.match.needsContext.test(i),namespace:h.join(".")},o),(f=l[p])||(f=l[p]=[],f.delegateCount=0,d.setup&&!1!==d.setup.call(e,r,h,a)||e.addEventListener&&e.addEventListener(p,a,!1)),d.add&&(d.add.call(e,c),c.handler.guid||(c.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,c):f.push(c),Q.event.global[p]=!0)},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,g,m=me.hasData(e)&&me.get(e);if(m&&(l=m.events)){for(u=(t=(t||"").match(fe)||[""]).length;u--;)if(s=Te.exec(t[u])||[],p=g=s[1],h=(s[2]||"").split(".").sort(),p){for(d=Q.event.special[p]||{},f=l[p=(r?d.delegateType:d.bindType)||p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),a=o=f.length;o--;)c=f[o],!i&&g!==c.origType||n&&n.guid!==c.guid||s&&!s.test(c.namespace)||r&&r!==c.selector&&("**"!==r||!c.selector)||(f.splice(o,1),c.selector&&f.delegateCount--,d.remove&&d.remove.call(e,c));a&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,m.handle)||Q.removeEvent(e,p,m.handle),delete l[p])}else for(p in l)Q.event.remove(e,p+t[u],n,r,!0);Q.isEmptyObject(l)&&(delete m.handle,me.remove(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,u,c,d,f=[r||J],p=K.call(t,"type")?t.type:t,h=K.call(t,"namespace")?t.namespace.split("."):[];if(a=s=r=r||J,3!==r.nodeType&&8!==r.nodeType&&!Me.test(p+Q.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),u=p.indexOf(":")<0&&"on"+p,t=t[Q.expando]?t:new Q.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:Q.makeArray(n,[t]),d=Q.event.special[p]||{},i||!d.trigger||!1!==d.trigger.apply(r,n))){if(!i&&!d.noBubble&&!Q.isWindow(r)){for(l=d.delegateType||p,Me.test(l+p)||(a=a.parentNode);a;a=a.parentNode)f.push(a),s=a;s===(r.ownerDocument||J)&&f.push(s.defaultView||s.parentWindow||e)}for(o=0;(a=f[o++])&&!t.isPropagationStopped();)t.type=o>1?l:d.bindType||p,(c=(me.get(a,"events")||{})[t.type]&&me.get(a,"handle"))&&c.apply(a,n),(c=u&&a[u])&&c.apply&&Q.acceptData(a)&&(t.result=c.apply(a,n),!1===t.result&&t.preventDefault());return t.type=p,i||t.isDefaultPrevented()||d._default&&!1!==d._default.apply(f.pop(),n)||!Q.acceptData(r)||u&&Q.isFunction(r[p])&&!Q.isWindow(r)&&((s=r[u])&&(r[u]=null),Q.event.triggered=p,r[p](),Q.event.triggered=void 0,s&&(r[u]=s)),t.result}},dispatch:function(e){e=Q.event.fix(e);var t,n,r,i,o,a=[],s=V.call(arguments),l=(me.get(this,"events")||{})[e.type]||[],u=Q.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=Q.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,n=0;(o=i.handlers[n++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(o.namespace))&&(e.handleObj=o,e.data=o.data,void 0!==(r=((Q.event.special[o.origType]||{}).handle||o.handler).apply(i.elem,s))&&!1===(e.result=r)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!==this;l=l.parentNode||this)if(!0!==l.disabled||"click"!==e.type){for(r=[],n=0;s>n;n++)o=t[n],i=o.selector+" ",void 0===r[i]&&(r[i]=o.needsContext?Q(i,this).index(l)>=0:Q.find(i,this,null,[l]).length),r[i]&&r.push(o);r.length&&a.push({elem:l,handlers:r})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button;return null==e.pageX&&null!=t.clientX&&(n=e.target.ownerDocument||J,r=n.documentElement,i=n.body,e.pageX=t.clientX+(r&&r.scrollLeft||i&&i.scrollLeft||0)-(r&&r.clientLeft||i&&i.clientLeft||0),e.pageY=t.clientY+(r&&r.scrollTop||i&&i.scrollTop||0)-(r&&r.clientTop||i&&i.clientTop||0)),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},fix:function(e){if(e[Q.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=$e.test(i)?this.mouseHooks:Se.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new Q.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=J),3===e.target.nodeType&&(e.target=e.target.parentNode),a.filter?a.filter(e,o):e},special:{load:{noBubble:!0},focus:{trigger:function(){return this!==d()&&this.focus?(this.focus(),!1):void 0},delegateType:"focusin"},blur:{trigger:function(){return this===d()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return"checkbox"===this.type&&this.click&&Q.nodeName(this,"input")?(this.click(),!1):void 0},_default:function(e){return Q.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=Q.extend(new Q.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?Q.event.trigger(i,null,t):Q.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},Q.removeEvent=function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)},Q.Event=function(e,t){return this instanceof Q.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?u:c):this.type=e,t&&Q.extend(this,t),this.timeStamp=e&&e.timeStamp||Q.now(),void(this[Q.expando]=!0)):new Q.Event(e,t)},Q.Event.prototype={isDefaultPrevented:c,isPropagationStopped:c,isImmediatePropagationStopped:c,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=u,e&&e.preventDefault&&e.preventDefault()},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=u,e&&e.stopPropagation&&e.stopPropagation()},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=u,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},Q.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){Q.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!Q.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),X.focusinBubbles||Q.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){Q.event.simulate(t,e.target,Q.event.fix(e),!0)};Q.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=me.access(r,t);i||r.addEventListener(e,n,!0),me.access(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=me.access(r,t)-1;i?me.access(r,t,i):(r.removeEventListener(e,n,!0),me.remove(r,t))}}}),Q.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(a in e)this.on(a,t,n,e[a],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=c;else if(!r)return this;return 1===i&&(o=r,r=function(e){return Q().off(e),o.apply(this,arguments)},r.guid=o.guid||(o.guid=Q.guid++)),this.each(function(){Q.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,Q(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=c),this.each(function(){Q.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){Q.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?Q.event.trigger(e,t,n,!0):void 0}});var De=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Ee=/<([\w:]+)/,Le=/<|&#?\w+;/,Ae=/<(?:script|style|link)/i,Re=/checked\s*(?:[^=]|=\s*.checked.)/i,Pe=/^$|\/(?:java|ecma)script/i,Fe=/^true\/(.*)/,Oe=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.optgroup=Ne.option,Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td,Q.extend({clone:function(e,t,n){var r,i,o,a,s=e.cloneNode(!0),l=Q.contains(e.ownerDocument,e);if(!(X.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||Q.isXMLDoc(e)))for(a=v(s),o=v(e),r=0,i=o.length;i>r;r++)y(o[r],a[r]);if(t)if(n)for(o=o||v(e),a=a||v(s),r=0,i=o.length;i>r;r++)m(o[r],a[r]);else m(e,s);return(a=v(s,"script")).length>0&&g(a,!l&&v(e,"script")),s},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c=t.createDocumentFragment(),d=[],f=0,p=e.length;p>f;f++)if((i=e[f])||0===i)if("object"===Q.type(i))Q.merge(d,i.nodeType?[i]:i);else if(Le.test(i)){for(o=o||c.appendChild(t.createElement("div")),a=(Ee.exec(i)||["",""])[1].toLowerCase(),s=Ne[a]||Ne._default,o.innerHTML=s[1]+i.replace(De,"<$1></$2>")+s[2],u=s[0];u--;)o=o.lastChild;Q.merge(d,o.childNodes),(o=c.firstChild).textContent=""}else d.push(t.createTextNode(i));for(c.textContent="",f=0;i=d[f++];)if((!r||-1===Q.inArray(i,r))&&(l=Q.contains(i.ownerDocument,i),o=v(c.appendChild(i),"script"),l&&g(o),n))for(u=0;i=o[u++];)Pe.test(i.type||"")&&n.push(i);return c},cleanData:function(e){for(var t,n,r,i,o=Q.event.special,a=0;void 0!==(n=e[a]);a++){if(Q.acceptData(n)&&(i=n[me.expando])&&(t=me.cache[i])){if(t.events)for(r in t.events)o[r]?Q.event.remove(n,r):Q.removeEvent(n,r,t.handle);me.cache[i]&&delete me.cache[i]}delete ve.cache[n[ve.expando]]}}}),Q.fn.extend({text:function(e){return ge(this,function(e){return void 0===e?Q.text(this):this.empty().each(function(){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&(this.textContent=e)})},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||f(this,e).appendChild(e)})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=f(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?Q.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||Q.cleanData(v(n)),n.parentNode&&(t&&Q.contains(n.ownerDocument,n)&&g(v(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++)1===e.nodeType&&(Q.cleanData(v(e,!1)),e.textContent="");return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return Q.clone(this,e,t)})},html:function(e){return ge(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e&&1===t.nodeType)return t.innerHTML;if("string"==typeof e&&!Ae.test(e)&&!Ne[(Ee.exec(e)||["",""])[1].toLowerCase()]){e=e.replace(De,"<$1></$2>");try{for(;r>n;n++)1===(t=this[n]||{}).nodeType&&(Q.cleanData(v(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,Q.cleanData(v(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=B.apply([],e);var n,r,i,o,a,s,l=0,u=this.length,c=this,d=u-1,f=e[0],g=Q.isFunction(f);if(g||u>1&&"string"==typeof f&&!X.checkClone&&Re.test(f))return this.each(function(n){var r=c.eq(n);g&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(u&&(n=Q.buildFragment(e,this[0].ownerDocument,!1,this),r=n.firstChild,1===n.childNodes.length&&(n=r),r)){for(o=(i=Q.map(v(n,"script"),p)).length;u>l;l++)a=n,l!==d&&(a=Q.clone(a,!0,!0),o&&Q.merge(i,v(a,"script"))),t.call(this[l],a,l);if(o)for(s=i[i.length-1].ownerDocument,Q.map(i,h),l=0;o>l;l++)a=i[l],Pe.test(a.type||"")&&!me.access(a,"globalEval")&&Q.contains(s,a)&&(a.src?Q._evalUrl&&Q._evalUrl(a.src):Q.globalEval(a.textContent.replace(Oe,"")))}return this}}),Q.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){Q.fn[e]=function(e){for(var n,r=[],i=Q(e),o=i.length-1,a=0;o>=a;a++)n=a===o?this:this.clone(!0),Q(i[a])[t](n),W.apply(r,n.get());return this.pushStack(r)}});var Ie,je={},Ye=/^margin/,ze=new RegExp("^("+xe+")(?!px)[a-z%]+$","i"),He=function(e){return e.ownerDocument.defaultView.getComputedStyle(e,null)};!function(){function t(){a.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",a.innerHTML="",i.appendChild(o);var t=e.getComputedStyle(a,null);n="1%"!==t.top,r="4px"===t.width,i.removeChild(o)}var n,r,i=J.documentElement,o=J.createElement("div"),a=J.createElement("div");a.style&&(a.style.backgroundClip="content-box",a.cloneNode(!0).style.backgroundClip="",X.clearCloneStyle="content-box"===a.style.backgroundClip,o.style.cssText="border:0;width:0;height:0;top:0;left:-9999px;margin-top:1px;position:absolute",o.appendChild(a),e.getComputedStyle&&Q.extend(X,{pixelPosition:function(){return t(),n},boxSizingReliable:function(){return null==r&&t(),r},reliableMarginRight:function(){var t,n=a.appendChild(J.createElement("div"));return n.style.cssText=a.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",n.style.marginRight=n.style.width="0",a.style.width="1px",i.appendChild(o),t=!parseFloat(e.getComputedStyle(n,null).marginRight),i.removeChild(o),t}}))}(),Q.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var Ve=/^(none|table(?!-c[ea]).+)/,Be=new RegExp("^("+xe+")(.*)$","i"),We=new RegExp("^([+-])=("+xe+")","i"),Ue={position:"absolute",visibility:"hidden",display:"block"},Ge={letterSpacing:"0",fontWeight:"400"},qe=["Webkit","O","Moz","ms"];Q.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=w(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=Q.camelCase(t),l=e.style;return t=Q.cssProps[s]||(Q.cssProps[s]=C(l,s)),a=Q.cssHooks[t]||Q.cssHooks[s],void 0===n?a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t]:("string"===(o=typeof n)&&(i=We.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(Q.css(e,t)),o="number"),void(null!=n&&n===n&&("number"!==o||Q.cssNumber[s]||(n+="px"),X.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),a&&"set"in a&&void 0===(n=a.set(e,n,r))||(l[t]=n))))}},css:function(e,t,n,r){var i,o,a,s=Q.camelCase(t);return t=Q.cssProps[s]||(Q.cssProps[s]=C(e.style,s)),(a=Q.cssHooks[t]||Q.cssHooks[s])&&"get"in a&&(i=a.get(e,!0,n)),void 0===i&&(i=w(e,t,r)),"normal"===i&&t in Ge&&(i=Ge[t]),""===n||n?(o=parseFloat(i),!0===n||Q.isNumeric(o)?o||0:i):i}}),Q.each(["height","width"],function(e,t){Q.cssHooks[t]={get:function(e,n,r){return n?Ve.test(Q.css(e,"display"))&&0===e.offsetWidth?Q.swap(e,Ue,function(){return $(e,t,r)}):$(e,t,r):void 0},set:function(e,n,r){var i=r&&He(e);return k(e,n,r?S(e,t,r,"border-box"===Q.css(e,"boxSizing",!1,i),i):0)}}}),Q.cssHooks.marginRight=_(X.reliableMarginRight,function(e,t){return t?Q.swap(e,{display:"inline-block"},w,[e,"marginRight"]):void 0}),Q.each({margin:"",padding:"",border:"Width"},function(e,t){Q.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+we[r]+t]=o[r]||o[r-2]||o[0];return i}},Ye.test(e)||(Q.cssHooks[e+t].set=k)}),Q.fn.extend({css:function(e,t){return ge(this,function(e,t,n){var r,i,o={},a=0;if(Q.isArray(t)){for(r=He(e),i=t.length;i>a;a++)o[t[a]]=Q.css(e,t[a],!1,r);return o}return void 0!==n?Q.style(e,t,n):Q.css(e,t)},e,t,arguments.length>1)},show:function(){return M(this,!0)},hide:function(){return M(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){_e(this)?Q(this).show():Q(this).hide()})}}),Q.Tween=T,T.prototype={constructor:T,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(Q.cssNumber[n]?"":"px")},cur:function(){var e=T.propHooks[this.prop];return e&&e.get?e.get(this):T.propHooks._default.get(this)},run:function(e){var t,n=T.propHooks[this.prop];return this.pos=t=this.options.duration?Q.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):T.propHooks._default.set(this),this}},T.prototype.init.prototype=T.prototype,T.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=Q.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){Q.fx.step[e.prop]?Q.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[Q.cssProps[e.prop]]||Q.cssHooks[e.prop])?Q.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},T.propHooks.scrollTop=T.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},Q.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},Q.fx=T.prototype.init,Q.fx.step={};var Ke,Xe,Je=/^(?:toggle|show|hide)$/,Ze=new RegExp("^(?:([+-])=|)("+xe+")([a-z%]*)$","i"),Qe=/queueHooks$/,et=[A],tt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=Ze.exec(t),o=i&&i[3]||(Q.cssNumber[e]?"":"px"),a=(Q.cssNumber[e]||"px"!==o&&+r)&&Ze.exec(Q.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{s=s||".5",a/=s,Q.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};Q.Animation=Q.extend(P,{tweener:function(e,t){Q.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],tt[n]=tt[n]||[],tt[n].unshift(t)},prefilter:function(e,t){t?et.unshift(e):et.push(e)}}),Q.speed=function(e,t,n){var r=e&&"object"==typeof e?Q.extend({},e):{complete:n||!n&&t||Q.isFunction(e)&&e,duration:e,easing:n&&t||t&&!Q.isFunction(t)&&t};return r.duration=Q.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in Q.fx.speeds?Q.fx.speeds[r.duration]:Q.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){Q.isFunction(r.old)&&r.old.call(this),r.queue&&Q.dequeue(this,r.queue)},r},Q.fn.extend({fadeTo:function(e,t,n,r){return this.filter(_e).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=Q.isEmptyObject(e),o=Q.speed(t,n,r),a=function(){var t=P(this,Q.extend({},e),o);(i||me.get(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=Q.timers,a=me.get(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&Qe.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&Q.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=me.get(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=Q.timers,a=r?r.length:0;for(n.finish=!0,Q.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),Q.each(["toggle","show","hide"],function(e,t){var n=Q.fn[t];Q.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(E(t,!0),e,r,i)}}),Q.each({slideDown:E("show"),slideUp:E("hide"),slideToggle:E("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){Q.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),Q.timers=[],Q.fx.tick=function(){var e,t=0,n=Q.timers;for(Ke=Q.now();t<n.length;t++)(e=n[t])()||n[t]!==e||n.splice(t--,1);n.length||Q.fx.stop(),Ke=void 0},Q.fx.timer=function(e){Q.timers.push(e),e()?Q.fx.start():Q.timers.pop()},Q.fx.interval=13,Q.fx.start=function(){Xe||(Xe=setInterval(Q.fx.tick,Q.fx.interval))},Q.fx.stop=function(){clearInterval(Xe),Xe=null},Q.fx.speeds={slow:600,fast:200,_default:400},Q.fn.delay=function(e,t){return e=Q.fx?Q.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e=J.createElement("input"),t=J.createElement("select"),n=t.appendChild(J.createElement("option"));e.type="checkbox",X.checkOn=""!==e.value,X.optSelected=n.selected,t.disabled=!0,X.optDisabled=!n.disabled,(e=J.createElement("input")).value="t",e.type="radio",X.radioValue="t"===e.value}();var nt,rt=Q.expr.attrHandle;Q.fn.extend({attr:function(e,t){return ge(this,Q.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){Q.removeAttr(this,e)})}}),Q.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===ke?Q.prop(e,t,n):(1===o&&Q.isXMLDoc(e)||(t=t.toLowerCase(),r=Q.attrHooks[t]||(Q.expr.match.bool.test(t)?nt:void 0)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=Q.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void Q.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(fe);if(o&&1===e.nodeType)for(;n=o[i++];)r=Q.propFix[n]||n,Q.expr.match.bool.test(n)&&(e[r]=!1),e.removeAttribute(n)},attrHooks:{type:{set:function(e,t){if(!X.radioValue&&"radio"===t&&Q.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),nt={set:function(e,t,n){return!1===t?Q.removeAttr(e,n):e.setAttribute(n,n),n}},Q.each(Q.expr.match.bool.source.match(/\w+/g),function(e,t){var n=rt[t]||Q.find.attr;rt[t]=function(e,t,r){var i,o;return r||(o=rt[t],rt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,rt[t]=o),i}});var it=/^(?:input|select|textarea|button)$/i;Q.fn.extend({prop:function(e,t){return ge(this,Q.prop,e,t,arguments.length>1)},removeProp:function(e){return this.each(function(){delete this[Q.propFix[e]||e]})}}),Q.extend({propFix:{for:"htmlFor",class:"className"},prop:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return(1!==o||!Q.isXMLDoc(e))&&(t=Q.propFix[t]||t,i=Q.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){return e.hasAttribute("tabindex")||it.test(e.nodeName)||e.href?e.tabIndex:-1}}}}),X.optSelected||(Q.propHooks.selected={get:function(e){var t=e.parentNode;return t&&t.parentNode&&t.parentNode.selectedIndex,null}}),Q.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Q.propFix[this.toLowerCase()]=this});var ot=/[\t\r\n\f]/g;Q.fn.extend({addClass:function(e){var t,n,r,i,o,a,s="string"==typeof e&&e,l=0,u=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).addClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(fe)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=Q.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0===arguments.length||"string"==typeof e&&e,l=0,u=this.length;if(Q.isFunction(e))return this.each(function(t){Q(this).removeClass(e.call(this,t,this.className))});if(s)for(t=(e||"").match(fe)||[];u>l;l++)if(n=this[l],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(ot," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?Q.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(Q.isFunction(e)?function(n){Q(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=Q(this),o=e.match(fe)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===ke||"boolean"===n)&&(this.className&&me.set(this,"__className__",this.className),this.className=this.className||!1===e?"":me.get(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(ot," ").indexOf(t)>=0)return!0;return!1}});var at=/\r/g;Q.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=Q.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,Q(this).val()):e,null==i?i="":"number"==typeof i?i+="":Q.isArray(i)&&(i=Q.map(i,function(e){return null==e?"":e+""})),(t=Q.valHooks[this.type]||Q.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=Q.valHooks[i.type]||Q.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(at,""):null==n?"":n)):void 0}}),Q.extend({valHooks:{option:{get:function(e){var t=Q.find.attr(e,"value");return null!=t?t:Q.trim(Q.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(!(!(n=r[l]).selected&&l!==i||(X.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&Q.nodeName(n.parentNode,"optgroup"))){if(t=Q(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=Q.makeArray(t),a=i.length;a--;)r=i[a],(r.selected=Q.inArray(r.value,o)>=0)&&(n=!0);return n||(e.selectedIndex=-1),o}}}}),Q.each(["radio","checkbox"],function(){Q.valHooks[this]={set:function(e,t){return Q.isArray(t)?e.checked=Q.inArray(Q(e).val(),t)>=0:void 0}},X.checkOn||(Q.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})}),Q.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){Q.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),Q.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var st=Q.now(),lt=/\?/;Q.parseJSON=function(e){return JSON.parse(e+"")},Q.parseXML=function(e){var t,n;if(!e||"string"!=typeof e)return null;try{n=new DOMParser,t=n.parseFromString(e,"text/xml")}catch(e){t=void 0}return(!t||t.getElementsByTagName("parsererror").length)&&Q.error("Invalid XML: "+e),t};var ut,ct,dt=/#.*$/,ft=/([?&])_=[^&]*/,pt=/^(.*?):[ \t]*([^\r\n]*)$/gm,ht=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,gt=/^(?:GET|HEAD)$/,mt=/^\/\//,vt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,yt={},bt={},xt="*/".concat("*");try{ct=location.href}catch(e){(ct=J.createElement("a")).href="",ct=ct.href}ut=vt.exec(ct.toLowerCase())||[],Q.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:ct,type:"GET",isLocal:ht.test(ut[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":xt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":Q.parseJSON,"text xml":Q.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?N(N(e,Q.ajaxSettings),t):N(Q.ajaxSettings,e)},ajaxPrefilter:F(yt),ajaxTransport:F(bt),ajax:function(e,t){function n(e,t,n,a){var l,c,v,y,x,_=t;2!==b&&(b=2,s&&clearTimeout(s),r=void 0,o=a||"",w.readyState=e>0?4:0,l=e>=200&&300>e||304===e,n&&(y=I(d,w,n)),y=j(d,y,w,l),l?(d.ifModified&&((x=w.getResponseHeader("Last-Modified"))&&(Q.lastModified[i]=x),(x=w.getResponseHeader("etag"))&&(Q.etag[i]=x)),204===e||"HEAD"===d.type?_="nocontent":304===e?_="notmodified":(_=y.state,c=y.data,v=y.error,l=!v)):(v=_,(e||!_)&&(_="error",0>e&&(e=0))),w.status=e,w.statusText=(t||_)+"",l?h.resolveWith(f,[c,_,w]):h.rejectWith(f,[w,_,v]),w.statusCode(m),m=void 0,u&&p.trigger(l?"ajaxSuccess":"ajaxError",[w,d,l?c:v]),g.fireWith(f,[w,_]),u&&(p.trigger("ajaxComplete",[w,d]),--Q.active||Q.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,u,c,d=Q.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?Q(f):Q.event,h=Q.Deferred(),g=Q.Callbacks("once memory"),m=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!a)for(a={};t=pt.exec(o);)a[t[1].toLowerCase()]=t[2];t=a[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?o:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)m[t]=[m[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return r&&r.abort(t),n(0,t),this}};if(h.promise(w).complete=g.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||ct)+"").replace(dt,"").replace(mt,ut[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=Q.trim(d.dataType||"*").toLowerCase().match(fe)||[""],null==d.crossDomain&&(l=vt.exec(d.url.toLowerCase()),d.crossDomain=!(!l||l[1]===ut[1]&&l[2]===ut[2]&&(l[3]||("http:"===l[1]?"80":"443"))===(ut[3]||("http:"===ut[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=Q.param(d.data,d.traditional)),O(yt,d,t,w),2===b)return w;(u=d.global)&&0==Q.active++&&Q.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!gt.test(d.type),i=d.url,d.hasContent||(d.data&&(i=d.url+=(lt.test(i)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=ft.test(i)?i.replace(ft,"$1_="+st++):i+(lt.test(i)?"&":"?")+"_="+st++)),d.ifModified&&(Q.lastModified[i]&&w.setRequestHeader("If-Modified-Since",Q.lastModified[i]),Q.etag[i]&&w.setRequestHeader("If-None-Match",Q.etag[i])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+xt+"; q=0.01":""):d.accepts["*"]);for(c in d.headers)w.setRequestHeader(c,d.headers[c]);if(d.beforeSend&&(!1===d.beforeSend.call(f,w,d)||2===b))return w.abort();x="abort";for(c in{success:1,error:1,complete:1})w[c](d[c]);if(r=O(bt,d,t,w)){w.readyState=1,u&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,r.send(v,n)}catch(e){if(!(2>b))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return Q.get(e,t,n,"json")},getScript:function(e,t){return Q.get(e,void 0,t,"script")}}),Q.each(["get","post"],function(e,t){Q[t]=function(e,n,r,i){return Q.isFunction(n)&&(i=i||r,r=n,n=void 0),Q.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),Q.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){Q.fn[t]=function(e){return this.on(t,e)}}),Q._evalUrl=function(e){return Q.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,throws:!0})},Q.fn.extend({wrapAll:function(e){var t;return Q.isFunction(e)?this.each(function(t){Q(this).wrapAll(e.call(this,t))}):(this[0]&&(t=Q(e,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstElementChild;)e=e.firstElementChild;return e}).append(this)),this)},wrapInner:function(e){return this.each(Q.isFunction(e)?function(t){Q(this).wrapInner(e.call(this,t))}:function(){var t=Q(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=Q.isFunction(e);return this.each(function(n){Q(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){Q.nodeName(this,"body")||Q(this).replaceWith(this.childNodes)}).end()}}),Q.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0},Q.expr.filters.visible=function(e){return!Q.expr.filters.hidden(e)};var wt=/%20/g,_t=/\[\]$/,Ct=/\r?\n/g,kt=/^(?:submit|button|image|reset|file)$/i,St=/^(?:input|select|textarea|keygen)/i;Q.param=function(e,t){var n,r=[],i=function(e,t){t=Q.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=Q.ajaxSettings&&Q.ajaxSettings.traditional),Q.isArray(e)||e.jquery&&!Q.isPlainObject(e))Q.each(e,function(){i(this.name,this.value)});else for(n in e)Y(n,e[n],t,i);return r.join("&").replace(wt,"+")},Q.fn.extend({serialize:function(){return Q.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=Q.prop(this,"elements");return e?Q.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!Q(this).is(":disabled")&&St.test(this.nodeName)&&!kt.test(e)&&(this.checked||!Ce.test(e))}).map(function(e,t){var n=Q(this).val();return null==n?null:Q.isArray(n)?Q.map(n,function(e){return{name:t.name,value:e.replace(Ct,"\r\n")}}):{name:t.name,value:n.replace(Ct,"\r\n")}}).get()}}),Q.ajaxSettings.xhr=function(){try{return new XMLHttpRequest}catch(e){}};var $t=0,Mt={},Tt={0:200,1223:204},Dt=Q.ajaxSettings.xhr();e.ActiveXObject&&Q(e).on("unload",function(){for(var e in Mt)Mt[e]()}),X.cors=!!Dt&&"withCredentials"in Dt,X.ajax=Dt=!!Dt,Q.ajaxTransport(function(e){var t;return X.cors||Dt&&!e.crossDomain?{send:function(n,r){var i,o=e.xhr(),a=++$t;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)o.setRequestHeader(i,n[i]);t=function(e){return function(){t&&(delete Mt[a],t=o.onload=o.onerror=null,"abort"===e?o.abort():"error"===e?r(o.status,o.statusText):r(Tt[o.status]||o.status,o.statusText,"string"==typeof o.responseText?{text:o.responseText}:void 0,o.getAllResponseHeaders()))}},o.onload=t(),o.onerror=t("error"),t=Mt[a]=t("abort");try{o.send(e.hasContent&&e.data||null)}catch(e){if(t)throw e}},abort:function(){t&&t()}}:void 0}),Q.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return Q.globalEval(e),e}}}),Q.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET")}),Q.ajaxTransport("script",function(e){if(e.crossDomain){var t,n;return{send:function(r,i){t=Q("<script>").prop({async:!0,charset:e.scriptCharset,src:e.url}).on("load error",n=function(e){t.remove(),n=null,e&&i("error"===e.type?404:200,e.type)}),J.head.appendChild(t[0])},abort:function(){n&&n()}}}});var Et=[],Lt=/(=)\?(?=&|$)|\?\?/;Q.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Et.pop()||Q.expando+"_"+st++;return this[e]=!0,e}}),Q.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Lt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Lt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=Q.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Lt,"$1"+i):!1!==t.jsonp&&(t.url+=(lt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||Q.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Et.push(i)),a&&Q.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),Q.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||J;var r=ae.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=Q.buildFragment([e],t,i),i&&i.length&&Q(i).remove(),Q.merge([],r.childNodes))};var At=Q.fn.load;Q.fn.load=function(e,t,n){if("string"!=typeof e&&At)return At.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=Q.trim(e.slice(s)),e=e.slice(0,s)),Q.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(i="POST"),a.length>0&&Q.ajax({url:e,type:i,dataType:"html",data:t}).done(function(e){o=arguments,a.html(r?Q("<div>").append(Q.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,o||[e.responseText,t,e])}),this},Q.expr.filters.animated=function(e){return Q.grep(Q.timers,function(t){return e===t.elem}).length};var Rt=e.document.documentElement;Q.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u=Q.css(e,"position"),c=Q(e),d={};"static"===u&&(e.style.position="relative"),s=c.offset(),o=Q.css(e,"top"),l=Q.css(e,"left"),("absolute"===u||"fixed"===u)&&(o+l).indexOf("auto")>-1?(r=c.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),Q.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(d.top=t.top-s.top+a),null!=t.left&&(d.left=t.left-s.left+i),"using"in t?t.using.call(e,d):c.css(d)}},Q.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){Q.offset.setOffset(this,e,t)});var t,n,r=this[0],i={top:0,left:0},o=r&&r.ownerDocument;return o?(t=o.documentElement,Q.contains(t,r)?(typeof r.getBoundingClientRect!==ke&&(i=r.getBoundingClientRect()),n=z(o),{top:i.top+n.pageYOffset-t.clientTop,left:i.left+n.pageXOffset-t.clientLeft}):i):void 0},position:function(){if(this[0]){var e,t,n=this[0],r={top:0,left:0};return"fixed"===Q.css(n,"position")?t=n.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),Q.nodeName(e[0],"html")||(r=e.offset()),r.top+=Q.css(e[0],"borderTopWidth",!0),r.left+=Q.css(e[0],"borderLeftWidth",!0)),{top:t.top-r.top-Q.css(n,"marginTop",!0),left:t.left-r.left-Q.css(n,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||Rt;e&&!Q.nodeName(e,"html")&&"static"===Q.css(e,"position");)e=e.offsetParent;return e||Rt})}}),Q.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(t,n){var r="pageYOffset"===n;Q.fn[t]=function(i){return ge(this,function(t,i,o){var a=z(t);return void 0===o?a?a[n]:t[i]:void(a?a.scrollTo(r?e.pageXOffset:o,r?o:e.pageYOffset):t[i]=o)},t,i,arguments.length,null)}}),Q.each(["top","left"],function(e,t){Q.cssHooks[t]=_(X.pixelPosition,function(e,n){return n?(n=w(e,t),ze.test(n)?Q(e).position()[t]+"px":n):void 0})}),Q.each({Height:"height",Width:"width"},function(e,t){Q.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){Q.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return ge(this,function(t,n,r){var i;return Q.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?Q.css(t,n,a):Q.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),Q.fn.size=function(){return this.length},Q.fn.andSelf=Q.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Q});var Pt=e.jQuery,Ft=e.$;return Q.noConflict=function(t){return e.$===Q&&(e.$=Ft),t&&e.jQuery===Q&&(e.jQuery=Pt),Q},typeof t===ke&&(e.jQuery=e.$=Q),Q}),function(){function e(e,t){return e.set(t[0],t[1]),e}function t(e,t){return e.add(t),e}function n(e,t,n){switch(n.length){case 0:return e.call(t);case 1:return e.call(t,n[0]);case 2:return e.call(t,n[0],n[1]);case 3:return e.call(t,n[0],n[1],n[2])}return e.apply(t,n)}function r(e,t,n,r){for(var i=-1,o=e.length;++i<o;){var a=e[i];t(r,a,n(a),e)}return r}function i(e,t){for(var n=-1,r=e.length,i=-1,o=t.length,a=Array(r+o);++n<r;)a[n]=e[n];for(;++i<o;)a[n++]=t[i];return a}function o(e,t){for(var n=-1,r=e.length;++n<r&&!1!==t(e[n],n,e););return e}function a(e,t){for(var n=e.length;n--&&!1!==t(e[n],n,e););return e}function s(e,t){for(var n=-1,r=e.length;++n<r;)if(!t(e[n],n,e))return!1;return!0}function l(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];t(a,n,e)&&(o[i++]=a)}return o}function u(e,t){return!!e.length&&b(e,t,0)>-1}function c(e,t,n){for(var r=-1,i=e.length;++r<i;)if(n(t,e[r]))return!0;return!1}function d(e,t){for(var n=-1,r=e.length,i=Array(r);++n<r;)i[n]=t(e[n],n,e);return i}function f(e,t){for(var n=-1,r=t.length,i=e.length;++n<r;)e[i+n]=t[n];return e}function p(e,t,n,r){var i=-1,o=e.length;for(r&&o&&(n=e[++i]);++i<o;)n=t(n,e[i],i,e);return n}function h(e,t,n,r){var i=e.length;for(r&&i&&(n=e[--i]);i--;)n=t(n,e[i],i,e);return n}function g(e,t){for(var n=-1,r=e.length;++n<r;)if(t(e[n],n,e))return!0;return!1}function m(e,t,n){for(var r=-1,i=e.length;++r<i;){var o=e[r],a=t(o);if(null!=a&&(s===X?a===a:n(a,s)))var s=a,l=o}return l}function v(e,t,n,r){var i;return n(e,function(e,n,o){if(t(e,n,o))return i=r?n:e,!1}),i}function y(e,t,n){for(var r=e.length,i=n?r:-1;n?i--:++i<r;)if(t(e[i],i,e))return i;return-1}function b(e,t,n){if(t!==t)return j(e,n);for(var r=n-1,i=e.length;++r<i;)if(e[r]===t)return r;return-1}function x(e,t,n,r){for(var i=n-1,o=e.length;++i<o;)if(r(e[i],t))return i;return-1}function w(e,t){var n=e?e.length:0;return n?k(e,t)/n:ke}function _(e,t,n,r,i){return i(e,function(e,i,o){n=r?(r=!1,e):t(n,e,i,o)}),n}function C(e,t){var n=e.length;for(e.sort(t);n--;)e[n]=e[n].value;return e}function k(e,t){for(var n,r=-1,i=e.length;++r<i;){var o=t(e[r]);o!==X&&(n=n===X?o:n+o)}return n}function S(e,t){for(var n=-1,r=Array(e);++n<e;)r[n]=t(n);return r}function $(e,t){return d(t,function(t){return[t,e[t]]})}function M(e){return function(t){return e(t)}}function T(e,t){return d(t,function(t){return e[t]})}function D(e,t){for(var n=-1,r=e.length;++n<r&&b(t,e[n],0)>-1;);return n}function E(e,t){for(var n=e.length;n--&&b(t,e[n],0)>-1;);return n}function L(e){return e&&e.Object===Object?e:null}function A(e,t){if(e!==t){var n=null===e,r=e===X,i=e===e,o=null===t,a=t===X,s=t===t;if(e>t&&!o||!i||n&&!a&&s||r&&s)return 1;if(e<t&&!n||!s||o&&!r&&i||a&&i)return-1}return 0}function R(e,t,n){for(var r=-1,i=e.criteria,o=t.criteria,a=i.length,s=n.length;++r<a;){var l=A(i[r],o[r]);if(l)return r>=s?l:l*("desc"==n[r]?-1:1)}return e.index-t.index}function P(e,t){for(var n=e.length,r=0;n--;)e[n]===t&&r++;return r}function F(e){return function(t,n){var r;return t===X&&n===X?0:(t!==X&&(r=t),n!==X&&(r=r===X?n:e(r,n)),r)}}function O(e){return nn[e]}function N(e){return rn[e]}function I(e){return"\\"+sn[e]}function j(e,t,n){for(var r=e.length,i=t+(n?0:-1);n?i--:++i<r;){var o=e[i];if(o!==o)return i}return-1}function Y(e){var t=!1;if(null!=e&&"function"!=typeof e.toString)try{t=!!(e+"")}catch(e){}return t}function z(e,t){return e="number"==typeof e||Tt.test(e)?+e:-1,t=null==t?_e:t,e>-1&&e%1==0&&e<t}function H(e){for(var t,n=[];!(t=e.next()).done;)n.push(t.value);return n}function V(e){var t=-1,n=Array(e.size);return e.forEach(function(e,r){n[++t]=[r,e]}),n}function B(e,t){for(var n=-1,r=e.length,i=0,o=[];++n<r;){var a=e[n];a!==t&&a!==te||(e[n]=te,o[i++]=n)}return o}function W(e){var t=-1,n=Array(e.size);return e.forEach(function(e){n[++t]=e}),n}function U(e){if(!e||!qt.test(e))return e.length;for(var t=Gt.lastIndex=0;Gt.test(e);)t++;return t}function G(e){return e.match(Gt)}function q(e){return on[e]}function K(L){function Tt(e){if(ts(e)&&!Vc(e)&&!(e instanceof Pt)){if(e instanceof Rt)return e;if(su.call(e,"__wrapped__"))return Ui(e)}return new Rt(e)}function At(){}function Rt(e,t){this.__wrapped__=e,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=X}function Pt(e){this.__wrapped__=e,this.__actions__=[],this.__dir__=1,this.__filtered__=!1,this.__iteratees__=[],this.__takeCount__=Se,this.__views__=[]}function Ft(){var e=new Pt(this.__wrapped__);return e.__actions__=Ur(this.__actions__),e.__dir__=this.__dir__,e.__filtered__=this.__filtered__,e.__iteratees__=Ur(this.__iteratees__),e.__takeCount__=this.__takeCount__,e.__views__=Ur(this.__views__),e}function Ot(){if(this.__filtered__){var e=new Pt(this);e.__dir__=-1,e.__filtered__=!0}else(e=this.clone()).__dir__*=-1;return e}function Nt(){var e=this.__wrapped__.value(),t=this.__dir__,n=Vc(e),r=t<0,i=n?e.length:0,o=Ti(0,i,this.__views__),a=o.start,s=o.end,l=s-a,u=r?s:a-1,c=this.__iteratees__,d=c.length,f=0,p=Au(l,this.__takeCount__);if(!n||i<Z||i==l&&p==l)return Rr(e,this.__actions__);var h=[];e:for(;l--&&f<p;){for(var g=-1,m=e[u+=t];++g<d;){var v=c[g],y=v.iteratee,b=v.type,x=y(m);if(b==be)m=x;else if(!x){if(b==ye)continue e;break e}}h[f++]=m}return h}function It(){}function jt(e,t){return zt(e,t)&&delete e[t]}function Yt(e,t){if(zu){var n=e[t];return n===ee?X:n}return su.call(e,t)?e[t]:X}function zt(e,t){return zu?e[t]!==X:su.call(e,t)}function Ht(e,t,n){e[t]=zu&&n===X?ee:n}function Vt(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function Bt(){this.__data__={hash:new It,map:Nu?new Nu:[],string:new It}}function Wt(e){var t=this.__data__;return Oi(e)?jt("string"==typeof e?t.string:t.hash,e):Nu?t.map.delete(e):bn(t.map,e)}function Gt(e){var t=this.__data__;return Oi(e)?Yt("string"==typeof e?t.string:t.hash,e):Nu?t.map.get(e):xn(t.map,e)}function nn(e){var t=this.__data__;return Oi(e)?zt("string"==typeof e?t.string:t.hash,e):Nu?t.map.has(e):wn(t.map,e)}function rn(e,t){var n=this.__data__;return Oi(e)?Ht("string"==typeof e?n.string:n.hash,e,t):Nu?n.map.set(e,t):Cn(n.map,e,t),this}function on(e){var t=-1,n=e?e.length:0;for(this.__data__=new Vt;++t<n;)this.push(e[t])}function an(e,t){var n=e.__data__;if(Oi(t)){var r=n.__data__;return("string"==typeof t?r.string:r.hash)[t]===ee}return n.has(t)}function sn(e){var t=this.__data__;if(Oi(e)){var n=t.__data__;("string"==typeof e?n.string:n.hash)[e]=ee}else t.set(e,ee)}function cn(e){var t=-1,n=e?e.length:0;for(this.clear();++t<n;){var r=e[t];this.set(r[0],r[1])}}function dn(){this.__data__={array:[],map:null}}function pn(e){var t=this.__data__,n=t.array;return n?bn(n,e):t.map.delete(e)}function hn(e){var t=this.__data__,n=t.array;return n?xn(n,e):t.map.get(e)}function gn(e){var t=this.__data__,n=t.array;return n?wn(n,e):t.map.has(e)}function mn(e,t){var n=this.__data__,r=n.array;r&&(r.length<Z-1?Cn(r,e,t):(n.array=null,n.map=new Vt(r)));var i=n.map;return i&&i.set(e,t),this}function bn(e,t){var n=_n(e,t);return!(n<0)&&(n==e.length-1?e.pop():ku.call(e,n,1),!0)}function xn(e,t){var n=_n(e,t);return n<0?X:e[n][1]}function wn(e,t){return _n(e,t)>-1}function _n(e,t){for(var n=e.length;n--;)if(Oa(e[n][0],t))return n;return-1}function Cn(e,t,n){var r=_n(e,t);r<0?e.push([t,n]):e[r][1]=n}function kn(e,t,n,r){return e===X||Oa(e,ou[n])&&!su.call(r,n)?t:e}function Sn(e,t,n){(n===X||Oa(e[t],n))&&("number"!=typeof t||n!==X||t in e)||(e[t]=n)}function $n(e,t,n){var r=e[t];su.call(e,t)&&Oa(r,n)&&(n!==X||t in e)||(e[t]=n)}function Mn(e,t,n,r){return Qu(e,function(e,i,o){t(r,e,n(e),o)}),r}function Tn(e,t){return e&&Gr(t,zs(t),e)}function Dn(e,t){for(var n=-1,r=null==e,i=t.length,o=Array(i);++n<i;)o[n]=r?X:Is(e,t[n]);return o}function En(e){return Ha(e)?e:[]}function Ln(e){return"function"==typeof e?e:Al}function An(e){return"string"==typeof e||gs(e)?e:e+""}function Rn(e){return Vc(e)?e:uc(e)}function Pn(e,t,n){return e===e&&(n!==X&&(e=e<=n?e:n),t!==X&&(e=e>=t?e:t)),e}function Fn(e,t,n,r,i,a,s){var l;if(r&&(l=a?r(e,i,a,s):r(e)),l!==X)return l;if(!es(e))return e;var u=Vc(e);if(u){if(l=Ei(e),!t)return Ur(e,l)}else{var c=Mi(e),d=c==Re||c==Pe;if(Bc(e))return Or(e,t);if(c==Ne||c==Te||d&&!a){if(Y(e))return a?e:{};if(l=Li(d?{}:e),!t)return Kr(e,Tn(l,e))}else{if(!tn[c])return a?e:{};l=Ai(e,c,Fn,t)}}s||(s=new cn);var f=s.get(e);if(f)return f;if(s.set(e,l),!u)var p=n?yi(e):zs(e);return o(p||e,function(i,o){p&&(i=e[o=i]),$n(l,o,Fn(i,t,n,r,o,e,s))}),l}function On(e){var t=zs(e),n=t.length;return function(r){if(null==r)return!n;for(var i=n;i--;){var o=t[i],a=e[o],s=r[o];if(s===X&&!(o in Object(r))||!a(s))return!1}return!0}}function Nn(e){return es(e)?wu(e):{}}function In(e,t,n){if("function"!=typeof e)throw new ru(Q);return Cu(function(){e.apply(X,n)},t)}function jn(e,t,n,r){var i=-1,o=u,a=!0,s=e.length,l=[],f=t.length;if(!s)return l;n&&(t=d(t,M(n))),r?(o=c,a=!1):t.length>=Z&&(o=an,a=!1,t=new on(t));e:for(;++i<s;){var p=e[i],h=n?n(p):p;if(a&&h===h){for(var g=f;g--;)if(t[g]===h)continue e;l.push(p)}else o(t,h,r)||l.push(p)}return l}function Yn(e,t){var n=!0;return Qu(e,function(e,r,i){return n=!!t(e,r,i)}),n}function zn(e,t,n,r){var i=e.length;for((n=Cs(n))<0&&(n=-n>i?0:i+n),(r=r===X||r>i?i:Cs(r))<0&&(r+=i),r=n>r?0:ks(r);n<r;)e[n++]=t;return e}function Hn(e,t){var n=[];return Qu(e,function(e,r,i){t(e,r,i)&&n.push(e)}),n}function Vn(e,t,n,r){r||(r=[]);for(var i=-1,o=e.length;++i<o;){var a=e[i];t>0&&Ha(a)&&(n||Vc(a)||ja(a))?t>1?Vn(a,t-1,n,r):f(r,a):n||(r[r.length]=a)}return r}function Bn(e,t){return e&&tc(e,t,zs)}function Wn(e,t){return e&&nc(e,t,zs)}function Un(e,t){return l(t,function(t){return Ja(e[t])})}function Gn(e,t){for(var n=0,r=(t=Fi(t,e)?[t]:Rn(t)).length;null!=e&&n<r;)e=e[t[n++]];return n&&n==r?e:X}function qn(e,t,n){var r=t(e);return Vc(e)?r:f(r,n(e))}function Kn(e,t){return su.call(e,t)||"object"==typeof e&&t in e&&null===Si(e)}function Xn(e,t){return t in Object(e)}function Jn(e,t,n){return e>=Au(t,n)&&e<Lu(t,n)}function Zn(e,t,n){for(var r=n?c:u,i=e[0].length,o=e.length,a=o,s=Array(o),l=1/0,f=[];a--;){var p=e[a];a&&t&&(p=d(p,M(t))),l=Au(p.length,l),s[a]=!n&&(t||i>=120&&p.length>=120)?new on(a&&p):X}p=e[0];var h=-1,g=s[0];e:for(;++h<i&&f.length<l;){var m=p[h],v=t?t(m):m;if(!(g?an(g,v):r(f,v,n))){for(a=o;--a;){var y=s[a];if(!(y?an(y,v):r(e[a],v,n)))continue e}g&&g.push(v),f.push(m)}}return f}function Qn(e,t,n,r){return Bn(e,function(e,i,o){t(r,n(e),i,o)}),r}function er(e,t,r){Fi(t,e)||(e=Vi(e,t=Rn(t)),t=fo(t));var i=null==e?e:e[t];return null==i?X:n(i,e,r)}function tr(e,t,n,r,i){return e===t||(null==e||null==t||!es(e)&&!ts(t)?e!==e&&t!==t:nr(e,t,tr,n,r,i))}function nr(e,t,n,r,i,o){var a=Vc(e),s=Vc(t),l=De,u=De;a||(l=(l=Mi(e))==Te?Ne:l),s||(u=(u=Mi(t))==Te?Ne:u);var c=l==Ne&&!Y(e),d=u==Ne&&!Y(t),f=l==u;if(f&&!c)return o||(o=new cn),a||ms(e)?gi(e,t,n,r,i,o):mi(e,t,l,n,r,i,o);if(!(i&pe)){var p=c&&su.call(e,"__wrapped__"),h=d&&su.call(t,"__wrapped__");if(p||h){var g=p?e.value():e,m=h?t.value():t;return o||(o=new cn),n(g,m,r,i,o)}}return!!f&&(o||(o=new cn),vi(e,t,n,r,i,o))}function rr(e,t,n,r){var i=n.length,o=i,a=!r;if(null==e)return!o;for(e=Object(e);i--;){var s=n[i];if(a&&s[2]?s[1]!==e[s[0]]:!(s[0]in e))return!1}for(;++i<o;){var l=(s=n[i])[0],u=e[l],c=s[1];if(a&&s[2]){if(u===X&&!(l in e))return!1}else{var d=new cn;if(r)var f=r(u,c,l,e,t,d);if(!(f===X?tr(c,u,r,fe|pe,d):f))return!1}}return!0}function ir(e){return"function"==typeof e?e:null==e?Al:"object"==typeof e?Vc(e)?ur(e[0],e[1]):lr(e):Yl(e)}function or(e){return Eu(Object(e))}function ar(e){e=null==e?e:Object(e);var t=[];for(var n in e)t.push(n);return t}function sr(e,t){var n=-1,r=za(e)?Array(e.length):[];return Qu(e,function(e,i,o){r[++n]=t(e,i,o)}),r}function lr(e){var t=_i(e);return 1==t.length&&t[0][2]?Yi(t[0][0],t[0][1]):function(n){return n===e||rr(n,e,t)}}function ur(e,t){return Fi(e)&&ji(t)?Yi(e,t):function(n){var r=Is(n,e);return r===X&&r===t?Ys(n,e):tr(t,r,X,fe|pe)}}function cr(e,t,n,r,i){if(e!==t){if(!Vc(t)&&!ms(t))var a=Hs(t);o(a||t,function(o,s){if(a&&(o=t[s=o]),es(o))i||(i=new cn),dr(e,t,s,n,cr,r,i);else{var l=r?r(e[s],o,s+"",e,t,i):X;l===X&&(l=o),Sn(e,s,l)}})}}function dr(e,t,n,r,i,o,a){var s=e[n],l=t[n],u=a.get(l);if(u)Sn(e,n,u);else{var c=o?o(s,l,n+"",e,t,a):X,d=c===X;d&&(c=l,Vc(l)||ms(l)?Vc(s)?c=s:Ha(s)?c=Ur(s):(d=!1,c=Fn(l,!0)):cs(l)||ja(l)?ja(s)?c=$s(s):!es(s)||r&&Ja(s)?(d=!1,c=Fn(l,!0)):c=s:d=!1),a.set(l,c),d&&i(c,l,r,o,a),a.delete(l),Sn(e,n,c)}}function fr(e,t,n){var r=-1;return t=d(t.length?t:[Al],wi()),C(sr(e,function(e,n,i){return{criteria:d(t,function(t){return t(e)}),index:++r,value:e}}),function(e,t){return R(e,t,n)})}function pr(e,t){return e=Object(e),p(t,function(t,n){return n in e&&(t[n]=e[n]),t},{})}function hr(e,t){for(var n=-1,r=bi(e),i=r.length,o={};++n<i;){var a=r[n],s=e[a];t(s,a)&&(o[a]=s)}return o}function gr(e){return function(t){return null==t?X:t[e]}}function mr(e){return function(t){return Gn(t,e)}}function vr(e,t,n,r){var i=r?x:b,o=-1,a=t.length,s=e;for(n&&(s=d(e,M(n)));++o<a;)for(var l=0,u=t[o],c=n?n(u):u;(l=i(s,c,l,r))>-1;)s!==e&&ku.call(s,l,1),ku.call(e,l,1);return e}function yr(e,t){for(var n=e?t.length:0,r=n-1;n--;){var i=t[n];if(r==n||i!=o){var o=i;if(z(i))ku.call(e,i,1);else if(Fi(i,e))delete e[i];else{var a=Rn(i),s=Vi(e,a);null!=s&&delete s[fo(a)]}}}return e}function br(e,t){return e+$u(Pu()*(t-e+1))}function xr(e,t,n,r){for(var i=-1,o=Lu(Su((t-e)/(n||1)),0),a=Array(o);o--;)a[r?o:++i]=e,e+=n;return a}function wr(e,t){var n="";if(!e||t<1||t>_e)return n;do{t%2&&(n+=e),(t=$u(t/2))&&(e+=e)}while(t);return n}function _r(e,t,n,r){for(var i=-1,o=(t=Fi(t,e)?[t]:Rn(t)).length,a=o-1,s=e;null!=s&&++i<o;){var l=t[i];if(es(s)){var u=n;if(i!=a){var c=s[l];(u=r?r(c,l,s):X)===X&&(u=null==c?z(t[i+1])?[]:{}:c)}$n(s,l,u)}s=s[l]}return e}function Cr(e,t,n){var r=-1,i=e.length;t<0&&(t=-t>i?0:i+t),(n=n>i?i:n)<0&&(n+=i),i=t>n?0:n-t>>>0,t>>>=0;for(var o=Array(i);++r<i;)o[r]=e[r+t];return o}function kr(e,t){var n;return Qu(e,function(e,r,i){return!(n=t(e,r,i))}),!!n}function Sr(e,t,n){var r=0,i=e?e.length:r;if("number"==typeof t&&t===t&&i<=Me){for(;r<i;){var o=r+i>>>1,a=e[o];(n?a<=t:a<t)&&null!==a?r=o+1:i=o}return i}return $r(e,t,Al,n)}function $r(e,t,n,r){t=n(t);for(var i=0,o=e?e.length:0,a=t!==t,s=null===t,l=t===X;i<o;){var u=$u((i+o)/2),c=n(e[u]),d=c!==X,f=c===c;if(a)var p=f||r;else p=s?f&&d&&(r||null!=c):l?f&&(r||d):null!=c&&(r?c<=t:c<t);p?i=u+1:o=u}return Au(o,$e)}function Mr(e){return Tr(e)}function Tr(e,t){for(var n=0,r=e.length,i=e[0],o=t?t(i):i,a=o,s=1,l=[i];++n<r;)i=e[n],Oa(o=t?t(i):i,a)||(a=o,l[s++]=i);return l}function Dr(e,t,n){var r=-1,i=u,o=e.length,a=!0,s=[],l=s;if(n)a=!1,i=c;else if(o>=Z){var d=t?null:ic(e);if(d)return W(d);a=!1,i=an,l=new on}else l=t?[]:s;e:for(;++r<o;){var f=e[r],p=t?t(f):f;if(a&&p===p){for(var h=l.length;h--;)if(l[h]===p)continue e;t&&l.push(p),s.push(f)}else i(l,p,n)||(l!==s&&l.push(p),s.push(f))}return s}function Er(e,t){e=Vi(e,t=Fi(t,e)?[t]:Rn(t));var n=fo(t);return null==e||!js(e,n)||delete e[n]}function Lr(e,t,n,r){return _r(e,t,n(Gn(e,t)),r)}function Ar(e,t,n,r){for(var i=e.length,o=r?i:-1;(r?o--:++o<i)&&t(e[o],o,e););return n?Cr(e,r?0:o,r?o+1:i):Cr(e,r?o+1:0,r?i:o)}function Rr(e,t){var n=e;return n instanceof Pt&&(n=n.value()),p(t,function(e,t){return t.func.apply(t.thisArg,f([e],t.args))},n)}function Pr(e,t,n){for(var r=-1,i=e.length;++r<i;)var o=o?f(jn(o,e[r],t,n),jn(e[r],o,t,n)):e[r];return o&&o.length?Dr(o,t,n):[]}function Fr(e,t,n){for(var r=-1,i=e.length,o=t.length,a={};++r<i;){var s=r<o?t[r]:X;n(a,e[r],s)}return a}function Or(e,t){if(t)return e.slice();var n=new e.constructor(e.length);return e.copy(n),n}function Nr(e){var t=new e.constructor(e.byteLength);return new mu(t).set(new mu(e)),t}function Ir(e,t){var n=t?Nr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.byteLength)}function jr(t,n,r){return p(n?r(V(t),!0):V(t),e,new t.constructor)}function Yr(e){var t=new e.constructor(e.source,_t.exec(e));return t.lastIndex=e.lastIndex,t}function zr(e,n,r){return p(n?r(W(e),!0):W(e),t,new e.constructor)}function Hr(e){return Ju?Object(Ju.call(e)):{}}function Vr(e,t){var n=t?Nr(e.buffer):e.buffer;return new e.constructor(n,e.byteOffset,e.length)}function Br(e,t,n,r){for(var i=-1,o=e.length,a=n.length,s=-1,l=t.length,u=Lu(o-a,0),c=Array(l+u),d=!r;++s<l;)c[s]=t[s];for(;++i<a;)(d||i<o)&&(c[n[i]]=e[i]);for(;u--;)c[s++]=e[i++];return c}function Wr(e,t,n,r){for(var i=-1,o=e.length,a=-1,s=n.length,l=-1,u=t.length,c=Lu(o-s,0),d=Array(c+u),f=!r;++i<c;)d[i]=e[i];for(var p=i;++l<u;)d[p+l]=t[l];for(;++a<s;)(f||i<o)&&(d[p+n[a]]=e[i++]);return d}function Ur(e,t){var n=-1,r=e.length;for(t||(t=Array(r));++n<r;)t[n]=e[n];return t}function Gr(e,t,n){return qr(e,t,n)}function qr(e,t,n,r){n||(n={});for(var i=-1,o=t.length;++i<o;){var a=t[i];$n(n,a,r?r(n[a],e[a],a,n,e):e[a])}return n}function Kr(e,t){return Gr(e,$i(e),t)}function Xr(e,t){return function(n,i){var o=Vc(n)?r:Mn,a=t?t():{};return o(n,e,wi(i),a)}}function Jr(e){return $a(function(t,n){var r=-1,i=n.length,o=i>1?n[i-1]:X,a=i>2?n[2]:X;for(o="function"==typeof o?(i--,o):X,a&&Pi(n[0],n[1],a)&&(o=i<3?X:o,i=1),t=Object(t);++r<i;){var s=n[r];s&&e(t,s,r,o)}return t})}function Zr(e,t){return function(n,r){if(null==n)return n;if(!za(n))return e(n,r);for(var i=n.length,o=t?i:-1,a=Object(n);(t?o--:++o<i)&&!1!==r(a[o],o,a););return n}}function Qr(e){return function(t,n,r){for(var i=-1,o=Object(t),a=r(t),s=a.length;s--;){var l=a[e?s:++i];if(!1===n(o[l],l,o))break}return t}}function ei(e,t,n){function r(){return(this&&this!==vn&&this instanceof r?o:e).apply(i?n:this,arguments)}var i=t&ne,o=ri(e);return r}function ti(e){return function(t){t=Ts(t);var n=qt.test(t)?G(t):X,r=n?n[0]:t.charAt(0),i=n?n.slice(1).join(""):t.slice(1);return r[e]()+i}}function ni(e){return function(t){return p(Tl(ll(t)),e,"")}}function ri(e){return function(){var t=arguments;switch(t.length){case 0:return new e;case 1:return new e(t[0]);case 2:return new e(t[0],t[1]);case 3:return new e(t[0],t[1],t[2]);case 4:return new e(t[0],t[1],t[2],t[3]);case 5:return new e(t[0],t[1],t[2],t[3],t[4]);case 6:return new e(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new e(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var n=Nn(e.prototype),r=e.apply(n,t);return es(r)?r:n}}function ii(e,t,r){function i(){for(var a=arguments.length,s=Array(a),l=a,u=ki(i);l--;)s[l]=arguments[l];var c=a<3&&s[0]!==u&&s[a-1]!==u?[]:B(s,u);return(a-=c.length)<r?fi(e,t,ai,i.placeholder,X,s,c,X,X,r-a):n(this&&this!==vn&&this instanceof i?o:e,this,s)}var o=ri(e);return i}function oi(e){return $a(function(t){var n=(t=Vn(t,1)).length,r=n,i=Rt.prototype.thru;for(e&&t.reverse();r--;){var o=t[r];if("function"!=typeof o)throw new ru(Q);if(i&&!a&&"wrapper"==xi(o))var a=new Rt([],!0)}for(r=a?r:n;++r<n;){var s=xi(o=t[r]),l="wrapper"==s?oc(o):X;a=l&&Ni(l[0])&&l[1]==(ue|oe|se|ce)&&!l[4].length&&1==l[9]?a[xi(l[0])].apply(a,l[3]):1==o.length&&Ni(o)?a[s]():a.thru(o)}return function(){var e=arguments,r=e[0];if(a&&1==e.length&&Vc(r)&&r.length>=Z)return a.plant(r).value();for(var i=0,o=n?t[i].apply(this,e):r;++i<n;)o=t[i].call(this,o);return o}})}function ai(e,t,n,r,i,o,a,s,l,u){function c(){for(var v=arguments.length,y=v,b=Array(v);y--;)b[y]=arguments[y];if(h)var x=ki(c),w=P(b,x);if(r&&(b=Br(b,r,i,h)),o&&(b=Wr(b,o,a,h)),v-=w,h&&v<u){var _=B(b,x);return fi(e,t,ai,c.placeholder,n,b,_,s,l,u-v)}var C=f?n:this,k=p?C[e]:e;return v=b.length,s?b=Bi(b,s):g&&v>1&&b.reverse(),d&&l<v&&(b.length=l),this&&this!==vn&&this instanceof c&&(k=m||ri(k)),k.apply(C,b)}var d=t&ue,f=t&ne,p=t&re,h=t&(oe|ae),g=t&de,m=p?X:ri(e);return c}function si(e,t){return function(n,r){return Qn(n,e,t(r),{})}}function li(e){return $a(function(t){return t=d(t,wi()),$a(function(r){var i=this;return e(t,function(e){return n(e,i,r)})})})}function ui(e,t){var n=(t=t===X?" ":t+"").length;if(n<2)return n?wr(t,e):t;var r=wr(t,Su(e/U(t)));return qt.test(t)?G(r).slice(0,e).join(""):r.slice(0,e)}function ci(e,t,r,i){function o(){for(var t=-1,l=arguments.length,u=-1,c=i.length,d=Array(c+l),f=this&&this!==vn&&this instanceof o?s:e;++u<c;)d[u]=i[u];for(;l--;)d[u++]=arguments[++t];return n(f,a?r:this,d)}var a=t&ne,s=ri(e);return o}function di(e){return function(t,n,r){return r&&"number"!=typeof r&&Pi(t,n,r)&&(n=r=X),t=Ss(t),t=t===t?t:0,n===X?(n=t,t=0):n=Ss(n)||0,r=r===X?t<n?1:-1:Ss(r)||0,xr(t,n,r,e)}}function fi(e,t,n,r,i,o,a,s,l,u){var c=t&oe,d=s?Ur(s):X,f=c?a:X,p=c?X:a,h=c?o:X,g=c?X:o;t|=c?se:le,(t&=~(c?le:se))&ie||(t&=~(ne|re));var m=[e,t,i,h,f,g,p,d,l,u],v=n.apply(X,m);return Ni(e)&&lc(v,m),v.placeholder=r,v}function pi(e){var t=tu[e];return function(e,n){if(e=Ss(e),n=Cs(n)){var r=(Ts(e)+"e").split("e");return+((r=(Ts(t(r[0]+"e"+(+r[1]+n)))+"e").split("e"))[0]+"e"+(+r[1]-n))}return t(e)}}function hi(e,t,n,r,i,o,a,s){var l=t&re;if(!l&&"function"!=typeof e)throw new ru(Q);var u=r?r.length:0;if(u||(t&=~(se|le),r=i=X),a=a===X?a:Lu(Cs(a),0),s=s===X?s:Cs(s),u-=i?i.length:0,t&le){var c=r,d=i;r=i=X}var f=l?X:oc(e),p=[e,t,n,r,i,c,d,o,a,s];if(f&&zi(p,f),e=p[0],t=p[1],n=p[2],r=p[3],i=p[4],!(s=p[9]=null==p[9]?l?0:e.length:Lu(p[9]-u,0))&&t&(oe|ae)&&(t&=~(oe|ae)),t&&t!=ne)h=t==oe||t==ae?ii(e,t,s):t!=se&&t!=(ne|se)||i.length?ai.apply(X,p):ci(e,t,n,r);else var h=ei(e,t,n);return(f?rc:lc)(h,p)}function gi(e,t,n,r,i,o){var a=-1,s=i&pe,l=i&fe,u=e.length,c=t.length;if(u!=c&&!(s&&c>u))return!1;var d=o.get(e);if(d)return d==t;var f=!0;for(o.set(e,t);++a<u;){var p=e[a],h=t[a];if(r)var m=s?r(h,p,a,t,e,o):r(p,h,a,e,t,o);if(m!==X){if(m)continue;f=!1;break}if(l){if(!g(t,function(e){return p===e||n(p,e,r,i,o)})){f=!1;break}}else if(p!==h&&!n(p,h,r,i,o)){f=!1;break}}return o.delete(e),f}function mi(e,t,n,r,i,o,a){switch(n){case Ue:if(e.byteLength!=t.byteLength||e.byteOffset!=t.byteOffset)return!1;e=e.buffer,t=t.buffer;case We:return!(e.byteLength!=t.byteLength||!r(new mu(e),new mu(t)));case Ee:case Le:return+e==+t;case Ae:return e.name==t.name&&e.message==t.message;case Oe:return e!=+e?t!=+t:e==+t;case je:case ze:return e==t+"";case Fe:var s=V;case Ye:var l=o&pe;if(s||(s=W),e.size!=t.size&&!l)return!1;var u=a.get(e);return u?u==t:(o|=fe,a.set(e,t),gi(s(e),s(t),r,i,o,a));case He:if(Ju)return Ju.call(e)==Ju.call(t)}return!1}function vi(e,t,n,r,i,o){var a=i&pe,s=zs(e),l=s.length;if(l!=zs(t).length&&!a)return!1;for(var u=l;u--;){var c=s[u];if(!(a?c in t:Kn(t,c)))return!1}var d=o.get(e);if(d)return d==t;var f=!0;o.set(e,t);for(var p=a;++u<l;){var h=e[c=s[u]],g=t[c];if(r)var m=a?r(g,h,c,t,e,o):r(h,g,c,e,t,o);if(!(m===X?h===g||n(h,g,r,i,o):m)){f=!1;break}p||(p="constructor"==c)}if(f&&!p){var v=e.constructor,y=t.constructor;v!=y&&"constructor"in e&&"constructor"in t&&!("function"==typeof v&&v instanceof v&&"function"==typeof y&&y instanceof y)&&(f=!1)}return o.delete(e),f}function yi(e){return qn(e,zs,$i)}function bi(e){return qn(e,Hs,sc)}function xi(e){for(var t=e.name+"",n=Bu[t],r=su.call(Bu,t)?n.length:0;r--;){var i=n[r],o=i.func;if(null==o||o==e)return i.name}return t}function wi(){var e=Tt.iteratee||Rl;return e=e===Rl?ir:e,arguments.length?e(arguments[0],arguments[1]):e}function _i(e){for(var t=Xs(e),n=t.length;n--;)t[n][2]=ji(t[n][1]);return t}function Ci(e,t){var n=e[t];return as(n)?n:X}function ki(e){return(su.call(Tt,"placeholder")?Tt:e).placeholder}function Si(e){return Mu(Object(e))}function $i(e){return bu(Object(e))}function Mi(e){return cu.call(e)}function Ti(e,t,n){for(var r=-1,i=n.length;++r<i;){var o=n[r],a=o.size;switch(o.type){case"drop":e+=a;break;case"dropRight":t-=a;break;case"take":t=Au(t,e+a);break;case"takeRight":e=Lu(e,t-a)}}return{start:e,end:t}}function Di(e,t,n){for(var r,i=-1,o=(t=Fi(t,e)?[t]:Rn(t)).length;++i<o;){var a=t[i];if(!(r=null!=e&&n(e,a)))break;e=e[a]}return r||!!(o=e?e.length:0)&&Qa(o)&&z(a,o)&&(Vc(e)||hs(e)||ja(e))}function Ei(e){var t=e.length,n=e.constructor(t);return t&&"string"==typeof e[0]&&su.call(e,"index")&&(n.index=e.index,n.input=e.input),n}function Li(e){return"function"!=typeof e.constructor||Ii(e)?{}:Nn(Si(e))}function Ai(e,t,n,r){var i=e.constructor;switch(t){case We:return Nr(e);case Ee:case Le:return new i(+e);case Ue:return Ir(e,r);case Ge:case qe:case Ke:case Xe:case Je:case Ze:case Qe:case et:case tt:return Vr(e,r);case Fe:return jr(e,r,n);case Oe:case ze:return new i(e);case je:return Yr(e);case Ye:return zr(e,r,n);case He:return Hr(e)}}function Ri(e){var t=e?e.length:X;return Qa(t)&&(Vc(e)||hs(e)||ja(e))?S(t,String):null}function Pi(e,t,n){if(!es(n))return!1;var r=typeof t;return!!("number"==r?za(n)&&z(t,n.length):"string"==r&&t in n)&&Oa(n[t],e)}function Fi(e,t){var n=typeof e;return"number"==n||"symbol"==n||!Vc(e)&&(gs(e)||pt.test(e)||!ft.test(e)||null!=t&&e in Object(t))}function Oi(e){var t=typeof e;return"number"==t||"boolean"==t||"string"==t&&"__proto__"!=e||null==e}function Ni(e){var t=xi(e),n=Tt[t];if("function"!=typeof n||!(t in Pt.prototype))return!1;if(e===n)return!0;var r=oc(n);return!!r&&e===r[0]}function Ii(e){var t=e&&e.constructor;return e===("function"==typeof t&&t.prototype||ou)}function ji(e){return e===e&&!es(e)}function Yi(e,t){return function(n){return null!=n&&(n[e]===t&&(t!==X||e in Object(n)))}}function zi(e,t){var n=e[1],r=t[1],i=n|r,o=i<(ne|re|ue),a=r==ue&&n==oe||r==ue&&n==ce&&e[7].length<=t[8]||r==(ue|ce)&&t[7].length<=t[8]&&n==oe;if(!o&&!a)return e;r&ne&&(e[2]=t[2],i|=n&ne?0:ie);var s=t[3];if(s){var l=e[3];e[3]=l?Br(l,s,t[4]):Ur(s),e[4]=l?B(e[3],te):Ur(t[4])}return(s=t[5])&&(l=e[5],e[5]=l?Wr(l,s,t[6]):Ur(s),e[6]=l?B(e[5],te):Ur(t[6])),(s=t[7])&&(e[7]=Ur(s)),r&ue&&(e[8]=null==e[8]?t[8]:Au(e[8],t[8])),null==e[9]&&(e[9]=t[9]),e[0]=t[0],e[1]=i,e}function Hi(e,t,n,r,i,o){return es(e)&&es(t)&&cr(e,t,X,Hi,o.set(t,e)),e}function Vi(e,t){return 1==t.length?e:Gn(e,Cr(t,0,-1))}function Bi(e,t){for(var n=e.length,r=Au(t.length,n),i=Ur(e);r--;){var o=t[r];e[r]=z(o,n)?i[o]:X}return e}function Wi(e){if(Ja(e))try{return au.call(e)}catch(e){}return Ts(e)}function Ui(e){if(e instanceof Pt)return e.clone();var t=new Rt(e.__wrapped__,e.__chain__);return t.__actions__=Ur(e.__actions__),t.__index__=e.__index__,t.__values__=e.__values__,t}function Gi(e,t,n){t=(n?Pi(e,t,n):t===X)?1:Lu(Cs(t),0);var r=e?e.length:0;if(!r||t<1)return[];for(var i=0,o=0,a=Array(Su(r/t));i<r;)a[o++]=Cr(e,i,i+=t);return a}function qi(e){for(var t=-1,n=e?e.length:0,r=0,i=[];++t<n;){var o=e[t];o&&(i[r++]=o)}return i}function Ki(){var e=arguments.length,t=La(arguments[0]);if(e<2)return e?Ur(t):[];for(var n=Array(e-1);e--;)n[e-1]=arguments[e];return i(t,Vn(n,1))}function Xi(e,t,n){var r=e?e.length:0;return r?(t=n||t===X?1:Cs(t),Cr(e,t<0?0:t,r)):[]}function Ji(e,t,n){var r=e?e.length:0;return r?(t=n||t===X?1:Cs(t),t=r-t,Cr(e,0,t<0?0:t)):[]}function Zi(e,t){return e&&e.length?Ar(e,wi(t,3),!0,!0):[]}function Qi(e,t){return e&&e.length?Ar(e,wi(t,3),!0):[]}function eo(e,t,n,r){var i=e?e.length:0;return i?(n&&"number"!=typeof n&&Pi(e,t,n)&&(n=0,r=i),zn(e,t,n,r)):[]}function to(e,t){return e&&e.length?y(e,wi(t,3)):-1}function no(e,t){return e&&e.length?y(e,wi(t,3),!0):-1}function ro(e){return(e?e.length:0)?Vn(e,1):[]}function io(e){return(e?e.length:0)?Vn(e,we):[]}function oo(e,t){return(e?e.length:0)?(t=t===X?1:Cs(t),Vn(e,t)):[]}function ao(e){for(var t=-1,n=e?e.length:0,r={};++t<n;){var i=e[t];r[i[0]]=i[1]}return r}function so(e){return e?e[0]:X}function lo(e,t,n){var r=e?e.length:0;return r?((n=Cs(n))<0&&(n=Lu(r+n,0)),b(e,t,n)):-1}function uo(e){return Ji(e,1)}function co(e,t){return e?Du.call(e,t):""}function fo(e){var t=e?e.length:0;return t?e[t-1]:X}function po(e,t,n){var r=e?e.length:0;if(!r)return-1;var i=r;if(n!==X&&(i=((i=Cs(n))<0?Lu(r+i,0):Au(i,r-1))+1),t!==t)return j(e,i,!0);for(;i--;)if(e[i]===t)return i;return-1}function ho(e,t){return e&&e.length&&t&&t.length?vr(e,t):e}function go(e,t,n){return e&&e.length&&t&&t.length?vr(e,t,wi(n)):e}function mo(e,t,n){return e&&e.length&&t&&t.length?vr(e,t,X,n):e}function vo(e,t){var n=[];if(!e||!e.length)return n;var r=-1,i=[],o=e.length;for(t=wi(t,3);++r<o;){var a=e[r];t(a,r,e)&&(n.push(a),i.push(r))}return yr(e,i),n}function yo(e){return e?Fu.call(e):e}function bo(e,t,n){var r=e?e.length:0;return r?(n&&"number"!=typeof n&&Pi(e,t,n)?(t=0,n=r):(t=null==t?0:Cs(t),n=n===X?r:Cs(n)),Cr(e,t,n)):[]}function xo(e,t){return Sr(e,t)}function wo(e,t,n){return $r(e,t,wi(n))}function _o(e,t){var n=e?e.length:0;if(n){var r=Sr(e,t);if(r<n&&Oa(e[r],t))return r}return-1}function Co(e,t){return Sr(e,t,!0)}function ko(e,t,n){return $r(e,t,wi(n),!0)}function So(e,t){if(e?e.length:0){var n=Sr(e,t,!0)-1;if(Oa(e[n],t))return n}return-1}function $o(e){return e&&e.length?Mr(e):[]}function Mo(e,t){return e&&e.length?Tr(e,wi(t)):[]}function To(e){return Xi(e,1)}function Do(e,t,n){return e&&e.length?(t=n||t===X?1:Cs(t),Cr(e,0,t<0?0:t)):[]}function Eo(e,t,n){var r=e?e.length:0;return r?(t=n||t===X?1:Cs(t),t=r-t,Cr(e,t<0?0:t,r)):[]}function Lo(e,t){return e&&e.length?Ar(e,wi(t,3),!1,!0):[]}function Ao(e,t){return e&&e.length?Ar(e,wi(t,3)):[]}function Ro(e){return e&&e.length?Dr(e):[]}function Po(e,t){return e&&e.length?Dr(e,wi(t)):[]}function Fo(e,t){return e&&e.length?Dr(e,X,t):[]}function Oo(e){if(!e||!e.length)return[];var t=0;return e=l(e,function(e){if(Ha(e))return t=Lu(e.length,t),!0}),S(t,function(t){return d(e,gr(t))})}function No(e,t){if(!e||!e.length)return[];var r=Oo(e);return null==t?r:d(r,function(e){return n(t,X,e)})}function Io(e,t){return Fr(e||[],t||[],$n)}function jo(e,t){return Fr(e||[],t||[],_r)}function Yo(e){var t=Tt(e);return t.__chain__=!0,t}function zo(e,t){return t(e),e}function Ho(e,t){return t(e)}function Vo(){return Yo(this)}function Bo(){return new Rt(this.value(),this.__chain__)}function Wo(){this.__values__===X&&(this.__values__=_s(this.value()));var e=this.__index__>=this.__values__.length;return{done:e,value:e?X:this.__values__[this.__index__++]}}function Uo(){return this}function Go(e){for(var t,n=this;n instanceof At;){var r=Ui(n);r.__index__=0,r.__values__=X,t?i.__wrapped__=r:t=r;var i=r;n=n.__wrapped__}return i.__wrapped__=e,t}function qo(){var e=this.__wrapped__;if(e instanceof Pt){var t=e;return this.__actions__.length&&(t=new Pt(this)),(t=t.reverse()).__actions__.push({func:Ho,args:[yo],thisArg:X}),new Rt(t,this.__chain__)}return this.thru(yo)}function Ko(){return Rr(this.__wrapped__,this.__actions__)}function Xo(e,t,n){var r=Vc(e)?s:Yn;return n&&Pi(e,t,n)&&(t=X),r(e,wi(t,3))}function Jo(e,t){return(Vc(e)?l:Hn)(e,wi(t,3))}function Zo(e,t){if(t=wi(t,3),Vc(e)){var n=y(e,t);return n>-1?e[n]:X}return v(e,t,Qu)}function Qo(e,t){if(t=wi(t,3),Vc(e)){var n=y(e,t,!0);return n>-1?e[n]:X}return v(e,t,ec)}function ea(e,t){return Vn(aa(e,t),1)}function ta(e,t){return Vn(aa(e,t),we)}function na(e,t,n){return n=n===X?1:Cs(n),Vn(aa(e,t),n)}function ra(e,t){return"function"==typeof t&&Vc(e)?o(e,t):Qu(e,wi(t))}function ia(e,t){return"function"==typeof t&&Vc(e)?a(e,t):ec(e,wi(t))}function oa(e,t,n,r){e=za(e)?e:nl(e),n=n&&!r?Cs(n):0;var i=e.length;return n<0&&(n=Lu(i+n,0)),hs(e)?n<=i&&e.indexOf(t,n)>-1:!!i&&b(e,t,n)>-1}function aa(e,t){return(Vc(e)?d:sr)(e,wi(t,3))}function sa(e,t,n,r){return null==e?[]:(Vc(t)||(t=null==t?[]:[t]),n=r?X:n,Vc(n)||(n=null==n?[]:[n]),fr(e,t,n))}function la(e,t,n){var r=Vc(e)?p:_,i=arguments.length<3;return r(e,wi(t,4),n,i,Qu)}function ua(e,t,n){var r=Vc(e)?h:_,i=arguments.length<3;return r(e,wi(t,4),n,i,ec)}function ca(e,t){var n=Vc(e)?l:Hn;return t=wi(t,3),n(e,function(e,n,r){return!t(e,n,r)})}function da(e){var t=za(e)?e:nl(e),n=t.length;return n>0?t[br(0,n-1)]:X}function fa(e,t,n){var r=-1,i=_s(e),o=i.length,a=o-1;for(t=(n?Pi(e,t,n):t===X)?1:Pn(Cs(t),0,o);++r<t;){var s=br(r,a),l=i[s];i[s]=i[r],i[r]=l}return i.length=t,i}function pa(e){return fa(e,Se)}function ha(e){if(null==e)return 0;if(za(e)){var t=e.length;return t&&hs(e)?U(e):t}if(ts(e)){var n=Mi(e);if(n==Fe||n==Ye)return e.size}return zs(e).length}function ga(e,t,n){var r=Vc(e)?g:kr;return n&&Pi(e,t,n)&&(t=X),r(e,wi(t,3))}function ma(e,t){if("function"!=typeof t)throw new ru(Q);return e=Cs(e),function(){if(--e<1)return t.apply(this,arguments)}}function va(e,t,n){return t=n?X:t,t=e&&null==t?e.length:t,hi(e,ue,X,X,X,X,t)}function ya(e,t){var n;if("function"!=typeof t)throw new ru(Q);return e=Cs(e),function(){return--e>0&&(n=t.apply(this,arguments)),e<=1&&(t=X),n}}function ba(e,t,n){var r=hi(e,oe,X,X,X,X,X,t=n?X:t);return r.placeholder=ba.placeholder,r}function xa(e,t,n){var r=hi(e,ae,X,X,X,X,X,t=n?X:t);return r.placeholder=xa.placeholder,r}function wa(e,t,n){function r(t){var n=f,r=p;return f=p=X,v=t,h=e.apply(r,n)}function i(e){return v=e,g=Cu(s,t),y?r(e):h}function o(e){var n=e-v,r=t-(e-m);return!1===b?r:Au(r,b-n)}function a(e){var n=e-m,r=e-v;return!m||n>=t||n<0||!1!==b&&r>=b}function s(){var e=Pc();if(a(e))return l(e);g=Cu(s,o(e))}function l(e){return vu(g),g=X,x&&f?r(e):(f=p=X,h)}function u(){g!==X&&vu(g),m=v=0,f=p=g=X}function c(){return g===X?h:l(Pc())}function d(){var e=Pc(),n=a(e);return f=arguments,p=this,m=e,n?g===X?i(m):(vu(g),g=Cu(s,t),r(m)):h}var f,p,h,g,m=0,v=0,y=!1,b=!1,x=!0;if("function"!=typeof e)throw new ru(Q);return t=Ss(t)||0,es(n)&&(y=!!n.leading,b="maxWait"in n&&Lu(Ss(n.maxWait)||0,t),x="trailing"in n?!!n.trailing:x),d.cancel=u,d.flush=c,d}function _a(e){return hi(e,de)}function Ca(e,t){if("function"!=typeof e||t&&"function"!=typeof t)throw new ru(Q);var n=function(){var r=arguments,i=t?t.apply(this,r):r[0],o=n.cache;if(o.has(i))return o.get(i);var a=e.apply(this,r);return n.cache=o.set(i,a),a};return n.cache=new(Ca.Cache||Vt),n}function ka(e){if("function"!=typeof e)throw new ru(Q);return function(){return!e.apply(this,arguments)}}function Sa(e){return ya(2,e)}function $a(e,t){if("function"!=typeof e)throw new ru(Q);return t=Lu(t===X?e.length-1:Cs(t),0),function(){for(var r=arguments,i=-1,o=Lu(r.length-t,0),a=Array(o);++i<o;)a[i]=r[t+i];switch(t){case 0:return e.call(this,a);case 1:return e.call(this,r[0],a);case 2:return e.call(this,r[0],r[1],a)}var s=Array(t+1);for(i=-1;++i<t;)s[i]=r[i];return s[t]=a,n(e,this,s)}}function Ma(e,t){if("function"!=typeof e)throw new ru(Q);return t=t===X?0:Lu(Cs(t),0),$a(function(r){var i=r[t],o=r.slice(0,t);return i&&f(o,i),n(e,this,o)})}function Ta(e,t,n){var r=!0,i=!0;if("function"!=typeof e)throw new ru(Q);return es(n)&&(r="leading"in n?!!n.leading:r,i="trailing"in n?!!n.trailing:i),wa(e,t,{leading:r,maxWait:t,trailing:i})}function Da(e){return va(e,1)}function Ea(e,t){return t=null==t?Al:t,Yc(t,e)}function La(){if(!arguments.length)return[];var e=arguments[0];return Vc(e)?e:[e]}function Aa(e){return Fn(e,!1,!0)}function Ra(e,t){return Fn(e,!1,!0,t)}function Pa(e){return Fn(e,!0,!0)}function Fa(e,t){return Fn(e,!0,!0,t)}function Oa(e,t){return e===t||e!==e&&t!==t}function Na(e,t){return e>t}function Ia(e,t){return e>=t}function ja(e){return Ha(e)&&su.call(e,"callee")&&(!_u.call(e,"callee")||cu.call(e)==Te)}function Ya(e){return ts(e)&&cu.call(e)==We}function za(e){return null!=e&&Qa(ac(e))&&!Ja(e)}function Ha(e){return ts(e)&&za(e)}function Va(e){return!0===e||!1===e||ts(e)&&cu.call(e)==Ee}function Ba(e){return ts(e)&&cu.call(e)==Le}function Wa(e){return!!e&&1===e.nodeType&&ts(e)&&!cs(e)}function Ua(e){if(za(e)&&(Vc(e)||hs(e)||Ja(e.splice)||ja(e)||Bc(e)))return!e.length;if(ts(e)){var t=Mi(e);if(t==Fe||t==Ye)return!e.size}for(var n in e)if(su.call(e,n))return!1;return!(Vu&&zs(e).length)}function Ga(e,t){return tr(e,t)}function qa(e,t,n){var r=(n="function"==typeof n?n:X)?n(e,t):X;return r===X?tr(e,t,n):!!r}function Ka(e){return!!ts(e)&&(cu.call(e)==Ae||"string"==typeof e.message&&"string"==typeof e.name)}function Xa(e){return"number"==typeof e&&Tu(e)}function Ja(e){var t=es(e)?cu.call(e):"";return t==Re||t==Pe}function Za(e){return"number"==typeof e&&e==Cs(e)}function Qa(e){return"number"==typeof e&&e>-1&&e%1==0&&e<=_e}function es(e){var t=typeof e;return!!e&&("object"==t||"function"==t)}function ts(e){return!!e&&"object"==typeof e}function ns(e){return ts(e)&&Mi(e)==Fe}function rs(e,t){return e===t||rr(e,t,_i(t))}function is(e,t,n){return n="function"==typeof n?n:X,rr(e,t,_i(t),n)}function os(e){return us(e)&&e!=+e}function as(e){return!!es(e)&&(Ja(e)||Y(e)?fu:$t).test(Wi(e))}function ss(e){return null===e}function ls(e){return null==e}function us(e){return"number"==typeof e||ts(e)&&cu.call(e)==Oe}function cs(e){if(!ts(e)||cu.call(e)!=Ne||Y(e))return!1;var t=Si(e);if(null===t)return!0;var n=su.call(t,"constructor")&&t.constructor;return"function"==typeof n&&n instanceof n&&au.call(n)==uu}function ds(e){return es(e)&&cu.call(e)==je}function fs(e){return Za(e)&&e>=-_e&&e<=_e}function ps(e){return ts(e)&&Mi(e)==Ye}function hs(e){return"string"==typeof e||!Vc(e)&&ts(e)&&cu.call(e)==ze}function gs(e){return"symbol"==typeof e||ts(e)&&cu.call(e)==He}function ms(e){return ts(e)&&Qa(e.length)&&!!en[cu.call(e)]}function vs(e){return e===X}function ys(e){return ts(e)&&Mi(e)==Ve}function bs(e){return ts(e)&&cu.call(e)==Be}function xs(e,t){return e<t}function ws(e,t){return e<=t}function _s(e){if(!e)return[];if(za(e))return hs(e)?G(e):Ur(e);if(xu&&e[xu])return H(e[xu]());var t=Mi(e);return(t==Fe?V:t==Ye?W:nl)(e)}function Cs(e){if(!e)return 0===e?e:0;if((e=Ss(e))===we||e===-we)return(e<0?-1:1)*Ce;var t=e%1;return e===e?t?e-t:e:0}function ks(e){return e?Pn(Cs(e),0,Se):0}function Ss(e){if("number"==typeof e)return e;if(gs(e))return ke;if(es(e)){var t=Ja(e.valueOf)?e.valueOf():e;e=es(t)?t+"":t}if("string"!=typeof e)return 0===e?e:+e;e=e.replace(vt,"");var n=St.test(e);return n||Mt.test(e)?un(e.slice(2),n?2:8):kt.test(e)?ke:+e}function $s(e){return Gr(e,Hs(e))}function Ms(e){return Pn(Cs(e),-_e,_e)}function Ts(e){if("string"==typeof e)return e;if(null==e)return"";if(gs(e))return Zu?Zu.call(e):"";var t=e+"";return"0"==t&&1/e==-we?"-0":t}function Ds(e,t){var n=Nn(e);return t?Tn(n,t):n}function Es(e,t){return v(e,wi(t,3),Bn,!0)}function Ls(e,t){return v(e,wi(t,3),Wn,!0)}function As(e,t){return null==e?e:tc(e,wi(t),Hs)}function Rs(e,t){return null==e?e:nc(e,wi(t),Hs)}function Ps(e,t){return e&&Bn(e,wi(t))}function Fs(e,t){return e&&Wn(e,wi(t))}function Os(e){return null==e?[]:Un(e,zs(e))}function Ns(e){return null==e?[]:Un(e,Hs(e))}function Is(e,t,n){var r=null==e?X:Gn(e,t);return r===X?n:r}function js(e,t){return null!=e&&Di(e,t,Kn)}function Ys(e,t){return null!=e&&Di(e,t,Xn)}function zs(e){var t=Ii(e);if(!t&&!za(e))return or(e);var n=Ri(e),r=!!n,i=n||[],o=i.length;for(var a in e)!Kn(e,a)||r&&("length"==a||z(a,o))||t&&"constructor"==a||i.push(a);return i}function Hs(e){for(var t=-1,n=Ii(e),r=ar(e),i=r.length,o=Ri(e),a=!!o,s=o||[],l=s.length;++t<i;){var u=r[t];a&&("length"==u||z(u,l))||"constructor"==u&&(n||!su.call(e,u))||s.push(u)}return s}function Vs(e,t){var n={};return t=wi(t,3),Bn(e,function(e,r,i){n[t(e,r,i)]=e}),n}function Bs(e,t){var n={};return t=wi(t,3),Bn(e,function(e,r,i){n[r]=t(e,r,i)}),n}function Ws(e,t){return t=wi(t),hr(e,function(e,n){return!t(e,n)})}function Us(e,t){return null==e?{}:hr(e,wi(t))}function Gs(e,t,n){var r=-1,i=(t=Fi(t,e)?[t]:Rn(t)).length;for(i||(e=X,i=1);++r<i;){var o=null==e?X:e[t[r]];o===X&&(r=i,o=n),e=Ja(o)?o.call(e):o}return e}function qs(e,t,n){return null==e?e:_r(e,t,n)}function Ks(e,t,n,r){return r="function"==typeof r?r:X,null==e?e:_r(e,t,n,r)}function Xs(e){return $(e,zs(e))}function Js(e){return $(e,Hs(e))}function Zs(e,t,n){var r=Vc(e)||ms(e);if(t=wi(t,4),null==n)if(r||es(e)){var i=e.constructor;n=r?Vc(e)?new i:[]:Ja(i)?Nn(Si(e)):{}}else n={};return(r?o:Bn)(e,function(e,r,i){return t(n,e,r,i)}),n}function Qs(e,t){return null==e||Er(e,t)}function el(e,t,n){return null==e?e:Lr(e,t,Ln(n))}function tl(e,t,n,r){return r="function"==typeof r?r:X,null==e?e:Lr(e,t,Ln(n),r)}function nl(e){return e?T(e,zs(e)):[]}function rl(e){return null==e?[]:T(e,Hs(e))}function il(e,t,n){return n===X&&(n=t,t=X),n!==X&&(n=(n=Ss(n))===n?n:0),t!==X&&(t=(t=Ss(t))===t?t:0),Pn(Ss(e),t,n)}function ol(e,t,n){return t=Ss(t)||0,n===X?(n=t,t=0):n=Ss(n)||0,e=Ss(e),Jn(e,t,n)}function al(e,t,n){if(n&&"boolean"!=typeof n&&Pi(e,t,n)&&(t=n=X),n===X&&("boolean"==typeof t?(n=t,t=X):"boolean"==typeof e&&(n=e,e=X)),e===X&&t===X?(e=0,t=1):(e=Ss(e)||0,t===X?(t=e,e=0):t=Ss(t)||0),e>t){var r=e;e=t,t=r}if(n||e%1||t%1){var i=Pu();return Au(e+i*(t-e+ln("1e-"+((i+"").length-1))),t)}return br(e,t)}function sl(e){return fd(Ts(e).toLowerCase())}function ll(e){return(e=Ts(e))&&e.replace(Dt,O).replace(Ut,"")}function ul(e,t,n){e=Ts(e),t="string"==typeof t?t:t+"";var r=e.length;return n=n===X?r:Pn(Cs(n),0,r),(n-=t.length)>=0&&e.indexOf(t,n)==n}function cl(e){return e=Ts(e),e&&lt.test(e)?e.replace(at,N):e}function dl(e){return e=Ts(e),e&&mt.test(e)?e.replace(gt,"\\$&"):e}function fl(e,t,n){e=Ts(e);var r=(t=Cs(t))?U(e):0;if(!t||r>=t)return e;var i=(t-r)/2;return ui($u(i),n)+e+ui(Su(i),n)}function pl(e,t,n){e=Ts(e);var r=(t=Cs(t))?U(e):0;return t&&r<t?e+ui(t-r,n):e}function hl(e,t,n){e=Ts(e);var r=(t=Cs(t))?U(e):0;return t&&r<t?ui(t-r,n)+e:e}function gl(e,t,n){return n||null==t?t=0:t&&(t=+t),e=Ts(e).replace(vt,""),Ru(e,t||(Ct.test(e)?16:10))}function ml(e,t,n){return t=(n?Pi(e,t,n):t===X)?1:Cs(t),wr(Ts(e),t)}function vl(){var e=arguments,t=Ts(e[0]);return e.length<3?t:t.replace(e[1],e[2])}function yl(e,t,n){return Ts(e).split(t,n)}function bl(e,t,n){return e=Ts(e),n=Pn(Cs(n),0,e.length),e.lastIndexOf(t,n)==n}function xl(e,t,n){var r=Tt.templateSettings;n&&Pi(e,t,n)&&(t=X),e=Ts(e),t=Gc({},t,r,kn);var i,o,a=Gc({},t.imports,r.imports,kn),s=zs(a),l=T(a,s),u=0,c=t.interpolate||Et,d="__p += '",f=nu((t.escape||Et).source+"|"+c.source+"|"+(c===dt?wt:Et).source+"|"+(t.evaluate||Et).source+"|$","g"),p="//# sourceURL="+("sourceURL"in t?t.sourceURL:"lodash.templateSources["+ ++Qt+"]")+"\n";e.replace(f,function(t,n,r,a,s,l){return r||(r=a),d+=e.slice(u,l).replace(Lt,I),n&&(i=!0,d+="' +\n__e("+n+") +\n'"),s&&(o=!0,d+="';\n"+s+";\n__p += '"),r&&(d+="' +\n((__t = ("+r+")) == null ? '' : __t) +\n'"),u=l+t.length,t}),d+="';\n";var h=t.variable;h||(d="with (obj) {\n"+d+"\n}\n"),d=(o?d.replace(nt,""):d).replace(rt,"$1").replace(it,"$1;"),d="function("+(h||"obj")+") {\n"+(h?"":"obj || (obj = {});\n")+"var __t, __p = ''"+(i?", __e = _.escape":"")+(o?", __j = Array.prototype.join;\nfunction print() { __p += __j.call(arguments, '') }\n":";\n")+d+"return __p\n}";var g=pd(function(){return Function(s,p+"return "+d).apply(X,l)});if(g.source=d,Ka(g))throw g;return g}function wl(e){return Ts(e).toLowerCase()}function _l(e){return Ts(e).toUpperCase()}function Cl(e,t,n){if(!(e=Ts(e)))return e;if(n||t===X)return e.replace(vt,"");if(!(t+=""))return e;var r=G(e),i=G(t);return r.slice(D(r,i),E(r,i)+1).join("")}function kl(e,t,n){if(!(e=Ts(e)))return e;if(n||t===X)return e.replace(bt,"");if(!(t+=""))return e;var r=G(e);return r.slice(0,E(r,G(t))+1).join("")}function Sl(e,t,n){if(!(e=Ts(e)))return e;if(n||t===X)return e.replace(yt,"");if(!(t+=""))return e;var r=G(e);return r.slice(D(r,G(t))).join("")}function $l(e,t){var n=he,r=ge;if(es(t)){var i="separator"in t?t.separator:i;n="length"in t?Cs(t.length):n,r="omission"in t?Ts(t.omission):r}var o=(e=Ts(e)).length;if(qt.test(e)){var a=G(e);o=a.length}if(n>=o)return e;var s=n-U(r);if(s<1)return r;var l=a?a.slice(0,s).join(""):e.slice(0,s);if(i===X)return l+r;if(a&&(s+=l.length-s),ds(i)){if(e.slice(s).search(i)){var u,c=l;for(i.global||(i=nu(i.source,Ts(_t.exec(i))+"g")),i.lastIndex=0;u=i.exec(c);)var d=u.index;l=l.slice(0,d===X?s:d)}}else if(e.indexOf(i,s)!=s){var f=l.lastIndexOf(i);f>-1&&(l=l.slice(0,f))}return l+r}function Ml(e){return e=Ts(e),e&&st.test(e)?e.replace(ot,q):e}function Tl(e,t,n){return e=Ts(e),(t=n?X:t)===X&&(t=Jt.test(e)?Xt:Kt),e.match(t)||[]}function Dl(e){var t=e?e.length:0,r=wi();return e=t?d(e,function(e){if("function"!=typeof e[1])throw new ru(Q);return[r(e[0]),e[1]]}):[],$a(function(r){for(var i=-1;++i<t;){var o=e[i];if(n(o[0],this,r))return n(o[1],this,r)}})}function El(e){return On(Fn(e,!0))}function Ll(e){return function(){return e}}function Al(e){return e}function Rl(e){return ir("function"==typeof e?e:Fn(e,!0))}function Pl(e){return lr(Fn(e,!0))}function Fl(e,t){return ur(e,Fn(t,!0))}function Ol(e,t,n){var r=zs(t),i=Un(t,r);null!=n||es(t)&&(i.length||!r.length)||(n=t,t=e,e=this,i=Un(t,zs(t)));var a=!(es(n)&&"chain"in n)||n.chain,s=Ja(e);return o(i,function(n){var r=t[n];e[n]=r,s&&(e.prototype[n]=function(){var t=this.__chain__;if(a||t){var n=e(this.__wrapped__);return(n.__actions__=Ur(this.__actions__)).push({func:r,args:arguments,thisArg:e}),n.__chain__=t,n}return r.apply(e,f([this.value()],arguments))})}),e}function Nl(){return vn._===this&&(vn._=du),this}function Il(){}function jl(e){return e=Cs(e),function(){return arguments[e]}}function Yl(e){return Fi(e)?gr(e):mr(e)}function zl(e){return function(t){return null==e?X:Gn(e,t)}}function Hl(e,t){if((e=Cs(e))<1||e>_e)return[];var n=Se,r=Au(e,Se);t=wi(t),e-=Se;for(var i=S(r,t);++n<e;)t(n);return i}function Vl(e){return Vc(e)?d(e,An):gs(e)?[e]:Ur(uc(e))}function Bl(e){var t=++lu;return Ts(e)+t}function Wl(e){return e&&e.length?m(e,Al,Na):X}function Ul(e,t){return e&&e.length?m(e,wi(t),Na):X}function Gl(e){return w(e,Al)}function ql(e,t){return w(e,wi(t))}function Kl(e){return e&&e.length?m(e,Al,xs):X}function Xl(e,t){return e&&e.length?m(e,wi(t),xs):X}function Jl(e){return e&&e.length?k(e,Al):0}function Zl(e,t){return e&&e.length?k(e,wi(t)):0}var Ql=(L=L?yn.defaults({},L,yn.pick(vn,Zt)):vn).Date,eu=L.Error,tu=L.Math,nu=L.RegExp,ru=L.TypeError,iu=L.Array.prototype,ou=L.Object.prototype,au=L.Function.prototype.toString,su=ou.hasOwnProperty,lu=0,uu=au.call(Object),cu=ou.toString,du=vn._,fu=nu("^"+au.call(su).replace(gt,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pu=fn?L.Buffer:X,hu=L.Reflect,gu=L.Symbol,mu=L.Uint8Array,vu=L.clearTimeout,yu=hu?hu.enumerate:X,bu=Object.getOwnPropertySymbols,xu="symbol"==typeof(xu=gu&&gu.iterator)?xu:X,wu=Object.create,_u=ou.propertyIsEnumerable,Cu=L.setTimeout,ku=iu.splice,Su=tu.ceil,$u=tu.floor,Mu=Object.getPrototypeOf,Tu=L.isFinite,Du=iu.join,Eu=Object.keys,Lu=tu.max,Au=tu.min,Ru=L.parseInt,Pu=tu.random,Fu=iu.reverse,Ou=Ci(L,"DataView"),Nu=Ci(L,"Map"),Iu=Ci(L,"Promise"),ju=Ci(L,"Set"),Yu=Ci(L,"WeakMap"),zu=Ci(Object,"create"),Hu=Yu&&new Yu,Vu=!_u.call({valueOf:1},"valueOf"),Bu={},Wu=Wi(Ou),Uu=Wi(Nu),Gu=Wi(Iu),qu=Wi(ju),Ku=Wi(Yu),Xu=gu?gu.prototype:X,Ju=Xu?Xu.valueOf:X,Zu=Xu?Xu.toString:X;Tt.templateSettings={escape:ut,evaluate:ct,interpolate:dt,variable:"",imports:{_:Tt}},Tt.prototype=At.prototype,Tt.prototype.constructor=Tt,Rt.prototype=Nn(At.prototype),Rt.prototype.constructor=Rt,Pt.prototype=Nn(At.prototype),Pt.prototype.constructor=Pt,It.prototype=zu?zu(null):ou,Vt.prototype.clear=Bt,Vt.prototype.delete=Wt,Vt.prototype.get=Gt,Vt.prototype.has=nn,Vt.prototype.set=rn,on.prototype.push=sn,cn.prototype.clear=dn,cn.prototype.delete=pn,cn.prototype.get=hn,cn.prototype.has=gn,cn.prototype.set=mn;var Qu=Zr(Bn),ec=Zr(Wn,!0),tc=Qr(),nc=Qr(!0);yu&&!_u.call({valueOf:1},"valueOf")&&(ar=function(e){return H(yu(e))});var rc=Hu?function(e,t){return Hu.set(e,t),e}:Al,ic=ju&&2===new ju([1,2]).size?function(e){return new ju(e)}:Il,oc=Hu?function(e){return Hu.get(e)}:Il,ac=gr("length");bu||($i=function(){return[]});var sc=bu?function(e){for(var t=[];e;)f(t,$i(e)),e=Si(e);return t}:$i;(Ou&&Mi(new Ou(new ArrayBuffer(1)))!=Ue||Nu&&Mi(new Nu)!=Fe||Iu&&Mi(Iu.resolve())!=Ie||ju&&Mi(new ju)!=Ye||Yu&&Mi(new Yu)!=Ve)&&(Mi=function(e){var t=cu.call(e),n=Wi(t==Ne?e.constructor:null);if(n)switch(n){case Wu:return Ue;case Uu:return Fe;case Gu:return Ie;case qu:return Ye;case Ku:return Ve}return t});var lc=function(){var e=0,t=0;return function(n,r){var i=Pc(),o=ve-(i-t);if(t=i,o>0){if(++e>=me)return n}else e=0;return rc(n,r)}}(),uc=Ca(function(e){var t=[];return Ts(e).replace(ht,function(e,n,r,i){t.push(r?i.replace(xt,"$1"):n||e)}),t}),cc=$a(function(e,t){return Ha(e)?jn(e,Vn(t,1,!0)):[]}),dc=$a(function(e,t){var n=fo(t);return Ha(n)&&(n=X),Ha(e)?jn(e,Vn(t,1,!0),wi(n)):[]}),fc=$a(function(e,t){var n=fo(t);return Ha(n)&&(n=X),Ha(e)?jn(e,Vn(t,1,!0),X,n):[]}),pc=$a(function(e){var t=d(e,En);return t.length&&t[0]===e[0]?Zn(t):[]}),hc=$a(function(e){var t=fo(e),n=d(e,En);return t===fo(n)?t=X:n.pop(),n.length&&n[0]===e[0]?Zn(n,wi(t)):[]}),gc=$a(function(e){var t=fo(e),n=d(e,En);return t===fo(n)?t=X:n.pop(),n.length&&n[0]===e[0]?Zn(n,X,t):[]}),mc=$a(ho),vc=$a(function(e,t){var n=Dn(e,t=d(Vn(t,1),String));return yr(e,t.sort(A)),n}),yc=$a(function(e){return Dr(Vn(e,1,!0))}),bc=$a(function(e){var t=fo(e);return Ha(t)&&(t=X),Dr(Vn(e,1,!0),wi(t))}),xc=$a(function(e){var t=fo(e);return Ha(t)&&(t=X),Dr(Vn(e,1,!0),X,t)}),wc=$a(function(e,t){return Ha(e)?jn(e,t):[]}),_c=$a(function(e){return Pr(l(e,Ha))}),Cc=$a(function(e){var t=fo(e);return Ha(t)&&(t=X),Pr(l(e,Ha),wi(t))}),kc=$a(function(e){var t=fo(e);return Ha(t)&&(t=X),Pr(l(e,Ha),X,t)}),Sc=$a(Oo),$c=$a(function(e){var t=e.length,n=t>1?e[t-1]:X;return n="function"==typeof n?(e.pop(),n):X,No(e,n)}),Mc=$a(function(e){var t=(e=Vn(e,1)).length,n=t?e[0]:0,r=this.__wrapped__,i=function(t){return Dn(t,e)};return!(t>1||this.__actions__.length)&&r instanceof Pt&&z(n)?((r=r.slice(n,+n+(t?1:0))).__actions__.push({func:Ho,args:[i],thisArg:X}),new Rt(r,this.__chain__).thru(function(e){return t&&!e.length&&e.push(X),e})):this.thru(i)}),Tc=Xr(function(e,t,n){su.call(e,n)?++e[n]:e[n]=1}),Dc=Xr(function(e,t,n){su.call(e,n)?e[n].push(t):e[n]=[t]}),Ec=$a(function(e,t,r){var i=-1,o="function"==typeof t,a=Fi(t),s=za(e)?Array(e.length):[];return Qu(e,function(e){var l=o?t:a&&null!=e?e[t]:X;s[++i]=l?n(l,e,r):er(e,t,r)}),s}),Lc=Xr(function(e,t,n){e[n]=t}),Ac=Xr(function(e,t,n){e[n?0:1].push(t)},function(){return[[],[]]}),Rc=$a(function(e,t){if(null==e)return[];var n=t.length;return n>1&&Pi(e,t[0],t[1])?t=[]:n>2&&Pi(t[0],t[1],t[2])&&(t.length=1),fr(e,Vn(t,1),[])}),Pc=Ql.now,Fc=$a(function(e,t,n){var r=ne;if(n.length){var i=B(n,ki(Fc));r|=se}return hi(e,r,t,n,i)}),Oc=$a(function(e,t,n){var r=ne|re;if(n.length){var i=B(n,ki(Oc));r|=se}return hi(t,r,e,n,i)}),Nc=$a(function(e,t){return In(e,1,t)}),Ic=$a(function(e,t,n){return In(e,Ss(t)||0,n)});Ca.Cache=Vt;var jc=$a(function(e,t){var r=(t=d(t,wi())).length;return $a(function(i){for(var o=-1,a=Au(i.length,r);++o<a;)i[o]=t[o].call(this,i[o]);return n(e,this,i)})}),Yc=$a(function(e,t){var n=B(t,ki(Yc));return hi(e,se,X,t,n)}),zc=$a(function(e,t){var n=B(t,ki(zc));return hi(e,le,X,t,n)}),Hc=$a(function(e,t){return hi(e,ce,X,X,X,Vn(t,1))}),Vc=Array.isArray,Bc=pu?function(e){return e instanceof pu}:Ll(!1),Wc=Jr(function(e,t){if(Vu||Ii(t)||za(t))Gr(t,zs(t),e);else for(var n in t)su.call(t,n)&&$n(e,n,t[n])}),Uc=Jr(function(e,t){if(Vu||Ii(t)||za(t))Gr(t,Hs(t),e);else for(var n in t)$n(e,n,t[n])}),Gc=Jr(function(e,t,n,r){qr(t,Hs(t),e,r)}),qc=Jr(function(e,t,n,r){qr(t,zs(t),e,r)}),Kc=$a(function(e,t){return Dn(e,Vn(t,1))}),Xc=$a(function(e){return e.push(X,kn),n(Gc,X,e)}),Jc=$a(function(e){return e.push(X,Hi),n(nd,X,e)}),Zc=si(function(e,t,n){e[t]=n},Ll(Al)),Qc=si(function(e,t,n){su.call(e,t)?e[t].push(n):e[t]=[n]},wi),ed=$a(er),td=Jr(function(e,t,n){cr(e,t,n)}),nd=Jr(function(e,t,n,r){cr(e,t,n,r)}),rd=$a(function(e,t){return null==e?{}:(t=d(Vn(t,1),An),pr(e,jn(bi(e),t)))}),id=$a(function(e,t){return null==e?{}:pr(e,Vn(t,1))}),od=ni(function(e,t,n){return t=t.toLowerCase(),e+(n?sl(t):t)}),ad=ni(function(e,t,n){return e+(n?"-":"")+t.toLowerCase()}),sd=ni(function(e,t,n){return e+(n?" ":"")+t.toLowerCase()}),ld=ti("toLowerCase"),ud=ni(function(e,t,n){return e+(n?"_":"")+t.toLowerCase()}),cd=ni(function(e,t,n){return e+(n?" ":"")+fd(t)}),dd=ni(function(e,t,n){return e+(n?" ":"")+t.toUpperCase()}),fd=ti("toUpperCase"),pd=$a(function(e,t){try{return n(e,X,t)}catch(e){return Ka(e)?e:new eu(e)}}),hd=$a(function(e,t){return o(Vn(t,1),function(t){e[t]=Fc(e[t],e)}),e}),gd=oi(),md=oi(!0),vd=$a(function(e,t){return function(n){return er(n,e,t)}}),yd=$a(function(e,t){return function(n){return er(e,n,t)}}),bd=li(d),xd=li(s),wd=li(g),_d=di(),Cd=di(!0),kd=F(function(e,t){return e+t}),Sd=pi("ceil"),$d=F(function(e,t){return e/t}),Md=pi("floor"),Td=F(function(e,t){return e*t}),Dd=pi("round"),Ed=F(function(e,t){return e-t});return Tt.after=ma,Tt.ary=va,Tt.assign=Wc,Tt.assignIn=Uc,Tt.assignInWith=Gc,Tt.assignWith=qc,Tt.at=Kc,Tt.before=ya,Tt.bind=Fc,Tt.bindAll=hd,Tt.bindKey=Oc,Tt.castArray=La,Tt.chain=Yo,Tt.chunk=Gi,Tt.compact=qi,Tt.concat=Ki,Tt.cond=Dl,Tt.conforms=El,Tt.constant=Ll,Tt.countBy=Tc,Tt.create=Ds,Tt.curry=ba,Tt.curryRight=xa,Tt.debounce=wa,Tt.defaults=Xc,Tt.defaultsDeep=Jc,Tt.defer=Nc,Tt.delay=Ic,Tt.difference=cc,Tt.differenceBy=dc,Tt.differenceWith=fc,Tt.drop=Xi,Tt.dropRight=Ji,Tt.dropRightWhile=Zi,Tt.dropWhile=Qi,Tt.fill=eo,Tt.filter=Jo,Tt.flatMap=ea,Tt.flatMapDeep=ta,Tt.flatMapDepth=na,Tt.flatten=ro,Tt.flattenDeep=io,Tt.flattenDepth=oo,Tt.flip=_a,Tt.flow=gd,Tt.flowRight=md,Tt.fromPairs=ao,Tt.functions=Os,Tt.functionsIn=Ns,Tt.groupBy=Dc,Tt.initial=uo,Tt.intersection=pc,Tt.intersectionBy=hc,Tt.intersectionWith=gc,Tt.invert=Zc,Tt.invertBy=Qc,Tt.invokeMap=Ec,Tt.iteratee=Rl,Tt.keyBy=Lc,Tt.keys=zs,Tt.keysIn=Hs,Tt.map=aa,Tt.mapKeys=Vs,Tt.mapValues=Bs,Tt.matches=Pl,Tt.matchesProperty=Fl,Tt.memoize=Ca,Tt.merge=td,Tt.mergeWith=nd,Tt.method=vd,Tt.methodOf=yd,Tt.mixin=Ol,Tt.negate=ka,Tt.nthArg=jl,Tt.omit=rd,Tt.omitBy=Ws,Tt.once=Sa,Tt.orderBy=sa,Tt.over=bd,Tt.overArgs=jc,Tt.overEvery=xd,Tt.overSome=wd,Tt.partial=Yc,Tt.partialRight=zc,Tt.partition=Ac,Tt.pick=id,Tt.pickBy=Us,Tt.property=Yl,Tt.propertyOf=zl,Tt.pull=mc,Tt.pullAll=ho,Tt.pullAllBy=go,Tt.pullAllWith=mo,Tt.pullAt=vc,Tt.range=_d,Tt.rangeRight=Cd,Tt.rearg=Hc,Tt.reject=ca,Tt.remove=vo,Tt.rest=$a,Tt.reverse=yo,Tt.sampleSize=fa,Tt.set=qs,Tt.setWith=Ks,Tt.shuffle=pa,Tt.slice=bo,Tt.sortBy=Rc,Tt.sortedUniq=$o,Tt.sortedUniqBy=Mo,Tt.split=yl,Tt.spread=Ma,Tt.tail=To,Tt.take=Do,Tt.takeRight=Eo,Tt.takeRightWhile=Lo,Tt.takeWhile=Ao,Tt.tap=zo,Tt.throttle=Ta,Tt.thru=Ho,Tt.toArray=_s,Tt.toPairs=Xs,Tt.toPairsIn=Js,Tt.toPath=Vl,Tt.toPlainObject=$s,Tt.transform=Zs,Tt.unary=Da,Tt.union=yc,Tt.unionBy=bc,Tt.unionWith=xc,Tt.uniq=Ro,Tt.uniqBy=Po,Tt.uniqWith=Fo,Tt.unset=Qs,Tt.unzip=Oo,Tt.unzipWith=No,Tt.update=el,Tt.updateWith=tl,Tt.values=nl,Tt.valuesIn=rl,Tt.without=wc,Tt.words=Tl,Tt.wrap=Ea,Tt.xor=_c,Tt.xorBy=Cc,Tt.xorWith=kc,Tt.zip=Sc,Tt.zipObject=Io,Tt.zipObjectDeep=jo,Tt.zipWith=$c,Tt.entries=Xs,Tt.entriesIn=Js,Tt.extend=Uc,Tt.extendWith=Gc,Ol(Tt,Tt),Tt.add=kd,Tt.attempt=pd,Tt.camelCase=od,Tt.capitalize=sl,Tt.ceil=Sd,Tt.clamp=il,Tt.clone=Aa,Tt.cloneDeep=Pa,Tt.cloneDeepWith=Fa,Tt.cloneWith=Ra,Tt.deburr=ll,Tt.divide=$d,Tt.endsWith=ul,Tt.eq=Oa,Tt.escape=cl,Tt.escapeRegExp=dl,Tt.every=Xo,Tt.find=Zo,Tt.findIndex=to,Tt.findKey=Es,Tt.findLast=Qo,Tt.findLastIndex=no,Tt.findLastKey=Ls,Tt.floor=Md,Tt.forEach=ra,Tt.forEachRight=ia,Tt.forIn=As,Tt.forInRight=Rs,Tt.forOwn=Ps,Tt.forOwnRight=Fs,Tt.get=Is,Tt.gt=Na,Tt.gte=Ia,Tt.has=js,Tt.hasIn=Ys,Tt.head=so,Tt.identity=Al,Tt.includes=oa,Tt.indexOf=lo,Tt.inRange=ol,Tt.invoke=ed,Tt.isArguments=ja,Tt.isArray=Vc,Tt.isArrayBuffer=Ya,Tt.isArrayLike=za,Tt.isArrayLikeObject=Ha,Tt.isBoolean=Va,Tt.isBuffer=Bc,Tt.isDate=Ba,Tt.isElement=Wa,Tt.isEmpty=Ua,Tt.isEqual=Ga,Tt.isEqualWith=qa,Tt.isError=Ka,Tt.isFinite=Xa,Tt.isFunction=Ja,Tt.isInteger=Za,Tt.isLength=Qa,Tt.isMap=ns,Tt.isMatch=rs,Tt.isMatchWith=is,Tt.isNaN=os,Tt.isNative=as,Tt.isNil=ls,Tt.isNull=ss,Tt.isNumber=us,Tt.isObject=es,Tt.isObjectLike=ts,Tt.isPlainObject=cs,Tt.isRegExp=ds,Tt.isSafeInteger=fs,Tt.isSet=ps,Tt.isString=hs,Tt.isSymbol=gs,Tt.isTypedArray=ms,Tt.isUndefined=vs,Tt.isWeakMap=ys,Tt.isWeakSet=bs,Tt.join=co,Tt.kebabCase=ad,Tt.last=fo,Tt.lastIndexOf=po,Tt.lowerCase=sd,Tt.lowerFirst=ld,Tt.lt=xs,Tt.lte=ws,Tt.max=Wl,Tt.maxBy=Ul,Tt.mean=Gl,Tt.meanBy=ql,Tt.min=Kl,Tt.minBy=Xl,Tt.multiply=Td,Tt.noConflict=Nl,Tt.noop=Il,Tt.now=Pc,Tt.pad=fl,Tt.padEnd=pl,Tt.padStart=hl,Tt.parseInt=gl,Tt.random=al,Tt.reduce=la,Tt.reduceRight=ua,Tt.repeat=ml,Tt.replace=vl,Tt.result=Gs,Tt.round=Dd,Tt.runInContext=K,Tt.sample=da,Tt.size=ha,Tt.snakeCase=ud,Tt.some=ga,Tt.sortedIndex=xo,Tt.sortedIndexBy=wo,Tt.sortedIndexOf=_o,Tt.sortedLastIndex=Co,Tt.sortedLastIndexBy=ko,Tt.sortedLastIndexOf=So,Tt.startCase=cd,Tt.startsWith=bl,Tt.subtract=Ed,Tt.sum=Jl,Tt.sumBy=Zl,Tt.template=xl,Tt.times=Hl,Tt.toInteger=Cs,Tt.toLength=ks,Tt.toLower=wl,Tt.toNumber=Ss,Tt.toSafeInteger=Ms,Tt.toString=Ts,Tt.toUpper=_l,Tt.trim=Cl,Tt.trimEnd=kl,Tt.trimStart=Sl,Tt.truncate=$l,Tt.unescape=Ml,Tt.uniqueId=Bl,Tt.upperCase=dd,Tt.upperFirst=fd,Tt.each=ra,Tt.eachRight=ia,Tt.first=so,Ol(Tt,function(){var e={};return Bn(Tt,function(t,n){su.call(Tt.prototype,n)||(e[n]=t)}),e}(),{chain:!1}),Tt.VERSION=J,o(["bind","bindKey","curry","curryRight","partial","partialRight"],function(e){Tt[e].placeholder=Tt}),o(["drop","take"],function(e,t){Pt.prototype[e]=function(n){var r=this.__filtered__;if(r&&!t)return new Pt(this);n=n===X?1:Lu(Cs(n),0);var i=this.clone();return r?i.__takeCount__=Au(n,i.__takeCount__):i.__views__.push({size:Au(n,Se),type:e+(i.__dir__<0?"Right":"")}),i},Pt.prototype[e+"Right"]=function(t){return this.reverse()[e](t).reverse()}}),o(["filter","map","takeWhile"],function(e,t){var n=t+1,r=n==ye||n==xe;Pt.prototype[e]=function(e){var t=this.clone();return t.__iteratees__.push({iteratee:wi(e,3),type:n}),t.__filtered__=t.__filtered__||r,t}}),o(["head","last"],function(e,t){var n="take"+(t?"Right":"");Pt.prototype[e]=function(){return this[n](1).value()[0]}}),o(["initial","tail"],function(e,t){var n="drop"+(t?"":"Right");Pt.prototype[e]=function(){return this.__filtered__?new Pt(this):this[n](1)}}),Pt.prototype.compact=function(){return this.filter(Al)},Pt.prototype.find=function(e){return this.filter(e).head()},Pt.prototype.findLast=function(e){return this.reverse().find(e)},Pt.prototype.invokeMap=$a(function(e,t){return"function"==typeof e?new Pt(this):this.map(function(n){return er(n,e,t)})}),Pt.prototype.reject=function(e){return e=wi(e,3),this.filter(function(t){return!e(t)})},Pt.prototype.slice=function(e,t){e=Cs(e);var n=this;return n.__filtered__&&(e>0||t<0)?new Pt(n):(e<0?n=n.takeRight(-e):e&&(n=n.drop(e)),t!==X&&(n=(t=Cs(t))<0?n.dropRight(-t):n.take(t-e)),n)},Pt.prototype.takeRightWhile=function(e){return this.reverse().takeWhile(e).reverse()},Pt.prototype.toArray=function(){return this.take(Se)},Bn(Pt.prototype,function(e,t){var n=/^(?:filter|find|map|reject)|While$/.test(t),r=/^(?:head|last)$/.test(t),i=Tt[r?"take"+("last"==t?"Right":""):t],o=r||/^find/.test(t);i&&(Tt.prototype[t]=function(){var t=this.__wrapped__,a=r?[1]:arguments,s=t instanceof Pt,l=a[0],u=s||Vc(t),c=function(e){var t=i.apply(Tt,f([e],a));return r&&d?t[0]:t};u&&n&&"function"==typeof l&&1!=l.length&&(s=u=!1);var d=this.__chain__,p=!!this.__actions__.length,h=o&&!d,g=s&&!p;if(!o&&u){t=g?t:new Pt(this);var m=e.apply(t,a);return m.__actions__.push({func:Ho,args:[c],thisArg:X}),new Rt(m,d)}return h&&g?e.apply(this,a):(m=this.thru(c),h?r?m.value()[0]:m.value():m)})}),o(["pop","push","shift","sort","splice","unshift"],function(e){var t=iu[e],n=/^(?:push|sort|unshift)$/.test(e)?"tap":"thru",r=/^(?:pop|shift)$/.test(e);Tt.prototype[e]=function(){var e=arguments;if(r&&!this.__chain__){var i=this.value();return t.apply(Vc(i)?i:[],e)}return this[n](function(n){return t.apply(Vc(n)?n:[],e)})}}),Bn(Pt.prototype,function(e,t){var n=Tt[t];if(n){var r=n.name+"";(Bu[r]||(Bu[r]=[])).push({name:t,func:n})}}),Bu[ai(X,re).name]=[{name:"wrapper",func:X}],Pt.prototype.clone=Ft,Pt.prototype.reverse=Ot,Pt.prototype.value=Nt,Tt.prototype.at=Mc,Tt.prototype.chain=Vo,Tt.prototype.commit=Bo,Tt.prototype.next=Wo,Tt.prototype.plant=Go,Tt.prototype.reverse=qo,Tt.prototype.toJSON=Tt.prototype.valueOf=Tt.prototype.value=Ko,xu&&(Tt.prototype[xu]=Uo),Tt}var X,J="4.8.0",Z=200,Q="Expected a function",ee="__lodash_hash_undefined__",te="__lodash_placeholder__",ne=1,re=2,ie=4,oe=8,ae=16,se=32,le=64,ue=128,ce=256,de=512,fe=1,pe=2,he=30,ge="...",me=150,ve=16,ye=1,be=2,xe=3,we=1/0,_e=9007199254740991,Ce=1.7976931348623157e308,ke=NaN,Se=4294967295,$e=Se-1,Me=Se>>>1,Te="[object Arguments]",De="[object Array]",Ee="[object Boolean]",Le="[object Date]",Ae="[object Error]",Re="[object Function]",Pe="[object GeneratorFunction]",Fe="[object Map]",Oe="[object Number]",Ne="[object Object]",Ie="[object Promise]",je="[object RegExp]",Ye="[object Set]",ze="[object String]",He="[object Symbol]",Ve="[object WeakMap]",Be="[object WeakSet]",We="[object ArrayBuffer]",Ue="[object DataView]",Ge="[object Float32Array]",qe="[object Float64Array]",Ke="[object Int8Array]",Xe="[object Int16Array]",Je="[object Int32Array]",Ze="[object Uint8Array]",Qe="[object Uint8ClampedArray]",et="[object Uint16Array]",tt="[object Uint32Array]",nt=/\b__p \+= '';/g,rt=/\b(__p \+=) '' \+/g,it=/(__e\(.*?\)|\b__t\)) \+\n'';/g,ot=/&(?:amp|lt|gt|quot|#39|#96);/g,at=/[&<>"'`]/g,st=RegExp(ot.source),lt=RegExp(at.source),ut=/<%-([\s\S]+?)%>/g,ct=/<%([\s\S]+?)%>/g,dt=/<%=([\s\S]+?)%>/g,ft=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,pt=/^\w*$/,ht=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]/g,gt=/[\\^$.*+?()[\]{}|]/g,mt=RegExp(gt.source),vt=/^\s+|\s+$/g,yt=/^\s+/,bt=/\s+$/,xt=/\\(\\)?/g,wt=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_t=/\w*$/,Ct=/^0x/i,kt=/^[-+]0x[0-9a-f]+$/i,St=/^0b[01]+$/i,$t=/^\[object .+?Constructor\]$/,Mt=/^0o[0-7]+$/i,Tt=/^(?:0|[1-9]\d*)$/,Dt=/[\xc0-\xd6\xd8-\xde\xdf-\xf6\xf8-\xff]/g,Et=/($^)/,Lt=/['\n\r\u2028\u2029\\]/g,At="\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000",Rt="["+At+"]",Pt="[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]",Ft="[a-z\\xdf-\\xf6\\xf8-\\xff]",Ot="[^\\ud800-\\udfff"+At+"\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde]",Nt="\\ud83c[\\udffb-\\udfff]",It="(?:\\ud83c[\\udde6-\\uddff]){2}",jt="[\\ud800-\\udbff][\\udc00-\\udfff]",Yt="[A-Z\\xc0-\\xd6\\xd8-\\xde]",zt="(?:"+Ft+"|"+Ot+")",Ht="(?:[\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0]|\\ud83c[\\udffb-\\udfff])?",Vt="[\\ufe0e\\ufe0f]?"+Ht+("(?:\\u200d(?:"+["[^\\ud800-\\udfff]",It,jt].join("|")+")[\\ufe0e\\ufe0f]?"+Ht+")*"),Bt="(?:"+["[\\u2700-\\u27bf]",It,jt].join("|")+")"+Vt,Wt="(?:"+["[^\\ud800-\\udfff]"+Pt+"?",Pt,It,jt,"[\\ud800-\\udfff]"].join("|")+")",Ut=RegExp(Pt,"g"),Gt=RegExp(Nt+"(?="+Nt+")|"+Wt+Vt,"g"),qt=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe23\\u20d0-\\u20f0\\ufe0e\\ufe0f]"),Kt=/[a-zA-Z0-9]+/g,Xt=RegExp([Yt+"?"+Ft+"+(?="+[Rt,Yt,"$"].join("|")+")","(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2018\\u2019\\u201c\\u201d \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?="+[Rt,Yt+zt,"$"].join("|")+")",Yt+"?"+zt+"+",Yt+"+","\\d+",Bt].join("|"),"g"),Jt=/[a-z][A-Z]|[A-Z]{2,}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Zt=["Array","Buffer","DataView","Date","Error","Float32Array","Float64Array","Function","Int8Array","Int16Array","Int32Array","Map","Math","Object","Promise","Reflect","RegExp","Set","String","Symbol","TypeError","Uint8Array","Uint8ClampedArray","Uint16Array","Uint32Array","WeakMap","_","clearTimeout","isFinite","parseInt","setTimeout"],Qt=-1,en={};en[Ge]=en[qe]=en[Ke]=en[Xe]=en[Je]=en[Ze]=en[Qe]=en[et]=en[tt]=!0,en[Te]=en[De]=en[We]=en[Ee]=en[Ue]=en[Le]=en[Ae]=en[Re]=en[Fe]=en[Oe]=en[Ne]=en[je]=en[Ye]=en[ze]=en[Ve]=!1;var tn={};tn[Te]=tn[De]=tn[We]=tn[Ue]=tn[Ee]=tn[Le]=tn[Ge]=tn[qe]=tn[Ke]=tn[Xe]=tn[Je]=tn[Fe]=tn[Oe]=tn[Ne]=tn[je]=tn[Ye]=tn[ze]=tn[He]=tn[Ze]=tn[Qe]=tn[et]=tn[tt]=!0,tn[Ae]=tn[Re]=tn[Ve]=!1;var nn={"À":"A","Á":"A","Â":"A","Ã":"A","Ä":"A","Å":"A","à":"a","á":"a","â":"a","ã":"a","ä":"a","å":"a","Ç":"C","ç":"c","Ð":"D","ð":"d","È":"E","É":"E","Ê":"E","Ë":"E","è":"e","é":"e","ê":"e","ë":"e","Ì":"I","Í":"I","Î":"I","Ï":"I","ì":"i","í":"i","î":"i","ï":"i","Ñ":"N","ñ":"n","Ò":"O","Ó":"O","Ô":"O","Õ":"O","Ö":"O","Ø":"O","ò":"o","ó":"o","ô":"o","õ":"o","ö":"o","ø":"o","Ù":"U","Ú":"U","Û":"U","Ü":"U","ù":"u","ú":"u","û":"u","ü":"u","Ý":"Y","ý":"y","ÿ":"y","Æ":"Ae","æ":"ae","Þ":"Th","þ":"th","ß":"ss"},rn={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","`":"&#96;"},on={"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'","&#96;":"`"},an={function:!0,object:!0},sn={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},ln=parseFloat,un=parseInt,cn=an[typeof exports]&&exports&&!exports.nodeType?exports:X,dn=an[typeof module]&&module&&!module.nodeType?module:X,fn=dn&&dn.exports===cn?cn:X,pn=L(cn&&dn&&"object"==typeof global&&global),hn=L(an[typeof self]&&self),gn=L(an[typeof window]&&window),mn=L(an[typeof this]&&this),vn=pn||gn!==(mn&&mn.window)&&gn||hn||mn||Function("return this")(),yn=K();(gn||hn||{})._=yn,"function"==typeof define&&"object"==typeof define.amd&&define.amd?define(function(){return yn}):cn&&dn?(fn&&((dn.exports=yn)._=yn),cn._=yn):vn._=yn}.call(this),function(e){"use strict";function t(e,t){return t=t||Error,function(){var n,r,i=arguments[0],o=arguments[1],a="["+(e?e+":":"")+i+"] ",s=U(arguments,2).map(function(e){return _e(e,Ur.objectMaxDepth)});for(a+=o.replace(/\{\d+\}/g,function(e){var t=+e.slice(1,-1);return t<s.length?s[t]:e}),a+="\nhttp://errors.angularjs.org/1.6.4/"+(e?e+"/":"")+i,r=0,n="?";r<s.length;r++,n="&")a+=n+"p"+r+"="+encodeURIComponent(s[r]);return new t(a)}}function n(e){if(!w(e))return Ur;x(e.objectMaxDepth)&&(Ur.objectMaxDepth=r(e.objectMaxDepth)?e.objectMaxDepth:NaN)}function r(e){return k(e)&&e>0}function i(e){if(null==e||T(e))return!1;if(ci(e)||C(e)||Zr&&e instanceof Zr)return!0;var t="length"in Object(e)&&e.length;return k(t)&&(t>=0&&(t-1 in e||e instanceof Array)||"function"==typeof e.item)}function o(e,t,n){var r,a;if(e)if($(e))for(r in e)"prototype"!==r&&"length"!==r&&"name"!==r&&e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else if(ci(e)||i(e)){var s="object"!=typeof e;for(r=0,a=e.length;r<a;r++)(s||r in e)&&t.call(n,e[r],r,e)}else if(e.forEach&&e.forEach!==o)e.forEach(t,n,e);else if(_(e))for(r in e)t.call(n,e[r],r,e);else if("function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&t.call(n,e[r],r,e);else for(r in e)Wr.call(e,r)&&t.call(n,e[r],r,e);return e}function a(e,t,n){for(var r=Object.keys(e).sort(),i=0;i<r.length;i++)t.call(n,e[r[i]],r[i]);return r}function s(e){return function(t,n){e(n,t)}}function l(){return++li}function u(e,t){t?e.$$hashKey=t:delete e.$$hashKey}function c(e,t,n){for(var r=e.$$hashKey,i=0,o=t.length;i<o;++i){var a=t[i];if(w(a)||$(a))for(var s=Object.keys(a),l=0,d=s.length;l<d;l++){var f=s[l],p=a[f];n&&w(p)?S(p)?e[f]=new Date(p.valueOf()):M(p)?e[f]=new RegExp(p):p.nodeName?e[f]=p.cloneNode(!0):N(p)?e[f]=p.clone():(w(e[f])||(e[f]=ci(p)?[]:{}),c(e[f],[p],!0)):e[f]=p}}return u(e,r),e}function d(e){return c(e,ti.call(arguments,1),!1)}function f(e){return c(e,ti.call(arguments,1),!0)}function p(e){return parseInt(e,10)}function h(e,t){return d(Object.create(e),t)}function g(){}function m(e){return e}function v(e){return function(){return e}}function y(e){return $(e.toString)&&e.toString!==ii}function b(e){return void 0===e}function x(e){return void 0!==e}function w(e){return null!==e&&"object"==typeof e}function _(e){return null!==e&&"object"==typeof e&&!oi(e)}function C(e){return"string"==typeof e}function k(e){return"number"==typeof e}function S(e){return"[object Date]"===ii.call(e)}function $(e){return"function"==typeof e}function M(e){return"[object RegExp]"===ii.call(e)}function T(e){return e&&e.window===e}function D(e){return e&&e.$evalAsync&&e.$watch}function E(e){return"[object File]"===ii.call(e)}function L(e){return"[object FormData]"===ii.call(e)}function A(e){return"[object Blob]"===ii.call(e)}function R(e){return"boolean"==typeof e}function P(e){return e&&$(e.then)}function F(e){return e&&k(e.length)&&di.test(ii.call(e))}function O(e){return"[object ArrayBuffer]"===ii.call(e)}function N(e){return!(!e||!(e.nodeName||e.prop&&e.attr&&e.find))}function I(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function j(e){return Gr(e.nodeName||e[0]&&e[0].nodeName)}function Y(e,t){return-1!==Array.prototype.indexOf.call(e,t)}function z(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),n}function H(e,t,n){function i(e,t,n){if(--n<0)return"...";var r,i=t.$$hashKey;if(ci(e))for(var o=0,s=e.length;o<s;o++)t.push(a(e[o],n));else if(_(e))for(r in e)t[r]=a(e[r],n);else if(e&&"function"==typeof e.hasOwnProperty)for(r in e)e.hasOwnProperty(r)&&(t[r]=a(e[r],n));else for(r in e)Wr.call(e,r)&&(t[r]=a(e[r],n));return u(t,i),t}function a(e,t){if(!w(e))return e;var n=l.indexOf(e);if(-1!==n)return c[n];if(T(e)||D(e))throw ai("cpws","Can't copy! Making copies of Window or Scope instances is not supported.");var r=!1,o=s(e);return void 0===o&&(o=ci(e)?[]:Object.create(oi(e)),r=!0),l.push(e),c.push(o),r?i(e,o,t):o}function s(e){switch(ii.call(e)){case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Float32Array]":case"[object Float64Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":case"[object Uint16Array]":case"[object Uint32Array]":return new e.constructor(a(e.buffer),e.byteOffset,e.length);case"[object ArrayBuffer]":if(!e.slice){var t=new ArrayBuffer(e.byteLength);return new Uint8Array(t).set(new Uint8Array(e)),t}return e.slice(0);case"[object Boolean]":case"[object Number]":case"[object String]":case"[object Date]":return new e.constructor(e.valueOf());case"[object RegExp]":var n=new RegExp(e.source,e.toString().match(/[^/]*$/)[0]);return n.lastIndex=e.lastIndex,n;case"[object Blob]":return new e.constructor([e],{type:e.type})}if($(e.cloneNode))return e.cloneNode(!0)}var l=[],c=[];if(n=r(n)?n:NaN,t){if(F(t)||O(t))throw ai("cpta","Can't copy! TypedArray destination cannot be mutated.");if(e===t)throw ai("cpi","Can't copy! Source and destination are identical.");return ci(t)?t.length=0:o(t,function(e,n){"$$hashKey"!==n&&delete t[n]}),l.push(e),c.push(t),i(e,t,n)}return a(e,n)}function V(e,t){return e===t||e!==e&&t!==t}function B(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n,r,i,o=typeof e;if(o===typeof t&&"object"===o){if(!ci(e)){if(S(e))return!!S(t)&&V(e.getTime(),t.getTime());if(M(e))return!!M(t)&&e.toString()===t.toString();if(D(e)||D(t)||T(e)||T(t)||ci(t)||S(t)||M(t))return!1;i=ve();for(r in e)if("$"!==r.charAt(0)&&!$(e[r])){if(!B(e[r],t[r]))return!1;i[r]=!0}for(r in t)if(!(r in i)&&"$"!==r.charAt(0)&&x(t[r])&&!$(t[r]))return!1;return!0}if(!ci(t))return!1;if((n=e.length)===t.length){for(r=0;r<n;r++)if(!B(e[r],t[r]))return!1;return!0}}return!1}function W(e,t,n){return e.concat(ti.call(t,n))}function U(e,t){return ti.call(e,t||0)}function G(e,t){var n=arguments.length>2?U(arguments,2):[];return!$(t)||t instanceof RegExp?t:n.length?function(){return arguments.length?t.apply(e,W(n,arguments,0)):t.apply(e,n)}:function(){return arguments.length?t.apply(e,arguments):t.call(e)}}function q(t,n){var r=n;return"string"==typeof t&&"$"===t.charAt(0)&&"$"===t.charAt(1)?r=void 0:T(n)?r="$WINDOW":n&&e.document===n?r="$DOCUMENT":D(n)&&(r="$SCOPE"),r}function K(e,t){if(!b(e))return k(t)||(t=t?2:null),JSON.stringify(e,q,t)}function X(e){return C(e)?JSON.parse(e):e}function J(e,t){e=e.replace(mi,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return ui(n)?t:n}function Z(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function Q(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return Z(e,n*(J(t,r)-r))}function ee(e){e=Zr(e).clone();try{e.empty()}catch(e){}var t=Zr("<div>").append(e).html();try{return e[0].nodeType===_i?Gr(t):t.match(/^(<[^>]+>)/)[1].replace(/^<([\w-]+)/,function(e,t){return"<"+Gr(t)})}catch(e){return Gr(t)}}function te(e){try{return decodeURIComponent(e)}catch(e){}}function ne(e){var t={};return o((e||"").split("&"),function(e){var n,r,i;e&&(r=e=e.replace(/\+/g,"%20"),-1!==(n=e.indexOf("="))&&(r=e.substring(0,n),i=e.substring(n+1)),x(r=te(r))&&(i=!x(i)||te(i),Wr.call(t,r)?ci(t[r])?t[r].push(i):t[r]=[t[r],i]:t[r]=i))}),t}function re(e){var t=[];return o(e,function(e,n){ci(e)?o(e,function(e){t.push(oe(n,!0)+(!0===e?"":"="+oe(e,!0)))}):t.push(oe(n,!0)+(!0===e?"":"="+oe(e,!0)))}),t.length?t.join("&"):""}function ie(e){return oe(e,!0).replace(/%26/gi,"&").replace(/%3D/gi,"=").replace(/%2B/gi,"+")}function oe(e,t){return encodeURIComponent(e).replace(/%40/gi,"@").replace(/%3A/gi,":").replace(/%24/g,"$").replace(/%2C/gi,",").replace(/%3B/gi,";").replace(/%20/g,t?"%20":"+")}function ae(e,t){var n,r,i=vi.length;for(r=0;r<i;++r)if(n=vi[r]+t,C(n=e.getAttribute(n)))return n;return null}function se(t,n){var r,i,a={};if(o(vi,function(e){var n=e+"app";!r&&t.hasAttribute&&t.hasAttribute(n)&&(r=t,i=t.getAttribute(n))}),o(vi,function(e){var n,o=e+"app";!r&&(n=t.querySelector("["+o.replace(":","\\:")+"]"))&&(r=n,i=n.getAttribute(o))}),r){if(!yi)return void e.console.error("Angular: disabling automatic bootstrap. <script> protocol indicates an extension, document.location.href does not match.");a.strictDi=null!==ae(r,"strict-di"),n(r,i?[i]:[],a)}}function le(t,n,r){w(r)||(r={}),r=d({strictDi:!1},r);var i=function(){if((t=Zr(t)).injector()){var i=t[0]===e.document?"document":ee(t);throw ai("btstrpd","App already bootstrapped with this element '{0}'",i.replace(/</,"&lt;").replace(/>/,"&gt;"))}(n=n||[]).unshift(["$provide",function(e){e.value("$rootElement",t)}]),r.debugInfoEnabled&&n.push(["$compileProvider",function(e){e.debugInfoEnabled(!0)}]),n.unshift("ng");var o=lt(n,r.strictDi);return o.invoke(["$rootScope","$rootElement","$compile","$injector",function(e,t,n,r){e.$apply(function(){t.data("$injector",r),n(t)(e)})}]),o},a=/^NG_ENABLE_DEBUG_INFO!/,s=/^NG_DEFER_BOOTSTRAP!/;if(e&&a.test(e.name)&&(r.debugInfoEnabled=!0,e.name=e.name.replace(a,"")),e&&!s.test(e.name))return i();e.name=e.name.replace(s,""),si.resumeBootstrap=function(e){return o(e,function(e){n.push(e)}),i()},$(si.resumeDeferredBootstrap)&&si.resumeDeferredBootstrap()}function ue(){e.name="NG_ENABLE_DEBUG_INFO!"+e.name,e.location.reload()}function ce(e){var t=si.element(e).injector();if(!t)throw ai("test","no injector found for element argument to getTestability");return t.get("$$testability")}function de(e,t){return t=t||"_",e.replace(bi,function(e,n){return(n?t:"")+e.toLowerCase()})}function fe(e,t,n){if(!e)throw ai("areq","Argument '{0}' is {1}",t||"?",n||"required");return e}function pe(e,t,n){return n&&ci(e)&&(e=e[e.length-1]),fe($(e),t,"not a function, got "+(e&&"object"==typeof e?e.constructor.name||"Object":typeof e)),e}function he(e,t){if("hasOwnProperty"===e)throw ai("badname","hasOwnProperty is not a valid {0} name",t)}function ge(e,t,n){if(!t)return e;for(var r,i=t.split("."),o=e,a=i.length,s=0;s<a;s++)r=i[s],e&&(e=(o=e)[r]);return!n&&$(e)?G(o,e):e}function me(e){for(var t,n=e[0],r=e[e.length-1],i=1;n!==r&&(n=n.nextSibling);i++)(t||e[i]!==n)&&(t||(t=Zr(ti.call(e,0,i))),t.push(n));return t||e}function ve(){return Object.create(null)}function ye(e){if(null==e)return"";switch(typeof e){case"string":break;case"number":e=""+e;break;default:e=!y(e)||ci(e)||S(e)?K(e):e.toString()}return e}function be(e){function n(e,t,n){return e[t]||(e[t]=n())}var r=t("$injector"),i=t("ng"),o=n(e,"angular",Object);return o.$$minErr=o.$$minErr||t,n(o,"module",function(){var e={};return function(t,o,a){var s={};return function(e,t){if("hasOwnProperty"===e)throw i("badname","hasOwnProperty is not a valid {0} name",t)}(t,"module"),o&&e.hasOwnProperty(t)&&(e[t]=null),n(e,t,function(){function e(e,t,n,r){return r||(r=l),function(){return r[n||"push"]([e,t,arguments]),f}}function n(e,n,r){return r||(r=l),function(i,o){return o&&$(o)&&(o.$$moduleName=t),r.push([e,n,arguments]),f}}if(!o)throw r("nomod","Module '{0}' is not available! You either misspelled the module name or forgot to load it. If registering a module ensure that you specify the dependencies as the second argument.",t);var l=[],u=[],c=[],d=e("$injector","invoke","push",u),f={_invokeQueue:l,_configBlocks:u,_runBlocks:c,info:function(e){if(x(e)){if(!w(e))throw i("aobj","Argument '{0}' must be an object","value");return s=e,this}return s},requires:o,name:t,provider:n("$provide","provider"),factory:n("$provide","factory"),service:n("$provide","service"),value:e("$provide","value"),constant:e("$provide","constant","unshift"),decorator:n("$provide","decorator",u),animation:n("$animateProvider","register"),filter:n("$filterProvider","register"),controller:n("$controllerProvider","register"),directive:n("$compileProvider","directive"),component:n("$compileProvider","component"),config:d,run:function(e){return c.push(e),this}};return a&&d(a),f})}})}function xe(e,t){if(ci(e)){t=t||[];for(var n=0,r=e.length;n<r;n++)t[n]=e[n]}else if(w(e)){t=t||{};for(var i in e)"$"===i.charAt(0)&&"$"===i.charAt(1)||(t[i]=e[i])}return t||e}function we(e,t){var n=[];return r(t)&&(e=H(e,null,t)),JSON.stringify(e,function(e,t){if(t=q(e,t),w(t)){if(n.indexOf(t)>=0)return"...";n.push(t)}return t})}function _e(e,t){return"function"==typeof e?e.toString().replace(/ \{[\s\S]*$/,""):b(e)?"undefined":"string"!=typeof e?we(e,t):e}function Ce(){return++Ti}function ke(e){return $e(e.replace(Ei,"ms-"))}function Se(e,t){return t.toUpperCase()}function $e(e){return e.replace(Di,Se)}function Me(e){return!Pi.test(e)}function Te(e){var t=e.nodeType;return t===wi||!t||t===ki}function De(e){for(var t in Mi[e.ng339])return!0;return!1}function Ee(e,t){var n,r,i,a,s=t.createDocumentFragment(),l=[];if(Me(e))l.push(t.createTextNode(e));else{for(n=s.appendChild(t.createElement("div")),r=(Fi.exec(e)||["",""])[1].toLowerCase(),i=Ni[r]||Ni._default,n.innerHTML=i[1]+e.replace(Oi,"<$1></$2>")+i[2],a=i[0];a--;)n=n.lastChild;l=W(l,n.childNodes),(n=s.firstChild).textContent=""}return s.textContent="",s.innerHTML="",o(l,function(e){s.appendChild(e)}),s}function Le(t,n){n=n||e.document;var r;return(r=Ri.exec(t))?[n.createElement(r[1])]:(r=Ee(t,n))?r.childNodes:[]}function Ae(e,t){var n=e.parentNode;n&&n.replaceChild(t,e),t.appendChild(e)}function Re(e){if(e instanceof Re)return e;var t;if(C(e)&&(e=fi(e),t=!0),!(this instanceof Re)){if(t&&"<"!==e.charAt(0))throw Ai("nosel","Looking up elements via selectors is not supported by jqLite! See: http://docs.angularjs.org/api/angular.element");return new Re(e)}t?Ve(this,Le(e)):$(e)?Ke(e):Ve(this,e)}function Pe(e){return e.cloneNode(!0)}function Fe(e,t){!t&&Te(e)&&Zr.cleanData([e]),e.querySelectorAll&&Zr.cleanData(e.querySelectorAll("*"))}function Oe(e,t,n,r){if(x(r))throw Ai("offargs","jqLite#off() does not support the `selector` argument");var i=Ie(e),a=i&&i.events,s=i&&i.handle;if(s)if(t){var l=function(t){var r=a[t];x(n)&&z(r||[],n),x(n)&&r&&r.length>0||(e.removeEventListener(t,s),delete a[t])};o(t.split(" "),function(e){l(e),Li[e]&&l(Li[e])})}else for(t in a)"$destroy"!==t&&e.removeEventListener(t,s),delete a[t]}function Ne(e,t){var n=e.ng339,r=n&&Mi[n];if(r){if(t)return void delete r.data[t];r.handle&&(r.events.$destroy&&r.handle({},"$destroy"),Oe(e)),delete Mi[n],e.ng339=void 0}}function Ie(e,t){var n=e.ng339,r=n&&Mi[n];return t&&!r&&(e.ng339=n=Ce(),r=Mi[n]={events:{},data:{},handle:void 0}),r}function je(e,t,n){if(Te(e)){var r,i=x(n),o=!i&&t&&!w(t),a=!t,s=Ie(e,!o),l=s&&s.data;if(i)l[$e(t)]=n;else{if(a)return l;if(o)return l&&l[$e(t)];for(r in t)l[$e(r)]=t[r]}}}function Ye(e,t){return!!e.getAttribute&&(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").indexOf(" "+t+" ")>-1}function ze(e,t){t&&e.setAttribute&&o(t.split(" "),function(t){e.setAttribute("class",fi((" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ").replace(" "+fi(t)+" "," ")))})}function He(e,t){if(t&&e.setAttribute){var n=(" "+(e.getAttribute("class")||"")+" ").replace(/[\n\t]/g," ");o(t.split(" "),function(e){e=fi(e),-1===n.indexOf(" "+e+" ")&&(n+=e+" ")}),e.setAttribute("class",fi(n))}}function Ve(e,t){if(t)if(t.nodeType)e[e.length++]=t;else{var n=t.length;if("number"==typeof n&&t.window!==t){if(n)for(var r=0;r<n;r++)e[e.length++]=t[r]}else e[e.length++]=t}}function Be(e,t){return We(e,"$"+(t||"ngController")+"Controller")}function We(e,t,n){e.nodeType===ki&&(e=e.documentElement);for(var r=ci(t)?t:[t];e;){for(var i=0,o=r.length;i<o;i++)if(x(n=Zr.data(e,r[i])))return n;e=e.parentNode||e.nodeType===Si&&e.host}}function Ue(e){for(Fe(e,!0);e.firstChild;)e.removeChild(e.firstChild)}function Ge(e,t){t||Fe(e);var n=e.parentNode;n&&n.removeChild(e)}function qe(t,n){"complete"===(n=n||e).document.readyState?n.setTimeout(t):Zr(n).on("load",t)}function Ke(t){function n(){e.document.removeEventListener("DOMContentLoaded",n),e.removeEventListener("load",n),t()}"complete"===e.document.readyState?e.setTimeout(t):(e.document.addEventListener("DOMContentLoaded",n),e.addEventListener("load",n))}function Xe(e,t){var n=Yi[t.toLowerCase()];return n&&zi[j(e)]&&n}function Je(e){return Hi[e]}function Ze(e,t){var n=function(n,r){n.isDefaultPrevented=function(){return n.defaultPrevented};var i=t[r||n.type],o=i?i.length:0;if(o){if(b(n.immediatePropagationStopped)){var a=n.stopImmediatePropagation;n.stopImmediatePropagation=function(){n.immediatePropagationStopped=!0,n.stopPropagation&&n.stopPropagation(),a&&a.call(n)}}n.isImmediatePropagationStopped=function(){return!0===n.immediatePropagationStopped};var s=i.specialHandlerWrapper||Qe;o>1&&(i=xe(i));for(var l=0;l<o;l++)n.isImmediatePropagationStopped()||s(e,n,i[l])}};return n.elem=e,n}function Qe(e,t,n){n.call(e,t)}function et(e,t,n){var r=t.relatedTarget;r&&(r===e||Ii.call(e,r))||n.call(e,t)}function tt(){this.$get=function(){return d(Re,{hasClass:function(e,t){return e.attr&&(e=e[0]),Ye(e,t)},addClass:function(e,t){return e.attr&&(e=e[0]),He(e,t)},removeClass:function(e,t){return e.attr&&(e=e[0]),ze(e,t)}})}}function nt(e,t){var n=e&&e.$$hashKey;if(n)return"function"==typeof n&&(n=e.$$hashKey()),n;var r=typeof e;return n="function"===r||"object"===r&&null!==e?e.$$hashKey=r+":"+(t||l)():r+":"+e}function rt(){this._keys=[],this._values=[],this._lastKey=NaN,this._lastIndex=-1}function it(e){return Function.prototype.toString.call(e)}function ot(e){var t=it(e).replace(Xi,"");return t.match(Ui)||t.match(Gi)}function at(e){var t=ot(e);return t?"function("+(t[1]||"").replace(/[\s\r\n]+/," ")+")":"fn"}function st(e,t,n){var r,i;if("function"==typeof e){if(!(r=e.$inject)){if(r=[],e.length){if(t)throw C(n)&&n||(n=e.name||at(e)),Ji("strictdi","{0} is not using explicit annotation and cannot be invoked in strict mode",n);o(ot(e)[1].split(qi),function(e){e.replace(Ki,function(e,t,n){r.push(n)})})}e.$inject=r}}else ci(e)?(pe(e[i=e.length-1],"fn"),r=e.slice(0,i)):pe(e,"fn",!0);return r}function lt(e,t){function n(e){return function(t,n){if(!w(t))return e(t,n);o(t,s(e))}}function r(e,t){if(he(e,"service"),($(t)||ci(t))&&(t=_.instantiate(t)),!t.$get)throw Ji("pget","Provider '{0}' must define $get factory method.",e);return x[e+g]=t}function i(e,t){return function(){var n=M.invoke(t,this);if(b(n))throw Ji("undef","Provider '{0}' must return a value from $get factory method.",e);return n}}function a(e,t,n){return r(e,{$get:!1!==n?i(e,t):t})}function l(e,t){return a(e,["$injector",function(e){return e.instantiate(t)}])}function u(e,t){return a(e,v(t),!1)}function c(e,t){he(e,"constant"),x[e]=t,k[e]=t}function d(e,t){var n=_.get(e+g),r=n.$get;n.$get=function(){var e=M.invoke(r,n);return M.invoke(t,null,{$delegate:e})}}function f(e){fe(b(e)||ci(e),"modulesToLoad","not an array");var t,n=[];return o(e,function(e){function r(e){var t,n;for(t=0,n=e.length;t<n;t++){var r=e[t],i=_.get(r[0]);i[r[1]].apply(i,r[2])}}if(!y.get(e)){y.set(e,!0);try{C(e)?(t=ei(e),M.modules[e]=t,n=n.concat(f(t.requires)).concat(t._runBlocks),r(t._invokeQueue),r(t._configBlocks)):$(e)?n.push(_.invoke(e)):ci(e)?n.push(_.invoke(e)):pe(e,"module")}catch(t){throw ci(e)&&(e=e[e.length-1]),t.message&&t.stack&&-1===t.stack.indexOf(t.message)&&(t=t.message+"\n"+t.stack),Ji("modulerr","Failed to instantiate module {0} due to:\n{1}",e,t.stack||t.message||t)}}}),n}function p(e,n){function r(t,r){if(e.hasOwnProperty(t)){if(e[t]===h)throw Ji("cdep","Circular dependency found: {0}",t+" <- "+m.join(" <- "));return e[t]}try{return m.unshift(t),e[t]=h,e[t]=n(t,r),e[t]}catch(n){throw e[t]===h&&delete e[t],n}finally{m.shift()}}function i(e,n,i){for(var o=[],a=lt.$$annotate(e,t,i),s=0,l=a.length;s<l;s++){var u=a[s];if("string"!=typeof u)throw Ji("itkn","Incorrect injection token! Expected service name as string, got {0}",u);o.push(n&&n.hasOwnProperty(u)?n[u]:r(u,i))}return o}function o(e){if(Jr||"function"!=typeof e)return!1;var t=e.$$ngIsClass;return R(t)||(t=e.$$ngIsClass=/^(?:class\b|constructor\()/.test(it(e))),t}function a(e,t,n,r){"string"==typeof n&&(r=n,n=null);var a=i(e,n,r);return ci(e)&&(e=e[e.length-1]),o(e)?(a.unshift(null),new(Function.prototype.bind.apply(e,a))):e.apply(t,a)}function s(e,t,n){var r=ci(e)?e[e.length-1]:e,o=i(e,t,n);return o.unshift(null),new(Function.prototype.bind.apply(r,o))}return{invoke:a,instantiate:s,get:r,annotate:lt.$$annotate,has:function(t){return x.hasOwnProperty(t+g)||e.hasOwnProperty(t)}}}t=!0===t;var h={},g="Provider",m=[],y=new Bi,x={$provide:{provider:n(r),factory:n(a),service:n(l),value:n(u),constant:n(c),decorator:d}},_=x.$injector=p(x,function(e,t){throw si.isString(t)&&m.push(t),Ji("unpr","Unknown provider: {0}",m.join(" <- "))}),k={},S=p(k,function(e,t){var n=_.get(e+g,t);return M.invoke(n.$get,n,void 0,e)}),M=S;x["$injector"+g]={$get:v(S)},M.modules=_.modules=ve();var T=f(e);return M=S.get("$injector"),M.strictDi=t,o(T,function(e){e&&M.invoke(e)}),M}function ut(){var e=!0;this.disableAutoScrolling=function(){e=!1},this.$get=["$window","$location","$rootScope",function(t,n,r){function i(e){var t=null;return Array.prototype.some.call(e,function(e){if("a"===j(e))return t=e,!0}),t}function o(){var e=s.yOffset;if($(e))e=e();else if(N(e)){var n=e[0];e="fixed"!==t.getComputedStyle(n).position?0:n.getBoundingClientRect().bottom}else k(e)||(e=0);return e}function a(e){if(e){e.scrollIntoView();var n=o();if(n){var r=e.getBoundingClientRect().top;t.scrollBy(0,r-n)}}else t.scrollTo(0,0)}function s(e){var t;(e=C(e)?e:k(e)?e.toString():n.hash())?(t=l.getElementById(e))?a(t):(t=i(l.getElementsByName(e)))?a(t):"top"===e&&a(null):a(null)}var l=t.document;return e&&r.$watch(function(){return n.hash()},function(e,t){e===t&&""===e||qe(function(){r.$evalAsync(s)})}),s}]}function ct(e,t){return e||t?e?t?(ci(e)&&(e=e.join(" ")),ci(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function dt(e){for(var t=0;t<e.length;t++){var n=e[t];if(n.nodeType===Qi)return n}}function ft(e){C(e)&&(e=e.split(" "));var t=ve();return o(e,function(e){e.length&&(t[e]=!0)}),t}function pt(e){return w(e)?e:{}}function ht(e,t,n,r){function i(e){try{e.apply(null,U(arguments,1))}finally{if(0===--v)for(;y.length;)try{y.pop()()}catch(e){n.error(e)}}}function a(e){var t=e.indexOf("#");return-1===t?"":e.substr(t)}function s(){k=null,u()}function l(){x=S(),B(x=b(x)?null:x,T)&&(x=T),T=x,w=x}function u(){var e=w;l(),_===c.url()&&e===x||(_=c.url(),w=x,o($,function(e){e(c.url(),x)}))}var c=this,d=e.location,f=e.history,p=e.setTimeout,h=e.clearTimeout,m={};c.isMock=!1;var v=0,y=[];c.$$completeOutstandingRequest=i,c.$$incOutstandingRequestCount=function(){v++},c.notifyWhenNoOutstandingRequests=function(e){0===v?e():y.push(e)};var x,w,_=d.href,C=t.find("base"),k=null,S=r.history?function(){try{return f.state}catch(e){}}:g;l(),c.url=function(t,n,i){if(b(i)&&(i=null),d!==e.location&&(d=e.location),f!==e.history&&(f=e.history),t){var o=w===i;if(_===t&&(!r.history||o))return c;var s=_&&Kt(_)===Kt(t);return _=t,w=i,!r.history||s&&o?(s||(k=t),n?d.replace(t):s?d.hash=a(t):d.href=t,d.href!==t&&(k=t)):(f[n?"replaceState":"pushState"](i,"",t),l()),k&&(k=t),c}return k||d.href.replace(/%27/g,"'")},c.state=function(){return x};var $=[],M=!1,T=null;c.onUrlChange=function(t){return M||(r.history&&Zr(e).on("popstate",s),Zr(e).on("hashchange",s),M=!0),$.push(t),t},c.$$applicationDestroyed=function(){Zr(e).off("hashchange popstate",s)},c.$$checkUrlChange=u,c.baseHref=function(){var e=C.attr("href");return e?e.replace(/^(https?:)?\/\/[^/]*/,""):""},c.defer=function(e,t){var n;return v++,n=p(function(){delete m[n],i(e)},t||0),m[n]=!0,n},c.defer.cancel=function(e){return!!m[e]&&(delete m[e],h(e),i(g),!0)}}function gt(){this.$get=["$window","$log","$sniffer","$document",function(e,t,n,r){return new ht(e,r,t,n)}]}function mt(){this.$get=function(){function e(e,r){function i(e){e!==f&&(p?p===e&&(p=e.n):p=e,o(e.n,e.p),o(e,f),(f=e).n=null)}function o(e,t){e!==t&&(e&&(e.p=t),t&&(t.n=e))}if(e in n)throw t("$cacheFactory")("iid","CacheId '{0}' is already taken!",e);var a=0,s=d({},r,{id:e}),l=ve(),u=r&&r.capacity||Number.MAX_VALUE,c=ve(),f=null,p=null;return n[e]={put:function(e,t){if(!b(t))return u<Number.MAX_VALUE&&i(c[e]||(c[e]={key:e})),e in l||a++,l[e]=t,a>u&&this.remove(p.key),t},get:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;i(t)}return l[e]},remove:function(e){if(u<Number.MAX_VALUE){var t=c[e];if(!t)return;t===f&&(f=t.p),t===p&&(p=t.n),o(t.n,t.p),delete c[e]}e in l&&(delete l[e],a--)},removeAll:function(){l=ve(),a=0,c=ve(),f=p=null},destroy:function(){l=null,s=null,c=null,delete n[e]},info:function(){return d({},s,{size:a})}}}var n={};return e.info=function(){var e={};return o(n,function(t,n){e[n]=t.info()}),e},e.get=function(e){return n[e]},e}}function vt(){this.$get=["$cacheFactory",function(e){return e("templates")}]}function yt(){}function bt(t,n){function r(e,t,n){var r=/^\s*([@&<]|=(\*?))(\??)\s*([\w$]*)\s*$/,i=ve();return o(e,function(e,o){if(e in M)i[o]=M[e];else{var a=e.match(r);if(!a)throw ao("iscp","Invalid {3} for directive '{0}'. Definition: {... {1}: '{2}' ...}",t,o,e,n?"controller bindings definition":"isolate scope definition");i[o]={mode:a[1][0],collection:"*"===a[2],optional:"?"===a[3],attrName:a[4]||o},a[4]&&(M[e]=i[o])}}),i}function i(e,t){var n={isolateScope:null,bindToController:null};if(w(e.scope)&&(!0===e.bindToController?(n.bindToController=r(e.scope,t,!0),n.isolateScope={}):n.isolateScope=r(e.scope,t,!1)),w(e.bindToController)&&(n.bindToController=r(e.bindToController,t,!0)),n.bindToController&&!e.controller)throw ao("noctrl","Cannot bind to controller without directive '{0}'s controller.",t);return n}function a(e){var t=e.charAt(0);if(!t||t!==Gr(t))throw ao("baddir","Directive/Component name '{0}' is invalid. The first character must be a lowercase letter",e);if(e!==e.trim())throw ao("baddir","Directive/Component name '{0}' is invalid. The name should not contain leading or trailing whitespaces",e)}function l(e){var t=e.require||e.controller&&e.name;return!ci(t)&&w(t)&&o(t,function(e,n){var r=e.match(k);e.substring(r[0].length)||(t[n]=r[0]+n)}),t}function u(e,t){if(e&&(!C(e)||!/[EACM]/.test(e)))throw ao("badrestrict","Restrict property '{0}' of directive '{1}' is invalid",e,t);return e||"EA"}var c={},f="Directive",p=/^\s*directive:\s*([\w-]+)\s+(.*)$/,y=/(([\w-]+)(?::([^;]+))?;?)/,_=I("ngSrc,ngSrcset,src,srcset"),k=/^(?:(\^\^?)?(\?)?(\^\^?)?)?/,S=/^(on[a-z]+|formaction)$/,M=ve();this.directive=function e(n,r){return fe(n,"name"),he(n,"directive"),C(n)?(a(n),fe(r,"directiveFactory"),c.hasOwnProperty(n)||(c[n]=[],t.factory(n+f,["$injector","$exceptionHandler",function(e,t){var r=[];return o(c[n],function(i,o){try{var a=e.invoke(i);$(a)?a={compile:v(a)}:!a.compile&&a.link&&(a.compile=v(a.link)),a.priority=a.priority||0,a.index=o,a.name=a.name||n,a.require=l(a),a.restrict=u(a.restrict,n),a.$$moduleName=i.$$moduleName,r.push(a)}catch(e){t(e)}}),r}])),c[n].push(r)):o(n,s(e)),this},this.component=function(e,t){function n(e){function n(t){return $(t)||ci(t)?function(n,r){return e.invoke(t,this,{$element:n,$attrs:r})}:t}var i=t.template||t.templateUrl?t.template:"",a={controller:r,controllerAs:kt(t.controller)||t.controllerAs||"$ctrl",template:n(i),templateUrl:n(t.templateUrl),transclude:t.transclude,scope:{},bindToController:t.bindings||{},restrict:"E",require:t.require};return o(t,function(e,t){"$"===t.charAt(0)&&(a[t]=e)}),a}var r=t.controller||function(){};return o(t,function(e,t){"$"===t.charAt(0)&&(n[t]=e,$(r)&&(r[t]=e))}),n.$inject=["$injector"],this.directive(e,n)},this.aHrefSanitizationWhitelist=function(e){return x(e)?(n.aHrefSanitizationWhitelist(e),this):n.aHrefSanitizationWhitelist()},this.imgSrcSanitizationWhitelist=function(e){return x(e)?(n.imgSrcSanitizationWhitelist(e),this):n.imgSrcSanitizationWhitelist()};var T=!0;this.debugInfoEnabled=function(e){return x(e)?(T=e,this):T};var E=!1;this.preAssignBindingsEnabled=function(e){return x(e)?(E=e,this):E};var L=10;this.onChangesTtl=function(e){return arguments.length?(L=e,this):L};var A=!0;this.commentDirectivesEnabled=function(e){return arguments.length?(A=e,this):A};var P=!0;this.cssClassDirectivesEnabled=function(e){return arguments.length?(P=e,this):P},this.$get=["$injector","$interpolate","$exceptionHandler","$templateRequest","$parse","$controller","$rootScope","$sce","$animate","$$sanitizeUri",function(t,n,r,a,s,l,u,v,M,F){function O(){try{if(!--Ee)throw ke=void 0,ao("infchng","{0} $onChanges() iterations reached. Aborting!\n",L);u.$apply(function(){for(var e=[],t=0,n=ke.length;t<n;++t)try{ke[t]()}catch(t){e.push(t)}if(ke=void 0,e.length)throw e})}finally{Ee++}}function N(e,t){if(t){var n,r,i,o=Object.keys(t);for(n=0,r=o.length;n<r;n++)this[i=o[n]]=t[i]}else this.$attr={};this.$$element=e}function I(e,t,n){$e.innerHTML="<span "+t+">";var r=$e.firstChild.attributes,i=r[0];r.removeNamedItem(i.name),i.value=n,e.attributes.setNamedItem(i)}function Y(e,t){try{e.addClass(t)}catch(e){}}function H(e,t,n,r,i){e instanceof Zr||(e=Zr(e));var o=q(e,t,e,n,r,i);H.$$addScopeClass(e);var a=null;return function(t,n,r){if(!e)throw ao("multilink","This element has already been linked.");fe(t,"scope"),i&&i.needsNewScope&&(t=t.$parent.$new());var s=(r=r||{}).parentBoundTranscludeFn,l=r.transcludeControllers,u=r.futureParentElement;s&&s.$$boundTransclude&&(s=s.$$boundTransclude),a||(a=W(u));var c;if(c="html"!==a?Zr(me(a,Zr("<div>").append(e).html())):n?ji.clone.call(e):e,l)for(var d in l)c.data("$"+d+"Controller",l[d].instance);return H.$$addScopeInfo(c,t),n&&n(c,t),o&&o(t,c,c,s),n||(e=o=null),c}}function W(e){var t=e&&e[0];return t&&"foreignobject"!==j(t)&&ii.call(t).match(/SVG/)?"svg":"html"}function q(e,t,n,r,i,o){function a(e,n,r,i){var o,a,s,l,u,c,d,f;if(p){var g=n.length;for(f=new Array(g),u=0;u<h.length;u+=3)f[d=h[u]]=n[d]}else f=n;for(u=0,c=h.length;u<c;)s=f[h[u++]],o=h[u++],a=h[u++],o?(o.scope?(l=e.$new(),H.$$addScopeInfo(Zr(s),l)):l=e,o(a,l,s,r,o.transcludeOnThisElement?X(e,o.transclude,i):!o.templateOnThisElement&&i?i:!i&&t?X(e,t):null)):a&&a(e,s.childNodes,void 0,i)}for(var s,l,u,c,d,f,p,h=[],g=ci(e)||e instanceof Zr,m=0;m<e.length;m++)s=new N,11===Jr&&K(e,m,g),(u=(l=J(e[m],[],s,0===m?r:void 0,i)).length?re(l,e[m],s,t,n,null,[],[],o):null)&&u.scope&&H.$$addScopeClass(s.$$element),d=u&&u.terminal||!(c=e[m].childNodes)||!c.length?null:q(c,u?(u.transcludeOnThisElement||!u.templateOnThisElement)&&u.transclude:t),(u||d)&&(h.push(m,u,d),f=!0,p=p||u),o=null;return f?a:null}function K(e,t,n){var r,i=e[t],o=i.parentNode;if(i.nodeType===_i)for(;;){if(!(r=o?i.nextSibling:e[t+1])||r.nodeType!==_i)break;i.nodeValue=i.nodeValue+r.nodeValue,r.parentNode&&r.parentNode.removeChild(r),n&&r===e[t+1]&&e.splice(t+1,1)}}function X(e,t,n){function r(r,i,o,a,s){return r||((r=e.$new(!1,s)).$$transcluded=!0),t(r,i,{parentBoundTranscludeFn:n,transcludeControllers:o,futureParentElement:a})}var i=r.$$slots=ve();for(var o in t.$$slots)t.$$slots[o]?i[o]=X(e,t.$$slots[o],n):i[o]=null;return r}function J(e,t,n,r,i){var o,a,s,l=e.nodeType,u=n.$attr;switch(l){case wi:se(t,wt(a=j(e)),"E",r,i);for(var c,d,f,p,h,g,m=e.attributes,v=0,b=m&&m.length;v<b;v++){var x=!1,_=!1;d=(c=m[v]).name,h=c.value,p=wt(d),(g=Fe.test(p))&&(d=d.replace(lo,"").substr(8).replace(/_(.)/g,function(e,t){return t.toUpperCase()}));var k=p.match(Oe);k&&le(k[1])&&(x=d,_=d.substr(0,d.length-5)+"end",d=d.substr(0,d.length-6)),u[f=wt(d.toLowerCase())]=d,!g&&n.hasOwnProperty(f)||(n[f]=h,Xe(e,f)&&(n[f]=!0)),be(e,t,h,f,g),se(t,f,"A",r,i,x,_)}if("input"===a&&"hidden"===e.getAttribute("type")&&e.setAttribute("autocomplete","off"),!De)break;if(s=e.className,w(s)&&(s=s.animVal),C(s)&&""!==s)for(;o=y.exec(s);)se(t,f=wt(o[2]),"C",r,i)&&(n[f]=fi(o[3])),s=s.substr(o.index+o[0].length);break;case _i:ge(t,e.nodeValue);break;case Ci:if(!Te)break;Z(e,t,n,r,i)}return t.sort(pe),t}function Z(e,t,n,r,i){try{var o=p.exec(e.nodeValue);if(o){var a=wt(o[1]);se(t,a,"M",r,i)&&(n[a]=fi(o[2]))}}catch(e){}}function Q(e,t,n){var r=[],i=0;if(t&&e.hasAttribute&&e.hasAttribute(t))do{if(!e)throw ao("uterdir","Unterminated attribute, found '{0}' but no matching '{1}' found.",t,n);e.nodeType===wi&&(e.hasAttribute(t)&&i++,e.hasAttribute(n)&&i--),r.push(e),e=e.nextSibling}while(i>0);else r.push(e);return Zr(r)}function te(e,t,n){return function(r,i,o,a,s){return i=Q(i[0],t,n),e(r,i,o,a,s)}}function ne(e,t,n,r,i,o){var a;return e?H(t,n,r,i,o):function(){return a||(a=H(t,n,r,i,o),t=n=o=null),a.apply(this,arguments)}}function re(e,t,n,i,a,s,l,u,c){function f(e,t,n,r){e&&(n&&(e=te(e,n,r)),e.require=h.require,e.directiveName=g,(k===h||h.$$isolateScope)&&(e=we(e,{isolateScope:!0})),l.push(e)),t&&(n&&(t=te(t,n,r)),t.require=h.require,t.directiveName=g,(k===h||h.$$isolateScope)&&(t=we(t,{isolateScope:!0})),u.push(t))}function p(e,i,a,s,c){function f(e,t,n,r){var i;if(D(e)||(r=n,n=t,t=e,e=void 0),A&&(i=y),n||(n=A?M.parent():M),!r)return c(e,t,i,n,j);var o=c.$$slots[r];if(o)return o(e,t,i,n,j);if(b(o))throw ao("noslot",'No parent directive that requires a transclusion with slot name "{0}". Element: {1}',r,ee(M))}var p,h,g,m,v,y,x,M,T,L;t===a?(T=n,M=n.$$element):T=new N(M=Zr(a),n),v=i,k?m=i.$new(!0):_&&(v=i.$parent),c&&((x=f).$$boundTransclude=c,x.isSlotFilled=function(e){return!!c.$$slots[e]}),C&&(y=oe(M,T,x,C,m,i,k)),k&&(H.$$addScopeInfo(M,m,!0,!(S&&(S===k||S===k.$$originalDirective))),H.$$addScopeClass(M,!0),m.$$isolateBindings=k.$$isolateBindings,(L=Ce(i,T,m,m.$$isolateBindings,k)).removeWatches&&m.$on("$destroy",L.removeWatches));for(var R in y){var P=C[R],F=y[R],O=P.$$bindings.bindToController;if(E){F.bindingInfo=O?Ce(v,T,F.instance,O,P):{};var I=F();I!==F.instance&&(F.instance=I,M.data("$"+P.name+"Controller",I),F.bindingInfo.removeWatches&&F.bindingInfo.removeWatches(),F.bindingInfo=Ce(v,T,F.instance,O,P))}else F.instance=F(),M.data("$"+P.name+"Controller",F.instance),F.bindingInfo=Ce(v,T,F.instance,O,P)}for(o(C,function(e,t){var n=e.require;e.bindToController&&!ci(n)&&w(n)&&d(y[t].instance,ie(t,n,M,y))}),o(y,function(e){var t=e.instance;if($(t.$onChanges))try{t.$onChanges(e.bindingInfo.initialChanges)}catch(e){r(e)}if($(t.$onInit))try{t.$onInit()}catch(e){r(e)}$(t.$doCheck)&&(v.$watch(function(){t.$doCheck()}),t.$doCheck()),$(t.$onDestroy)&&v.$on("$destroy",function(){t.$onDestroy()})}),p=0,h=l.length;p<h;p++)_e(g=l[p],g.isolateScope?m:i,M,T,g.require&&ie(g.directiveName,g.require,M,y),x);var j=i;for(k&&(k.template||null===k.templateUrl)&&(j=m),e&&e(j,a.childNodes,void 0,c),p=u.length-1;p>=0;p--)_e(g=u[p],g.isolateScope?m:i,M,T,g.require&&ie(g.directiveName,g.require,M,y),x);o(y,function(e){var t=e.instance;$(t.$postLink)&&t.$postLink()})}c=c||{};for(var h,g,m,v,y,x=-Number.MAX_VALUE,_=c.newScopeDirective,C=c.controllerDirectives,k=c.newIsolateScopeDirective,S=c.templateDirective,M=c.nonTlbTranscludeDirective,T=!1,L=!1,A=c.hasElementTranscludeDirective,R=n.$$element=Zr(t),P=s,F=i,O=!1,I=!1,Y=0,z=e.length;Y<z;Y++){var V=(h=e[Y]).$$start,B=h.$$end;if(V&&(R=Q(t,V,B)),m=void 0,x>h.priority)break;if((y=h.scope)&&(h.templateUrl||(w(y)?(he("new/isolated scope",k||_,h,R),k=h):he("new/isolated scope",k,h,R)),_=_||h),g=h.name,!O&&(h.replace&&(h.templateUrl||h.template)||h.transclude&&!h.$$tlb)){for(var W,q=Y+1;W=e[q++];)if(W.transclude&&!W.$$tlb||W.replace&&(W.templateUrl||W.template)){I=!0;break}O=!0}if(!h.templateUrl&&h.controller&&(C=C||ve(),he("'"+g+"' controller",C[g],h,R),C[g]=h),y=h.transclude)if(T=!0,h.$$tlb||(he("transclusion",M,h,R),M=h),"element"===y)A=!0,x=h.priority,m=R,R=n.$$element=Zr(H.$$createComment(g,n[g])),t=R[0],xe(a,U(m),t),m[0].$$parentNode=m[0].parentNode,F=ne(I,m,i,x,P&&P.name,{nonTlbTranscludeDirective:M});else{var K=ve();if(w(y)){m=[];var X=ve(),Z=ve();o(y,function(e,t){var n="?"===e.charAt(0);e=n?e.substring(1):e,X[e]=t,K[t]=null,Z[t]=n}),o(R.contents(),function(e){var t=X[wt(j(e))];t?(Z[t]=!0,K[t]=K[t]||[],K[t].push(e)):m.push(e)}),o(Z,function(e,t){if(!e)throw ao("reqslot","Required transclusion slot `{0}` was not filled.",t)});for(var re in K)K[re]&&(K[re]=ne(I,K[re],i))}else m=Zr(Pe(t)).contents();R.empty(),(F=ne(I,m,i,void 0,void 0,{needsNewScope:h.$$isolateScope||h.$$newScope})).$$slots=K}if(h.template)if(L=!0,he("template",S,h,R),S=h,y=$(h.template)?h.template(R,n):h.template,y=Re(y),h.replace){if(P=h,m=Me(y)?[]:Ct(me(h.templateNamespace,fi(y))),t=m[0],1!==m.length||t.nodeType!==wi)throw ao("tplrt","Template for directive '{0}' must have exactly one root element. {1}",g,"");xe(a,R,t);var se={$attr:{}},le=J(t,[],se),de=e.splice(Y+1,e.length-(Y+1));(k||_)&&ae(le,k,_),e=e.concat(le).concat(de),ue(n,se),z=e.length}else R.html(y);if(h.templateUrl)L=!0,he("template",S,h,R),S=h,h.replace&&(P=h),p=ce(e.splice(Y,e.length-Y),R,n,a,T&&F,l,u,{controllerDirectives:C,newScopeDirective:_!==h&&_,newIsolateScopeDirective:k,templateDirective:S,nonTlbTranscludeDirective:M}),z=e.length;else if(h.compile)try{v=h.compile(R,n,F);var fe=h.$$originalDirective||h;$(v)?f(null,G(fe,v),V,B):v&&f(G(fe,v.pre),G(fe,v.post),V,B)}catch(e){r(e,ee(R))}h.terminal&&(p.terminal=!0,x=Math.max(x,h.priority))}return p.scope=_&&!0===_.scope,p.transcludeOnThisElement=T,p.templateOnThisElement=L,p.transclude=F,c.hasElementTranscludeDirective=A,p}function ie(e,t,n,r){var i;if(C(t)){var a=t.match(k),s=t.substring(a[0].length),l=a[1]||a[3],u="?"===a[2];if("^^"===l?n=n.parent():(i=r&&r[s],i=i&&i.instance),!i){var c="$"+s+"Controller";i=l?n.inheritedData(c):n.data(c)}if(!i&&!u)throw ao("ctreq","Controller '{0}', required by directive '{1}', can't be found!",s,e)}else if(ci(t)){i=[];for(var d=0,f=t.length;d<f;d++)i[d]=ie(e,t[d],n,r)}else w(t)&&(i={},o(t,function(t,o){i[o]=ie(e,t,n,r)}));return i||null}function oe(e,t,n,r,i,o,a){var s=ve();for(var u in r){var c=r[u],d={$scope:c===a||c.$$isolateScope?i:o,$element:e,$attrs:t,$transclude:n},f=c.controller;"@"===f&&(f=t[c.name]);var p=l(f,d,!0,c.controllerAs);s[c.name]=p,e.data("$"+c.name+"Controller",p.instance)}return s}function ae(e,t,n){for(var r=0,i=e.length;r<i;r++)e[r]=h(e[r],{$$isolateScope:t,$$newScope:n})}function se(e,n,r,o,a,s,l){if(n===a)return null;var u=null;if(c.hasOwnProperty(n))for(var d,p=t.get(n+f),g=0,m=p.length;g<m;g++)if(d=p[g],(b(o)||o>d.priority)&&-1!==d.restrict.indexOf(r)){if(s&&(d=h(d,{$$start:s,$$end:l})),!d.$$bindings){var v=d.$$bindings=i(d,d.name);w(v.isolateScope)&&(d.$$isolateBindings=v.isolateScope)}e.push(d),u=d}return u}function le(e){if(c.hasOwnProperty(e))for(var n=t.get(e+f),r=0,i=n.length;r<i;r++)if(n[r].multiElement)return!0;return!1}function ue(e,t){var n=t.$attr,r=e.$attr;o(e,function(r,i){"$"!==i.charAt(0)&&(t[i]&&t[i]!==r&&(r.length?r+=("style"===i?";":" ")+t[i]:r=t[i]),e.$set(i,r,!0,n[i]))}),o(t,function(t,i){e.hasOwnProperty(i)||"$"===i.charAt(0)||(e[i]=t,"class"!==i&&"style"!==i&&(r[i]=n[i]))})}function ce(e,t,n,i,s,l,u,c){var d,f,p=[],g=t[0],m=e.shift(),v=h(m,{templateUrl:null,transclude:null,replace:null,$$originalDirective:m}),y=$(m.templateUrl)?m.templateUrl(t,n):m.templateUrl,b=m.templateNamespace;return t.empty(),a(y).then(function(r){var a,h,x,_;if(r=Re(r),m.replace){if(x=Me(r)?[]:Ct(me(b,fi(r))),a=x[0],1!==x.length||a.nodeType!==wi)throw ao("tplrt","Template for directive '{0}' must have exactly one root element. {1}",m.name,y);h={$attr:{}},xe(i,t,a);var C=J(a,[],h);w(m.scope)&&ae(C,!0),e=C.concat(e),ue(n,h)}else a=g,t.html(r);for(e.unshift(v),d=re(e,a,n,s,t,m,l,u,c),o(i,function(e,n){e===a&&(i[n]=t[0])}),f=q(t[0].childNodes,s);p.length;){var k=p.shift(),S=p.shift(),$=p.shift(),M=p.shift(),T=t[0];if(!k.$$destroyed){if(S!==g){var D=S.className;c.hasElementTranscludeDirective&&m.replace||(T=Pe(a)),xe($,Zr(S),T),Y(Zr(T),D)}_=d.transcludeOnThisElement?X(k,d.transclude,M):M,d(f,k,T,i,_)}}p=null}).catch(function(e){e instanceof Error&&r(e)}),function(e,t,n,r,i){var o=i;t.$$destroyed||(p?p.push(t,n,r,o):(d.transcludeOnThisElement&&(o=X(t,d.transclude,i)),d(f,t,n,r,o)))}}function pe(e,t){var n=t.priority-e.priority;return 0!==n?n:e.name!==t.name?e.name<t.name?-1:1:e.index-t.index}function he(e,t,n,r){function i(e){return e?" (module: "+e+")":""}if(t)throw ao("multidir","Multiple directives [{0}{1}, {2}{3}] asking for {4} on: {5}",t.name,i(t.$$moduleName),n.name,i(n.$$moduleName),e,ee(r))}function ge(e,t){var r=n(t,!0);r&&e.push({priority:0,compile:function(e){var t=e.parent(),n=!!t.length;return n&&H.$$addBindingClass(t),function(e,t){var i=t.parent();n||H.$$addBindingClass(i),H.$$addBindingInfo(i,r.expressions),e.$watch(r,function(e){t[0].nodeValue=e})}}})}function me(t,n){switch(t=Gr(t||"html")){case"svg":case"math":var r=e.document.createElement("div");return r.innerHTML="<"+t+">"+n+"</"+t+">",r.childNodes[0].childNodes;default:return n}}function ye(e,t){if("srcdoc"===t)return v.HTML;var n=j(e);if("src"===t||"ngSrc"===t){if(-1===["img","video","audio","source","track"].indexOf(n))return v.RESOURCE_URL}else if("xlinkHref"===t||"form"===n&&"action"===t||"link"===n&&"href"===t)return v.RESOURCE_URL}function be(e,t,r,i,o){var a=ye(e,i),s=!o,l=_[i]||o,u=n(r,s,a,l);if(u){if("multiple"===i&&"select"===j(e))throw ao("selmulti","Binding to the 'multiple' attribute is not supported. Element: {0}",ee(e));if(S.test(i))throw ao("nodomevents","Interpolations for HTML DOM event attributes are disallowed.  Please use the ng- versions (such as ng-click instead of onclick) instead.");t.push({priority:100,compile:function(){return{pre:function(e,t,o){var s=o.$$observers||(o.$$observers=ve()),c=o[i];c!==r&&(u=c&&n(c,!0,a,l),r=c),u&&(o[i]=u(e),(s[i]||(s[i]=[])).$$inter=!0,(o.$$observers&&o.$$observers[i].$$scope||e).$watch(u,function(e,t){"class"===i&&e!==t?o.$updateClass(e,t):o.$set(i,e)}))}}}})}}function xe(t,n,r){var i,o,a=n[0],s=n.length,l=a.parentNode;if(t)for(i=0,o=t.length;i<o;i++)if(t[i]===a){t[i++]=r;for(var u=i,c=u+s-1,d=t.length;u<d;u++,c++)c<d?t[u]=t[c]:delete t[u];t.length-=s-1,t.context===a&&(t.context=r);break}l&&l.replaceChild(r,a);var f=e.document.createDocumentFragment();for(i=0;i<s;i++)f.appendChild(n[i]);for(Zr.hasData(a)&&(Zr.data(r,Zr.data(a)),Zr(a).off("$destroy")),Zr.cleanData(f.querySelectorAll("*")),i=1;i<s;i++)delete n[i];n[0]=r,n.length=1}function we(e,t){return d(function(){return e.apply(null,arguments)},e,t)}function _e(e,t,n,i,o,a){try{e(t,n,i,o,a)}catch(e){r(e,ee(n))}}function Ce(e,t,r,i,a){function l(t,n,i){$(r.$onChanges)&&!V(n,i)&&(ke||(e.$$postDigest(O),ke=[]),c||(c={},ke.push(u)),c[t]&&(i=c[t].previousValue),c[t]=new xt(i,n))}function u(){r.$onChanges(c),c=void 0}var c,d=[],f={};return o(i,function(i,o){var u,c,p,h,m,v=i.attrName,y=i.optional;switch(i.mode){case"@":y||Wr.call(t,v)||(r[o]=t[v]=void 0),m=t.$observe(v,function(e){if(C(e)||R(e)){var t=r[o];l(o,e,t),r[o]=e}}),t.$$observers[v].$$scope=e,C(u=t[v])?r[o]=n(u)(e):R(u)&&(r[o]=u),f[o]=new xt(so,r[o]),d.push(m);break;case"=":if(!Wr.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;c=s(t[v]),h=c.literal?B:V,p=c.assign||function(){throw u=r[o]=c(e),ao("nonassign","Expression '{0}' in attribute '{1}' used with directive '{2}' is non-assignable!",t[v],v,a.name)},u=r[o]=c(e);var b=function(t){return h(t,r[o])||(h(t,u)?p(e,t=r[o]):r[o]=t),u=t};b.$stateful=!0,m=i.collection?e.$watchCollection(t[v],b):e.$watch(s(t[v],b),null,c.literal),d.push(m);break;case"<":if(!Wr.call(t,v)){if(y)break;t[v]=void 0}if(y&&!t[v])break;var x=(c=s(t[v])).literal,w=r[o]=c(e);f[o]=new xt(so,r[o]),m=e.$watch(c,function(e,t){if(t===e){if(t===w||x&&B(t,w))return;t=w}l(o,e,t),r[o]=e},x),d.push(m);break;case"&":if((c=t.hasOwnProperty(v)?s(t[v]):g)===g&&y)break;r[o]=function(t){return c(e,t)}}}),{initialChanges:f,removeWatches:d.length&&function(){for(var e=0,t=d.length;e<t;++e)d[e]()}}}var ke,Se=/^\w/,$e=e.document.createElement("div"),Te=A,De=P,Ee=L;N.prototype={$normalize:wt,$addClass:function(e){e&&e.length>0&&M.addClass(this.$$element,e)},$removeClass:function(e){e&&e.length>0&&M.removeClass(this.$$element,e)},$updateClass:function(e,t){var n=_t(e,t);n&&n.length&&M.addClass(this.$$element,n);var r=_t(t,e);r&&r.length&&M.removeClass(this.$$element,r)},$set:function(e,t,n,i){var a,s=Xe(this.$$element[0],e),l=Je(e),u=e;if(s?(this.$$element.prop(e,t),i=s):l&&(this[l]=t,u=l),this[e]=t,i?this.$attr[e]=i:(i=this.$attr[e])||(this.$attr[e]=i=de(e,"-")),"a"===(a=j(this.$$element))&&("href"===e||"xlinkHref"===e)||"img"===a&&"src"===e)this[e]=t=F(t,"src"===e);else if("img"===a&&"srcset"===e&&x(t)){for(var c="",d=fi(t),f=/(\s+\d+x\s*,|\s+\d+w\s*,|\s+,|,\s+)/,p=/\s/.test(d)?f:/(,)/,h=d.split(p),g=Math.floor(h.length/2),m=0;m<g;m++){var v=2*m;c+=F(fi(h[v]),!0),c+=" "+fi(h[v+1])}var y=fi(h[2*m]).split(/\s/);c+=F(fi(y[0]),!0),2===y.length&&(c+=" "+fi(y[1])),this[e]=t=c}!1!==n&&(null===t||b(t)?this.$$element.removeAttr(i):Se.test(i)?this.$$element.attr(i,t):I(this.$$element[0],i,t));var w=this.$$observers;w&&o(w[u],function(e){try{e(t)}catch(e){r(e)}})},$observe:function(e,t){var n=this,r=n.$$observers||(n.$$observers=ve()),i=r[e]||(r[e]=[]);return i.push(t),u.$evalAsync(function(){i.$$inter||!n.hasOwnProperty(e)||b(n[e])||t(n[e])}),function(){z(i,t)}}};var Le=n.startSymbol(),Ae=n.endSymbol(),Re="{{"===Le&&"}}"===Ae?m:function(e){return e.replace(/\{\{/g,Le).replace(/}}/g,Ae)},Fe=/^ngAttr[A-Z]/,Oe=/^(.+)Start$/;return H.$$addBindingInfo=T?function(e,t){var n=e.data("$binding")||[];ci(t)?n=n.concat(t):n.push(t),e.data("$binding",n)}:g,H.$$addBindingClass=T?function(e){Y(e,"ng-binding")}:g,H.$$addScopeInfo=T?function(e,t,n,r){var i=n?r?"$isolateScopeNoTemplate":"$isolateScope":"$scope";e.data(i,t)}:g,H.$$addScopeClass=T?function(e,t){Y(e,t?"ng-isolate-scope":"ng-scope")}:g,H.$$createComment=function(t,n){var r="";return T&&(r=" "+(t||"")+": ",n&&(r+=n+" ")),e.document.createComment(r)},H}]}function xt(e,t){this.previousValue=e,this.currentValue=t}function wt(e){return e.replace(lo,"").replace(uo,Se)}function _t(e,t){var n="",r=e.split(/\s+/),i=t.split(/\s+/);e:for(var o=0;o<r.length;o++){for(var a=r[o],s=0;s<i.length;s++)if(a===i[s])continue e;n+=(n.length>0?" ":"")+a}return n}function Ct(e){var t=(e=Zr(e)).length;if(t<=1)return e;for(;t--;){var n=e[t];(n.nodeType===Ci||n.nodeType===_i&&""===n.nodeValue.trim())&&ni.call(e,t,1)}return e}function kt(e,t){if(t&&C(t))return t;if(C(e)){var n=fo.exec(e);if(n)return n[3]}}function St(){var e={},n=!1;this.has=function(t){return e.hasOwnProperty(t)},this.register=function(t,n){he(t,"controller"),w(t)?d(e,t):e[t]=n},this.allowGlobals=function(){n=!0},this.$get=["$injector","$window",function(r,i){function o(e,n,r,i){if(!e||!w(e.$scope))throw t("$controller")("noscp","Cannot export controller '{0}' as '{1}'! No $scope object provided via `locals`.",i,n);e.$scope[n]=r}return function(t,a,s,l){var u,c,f,p;if(s=!0===s,l&&C(l)&&(p=l),C(t)){if(!(c=t.match(fo)))throw co("ctrlfmt","Badly formed controller string '{0}'. Must match `__name__ as __id__` or `__name__`.",t);if(f=c[1],p=p||c[3],!(t=e.hasOwnProperty(f)?e[f]:ge(a.$scope,f,!0)||(n?ge(i,f,!0):void 0)))throw co("ctrlreg","The controller with the name '{0}' is not registered.",f);pe(t,f,!0)}if(s){var h=(ci(t)?t[t.length-1]:t).prototype;return u=Object.create(h||null),p&&o(a,p,u,f||t.name),d(function(){var e=r.invoke(t,u,a,f);return e!==u&&(w(e)||$(e))&&(u=e,p&&o(a,p,u,f||t.name)),u},{instance:u,identifier:p})}return u=r.instantiate(t,a,f),p&&o(a,p,u,f||t.name),u}}]}function $t(){this.$get=["$window",function(e){return Zr(e.document)}]}function Mt(){this.$get=["$document","$rootScope",function(e,t){function n(){i=r.hidden}var r=e[0],i=r&&r.hidden;return e.on("visibilitychange",n),t.$on("$destroy",function(){e.off("visibilitychange",n)}),function(){return i}}]}function Tt(){this.$get=["$log",function(e){return function(t,n){e.error.apply(e,arguments)}}]}function Dt(e){return w(e)?S(e)?e.toISOString():K(e):e}function Et(){this.$get=function(){return function(e){if(!e)return"";var t=[];return a(e,function(e,n){null===e||b(e)||(ci(e)?o(e,function(e){t.push(oe(n)+"="+oe(Dt(e)))}):t.push(oe(n)+"="+oe(Dt(e))))}),t.join("&")}}}function Lt(){this.$get=function(){return function(e){function t(e,r,i){null===e||b(e)||(ci(e)?o(e,function(e,n){t(e,r+"["+(w(e)?n:"")+"]")}):w(e)&&!S(e)?a(e,function(e,n){t(e,r+(i?"":"[")+n+(i?"":"]"))}):n.push(oe(r)+"="+oe(Dt(e))))}if(!e)return"";var n=[];return t(e,"",!0),n.join("&")}}}function At(e,t){if(C(e)){var n=e.replace(yo,"").trim();if(n){var r=t("Content-Type");if(r&&0===r.indexOf(ho)||Rt(n))try{e=X(n)}catch(t){throw bo("baddata",'Data must be a valid JSON object. Received: "{0}". Parse error: "{1}"',e,t)}}}return e}function Rt(e){var t=e.match(mo);return t&&vo[t[0]].test(e)}function Pt(e){function t(e,t){e&&(r[e]=r[e]?r[e]+", "+t:t)}var n,r=ve();return C(e)?o(e.split("\n"),function(e){n=e.indexOf(":"),t(Gr(fi(e.substr(0,n))),fi(e.substr(n+1)))}):w(e)&&o(e,function(e,n){t(Gr(n),fi(e))}),r}function Ft(e){var t;return function(n){if(t||(t=Pt(e)),n){var r=t[Gr(n)];return void 0===r&&(r=null),r}return t}}function Ot(e,t,n,r){return $(r)?r(e,t,n):(o(r,function(r){e=r(e,t,n)}),e)}function Nt(e){return 200<=e&&e<300}function It(){var e=this.defaults={transformResponse:[At],transformRequest:[function(e){return!w(e)||E(e)||A(e)||L(e)?e:K(e)}],headers:{common:{Accept:"application/json, text/plain, */*"},post:xe(go),put:xe(go),patch:xe(go)},xsrfCookieName:"XSRF-TOKEN",xsrfHeaderName:"X-XSRF-TOKEN",paramSerializer:"$httpParamSerializer",jsonpCallbackParam:"callback"},n=!1;this.useApplyAsync=function(e){return x(e)?(n=!!e,this):n};var r=this.interceptors=[];this.$get=["$browser","$httpBackend","$$cookieReader","$cacheFactory","$rootScope","$q","$injector","$sce",function(i,a,s,l,u,c,f,p){function h(n){function r(e,t){for(var n=0,r=t.length;n<r;){var i=t[n++],o=t[n++];e=e.then(i,o)}return t.length=0,e}function a(){i.$$completeOutstandingRequest(g)}function s(e,t){var n,r={};return o(e,function(e,i){$(e)?null!=(n=e(t))&&(r[i]=n):r[i]=e}),r}function l(t){var n=t.headers,r=Ot(t.data,Ft(n),void 0,t.transformRequest);return b(r)&&o(n,function(e,t){"content-type"===Gr(t)&&delete n[t]}),b(t.withCredentials)&&!b(e.withCredentials)&&(t.withCredentials=e.withCredentials),m(t,r).then(u,u)}function u(e){var t=d({},e);return t.data=Ot(e.data,e.headers,e.status,h.transformResponse),Nt(e.status)?t:c.reject(t)}if(!w(n))throw t("$http")("badreq","Http request configuration must be an object.  Received: {0}",n);if(!C(p.valueOf(n.url)))throw t("$http")("badreq","Http request configuration url must be a string or a $sce trusted object.  Received: {0}",n.url);var h=d({method:"get",transformRequest:e.transformRequest,transformResponse:e.transformResponse,paramSerializer:e.paramSerializer,jsonpCallbackParam:e.jsonpCallbackParam},n);h.headers=function(t){var n,r,i,o=e.headers,a=d({},t.headers);o=d({},o.common,o[Gr(t.method)]);e:for(n in o){r=Gr(n);for(i in a)if(Gr(i)===r)continue e;a[n]=o[n]}return s(a,xe(t))}(n),h.method=qr(h.method),h.paramSerializer=C(h.paramSerializer)?f.get(h.paramSerializer):h.paramSerializer,i.$$incOutstandingRequestCount();var v=[],y=[],x=c.resolve(h);return o(k,function(e){(e.request||e.requestError)&&v.unshift(e.request,e.requestError),(e.response||e.responseError)&&y.push(e.response,e.responseError)}),x=r(x,v),x=x.then(l),x=r(x,y),x=x.finally(a)}function m(t,r){function i(e){if(e){var t={};return o(e,function(e,r){t[r]=function(t){function r(){e(t)}n?u.$applyAsync(r):u.$$phase?r():u.$apply(r)}}),t}}function l(e,t,r,i){function o(){d(t,e,r,i)}m&&(Nt(e)?m.put(D,[e,t,Pt(r),i]):m.remove(D)),n?u.$applyAsync(o):(o(),u.$$phase||u.$apply())}function d(e,n,r,i){(Nt(n=n>=-1?n:0)?S.resolve:S.reject)({data:e,status:n,headers:Ft(r),config:t,statusText:i})}function f(e){d(e.data,e.status,xe(e.headers()),e.statusText)}function g(){var e=h.pendingRequests.indexOf(t);-1!==e&&h.pendingRequests.splice(e,1)}var m,k,S=c.defer(),$=S.promise,M=t.headers,T="jsonp"===Gr(t.method),D=t.url;if(T?D=p.getTrustedResourceUrl(D):C(D)||(D=p.valueOf(D)),D=v(D,t.paramSerializer(t.params)),T&&(D=y(D,t.jsonpCallbackParam)),h.pendingRequests.push(t),$.then(g,g),!t.cache&&!e.cache||!1===t.cache||"GET"!==t.method&&"JSONP"!==t.method||(m=w(t.cache)?t.cache:w(e.cache)?e.cache:_),m&&(x(k=m.get(D))?P(k)?k.then(f,f):ci(k)?d(k[1],k[0],xe(k[2]),k[3]):d(k,200,{},"OK"):m.put(D,$)),b(k)){var E=Nn(t.url)?s()[t.xsrfCookieName||e.xsrfCookieName]:void 0;E&&(M[t.xsrfHeaderName||e.xsrfHeaderName]=E),a(t.method,D,r,l,M,t.timeout,t.withCredentials,t.responseType,i(t.eventHandlers),i(t.uploadEventHandlers))}return $}function v(e,t){return t.length>0&&(e+=(-1===e.indexOf("?")?"?":"&")+t),e}function y(e,t){if(/[&?][^=]+=JSON_CALLBACK/.test(e))throw bo("badjsonp",'Illegal use of JSON_CALLBACK in url, "{0}"',e);if(new RegExp("[&?]"+t+"=").test(e))throw bo("badjsonp",'Illegal use of callback param, "{0}", in url, "{1}"',t,e);return e+=(-1===e.indexOf("?")?"?":"&")+t+"=JSON_CALLBACK"}var _=l("$http");e.paramSerializer=C(e.paramSerializer)?f.get(e.paramSerializer):e.paramSerializer;var k=[];return o(r,function(e){k.unshift(C(e)?f.get(e):f.invoke(e))}),h.pendingRequests=[],function(e){o(arguments,function(e){h[e]=function(t,n){return h(d({},n||{},{method:e,url:t}))}})}("get","delete","head","jsonp"),function(e){o(arguments,function(e){h[e]=function(t,n,r){return h(d({},r||{},{method:e,url:t,data:n}))}})}("post","put","patch"),h.defaults=e,h}]}function jt(){this.$get=function(){return function(){return new e.XMLHttpRequest}}}function Yt(){this.$get=["$browser","$jsonpCallbacks","$document","$xhrFactory",function(e,t,n,r){return zt(e,r,e.defer,t,n[0])}]}function zt(e,t,n,r,i){function a(e,t,n){e=e.replace("JSON_CALLBACK",t);var o=i.createElement("script"),a=null;return o.type="text/javascript",o.src=e,o.async=!0,a=function(e){o.removeEventListener("load",a),o.removeEventListener("error",a),i.body.removeChild(o),o=null;var s=-1,l="unknown";e&&("load"!==e.type||r.wasCalled(t)||(e={type:"error"}),l=e.type,s="error"===e.type?404:200),n&&n(s,l)},o.addEventListener("load",a),o.addEventListener("error",a),i.body.appendChild(o),a}return function(i,s,l,u,c,d,f,p,h,g){function m(){w&&w(),_&&_.abort()}function v(e,t,r,i,o){x(k)&&n.cancel(k),w=_=null,e(t,r,i,o)}if(s=s||e.url(),"jsonp"===Gr(i))var y=r.createCallback(s),w=a(s,y,function(e,t){var n=200===e&&r.getResponse(y);v(u,e,n,"",t),r.removeCallback(y)});else{var _=t(i,s);_.open(i,s,!0),o(c,function(e,t){x(e)&&_.setRequestHeader(t,e)}),_.onload=function(){var e=_.statusText||"",t="response"in _?_.response:_.responseText,n=1223===_.status?204:_.status;0===n&&(n=t?200:"file"===On(s).protocol?404:0),v(u,n,t,_.getAllResponseHeaders(),e)};var C=function(){v(u,-1,null,null,"")};if(_.onerror=C,_.onabort=C,_.ontimeout=C,o(h,function(e,t){_.addEventListener(t,e)}),o(g,function(e,t){_.upload.addEventListener(t,e)}),f&&(_.withCredentials=!0),p)try{_.responseType=p}catch(e){if("json"!==p)throw e}_.send(b(l)?null:l)}if(d>0)var k=n(m,d);else P(d)&&d.then(m)}}function Ht(){var e="{{",t="}}";this.startSymbol=function(t){return t?(e=t,this):e},this.endSymbol=function(e){return e?(t=e,this):t},this.$get=["$parse","$exceptionHandler","$sce",function(n,r,i){function o(e){return"\\\\\\"+e}function a(n){return n.replace(f,e).replace(p,t)}function s(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function l(o,l,f,p){function h(e){try{return e=E(e),p&&!x(e)?e:ye(e)}catch(e){r(xo.interr(o,e))}}if(!o.length||-1===o.indexOf(e)){var g;return l||((g=v(a(o))).exp=o,g.expressions=[],g.$$watchDelegate=s),g}p=!!p;for(var m,y,w,_=0,C=[],k=[],S=o.length,M=[],T=[];_<S;){if(-1===(m=o.indexOf(e,_))||-1===(y=o.indexOf(t,m+u))){_!==S&&M.push(a(o.substring(_)));break}_!==m&&M.push(a(o.substring(_,m))),w=o.substring(m+u,y),C.push(w),k.push(n(w,h)),_=y+c,T.push(M.length),M.push("")}if(f&&M.length>1&&xo.throwNoconcat(o),!l||C.length){var D=function(e){for(var t=0,n=C.length;t<n;t++){if(p&&b(e[t]))return;M[T[t]]=e[t]}return M.join("")},E=function(e){return f?i.getTrusted(f,e):i.valueOf(e)};return d(function(e){var t=0,n=C.length,i=new Array(n);try{for(;t<n;t++)i[t]=k[t](e);return D(i)}catch(e){r(xo.interr(o,e))}},{exp:o,expressions:C,$$watchDelegate:function(e,t){var n;return e.$watchGroup(k,function(r,i){var o=D(r);$(t)&&t.call(this,o,r!==i?n:o,e),n=o})}})}}var u=e.length,c=t.length,f=new RegExp(e.replace(/./g,o),"g"),p=new RegExp(t.replace(/./g,o),"g");return l.startSymbol=function(){return e},l.endSymbol=function(){return t},l}]}function Vt(){this.$get=["$rootScope","$window","$q","$$q","$browser",function(e,t,n,r,i){function o(o,s,l,u){function c(){d?o.apply(null,f):o(g)}var d=arguments.length>4,f=d?U(arguments,4):[],p=t.setInterval,h=t.clearInterval,g=0,m=x(u)&&!u,v=(m?r:n).defer(),y=v.promise;return l=x(l)?l:0,y.$$intervalId=p(function(){m?i.defer(c):e.$evalAsync(c),v.notify(g++),l>0&&g>=l&&(v.resolve(g),h(y.$$intervalId),delete a[y.$$intervalId]),m||e.$apply()},s),a[y.$$intervalId]=v,y}var a={};return o.cancel=function(e){return!!(e&&e.$$intervalId in a)&&(a[e.$$intervalId].promise.catch(g),a[e.$$intervalId].reject("canceled"),t.clearInterval(e.$$intervalId),delete a[e.$$intervalId],!0)},o}]}function Bt(e){for(var t=e.split("/"),n=t.length;n--;)t[n]=ie(t[n]);return t.join("/")}function Wt(e,t){var n=On(e);t.$$protocol=n.protocol,t.$$host=n.hostname,t.$$port=p(n.port)||Co[n.protocol]||null}function Ut(e,t){if(So.test(e))throw ko("badpath",'Invalid url "{0}".',e);var n="/"!==e.charAt(0);n&&(e="/"+e);var r=On(e);t.$$path=decodeURIComponent(n&&"/"===r.pathname.charAt(0)?r.pathname.substring(1):r.pathname),t.$$search=ne(r.search),t.$$hash=decodeURIComponent(r.hash),t.$$path&&"/"!==t.$$path.charAt(0)&&(t.$$path="/"+t.$$path)}function Gt(e,t){return e.slice(0,t.length)===t}function qt(e,t){if(Gt(t,e))return t.substr(e.length)}function Kt(e){var t=e.indexOf("#");return-1===t?e:e.substr(0,t)}function Xt(e){return e.replace(/(#.+)|#$/,"$1")}function Jt(e){return e.substr(0,Kt(e).lastIndexOf("/")+1)}function Zt(e){return e.substring(0,e.indexOf("/",e.indexOf("//")+2))}function Qt(e,t,n){this.$$html5=!0,n=n||"",Wt(e,this),this.$$parse=function(e){var n=qt(t,e);if(!C(n))throw ko("ipthprfx",'Invalid url "{0}", missing path prefix "{1}".',e,t);Ut(n,this),this.$$path||(this.$$path="/"),this.$$compose()},this.$$compose=function(){var e=re(this.$$search),n=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=Bt(this.$$path)+(e?"?"+e:"")+n,this.$$absUrl=t+this.$$url.substr(1),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a,s;return x(o=qt(e,r))?(a=o,s=n&&x(o=qt(n,o))?t+(qt("/",o)||o):e+a):x(o=qt(t,r))?s=t+o:t===r+"/"&&(s=t),s&&this.$$parse(s),!!s}}function en(e,t,n){Wt(e,this),this.$$parse=function(r){var i,o=qt(e,r)||qt(t,r);b(o)||"#"!==o.charAt(0)?this.$$html5?i=o:(i="",b(o)&&(e=r,this.replace())):b(i=qt(n,o))&&(i=o),Ut(i,this),this.$$path=function(e,t,n){var r,i=/^\/[A-Z]:(\/.*)/;return Gt(t,n)&&(t=t.replace(n,"")),i.exec(t)?e:(r=i.exec(e),r?r[1]:e)}(this.$$path,i,e),this.$$compose()},this.$$compose=function(){var t=re(this.$$search),r=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+(this.$$url?n+this.$$url:""),this.$$urlUpdatedByLocation=!0},this.$$parseLinkUrl=function(t,n){return Kt(e)===Kt(t)&&(this.$$parse(t),!0)}}function tn(e,t,n){this.$$html5=!0,en.apply(this,arguments),this.$$parseLinkUrl=function(r,i){if(i&&"#"===i[0])return this.hash(i.slice(1)),!0;var o,a;return e===Kt(r)?o=r:(a=qt(t,r))?o=e+n+a:t===r+"/"&&(o=t),o&&this.$$parse(o),!!o},this.$$compose=function(){var t=re(this.$$search),r=this.$$hash?"#"+ie(this.$$hash):"";this.$$url=Bt(this.$$path)+(t?"?"+t:"")+r,this.$$absUrl=e+n+this.$$url,this.$$urlUpdatedByLocation=!0}}function nn(e){return function(){return this[e]}}function rn(e,t){return function(n){return b(n)?this[e]:(this[e]=t(n),this.$$compose(),this)}}function on(){var e="!",t={enabled:!1,requireBase:!0,rewriteLinks:!0};this.hashPrefix=function(t){return x(t)?(e=t,this):e},this.html5Mode=function(e){return R(e)?(t.enabled=e,this):w(e)?(R(e.enabled)&&(t.enabled=e.enabled),R(e.requireBase)&&(t.requireBase=e.requireBase),(R(e.rewriteLinks)||C(e.rewriteLinks))&&(t.rewriteLinks=e.rewriteLinks),this):t},this.$get=["$rootScope","$browser","$sniffer","$rootElement","$window",function(n,r,i,o,a){function s(e,t,n){var i=u.url(),o=u.$$state;try{r.url(e,t,n),u.$$state=r.state()}catch(e){throw u.url(i),u.$$state=o,e}}function l(e,t){n.$broadcast("$locationChangeSuccess",u.absUrl(),e,u.$$state,t)}var u,c,d,f=r.baseHref(),p=r.url();if(t.enabled){if(!f&&t.requireBase)throw ko("nobase","$location in HTML5 mode requires a <base> tag to be present!");d=Zt(p)+(f||"/"),c=i.history?Qt:tn}else d=Kt(p),c=en;var h=Jt(d);(u=new c(d,h,"#"+e)).$$parseLinkUrl(p,p),u.$$state=r.state();var g=/^\s*(javascript|mailto):/i;o.on("click",function(e){var i=t.rewriteLinks;if(i&&!e.ctrlKey&&!e.metaKey&&!e.shiftKey&&2!==e.which&&2!==e.button){for(var s=Zr(e.target);"a"!==j(s[0]);)if(s[0]===o[0]||!(s=s.parent())[0])return;if(!C(i)||!b(s.attr(i))){var l=s.prop("href"),c=s.attr("href")||s.attr("xlink:href");w(l)&&"[object SVGAnimatedString]"===l.toString()&&(l=On(l.animVal).href),g.test(l)||!l||s.attr("target")||e.isDefaultPrevented()||u.$$parseLinkUrl(l,c)&&(e.preventDefault(),u.absUrl()!==r.url()&&(n.$apply(),a.angular["ff-684208-preventDefault"]=!0))}}}),Xt(u.absUrl())!==Xt(p)&&r.url(u.absUrl(),!0);var m=!0;return r.onUrlChange(function(e,t){Gt(e,h)?(n.$evalAsync(function(){var r,i=u.absUrl(),o=u.$$state;e=Xt(e),u.$$parse(e),u.$$state=t,r=n.$broadcast("$locationChangeStart",e,i,t,o).defaultPrevented,u.absUrl()===e&&(r?(u.$$parse(i),u.$$state=o,s(i,!1,o)):(m=!1,l(i,o)))}),n.$$phase||n.$digest()):a.location.href=e}),n.$watch(function(){if(m||u.$$urlUpdatedByLocation){u.$$urlUpdatedByLocation=!1;var e=Xt(r.url()),t=Xt(u.absUrl()),o=r.state(),a=u.$$replace,c=e!==t||u.$$html5&&i.history&&o!==u.$$state;(m||c)&&(m=!1,n.$evalAsync(function(){var t=u.absUrl(),r=n.$broadcast("$locationChangeStart",t,e,u.$$state,o).defaultPrevented;u.absUrl()===t&&(r?(u.$$parse(e),u.$$state=o):(c&&s(t,a,o===u.$$state?null:u.$$state),l(e,o)))}))}u.$$replace=!1}),u}]}function an(){var e=!0,t=this;this.debugEnabled=function(t){return x(t)?(e=t,this):e},this.$get=["$window",function(n){function r(e){return e instanceof Error&&(e.stack&&a?e=e.message&&-1===e.stack.indexOf(e.message)?"Error: "+e.message+"\n"+e.stack:e.stack:e.sourceURL&&(e=e.message+"\n"+e.sourceURL+":"+e.line)),e}function i(e){var t=n.console||{},i=t[e]||t.log||g,a=!1;try{a=!!i.apply}catch(e){}return a?function(){var e=[];return o(arguments,function(t){e.push(r(t))}),i.apply(t,e)}:function(e,t){i(e,null==t?"":t)}}var a=Jr||/\bEdge\//.test(n.navigator&&n.navigator.userAgent);return{log:i("log"),info:i("info"),warn:i("warn"),error:i("error"),debug:function(){var n=i("debug");return function(){e&&n.apply(t,arguments)}}()}}]}function sn(e){return e+""}function ln(e,t){return void 0!==e?e:t}function un(e,t){return void 0===e?t:void 0===t?e:e+t}function cn(e,t){return!e(t).$stateful}function dn(e,t){var n,r,i;switch(e.type){case Ao.Program:n=!0,o(e.body,function(e){dn(e.expression,t),n=n&&e.expression.constant}),e.constant=n;break;case Ao.Literal:e.constant=!0,e.toWatch=[];break;case Ao.UnaryExpression:dn(e.argument,t),e.constant=e.argument.constant,e.toWatch=e.argument.toWatch;break;case Ao.BinaryExpression:dn(e.left,t),dn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.left.toWatch.concat(e.right.toWatch);break;case Ao.LogicalExpression:dn(e.left,t),dn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=e.constant?[]:[e];break;case Ao.ConditionalExpression:dn(e.test,t),dn(e.alternate,t),dn(e.consequent,t),e.constant=e.test.constant&&e.alternate.constant&&e.consequent.constant,e.toWatch=e.constant?[]:[e];break;case Ao.Identifier:e.constant=!1,e.toWatch=[e];break;case Ao.MemberExpression:dn(e.object,t),e.computed&&dn(e.property,t),e.constant=e.object.constant&&(!e.computed||e.property.constant),e.toWatch=[e];break;case Ao.CallExpression:i=!!e.filter&&cn(t,e.callee.name),n=i,r=[],o(e.arguments,function(e){dn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=i?r:[e];break;case Ao.AssignmentExpression:dn(e.left,t),dn(e.right,t),e.constant=e.left.constant&&e.right.constant,e.toWatch=[e];break;case Ao.ArrayExpression:n=!0,r=[],o(e.elements,function(e){dn(e,t),n=n&&e.constant,e.constant||r.push.apply(r,e.toWatch)}),e.constant=n,e.toWatch=r;break;case Ao.ObjectExpression:n=!0,r=[],o(e.properties,function(e){dn(e.value,t),n=n&&e.value.constant&&!e.computed,e.value.constant||r.push.apply(r,e.value.toWatch),e.computed&&(dn(e.key,t),e.key.constant||r.push.apply(r,e.key.toWatch))}),e.constant=n,e.toWatch=r;break;case Ao.ThisExpression:case Ao.LocalsExpression:e.constant=!1,e.toWatch=[]}}function fn(e){if(1===e.length){var t=e[0].expression,n=t.toWatch;return 1!==n.length?n:n[0]!==t?n:void 0}}function pn(e){return e.type===Ao.Identifier||e.type===Ao.MemberExpression}function hn(e){if(1===e.body.length&&pn(e.body[0].expression))return{type:Ao.AssignmentExpression,left:e.body[0].expression,right:{type:Ao.NGValueParameter},operator:"="}}function gn(e){return 0===e.body.length||1===e.body.length&&(e.body[0].expression.type===Ao.Literal||e.body[0].expression.type===Ao.ArrayExpression||e.body[0].expression.type===Ao.ObjectExpression)}function mn(e){return e.constant}function vn(e){this.$filter=e}function yn(e){this.$filter=e}function bn(e,t,n){this.ast=new Ao(e,n),this.astCompiler=n.csp?new yn(t):new vn(t)}function xn(e){return $(e.valueOf)?e.valueOf():To.call(e)}function wn(){var e,t,n=ve(),r={true:!0,false:!1,null:null,undefined:void 0};this.addLiteral=function(e,t){r[e]=t},this.setIdentifierFns=function(n,r){return e=n,t=r,this},this.$get=["$filter",function(i){function a(e,t){var r,o,a;switch(typeof e){case"string":return e=e.trim(),a=e,(r=n[a])||(":"===e.charAt(0)&&":"===e.charAt(1)&&(o=!0,e=e.substring(2)),(r=new bn(new Lo(p),i,p).parse(e)).constant?r.$$watchDelegate=d:o?(r.oneTime=!0,r.$$watchDelegate=u):r.inputs&&(r.$$watchDelegate=l),n[a]=r),f(r,t);case"function":return f(e,t);default:return f(g,t)}}function s(e,t,n){return null==e||null==t?e===t:!("object"==typeof e&&"object"==typeof(e=xn(e))&&!n)&&(e===t||e!==e&&t!==t)}function l(e,t,n,r,i){var o,a=r.inputs;if(1===a.length){var l=s;return a=a[0],e.$watch(function(e){var t=a(e);return s(t,l,r.literal)||(o=r(e,void 0,void 0,[t]),l=t&&xn(t)),o},t,n,i)}for(var u=[],c=[],d=0,f=a.length;d<f;d++)u[d]=s,c[d]=null;return e.$watch(function(e){for(var t=!1,n=0,i=a.length;n<i;n++){var l=a[n](e);(t||(t=!s(l,u[n],r.literal)))&&(c[n]=l,u[n]=l&&xn(l))}return t&&(o=r(e,void 0,void 0,c)),o},t,n,i)}function u(e,t,n,r,i){function o(e){return r(e)}function a(e,n,r){u=e,$(t)&&t(e,n,r),d(e)&&r.$$postDigest(function(){d(u)&&s()})}var s,u,d=r.literal?c:x;return s=r.inputs?l(e,a,n,r,i):e.$watch(o,a,n)}function c(e){var t=!0;return o(e,function(e){x(e)||(t=!1)}),t}function d(e,t,n,r){var i=e.$watch(function(e){return i(),r(e)},t,n);return i}function f(e,t){function n(n,r,i,a){var s=o&&a?a[0]:e(n,r,i,a);return t(s,n,r)}function r(n,r,i,s){var l=o&&s?s[0]:e(n,r,i,s),u=t(l,n,r);return a(l)?u:l}if(!t)return e;var i=e.$$watchDelegate,o=!1,a=e.literal?c:x,s=e.oneTime?r:n;return s.literal=e.literal,s.oneTime=e.oneTime,o=!e.inputs,i&&i!==l?(s.$$watchDelegate=i,s.inputs=e.inputs):t.$stateful||(s.$$watchDelegate=l,s.inputs=e.inputs?e.inputs:[e]),s}var p={csp:hi().noUnsafeEval,literals:H(r),isIdentifierStart:$(e)&&e,isIdentifierContinue:$(t)&&t};return a}]}function _n(){var e=!0;this.$get=["$rootScope","$exceptionHandler",function(t,n){return kn(function(e){t.$evalAsync(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return x(t)?(e=t,this):e}}function Cn(){var e=!0;this.$get=["$browser","$exceptionHandler",function(t,n){return kn(function(e){t.defer(e)},n,e)}],this.errorOnUnhandledRejections=function(t){return x(t)?(e=t,this):e}}function kn(e,n,r){function i(){return new a}function a(){var e=this.promise=new s;this.resolve=function(t){f(e,t)},this.reject=function(t){h(e,t)},this.notify=function(t){m(e,t)}}function s(){this.$$state={status:0}}function l(t){var n,i,o;o=t.pending,t.processScheduled=!1,t.pending=void 0;try{for(var a=0,s=o.length;a<s;++a){t.pur=!0,i=o[a][0],n=o[a][t.status];try{$(n)?f(i,n(t.value)):1===t.status?f(i,t.value):h(i,t.value)}catch(e){h(i,e)}}}finally{--M,r&&0===M&&e(u)}}function u(){for(;!M&&T.length;){var e=T.shift();if(!e.pur){e.pur=!0;var t="Possibly unhandled rejection: "+_e(e.value);e.value instanceof Error?n(e.value,t):n(t)}}}function c(t){!r||t.pending||2!==t.status||t.pur||(0===M&&0===T.length&&e(u),T.push(t)),!t.processScheduled&&t.pending&&(t.processScheduled=!0,++M,e(function(){l(t)}))}function f(e,t){e.$$state.status||(t===e?g(e,S("qcycle","Expected promise to be resolved with value other than itself '{0}'",t)):p(e,t))}function p(e,t){function n(t){a||(a=!0,p(e,t))}function r(t){a||(a=!0,g(e,t))}function i(t){m(e,t)}var o,a=!1;try{(w(t)||$(t))&&(o=t.then),$(o)?(e.$$state.status=-1,o.call(t,n,r,i)):(e.$$state.value=t,e.$$state.status=1,c(e.$$state))}catch(e){r(e)}}function h(e,t){e.$$state.status||g(e,t)}function g(e,t){e.$$state.value=t,e.$$state.status=2,c(e.$$state)}function m(t,r){var i=t.$$state.pending;t.$$state.status<=0&&i&&i.length&&e(function(){for(var e,t,o=0,a=i.length;o<a;o++){t=i[o][0],e=i[o][3];try{m(t,$(e)?e(r):r)}catch(e){n(e)}}})}function v(e){var t=new s;return h(t,e),t}function y(e,t,n){var r=null;try{$(n)&&(r=n())}catch(e){return v(e)}return P(r)?r.then(function(){return t(e)},v):t(e)}function x(e,t,n,r){var i=new s;return f(i,e),i.then(t,n,r)}function _(e){var t=new s,n=0,r=ci(e)?[]:{};return o(e,function(e,i){n++,x(e).then(function(e){r[i]=e,--n||f(t,r)},function(e){h(t,e)})}),0===n&&f(t,r),t}function C(e){var t=i();return o(e,function(e){x(e).then(t.resolve,t.reject)}),t.promise}function k(e){function t(e){f(r,e)}function n(e){h(r,e)}if(!$(e))throw S("norslvr","Expected resolverFn, got '{0}'",e);var r=new s;return e(t,n),r}var S=t("$q",TypeError),M=0,T=[];d(s.prototype,{then:function(e,t,n){if(b(e)&&b(t)&&b(n))return this;var r=new s;return this.$$state.pending=this.$$state.pending||[],this.$$state.pending.push([r,e,t,n]),this.$$state.status>0&&c(this.$$state),r},catch:function(e){return this.then(null,e)},finally:function(e,t){return this.then(function(t){return y(t,D,e)},function(t){return y(t,v,e)},t)}});var D=x;return k.prototype=s.prototype,k.defer=i,k.reject=v,k.when=x,k.resolve=D,k.all=_,k.race=C,k}function Sn(){this.$get=["$window","$timeout",function(e,t){var n=e.requestAnimationFrame||e.webkitRequestAnimationFrame,r=e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.webkitCancelRequestAnimationFrame,i=!!n,o=i?function(e){var t=n(e);return function(){r(t)}}:function(e){var n=t(e,16.66,!1);return function(){t.cancel(n)}};return o.supported=i,o}]}function $RootScopeProvider(){function e(e){function ChildScope(){this.$$watchers=this.$$nextSibling=this.$$childHead=this.$$childTail=null,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$id=l(),this.$$ChildScope=null}return ChildScope.prototype=e,ChildScope}var n=10,r=t("$rootScope"),a=null,s=null;this.digestTtl=function(e){return arguments.length&&(n=e),n},this.$get=["$exceptionHandler","$parse","$browser",function(t,u,c){function d(e){e.currentScope.$$destroyed=!0}function f(e){9===Jr&&(e.$$childHead&&f(e.$$childHead),e.$$nextSibling&&f(e.$$nextSibling)),e.$parent=e.$$nextSibling=e.$$prevSibling=e.$$childHead=e.$$childTail=e.$root=e.$$watchers=null}function Scope(){this.$id=l(),this.$$phase=this.$parent=this.$$watchers=this.$$nextSibling=this.$$prevSibling=this.$$childHead=this.$$childTail=null,this.$root=this,this.$$destroyed=!1,this.$$listeners={},this.$$listenerCount={},this.$$watchersCount=0,this.$$isolateBindings=null}function p(e){if(C.$$phase)throw r("inprog","{0} already in progress",C.$$phase);C.$$phase=e}function h(){C.$$phase=null}function m(e,t){do{e.$$watchersCount+=t}while(e=e.$parent)}function v(e,t,n){do{e.$$listenerCount[n]-=t,0===e.$$listenerCount[n]&&delete e.$$listenerCount[n]}while(e=e.$parent)}function y(){}function x(){for(;M.length;)try{M.shift()()}catch(e){t(e)}s=null}function _(){null===s&&(s=c.defer(function(){C.$apply(x)}))}Scope.prototype={constructor:Scope,$new:function(t,n){var r;return n=n||this,t?(r=new Scope).$root=this.$root:(this.$$ChildScope||(this.$$ChildScope=e(this)),r=new this.$$ChildScope),r.$parent=n,r.$$prevSibling=n.$$childTail,n.$$childHead?(n.$$childTail.$$nextSibling=r,n.$$childTail=r):n.$$childHead=n.$$childTail=r,(t||n!==this)&&r.$on("$destroy",d),r},$watch:function(e,t,n,r){var i=u(e);if(i.$$watchDelegate)return i.$$watchDelegate(this,t,n,i,e);var o=this,s=o.$$watchers,l={fn:t,last:y,get:i,exp:r||e,eq:!!n};return a=null,$(t)||(l.fn=g),s||((s=o.$$watchers=[]).$$digestWatchIndex=-1),s.unshift(l),s.$$digestWatchIndex++,m(this,1),function(){var e=z(s,l);e>=0&&(m(o,-1),e<s.$$digestWatchIndex&&s.$$digestWatchIndex--),a=null}},$watchGroup:function(e,t){function n(){l=!1,u?(u=!1,t(i,i,s)):t(i,r,s)}var r=new Array(e.length),i=new Array(e.length),a=[],s=this,l=!1,u=!0;if(!e.length){var c=!0;return s.$evalAsync(function(){c&&t(i,i,s)}),function(){c=!1}}return 1===e.length?this.$watch(e[0],function(e,n,o){i[0]=e,r[0]=n,t(i,e===n?i:r,o)}):(o(e,function(e,t){var o=s.$watch(e,function(e,o){i[t]=e,r[t]=o,l||(l=!0,s.$evalAsync(n))});a.push(o)}),function(){for(;a.length;)a.shift()()})},$watchCollection:function(e,t){function n(e){var t,n,r,s;if(!b(o=e)){if(w(o))if(i(o)){a!==p&&(m=(a=p).length=0,d++),t=o.length,m!==t&&(d++,a.length=m=t);for(var l=0;l<t;l++)s=a[l],r=o[l],s!==s&&r!==r||s===r||(d++,a[l]=r)}else{a!==h&&(a=h={},m=0,d++),t=0;for(n in o)Wr.call(o,n)&&(t++,r=o[n],s=a[n],n in a?s!==s&&r!==r||s===r||(d++,a[n]=r):(m++,a[n]=r,d++));if(m>t){d++;for(n in a)Wr.call(o,n)||(m--,delete a[n])}}else a!==o&&(a=o,d++);return d}}function r(){if(g?(g=!1,t(o,o,l)):t(o,s,l),c)if(w(o))if(i(o)){s=new Array(o.length);for(var e=0;e<o.length;e++)s[e]=o[e]}else{s={};for(var n in o)Wr.call(o,n)&&(s[n]=o[n])}else s=o}n.$stateful=!0;var o,a,s,l=this,c=t.length>1,d=0,f=u(e,n),p=[],h={},g=!0,m=0;return this.$watch(f,r)},$digest:function(){var e,i,o,l,u,d,f,g,m,v,b=n,w=this,_=[];p("$digest"),c.$$checkUrlChange(),this===C&&null!==s&&(c.defer.cancel(s),x()),a=null;do{d=!1,g=w;for(var M=0;M<k.length;M++){try{(0,(v=k[M]).fn)(v.scope,v.locals)}catch(e){t(e)}a=null}k.length=0;e:do{if(u=g.$$watchers)for(u.$$digestWatchIndex=u.length;u.$$digestWatchIndex--;)try{if(e=u[u.$$digestWatchIndex])if(l=e.get,(i=l(g))===(o=e.last)||(e.eq?B(i,o):ui(i)&&ui(o))){if(e===a){d=!1;break e}}else d=!0,a=e,e.last=e.eq?H(i,null):i,(0,e.fn)(i,o===y?i:o,g),b<5&&(_[m=4-b]||(_[m]=[]),_[m].push({msg:$(e.exp)?"fn: "+(e.exp.name||e.exp.toString()):e.exp,newVal:i,oldVal:o}))}catch(e){t(e)}if(!(f=g.$$watchersCount&&g.$$childHead||g!==w&&g.$$nextSibling))for(;g!==w&&!(f=g.$$nextSibling);)g=g.$parent}while(g=f);if((d||k.length)&&!b--)throw h(),r("infdig","{0} $digest() iterations reached. Aborting!\nWatchers fired in the last 5 iterations: {1}",n,_)}while(d||k.length);for(h();T<S.length;)try{S[T++]()}catch(e){t(e)}S.length=T=0,c.$$checkUrlChange()},$destroy:function(){if(!this.$$destroyed){var e=this.$parent;this.$broadcast("$destroy"),this.$$destroyed=!0,this===C&&c.$$applicationDestroyed(),m(this,-this.$$watchersCount);for(var t in this.$$listenerCount)v(this,this.$$listenerCount[t],t);e&&e.$$childHead===this&&(e.$$childHead=this.$$nextSibling),e&&e.$$childTail===this&&(e.$$childTail=this.$$prevSibling),this.$$prevSibling&&(this.$$prevSibling.$$nextSibling=this.$$nextSibling),this.$$nextSibling&&(this.$$nextSibling.$$prevSibling=this.$$prevSibling),this.$destroy=this.$digest=this.$apply=this.$evalAsync=this.$applyAsync=g,this.$on=this.$watch=this.$watchGroup=function(){return g},this.$$listeners={},this.$$nextSibling=null,f(this)}},$eval:function(e,t){return u(e)(this,t)},$evalAsync:function(e,t){C.$$phase||k.length||c.defer(function(){k.length&&C.$digest()}),k.push({scope:this,fn:u(e),locals:t})},$$postDigest:function(e){S.push(e)},$apply:function(e){try{p("$apply");try{return this.$eval(e)}finally{h()}}catch(e){t(e)}finally{try{C.$digest()}catch(e){throw t(e),e}}},$applyAsync:function(e){function t(){n.$eval(e)}var n=this;e&&M.push(t),e=u(e),_()},$on:function(e,t){var n=this.$$listeners[e];n||(this.$$listeners[e]=n=[]),n.push(t);var r=this;do{r.$$listenerCount[e]||(r.$$listenerCount[e]=0),r.$$listenerCount[e]++}while(r=r.$parent);var i=this;return function(){var r=n.indexOf(t);-1!==r&&(n[r]=null,v(i,1,e))}},$emit:function(e,n){var r,i,o,a=[],s=this,l=!1,u={name:e,targetScope:s,stopPropagation:function(){l=!0},preventDefault:function(){u.defaultPrevented=!0},defaultPrevented:!1},c=W([u],arguments,1);do{for(r=s.$$listeners[e]||a,u.currentScope=s,i=0,o=r.length;i<o;i++)if(r[i])try{r[i].apply(null,c)}catch(e){t(e)}else r.splice(i,1),i--,o--;if(l)return u.currentScope=null,u;s=s.$parent}while(s);return u.currentScope=null,u},$broadcast:function(e,n){var r=this,i=r,o=r,a={name:e,targetScope:r,preventDefault:function(){a.defaultPrevented=!0},defaultPrevented:!1};if(!r.$$listenerCount[e])return a;for(var s,l,u,c=W([a],arguments,1);i=o;){for(a.currentScope=i,l=0,u=(s=i.$$listeners[e]||[]).length;l<u;l++)if(s[l])try{s[l].apply(null,c)}catch(e){t(e)}else s.splice(l,1),l--,u--;if(!(o=i.$$listenerCount[e]&&i.$$childHead||i!==r&&i.$$nextSibling))for(;i!==r&&!(o=i.$$nextSibling);)i=i.$parent}return a.currentScope=null,a}};var C=new Scope,k=C.$$asyncQueue=[],S=C.$$postDigestQueue=[],M=C.$$applyAsyncQueue=[],T=0;return C}]}function $n(){var e=/^\s*(https?|ftp|mailto|tel|file):/,t=/^\s*((https?|ftp|file|blob):|data:image\/)/;this.aHrefSanitizationWhitelist=function(t){return x(t)?(e=t,this):e},this.imgSrcSanitizationWhitelist=function(e){return x(e)?(t=e,this):t},this.$get=function(){return function(n,r){var i,o=r?t:e;return i=On(n).href,""===i||i.match(o)?n:"unsafe:"+i}}}function Mn(e){return e.replace(Fo,Se)}function Tn(e){if("self"===e)return e;if(C(e)){if(e.indexOf("***")>-1)throw Ro("iwcard","Illegal sequence *** in string matcher.  String: {0}",e);return e=pi(e).replace(/\\\*\\\*/g,".*").replace(/\\\*/g,"[^:/.?&;]*"),new RegExp("^"+e+"$")}if(M(e))return new RegExp("^"+e.source+"$");throw Ro("imatcher",'Matchers may only be "self", string patterns or RegExp objects')}function Dn(e){var t=[];return x(e)&&o(e,function(e){t.push(Tn(e))}),t}function En(){this.SCE_CONTEXTS=Po;var e=["self"],t=[];this.resourceUrlWhitelist=function(t){return arguments.length&&(e=Dn(t)),e},this.resourceUrlBlacklist=function(e){return arguments.length&&(t=Dn(e)),t},this.$get=["$injector",function(n){function r(e,t){return"self"===e?Nn(t):!!e.exec(t.href)}function i(n){var i,o,a=On(n.toString()),s=!1;for(i=0,o=e.length;i<o;i++)if(r(e[i],a)){s=!0;break}if(s)for(i=0,o=t.length;i<o;i++)if(r(t[i],a)){s=!1;break}return s}function o(e){var t=function(e){this.$$unwrapTrustedValue=function(){return e}};return e&&(t.prototype=new e),t.prototype.valueOf=function(){return this.$$unwrapTrustedValue()},t.prototype.toString=function(){return this.$$unwrapTrustedValue().toString()},t}function a(e,t){var n=d.hasOwnProperty(e)?d[e]:null;if(!n)throw Ro("icontext","Attempted to trust a value in invalid context. Context: {0}; Value: {1}",e,t);if(null===t||b(t)||""===t)return t;if("string"!=typeof t)throw Ro("itype","Attempted to trust a non-string value in a content requiring a string: Context: {0}",e);return new n(t)}function s(e){return e instanceof c?e.$$unwrapTrustedValue():e}function l(e,t){if(null===t||b(t)||""===t)return t;var n=d.hasOwnProperty(e)?d[e]:null;if(n&&t instanceof n)return t.$$unwrapTrustedValue();if(e===Po.RESOURCE_URL){if(i(t))return t;throw Ro("insecurl","Blocked loading resource from url not allowed by $sceDelegate policy.  URL: {0}",t.toString())}if(e===Po.HTML)return u(t);throw Ro("unsafe","Attempting to use an unsafe value in a safe context.")}var u=function(e){throw Ro("unsafe","Attempting to use an unsafe value in a safe context.")};n.has("$sanitize")&&(u=n.get("$sanitize"));var c=o(),d={};return d[Po.HTML]=o(c),d[Po.CSS]=o(c),d[Po.URL]=o(c),d[Po.JS]=o(c),d[Po.RESOURCE_URL]=o(d[Po.URL]),{trustAs:a,getTrusted:l,valueOf:s}}]}function Ln(){var e=!0;this.enabled=function(t){return arguments.length&&(e=!!t),e},this.$get=["$parse","$sceDelegate",function(t,n){if(e&&Jr<8)throw Ro("iequirks","Strict Contextual Escaping does not support Internet Explorer version < 11 in quirks mode.  You can fix this by adding the text <!doctype html> to the top of your HTML document.  See http://docs.angularjs.org/api/ng.$sce for more information.");var r=xe(Po);r.isEnabled=function(){return e},r.trustAs=n.trustAs,r.getTrusted=n.getTrusted,r.valueOf=n.valueOf,e||(r.trustAs=r.getTrusted=function(e,t){return t},r.valueOf=m),r.parseAs=function(e,n){var i=t(n);return i.literal&&i.constant?i:t(n,function(t){return r.getTrusted(e,t)})};var i=r.parseAs,a=r.getTrusted,s=r.trustAs;return o(Po,function(e,t){var n=Gr(t);r[Mn("parse_as_"+n)]=function(t){return i(e,t)},r[Mn("get_trusted_"+n)]=function(t){return a(e,t)},r[Mn("trust_as_"+n)]=function(t){return s(e,t)}}),r}]}function An(){this.$get=["$window","$document",function(e,t){var n={},r=!(!(e.nw&&e.nw.process)&&e.chrome&&(e.chrome.app&&e.chrome.app.runtime||!e.chrome.app&&e.chrome.runtime&&e.chrome.runtime.id))&&e.history&&e.history.pushState,i=p((/android (\d+)/.exec(Gr((e.navigator||{}).userAgent))||[])[1]),o=/Boxee/i.test((e.navigator||{}).userAgent),a=t[0]||{},s=a.body&&a.body.style,l=!1,u=!1;return s&&(l=!!("transition"in s||"webkitTransition"in s),u=!!("animation"in s||"webkitAnimation"in s)),{history:!(!r||i<4||o),hasEvent:function(e){if("input"===e&&Jr)return!1;if(b(n[e])){var t=a.createElement("div");n[e]="on"+e in t}return n[e]},csp:hi(),transitions:l,animations:u,android:i}}]}function Rn(){var e;this.httpOptions=function(t){return t?(e=t,this):e},this.$get=["$exceptionHandler","$templateCache","$http","$q","$sce",function(t,n,r,i,o){function a(s,l){function u(e){return l||(e=Oo("tpload","Failed to load template: {0} (HTTP status: {1} {2})",s,e.status,e.statusText),t(e)),i.reject(e)}a.totalPendingRequests++,C(s)&&!b(n.get(s))||(s=o.getTrustedResourceUrl(s));var c=r.defaults&&r.defaults.transformResponse;return ci(c)?c=c.filter(function(e){return e!==At}):c===At&&(c=null),r.get(s,d({cache:n,transformResponse:c},e)).finally(function(){a.totalPendingRequests--}).then(function(e){return n.put(s,e.data),e.data},u)}return a.totalPendingRequests=0,a}]}function Pn(){this.$get=["$rootScope","$browser","$location",function(e,t,n){var r={};return r.findBindings=function(e,t,n){var r=[];return o(e.getElementsByClassName("ng-binding"),function(e){var i=si.element(e).data("$binding");i&&o(i,function(i){n?new RegExp("(^|\\s)"+pi(t)+"(\\s|\\||$)").test(i)&&r.push(e):-1!==i.indexOf(t)&&r.push(e)})}),r},r.findModels=function(e,t,n){for(var r=["ng-","data-ng-","ng\\:"],i=0;i<r.length;++i){var o=n?"=":"*=",a="["+r[i]+"model"+o+'"'+t+'"]',s=e.querySelectorAll(a);if(s.length)return s}},r.getLocation=function(){return n.url()},r.setLocation=function(t){t!==n.url()&&(n.url(t),e.$digest())},r.whenStable=function(e){t.notifyWhenNoOutstandingRequests(e)},r}]}function Fn(){this.$get=["$rootScope","$browser","$q","$$q","$exceptionHandler",function(e,t,n,r,i){function o(o,s,l){$(o)||(l=s,s=o,o=g);var u,c=U(arguments,3),d=x(l)&&!l,f=(d?r:n).defer(),p=f.promise;return u=t.defer(function(){try{f.resolve(o.apply(null,c))}catch(e){f.reject(e),i(e)}finally{delete a[p.$$timeoutId]}d||e.$apply()},s),p.$$timeoutId=u,a[u]=f,p}var a={};return o.cancel=function(e){return!!(e&&e.$$timeoutId in a)&&(a[e.$$timeoutId].promise.catch(g),a[e.$$timeoutId].reject("canceled"),delete a[e.$$timeoutId],t.defer.cancel(e.$$timeoutId))},o}]}function On(e){var t=e;return Jr&&(No.setAttribute("href",t),t=No.href),No.setAttribute("href",t),{href:No.href,protocol:No.protocol?No.protocol.replace(/:$/,""):"",host:No.host,search:No.search?No.search.replace(/^\?/,""):"",hash:No.hash?No.hash.replace(/^#/,""):"",hostname:No.hostname,port:No.port,pathname:"/"===No.pathname.charAt(0)?No.pathname:"/"+No.pathname}}function Nn(e){var t=C(e)?On(e):e;return t.protocol===Io.protocol&&t.host===Io.host}function In(){this.$get=v(e)}function jn(e){function t(e){try{return e.cookie||""}catch(e){return""}}function n(e){try{return decodeURIComponent(e)}catch(t){return e}}var r=e[0]||{},i={},o="";return function(){var e,a,s,l,u,c=t(r);if(c!==o)for(e=(o=c).split("; "),i={},s=0;s<e.length;s++)(l=(a=e[s]).indexOf("="))>0&&(u=n(a.substring(0,l)),b(i[u])&&(i[u]=n(a.substring(l+1))));return i}}function Yn(){this.$get=jn}function zn(e){function t(r,i){if(w(r)){var a={};return o(r,function(e,n){a[n]=t(n,e)}),a}return e.factory(r+n,i)}var n="Filter";this.register=t,this.$get=["$injector",function(e){return function(t){return e.get(t+n)}}],t("currency",Un),t("date",sr),t("filter",Hn),t("json",lr),t("limitTo",ur),t("lowercase",Wo),t("number",Gn),t("orderBy",dr),t("uppercase",Uo)}function Hn(){return function(e,n,r,o){if(!i(e)){if(null==e)return e;throw t("filter")("notarray","Expected array but received: {0}",e)}o=o||"$";var a,s;switch(Wn(n)){case"function":a=n;break;case"boolean":case"null":case"number":case"string":s=!0;case"object":a=Vn(n,r,o,s);break;default:return e}return Array.prototype.filter.call(e,a)}}function Vn(e,t,n,r){var i=w(e)&&n in e;return!0===t?t=B:$(t)||(t=function(e,t){return!b(e)&&(null===e||null===t?e===t:!(w(t)||w(e)&&!y(e))&&(e=Gr(""+e),t=Gr(""+t),-1!==e.indexOf(t)))}),function(o){return i&&!w(o)?Bn(o,e[n],t,n,!1):Bn(o,e,t,n,r)}}function Bn(e,t,n,r,i,o){var a=Wn(e),s=Wn(t);if("string"===s&&"!"===t.charAt(0))return!Bn(e,t.substring(1),n,r,i);if(ci(e))return e.some(function(e){return Bn(e,t,n,r,i)});switch(a){case"object":var l;if(i){for(l in e)if(l.charAt&&"$"!==l.charAt(0)&&Bn(e[l],t,n,r,!0))return!0;return!o&&Bn(e,t,n,r,!1)}if("object"===s){for(l in t){var u=t[l];if(!$(u)&&!b(u)){var c=l===r;if(!Bn(c?e:e[l],u,n,r,c,c))return!1}}return!0}return n(e,t);case"function":return!1;default:return n(e,t)}}function Wn(e){return null===e?"null":typeof e}function Un(e){var t=e.NUMBER_FORMATS;return function(e,n,r){return b(n)&&(n=t.CURRENCY_SYM),b(r)&&(r=t.PATTERNS[1].maxFrac),null==e?e:Xn(e,t.PATTERNS[1],t.GROUP_SEP,t.DECIMAL_SEP,r).replace(/\u00A4/g,n)}}function Gn(e){var t=e.NUMBER_FORMATS;return function(e,n){return null==e?e:Xn(e,t.PATTERNS[0],t.GROUP_SEP,t.DECIMAL_SEP,n)}}function qn(e){var t,n,r,i,o,a=0;for((n=e.indexOf(Yo))>-1&&(e=e.replace(Yo,"")),(r=e.search(/e/i))>0?(n<0&&(n=r),n+=+e.slice(r+1),e=e.substring(0,r)):n<0&&(n=e.length),r=0;e.charAt(r)===zo;r++);if(r===(o=e.length))t=[0],n=1;else{for(o--;e.charAt(o)===zo;)o--;for(n-=r,t=[],i=0;r<=o;r++,i++)t[i]=+e.charAt(r)}return n>jo&&(t=t.splice(0,jo-1),a=n-1,n=1),{d:t,e:a,i:n}}function Kn(e,t,n,r){var i=e.d,o=i.length-e.i,a=(t=b(t)?Math.min(Math.max(n,o),r):+t)+e.i,s=i[a];if(a>0){i.splice(Math.max(e.i,a));for(var l=a;l<i.length;l++)i[l]=0}else{o=Math.max(0,o),e.i=1,i.length=Math.max(1,a=t+1),i[0]=0;for(var u=1;u<a;u++)i[u]=0}if(s>=5)if(a-1<0){for(var c=0;c>a;c--)i.unshift(0),e.i++;i.unshift(1),e.i++}else i[a-1]++;for(;o<Math.max(0,t);o++)i.push(0);var d=i.reduceRight(function(e,t,n,r){return t+=e,r[n]=t%10,Math.floor(t/10)},0);d&&(i.unshift(d),e.i++)}function Xn(e,t,n,r,i){if(!C(e)&&!k(e)||isNaN(e))return"";var o,a=!isFinite(e),s=!1,l=Math.abs(e)+"",u="";if(a)u="∞";else{Kn(o=qn(l),i,t.minFrac,t.maxFrac);var c=o.d,d=o.i,f=o.e,p=[];for(s=c.reduce(function(e,t){return e&&!t},!0);d<0;)c.unshift(0),d++;d>0?p=c.splice(d,c.length):(p=c,c=[0]);var h=[];for(c.length>=t.lgSize&&h.unshift(c.splice(-t.lgSize,c.length).join(""));c.length>t.gSize;)h.unshift(c.splice(-t.gSize,c.length).join(""));c.length&&h.unshift(c.join("")),u=h.join(n),p.length&&(u+=r+p.join("")),f&&(u+="e+"+f)}return e<0&&!s?t.negPre+u+t.negSuf:t.posPre+u+t.posSuf}function Jn(e,t,n,r){var i="";for((e<0||r&&e<=0)&&(r?e=1-e:(e=-e,i="-")),e=""+e;e.length<t;)e=zo+e;return n&&(e=e.substr(e.length-t)),i+e}function Zn(e,t,n,r,i){return n=n||0,function(o){var a=o["get"+e]();return(n>0||a>-n)&&(a+=n),0===a&&-12===n&&(a=12),Jn(a,t,r,i)}}function Qn(e,t,n){return function(r,i){var o=r["get"+e]();return i[qr((n?"STANDALONE":"")+(t?"SHORT":"")+e)][o]}}function er(e,t,n){var r=-1*n,i=r>=0?"+":"";return i+=Jn(Math[r>0?"floor":"ceil"](r/60),2)+Jn(Math.abs(r%60),2)}function tr(e){var t=new Date(e,0,1).getDay();return new Date(e,0,(t<=4?5:12)-t)}function nr(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate()+(4-e.getDay()))}function rr(e){return function(t){var n=tr(t.getFullYear()),r=+nr(t)-+n;return Jn(1+Math.round(r/6048e5),e)}}function ir(e,t){return e.getHours()<12?t.AMPMS[0]:t.AMPMS[1]}function or(e,t){return e.getFullYear()<=0?t.ERAS[0]:t.ERAS[1]}function ar(e,t){return e.getFullYear()<=0?t.ERANAMES[0]:t.ERANAMES[1]}function sr(e){function t(e){var t;if(t=e.match(n)){var r=new Date(0),i=0,o=0,a=t[8]?r.setUTCFullYear:r.setFullYear,s=t[8]?r.setUTCHours:r.setHours;t[9]&&(i=p(t[9]+t[10]),o=p(t[9]+t[11])),a.call(r,p(t[1]),p(t[2])-1,p(t[3]));var l=p(t[4]||0)-i,u=p(t[5]||0)-o,c=p(t[6]||0),d=Math.round(1e3*parseFloat("0."+(t[7]||0)));return s.call(r,l,u,c,d),r}return e}var n=/^(\d{4})-?(\d\d)-?(\d\d)(?:T(\d\d)(?::?(\d\d)(?::?(\d\d)(?:\.(\d+))?)?)?(Z|([+-])(\d\d):?(\d\d))?)?$/;return function(n,r,i){var a,s,l="",u=[];if(r=r||"mediumDate",r=e.DATETIME_FORMATS[r]||r,C(n)&&(n=Bo.test(n)?p(n):t(n)),k(n)&&(n=new Date(n)),!S(n)||!isFinite(n.getTime()))return n;for(;r;)(s=Vo.exec(r))?r=(u=W(u,s,1)).pop():(u.push(r),r=null);var c=n.getTimezoneOffset();return i&&(c=J(i,c),n=Q(n,i,!0)),o(u,function(t){a=Ho[t],l+=a?a(n,e.DATETIME_FORMATS,c):"''"===t?"'":t.replace(/(^'|'$)/g,"").replace(/''/g,"'")}),l}}function lr(){return function(e,t){return b(t)&&(t=2),K(e,t)}}function ur(){return function(e,t,n){return t=Math.abs(Number(t))===1/0?Number(t):p(t),ui(t)?e:(k(e)&&(e=e.toString()),i(e)?(n=!n||isNaN(n)?0:p(n),n=n<0?Math.max(0,e.length+n):n,t>=0?cr(e,n,n+t):0===n?cr(e,t,e.length):cr(e,Math.max(0,n+t),n)):e)}}function cr(e,t,n){return C(e)?e.slice(t,n):ti.call(e,t,n)}function dr(e){function n(t){return t.map(function(t){var n=1,r=m;if($(t))r=t;else if(C(t)&&("+"!==t.charAt(0)&&"-"!==t.charAt(0)||(n="-"===t.charAt(0)?-1:1,t=t.substring(1)),""!==t&&(r=e(t)).constant)){var i=r();r=function(e){return e[i]}}return{get:r,descending:n}})}function r(e){switch(typeof e){case"number":case"boolean":case"string":return!0;default:return!1}}function o(e){return $(e.valueOf)&&(e=e.valueOf(),r(e))?e:(y(e)&&(e=e.toString(),r(e)),e)}function a(e,t){var n=typeof e;return null===e?(n="string",e="null"):"object"===n&&(e=o(e)),{value:e,type:n,index:t}}function s(e,t){var n=0,r=e.type,i=t.type;if(r===i){var o=e.value,a=t.value;"string"===r?(o=o.toLowerCase(),a=a.toLowerCase()):"object"===r&&(w(o)&&(o=e.index),w(a)&&(a=t.index)),o!==a&&(n=o<a?-1:1)}else n=r<i?-1:1;return n}return function(e,r,o,l){function u(e,t){return{value:e,tieBreaker:{value:t,type:"number",index:t},predicateValues:d.map(function(n){return a(n.get(e),t)})}}function c(e,t){for(var n=0,r=d.length;n<r;n++){var i=p(e.predicateValues[n],t.predicateValues[n]);if(i)return i*d[n].descending*f}return p(e.tieBreaker,t.tieBreaker)*f}if(null==e)return e;if(!i(e))throw t("orderBy")("notarray","Expected array but received: {0}",e);ci(r)||(r=[r]),0===r.length&&(r=["+"]);var d=n(r),f=o?-1:1,p=$(l)?l:s,h=Array.prototype.map.call(e,u);return h.sort(c),e=h.map(function(e){return e.value})}}function fr(e){return $(e)&&(e={link:e}),e.restrict=e.restrict||"AC",v(e)}function pr(e,t){e.$name=t}function hr(e,t,n,r,i){this.$$controls=[],this.$error={},this.$$success={},this.$pending=void 0,this.$name=i(t.name||t.ngForm||"")(n),this.$dirty=!1,this.$pristine=!0,this.$valid=!0,this.$invalid=!1,this.$submitted=!1,this.$$parentForm=Ko,this.$$element=e,this.$$animate=r,gr(this)}function gr(e){e.$$classCache={},e.$$classCache[Aa]=!(e.$$classCache[La]=e.$$element.hasClass(La))}function mr(e){function t(e,t,n,r){e[t]||(e[t]={}),a(e[t],n,r)}function n(e,t,n,r){e[t]&&s(e[t],n,r),vr(e[t])&&(e[t]=void 0)}function r(e,t,n){n&&!e.$$classCache[t]?(e.$$animate.addClass(e.$$element,t),e.$$classCache[t]=!0):!n&&e.$$classCache[t]&&(e.$$animate.removeClass(e.$$element,t),e.$$classCache[t]=!1)}function i(e,t,n){t=t?"-"+de(t,"-"):"",r(e,La+t,!0===n),r(e,Aa+t,!1===n)}var o=e.clazz,a=e.set,s=e.unset;o.prototype.$setValidity=function(e,o,l){b(o)?t(this,"$pending",e,l):n(this,"$pending",e,l),R(o)?o?(s(this.$error,e,l),a(this.$$success,e,l)):(a(this.$error,e,l),s(this.$$success,e,l)):(s(this.$error,e,l),s(this.$$success,e,l)),this.$pending?(r(this,Xo,!0),this.$valid=this.$invalid=void 0,i(this,"",null)):(r(this,Xo,!1),this.$valid=vr(this.$error),this.$invalid=!this.$valid,i(this,"",this.$valid));var u;i(this,e,u=this.$pending&&this.$pending[e]?void 0:!this.$error[e]&&(!!this.$$success[e]||null)),this.$$parentForm.$setValidity(e,u,this)}}function vr(e){if(e)for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function yr(e){e.$formatters.push(function(t){return e.$isEmpty(t)?t:t.toString()})}function br(e,t,n,r,i,o){xr(e,t,n,r,i,o),yr(r)}function xr(e,t,n,r,i,o){var a=Gr(t[0].type);if(!i.android){var s=!1;t.on("compositionstart",function(){s=!0}),t.on("compositionend",function(){s=!1,u()})}var l,u=function(e){if(l&&(o.defer.cancel(l),l=null),!s){var i=t.val(),u=e&&e.type;"password"===a||n.ngTrim&&"false"===n.ngTrim||(i=fi(i)),(r.$viewValue!==i||""===i&&r.$$hasNativeValidators)&&r.$setViewValue(i,u)}};if(i.hasEvent("input"))t.on("input",u);else{var c=function(e,t,n){l||(l=o.defer(function(){l=null,t&&t.value===n||u(e)}))};t.on("keydown",function(e){var t=e.keyCode;91===t||15<t&&t<19||37<=t&&t<=40||c(e,this,this.value)}),i.hasEvent("paste")&&t.on("paste cut",c)}t.on("change",u),ca[a]&&r.$$hasNativeValidators&&a===n.type&&t.on(ua,function(e){if(!l){var t=this[Br],n=t.badInput,r=t.typeMismatch;l=o.defer(function(){l=null,t.badInput===n&&t.typeMismatch===r||u(e)})}}),r.$render=function(){var e=r.$isEmpty(r.$viewValue)?"":r.$viewValue;t.val()!==e&&t.val(e)}}function wr(e,t){if(S(e))return e;if(C(e)){aa.lastIndex=0;var n=aa.exec(e);if(n){var r=+n[1],i=+n[2],o=0,a=0,s=0,l=0,u=tr(r),c=7*(i-1);return t&&(o=t.getHours(),a=t.getMinutes(),s=t.getSeconds(),l=t.getMilliseconds()),new Date(r,0,u.getDate()+c,o,a,s,l)}}return NaN}function _r(e,t){return function(n,r){var i,a;if(S(n))return n;if(C(n)){if('"'===n.charAt(0)&&'"'===n.charAt(n.length-1)&&(n=n.substring(1,n.length-1)),ea.test(n))return new Date(n);if(e.lastIndex=0,i=e.exec(n))return i.shift(),a=r?{yyyy:r.getFullYear(),MM:r.getMonth()+1,dd:r.getDate(),HH:r.getHours(),mm:r.getMinutes(),ss:r.getSeconds(),sss:r.getMilliseconds()/1e3}:{yyyy:1970,MM:1,dd:1,HH:0,mm:0,ss:0,sss:0},o(i,function(e,n){n<t.length&&(a[t[n]]=+e)}),new Date(a.yyyy,a.MM-1,a.dd,a.HH,a.mm,a.ss||0,1e3*a.sss||0)}return NaN}}function Cr(e,t,n,r){return function(i,o,a,s,l,u,c){function d(e){return e&&!(e.getTime&&e.getTime()!==e.getTime())}function f(e){return x(e)&&!S(e)?n(e)||void 0:e}kr(i,o,a,s),xr(i,o,a,s,l,u);var p,h=s&&s.$options.getOption("timezone");if(s.$$parserName=e,s.$parsers.push(function(e){if(s.$isEmpty(e))return null;if(t.test(e)){var r=n(e,p);return h&&(r=Q(r,h)),r}}),s.$formatters.push(function(e){if(e&&!S(e))throw Fa("datefmt","Expected `{0}` to be a date",e);return d(e)?((p=e)&&h&&(p=Q(p,h,!0)),c("date")(e,r,h)):(p=null,"")}),x(a.min)||a.ngMin){var g;s.$validators.min=function(e){return!d(e)||b(g)||n(e)>=g},a.$observe("min",function(e){g=f(e),s.$validate()})}if(x(a.max)||a.ngMax){var m;s.$validators.max=function(e){return!d(e)||b(m)||n(e)<=m},a.$observe("max",function(e){m=f(e),s.$validate()})}}}function kr(e,t,n,r){var i=t[0];(r.$$hasNativeValidators=w(i.validity))&&r.$parsers.push(function(e){var n=t.prop(Br)||{};return n.badInput||n.typeMismatch?void 0:e})}function Sr(e){e.$$parserName="number",e.$parsers.push(function(t){return e.$isEmpty(t)?null:ra.test(t)?parseFloat(t):void 0}),e.$formatters.push(function(t){if(!e.$isEmpty(t)){if(!k(t))throw Fa("numfmt","Expected `{0}` to be a number",t);t=t.toString()}return t})}function $r(e){return x(e)&&!k(e)&&(e=parseFloat(e)),ui(e)?void 0:e}function Mr(e){return(0|e)===e}function Tr(e){var t=e.toString(),n=t.indexOf(".");if(-1===n){if(-1<e&&e<1){var r=/e-(\d+)$/.exec(t);if(r)return Number(r[1])}return 0}return t.length-n-1}function Dr(e,t,n){var r=Number(e),i=!Mr(r),o=!Mr(t),a=!Mr(n);if(i||o||a){var s=i?Tr(r):0,l=o?Tr(t):0,u=a?Tr(n):0,c=Math.max(s,l,u),d=Math.pow(10,c);r*=d,t*=d,n*=d,i&&(r=Math.round(r)),o&&(t=Math.round(t)),a&&(n=Math.round(n))}return(r-t)%n==0}function Er(e,t,n,r,i,o){kr(e,t,n,r),Sr(r),xr(e,t,n,r,i,o);var a,s;if((x(n.min)||n.ngMin)&&(r.$validators.min=function(e){return r.$isEmpty(e)||b(a)||e>=a},n.$observe("min",function(e){a=$r(e),r.$validate()})),(x(n.max)||n.ngMax)&&(r.$validators.max=function(e){return r.$isEmpty(e)||b(s)||e<=s},n.$observe("max",function(e){s=$r(e),r.$validate()})),x(n.step)||n.ngStep){var l;r.$validators.step=function(e,t){return r.$isEmpty(t)||b(l)||Dr(t,a||0,l)},n.$observe("step",function(e){l=$r(e),r.$validate()})}}function Lr(e,t,n,r,i,o){function a(e,r){t.attr(e,n[e]),n.$observe(e,r)}function s(e){if(d=$r(e),!ui(r.$modelValue))if(c){var n=t.val();d>n&&(n=d,t.val(n)),r.$setViewValue(n)}else r.$validate()}function l(e){if(f=$r(e),!ui(r.$modelValue))if(c){var n=t.val();f<n&&(t.val(f),n=f<d?d:f),r.$setViewValue(n)}else r.$validate()}function u(e){p=$r(e),ui(r.$modelValue)||(c&&r.$viewValue!==t.val()?r.$setViewValue(t.val()):r.$validate())}kr(e,t,n,r),Sr(r),xr(e,t,n,r,i,o);var c=r.$$hasNativeValidators&&"range"===t[0].type,d=c?0:void 0,f=c?100:void 0,p=c?1:void 0,h=t[0].validity,g=x(n.min),m=x(n.max),v=x(n.step),y=r.$render;r.$render=c&&x(h.rangeUnderflow)&&x(h.rangeOverflow)?function(){y(),r.$setViewValue(t.val())}:y,g&&(r.$validators.min=c?function(){return!0}:function(e,t){return r.$isEmpty(t)||b(d)||t>=d},a("min",s)),m&&(r.$validators.max=c?function(){return!0}:function(e,t){return r.$isEmpty(t)||b(f)||t<=f},a("max",l)),v&&(r.$validators.step=c?function(){return!h.stepMismatch}:function(e,t){return r.$isEmpty(t)||b(p)||Dr(t,d||0,p)},a("step",u))}function Ar(e,t,n,r,i,o){xr(e,t,n,r,i,o),yr(r),r.$$parserName="url",r.$validators.url=function(e,t){var n=e||t;return r.$isEmpty(n)||ta.test(n)}}function Rr(e,t,n,r,i,o){xr(e,t,n,r,i,o),yr(r),r.$$parserName="email",r.$validators.email=function(e,t){var n=e||t;return r.$isEmpty(n)||na.test(n)}}function Pr(e,t,n,r){var i=!n.ngTrim||"false"!==fi(n.ngTrim);b(n.name)&&t.attr("name",l());var o=function(e){var o;t[0].checked&&(o=n.value,i&&(o=fi(o)),r.$setViewValue(o,e&&e.type))};t.on("click",o),r.$render=function(){var e=n.value;i&&(e=fi(e)),t[0].checked=e===r.$viewValue},n.$observe("value",r.$render)}function Fr(e,t,n,r,i){var o;if(x(r)){if(!(o=e(r)).constant)throw Fa("constexpr","Expected constant expression for `{0}`, but saw `{1}`.",n,r);return o(t)}return i}function Or(e,t,n,r,i,o,a,s){var l=Fr(s,e,"ngTrueValue",n.ngTrueValue,!0),u=Fr(s,e,"ngFalseValue",n.ngFalseValue,!1),c=function(e){r.$setViewValue(t[0].checked,e&&e.type)};t.on("click",c),r.$render=function(){t[0].checked=r.$viewValue},r.$isEmpty=function(e){return!1===e},r.$formatters.push(function(e){return B(e,l)}),r.$parsers.push(function(e){return e?l:u})}function Nr(e,t){function n(e,t){if(!e||!e.length)return[];if(!t||!t.length)return e;var n=[];e:for(var r=0;r<e.length;r++){for(var i=e[r],o=0;o<t.length;o++)if(i===t[o])continue e;n.push(i)}return n}function r(e){return e&&e.split(" ")}function i(e){var t=e;return ci(e)?t=e.map(i).join(" "):w(e)&&(t=Object.keys(e).filter(function(t){return e[t]}).join(" ")),t}e="ngClass"+e;var a;return["$parse",function(s){return{restrict:"AC",link:function(l,u,c){function d(e){e=h(r(e),1),c.$addClass(e)}function f(e){e=h(r(e),-1),c.$removeClass(e)}function p(e,t){var i=r(e),o=r(t),a=n(i,o),s=n(o,i),l=h(a,-1),u=h(s,1);c.$addClass(u),c.$removeClass(l)}function h(e,t){var n=[];return o(e,function(e){(t>0||y[e])&&(y[e]=(y[e]||0)+t,y[e]===+(t>0)&&n.push(e))}),n.join(" ")}function g(e){e===t?d(v):f(v),b=e}function m(e){C(e)||(e=i(e)),b===t&&p(v,e),v=e}var v,y=u.data("$classCounts"),b=!0;y||(y=ve(),u.data("$classCounts",y)),"ngClass"!==e&&(a||(a=s("$index",function(e){return 1&e})),l.$watch(a,g)),l.$watch(s(c[e],i),m)}}}]}function Ir(e,t,n,r,i,o,a,s,l){this.$viewValue=Number.NaN,this.$modelValue=Number.NaN,this.$$rawModelValue=void 0,this.$validators={},this.$asyncValidators={},this.$parsers=[],this.$formatters=[],this.$viewChangeListeners=[],this.$untouched=!0,this.$touched=!1,this.$pristine=!0,this.$dirty=!1,this.$valid=!0,this.$invalid=!1,this.$error={},this.$$success={},this.$pending=void 0,this.$name=l(n.name||"",!1)(e),this.$$parentForm=Ko,this.$options=Oa,this.$$parsedNgModel=i(n.ngModel),this.$$parsedNgModelAssign=this.$$parsedNgModel.assign,this.$$ngModelGet=this.$$parsedNgModel,this.$$ngModelSet=this.$$parsedNgModelAssign,this.$$pendingDebounce=null,this.$$parserValid=void 0,this.$$currentValidationRunId=0,Object.defineProperty(this,"$$scope",{value:e}),this.$$attr=n,this.$$element=r,this.$$animate=o,this.$$timeout=a,this.$$parse=i,this.$$q=s,this.$$exceptionHandler=t,gr(this),jr(this)}function jr(e){e.$$scope.$watch(function(t){var n=e.$$ngModelGet(t);if(n!==e.$modelValue&&(e.$modelValue===e.$modelValue||n===n)){e.$modelValue=e.$$rawModelValue=n,e.$$parserValid=void 0;for(var r=e.$formatters,i=r.length,o=n;i--;)o=r[i](o);e.$viewValue!==o&&(e.$$updateEmptyClasses(o),e.$viewValue=e.$$lastCommittedViewValue=o,e.$render(),e.$$runValidators(e.$modelValue,e.$viewValue,g))}return n})}function Yr(e){this.$$options=e}function zr(e,t){o(t,function(t,n){x(e[n])||(e[n]=t)})}function Hr(e,t){e.prop("selected",t),e.attr("selected",t)}var Vr=/^\/(.+)\/([a-z]*)$/,Br="validity",Wr=Object.prototype.hasOwnProperty,Ur={objectMaxDepth:5},Gr=function(e){return C(e)?e.toLowerCase():e},qr=function(e){return C(e)?e.toUpperCase():e},Kr=function(e){return C(e)?e.replace(/[A-Z]/g,function(e){return String.fromCharCode(32|e.charCodeAt(0))}):e},Xr=function(e){return C(e)?e.replace(/[a-z]/g,function(e){return String.fromCharCode(-33&e.charCodeAt(0))}):e};"i"!=="I".toLowerCase()&&(Gr=Kr,qr=Xr);var Jr,Zr,Qr,ei,ti=[].slice,ni=[].splice,ri=[].push,ii=Object.prototype.toString,oi=Object.getPrototypeOf,ai=t("ng"),si=e.angular||(e.angular={}),li=0;Jr=e.document.documentMode;var ui=Number.isNaN||function(e){return e!==e};g.$inject=[],m.$inject=[];var ci=Array.isArray,di=/^\[object (?:Uint8|Uint8Clamped|Uint16|Uint32|Int8|Int16|Int32|Float32|Float64)Array]$/,fi=function(e){return C(e)?e.trim():e},pi=function(e){return e.replace(/([-()[\]{}+?*.$^|,:#<!\\])/g,"\\$1").replace(/\x08/g,"\\x08")},hi=function(){if(!x(hi.rules)){var t=e.document.querySelector("[ng-csp]")||e.document.querySelector("[data-ng-csp]");if(t){var n=t.getAttribute("ng-csp")||t.getAttribute("data-ng-csp");hi.rules={noUnsafeEval:!n||-1!==n.indexOf("no-unsafe-eval"),noInlineStyle:!n||-1!==n.indexOf("no-inline-style")}}else hi.rules={noUnsafeEval:function(){try{return new Function(""),!1}catch(e){return!0}}(),noInlineStyle:!1}}return hi.rules},gi=function(){if(x(gi.name_))return gi.name_;var t,n,r,i,o=vi.length;for(n=0;n<o;++n)if(r=vi[n],t=e.document.querySelector("["+r.replace(":","\\:")+"jq]")){i=t.getAttribute(r+"jq");break}return gi.name_=i},mi=/:/g,vi=["ng-","data-ng-","ng:","x-ng-"],yi=function(t){var n=t.currentScript;if(!n)return!0;if(!(n instanceof e.HTMLScriptElement||n instanceof e.SVGScriptElement))return!1;var r=n.attributes;return[r.getNamedItem("src"),r.getNamedItem("href"),r.getNamedItem("xlink:href")].every(function(e){if(!e)return!0;if(!e.value)return!1;var n=t.createElement("a");if(n.href=e.value,t.location.origin===n.origin)return!0;switch(n.protocol){case"http:":case"https:":case"ftp:":case"blob:":case"file:":case"data:":return!0;default:return!1}})}(e.document),bi=/[A-Z]/g,xi=!1,wi=1,_i=3,Ci=8,ki=9,Si=11,$i={full:"1.6.4",major:1,minor:6,dot:4,codeName:"phenomenal-footnote"};Re.expando="ng339";var Mi=Re.cache={},Ti=1;Re._data=function(e){return this.cache[e[this.expando]]||{}};var Di=/-([a-z])/g,Ei=/^-ms-/,Li={mouseleave:"mouseout",mouseenter:"mouseover"},Ai=t("jqLite"),Ri=/^<([\w-]+)\s*\/?>(?:<\/\1>|)$/,Pi=/<|&#?\w+;/,Fi=/<([\w:-]+)/,Oi=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:-]+)[^>]*)\/>/gi,Ni={option:[1,'<select multiple="multiple">',"</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ni.optgroup=Ni.option,Ni.tbody=Ni.tfoot=Ni.colgroup=Ni.caption=Ni.thead,Ni.th=Ni.td;var Ii=e.Node.prototype.contains||function(e){return!!(16&this.compareDocumentPosition(e))},ji=Re.prototype={ready:Ke,toString:function(){var e=[];return o(this,function(t){e.push(""+t)}),"["+e.join(", ")+"]"},eq:function(e){return Zr(e>=0?this[e]:this[this.length+e])},length:0,push:ri,sort:[].sort,splice:[].splice},Yi={};o("multiple,selected,checked,disabled,readOnly,required,open".split(","),function(e){Yi[Gr(e)]=e});var zi={};o("input,select,option,textarea,button,form,details".split(","),function(e){zi[e]=!0});var Hi={ngMinlength:"minlength",ngMaxlength:"maxlength",ngMin:"min",ngMax:"max",ngPattern:"pattern",ngStep:"step"};o({data:je,removeData:Ne,hasData:De,cleanData:function(e){for(var t=0,n=e.length;t<n;t++)Ne(e[t])}},function(e,t){Re[t]=e}),o({data:je,inheritedData:We,scope:function(e){return Zr.data(e,"$scope")||We(e.parentNode||e,["$isolateScope","$scope"])},isolateScope:function(e){return Zr.data(e,"$isolateScope")||Zr.data(e,"$isolateScopeNoTemplate")},controller:Be,injector:function(e){return We(e,"$injector")},removeAttr:function(e,t){e.removeAttribute(t)},hasClass:Ye,css:function(e,t,n){if(t=ke(t),!x(n))return e.style[t];e.style[t]=n},attr:function(e,t,n){var r,i=e.nodeType;if(i!==_i&&2!==i&&i!==Ci&&e.getAttribute){var o=Gr(t),a=Yi[o];if(!x(n))return r=e.getAttribute(t),a&&null!==r&&(r=o),null===r?void 0:r;null===n||!1===n&&a?e.removeAttribute(t):e.setAttribute(t,a?o:n)}},prop:function(e,t,n){if(!x(n))return e[t];e[t]=n},text:function(){function e(e,t){if(b(t)){var n=e.nodeType;return n===wi||n===_i?e.textContent:""}e.textContent=t}return e.$dv="",e}(),val:function(e,t){if(b(t)){if(e.multiple&&"select"===j(e)){var n=[];return o(e.options,function(e){e.selected&&n.push(e.value||e.text)}),n}return e.value}e.value=t},html:function(e,t){if(b(t))return e.innerHTML;Fe(e,!0),e.innerHTML=t},empty:Ue},function(e,t){Re.prototype[t]=function(t,n){var r,i,o=this.length;if(e!==Ue&&b(2===e.length&&e!==Ye&&e!==Be?t:n)){if(w(t)){for(r=0;r<o;r++)if(e===je)e(this[r],t);else for(i in t)e(this[r],i,t[i]);return this}for(var a=e.$dv,s=b(a)?Math.min(o,1):o,l=0;l<s;l++){var u=e(this[l],t,n);a=a?a+u:u}return a}for(r=0;r<o;r++)e(this[r],t,n);return this}}),o({removeData:Ne,on:function(e,t,n,r){if(x(r))throw Ai("onargs","jqLite#on() does not support the `selector` or `eventData` parameters");if(Te(e)){var i=Ie(e,!0),o=i.events,a=i.handle;a||(a=i.handle=Ze(e,o));for(var s=t.indexOf(" ")>=0?t.split(" "):[t],l=s.length,u=function(t,r,i){var s=o[t];s||((s=o[t]=[]).specialHandlerWrapper=r,"$destroy"===t||i||e.addEventListener(t,a)),s.push(n)};l--;)t=s[l],Li[t]?(u(Li[t],et),u(t,void 0,!0)):u(t)}},off:Oe,one:function(e,t,n){(e=Zr(e)).on(t,function r(){e.off(t,n),e.off(t,r)}),e.on(t,n)},replaceWith:function(e,t){var n,r=e.parentNode;Fe(e),o(new Re(t),function(t){n?r.insertBefore(t,n.nextSibling):r.replaceChild(t,e),n=t})},children:function(e){var t=[];return o(e.childNodes,function(e){e.nodeType===wi&&t.push(e)}),t},contents:function(e){return e.contentDocument||e.childNodes||[]},append:function(e,t){var n=e.nodeType;if(n===wi||n===Si)for(var r=0,i=(t=new Re(t)).length;r<i;r++){var o=t[r];e.appendChild(o)}},prepend:function(e,t){if(e.nodeType===wi){var n=e.firstChild;o(new Re(t),function(t){e.insertBefore(t,n)})}},wrap:function(e,t){Ae(e,Zr(t).eq(0).clone()[0])},remove:Ge,detach:function(e){Ge(e,!0)},after:function(e,t){var n=e,r=e.parentNode;if(r)for(var i=0,o=(t=new Re(t)).length;i<o;i++){var a=t[i];r.insertBefore(a,n.nextSibling),n=a}},addClass:He,removeClass:ze,toggleClass:function(e,t,n){t&&o(t.split(" "),function(t){var r=n;b(r)&&(r=!Ye(e,t)),(r?He:ze)(e,t)})},parent:function(e){var t=e.parentNode;return t&&t.nodeType!==Si?t:null},next:function(e){return e.nextElementSibling},find:function(e,t){return e.getElementsByTagName?e.getElementsByTagName(t):[]},clone:Pe,triggerHandler:function(e,t,n){var r,i,a,s=t.type||t,l=Ie(e),u=l&&l.events,c=u&&u[s];c&&(r={preventDefault:function(){this.defaultPrevented=!0},isDefaultPrevented:function(){return!0===this.defaultPrevented},stopImmediatePropagation:function(){this.immediatePropagationStopped=!0},isImmediatePropagationStopped:function(){return!0===this.immediatePropagationStopped},stopPropagation:g,type:s,target:e},t.type&&(r=d(r,t)),i=xe(c),a=n?[r].concat(n):[r],o(i,function(t){r.isImmediatePropagationStopped()||t.apply(e,a)}))}},function(e,t){Re.prototype[t]=function(t,n,r){for(var i,o=0,a=this.length;o<a;o++)b(i)?x(i=e(this[o],t,n,r))&&(i=Zr(i)):Ve(i,e(this[o],t,n,r));return x(i)?i:this}}),Re.prototype.bind=Re.prototype.on,Re.prototype.unbind=Re.prototype.off;var Vi=Object.create(null);rt.prototype={_idx:function(e){return e===this._lastKey?this._lastIndex:(this._lastKey=e,this._lastIndex=this._keys.indexOf(e),this._lastIndex)},_transformKey:function(e){return ui(e)?Vi:e},get:function(e){e=this._transformKey(e);var t=this._idx(e);if(-1!==t)return this._values[t]},set:function(e,t){e=this._transformKey(e);var n=this._idx(e);-1===n&&(n=this._lastIndex=this._keys.length),this._keys[n]=e,this._values[n]=t},delete:function(e){e=this._transformKey(e);var t=this._idx(e);return-1!==t&&(this._keys.splice(t,1),this._values.splice(t,1),this._lastKey=NaN,this._lastIndex=-1,!0)}};var Bi=rt,Wi=[function(){this.$get=[function(){return Bi}]}],Ui=/^([^(]+?)=>/,Gi=/^[^(]*\(\s*([^)]*)\)/m,qi=/,/,Ki=/^\s*(_?)(\S+?)\1\s*$/,Xi=/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,Ji=t("$injector");lt.$$annotate=st;var Zi=t("$animate"),Qi=1,eo=function(){this.$get=g},to=function(){var e=new Bi,t=[];this.$get=["$$AnimateRunner","$rootScope",function(n,r){function i(e,t,n){var r=!1;return t&&o(t=C(t)?t.split(" "):ci(t)?t:[],function(t){t&&(r=!0,e[t]=n)}),r}function a(){o(t,function(t){var n=e.get(t);if(n){var r=ft(t.attr("class")),i="",a="";o(n,function(e,t){e!==!!r[t]&&(e?i+=(i.length?" ":"")+t:a+=(a.length?" ":"")+t)}),o(t,function(e){i&&He(e,i),a&&ze(e,a)}),e.delete(t)}}),t.length=0}function s(n,o,s){var l=e.get(n)||{},u=i(l,o,!0),c=i(l,s,!1);(u||c)&&(e.set(n,l),t.push(n),1===t.length&&r.$$postDigest(a))}return{enabled:g,on:g,off:g,pin:g,push:function(e,t,r,i){i&&i(),(r=r||{}).from&&e.css(r.from),r.to&&e.css(r.to),(r.addClass||r.removeClass)&&s(e,r.addClass,r.removeClass);var o=new n;return o.complete(),o}}}]},no=["$provide",function(e){var t=this,n=null;this.$$registeredAnimations=Object.create(null),this.register=function(n,r){if(n&&"."!==n.charAt(0))throw Zi("notcsel","Expecting class selector starting with '.' got '{0}'.",n);var i=n+"-animation";t.$$registeredAnimations[n.substr(1)]=i,e.factory(i,r)},this.classNameFilter=function(e){if(1===arguments.length&&(n=e instanceof RegExp?e:null)&&new RegExp("[(\\s|\\/)]ng-animate[(\\s|\\/)]").test(n.toString()))throw n=null,Zi("nongcls",'$animateProvider.classNameFilter(regex) prohibits accepting a regex value which matches/contains the "{0}" CSS class.',"ng-animate");return n},this.$get=["$$animateQueue",function(e){function t(e,t,n){if(n){var r=dt(n);!r||r.parentNode||r.previousElementSibling||(n=null)}n?n.after(e):t.prepend(e)}return{on:e.on,off:e.off,pin:e.pin,enabled:e.enabled,cancel:function(e){e.end&&e.end()},enter:function(n,r,i,o){return r=r&&Zr(r),i=i&&Zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"enter",pt(o))},move:function(n,r,i,o){return r=r&&Zr(r),i=i&&Zr(i),r=r||i.parent(),t(n,r,i),e.push(n,"move",pt(o))},leave:function(t,n){return e.push(t,"leave",pt(n),function(){t.remove()})},addClass:function(t,n,r){return r=pt(r),r.addClass=ct(r.addclass,n),e.push(t,"addClass",r)},removeClass:function(t,n,r){return r=pt(r),r.removeClass=ct(r.removeClass,n),e.push(t,"removeClass",r)},setClass:function(t,n,r,i){return i=pt(i),i.addClass=ct(i.addClass,n),i.removeClass=ct(i.removeClass,r),e.push(t,"setClass",i)},animate:function(t,n,r,i,o){return o=pt(o),o.from=o.from?d(o.from,n):n,o.to=o.to?d(o.to,r):r,i=i||"ng-inline-animate",o.tempClasses=ct(o.tempClasses,i),e.push(t,"animate",o)}}}]}],ro=function(){this.$get=["$$rAF",function(e){function t(t){n.push(t),n.length>1||e(function(){for(var e=0;e<n.length;e++)n[e]();n=[]})}var n=[];return function(){var e=!1;return t(function(){e=!0}),function(n){e?n():t(n)}}}]},io=function(){this.$get=["$q","$sniffer","$$animateAsyncRun","$$isDocumentHidden","$timeout",function(e,t,n,r,i){function a(e){this.setHost(e);var t=n(),o=function(e){i(e,0,!1)};this._doneCallbacks=[],this._tick=function(e){r()?o(e):t(e)},this._state=0}return a.chain=function(e,t){function n(){r!==e.length?e[r](function(e){!1!==e?(r++,n()):t(!1)}):t(!0)}var r=0;n()},a.all=function(e,t){function n(n){i=i&&n,++r===e.length&&t(i)}var r=0,i=!0;o(e,function(e){e.done(n)})},a.prototype={setHost:function(e){this.host=e||{}},done:function(e){2===this._state?e():this._doneCallbacks.push(e)},progress:g,getPromise:function(){if(!this.promise){var t=this;this.promise=e(function(e,n){t.done(function(t){!1===t?n():e()})})}return this.promise},then:function(e,t){return this.getPromise().then(e,t)},catch:function(e){return this.getPromise().catch(e)},finally:function(e){return this.getPromise().finally(e)},pause:function(){this.host.pause&&this.host.pause()},resume:function(){this.host.resume&&this.host.resume()},end:function(){this.host.end&&this.host.end(),this._resolve(!0)},cancel:function(){this.host.cancel&&this.host.cancel(),this._resolve(!1)},complete:function(e){var t=this;0===t._state&&(t._state=1,t._tick(function(){t._resolve(e)}))},_resolve:function(e){2!==this._state&&(o(this._doneCallbacks,function(t){t(e)}),this._doneCallbacks.length=0,this._state=2)}},a}]},oo=function(){this.$get=["$$rAF","$q","$$AnimateRunner",function(e,t,n){return function(t,r){function i(){return e(function(){o(),s||l.complete(),s=!0}),l}function o(){a.addClass&&(t.addClass(a.addClass),a.addClass=null),a.removeClass&&(t.removeClass(a.removeClass),a.removeClass=null),a.to&&(t.css(a.to),a.to=null)}var a=r||{};a.$$prepared||(a=H(a)),a.cleanupStyles&&(a.from=a.to=null),a.from&&(t.css(a.from),a.from=null);var s,l=new n;return{start:i,end:i}}}]},ao=t("$compile"),so=new yt;bt.$inject=["$provide","$$sanitizeUriProvider"],xt.prototype.isFirstChange=function(){return this.previousValue===so};var lo=/^((?:x|data)[:\-_])/i,uo=/[:\-_]+(.)/g,co=t("$controller"),fo=/^(\S+)(\s+as\s+([\w$]+))?$/,po=function(){this.$get=["$document",function(e){return function(t){return t?!t.nodeType&&t instanceof Zr&&(t=t[0]):t=e[0].body,t.offsetWidth+1}}]},ho="application/json",go={"Content-Type":ho+";charset=utf-8"},mo=/^\[|^\{(?!\{)/,vo={"[":/]$/,"{":/}$/},yo=/^\)]\}',?\n/,bo=t("$http"),xo=si.$interpolateMinErr=t("$interpolate");xo.throwNoconcat=function(e){throw xo("noconcat","Error while interpolating: {0}\nStrict Contextual Escaping disallows interpolations that concatenate multiple expressions when a trusted value is required.  See http://docs.angularjs.org/api/ng.$sce",e)},xo.interr=function(e,t){return xo("interr","Can't interpolate: {0}\n{1}",e,t.toString())};var wo=function(){this.$get=function(){function e(e){var t=function(e){t.data=e,t.called=!0};return t.id=e,t}var t=si.callbacks,n={};return{createCallback:function(r){var i="_"+(t.$$counter++).toString(36),o="angular.callbacks."+i,a=e(i);return n[o]=t[i]=a,o},wasCalled:function(e){return n[e].called},getResponse:function(e){return n[e].data},removeCallback:function(e){var r=n[e];delete t[r.id],delete n[e]}}}},_o=/^([^?#]*)(\?([^#]*))?(#(.*))?$/,Co={http:80,https:443,ftp:21},ko=t("$location"),So=/^\s*[\\/]{2,}/,$o={$$absUrl:"",$$html5:!1,$$replace:!1,absUrl:nn("$$absUrl"),url:function(e){if(b(e))return this.$$url;var t=_o.exec(e);return(t[1]||""===e)&&this.path(decodeURIComponent(t[1])),(t[2]||t[1]||""===e)&&this.search(t[3]||""),this.hash(t[5]||""),this},protocol:nn("$$protocol"),host:nn("$$host"),port:nn("$$port"),path:rn("$$path",function(e){return e=null!==e?e.toString():"","/"===e.charAt(0)?e:"/"+e}),search:function(e,t){switch(arguments.length){case 0:return this.$$search;case 1:if(C(e)||k(e))e=e.toString(),this.$$search=ne(e);else{if(!w(e))throw ko("isrcharg","The first argument of the `$location#search()` call must be a string or an object.");o(e=H(e,{}),function(t,n){null==t&&delete e[n]}),this.$$search=e}break;default:b(t)||null===t?delete this.$$search[e]:this.$$search[e]=t}return this.$$compose(),this},hash:rn("$$hash",function(e){return null!==e?e.toString():""}),replace:function(){return this.$$replace=!0,this}};o([tn,en,Qt],function(e){e.prototype=Object.create($o),e.prototype.state=function(t){if(!arguments.length)return this.$$state;if(e!==Qt||!this.$$html5)throw ko("nostate","History API state support is available only in HTML5 mode and only in browsers supporting HTML5 History API");return this.$$state=b(t)?null:t,this.$$urlUpdatedByLocation=!0,this}});var Mo=t("$parse"),To={}.constructor.prototype.valueOf,Do=ve();o("+ - * / % === !== == != < > <= >= && || ! = |".split(" "),function(e){Do[e]=!0});var Eo={n:"\n",f:"\f",r:"\r",t:"\t",v:"\v","'":"'",'"':'"'},Lo=function(e){this.options=e};Lo.prototype={constructor:Lo,lex:function(e){for(this.text=e,this.index=0,this.tokens=[];this.index<this.text.length;){var t=this.text.charAt(this.index);if('"'===t||"'"===t)this.readString(t);else if(this.isNumber(t)||"."===t&&this.isNumber(this.peek()))this.readNumber();else if(this.isIdentifierStart(this.peekMultichar()))this.readIdent();else if(this.is(t,"(){}[].,;:?"))this.tokens.push({index:this.index,text:t}),this.index++;else if(this.isWhitespace(t))this.index++;else{var n=t+this.peek(),r=n+this.peek(2),i=Do[t],o=Do[n],a=Do[r];if(i||o||a){var s=a?r:o?n:t;this.tokens.push({index:this.index,text:s,operator:!0}),this.index+=s.length}else this.throwError("Unexpected next character ",this.index,this.index+1)}}return this.tokens},is:function(e,t){return-1!==t.indexOf(e)},peek:function(e){var t=e||1;return this.index+t<this.text.length&&this.text.charAt(this.index+t)},isNumber:function(e){return"0"<=e&&e<="9"&&"string"==typeof e},isWhitespace:function(e){return" "===e||"\r"===e||"\t"===e||"\n"===e||"\v"===e||" "===e},isIdentifierStart:function(e){return this.options.isIdentifierStart?this.options.isIdentifierStart(e,this.codePointAt(e)):this.isValidIdentifierStart(e)},isValidIdentifierStart:function(e){return"a"<=e&&e<="z"||"A"<=e&&e<="Z"||"_"===e||"$"===e},isIdentifierContinue:function(e){return this.options.isIdentifierContinue?this.options.isIdentifierContinue(e,this.codePointAt(e)):this.isValidIdentifierContinue(e)},isValidIdentifierContinue:function(e,t){return this.isValidIdentifierStart(e,t)||this.isNumber(e)},codePointAt:function(e){return 1===e.length?e.charCodeAt(0):(e.charCodeAt(0)<<10)+e.charCodeAt(1)-56613888},peekMultichar:function(){var e=this.text.charAt(this.index),t=this.peek();if(!t)return e;var n=e.charCodeAt(0),r=t.charCodeAt(0);return n>=55296&&n<=56319&&r>=56320&&r<=57343?e+t:e},isExpOperator:function(e){return"-"===e||"+"===e||this.isNumber(e)},throwError:function(e,t,n){n=n||this.index;var r=x(t)?"s "+t+"-"+this.index+" ["+this.text.substring(t,n)+"]":" "+n;throw Mo("lexerr","Lexer Error: {0} at column{1} in expression [{2}].",e,r,this.text)},readNumber:function(){for(var e="",t=this.index;this.index<this.text.length;){var n=Gr(this.text.charAt(this.index));if("."===n||this.isNumber(n))e+=n;else{var r=this.peek();if("e"===n&&this.isExpOperator(r))e+=n;else if(this.isExpOperator(n)&&r&&this.isNumber(r)&&"e"===e.charAt(e.length-1))e+=n;else{if(!this.isExpOperator(n)||r&&this.isNumber(r)||"e"!==e.charAt(e.length-1))break;this.throwError("Invalid exponent")}}this.index++}this.tokens.push({index:t,text:e,constant:!0,value:Number(e)})},readIdent:function(){var e=this.index;for(this.index+=this.peekMultichar().length;this.index<this.text.length;){var t=this.peekMultichar();if(!this.isIdentifierContinue(t))break;this.index+=t.length}this.tokens.push({index:e,text:this.text.slice(e,this.index),identifier:!0})},readString:function(e){var t=this.index;this.index++;for(var n="",r=e,i=!1;this.index<this.text.length;){var o=this.text.charAt(this.index);if(r+=o,i){if("u"===o){var a=this.text.substring(this.index+1,this.index+5);a.match(/[\da-f]{4}/i)||this.throwError("Invalid unicode escape [\\u"+a+"]"),this.index+=4,n+=String.fromCharCode(parseInt(a,16))}else n+=Eo[o]||o;i=!1}else if("\\"===o)i=!0;else{if(o===e)return this.index++,void this.tokens.push({index:t,text:r,constant:!0,value:n});n+=o}this.index++}this.throwError("Unterminated quote",t)}};var Ao=function(e,t){this.lexer=e,this.options=t};Ao.Program="Program",Ao.ExpressionStatement="ExpressionStatement",Ao.AssignmentExpression="AssignmentExpression",Ao.ConditionalExpression="ConditionalExpression",Ao.LogicalExpression="LogicalExpression",Ao.BinaryExpression="BinaryExpression",Ao.UnaryExpression="UnaryExpression",Ao.CallExpression="CallExpression",Ao.MemberExpression="MemberExpression",Ao.Identifier="Identifier",Ao.Literal="Literal",Ao.ArrayExpression="ArrayExpression",Ao.Property="Property",Ao.ObjectExpression="ObjectExpression",Ao.ThisExpression="ThisExpression",Ao.LocalsExpression="LocalsExpression",Ao.NGValueParameter="NGValueParameter",Ao.prototype={ast:function(e){this.text=e,this.tokens=this.lexer.lex(e);var t=this.program();return 0!==this.tokens.length&&this.throwError("is an unexpected token",this.tokens[0]),t},program:function(){for(var e=[];;)if(this.tokens.length>0&&!this.peek("}",")",";","]")&&e.push(this.expressionStatement()),!this.expect(";"))return{type:Ao.Program,body:e}},expressionStatement:function(){return{type:Ao.ExpressionStatement,expression:this.filterChain()}},filterChain:function(){for(var e=this.expression();this.expect("|");)e=this.filter(e);return e},expression:function(){return this.assignment()},assignment:function(){var e=this.ternary();if(this.expect("=")){if(!pn(e))throw Mo("lval","Trying to assign a value to a non l-value");e={type:Ao.AssignmentExpression,left:e,right:this.assignment(),operator:"="}}return e},ternary:function(){var e,t,n=this.logicalOR();return this.expect("?")&&(e=this.expression(),this.consume(":"))?(t=this.expression(),{type:Ao.ConditionalExpression,test:n,alternate:e,consequent:t}):n},logicalOR:function(){for(var e=this.logicalAND();this.expect("||");)e={type:Ao.LogicalExpression,operator:"||",left:e,right:this.logicalAND()};return e},logicalAND:function(){for(var e=this.equality();this.expect("&&");)e={type:Ao.LogicalExpression,operator:"&&",left:e,right:this.equality()};return e},equality:function(){for(var e,t=this.relational();e=this.expect("==","!=","===","!==");)t={type:Ao.BinaryExpression,operator:e.text,left:t,right:this.relational()};return t},relational:function(){for(var e,t=this.additive();e=this.expect("<",">","<=",">=");)t={type:Ao.BinaryExpression,operator:e.text,left:t,right:this.additive()};return t},additive:function(){for(var e,t=this.multiplicative();e=this.expect("+","-");)t={type:Ao.BinaryExpression,operator:e.text,left:t,right:this.multiplicative()};return t},multiplicative:function(){for(var e,t=this.unary();e=this.expect("*","/","%");)t={type:Ao.BinaryExpression,operator:e.text,left:t,right:this.unary()};return t},unary:function(){var e;return(e=this.expect("+","-","!"))?{type:Ao.UnaryExpression,operator:e.text,prefix:!0,argument:this.unary()}:this.primary()},primary:function(){var e;this.expect("(")?(e=this.filterChain(),this.consume(")")):this.expect("[")?e=this.arrayDeclaration():this.expect("{")?e=this.object():this.selfReferential.hasOwnProperty(this.peek().text)?e=H(this.selfReferential[this.consume().text]):this.options.literals.hasOwnProperty(this.peek().text)?e={type:Ao.Literal,value:this.options.literals[this.consume().text]}:this.peek().identifier?e=this.identifier():this.peek().constant?e=this.constant():this.throwError("not a primary expression",this.peek());for(var t;t=this.expect("(","[",".");)"("===t.text?(e={type:Ao.CallExpression,callee:e,arguments:this.parseArguments()},this.consume(")")):"["===t.text?(e={type:Ao.MemberExpression,object:e,property:this.expression(),computed:!0},this.consume("]")):"."===t.text?e={type:Ao.MemberExpression,object:e,property:this.identifier(),computed:!1}:this.throwError("IMPOSSIBLE");return e},filter:function(e){for(var t=[e],n={type:Ao.CallExpression,callee:this.identifier(),arguments:t,filter:!0};this.expect(":");)t.push(this.expression());return n},parseArguments:function(){var e=[];if(")"!==this.peekToken().text)do{e.push(this.filterChain())}while(this.expect(","));return e},identifier:function(){var e=this.consume();return e.identifier||this.throwError("is not a valid identifier",e),{type:Ao.Identifier,name:e.text}},constant:function(){return{type:Ao.Literal,value:this.consume().value}},arrayDeclaration:function(){var e=[];if("]"!==this.peekToken().text)do{if(this.peek("]"))break;e.push(this.expression())}while(this.expect(","));return this.consume("]"),{type:Ao.ArrayExpression,elements:e}},object:function(){var e,t=[];if("}"!==this.peekToken().text)do{if(this.peek("}"))break;e={type:Ao.Property,kind:"init"},this.peek().constant?(e.key=this.constant(),e.computed=!1,this.consume(":"),e.value=this.expression()):this.peek().identifier?(e.key=this.identifier(),e.computed=!1,this.peek(":")?(this.consume(":"),e.value=this.expression()):e.value=e.key):this.peek("[")?(this.consume("["),e.key=this.expression(),this.consume("]"),e.computed=!0,this.consume(":"),e.value=this.expression()):this.throwError("invalid key",this.peek()),t.push(e)}while(this.expect(","));return this.consume("}"),{type:Ao.ObjectExpression,properties:t}},throwError:function(e,t){throw Mo("syntax","Syntax Error: Token '{0}' {1} at column {2} of the expression [{3}] starting at [{4}].",t.text,e,t.index+1,this.text,this.text.substring(t.index))},consume:function(e){if(0===this.tokens.length)throw Mo("ueoe","Unexpected end of expression: {0}",this.text);var t=this.expect(e);return t||this.throwError("is unexpected, expecting ["+e+"]",this.peek()),t},peekToken:function(){if(0===this.tokens.length)throw Mo("ueoe","Unexpected end of expression: {0}",this.text);return this.tokens[0]},peek:function(e,t,n,r){return this.peekAhead(0,e,t,n,r)},peekAhead:function(e,t,n,r,i){if(this.tokens.length>e){var o=this.tokens[e],a=o.text;if(a===t||a===n||a===r||a===i||!t&&!n&&!r&&!i)return o}return!1},expect:function(e,t,n,r){var i=this.peek(e,t,n,r);return!!i&&(this.tokens.shift(),i)},selfReferential:{this:{type:Ao.ThisExpression},$locals:{type:Ao.LocalsExpression}}},vn.prototype={compile:function(e){var t=this;this.state={nextId:0,filters:{},fn:{vars:[],body:[],own:{}},assign:{vars:[],body:[],own:{}},inputs:[]},dn(e,t.$filter);var n,r="";if(this.stage="assign",n=hn(e)){this.state.computing="assign";var i=this.nextId();this.recurse(n,i),this.return_(i),r="fn.assign="+this.generateFunction("assign","s,v,l")}var a=fn(e.body);t.stage="inputs",o(a,function(e,n){var r="fn"+n;t.state[r]={vars:[],body:[],own:{}},t.state.computing=r;var i=t.nextId();t.recurse(e,i),t.return_(i),t.state.inputs.push(r),e.watchId=n}),this.state.computing="fn",this.stage="main",this.recurse(e);var s='"'+this.USE+" "+this.STRICT+'";\n'+this.filterPrefix()+"var fn="+this.generateFunction("fn","s,l,a,i")+r+this.watchFns()+"return fn;",l=new Function("$filter","getStringValue","ifDefined","plus",s)(this.$filter,sn,ln,un);return this.state=this.stage=void 0,l},USE:"use",STRICT:"strict",watchFns:function(){var e=[],t=this.state.inputs,n=this;return o(t,function(t){e.push("var "+t+"="+n.generateFunction(t,"s"))}),t.length&&e.push("fn.inputs=["+t.join(",")+"];"),e.join("")},generateFunction:function(e,t){return"function("+t+"){"+this.varsPrefix(e)+this.body(e)+"};"},filterPrefix:function(){var e=[],t=this;return o(this.state.filters,function(n,r){e.push(n+"=$filter("+t.escape(r)+")")}),e.length?"var "+e.join(",")+";":""},varsPrefix:function(e){return this.state[e].vars.length?"var "+this.state[e].vars.join(",")+";":""},body:function(e){return this.state[e].body.join("")},recurse:function(e,t,n,r,i,a){var s,l,u,c,d,f=this;if(r=r||g,!a&&x(e.watchId))return t=t||this.nextId(),void this.if_("i",this.lazyAssign(t,this.computedMember("i",e.watchId)),this.lazyRecurse(e,t,n,r,i,!0));switch(e.type){case Ao.Program:o(e.body,function(t,n){f.recurse(t.expression,void 0,void 0,function(e){l=e}),n!==e.body.length-1?f.current().body.push(l,";"):f.return_(l)});break;case Ao.Literal:c=this.escape(e.value),this.assign(t,c),r(t||c);break;case Ao.UnaryExpression:this.recurse(e.argument,void 0,void 0,function(e){l=e}),c=e.operator+"("+this.ifDefined(l,0)+")",this.assign(t,c),r(c);break;case Ao.BinaryExpression:this.recurse(e.left,void 0,void 0,function(e){s=e}),this.recurse(e.right,void 0,void 0,function(e){l=e}),c="+"===e.operator?this.plus(s,l):"-"===e.operator?this.ifDefined(s,0)+e.operator+this.ifDefined(l,0):"("+s+")"+e.operator+"("+l+")",this.assign(t,c),r(c);break;case Ao.LogicalExpression:t=t||this.nextId(),f.recurse(e.left,t),f.if_("&&"===e.operator?t:f.not(t),f.lazyRecurse(e.right,t)),r(t);break;case Ao.ConditionalExpression:t=t||this.nextId(),f.recurse(e.test,t),f.if_(t,f.lazyRecurse(e.alternate,t),f.lazyRecurse(e.consequent,t)),r(t);break;case Ao.Identifier:t=t||this.nextId(),n&&(n.context="inputs"===f.stage?"s":this.assign(this.nextId(),this.getHasOwnProperty("l",e.name)+"?l:s"),n.computed=!1,n.name=e.name),f.if_("inputs"===f.stage||f.not(f.getHasOwnProperty("l",e.name)),function(){f.if_("inputs"===f.stage||"s",function(){i&&1!==i&&f.if_(f.isNull(f.nonComputedMember("s",e.name)),f.lazyAssign(f.nonComputedMember("s",e.name),"{}")),f.assign(t,f.nonComputedMember("s",e.name))})},t&&f.lazyAssign(t,f.nonComputedMember("l",e.name))),r(t);break;case Ao.MemberExpression:s=n&&(n.context=this.nextId())||this.nextId(),t=t||this.nextId(),f.recurse(e.object,s,void 0,function(){f.if_(f.notNull(s),function(){e.computed?(l=f.nextId(),f.recurse(e.property,l),f.getStringValue(l),i&&1!==i&&f.if_(f.not(f.computedMember(s,l)),f.lazyAssign(f.computedMember(s,l),"{}")),c=f.computedMember(s,l),f.assign(t,c),n&&(n.computed=!0,n.name=l)):(i&&1!==i&&f.if_(f.isNull(f.nonComputedMember(s,e.property.name)),f.lazyAssign(f.nonComputedMember(s,e.property.name),"{}")),c=f.nonComputedMember(s,e.property.name),f.assign(t,c),n&&(n.computed=!1,n.name=e.property.name))},function(){f.assign(t,"undefined")}),r(t)},!!i);break;case Ao.CallExpression:t=t||this.nextId(),e.filter?(l=f.filter(e.callee.name),u=[],o(e.arguments,function(e){var t=f.nextId();f.recurse(e,t),u.push(t)}),c=l+"("+u.join(",")+")",f.assign(t,c),r(t)):(l=f.nextId(),s={},u=[],f.recurse(e.callee,l,s,function(){f.if_(f.notNull(l),function(){o(e.arguments,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),c=s.name?f.member(s.context,s.name,s.computed)+"("+u.join(",")+")":l+"("+u.join(",")+")",f.assign(t,c)},function(){f.assign(t,"undefined")}),r(t)}));break;case Ao.AssignmentExpression:l=this.nextId(),s={},this.recurse(e.left,void 0,s,function(){f.if_(f.notNull(s.context),function(){f.recurse(e.right,l),c=f.member(s.context,s.name,s.computed)+e.operator+l,f.assign(t,c),r(t||c)})},1);break;case Ao.ArrayExpression:u=[],o(e.elements,function(t){f.recurse(t,e.constant?void 0:f.nextId(),void 0,function(e){u.push(e)})}),c="["+u.join(",")+"]",this.assign(t,c),r(t||c);break;case Ao.ObjectExpression:u=[],d=!1,o(e.properties,function(e){e.computed&&(d=!0)}),d?(t=t||this.nextId(),this.assign(t,"{}"),o(e.properties,function(e){e.computed?(s=f.nextId(),f.recurse(e.key,s)):s=e.key.type===Ao.Identifier?e.key.name:""+e.key.value,l=f.nextId(),f.recurse(e.value,l),f.assign(f.member(t,s,e.computed),l)})):(o(e.properties,function(t){f.recurse(t.value,e.constant?void 0:f.nextId(),void 0,function(e){u.push(f.escape(t.key.type===Ao.Identifier?t.key.name:""+t.key.value)+":"+e)})}),c="{"+u.join(",")+"}",this.assign(t,c)),r(t||c);break;case Ao.ThisExpression:this.assign(t,"s"),r(t||"s");break;case Ao.LocalsExpression:this.assign(t,"l"),r(t||"l");break;case Ao.NGValueParameter:this.assign(t,"v"),r(t||"v")}},getHasOwnProperty:function(e,t){var n=e+"."+t,r=this.current().own;return r.hasOwnProperty(n)||(r[n]=this.nextId(!1,e+"&&("+this.escape(t)+" in "+e+")")),r[n]},assign:function(e,t){if(e)return this.current().body.push(e,"=",t,";"),e},filter:function(e){return this.state.filters.hasOwnProperty(e)||(this.state.filters[e]=this.nextId(!0)),this.state.filters[e]},ifDefined:function(e,t){return"ifDefined("+e+","+this.escape(t)+")"},plus:function(e,t){return"plus("+e+","+t+")"},return_:function(e){this.current().body.push("return ",e,";")},if_:function(e,t,n){if(!0===e)t();else{var r=this.current().body;r.push("if(",e,"){"),t(),r.push("}"),n&&(r.push("else{"),n(),r.push("}"))}},not:function(e){return"!("+e+")"},isNull:function(e){return e+"==null"},notNull:function(e){return e+"!=null"},nonComputedMember:function(e,t){var n=/[^$_a-zA-Z0-9]/g;return/^[$_a-zA-Z][$_a-zA-Z0-9]*$/.test(t)?e+"."+t:e+'["'+t.replace(n,this.stringEscapeFn)+'"]'},computedMember:function(e,t){return e+"["+t+"]"},member:function(e,t,n){return n?this.computedMember(e,t):this.nonComputedMember(e,t)},getStringValue:function(e){this.assign(e,"getStringValue("+e+")")},lazyRecurse:function(e,t,n,r,i,o){var a=this;return function(){a.recurse(e,t,n,r,i,o)}},lazyAssign:function(e,t){var n=this;return function(){n.assign(e,t)}},stringEscapeRegex:/[^ a-zA-Z0-9]/g,stringEscapeFn:function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)},escape:function(e){if(C(e))return"'"+e.replace(this.stringEscapeRegex,this.stringEscapeFn)+"'";if(k(e))return e.toString();if(!0===e)return"true";if(!1===e)return"false";if(null===e)return"null";if(void 0===e)return"undefined";throw Mo("esc","IMPOSSIBLE")},nextId:function(e,t){var n="v"+this.state.nextId++;return e||this.current().vars.push(n+(t?"="+t:"")),n},current:function(){return this.state[this.state.computing]}},yn.prototype={compile:function(e){var t=this;dn(e,t.$filter);var n,r;(n=hn(e))&&(r=this.recurse(n));var i,a=fn(e.body);a&&(i=[],o(a,function(e,n){var r=t.recurse(e);e.input=r,i.push(r),e.watchId=n}));var s=[];o(e.body,function(e){s.push(t.recurse(e.expression))});var l=0===e.body.length?g:1===e.body.length?s[0]:function(e,t){var n;return o(s,function(r){n=r(e,t)}),n};return r&&(l.assign=function(e,t,n){return r(e,n,t)}),i&&(l.inputs=i),l},recurse:function(e,t,n){var r,i,a,s=this;if(e.input)return this.inputs(e.input,e.watchId);switch(e.type){case Ao.Literal:return this.value(e.value,t);case Ao.UnaryExpression:return i=this.recurse(e.argument),this["unary"+e.operator](i,t);case Ao.BinaryExpression:case Ao.LogicalExpression:return r=this.recurse(e.left),i=this.recurse(e.right),this["binary"+e.operator](r,i,t);case Ao.ConditionalExpression:return this["ternary?:"](this.recurse(e.test),this.recurse(e.alternate),this.recurse(e.consequent),t);case Ao.Identifier:return s.identifier(e.name,t,n);case Ao.MemberExpression:return r=this.recurse(e.object,!1,!!n),e.computed||(i=e.property.name),e.computed&&(i=this.recurse(e.property)),e.computed?this.computedMember(r,i,t,n):this.nonComputedMember(r,i,t,n);case Ao.CallExpression:return a=[],o(e.arguments,function(e){a.push(s.recurse(e))}),e.filter&&(i=this.$filter(e.callee.name)),e.filter||(i=this.recurse(e.callee,!0)),e.filter?function(e,n,r,o){for(var s=[],l=0;l<a.length;++l)s.push(a[l](e,n,r,o));var u=i.apply(void 0,s,o);return t?{context:void 0,name:void 0,value:u}:u}:function(e,n,r,o){var s,l=i(e,n,r,o);if(null!=l.value){for(var u=[],c=0;c<a.length;++c)u.push(a[c](e,n,r,o));s=l.value.apply(l.context,u)}return t?{value:s}:s};case Ao.AssignmentExpression:return r=this.recurse(e.left,!0,1),i=this.recurse(e.right),function(e,n,o,a){var s=r(e,n,o,a),l=i(e,n,o,a);return s.context[s.name]=l,t?{value:l}:l};case Ao.ArrayExpression:return a=[],o(e.elements,function(e){a.push(s.recurse(e))}),function(e,n,r,i){for(var o=[],s=0;s<a.length;++s)o.push(a[s](e,n,r,i));return t?{value:o}:o};case Ao.ObjectExpression:return a=[],o(e.properties,function(e){e.computed?a.push({key:s.recurse(e.key),computed:!0,value:s.recurse(e.value)}):a.push({key:e.key.type===Ao.Identifier?e.key.name:""+e.key.value,computed:!1,value:s.recurse(e.value)})}),function(e,n,r,i){for(var o={},s=0;s<a.length;++s)a[s].computed?o[a[s].key(e,n,r,i)]=a[s].value(e,n,r,i):o[a[s].key]=a[s].value(e,n,r,i);return t?{value:o}:o};case Ao.ThisExpression:return function(e){return t?{value:e}:e};case Ao.LocalsExpression:return function(e,n){return t?{value:n}:n};case Ao.NGValueParameter:return function(e,n,r){return t?{value:r}:r}}},"unary+":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=x(a)?+a:0,t?{value:a}:a}},"unary-":function(e,t){return function(n,r,i,o){var a=e(n,r,i,o);return a=x(a)?-a:-0,t?{value:a}:a}},"unary!":function(e,t){return function(n,r,i,o){var a=!e(n,r,i,o);return t?{value:a}:a}},"binary+":function(e,t,n){return function(r,i,o,a){var s=un(e(r,i,o,a),t(r,i,o,a));return n?{value:s}:s}},"binary-":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a),l=t(r,i,o,a),u=(x(s)?s:0)-(x(l)?l:0);return n?{value:u}:u}},"binary*":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)*t(r,i,o,a);return n?{value:s}:s}},"binary/":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)/t(r,i,o,a);return n?{value:s}:s}},"binary%":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)%t(r,i,o,a);return n?{value:s}:s}},"binary===":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)===t(r,i,o,a);return n?{value:s}:s}},"binary!==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!==t(r,i,o,a);return n?{value:s}:s}},"binary==":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)==t(r,i,o,a);return n?{value:s}:s}},"binary!=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)!=t(r,i,o,a);return n?{value:s}:s}},"binary<":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<t(r,i,o,a);return n?{value:s}:s}},"binary>":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>t(r,i,o,a);return n?{value:s}:s}},"binary<=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)<=t(r,i,o,a);return n?{value:s}:s}},"binary>=":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)>=t(r,i,o,a);return n?{value:s}:s}},"binary&&":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)&&t(r,i,o,a);return n?{value:s}:s}},"binary||":function(e,t,n){return function(r,i,o,a){var s=e(r,i,o,a)||t(r,i,o,a);return n?{value:s}:s}},"ternary?:":function(e,t,n,r){return function(i,o,a,s){var l=e(i,o,a,s)?t(i,o,a,s):n(i,o,a,s);return r?{value:l}:l}},value:function(e,t){return function(){return t?{context:void 0,name:void 0,value:e}:e}},identifier:function(e,t,n){return function(r,i,o,a){var s=i&&e in i?i:r;n&&1!==n&&s&&null==s[e]&&(s[e]={});var l=s?s[e]:void 0;return t?{context:s,name:e,value:l}:l}},computedMember:function(e,t,n,r){return function(i,o,a,s){var l,u,c=e(i,o,a,s);return null!=c&&(l=sn(l=t(i,o,a,s)),r&&1!==r&&c&&!c[l]&&(c[l]={}),u=c[l]),n?{context:c,name:l,value:u}:u}},nonComputedMember:function(e,t,n,r){return function(i,o,a,s){var l=e(i,o,a,s);r&&1!==r&&l&&null==l[t]&&(l[t]={});var u=null!=l?l[t]:void 0;return n?{context:l,name:t,value:u}:u}},inputs:function(e,t){return function(n,r,i,o){return o?o[t]:e(n,r,i)}}},bn.prototype={constructor:bn,parse:function(e){var t=this.ast.ast(e),n=this.astCompiler.compile(t);return n.literal=gn(t),n.constant=mn(t),n}};var Ro=t("$sce"),Po={HTML:"html",CSS:"css",URL:"url",RESOURCE_URL:"resourceUrl",JS:"js"},Fo=/_([a-z])/g,Oo=t("$compile"),No=e.document.createElement("a"),Io=On(e.location.href);jn.$inject=["$document"],zn.$inject=["$provide"];var jo=22,Yo=".",zo="0";Un.$inject=["$locale"],Gn.$inject=["$locale"];var Ho={yyyy:Zn("FullYear",4,0,!1,!0),yy:Zn("FullYear",2,0,!0,!0),y:Zn("FullYear",1,0,!1,!0),MMMM:Qn("Month"),MMM:Qn("Month",!0),MM:Zn("Month",2,1),M:Zn("Month",1,1),LLLL:Qn("Month",!1,!0),dd:Zn("Date",2),d:Zn("Date",1),HH:Zn("Hours",2),H:Zn("Hours",1),hh:Zn("Hours",2,-12),h:Zn("Hours",1,-12),mm:Zn("Minutes",2),m:Zn("Minutes",1),ss:Zn("Seconds",2),s:Zn("Seconds",1),sss:Zn("Milliseconds",3),EEEE:Qn("Day"),EEE:Qn("Day",!0),a:ir,Z:er,ww:rr(2),w:rr(1),G:or,GG:or,GGG:or,GGGG:ar},Vo=/((?:[^yMLdHhmsaZEwG']+)|(?:'(?:[^']|'')*')|(?:E+|y+|M+|L+|d+|H+|h+|m+|s+|a|Z|G+|w+))([\s\S]*)/,Bo=/^-?\d+$/;sr.$inject=["$locale"];var Wo=v(Gr),Uo=v(qr);dr.$inject=["$parse"];var Go=v({restrict:"E",compile:function(e,t){if(!t.href&&!t.xlinkHref)return function(e,t){if("a"===t[0].nodeName.toLowerCase()){var n="[object SVGAnimatedString]"===ii.call(t.prop("href"))?"xlink:href":"href";t.on("click",function(e){t.attr(n)||e.preventDefault()})}}}}),qo={};o(Yi,function(e,t){function n(e,n,i){e.$watch(i[r],function(e){i.$set(t,!!e)})}if("multiple"!==e){var r=wt("ng-"+t),i=n;"checked"===e&&(i=function(e,t,i){i.ngModel!==i[r]&&n(e,t,i)}),qo[r]=function(){return{restrict:"A",priority:100,link:i}}}}),o(Hi,function(e,t){qo[t]=function(){return{priority:100,link:function(e,n,r){if("ngPattern"===t&&"/"===r.ngPattern.charAt(0)){var i=r.ngPattern.match(Vr);if(i)return void r.$set("ngPattern",new RegExp(i[1],i[2]))}e.$watch(r[t],function(e){r.$set(t,e)})}}}}),o(["src","srcset","href"],function(e){var t=wt("ng-"+e);qo[t]=function(){return{priority:99,link:function(n,r,i){var o=e,a=e;"href"===e&&"[object SVGAnimatedString]"===ii.call(r.prop("href"))&&(a="xlinkHref",i.$attr[a]="xlink:href",o=null),i.$observe(t,function(t){t?(i.$set(a,t),Jr&&o&&r.prop(o,i[a])):"href"===e&&i.$set(a,null)})}}}});var Ko={$addControl:g,$$renameControl:pr,$removeControl:g,$setValidity:g,$setDirty:g,$setPristine:g,$setSubmitted:g},Xo="ng-pending";hr.$inject=["$element","$attrs","$scope","$animate","$interpolate"],hr.prototype={$rollbackViewValue:function(){o(this.$$controls,function(e){e.$rollbackViewValue()})},$commitViewValue:function(){o(this.$$controls,function(e){e.$commitViewValue()})},$addControl:function(e){he(e.$name,"input"),this.$$controls.push(e),e.$name&&(this[e.$name]=e),e.$$parentForm=this},$$renameControl:function(e,t){var n=e.$name;this[n]===e&&delete this[n],this[t]=e,e.$name=t},$removeControl:function(e){e.$name&&this[e.$name]===e&&delete this[e.$name],o(this.$pending,function(t,n){this.$setValidity(n,null,e)},this),o(this.$error,function(t,n){this.$setValidity(n,null,e)},this),o(this.$$success,function(t,n){this.$setValidity(n,null,e)},this),z(this.$$controls,e),e.$$parentForm=Ko},$setDirty:function(){this.$$animate.removeClass(this.$$element,Ra),this.$$animate.addClass(this.$$element,Pa),this.$dirty=!0,this.$pristine=!1,this.$$parentForm.$setDirty()},$setPristine:function(){this.$$animate.setClass(this.$$element,Ra,Pa+" ng-submitted"),this.$dirty=!1,this.$pristine=!0,this.$submitted=!1,o(this.$$controls,function(e){e.$setPristine()})},$setUntouched:function(){o(this.$$controls,function(e){e.$setUntouched()})},$setSubmitted:function(){this.$$animate.addClass(this.$$element,"ng-submitted"),this.$submitted=!0,this.$$parentForm.$setSubmitted()}},mr({clazz:hr,set:function(e,t,n){var r=e[t];r?-1===r.indexOf(n)&&r.push(n):e[t]=[n]},unset:function(e,t,n){var r=e[t];r&&(z(r,n),0===r.length&&delete e[t])}});var Jo=function(e){return["$timeout","$parse",function(t,n){function r(e){return""===e?n('this[""]').assign:n(e).assign||g}return{name:"form",restrict:e?"EAC":"E",require:["form","^^?form"],controller:hr,compile:function(n,i){n.addClass(Ra).addClass(La);var o=i.name?"name":!(!e||!i.ngForm)&&"ngForm";return{pre:function(e,n,i,a){var s=a[0];if(!("action"in i)){var l=function(t){e.$apply(function(){s.$commitViewValue(),s.$setSubmitted()}),t.preventDefault()};n[0].addEventListener("submit",l),n.on("$destroy",function(){t(function(){n[0].removeEventListener("submit",l)},0,!1)})}(a[1]||s.$$parentForm).$addControl(s);var u=o?r(s.$name):g;o&&(u(e,s),i.$observe(o,function(t){s.$name!==t&&(u(e,void 0),s.$$parentForm.$$renameControl(s,t),(u=r(s.$name))(e,s))})),n.on("$destroy",function(){s.$$parentForm.$removeControl(s),u(e,void 0),d(s,Ko)})}}}}}]},Zo=Jo(),Qo=Jo(!0),ea=/^\d{4,}-[01]\d-[0-3]\dT[0-2]\d:[0-5]\d:[0-5]\d\.\d+(?:[+-][0-2]\d:[0-5]\d|Z)$/,ta=/^[a-z][a-z\d.+-]*:\/*(?:[^:@]+(?::[^@]+)?@)?(?:[^\s:/?#]+|\[[a-f\d:]+])(?::\d+)?(?:\/[^?#]*)?(?:\?[^#]*)?(?:#.*)?$/i,na=/^(?=.{1,254}$)(?=.{1,64}@)[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+(\.[-!#$%&'*+/0-9=?A-Z^_`a-z{|}~]+)*@[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?(\.[A-Za-z0-9]([A-Za-z0-9-]{0,61}[A-Za-z0-9])?)*$/,ra=/^\s*(-|\+)?(\d+|(\d*(\.\d*)))([eE][+-]?\d+)?\s*$/,ia=/^(\d{4,})-(\d{2})-(\d{2})$/,oa=/^(\d{4,})-(\d\d)-(\d\d)T(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,aa=/^(\d{4,})-W(\d\d)$/,sa=/^(\d{4,})-(\d\d)$/,la=/^(\d\d):(\d\d)(?::(\d\d)(\.\d{1,3})?)?$/,ua="keydown wheel mousedown",ca=ve();o("date,datetime-local,month,time,week".split(","),function(e){ca[e]=!0});var da={text:br,date:Cr("date",ia,_r(ia,["yyyy","MM","dd"]),"yyyy-MM-dd"),"datetime-local":Cr("datetimelocal",oa,_r(oa,["yyyy","MM","dd","HH","mm","ss","sss"]),"yyyy-MM-ddTHH:mm:ss.sss"),time:Cr("time",la,_r(la,["HH","mm","ss","sss"]),"HH:mm:ss.sss"),week:Cr("week",aa,wr,"yyyy-Www"),month:Cr("month",sa,_r(sa,["yyyy","MM"]),"yyyy-MM"),number:Er,url:Ar,email:Rr,radio:Pr,range:Lr,checkbox:Or,hidden:g,button:g,submit:g,reset:g,file:g},fa=["$browser","$sniffer","$filter","$parse",function(e,t,n,r){return{restrict:"E",require:["?ngModel"],link:{pre:function(i,o,a,s){s[0]&&(da[Gr(a.type)]||da.text)(i,o,a,s[0],t,e,n,r)}}}}],pa=/^(true|false|\d+)$/,ha=function(){function e(e,t,n){var r=x(n)?n:9===Jr?"":null;e.prop("value",r),t.$set("value",n)}return{restrict:"A",priority:100,compile:function(t,n){return pa.test(n.ngValue)?function(t,n,r){e(n,r,t.$eval(r.ngValue))}:function(t,n,r){t.$watch(r.ngValue,function(t){e(n,r,t)})}}}},ga=["$compile",function(e){return{restrict:"AC",compile:function(t){return e.$$addBindingClass(t),function(t,n,r){e.$$addBindingInfo(n,r.ngBind),n=n[0],t.$watch(r.ngBind,function(e){n.textContent=ye(e)})}}}}],ma=["$interpolate","$compile",function(e,t){return{compile:function(n){return t.$$addBindingClass(n),function(n,r,i){var o=e(r.attr(i.$attr.ngBindTemplate));t.$$addBindingInfo(r,o.expressions),r=r[0],i.$observe("ngBindTemplate",function(e){r.textContent=b(e)?"":e})}}}}],va=["$sce","$parse","$compile",function(e,t,n){return{restrict:"A",compile:function(r,i){var o=t(i.ngBindHtml),a=t(i.ngBindHtml,function(t){return e.valueOf(t)});return n.$$addBindingClass(r),function(t,r,i){n.$$addBindingInfo(r,i.ngBindHtml),t.$watch(a,function(){var n=o(t);r.html(e.getTrustedHtml(n)||"")})}}}}],ya=v({restrict:"A",require:"ngModel",link:function(e,t,n,r){r.$viewChangeListeners.push(function(){e.$eval(n.ngChange)})}}),ba=Nr("",!0),xa=Nr("Odd",0),wa=Nr("Even",1),_a=fr({compile:function(e,t){t.$set("ngCloak",void 0),e.removeClass("ng-cloak")}}),Ca=[function(){return{restrict:"A",scope:!0,controller:"@",priority:500}}],ka={},Sa={blur:!0,focus:!0};o("click dblclick mousedown mouseup mouseover mouseout mousemove mouseenter mouseleave keydown keyup keypress submit focus blur copy cut paste".split(" "),function(e){var t=wt("ng-"+e);ka[t]=["$parse","$rootScope",function(n,r){return{restrict:"A",compile:function(i,o){var a=n(o[t]);return function(t,n){n.on(e,function(n){var i=function(){a(t,{$event:n})};Sa[e]&&r.$$phase?t.$evalAsync(i):t.$apply(i)})}}}}]});var $a=["$animate","$compile",function(e,t){return{multiElement:!0,transclude:"element",priority:600,terminal:!0,restrict:"A",$$tlb:!0,link:function(n,r,i,o,a){var s,l,u;n.$watch(i.ngIf,function(n){n?l||a(function(n,o){l=o,n[n.length++]=t.$$createComment("end ngIf",i.ngIf),s={clone:n},e.enter(n,r.parent(),r)}):(u&&(u.remove(),u=null),l&&(l.$destroy(),l=null),s&&(u=me(s.clone),e.leave(u).done(function(e){!1!==e&&(u=null)}),s=null))})}}}],Ma=["$templateRequest","$anchorScroll","$animate",function(e,t,n){return{restrict:"ECA",priority:400,terminal:!0,transclude:"element",controller:si.noop,compile:function(r,i){var o=i.ngInclude||i.src,a=i.onload||"",s=i.autoscroll;return function(r,i,l,u,c){var d,f,p,h=0,g=function(){f&&(f.remove(),f=null),d&&(d.$destroy(),d=null),p&&(n.leave(p).done(function(e){!1!==e&&(f=null)}),f=p,p=null)};r.$watch(o,function(o){var l=function(e){!1===e||!x(s)||s&&!r.$eval(s)||t()},f=++h;o?(e(o,!0).then(function(e){if(!r.$$destroyed&&f===h){var t=r.$new();u.template=e;var s=c(t,function(e){g(),n.enter(e,null,i).done(l)});p=s,(d=t).$emit("$includeContentLoaded",o),r.$eval(a)}},function(){r.$$destroyed||f===h&&(g(),r.$emit("$includeContentError",o))}),r.$emit("$includeContentRequested",o)):(g(),u.template=null)})}}}}],Ta=["$compile",function(t){return{restrict:"ECA",priority:-400,require:"ngInclude",link:function(n,r,i,o){if(ii.call(r[0]).match(/SVG/))return r.empty(),void t(Ee(o.template,e.document).childNodes)(n,function(e){r.append(e)},{futureParentElement:r});r.html(o.template),t(r.contents())(n)}}}],Da=fr({priority:450,compile:function(){return{pre:function(e,t,n){e.$eval(n.ngInit)}}}}),Ea=function(){return{restrict:"A",priority:100,require:"ngModel",link:function(e,t,n,r){var i=n.ngList||", ",a="false"!==n.ngTrim,s=a?fi(i):i,l=function(e){if(!b(e)){var t=[];return e&&o(e.split(s),function(e){e&&t.push(a?fi(e):e)}),t}};r.$parsers.push(l),r.$formatters.push(function(e){if(ci(e))return e.join(i)}),r.$isEmpty=function(e){return!e||!e.length}}}},La="ng-valid",Aa="ng-invalid",Ra="ng-pristine",Pa="ng-dirty",Fa=t("ngModel");Ir.$inject=["$scope","$exceptionHandler","$attrs","$element","$parse","$animate","$timeout","$q","$interpolate"],Ir.prototype={$$initGetterSetters:function(){if(this.$options.getOption("getterSetter")){var e=this.$$parse(this.$$attr.ngModel+"()"),t=this.$$parse(this.$$attr.ngModel+"($$$p)");this.$$ngModelGet=function(t){var n=this.$$parsedNgModel(t);return $(n)&&(n=e(t)),n},this.$$ngModelSet=function(e,n){$(this.$$parsedNgModel(e))?t(e,{$$$p:n}):this.$$parsedNgModelAssign(e,n)}}else if(!this.$$parsedNgModel.assign)throw Fa("nonassign","Expression '{0}' is non-assignable. Element: {1}",this.$$attr.ngModel,ee(this.$$element))},$render:g,$isEmpty:function(e){return b(e)||""===e||null===e||e!==e},$$updateEmptyClasses:function(e){this.$isEmpty(e)?(this.$$animate.removeClass(this.$$element,"ng-not-empty"),this.$$animate.addClass(this.$$element,"ng-empty")):(this.$$animate.removeClass(this.$$element,"ng-empty"),this.$$animate.addClass(this.$$element,"ng-not-empty"))},$setPristine:function(){this.$dirty=!1,this.$pristine=!0,this.$$animate.removeClass(this.$$element,Pa),this.$$animate.addClass(this.$$element,Ra)},$setDirty:function(){this.$dirty=!0,this.$pristine=!1,this.$$animate.removeClass(this.$$element,Ra),this.$$animate.addClass(this.$$element,Pa),this.$$parentForm.$setDirty()},$setUntouched:function(){this.$touched=!1,this.$untouched=!0,this.$$animate.setClass(this.$$element,"ng-untouched","ng-touched")},$setTouched:function(){this.$touched=!0,this.$untouched=!1,this.$$animate.setClass(this.$$element,"ng-touched","ng-untouched")},$rollbackViewValue:function(){this.$$timeout.cancel(this.$$pendingDebounce),this.$viewValue=this.$$lastCommittedViewValue,this.$render()},$validate:function(){if(!ui(this.$modelValue)){var e=this.$$lastCommittedViewValue,t=this.$$rawModelValue,n=this.$valid,r=this.$modelValue,i=this.$options.getOption("allowInvalid"),o=this;this.$$runValidators(t,e,function(e){i||n===e||(o.$modelValue=e?t:void 0,o.$modelValue!==r&&o.$$writeModelToScope())})}},$$runValidators:function(e,t,n){function r(e,t){a===s.$$currentValidationRunId&&s.$setValidity(e,t)}function i(e){a===s.$$currentValidationRunId&&n(e)}var a=++this.$$currentValidationRunId,s=this;!function(){var e=s.$$parserName||"parse";return b(s.$$parserValid)?(r(e,null),!0):(s.$$parserValid||(o(s.$validators,function(e,t){r(t,null)}),o(s.$asyncValidators,function(e,t){r(t,null)})),r(e,s.$$parserValid),s.$$parserValid)}()?i(!1):function(){var n=!0;return o(s.$validators,function(i,o){var a=Boolean(i(e,t));n=n&&a,r(o,a)}),!!n||(o(s.$asyncValidators,function(e,t){r(t,null)}),!1)}()?function(){var n=[],a=!0;o(s.$asyncValidators,function(i,o){var s=i(e,t);if(!P(s))throw Fa("nopromise","Expected asynchronous validator to return a promise but got '{0}' instead.",s);r(o,void 0),n.push(s.then(function(){r(o,!0)},function(){a=!1,r(o,!1)}))}),n.length?s.$$q.all(n).then(function(){i(a)},g):i(!0)}():i(!1)},$commitViewValue:function(){var e=this.$viewValue;this.$$timeout.cancel(this.$$pendingDebounce),(this.$$lastCommittedViewValue!==e||""===e&&this.$$hasNativeValidators)&&(this.$$updateEmptyClasses(e),this.$$lastCommittedViewValue=e,this.$pristine&&this.$setDirty(),this.$$parseAndValidate())},$$parseAndValidate:function(){function e(){n.$modelValue!==i&&n.$$writeModelToScope()}var t=this.$$lastCommittedViewValue,n=this;if(this.$$parserValid=!b(t)||void 0,this.$$parserValid)for(var r=0;r<this.$parsers.length;r++)if(t=this.$parsers[r](t),b(t)){this.$$parserValid=!1;break}ui(this.$modelValue)&&(this.$modelValue=this.$$ngModelGet(this.$$scope));var i=this.$modelValue,o=this.$options.getOption("allowInvalid");this.$$rawModelValue=t,o&&(this.$modelValue=t,e()),this.$$runValidators(t,this.$$lastCommittedViewValue,function(r){o||(n.$modelValue=r?t:void 0,e())})},$$writeModelToScope:function(){this.$$ngModelSet(this.$$scope,this.$modelValue),o(this.$viewChangeListeners,function(e){try{e()}catch(e){this.$$exceptionHandler(e)}},this)},$setViewValue:function(e,t){this.$viewValue=e,this.$options.getOption("updateOnDefault")&&this.$$debounceViewValueCommit(t)},$$debounceViewValueCommit:function(e){var t=this.$options.getOption("debounce");k(t[e])?t=t[e]:k(t.default)&&(t=t.default),this.$$timeout.cancel(this.$$pendingDebounce);var n=this;t>0?this.$$pendingDebounce=this.$$timeout(function(){n.$commitViewValue()},t):this.$$scope.$root.$$phase?this.$commitViewValue():this.$$scope.$apply(function(){n.$commitViewValue()})},$overrideModelOptions:function(e){this.$options=this.$options.createChild(e)}},mr({clazz:Ir,set:function(e,t){e[t]=!0},unset:function(e,t){delete e[t]}});var Oa,Na=["$rootScope",function(e){return{restrict:"A",require:["ngModel","^?form","^?ngModelOptions"],controller:Ir,priority:1,compile:function(t){return t.addClass(Ra).addClass("ng-untouched").addClass(La),{pre:function(e,t,n,r){var i=r[0],o=r[1]||i.$$parentForm,a=r[2];a&&(i.$options=a.$options),i.$$initGetterSetters(),o.$addControl(i),n.$observe("name",function(e){i.$name!==e&&i.$$parentForm.$$renameControl(i,e)}),e.$on("$destroy",function(){i.$$parentForm.$removeControl(i)})},post:function(t,n,r,i){function o(){a.$setTouched()}var a=i[0];a.$options.getOption("updateOn")&&n.on(a.$options.getOption("updateOn"),function(e){a.$$debounceViewValueCommit(e&&e.type)}),n.on("blur",function(){a.$touched||(e.$$phase?t.$evalAsync(o):t.$apply(o))})}}}}}],Ia=/(\s+|^)default(\s+|$)/;Yr.prototype={getOption:function(e){return this.$$options[e]},createChild:function(e){var t=!1;return e=d({},e),o(e,function(n,r){"$inherit"===n?"*"===r?t=!0:(e[r]=this.$$options[r],"updateOn"===r&&(e.updateOnDefault=this.$$options.updateOnDefault)):"updateOn"===r&&(e.updateOnDefault=!1,e[r]=fi(n.replace(Ia,function(){return e.updateOnDefault=!0," "})))},this),t&&(delete e["*"],zr(e,this.$$options)),zr(e,Oa.$$options),new Yr(e)}},Oa=new Yr({updateOn:"",updateOnDefault:!0,debounce:0,getterSetter:!1,allowInvalid:!1,timezone:null});var ja=function(){function e(e,t){this.$$attrs=e,this.$$scope=t}return e.$inject=["$attrs","$scope"],e.prototype={$onInit:function(){var e=this.parentCtrl?this.parentCtrl.$options:Oa,t=this.$$scope.$eval(this.$$attrs.ngModelOptions);this.$options=e.createChild(t)}},{restrict:"A",priority:10,require:{parentCtrl:"?^^ngModelOptions"},bindToController:!0,controller:e}},Ya=fr({terminal:!0,priority:1e3}),za=t("ngOptions"),Ha=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+group\s+by\s+([\s\S]+?))?(?:\s+disable\s+when\s+([\s\S]+?))?\s+for\s+(?:([$\w][$\w]*)|(?:\(\s*([$\w][$\w]*)\s*,\s*([$\w][$\w]*)\s*\)))\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?$/,Va=["$compile","$document","$parse",function(t,n,r){function a(e,t,n){function o(e,t,n,r,i){this.selectValue=e,this.viewValue=t,this.label=n,this.group=r,this.disabled=i}function a(e){var t;if(!u&&i(e))t=e;else{t=[];for(var n in e)e.hasOwnProperty(n)&&"$"!==n.charAt(0)&&t.push(n)}return t}var s=e.match(Ha);if(!s)throw za("iexp","Expected expression in form of '_select_ (as _label_)? for (_key_,)?_value_ in _collection_' but got '{0}'. Element: {1}",e,ee(t));var l=s[5]||s[7],u=s[6],c=/ as /.test(s[0])&&s[1],d=s[9],f=r(s[2]?s[1]:l),p=c&&r(c)||f,h=d&&r(d),g=d?function(e,t){return h(n,t)}:function(e){return nt(e)},m=function(e,t){return g(e,_(e,t))},v=r(s[2]||s[1]),y=r(s[3]||""),b=r(s[4]||""),x=r(s[8]),w={},_=u?function(e,t){return w[u]=t,w[l]=e,w}:function(e){return w[l]=e,w};return{trackBy:d,getTrackByValue:m,getWatchables:r(x,function(e){for(var t=[],r=a(e=e||[]),i=r.length,o=0;o<i;o++){var l=e===r?o:r[o],u=e[l],c=_(u,l),d=g(u,c);if(t.push(d),s[2]||s[1]){var f=v(n,c);t.push(f)}if(s[4]){var p=b(n,c);t.push(p)}}return t}),getOptions:function(){for(var e=[],t={},r=x(n)||[],i=a(r),s=i.length,l=0;l<s;l++){var u=r===i?l:i[l],c=_(r[u],u),f=p(n,c),h=g(f,c),w=new o(h,f,v(n,c),y(n,c),b(n,c));e.push(w),t[h]=w}return{items:e,selectValueMap:t,getOptionFromViewValue:function(e){return t[m(e)]},getViewValueFromOption:function(e){return d?H(e.viewValue):e.viewValue}}}}}function s(e,r,i,s){function c(e,t){var n=l.cloneNode(!1);t.appendChild(n),f(e,n)}function d(e){var t=_.getOptionFromViewValue(e),n=t&&t.element;return n&&!n.selected&&(n.selected=!0),t}function f(e,t){e.element=t,t.disabled=e.disabled,e.label!==t.label&&(t.label=e.label,t.textContent=e.label),t.value=e.selectValue}function p(){var e=_&&h.readValue();if(_)for(var t=_.items.length-1;t>=0;t--){var n=_.items[t];Ge(x(n.group)?n.element.parentNode:n.element)}_=C.getOptions();var i={};if(w&&r.prepend(h.emptyOption),_.items.forEach(function(e){var t;x(e.group)?((t=i[e.group])||(t=u.cloneNode(!1),k.appendChild(t),t.label=null===e.group?"null":e.group,i[e.group]=t),c(e,t)):c(e,k)}),r[0].appendChild(k),g.$render(),!g.$isEmpty(e)){var o=h.readValue();(C.trackBy||m?B(e,o):e===o)||(g.$setViewValue(o),g.$render())}}for(var h=s[0],g=s[1],m=i.multiple,v=0,y=r.children(),b=y.length;v<b;v++)if(""===y[v].value){h.hasEmptyOption=!0,h.emptyOption=y.eq(v);break}var w=!!h.emptyOption;Zr(l.cloneNode(!1)).val("?");var _,C=a(i.ngOptions,r,e),k=n[0].createDocumentFragment();h.generateUnknownOptionValue=function(e){return"?"},m?(h.writeValue=function(e){var t=e&&e.map(d)||[];_.items.forEach(function(e){e.element.selected&&!Y(t,e)&&(e.element.selected=!1)})},h.readValue=function(){var e=[];return o(r.val()||[],function(t){var n=_.selectValueMap[t];n&&!n.disabled&&e.push(_.getViewValueFromOption(n))}),e},C.trackBy&&e.$watchCollection(function(){if(ci(g.$viewValue))return g.$viewValue.map(function(e){return C.getTrackByValue(e)})},function(){g.$render()})):(h.writeValue=function(e){var t=_.selectValueMap[r.val()],n=_.getOptionFromViewValue(e);t&&t.element.removeAttribute("selected"),n?(r[0].value!==n.selectValue&&(h.removeUnknownOption(),h.unselectEmptyOption(),r[0].value=n.selectValue,n.element.selected=!0),n.element.setAttribute("selected","selected")):w?h.selectEmptyOption():h.unknownOption.parent().length?h.updateUnknownOption(e):h.renderUnknownOption(e)},h.readValue=function(){var e=_.selectValueMap[r.val()];return e&&!e.disabled?(h.unselectEmptyOption(),h.removeUnknownOption(),_.getViewValueFromOption(e)):null},C.trackBy&&e.$watch(function(){return C.getTrackByValue(g.$viewValue)},function(){g.$render()})),w&&(h.emptyOption.remove(),t(h.emptyOption)(e),h.emptyOption[0].nodeType===Ci?(h.hasEmptyOption=!1,h.registerOption=function(e,t){""===t.val()&&(h.hasEmptyOption=!0,h.emptyOption=t,h.emptyOption.removeClass("ng-scope"),g.$render(),t.on("$destroy",function(){h.hasEmptyOption=!1,h.emptyOption=void 0}))}):h.emptyOption.removeClass("ng-scope")),r.empty(),p(),e.$watchCollection(C.getWatchables,p)}var l=e.document.createElement("option"),u=e.document.createElement("optgroup");return{restrict:"A",terminal:!0,require:["select","ngModel"],link:{pre:function(e,t,n,r){r[0].registerOption=g},post:s}}}],Ba=["$locale","$interpolate","$log",function(e,t,n){var r=/{}/g,i=/^when(Minus)?(.+)$/;return{link:function(a,s,l){function u(e){s.text(e||"")}var c,d=l.count,f=l.$attr.when&&s.attr(l.$attr.when),p=l.offset||0,h=a.$eval(f)||{},m={},v=t.startSymbol(),y=t.endSymbol(),x=v+d+"-"+p+y,w=si.noop;o(l,function(e,t){var n=i.exec(t);if(n){var r=(n[1]?"-":"")+Gr(n[2]);h[r]=s.attr(l.$attr[t])}}),o(h,function(e,n){m[n]=t(e.replace(r,x))}),a.$watch(d,function(t){var r=parseFloat(t),i=ui(r);if(i||r in h||(r=e.pluralCat(r-p)),!(r===c||i&&ui(c))){w();var o=m[r];b(o)?(null!=t&&n.debug("ngPluralize: no rule defined for '"+r+"' in "+f),w=g,u()):w=a.$watch(o,u),c=r}})}}}],Wa=["$parse","$animate","$compile",function(e,n,r){var a=t("ngRepeat"),s=function(e,t,n,r,i,o,a){e[n]=r,i&&(e[i]=o),e.$index=t,e.$first=0===t,e.$last=t===a-1,e.$middle=!(e.$first||e.$last),e.$odd=!(e.$even=0==(1&t))},l=function(e){return e.clone[0]},u=function(e){return e.clone[e.clone.length-1]};return{restrict:"A",multiElement:!0,transclude:"element",priority:1e3,terminal:!0,$$tlb:!0,compile:function(t,c){var d=c.ngRepeat,f=r.$$createComment("end ngRepeat",d),p=d.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+as\s+([\s\S]+?))?(?:\s+track\s+by\s+([\s\S]+?))?\s*$/);if(!p)throw a("iexp","Expected expression in form of '_item_ in _collection_[ track by _id_]' but got '{0}'.",d);var h=p[1],g=p[2],m=p[3],v=p[4];if(!(p=h.match(/^(?:(\s*[$\w]+)|\(\s*([$\w]+)\s*,\s*([$\w]+)\s*\))$/)))throw a("iidexp","'_item_' in '_item_ in _collection_' should be an identifier or '(_key_, _value_)' expression, but got '{0}'.",h);var y=p[3]||p[1],b=p[2];if(m&&(!/^[$a-zA-Z_][$a-zA-Z0-9_]*$/.test(m)||/^(null|undefined|this|\$index|\$first|\$middle|\$last|\$even|\$odd|\$parent|\$root|\$id)$/.test(m)))throw a("badident","alias '{0}' is invalid --- must be a valid JS identifier which is not a reserved name.",m);var x,w,_,C,k={$id:nt};return v?x=e(v):(_=function(e,t){return nt(t)},C=function(e){return e}),function(e,t,r,c,p){x&&(w=function(t,n,r){return b&&(k[b]=t),k[y]=n,k.$index=r,x(e,k)});var h=ve();e.$watchCollection(g,function(r){var c,g,v,x,k,S,$,M,T,D,E,L,A=t[0],R=ve();if(m&&(e[m]=r),i(r))T=r,M=w||_;else{M=w||C,T=[];for(var P in r)Wr.call(r,P)&&"$"!==P.charAt(0)&&T.push(P)}for(x=T.length,E=new Array(x),c=0;c<x;c++)if(k=r===T?c:T[c],S=r[k],$=M(k,S,c),h[$])D=h[$],delete h[$],R[$]=D,E[c]=D;else{if(R[$])throw o(E,function(e){e&&e.scope&&(h[e.id]=e)}),a("dupes","Duplicates in a repeater are not allowed. Use 'track by' expression to specify unique keys. Repeater: {0}, Duplicate key: {1}, Duplicate value: {2}",d,$,S);E[c]={id:$,scope:void 0,clone:void 0},R[$]=!0}for(var F in h){if(D=h[F],L=me(D.clone),n.leave(L),L[0].parentNode)for(c=0,g=L.length;c<g;c++)L[c].$$NG_REMOVED=!0;D.scope.$destroy()}for(c=0;c<x;c++)if(k=r===T?c:T[c],S=r[k],(D=E[c]).scope){v=A;do{v=v.nextSibling}while(v&&v.$$NG_REMOVED);l(D)!==v&&n.move(me(D.clone),null,A),A=u(D),s(D.scope,c,y,S,b,k,x)}else p(function(e,t){D.scope=t;var r=f.cloneNode(!1);e[e.length++]=r,n.enter(e,null,A),A=r,D.clone=e,R[D.id]=D,s(D.scope,c,y,S,b,k,x)});h=R})}}}}],Ua=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngShow,function(t){e[t?"removeClass":"addClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],Ga=["$animate",function(e){return{restrict:"A",multiElement:!0,link:function(t,n,r){t.$watch(r.ngHide,function(t){e[t?"addClass":"removeClass"](n,"ng-hide",{tempClasses:"ng-hide-animate"})})}}}],qa=fr(function(e,t,n){e.$watch(n.ngStyle,function(e,n){n&&e!==n&&o(n,function(e,n){t.css(n,"")}),e&&t.css(e)},!0)}),Ka=["$animate","$compile",function(e,t){return{require:"ngSwitch",controller:["$scope",function(){this.cases={}}],link:function(n,r,i,a){var s=i.ngSwitch||i.on,l=[],u=[],c=[],d=[],f=function(e,t){return function(n){!1!==n&&e.splice(t,1)}};n.$watch(s,function(n){for(var r,i;c.length;)e.cancel(c.pop());for(r=0,i=d.length;r<i;++r){var s=me(u[r].clone);d[r].$destroy(),(c[r]=e.leave(s)).done(f(c,r))}u.length=0,d.length=0,(l=a.cases["!"+n]||a.cases["?"])&&o(l,function(n){n.transclude(function(r,i){d.push(i);var o=n.element;r[r.length++]=t.$$createComment("end ngSwitchWhen");var a={clone:r};u.push(a),e.enter(r,o.parent(),o)})})})}}}],Xa=fr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){o(n.ngSwitchWhen.split(n.ngSwitchWhenSeparator).sort().filter(function(e,t,n){return n[t-1]!==e}),function(e){r.cases["!"+e]=r.cases["!"+e]||[],r.cases["!"+e].push({transclude:i,element:t})})}}),Ja=fr({transclude:"element",priority:1200,require:"^ngSwitch",multiElement:!0,link:function(e,t,n,r,i){r.cases["?"]=r.cases["?"]||[],r.cases["?"].push({transclude:i,element:t})}}),Za=t("ngTransclude"),Qa=["$compile",function(e){return{restrict:"EAC",terminal:!0,compile:function(t){var n=e(t.contents());return t.empty(),function(e,t,r,i,o){function a(e,n){e.length&&l(e)?t.append(e):(s(),n.$destroy())}function s(){n(e,function(e){t.append(e)})}function l(e){for(var t=0,n=e.length;t<n;t++){var r=e[t];if(r.nodeType!==_i||r.nodeValue.trim())return!0}}if(!o)throw Za("orphan","Illegal use of ngTransclude directive in the template! No parent directive that requires a transclusion found. Element: {0}",ee(t));r.ngTransclude===r.$attr.ngTransclude&&(r.ngTransclude="");var u=r.ngTransclude||r.ngTranscludeSlot;o(a,null,u),u&&!o.isSlotFilled(u)&&s()}}}}],es=["$templateCache",function(e){return{restrict:"E",terminal:!0,compile:function(t,n){if("text/ng-template"===n.type){var r=n.id,i=t[0].text;e.put(r,i)}}}}],ts={$setViewValue:g,$render:g},ns=["$element","$scope",function(t,n){function r(){s||(s=!0,n.$$postDigest(function(){s=!1,o.ngModelCtrl.$render()}))}function i(e){l||(l=!0,n.$$postDigest(function(){n.$$destroyed||(l=!1,o.ngModelCtrl.$setViewValue(o.readValue()),e&&o.ngModelCtrl.$render())}))}var o=this,a=new Bi;o.selectValueMap={},o.ngModelCtrl=ts,o.multiple=!1,o.unknownOption=Zr(e.document.createElement("option")),o.hasEmptyOption=!1,o.emptyOption=void 0,o.renderUnknownOption=function(e){var n=o.generateUnknownOptionValue(e);o.unknownOption.val(n),t.prepend(o.unknownOption),Hr(o.unknownOption,!0),t.val(n)},o.updateUnknownOption=function(e){var n=o.generateUnknownOptionValue(e);o.unknownOption.val(n),Hr(o.unknownOption,!0),t.val(n)},o.generateUnknownOptionValue=function(e){return"? "+nt(e)+" ?"},o.removeUnknownOption=function(){o.unknownOption.parent()&&o.unknownOption.remove()},o.selectEmptyOption=function(){o.emptyOption&&(t.val(""),Hr(o.emptyOption,!0))},o.unselectEmptyOption=function(){o.hasEmptyOption&&o.emptyOption.removeAttr("selected")},n.$on("$destroy",function(){o.renderUnknownOption=g}),o.readValue=function(){var e=t.val(),n=e in o.selectValueMap?o.selectValueMap[e]:e;return o.hasOption(n)?n:null},o.writeValue=function(e){var n=t[0].options[t[0].selectedIndex];if(n&&Hr(Zr(n),!1),o.hasOption(e)){o.removeUnknownOption();var r=nt(e);t.val(r in o.selectValueMap?r:e);var i=t[0].options[t[0].selectedIndex];Hr(Zr(i),!0)}else null==e&&o.emptyOption?(o.removeUnknownOption(),o.selectEmptyOption()):o.unknownOption.parent().length?o.updateUnknownOption(e):o.renderUnknownOption(e)},o.addOption=function(e,t){if(t[0].nodeType!==Ci){he(e,'"option value"'),""===e&&(o.hasEmptyOption=!0,o.emptyOption=t);var n=a.get(e)||0;a.set(e,n+1),r()}},o.removeOption=function(e){var t=a.get(e);t&&(1===t?(a.delete(e),""===e&&(o.hasEmptyOption=!1,o.emptyOption=void 0)):a.set(e,t-1))},o.hasOption=function(e){return!!a.get(e)};var s=!1,l=!1;o.registerOption=function(e,t,n,a,s){if(n.$attr.ngValue){var l,u=NaN;n.$observe("value",function(e){var n,r=t.prop("selected");x(u)&&(o.removeOption(l),delete o.selectValueMap[u],n=!0),u=nt(e),l=e,o.selectValueMap[u]=e,o.addOption(e,t),t.attr("value",u),n&&r&&i()})}else a?n.$observe("value",function(e){o.readValue();var n,r=t.prop("selected");x(l)&&(o.removeOption(l),n=!0),l=e,o.addOption(e,t),n&&r&&i()}):s?e.$watch(s,function(e,r){n.$set("value",e);var a=t.prop("selected");r!==e&&o.removeOption(r),o.addOption(e,t),r&&a&&i()}):o.addOption(n.value,t);n.$observe("disabled",function(e){("true"===e||e&&t.prop("selected"))&&(o.multiple?i(!0):(o.ngModelCtrl.$setViewValue(null),o.ngModelCtrl.$render()))}),t.on("$destroy",function(){var e=o.readValue(),t=n.value;o.removeOption(t),r(),(o.multiple&&e&&-1!==e.indexOf(t)||e===t)&&i(!0)})}}],rs=function(){function e(e,t,n,r){var i=r[0],a=r[1];if(a){if(i.ngModelCtrl=a,t.on("change",function(){i.removeUnknownOption(),e.$apply(function(){a.$setViewValue(i.readValue())})}),n.multiple){i.multiple=!0,i.readValue=function(){var e=[];return o(t.find("option"),function(t){if(t.selected&&!t.disabled){var n=t.value;e.push(n in i.selectValueMap?i.selectValueMap[n]:n)}}),e},i.writeValue=function(e){o(t.find("option"),function(t){var n=!!e&&(Y(e,t.value)||Y(e,i.selectValueMap[t.value]));n!==t.selected&&Hr(Zr(t),n)})};var s,l=NaN;e.$watch(function(){l!==a.$viewValue||B(s,a.$viewValue)||(s=xe(a.$viewValue),a.$render()),l=a.$viewValue}),a.$isEmpty=function(e){return!e||0===e.length}}}else i.registerOption=g}function t(e,t,n,r){var i=r[1];if(i){var o=r[0];i.$render=function(){o.writeValue(i.$viewValue)}}}return{restrict:"E",require:["select","?ngModel"],controller:ns,priority:1,link:{pre:e,post:t}}},is=["$interpolate",function(e){return{restrict:"E",priority:100,compile:function(t,n){var r,i;return x(n.ngValue)||(x(n.value)?r=e(n.value,!0):(i=e(t.text(),!0))||n.$set("value",t.text())),function(e,t,n){var o=t.parent(),a=o.data("$selectController")||o.parent().data("$selectController");a&&a.registerOption(e,t,n,r,i)}}}}],os=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){r&&(n.required=!0,r.$validators.required=function(e,t){return!n.required||!r.$isEmpty(t)},n.$observe("required",function(){r.$validate()}))}}},as=function(){return{restrict:"A",require:"?ngModel",link:function(e,n,r,i){if(i){var o,a=r.ngPattern||r.pattern;r.$observe("pattern",function(e){if(C(e)&&e.length>0&&(e=new RegExp("^"+e+"$")),e&&!e.test)throw t("ngPattern")("noregexp","Expected {0} to be a RegExp but was {1}. Element: {2}",a,e,ee(n));o=e||void 0,i.$validate()}),i.$validators.pattern=function(e,t){return i.$isEmpty(t)||b(o)||o.test(t)}}}}},ss=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=-1;n.$observe("maxlength",function(e){var t=p(e);i=ui(t)?-1:t,r.$validate()}),r.$validators.maxlength=function(e,t){return i<0||r.$isEmpty(t)||t.length<=i}}}}},ls=function(){return{restrict:"A",require:"?ngModel",link:function(e,t,n,r){if(r){var i=0;n.$observe("minlength",function(e){i=p(e)||0,r.$validate()}),r.$validators.minlength=function(e,t){return r.$isEmpty(t)||t.length>=i}}}}};e.angular.bootstrap?e.console&&console.log("WARNING: Tried to load angular more than once."):(!function(){var t;if(!xi){var n=gi();(Qr=b(n)?e.jQuery:n?e[n]:void 0)&&Qr.fn.on?(Zr=Qr,d(Qr.fn,{scope:ji.scope,isolateScope:ji.isolateScope,controller:ji.controller,injector:ji.injector,inheritedData:ji.inheritedData}),t=Qr.cleanData,Qr.cleanData=function(e){for(var n,r,i=0;null!=(r=e[i]);i++)(n=Qr._data(r,"events"))&&n.$destroy&&Qr(r).triggerHandler("$destroy");t(e)}):Zr=Re,si.element=Zr,xi=!0}}(),function(r){d(r,{errorHandlingConfig:n,bootstrap:le,copy:H,extend:d,merge:f,equals:B,element:Zr,forEach:o,injector:lt,noop:g,bind:G,toJson:K,fromJson:X,identity:m,isUndefined:b,isDefined:x,isString:C,isFunction:$,isObject:w,isNumber:k,isElement:N,isArray:ci,version:$i,isDate:S,lowercase:Gr,uppercase:qr,callbacks:{$$counter:0},getTestability:ce,reloadWithDebugInfo:ue,$$minErr:t,$$csp:hi,$$encodeUriSegment:ie,$$encodeUriQuery:oe,$$stringify:ye}),(ei=be(e))("ng",["ngLocale"],["$provide",function(e){e.provider({$$sanitizeUri:$n}),e.provider("$compile",bt).directive({a:Go,input:fa,textarea:fa,form:Zo,script:es,select:rs,option:is,ngBind:ga,ngBindHtml:va,ngBindTemplate:ma,ngClass:ba,ngClassEven:wa,ngClassOdd:xa,ngCloak:_a,ngController:Ca,ngForm:Qo,ngHide:Ga,ngIf:$a,ngInclude:Ma,ngInit:Da,ngNonBindable:Ya,ngPluralize:Ba,ngRepeat:Wa,ngShow:Ua,ngStyle:qa,ngSwitch:Ka,ngSwitchWhen:Xa,ngSwitchDefault:Ja,ngOptions:Va,ngTransclude:Qa,ngModel:Na,ngList:Ea,ngChange:ya,pattern:as,ngPattern:as,required:os,ngRequired:os,minlength:ls,ngMinlength:ls,maxlength:ss,ngMaxlength:ss,ngValue:ha,ngModelOptions:ja}).directive({ngInclude:Ta}).directive(qo).directive(ka),e.provider({$anchorScroll:ut,$animate:no,$animateCss:oo,$$animateJs:eo,$$animateQueue:to,$$AnimateRunner:io,$$animateAsyncRun:ro,$browser:gt,$cacheFactory:mt,$controller:St,$document:$t,$$isDocumentHidden:Mt,$exceptionHandler:Tt,$filter:zn,$$forceReflow:po,$interpolate:Ht,$interval:Vt,$http:It,$httpParamSerializer:Et,$httpParamSerializerJQLike:Lt,$httpBackend:Yt,$xhrFactory:jt,$jsonpCallbacks:wo,$location:on,$log:an,$parse:wn,$rootScope:$RootScopeProvider,$q:_n,$$q:Cn,$sce:Ln,$sceDelegate:En,$sniffer:An,$templateCache:vt,$templateRequest:Rn,$$testability:Pn,$timeout:Fn,$window:In,$$rAF:Sn,$$jqLite:tt,$$Map:Wi,$$cookieReader:Yn})}]).info({angularVersion:"1.6.4"})}(si),si.module("ngLocale",[],["$provide",function(e){function t(e){var t=(e+="").indexOf(".");return-1==t?0:e.length-t-1}function n(e,n){var r=n;void 0===r&&(r=Math.min(t(e),3));var i=Math.pow(10,r);return{v:r,f:(e*i|0)%i}}var r={ZERO:"zero",ONE:"one",TWO:"two",FEW:"few",MANY:"many",OTHER:"other"};e.value("$locale",{DATETIME_FORMATS:{AMPMS:["AM","PM"],DAY:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],ERANAMES:["Before Christ","Anno Domini"],ERAS:["BC","AD"],FIRSTDAYOFWEEK:6,MONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],SHORTDAY:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],SHORTMONTH:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],STANDALONEMONTH:["January","February","March","April","May","June","July","August","September","October","November","December"],WEEKENDRANGE:[5,6],fullDate:"EEEE, MMMM d, y",longDate:"MMMM d, y",medium:"MMM d, y h:mm:ss a",mediumDate:"MMM d, y",mediumTime:"h:mm:ss a",short:"M/d/yy h:mm a",shortDate:"M/d/yy",shortTime:"h:mm a"},NUMBER_FORMATS:{CURRENCY_SYM:"$",DECIMAL_SEP:".",GROUP_SEP:",",PATTERNS:[{gSize:3,lgSize:3,maxFrac:3,minFrac:0,minInt:1,negPre:"-",negSuf:"",posPre:"",posSuf:""},{gSize:3,lgSize:3,maxFrac:2,minFrac:2,minInt:1,negPre:"-¤",negSuf:"",posPre:"¤",posSuf:""}]},id:"en-us",localeID:"en_US",pluralCat:function(e,t){var i=0|e,o=n(e,t);return 1==i&&0==o.v?r.ONE:r.OTHER}})}]),Zr(function(){se(e.document,le)}))}(window),!window.angular.$$csp().noInlineStyle&&window.angular.element(document.head).prepend('<style type="text/css">@charset "UTF-8";[ng\\:cloak],[ng-cloak],[data-ng-cloak],[x-ng-cloak],.ng-cloak,.x-ng-cloak,.ng-hide:not(.ng-hide-animate){display:none !important;}ng\\:form{display:block;}.ng-animate-shim{visibility:hidden;}.ng-anchor{position:absolute;}</style>'),function(){function e(e){var t=function(e,r){return n(e,i({},t,r||{}))};return i(t,{language:"en",delimiter:", ",spacer:" ",units:["year","month","week","day","hour","minute","second"],languages:{},halfUnit:!0,round:!1},e)}function t(){return u.apply(u,arguments)}function n(e,t){if(0===(e=Math.abs(e)))return"0";var n=t.languages[t.language]||l[t.language];if(!n)throw new Error("No language "+n+".");for(var i,o,a,u,c=[],d=0,f=t.units.length;d<f;d++){if("s"===(i=t.units[d])[i.length-1]&&(i=i.substring(0,i.length-1)),o=s[i],0===c.length&&t.halfUnit&&(u=e/o*2)===Math.floor(u))return r(u/2,i,n,t.spacer);d+1===f?(a=e/o,t.round&&(a=Math.round(a))):a=Math.floor(e/o),a&&c.push(r(a,i,n,t.spacer)),e-=a*o}return c.join(t.delimiter)}function r(e,t,n,r){var i,o=n[t];return i="function"==typeof o?o(e):o,e+r+i}function i(e){for(var t,n=1;n<arguments.length;n++){t=arguments[n];for(var r in t)e[r]=t[r]}return e}function o(e){return 1===e?0:Math.floor(e)!==e?1:2<=e%10&&e%10<=4&&!(10<e%100&&e%100<20)?2:3}function a(e){return Math.floor(e)!==e?2:0===e||e>=5&&e<=20||e%10>=5&&e%10<=9||e%10==0?0:1===e||e%10==1?1:e>1?2:0}var s={year:315576e5,month:26298e5,week:6048e5,day:864e5,hour:36e5,minute:6e4,second:1e3,millisecond:1},l={ca:{year:function(e){return"any"+(1!==e?"s":"")},month:function(e){return"mes"+(1!==e?"os":"")},week:function(e){return"setman"+(1!==e?"es":"a")},day:function(e){return"di"+(1!==e?"es":"a")},hour:function(e){return"hor"+(1!==e?"es":"a")},minute:function(e){return"minut"+(1!==e?"s":"")},second:function(e){return"segon"+(1!==e?"s":"")},millisecond:function(e){return"milisegon"+(1!==e?"s":"")}},da:{year:"år",month:function(e){return"måned"+(1!==e?"er":"")},week:function(e){return"uge"+(1!==e?"r":"")},day:function(e){return"dag"+(1!==e?"e":"")},hour:function(e){return"time"+(1!==e?"r":"")},minute:function(e){return"minut"+(1!==e?"ter":"")},second:function(e){return"sekund"+(1!==e?"er":"")},millisecond:function(e){return"millisekund"+(1!==e?"er":"")}},de:{year:function(e){return"jahr"+(1!==e?"e":"")},month:function(e){return"monat"+(1!==e?"e":"")},week:function(e){return"woche"+(1!==e?"n":"")},day:function(e){return"tag"+(1!==e?"e":"")},hour:function(e){return"stunde"+(1!==e?"n":"")},minute:function(e){return"minute"+(1!==e?"n":"")},second:function(e){return"sekunde"+(1!==e?"n":"")},millisecond:function(e){return"millisekunde"+(1!==e?"n":"")}},en:{year:function(e){return"year"+(1!==e?"s":"")},month:function(e){return"month"+(1!==e?"s":"")},week:function(e){return"week"+(1!==e?"s":"")},day:function(e){return"day"+(1!==e?"s":"")},hour:function(e){return"hour"+(1!==e?"s":"")},minute:function(e){return"minute"+(1!==e?"s":"")},second:function(e){return"second"+(1!==e?"s":"")},millisecond:function(e){return"millisecond"+(1!==e?"s":"")}},nl:{year:"jaar",month:function(e){return 1===e?"maand":"maanden"},week:function(e){return 1===e?"week":"weken"},day:function(e){return 1===e?"dag":"dagen"},hour:"uur",minute:function(e){return 1===e?"minuut":"minuten"},second:function(e){return 1===e?"seconde":"seconden"},millisecond:function(e){return 1===e?"milliseconde":"milliseconden"}},es:{year:function(e){return"año"+(1!==e?"s":"")},month:function(e){return"mes"+(1!==e?"es":"")},week:function(e){return"semana"+(1!==e?"s":"")},day:function(e){return"día"+(1!==e?"s":"")},hour:function(e){return"hora"+(1!==e?"s":"")},minute:function(e){return"minuto"+(1!==e?"s":"")},second:function(e){return"segundo"+(1!==e?"s":"")},millisecond:function(e){return"milisegundo"+(1!==e?"s":"")}},fr:{year:function(e){return"an"+(1!==e?"s":"")},month:"mois",week:function(e){return"semaine"+(1!==e?"s":"")},day:function(e){return"jour"+(1!==e?"s":"")},hour:function(e){return"heure"+(1!==e?"s":"")},minute:function(e){return"minute"+(1!==e?"s":"")},second:function(e){return"seconde"+(1!==e?"s":"")},millisecond:function(e){return"milliseconde"+(1!==e?"s":"")}},hu:{year:"év",month:"hónap",week:"hét",day:"nap",hour:"óra",minute:"perc",second:"másodperc",millisecond:"ezredmásodperc"},ja:{year:"年",month:"月",week:"週",day:"日",hour:"時間",minute:"分",second:"秒",millisecond:"ミリ秒"},ko:{year:"년",month:"개월",week:"주일",day:"일",hour:"시간",minute:"분",second:"초",millisecond:"밀리 초"},nob:{year:"år",month:function(e){return"måned"+(1!==e?"er":"")},week:function(e){return"uke"+(1!==e?"r":"")},day:function(e){return"dag"+(1!==e?"er":"")},hour:function(e){return"time"+(1!==e?"r":"")},minute:function(e){return"minutt"+(1!==e?"er":"")},second:function(e){return"sekund"+(1!==e?"er":"")},millisecond:function(e){return"millisekund"+(1!==e?"er":"")}},pl:{year:function(e){return["rok","roku","lata","lat"][o(e)]},month:function(e){return["miesiąc","miesiąca","miesiące","miesięcy"][o(e)]},week:function(e){return["tydzień","tygodnia","tygodnie","tygodni"][o(e)]},day:function(e){return["dzień","dnia","dni","dni"][o(e)]},hour:function(e){return["godzina","godziny","godziny","godzin"][o(e)]},minute:function(e){return["minuta","minuty","minuty","minut"][o(e)]},second:function(e){return["sekunda","sekundy","sekundy","sekund"][o(e)]},millisecond:function(e){return["milisekunda","milisekundy","milisekundy","milisekund"][o(e)]}},pt:{year:function(e){return"ano"+(1!==e?"s":"")},month:function(e){return 1!==e?"meses":"mês"},week:function(e){return"semana"+(1!==e?"s":"")},day:function(e){return"dia"+(1!==e?"s":"")},hour:function(e){return"hora"+(1!==e?"s":"")},minute:function(e){return"minuto"+(1!==e?"s":"")},second:function(e){return"segundo"+(1!==e?"s":"")},millisecond:function(e){return"milissegundo"+(1!==e?"s":"")}},ru:{year:function(e){return["лет","год","года"][a(e)]},month:function(e){return["месяцев","месяц","месяца"][a(e)]},week:function(e){return["недель","неделя","недели"][a(e)]},day:function(e){return["дней","день","дня"][a(e)]},hour:function(e){return["часов","час","часа"][a(e)]},minute:function(e){return["минут","минута","минуты"][a(e)]},second:function(e){return["секунд","секунда","секунды"][a(e)]},millisecond:function(e){return["миллисекунд","миллисекунда","миллисекунды"][a(e)]}},sv:{year:"år",month:function(e){return"månad"+(1!==e?"er":"")},week:function(e){return"veck"+(1!==e?"or":"a")},day:function(e){return"dag"+(1!==e?"ar":"")},hour:function(e){return"timm"+(1!==e?"ar":"e")},minute:function(e){return"minut"+(1!==e?"er":"")},second:function(e){return"sekund"+(1!==e?"er":"")},millisecond:function(e){return"millisekund"+(1!==e?"er":"")}},tr:{year:"yıl",month:"ay",week:"hafta",day:"gün",hour:"saat",minute:"dakika",second:"saniye",millisecond:"milisaniye"},"zh-CN":{year:"年",month:"个月",week:"周",day:"天",hour:"小时",minute:"分钟",second:"秒",millisecond:"毫秒"},"zh-TW":{year:"年",month:"個月",week:"周",day:"天",hour:"小時",minute:"分鐘",second:"秒",millisecond:"毫秒"}},u=e({});t.humanizer=e,"undefined"!=typeof module?module.exports=t:this.humanizeDuration=t}(),function(e){function t(e,t,n){switch(arguments.length){case 2:return null!=e?e:t;case 3:return null!=e?e:null!=t?t:n;default:throw new Error("Implement me")}}function n(e,t){return Ce.call(e,t)}function r(){return{empty:!1,unusedTokens:[],unusedInput:[],overflow:-2,charsLeftOver:0,nullInput:!1,invalidMonth:null,invalidFormat:!1,userInvalidated:!1,iso:!1}}function i(e){!1===ye.suppressDeprecationWarnings&&"undefined"!=typeof console&&console.warn&&console.warn("Deprecation warning: "+e)}function o(e,t){var n=!0;return p(function(){return n&&(i(e),n=!1),t.apply(this,arguments)},t)}function a(e,t){pt[e]||(i(t),pt[e]=!0)}function s(e,t){return function(n){return m(e.call(this,n),t)}}function l(e,t){var n,r=12*(t.year()-e.year())+(t.month()-e.month()),i=e.clone().add(r,"months");return n=t-i<0?(t-i)/(i-e.clone().add(r-1,"months")):(t-i)/(e.clone().add(r+1,"months")-i),-(r+n)}function u(e,t,n){var r;return null==n?t:null!=e.meridiemHour?e.meridiemHour(t,n):null!=e.isPM?((r=e.isPM(n))&&t<12&&(t+=12),r||12!==t||(t=0),t):t}function c(){}function d(e,t){!1!==t&&L(e),h(this,e),this._d=new Date(+e._d),!1===gt&&(gt=!0,ye.updateOffset(this),gt=!1)}function f(e){var t=S(e),n=t.year||0,r=t.quarter||0,i=t.month||0,o=t.week||0,a=t.day||0,s=t.hour||0,l=t.minute||0,u=t.second||0,c=t.millisecond||0;this._milliseconds=+c+1e3*u+6e4*l+36e5*s,this._days=+a+7*o,this._months=+i+3*r+12*n,this._data={},this._locale=ye.localeData(),this._bubble()}function p(e,t){for(var r in t)n(t,r)&&(e[r]=t[r]);return n(t,"toString")&&(e.toString=t.toString),n(t,"valueOf")&&(e.valueOf=t.valueOf),e}function h(e,t){var n,r,i;if(void 0!==t._isAMomentObject&&(e._isAMomentObject=t._isAMomentObject),void 0!==t._i&&(e._i=t._i),void 0!==t._f&&(e._f=t._f),void 0!==t._l&&(e._l=t._l),void 0!==t._strict&&(e._strict=t._strict),void 0!==t._tzm&&(e._tzm=t._tzm),void 0!==t._isUTC&&(e._isUTC=t._isUTC),void 0!==t._offset&&(e._offset=t._offset),void 0!==t._pf&&(e._pf=t._pf),void 0!==t._locale&&(e._locale=t._locale),Ae.length>0)for(n in Ae)void 0!==(i=t[r=Ae[n]])&&(e[r]=i);return e}function g(e){return e<0?Math.ceil(e):Math.floor(e)}function m(e,t,n){for(var r=""+Math.abs(e),i=e>=0;r.length<t;)r="0"+r;return(i?n?"+":"":"-")+r}function v(e,t){var n={milliseconds:0,months:0};return n.months=t.month()-e.month()+12*(t.year()-e.year()),e.clone().add(n.months,"M").isAfter(t)&&--n.months,n.milliseconds=+t-+e.clone().add(n.months,"M"),n}function y(e,t){var n;return t=O(t,e),e.isBefore(t)?n=v(e,t):((n=v(t,e)).milliseconds=-n.milliseconds,n.months=-n.months),n}function b(e,t){return function(n,r){var i,o;return null===r||isNaN(+r)||(a(t,"moment()."+t+"(period, number) is deprecated. Please use moment()."+t+"(number, period)."),o=n,n=r,r=o),n="string"==typeof n?+n:n,i=ye.duration(n,r),x(this,i,e),this}}function x(e,t,n,r){var i=t._milliseconds,o=t._days,a=t._months;r=null==r||r,i&&e._d.setTime(+e._d+i*n),o&&pe(e,"Date",fe(e,"Date")+o*n),a&&de(e,fe(e,"Month")+a*n),r&&ye.updateOffset(e,o||a)}function w(e){return"[object Array]"===Object.prototype.toString.call(e)}function _(e){return"[object Date]"===Object.prototype.toString.call(e)||e instanceof Date}function C(e,t,n){var r,i=Math.min(e.length,t.length),o=Math.abs(e.length-t.length),a=0;for(r=0;r<i;r++)(n&&e[r]!==t[r]||!n&&$(e[r])!==$(t[r]))&&a++;return a+o}function k(e){if(e){var t=e.toLowerCase().replace(/(.)s$/,"$1");e=at[e]||st[t]||t}return e}function S(e){var t,r,i={};for(r in e)n(e,r)&&(t=k(r))&&(i[t]=e[r]);return i}function $(e){var t=+e,n=0;return 0!==t&&isFinite(t)&&(n=t>=0?Math.floor(t):Math.ceil(t)),n}function M(e,t){return new Date(Date.UTC(e,t+1,0)).getUTCDate()}function T(e,t,n){return se(ye([e,11,31+t-n]),t,n).week}function D(e){return E(e)?366:365}function E(e){return e%4==0&&e%100!=0||e%400==0}function L(e){var t;e._a&&-2===e._pf.overflow&&(t=e._a[Se]<0||e._a[Se]>11?Se:e._a[$e]<1||e._a[$e]>M(e._a[ke],e._a[Se])?$e:e._a[Me]<0||e._a[Me]>24||24===e._a[Me]&&(0!==e._a[Te]||0!==e._a[De]||0!==e._a[Ee])?Me:e._a[Te]<0||e._a[Te]>59?Te:e._a[De]<0||e._a[De]>59?De:e._a[Ee]<0||e._a[Ee]>999?Ee:-1,e._pf._overflowDayOfYear&&(t<ke||t>$e)&&(t=$e),e._pf.overflow=t)}function A(t){return null==t._isValid&&(t._isValid=!isNaN(t._d.getTime())&&t._pf.overflow<0&&!t._pf.empty&&!t._pf.invalidMonth&&!t._pf.nullInput&&!t._pf.invalidFormat&&!t._pf.userInvalidated,t._strict&&(t._isValid=t._isValid&&0===t._pf.charsLeftOver&&0===t._pf.unusedTokens.length&&t._pf.bigHour===e)),t._isValid}function R(e){return e?e.toLowerCase().replace("_","-"):e}function P(e){for(var t,n,r,i,o=0;o<e.length;){for(t=(i=R(e[o]).split("-")).length,n=(n=R(e[o+1]))?n.split("-"):null;t>0;){if(r=F(i.slice(0,t).join("-")))return r;if(n&&n.length>=t&&C(i,n,!0)>=t-1)break;t--}o++}return null}function F(e){var t=null;if(!Le[e]&&Re)try{t=ye.locale(),require("./locale/"+e),ye.locale(t)}catch(e){}return Le[e]}function O(e,t){var n,r;return t._isUTC?(n=t.clone(),r=(ye.isMoment(e)||_(e)?+e:+ye(e))-+n,n._d.setTime(+n._d+r),ye.updateOffset(n,!1),n):ye(e).local()}function N(e){return e.match(/\[[\s\S]/)?e.replace(/^\[|\]$/g,""):e.replace(/\\/g,"")}function I(e){var t,n,r=e.match(Ne);for(t=0,n=r.length;t<n;t++)ft[r[t]]?r[t]=ft[r[t]]:r[t]=N(r[t]);return function(i){var o="";for(t=0;t<n;t++)o+=r[t]instanceof Function?r[t].call(i,e):r[t];return o}}function j(e,t){return e.isValid()?(t=Y(t,e.localeData()),lt[t]||(lt[t]=I(t)),lt[t](e)):e.localeData().invalidDate()}function Y(e,t){function n(e){return t.longDateFormat(e)||e}var r=5;for(Ie.lastIndex=0;r>=0&&Ie.test(e);)e=e.replace(Ie,n),Ie.lastIndex=0,r-=1;return e}function z(e,t){var n=t._strict;switch(e){case"Q":return Ke;case"DDDD":return Je;case"YYYY":case"GGGG":case"gggg":return n?Ze:ze;case"Y":case"G":case"g":return et;case"YYYYYY":case"YYYYY":case"GGGGG":case"ggggg":return n?Qe:He;case"S":if(n)return Ke;case"SS":if(n)return Xe;case"SSS":if(n)return Je;case"DDD":return Ye;case"MMM":case"MMMM":case"dd":case"ddd":case"dddd":return Be;case"a":case"A":return t._locale._meridiemParse;case"x":return Ge;case"X":return qe;case"Z":case"ZZ":return We;case"T":return Ue;case"SSSS":return Ve;case"MM":case"DD":case"YY":case"GG":case"gg":case"HH":case"hh":case"mm":case"ss":case"ww":case"WW":return n?Xe:je;case"M":case"D":case"d":case"H":case"h":case"m":case"s":case"w":case"W":case"e":case"E":return je;case"Do":return n?t._locale._ordinalParse:t._locale._ordinalParseLenient;default:return new RegExp(X(K(e.replace("\\",""))))}}function H(e){var t=(e=e||"").match(We)||[],n=((t[t.length-1]||[])+"").match(it)||["-",0,0],r=60*n[1]+$(n[2]);return"+"===n[0]?r:-r}function V(e,t,n){var r,i=n._a;switch(e){case"Q":null!=t&&(i[Se]=3*($(t)-1));break;case"M":case"MM":null!=t&&(i[Se]=$(t)-1);break;case"MMM":case"MMMM":null!=(r=n._locale.monthsParse(t,e,n._strict))?i[Se]=r:n._pf.invalidMonth=t;break;case"D":case"DD":null!=t&&(i[$e]=$(t));break;case"Do":null!=t&&(i[$e]=$(parseInt(t.match(/\d{1,2}/)[0],10)));break;case"DDD":case"DDDD":null!=t&&(n._dayOfYear=$(t));break;case"YY":i[ke]=ye.parseTwoDigitYear(t);break;case"YYYY":case"YYYYY":case"YYYYYY":i[ke]=$(t);break;case"a":case"A":n._meridiem=t;break;case"h":case"hh":n._pf.bigHour=!0;case"H":case"HH":i[Me]=$(t);break;case"m":case"mm":i[Te]=$(t);break;case"s":case"ss":i[De]=$(t);break;case"S":case"SS":case"SSS":case"SSSS":i[Ee]=$(1e3*("0."+t));break;case"x":n._d=new Date($(t));break;case"X":n._d=new Date(1e3*parseFloat(t));break;case"Z":case"ZZ":n._useUTC=!0,n._tzm=H(t);break;case"dd":case"ddd":case"dddd":null!=(r=n._locale.weekdaysParse(t))?(n._w=n._w||{},n._w.d=r):n._pf.invalidWeekday=t;break;case"w":case"ww":case"W":case"WW":case"d":case"e":case"E":e=e.substr(0,1);case"gggg":case"GGGG":case"GGGGG":e=e.substr(0,2),t&&(n._w=n._w||{},n._w[e]=$(t));break;case"gg":case"GG":n._w=n._w||{},n._w[e]=ye.parseTwoDigitYear(t)}}function B(e){var n,r,i,o,a,s,l;null!=(n=e._w).GG||null!=n.W||null!=n.E?(a=1,s=4,r=t(n.GG,e._a[ke],se(ye(),1,4).year),i=t(n.W,1),o=t(n.E,1)):(a=e._locale._week.dow,s=e._locale._week.doy,r=t(n.gg,e._a[ke],se(ye(),a,s).year),i=t(n.w,1),null!=n.d?(o=n.d)<a&&++i:o=null!=n.e?n.e+a:a),l=le(r,i,o,s,a),e._a[ke]=l.year,e._dayOfYear=l.dayOfYear}function W(e){var n,r,i,o,a=[];if(!e._d){for(i=G(e),e._w&&null==e._a[$e]&&null==e._a[Se]&&B(e),e._dayOfYear&&(o=t(e._a[ke],i[ke]),e._dayOfYear>D(o)&&(e._pf._overflowDayOfYear=!0),r=re(o,0,e._dayOfYear),e._a[Se]=r.getUTCMonth(),e._a[$e]=r.getUTCDate()),n=0;n<3&&null==e._a[n];++n)e._a[n]=a[n]=i[n];for(;n<7;n++)e._a[n]=a[n]=null==e._a[n]?2===n?1:0:e._a[n];24===e._a[Me]&&0===e._a[Te]&&0===e._a[De]&&0===e._a[Ee]&&(e._nextDay=!0,e._a[Me]=0),e._d=(e._useUTC?re:ne).apply(null,a),null!=e._tzm&&e._d.setUTCMinutes(e._d.getUTCMinutes()-e._tzm),e._nextDay&&(e._a[Me]=24)}}function U(e){var t;e._d||(t=S(e._i),e._a=[t.year,t.month,t.day||t.date,t.hour,t.minute,t.second,t.millisecond],W(e))}function G(e){var t=new Date;return e._useUTC?[t.getUTCFullYear(),t.getUTCMonth(),t.getUTCDate()]:[t.getFullYear(),t.getMonth(),t.getDate()]}function q(t){if(t._f!==ye.ISO_8601){t._a=[],t._pf.empty=!0;var n,r,i,o,a,s=""+t._i,l=s.length,c=0;for(i=Y(t._f,t._locale).match(Ne)||[],n=0;n<i.length;n++)o=i[n],(r=(s.match(z(o,t))||[])[0])&&((a=s.substr(0,s.indexOf(r))).length>0&&t._pf.unusedInput.push(a),s=s.slice(s.indexOf(r)+r.length),c+=r.length),ft[o]?(r?t._pf.empty=!1:t._pf.unusedTokens.push(o),V(o,r,t)):t._strict&&!r&&t._pf.unusedTokens.push(o);t._pf.charsLeftOver=l-c,s.length>0&&t._pf.unusedInput.push(s),!0===t._pf.bigHour&&t._a[Me]<=12&&(t._pf.bigHour=e),t._a[Me]=u(t._locale,t._a[Me],t._meridiem),W(t),L(t)}else Z(t)}function K(e){return e.replace(/\\(\[)|\\(\])|\[([^\]\[]*)\]|\\(.)/g,function(e,t,n,r,i){return t||n||r||i})}function X(e){return e.replace(/[-\/\\^$*+?.()|[\]{}]/g,"\\$&")}function J(e){var t,n,i,o,a;if(0===e._f.length)return e._pf.invalidFormat=!0,void(e._d=new Date(NaN));for(o=0;o<e._f.length;o++)a=0,t=h({},e),null!=e._useUTC&&(t._useUTC=e._useUTC),t._pf=r(),t._f=e._f[o],q(t),A(t)&&(a+=t._pf.charsLeftOver,a+=10*t._pf.unusedTokens.length,t._pf.score=a,(null==i||a<i)&&(i=a,n=t));p(e,n||t)}function Z(e){var t,n,r=e._i,i=tt.exec(r);if(i){for(e._pf.iso=!0,t=0,n=nt.length;t<n;t++)if(nt[t][1].exec(r)){e._f=nt[t][0]+(i[6]||" ");break}for(t=0,n=rt.length;t<n;t++)if(rt[t][1].exec(r)){e._f+=rt[t][0];break}r.match(We)&&(e._f+="Z"),q(e)}else e._isValid=!1}function Q(e){Z(e),!1===e._isValid&&(delete e._isValid,ye.createFromInputFallback(e))}function ee(e,t){var n,r=[];for(n=0;n<e.length;++n)r.push(t(e[n],n));return r}function te(t){var n,r=t._i;r===e?t._d=new Date:_(r)?t._d=new Date(+r):null!==(n=Pe.exec(r))?t._d=new Date(+n[1]):"string"==typeof r?Q(t):w(r)?(t._a=ee(r.slice(0),function(e){return parseInt(e,10)}),W(t)):"object"==typeof r?U(t):"number"==typeof r?t._d=new Date(r):ye.createFromInputFallback(t)}function ne(e,t,n,r,i,o,a){var s=new Date(e,t,n,r,i,o,a);return e<1970&&s.setFullYear(e),s}function re(e){var t=new Date(Date.UTC.apply(null,arguments));return e<1970&&t.setUTCFullYear(e),t}function ie(e,t){if("string"==typeof e)if(isNaN(e)){if("number"!=typeof(e=t.weekdaysParse(e)))return null}else e=parseInt(e,10);return e}function oe(e,t,n,r,i){return i.relativeTime(t||1,!!n,e,r)}function ae(e,t,n){var r=ye.duration(e).abs(),i=_e(r.as("s")),o=_e(r.as("m")),a=_e(r.as("h")),s=_e(r.as("d")),l=_e(r.as("M")),u=_e(r.as("y")),c=i<ut.s&&["s",i]||1===o&&["m"]||o<ut.m&&["mm",o]||1===a&&["h"]||a<ut.h&&["hh",a]||1===s&&["d"]||s<ut.d&&["dd",s]||1===l&&["M"]||l<ut.M&&["MM",l]||1===u&&["y"]||["yy",u];return c[2]=t,c[3]=+e>0,c[4]=n,oe.apply({},c)}function se(e,t,n){var r,i=n-t,o=n-e.day();return o>i&&(o-=7),o<i-7&&(o+=7),r=ye(e).add(o,"d"),{week:Math.ceil(r.dayOfYear()/7),year:r.year()}}function le(e,t,n,r,i){var o,a,s=re(e,0,1).getUTCDay();return s=0===s?7:s,n=null!=n?n:i,o=i-s+(s>r?7:0)-(s<i?7:0),a=7*(t-1)+(n-i)+o+1,{year:a>0?e:e-1,dayOfYear:a>0?a:D(e-1)+a}}function ue(t){var n,r=t._i,i=t._f;return t._locale=t._locale||ye.localeData(t._l),null===r||i===e&&""===r?ye.invalid({nullInput:!0}):("string"==typeof r&&(t._i=r=t._locale.preparse(r)),ye.isMoment(r)?new d(r,!0):(i?w(i)?J(t):q(t):te(t),(n=new d(t))._nextDay&&(n.add(1,"d"),n._nextDay=e),n))}function ce(e,t){var n,r;if(1===t.length&&w(t[0])&&(t=t[0]),!t.length)return ye();for(n=t[0],r=1;r<t.length;++r)t[r][e](n)&&(n=t[r]);return n}function de(e,t){var n;return"string"==typeof t&&"number"!=typeof(t=e.localeData().monthsParse(t))?e:(n=Math.min(e.date(),M(e.year(),t)),e._d["set"+(e._isUTC?"UTC":"")+"Month"](t,n),e)}function fe(e,t){return e._d["get"+(e._isUTC?"UTC":"")+t]()}function pe(e,t,n){return"Month"===t?de(e,n):e._d["set"+(e._isUTC?"UTC":"")+t](n)}function he(e,t){return function(n){return null!=n?(pe(this,e,n),ye.updateOffset(this,t),this):fe(this,e)}}function ge(e){return 400*e/146097}function me(e){return 146097*e/400}function ve(e){"undefined"==typeof ender&&(be=we.moment,we.moment=e?o("Accessing Moment through the global scope is deprecated, and will be removed in an upcoming release.",ye):ye)}for(var ye,be,xe,we="undefined"==typeof global||"undefined"!=typeof window&&window!==global.window?this:global,_e=Math.round,Ce=Object.prototype.hasOwnProperty,ke=0,Se=1,$e=2,Me=3,Te=4,De=5,Ee=6,Le={},Ae=[],Re="undefined"!=typeof module&&module&&module.exports,Pe=/^\/?Date\((\-?\d+)/i,Fe=/(\-)?(?:(\d*)\.)?(\d+)\:(\d+)(?:\:(\d+)\.?(\d{3})?)?/,Oe=/^(-)?P(?:(?:([0-9,.]*)Y)?(?:([0-9,.]*)M)?(?:([0-9,.]*)D)?(?:T(?:([0-9,.]*)H)?(?:([0-9,.]*)M)?(?:([0-9,.]*)S)?)?|([0-9,.]*)W)$/,Ne=/(\[[^\[]*\])|(\\)?(Mo|MM?M?M?|Do|DDDo|DD?D?D?|ddd?d?|do?|w[o|w]?|W[o|W]?|Q|YYYYYY|YYYYY|YYYY|YY|gg(ggg?)?|GG(GGG?)?|e|E|a|A|hh?|HH?|mm?|ss?|S{1,4}|x|X|zz?|ZZ?|.)/g,Ie=/(\[[^\[]*\])|(\\)?(LTS|LT|LL?L?L?|l{1,4})/g,je=/\d\d?/,Ye=/\d{1,3}/,ze=/\d{1,4}/,He=/[+\-]?\d{1,6}/,Ve=/\d+/,Be=/[0-9]*['a-z\u00A0-\u05FF\u0700-\uD7FF\uF900-\uFDCF\uFDF0-\uFFEF]+|[\u0600-\u06FF\/]+(\s*?[\u0600-\u06FF]+){1,2}/i,We=/Z|[\+\-]\d\d:?\d\d/gi,Ue=/T/i,Ge=/[\+\-]?\d+/,qe=/[\+\-]?\d+(\.\d{1,3})?/,Ke=/\d/,Xe=/\d\d/,Je=/\d{3}/,Ze=/\d{4}/,Qe=/[+-]?\d{6}/,et=/[+-]?\d+/,tt=/^\s*(?:[+-]\d{6}|\d{4})-(?:(\d\d-\d\d)|(W\d\d$)|(W\d\d-\d)|(\d\d\d))((T| )(\d\d(:\d\d(:\d\d(\.\d+)?)?)?)?([\+\-]\d\d(?::?\d\d)?|\s*Z)?)?$/,nt=[["YYYYYY-MM-DD",/[+-]\d{6}-\d{2}-\d{2}/],["YYYY-MM-DD",/\d{4}-\d{2}-\d{2}/],["GGGG-[W]WW-E",/\d{4}-W\d{2}-\d/],["GGGG-[W]WW",/\d{4}-W\d{2}/],["YYYY-DDD",/\d{4}-\d{3}/]],rt=[["HH:mm:ss.SSSS",/(T| )\d\d:\d\d:\d\d\.\d+/],["HH:mm:ss",/(T| )\d\d:\d\d:\d\d/],["HH:mm",/(T| )\d\d:\d\d/],["HH",/(T| )\d\d/]],it=/([\+\-]|\d\d)/gi,ot=("Date|Hours|Minutes|Seconds|Milliseconds".split("|"),{Milliseconds:1,Seconds:1e3,Minutes:6e4,Hours:36e5,Days:864e5,Months:2592e6,Years:31536e6}),at={ms:"millisecond",s:"second",m:"minute",h:"hour",d:"day",D:"date",w:"week",W:"isoWeek",M:"month",Q:"quarter",y:"year",DDD:"dayOfYear",e:"weekday",E:"isoWeekday",gg:"weekYear",GG:"isoWeekYear"},st={dayofyear:"dayOfYear",isoweekday:"isoWeekday",isoweek:"isoWeek",weekyear:"weekYear",isoweekyear:"isoWeekYear"},lt={},ut={s:45,m:45,h:22,d:26,M:11},ct="DDD w W M D d".split(" "),dt="M D H h m s w W".split(" "),ft={M:function(){return this.month()+1},MMM:function(e){return this.localeData().monthsShort(this,e)},MMMM:function(e){return this.localeData().months(this,e)},D:function(){return this.date()},DDD:function(){return this.dayOfYear()},d:function(){return this.day()},dd:function(e){return this.localeData().weekdaysMin(this,e)},ddd:function(e){return this.localeData().weekdaysShort(this,e)},dddd:function(e){return this.localeData().weekdays(this,e)},w:function(){return this.week()},W:function(){return this.isoWeek()},YY:function(){return m(this.year()%100,2)},YYYY:function(){return m(this.year(),4)},YYYYY:function(){return m(this.year(),5)},YYYYYY:function(){var e=this.year();return(e>=0?"+":"-")+m(Math.abs(e),6)},gg:function(){return m(this.weekYear()%100,2)},gggg:function(){return m(this.weekYear(),4)},ggggg:function(){return m(this.weekYear(),5)},GG:function(){return m(this.isoWeekYear()%100,2)},GGGG:function(){return m(this.isoWeekYear(),4)},GGGGG:function(){return m(this.isoWeekYear(),5)},e:function(){return this.weekday()},E:function(){return this.isoWeekday()},a:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!0)},A:function(){return this.localeData().meridiem(this.hours(),this.minutes(),!1)},H:function(){return this.hours()},h:function(){return this.hours()%12||12},m:function(){return this.minutes()},s:function(){return this.seconds()},S:function(){return $(this.milliseconds()/100)},SS:function(){return m($(this.milliseconds()/10),2)},SSS:function(){return m(this.milliseconds(),3)},SSSS:function(){return m(this.milliseconds(),3)},Z:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+m($(e/60),2)+":"+m($(e)%60,2)},ZZ:function(){var e=this.utcOffset(),t="+";return e<0&&(e=-e,t="-"),t+m($(e/60),2)+m($(e)%60,2)},z:function(){return this.zoneAbbr()},zz:function(){return this.zoneName()},x:function(){return this.valueOf()},X:function(){return this.unix()},Q:function(){return this.quarter()}},pt={},ht=["months","monthsShort","weekdays","weekdaysShort","weekdaysMin"],gt=!1;ct.length;)xe=ct.pop(),ft[xe+"o"]=function(e,t){return function(n){return this.localeData().ordinal(e.call(this,n),t)}}(ft[xe],xe);for(;dt.length;)xe=dt.pop(),ft[xe+xe]=s(ft[xe],2);ft.DDDD=s(ft.DDD,3),p(c.prototype,{set:function(e){var t,n;for(n in e)"function"==typeof(t=e[n])?this[n]=t:this["_"+n]=t;this._ordinalParseLenient=new RegExp(this._ordinalParse.source+"|"+/\d{1,2}/.source)},_months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),months:function(e){return this._months[e.month()]},_monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),monthsShort:function(e){return this._monthsShort[e.month()]},monthsParse:function(e,t,n){var r,i,o;for(this._monthsParse||(this._monthsParse=[],this._longMonthsParse=[],this._shortMonthsParse=[]),r=0;r<12;r++){if(i=ye.utc([2e3,r]),n&&!this._longMonthsParse[r]&&(this._longMonthsParse[r]=new RegExp("^"+this.months(i,"").replace(".","")+"$","i"),this._shortMonthsParse[r]=new RegExp("^"+this.monthsShort(i,"").replace(".","")+"$","i")),n||this._monthsParse[r]||(o="^"+this.months(i,"")+"|^"+this.monthsShort(i,""),this._monthsParse[r]=new RegExp(o.replace(".",""),"i")),n&&"MMMM"===t&&this._longMonthsParse[r].test(e))return r;if(n&&"MMM"===t&&this._shortMonthsParse[r].test(e))return r;if(!n&&this._monthsParse[r].test(e))return r}},_weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdays:function(e){return this._weekdays[e.day()]},_weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysShort:function(e){return this._weekdaysShort[e.day()]},_weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),weekdaysMin:function(e){return this._weekdaysMin[e.day()]},weekdaysParse:function(e){var t,n,r;for(this._weekdaysParse||(this._weekdaysParse=[]),t=0;t<7;t++)if(this._weekdaysParse[t]||(n=ye([2e3,1]).day(t),r="^"+this.weekdays(n,"")+"|^"+this.weekdaysShort(n,"")+"|^"+this.weekdaysMin(n,""),this._weekdaysParse[t]=new RegExp(r.replace(".",""),"i")),this._weekdaysParse[t].test(e))return t},_longDateFormat:{LTS:"h:mm:ss A",LT:"h:mm A",L:"MM/DD/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM D, YYYY LT"},longDateFormat:function(e){var t=this._longDateFormat[e];return!t&&this._longDateFormat[e.toUpperCase()]&&(t=this._longDateFormat[e.toUpperCase()].replace(/MMMM|MM|DD|dddd/g,function(e){return e.slice(1)}),this._longDateFormat[e]=t),t},isPM:function(e){return"p"===(e+"").toLowerCase().charAt(0)},_meridiemParse:/[ap]\.?m?\.?/i,meridiem:function(e,t,n){return e>11?n?"pm":"PM":n?"am":"AM"},_calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},calendar:function(e,t,n){var r=this._calendar[e];return"function"==typeof r?r.apply(t,[n]):r},_relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},relativeTime:function(e,t,n,r){var i=this._relativeTime[n];return"function"==typeof i?i(e,t,n,r):i.replace(/%d/i,e)},pastFuture:function(e,t){var n=this._relativeTime[e>0?"future":"past"];return"function"==typeof n?n(t):n.replace(/%s/i,t)},ordinal:function(e){return this._ordinal.replace("%d",e)},_ordinal:"%d",_ordinalParse:/\d{1,2}/,preparse:function(e){return e},postformat:function(e){return e},week:function(e){return se(e,this._week.dow,this._week.doy).week},_week:{dow:0,doy:6},firstDayOfWeek:function(){return this._week.dow},firstDayOfYear:function(){return this._week.doy},_invalidDate:"Invalid date",invalidDate:function(){return this._invalidDate}}),(ye=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._i=t,a._f=n,a._l=i,a._strict=o,a._isUTC=!1,a._pf=r(),ue(a)}).suppressDeprecationWarnings=!1,ye.createFromInputFallback=o("moment construction falls back to js Date. This is discouraged and will be removed in upcoming major release. Please refer to https://github.com/moment/moment/issues/1407 for more info.",function(e){e._d=new Date(e._i+(e._useUTC?" UTC":""))}),ye.min=function(){return ce("isBefore",[].slice.call(arguments,0))},ye.max=function(){return ce("isAfter",[].slice.call(arguments,0))},ye.utc=function(t,n,i,o){var a;return"boolean"==typeof i&&(o=i,i=e),a={},a._isAMomentObject=!0,a._useUTC=!0,a._isUTC=!0,a._l=i,a._i=t,a._f=n,a._strict=o,a._pf=r(),ue(a).utc()},ye.unix=function(e){return ye(1e3*e)},ye.duration=function(e,t){var r,i,o,a,s=e,l=null;return ye.isDuration(e)?s={ms:e._milliseconds,d:e._days,M:e._months}:"number"==typeof e?(s={},t?s[t]=e:s.milliseconds=e):(l=Fe.exec(e))?(r="-"===l[1]?-1:1,s={y:0,d:$(l[$e])*r,h:$(l[Me])*r,m:$(l[Te])*r,s:$(l[De])*r,ms:$(l[Ee])*r}):(l=Oe.exec(e))?(r="-"===l[1]?-1:1,s={y:(o=function(e){var t=e&&parseFloat(e.replace(",","."));return(isNaN(t)?0:t)*r})(l[2]),M:o(l[3]),d:o(l[4]),h:o(l[5]),m:o(l[6]),s:o(l[7]),w:o(l[8])}):null==s?s={}:"object"==typeof s&&("from"in s||"to"in s)&&(a=y(ye(s.from),ye(s.to)),(s={}).ms=a.milliseconds,s.M=a.months),i=new f(s),ye.isDuration(e)&&n(e,"_locale")&&(i._locale=e._locale),i},ye.version="2.9.0",ye.defaultFormat="YYYY-MM-DDTHH:mm:ssZ",ye.ISO_8601=function(){},ye.momentProperties=Ae,ye.updateOffset=function(){},ye.relativeTimeThreshold=function(t,n){return ut[t]!==e&&(n===e?ut[t]:(ut[t]=n,!0))},ye.lang=o("moment.lang is deprecated. Use moment.locale instead.",function(e,t){return ye.locale(e,t)}),ye.locale=function(e,t){var n;return e&&(n=void 0!==t?ye.defineLocale(e,t):ye.localeData(e))&&(ye.duration._locale=ye._locale=n),ye._locale._abbr},ye.defineLocale=function(e,t){return null!==t?(t.abbr=e,Le[e]||(Le[e]=new c),Le[e].set(t),ye.locale(e),Le[e]):(delete Le[e],null)},ye.langData=o("moment.langData is deprecated. Use moment.localeData instead.",function(e){return ye.localeData(e)}),ye.localeData=function(e){var t;if(e&&e._locale&&e._locale._abbr&&(e=e._locale._abbr),!e)return ye._locale;if(!w(e)){if(t=F(e))return t;e=[e]}return P(e)},ye.isMoment=function(e){return e instanceof d||null!=e&&n(e,"_isAMomentObject")},ye.isDuration=function(e){return e instanceof f};for(xe=ht.length-1;xe>=0;--xe)!function(t){var n,r;if(0===t.indexOf("week"))n=7,r="day";else{if(0!==t.indexOf("month"))return;n=12,r="month"}ye[t]=function(i,o){var a,s,l=ye._locale[t],u=[];if("number"==typeof i&&(o=i,i=e),s=function(e){var t=ye().utc().set(r,e);return l.call(ye._locale,t,i||"")},null!=o)return s(o);for(a=0;a<n;a++)u.push(s(a));return u}}(ht[xe]);ye.normalizeUnits=function(e){return k(e)},ye.invalid=function(e){var t=ye.utc(NaN);return null!=e?p(t._pf,e):t._pf.userInvalidated=!0,t},ye.parseZone=function(){return ye.apply(null,arguments).parseZone()},ye.parseTwoDigitYear=function(e){return $(e)+($(e)>68?1900:2e3)},ye.isDate=_,p(ye.fn=d.prototype,{clone:function(){return ye(this)},valueOf:function(){return+this._d-6e4*(this._offset||0)},unix:function(){return Math.floor(+this/1e3)},toString:function(){return this.clone().locale("en").format("ddd MMM DD YYYY HH:mm:ss [GMT]ZZ")},toDate:function(){return this._offset?new Date(+this):this._d},toISOString:function(){var e=ye(this).utc();return 0<e.year()&&e.year()<=9999?"function"==typeof Date.prototype.toISOString?this.toDate().toISOString():j(e,"YYYY-MM-DD[T]HH:mm:ss.SSS[Z]"):j(e,"YYYYYY-MM-DD[T]HH:mm:ss.SSS[Z]")},toArray:function(){var e=this;return[e.year(),e.month(),e.date(),e.hours(),e.minutes(),e.seconds(),e.milliseconds()]},isValid:function(){return A(this)},isDSTShifted:function(){return!!this._a&&(this.isValid()&&C(this._a,(this._isUTC?ye.utc(this._a):ye(this._a)).toArray())>0)},parsingFlags:function(){return p({},this._pf)},invalidAt:function(){return this._pf.overflow},utc:function(e){return this.utcOffset(0,e)},local:function(e){return this._isUTC&&(this.utcOffset(0,e),this._isUTC=!1,e&&this.subtract(this._dateUtcOffset(),"m")),this},format:function(e){var t=j(this,e||ye.defaultFormat);return this.localeData().postformat(t)},add:b(1,"add"),subtract:b(-1,"subtract"),diff:function(e,t,n){var r,i,o=O(e,this),a=6e4*(o.utcOffset()-this.utcOffset());return t=k(t),"year"===t||"month"===t||"quarter"===t?(i=l(this,o),"quarter"===t?i/=3:"year"===t&&(i/=12)):(r=this-o,i="second"===t?r/1e3:"minute"===t?r/6e4:"hour"===t?r/36e5:"day"===t?(r-a)/864e5:"week"===t?(r-a)/6048e5:r),n?i:g(i)},from:function(e,t){return ye.duration({to:this,from:e}).locale(this.locale()).humanize(!t)},fromNow:function(e){return this.from(ye(),e)},calendar:function(e){var t=e||ye(),n=O(t,this).startOf("day"),r=this.diff(n,"days",!0),i=r<-6?"sameElse":r<-1?"lastWeek":r<0?"lastDay":r<1?"sameDay":r<2?"nextDay":r<7?"nextWeek":"sameElse";return this.format(this.localeData().calendar(i,this,ye(t)))},isLeapYear:function(){return E(this.year())},isDST:function(){return this.utcOffset()>this.clone().month(0).utcOffset()||this.utcOffset()>this.clone().month(5).utcOffset()},day:function(e){var t=this._isUTC?this._d.getUTCDay():this._d.getDay();return null!=e?(e=ie(e,this.localeData()),this.add(e-t,"d")):t},month:he("Month",!0),startOf:function(e){switch(e=k(e)){case"year":this.month(0);case"quarter":case"month":this.date(1);case"week":case"isoWeek":case"day":this.hours(0);case"hour":this.minutes(0);case"minute":this.seconds(0);case"second":this.milliseconds(0)}return"week"===e?this.weekday(0):"isoWeek"===e&&this.isoWeekday(1),"quarter"===e&&this.month(3*Math.floor(this.month()/3)),this},endOf:function(t){return t=k(t),t===e||"millisecond"===t?this:this.startOf(t).add(1,"isoWeek"===t?"week":t).subtract(1,"ms")},isAfter:function(e,t){return t=k(void 0!==t?t:"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+this>+e):(ye.isMoment(e)?+e:+ye(e))<+this.clone().startOf(t)},isBefore:function(e,t){var n;return t=k(void 0!==t?t:"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+this<+e):(n=ye.isMoment(e)?+e:+ye(e),+this.clone().endOf(t)<n)},isBetween:function(e,t,n){return this.isAfter(e,n)&&this.isBefore(t,n)},isSame:function(e,t){var n;return t=k(t||"millisecond"),"millisecond"===t?(e=ye.isMoment(e)?e:ye(e),+this==+e):(n=+ye(e),+this.clone().startOf(t)<=n&&n<=+this.clone().endOf(t))},min:o("moment().min is deprecated, use moment.min instead. https://github.com/moment/moment/issues/1548",function(e){return e=ye.apply(null,arguments),e<this?this:e}),max:o("moment().max is deprecated, use moment.max instead. https://github.com/moment/moment/issues/1548",function(e){return e=ye.apply(null,arguments),e>this?this:e}),zone:o("moment().zone is deprecated, use moment().utcOffset instead. https://github.com/moment/moment/issues/1779",function(e,t){return null!=e?("string"!=typeof e&&(e=-e),this.utcOffset(e,t),this):-this.utcOffset()}),utcOffset:function(e,t){var n,r=this._offset||0;return null!=e?("string"==typeof e&&(e=H(e)),Math.abs(e)<16&&(e*=60),!this._isUTC&&t&&(n=this._dateUtcOffset()),this._offset=e,this._isUTC=!0,null!=n&&this.add(n,"m"),r!==e&&(!t||this._changeInProgress?x(this,ye.duration(e-r,"m"),1,!1):this._changeInProgress||(this._changeInProgress=!0,ye.updateOffset(this,!0),this._changeInProgress=null)),this):this._isUTC?r:this._dateUtcOffset()},isLocal:function(){return!this._isUTC},isUtcOffset:function(){return this._isUTC},isUtc:function(){return this._isUTC&&0===this._offset},zoneAbbr:function(){return this._isUTC?"UTC":""},zoneName:function(){return this._isUTC?"Coordinated Universal Time":""},parseZone:function(){return this._tzm?this.utcOffset(this._tzm):"string"==typeof this._i&&this.utcOffset(H(this._i)),this},hasAlignedHourOffset:function(e){return e=e?ye(e).utcOffset():0,(this.utcOffset()-e)%60==0},daysInMonth:function(){return M(this.year(),this.month())},dayOfYear:function(e){var t=_e((ye(this).startOf("day")-ye(this).startOf("year"))/864e5)+1;return null==e?t:this.add(e-t,"d")},quarter:function(e){return null==e?Math.ceil((this.month()+1)/3):this.month(3*(e-1)+this.month()%3)},weekYear:function(e){var t=se(this,this.localeData()._week.dow,this.localeData()._week.doy).year;return null==e?t:this.add(e-t,"y")},isoWeekYear:function(e){var t=se(this,1,4).year;return null==e?t:this.add(e-t,"y")},week:function(e){var t=this.localeData().week(this);return null==e?t:this.add(7*(e-t),"d")},isoWeek:function(e){var t=se(this,1,4).week;return null==e?t:this.add(7*(e-t),"d")},weekday:function(e){var t=(this.day()+7-this.localeData()._week.dow)%7;return null==e?t:this.add(e-t,"d")},isoWeekday:function(e){return null==e?this.day()||7:this.day(this.day()%7?e:e-7)},isoWeeksInYear:function(){return T(this.year(),1,4)},weeksInYear:function(){var e=this.localeData()._week;return T(this.year(),e.dow,e.doy)},get:function(e){return e=k(e),this[e]()},set:function(e,t){var n;if("object"==typeof e)for(n in e)this.set(n,e[n]);else"function"==typeof this[e=k(e)]&&this[e](t);return this},locale:function(t){var n;return t===e?this._locale._abbr:(null!=(n=ye.localeData(t))&&(this._locale=n),this)},lang:o("moment().lang() is deprecated. Instead, use moment().localeData() to get the language configuration. Use moment().locale() to change languages.",function(t){return t===e?this.localeData():this.locale(t)}),localeData:function(){return this._locale},_dateUtcOffset:function(){return 15*-Math.round(this._d.getTimezoneOffset()/15)}}),ye.fn.millisecond=ye.fn.milliseconds=he("Milliseconds",!1),ye.fn.second=ye.fn.seconds=he("Seconds",!1),ye.fn.minute=ye.fn.minutes=he("Minutes",!1),ye.fn.hour=ye.fn.hours=he("Hours",!0),ye.fn.date=he("Date",!0),ye.fn.dates=o("dates accessor is deprecated. Use date instead.",he("Date",!0)),ye.fn.year=he("FullYear",!0),ye.fn.years=o("years accessor is deprecated. Use year instead.",he("FullYear",!0)),ye.fn.days=ye.fn.day,ye.fn.months=ye.fn.month,ye.fn.weeks=ye.fn.week,ye.fn.isoWeeks=ye.fn.isoWeek,ye.fn.quarters=ye.fn.quarter,ye.fn.toJSON=ye.fn.toISOString,ye.fn.isUTC=ye.fn.isUtc,p(ye.duration.fn=f.prototype,{_bubble:function(){var e,t,n,r=this._milliseconds,i=this._days,o=this._months,a=this._data,s=0;a.milliseconds=r%1e3,e=g(r/1e3),a.seconds=e%60,t=g(e/60),a.minutes=t%60,n=g(t/60),a.hours=n%24,i+=g(n/24),o+=g((i-=g(me(s=g(ge(i)))))/30),i%=30,s+=g(o/12),o%=12,a.days=i,a.months=o,a.years=s},abs:function(){return this._milliseconds=Math.abs(this._milliseconds),this._days=Math.abs(this._days),this._months=Math.abs(this._months),this._data.milliseconds=Math.abs(this._data.milliseconds),this._data.seconds=Math.abs(this._data.seconds),this._data.minutes=Math.abs(this._data.minutes),this._data.hours=Math.abs(this._data.hours),this._data.months=Math.abs(this._data.months),this._data.years=Math.abs(this._data.years),this},weeks:function(){return g(this.days()/7)},valueOf:function(){return this._milliseconds+864e5*this._days+this._months%12*2592e6+31536e6*$(this._months/12)},humanize:function(e){var t=ae(this,!e,this.localeData());return e&&(t=this.localeData().pastFuture(+this,t)),this.localeData().postformat(t)},add:function(e,t){var n=ye.duration(e,t);return this._milliseconds+=n._milliseconds,this._days+=n._days,this._months+=n._months,this._bubble(),this},subtract:function(e,t){var n=ye.duration(e,t);return this._milliseconds-=n._milliseconds,this._days-=n._days,this._months-=n._months,this._bubble(),this},get:function(e){return e=k(e),this[e.toLowerCase()+"s"]()},as:function(e){var t,n;if("month"===(e=k(e))||"year"===e)return t=this._days+this._milliseconds/864e5,n=this._months+12*ge(t),"month"===e?n:n/12;switch(t=this._days+Math.round(me(this._months/12)),e){case"week":return t/7+this._milliseconds/6048e5;case"day":return t+this._milliseconds/864e5;case"hour":return 24*t+this._milliseconds/36e5;case"minute":return 24*t*60+this._milliseconds/6e4;case"second":return 24*t*60*60+this._milliseconds/1e3;case"millisecond":return Math.floor(24*t*60*60*1e3)+this._milliseconds;default:throw new Error("Unknown unit "+e)}},lang:ye.fn.lang,locale:ye.fn.locale,toIsoString:o("toIsoString() is deprecated. Please use toISOString() instead (notice the capitals)",function(){return this.toISOString()}),toISOString:function(){var e=Math.abs(this.years()),t=Math.abs(this.months()),n=Math.abs(this.days()),r=Math.abs(this.hours()),i=Math.abs(this.minutes()),o=Math.abs(this.seconds()+this.milliseconds()/1e3);return this.asSeconds()?(this.asSeconds()<0?"-":"")+"P"+(e?e+"Y":"")+(t?t+"M":"")+(n?n+"D":"")+(r||i||o?"T":"")+(r?r+"H":"")+(i?i+"M":"")+(o?o+"S":""):"P0D"},localeData:function(){return this._locale},toJSON:function(){return this.toISOString()}}),ye.duration.fn.toString=ye.duration.fn.toISOString;for(xe in ot)n(ot,xe)&&function(e){ye.duration.fn[e]=function(){return this._data[e]}}(xe.toLowerCase());ye.duration.fn.asMilliseconds=function(){return this.as("ms")},ye.duration.fn.asSeconds=function(){return this.as("s")},ye.duration.fn.asMinutes=function(){return this.as("m")},ye.duration.fn.asHours=function(){return this.as("h")},ye.duration.fn.asDays=function(){return this.as("d")},ye.duration.fn.asWeeks=function(){return this.as("weeks")},ye.duration.fn.asMonths=function(){return this.as("M")},ye.duration.fn.asYears=function(){return this.as("y")},ye.locale("en",{ordinalParse:/\d{1,2}(th|st|nd|rd)/,ordinal:function(e){var t=e%10;return e+(1===$(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}}),function(e){!function(e){e.defineLocale("af",{months:"Januarie_Februarie_Maart_April_Mei_Junie_Julie_Augustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Aug_Sep_Okt_Nov_Des".split("_"),weekdays:"Sondag_Maandag_Dinsdag_Woensdag_Donderdag_Vrydag_Saterdag".split("_"),weekdaysShort:"Son_Maa_Din_Woe_Don_Vry_Sat".split("_"),weekdaysMin:"So_Ma_Di_Wo_Do_Vr_Sa".split("_"),meridiemParse:/vm|nm/i,isPM:function(e){return/^nm$/i.test(e)},meridiem:function(e,t,n){return e<12?n?"vm":"VM":n?"nm":"NM"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Vandag om] LT",nextDay:"[Môre om] LT",nextWeek:"dddd [om] LT",lastDay:"[Gister om] LT",lastWeek:"[Laas] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oor %s",past:"%s gelede",s:"'n paar sekondes",m:"'n minuut",mm:"%d minute",h:"'n uur",hh:"%d ure",d:"'n dag",dd:"%d dae",M:"'n maand",MM:"%d maande",y:"'n jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("ar-ma",{months:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_ماي_يونيو_يوليوز_غشت_شتنبر_أكتوبر_نونبر_دجنبر".split("_"),weekdays:"الأحد_الإتنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"احد_اتنين_ثلاثاء_اربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"};e.defineLocale("ar-sa",{months:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"يناير_فبراير_مارس_أبريل_مايو_يونيو_يوليو_أغسطس_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){e.defineLocale("ar-tn",{months:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),monthsShort:"جانفي_فيفري_مارس_أفريل_ماي_جوان_جويلية_أوت_سبتمبر_أكتوبر_نوفمبر_ديسمبر".split("_"),weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[اليوم على الساعة] LT",nextDay:"[غدا على الساعة] LT",nextWeek:"dddd [على الساعة] LT",lastDay:"[أمس على الساعة] LT",lastWeek:"dddd [على الساعة] LT",sameElse:"L"},relativeTime:{future:"في %s",past:"منذ %s",s:"ثوان",m:"دقيقة",mm:"%d دقائق",h:"ساعة",hh:"%d ساعات",d:"يوم",dd:"%d أيام",M:"شهر",MM:"%d أشهر",y:"سنة",yy:"%d سنوات"},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){var t={1:"١",2:"٢",3:"٣",4:"٤",5:"٥",6:"٦",7:"٧",8:"٨",9:"٩",0:"٠"},n={"١":"1","٢":"2","٣":"3","٤":"4","٥":"5","٦":"6","٧":"7","٨":"8","٩":"9","٠":"0"},r=function(e){return 0===e?0:1===e?1:2===e?2:e%100>=3&&e%100<=10?3:e%100>=11?4:5},i={s:["أقل من ثانية","ثانية واحدة",["ثانيتان","ثانيتين"],"%d ثوان","%d ثانية","%d ثانية"],m:["أقل من دقيقة","دقيقة واحدة",["دقيقتان","دقيقتين"],"%d دقائق","%d دقيقة","%d دقيقة"],h:["أقل من ساعة","ساعة واحدة",["ساعتان","ساعتين"],"%d ساعات","%d ساعة","%d ساعة"],d:["أقل من يوم","يوم واحد",["يومان","يومين"],"%d أيام","%d يومًا","%d يوم"],M:["أقل من شهر","شهر واحد",["شهران","شهرين"],"%d أشهر","%d شهرا","%d شهر"],y:["أقل من عام","عام واحد",["عامان","عامين"],"%d أعوام","%d عامًا","%d عام"]},o=function(e){return function(t,n,o,a){var s=r(t),l=i[e][r(t)];return 2===s&&(l=l[n?0:1]),l.replace(/%d/i,t)}},a=["كانون الثاني يناير","شباط فبراير","آذار مارس","نيسان أبريل","أيار مايو","حزيران يونيو","تموز يوليو","آب أغسطس","أيلول سبتمبر","تشرين الأول أكتوبر","تشرين الثاني نوفمبر","كانون الأول ديسمبر"];e.defineLocale("ar",{months:a,monthsShort:a,weekdays:"الأحد_الإثنين_الثلاثاء_الأربعاء_الخميس_الجمعة_السبت".split("_"),weekdaysShort:"أحد_إثنين_ثلاثاء_أربعاء_خميس_جمعة_سبت".split("_"),weekdaysMin:"ح_ن_ث_ر_خ_ج_س".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},meridiemParse:/ص|م/,isPM:function(e){return"م"===e},meridiem:function(e,t,n){return e<12?"ص":"م"},calendar:{sameDay:"[اليوم عند الساعة] LT",nextDay:"[غدًا عند الساعة] LT",nextWeek:"dddd [عند الساعة] LT",lastDay:"[أمس عند الساعة] LT",lastWeek:"dddd [عند الساعة] LT",sameElse:"L"},relativeTime:{future:"بعد %s",past:"منذ %s",s:o("s"),m:o("m"),mm:o("m"),h:o("h"),hh:o("h"),d:o("d"),dd:o("d"),M:o("M"),MM:o("M"),y:o("y"),yy:o("y")},preparse:function(e){return e.replace(/[١٢٣٤٥٦٧٨٩٠]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){var t={1:"-inci",5:"-inci",8:"-inci",70:"-inci",80:"-inci",2:"-nci",7:"-nci",20:"-nci",50:"-nci",3:"-üncü",4:"-üncü",100:"-üncü",6:"-ncı",9:"-uncu",10:"-uncu",30:"-uncu",60:"-ıncı",90:"-ıncı"};e.defineLocale("az",{months:"yanvar_fevral_mart_aprel_may_iyun_iyul_avqust_sentyabr_oktyabr_noyabr_dekabr".split("_"),monthsShort:"yan_fev_mar_apr_may_iyn_iyl_avq_sen_okt_noy_dek".split("_"),weekdays:"Bazar_Bazar ertəsi_Çərşənbə axşamı_Çərşənbə_Cümə axşamı_Cümə_Şənbə".split("_"),weekdaysShort:"Baz_BzE_ÇAx_Çər_CAx_Cüm_Şən".split("_"),weekdaysMin:"Bz_BE_ÇA_Çə_CA_Cü_Şə".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[sabah saat] LT",nextWeek:"[gələn həftə] dddd [saat] LT",lastDay:"[dünən] LT",lastWeek:"[keçən həftə] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s əvvəl",s:"birneçə saniyyə",m:"bir dəqiqə",mm:"%d dəqiqə",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir il",yy:"%d il"},meridiemParse:/gecə|səhər|gündüz|axşam/,isPM:function(e){return/^(gündüz|axşam)$/.test(e)},meridiem:function(e,t,n){return e<4?"gecə":e<12?"səhər":e<17?"gündüz":"axşam"},ordinalParse:/\d{1,2}-(ıncı|inci|nci|üncü|ncı|uncu)/,ordinal:function(e){if(0===e)return e+"-ıncı";var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"хвіліна_хвіліны_хвілін":"хвіліну_хвіліны_хвілін",hh:n?"гадзіна_гадзіны_гадзін":"гадзіну_гадзіны_гадзін",dd:"дзень_дні_дзён",MM:"месяц_месяцы_месяцаў",yy:"год_гады_гадоў"};return"m"===r?n?"хвіліна":"хвіліну":"h"===r?n?"гадзіна":"гадзіну":e+" "+t(i[r],+e)}function r(e,t){return{nominative:"студзень_люты_сакавік_красавік_травень_чэрвень_ліпень_жнівень_верасень_кастрычнік_лістапад_снежань".split("_"),accusative:"студзеня_лютага_сакавіка_красавіка_траўня_чэрвеня_ліпеня_жніўня_верасня_кастрычніка_лістапада_снежня".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function i(e,t){return{nominative:"нядзеля_панядзелак_аўторак_серада_чацвер_пятніца_субота".split("_"),accusative:"нядзелю_панядзелак_аўторак_сераду_чацвер_пятніцу_суботу".split("_")}[/\[ ?[Вв] ?(?:мінулую|наступную)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}e.defineLocale("be",{months:r,monthsShort:"студ_лют_сак_крас_трав_чэрв_ліп_жнів_вер_каст_ліст_снеж".split("_"),weekdays:i,weekdaysShort:"нд_пн_ат_ср_чц_пт_сб".split("_"),weekdaysMin:"нд_пн_ат_ср_чц_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сёння ў] LT",nextDay:"[Заўтра ў] LT",lastDay:"[Учора ў] LT",nextWeek:function(){return"[У] dddd [ў] LT"},lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return"[У мінулую] dddd [ў] LT";case 1:case 2:case 4:return"[У мінулы] dddd [ў] LT"}},sameElse:"L"},relativeTime:{future:"праз %s",past:"%s таму",s:"некалькі секунд",m:n,mm:n,h:n,hh:n,d:"дзень",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночы|раніцы|дня|вечара/,isPM:function(e){return/^(дня|вечара)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночы":e<12?"раніцы":e<17?"дня":"вечара"},ordinalParse:/\d{1,2}-(і|ы|га)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e%10!=2&&e%10!=3||e%100==12||e%100==13?e+"-ы":e+"-і";case"D":return e+"-га";default:return e}},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("bg",{months:"януари_февруари_март_април_май_юни_юли_август_септември_октомври_ноември_декември".split("_"),monthsShort:"янр_фев_мар_апр_май_юни_юли_авг_сеп_окт_ное_дек".split("_"),weekdays:"неделя_понеделник_вторник_сряда_четвъртък_петък_събота".split("_"),weekdaysShort:"нед_пон_вто_сря_чет_пет_съб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Днес в] LT",nextDay:"[Утре в] LT",nextWeek:"dddd [в] LT",lastDay:"[Вчера в] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[В изминалата] dddd [в] LT";case 1:case 2:case 4:case 5:return"[В изминалия] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"след %s",past:"преди %s",s:"няколко секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дни",M:"месец",MM:"%d месеца",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t={1:"১",2:"২",3:"৩",4:"৪",5:"৫",6:"৬",7:"৭",8:"৮",9:"৯",0:"০"},n={"১":"1","২":"2","৩":"3","৪":"4","৫":"5","৬":"6","৭":"7","৮":"8","৯":"9","০":"0"};e.defineLocale("bn",{months:"জানুয়ারী_ফেবুয়ারী_মার্চ_এপ্রিল_মে_জুন_জুলাই_অগাস্ট_সেপ্টেম্বর_অক্টোবর_নভেম্বর_ডিসেম্বর".split("_"),monthsShort:"জানু_ফেব_মার্চ_এপর_মে_জুন_জুল_অগ_সেপ্ট_অক্টো_নভ_ডিসেম্".split("_"),weekdays:"রবিবার_সোমবার_মঙ্গলবার_বুধবার_বৃহস্পত্তিবার_শুক্রুবার_শনিবার".split("_"),weekdaysShort:"রবি_সোম_মঙ্গল_বুধ_বৃহস্পত্তি_শুক্রু_শনি".split("_"),weekdaysMin:"রব_সম_মঙ্গ_বু_ব্রিহ_শু_শনি".split("_"),longDateFormat:{LT:"A h:mm সময়",LTS:"A h:mm:ss সময়",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[আজ] LT",nextDay:"[আগামীকাল] LT",nextWeek:"dddd, LT",lastDay:"[গতকাল] LT",lastWeek:"[গত] dddd, LT",sameElse:"L"},relativeTime:{future:"%s পরে",past:"%s আগে",s:"কএক সেকেন্ড",m:"এক মিনিট",mm:"%d মিনিট",h:"এক ঘন্টা",hh:"%d ঘন্টা",d:"এক দিন",dd:"%d দিন",M:"এক মাস",MM:"%d মাস",y:"এক বছর",yy:"%d বছর"},preparse:function(e){return e.replace(/[১২৩৪৫৬৭৮৯০]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/রাত|শকাল|দুপুর|বিকেল|রাত/,isPM:function(e){return/^(দুপুর|বিকেল|রাত)$/.test(e)},meridiem:function(e,t,n){return e<4?"রাত":e<10?"শকাল":e<17?"দুপুর":e<20?"বিকেল":"রাত"},week:{dow:0,doy:6}})}(ye)}(),function(e){!function(e){var t={1:"༡",2:"༢",3:"༣",4:"༤",5:"༥",6:"༦",7:"༧",8:"༨",9:"༩",0:"༠"},n={"༡":"1","༢":"2","༣":"3","༤":"4","༥":"5","༦":"6","༧":"7","༨":"8","༩":"9","༠":"0"};e.defineLocale("bo",{months:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),monthsShort:"ཟླ་བ་དང་པོ_ཟླ་བ་གཉིས་པ_ཟླ་བ་གསུམ་པ_ཟླ་བ་བཞི་པ_ཟླ་བ་ལྔ་པ_ཟླ་བ་དྲུག་པ_ཟླ་བ་བདུན་པ_ཟླ་བ་བརྒྱད་པ_ཟླ་བ་དགུ་པ_ཟླ་བ་བཅུ་པ_ཟླ་བ་བཅུ་གཅིག་པ_ཟླ་བ་བཅུ་གཉིས་པ".split("_"),weekdays:"གཟའ་ཉི་མ་_གཟའ་ཟླ་བ་_གཟའ་མིག་དམར་_གཟའ་ལྷག་པ་_གཟའ་ཕུར་བུ_གཟའ་པ་སངས་_གཟའ་སྤེན་པ་".split("_"),weekdaysShort:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),weekdaysMin:"ཉི་མ་_ཟླ་བ་_མིག་དམར་_ལྷག་པ་_ཕུར་བུ_པ་སངས་_སྤེན་པ་".split("_"),longDateFormat:{LT:"A h:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[དི་རིང] LT",nextDay:"[སང་ཉིན] LT",nextWeek:"[བདུན་ཕྲག་རྗེས་མ], LT",lastDay:"[ཁ་སང] LT",lastWeek:"[བདུན་ཕྲག་མཐའ་མ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s ལ་",past:"%s སྔན་ལ",s:"ལམ་སང",m:"སྐར་མ་གཅིག",mm:"%d སྐར་མ",h:"ཆུ་ཚོད་གཅིག",hh:"%d ཆུ་ཚོད",d:"ཉིན་གཅིག",dd:"%d ཉིན་",M:"ཟླ་བ་གཅིག",MM:"%d ཟླ་བ",y:"ལོ་གཅིག",yy:"%d ལོ"},preparse:function(e){return e.replace(/[༡༢༣༤༥༦༧༨༩༠]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/མཚན་མོ|ཞོགས་ཀས|ཉིན་གུང|དགོང་དག|མཚན་མོ/,isPM:function(e){return/^(ཉིན་གུང|དགོང་དག|མཚན་མོ)$/.test(e)},meridiem:function(e,t,n){return e<4?"མཚན་མོ":e<10?"ཞོགས་ཀས":e<17?"ཉིན་གུང":e<20?"དགོང་དག":"མཚན་མོ"},week:{dow:0,doy:6}})}(ye)}(),function(t){!function(t){function n(e,t,n){return e+" "+o({mm:"munutenn",MM:"miz",dd:"devezh"}[n],e)}function r(e){switch(i(e)){case 1:case 3:case 4:case 5:case 9:return e+" bloaz";default:return e+" vloaz"}}function i(e){return e>9?i(e%10):e}function o(e,t){return 2===t?a(e):e}function a(t){var n={m:"v",b:"v",d:"z"};return n[t.charAt(0)]===e?t:n[t.charAt(0)]+t.substring(1)}t.defineLocale("br",{months:"Genver_C'hwevrer_Meurzh_Ebrel_Mae_Mezheven_Gouere_Eost_Gwengolo_Here_Du_Kerzu".split("_"),monthsShort:"Gen_C'hwe_Meu_Ebr_Mae_Eve_Gou_Eos_Gwe_Her_Du_Ker".split("_"),weekdays:"Sul_Lun_Meurzh_Merc'her_Yaou_Gwener_Sadorn".split("_"),weekdaysShort:"Sul_Lun_Meu_Mer_Yao_Gwe_Sad".split("_"),weekdaysMin:"Su_Lu_Me_Mer_Ya_Gw_Sa".split("_"),longDateFormat:{LT:"h[e]mm A",LTS:"h[e]mm:ss A",L:"DD/MM/YYYY",LL:"D [a viz] MMMM YYYY",LLL:"D [a viz] MMMM YYYY LT",LLLL:"dddd, D [a viz] MMMM YYYY LT"},calendar:{sameDay:"[Hiziv da] LT",nextDay:"[Warc'hoazh da] LT",nextWeek:"dddd [da] LT",lastDay:"[Dec'h da] LT",lastWeek:"dddd [paset da] LT",sameElse:"L"},relativeTime:{future:"a-benn %s",past:"%s 'zo",s:"un nebeud segondennoù",m:"ur vunutenn",mm:n,h:"un eur",hh:"%d eur",d:"un devezh",dd:n,M:"ur miz",MM:n,y:"ur bloaz",yy:r},ordinalParse:/\d{1,2}(añ|vet)/,ordinal:function(e){return e+(1===e?"añ":"vet")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("bs",{months:"januar_februar_mart_april_maj_juni_juli_august_septembar_oktobar_novembar_decembar".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._aug._sep._okt._nov._dec.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("ca",{months:"gener_febrer_març_abril_maig_juny_juliol_agost_setembre_octubre_novembre_desembre".split("_"),monthsShort:"gen._febr._mar._abr._mai._jun._jul._ag._set._oct._nov._des.".split("_"),weekdays:"diumenge_dilluns_dimarts_dimecres_dijous_divendres_dissabte".split("_"),weekdaysShort:"dg._dl._dt._dc._dj._dv._ds.".split("_"),weekdaysMin:"Dg_Dl_Dt_Dc_Dj_Dv_Ds".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[avui a "+(1!==this.hours()?"les":"la")+"] LT"},nextDay:function(){return"[demà a "+(1!==this.hours()?"les":"la")+"] LT"},nextWeek:function(){return"dddd [a "+(1!==this.hours()?"les":"la")+"] LT"},lastDay:function(){return"[ahir a "+(1!==this.hours()?"les":"la")+"] LT"},lastWeek:function(){return"[el] dddd [passat a "+(1!==this.hours()?"les":"la")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"fa %s",s:"uns segons",m:"un minut",mm:"%d minuts",h:"una hora",hh:"%d hores",d:"un dia",dd:"%d dies",M:"un mes",MM:"%d mesos",y:"un any",yy:"%d anys"},ordinalParse:/\d{1,2}(r|n|t|è|a)/,ordinal:function(e,t){var n=1===e?"r":2===e?"n":3===e?"r":4===e?"t":"è";return"w"!==t&&"W"!==t||(n="a"),e+n},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e){return e>1&&e<5&&1!=~~(e/10)}function n(e,n,r,i){var o=e+" ";switch(r){case"s":return n||i?"pár sekund":"pár sekundami";case"m":return n?"minuta":i?"minutu":"minutou";case"mm":return n||i?o+(t(e)?"minuty":"minut"):o+"minutami";case"h":return n?"hodina":i?"hodinu":"hodinou";case"hh":return n||i?o+(t(e)?"hodiny":"hodin"):o+"hodinami";case"d":return n||i?"den":"dnem";case"dd":return n||i?o+(t(e)?"dny":"dní"):o+"dny";case"M":return n||i?"měsíc":"měsícem";case"MM":return n||i?o+(t(e)?"měsíce":"měsíců"):o+"měsíci";case"y":return n||i?"rok":"rokem";case"yy":return n||i?o+(t(e)?"roky":"let"):o+"lety"}}var r="leden_únor_březen_duben_květen_červen_červenec_srpen_září_říjen_listopad_prosinec".split("_"),i="led_úno_bře_dub_kvě_čvn_čvc_srp_zář_říj_lis_pro".split("_");e.defineLocale("cs",{months:r,monthsShort:i,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++)r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return r}(r,i),weekdays:"neděle_pondělí_úterý_středa_čtvrtek_pátek_sobota".split("_"),weekdaysShort:"ne_po_út_st_čt_pá_so".split("_"),weekdaysMin:"ne_po_út_st_čt_pá_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes v] LT",nextDay:"[zítra v] LT",nextWeek:function(){switch(this.day()){case 0:return"[v neděli v] LT";case 1:case 2:return"[v] dddd [v] LT";case 3:return"[ve středu v] LT";case 4:return"[ve čtvrtek v] LT";case 5:return"[v pátek v] LT";case 6:return"[v sobotu v] LT"}},lastDay:"[včera v] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulou neděli v] LT";case 1:case 2:return"[minulé] dddd [v] LT";case 3:return"[minulou středu v] LT";case 4:case 5:return"[minulý] dddd [v] LT";case 6:return"[minulou sobotu v] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"před %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("cv",{months:"кăрлач_нарăс_пуш_ака_май_çĕртме_утă_çурла_авăн_юпа_чӳк_раштав".split("_"),monthsShort:"кăр_нар_пуш_ака_май_çĕр_утă_çур_ав_юпа_чӳк_раш".split("_"),weekdays:"вырсарникун_тунтикун_ытларикун_юнкун_кĕçнерникун_эрнекун_шăматкун".split("_"),weekdaysShort:"выр_тун_ытл_юн_кĕç_эрн_шăм".split("_"),weekdaysMin:"вр_тн_ыт_юн_кç_эр_шм".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ]",LLL:"YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT",LLLL:"dddd, YYYY [çулхи] MMMM [уйăхĕн] D[-мĕшĕ], LT"},calendar:{sameDay:"[Паян] LT [сехетре]",nextDay:"[Ыран] LT [сехетре]",lastDay:"[Ĕнер] LT [сехетре]",nextWeek:"[Çитес] dddd LT [сехетре]",lastWeek:"[Иртнĕ] dddd LT [сехетре]",sameElse:"L"},relativeTime:{future:function(e){return e+(/сехет$/i.exec(e)?"рен":/çул$/i.exec(e)?"тан":"ран")},past:"%s каялла",s:"пĕр-ик çеккунт",m:"пĕр минут",mm:"%d минут",h:"пĕр сехет",hh:"%d сехет",d:"пĕр кун",dd:"%d кун",M:"пĕр уйăх",MM:"%d уйăх",y:"пĕр çул",yy:"%d çул"},ordinalParse:/\d{1,2}-мĕш/,ordinal:"%d-мĕш",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("cy",{months:"Ionawr_Chwefror_Mawrth_Ebrill_Mai_Mehefin_Gorffennaf_Awst_Medi_Hydref_Tachwedd_Rhagfyr".split("_"),monthsShort:"Ion_Chwe_Maw_Ebr_Mai_Meh_Gor_Aws_Med_Hyd_Tach_Rhag".split("_"),weekdays:"Dydd Sul_Dydd Llun_Dydd Mawrth_Dydd Mercher_Dydd Iau_Dydd Gwener_Dydd Sadwrn".split("_"),weekdaysShort:"Sul_Llun_Maw_Mer_Iau_Gwe_Sad".split("_"),weekdaysMin:"Su_Ll_Ma_Me_Ia_Gw_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Heddiw am] LT",nextDay:"[Yfory am] LT",nextWeek:"dddd [am] LT",lastDay:"[Ddoe am] LT",lastWeek:"dddd [diwethaf am] LT",sameElse:"L"},relativeTime:{future:"mewn %s",past:"%s yn ôl",s:"ychydig eiliadau",m:"munud",mm:"%d munud",h:"awr",hh:"%d awr",d:"diwrnod",dd:"%d diwrnod",M:"mis",MM:"%d mis",y:"blwyddyn",yy:"%d flynedd"},ordinalParse:/\d{1,2}(fed|ain|af|il|ydd|ed|eg)/,ordinal:function(e){var t=e,n="",r=["","af","il","ydd","ydd","ed","ed","ed","fed","fed","fed","eg","fed","eg","eg","fed","eg","eg","fed","eg","fed"];return t>20?n=40===t||50===t||60===t||80===t||100===t?"fed":"ain":t>0&&(n=r[t]),e+n},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("da",{months:"januar_februar_marts_april_maj_juni_juli_august_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tir_ons_tor_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd [d.] D. MMMM YYYY LT"},calendar:{sameDay:"[I dag kl.] LT",nextDay:"[I morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[I går kl.] LT",lastWeek:"[sidste] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"%s siden",s:"få sekunder",m:"et minut",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dage",M:"en måned",MM:"%d måneder",y:"et år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de-at",{months:"Jänner_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jän._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){var i={m:["eine Minute","einer Minute"],h:["eine Stunde","einer Stunde"],d:["ein Tag","einem Tag"],dd:[e+" Tage",e+" Tagen"],M:["ein Monat","einem Monat"],MM:[e+" Monate",e+" Monaten"],y:["ein Jahr","einem Jahr"],yy:[e+" Jahre",e+" Jahren"]};return t?i[n][0]:i[n][1]}e.defineLocale("de",{months:"Januar_Februar_März_April_Mai_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Apr._Mai_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonntag_Montag_Dienstag_Mittwoch_Donnerstag_Freitag_Samstag".split("_"),weekdaysShort:"So._Mo._Di._Mi._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mo_Di_Mi_Do_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Heute um] LT [Uhr]",sameElse:"L",nextDay:"[Morgen um] LT [Uhr]",nextWeek:"dddd [um] LT [Uhr]",lastDay:"[Gestern um] LT [Uhr]",lastWeek:"[letzten] dddd [um] LT [Uhr]"},relativeTime:{future:"in %s",past:"vor %s",s:"ein paar Sekunden",m:t,mm:"%d Minuten",h:t,hh:"%d Stunden",d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("el",{monthsNominativeEl:"Ιανουάριος_Φεβρουάριος_Μάρτιος_Απρίλιος_Μάιος_Ιούνιος_Ιούλιος_Αύγουστος_Σεπτέμβριος_Οκτώβριος_Νοέμβριος_Δεκέμβριος".split("_"),monthsGenitiveEl:"Ιανουαρίου_Φεβρουαρίου_Μαρτίου_Απριλίου_Μαΐου_Ιουνίου_Ιουλίου_Αυγούστου_Σεπτεμβρίου_Οκτωβρίου_Νοεμβρίου_Δεκεμβρίου".split("_"),months:function(e,t){return/D/.test(t.substring(0,t.indexOf("MMMM")))?this._monthsGenitiveEl[e.month()]:this._monthsNominativeEl[e.month()]},monthsShort:"Ιαν_Φεβ_Μαρ_Απρ_Μαϊ_Ιουν_Ιουλ_Αυγ_Σεπ_Οκτ_Νοε_Δεκ".split("_"),weekdays:"Κυριακή_Δευτέρα_Τρίτη_Τετάρτη_Πέμπτη_Παρασκευή_Σάββατο".split("_"),weekdaysShort:"Κυρ_Δευ_Τρι_Τετ_Πεμ_Παρ_Σαβ".split("_"),weekdaysMin:"Κυ_Δε_Τρ_Τε_Πε_Πα_Σα".split("_"),meridiem:function(e,t,n){return e>11?n?"μμ":"ΜΜ":n?"πμ":"ΠΜ"},isPM:function(e){return"μ"===(e+"").toLowerCase()[0]},meridiemParse:/[ΠΜ]\.?Μ?\.?/i,longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendarEl:{sameDay:"[Σήμερα {}] LT",nextDay:"[Αύριο {}] LT",nextWeek:"dddd [{}] LT",lastDay:"[Χθες {}] LT",lastWeek:function(){switch(this.day()){case 6:return"[το προηγούμενο] dddd [{}] LT";default:return"[την προηγούμενη] dddd [{}] LT"}},sameElse:"L"},calendar:function(e,t){var n=this._calendarEl[e],r=t&&t.hours();return"function"==typeof n&&(n=n.apply(t)),n.replace("{}",r%12==1?"στη":"στις")},relativeTime:{future:"σε %s",past:"%s πριν",s:"λίγα δευτερόλεπτα",m:"ένα λεπτό",mm:"%d λεπτά",h:"μία ώρα",hh:"%d ώρες",d:"μία μέρα",dd:"%d μέρες",M:"ένας μήνας",MM:"%d μήνες",y:"ένας χρόνος",yy:"%d χρόνια"},ordinalParse:/\d{1,2}η/,ordinal:"%dη",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("en-au",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("en-ca",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"YYYY-MM-DD",LL:"D MMMM, YYYY",LLL:"D MMMM, YYYY LT",LLLL:"dddd, D MMMM, YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")}})}(ye)}(),function(e){!function(e){e.defineLocale("en-gb",{months:"January_February_March_April_May_June_July_August_September_October_November_December".split("_"),monthsShort:"Jan_Feb_Mar_Apr_May_Jun_Jul_Aug_Sep_Oct_Nov_Dec".split("_"),weekdays:"Sunday_Monday_Tuesday_Wednesday_Thursday_Friday_Saturday".split("_"),weekdaysShort:"Sun_Mon_Tue_Wed_Thu_Fri_Sat".split("_"),weekdaysMin:"Su_Mo_Tu_We_Th_Fr_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Today at] LT",nextDay:"[Tomorrow at] LT",nextWeek:"dddd [at] LT",lastDay:"[Yesterday at] LT",lastWeek:"[Last] dddd [at] LT",sameElse:"L"},relativeTime:{future:"in %s",past:"%s ago",s:"a few seconds",m:"a minute",mm:"%d minutes",h:"an hour",hh:"%d hours",d:"a day",dd:"%d days",M:"a month",MM:"%d months",y:"a year",yy:"%d years"},ordinalParse:/\d{1,2}(st|nd|rd|th)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"th":1===t?"st":2===t?"nd":3===t?"rd":"th")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("eo",{months:"januaro_februaro_marto_aprilo_majo_junio_julio_aŭgusto_septembro_oktobro_novembro_decembro".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aŭg_sep_okt_nov_dec".split("_"),weekdays:"Dimanĉo_Lundo_Mardo_Merkredo_Ĵaŭdo_Vendredo_Sabato".split("_"),weekdaysShort:"Dim_Lun_Mard_Merk_Ĵaŭ_Ven_Sab".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Ĵa_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D[-an de] MMMM, YYYY",LLL:"D[-an de] MMMM, YYYY LT",LLLL:"dddd, [la] D[-an de] MMMM, YYYY LT"},meridiemParse:/[ap]\.t\.m/i,isPM:function(e){return"p"===e.charAt(0).toLowerCase()},meridiem:function(e,t,n){return e>11?n?"p.t.m.":"P.T.M.":n?"a.t.m.":"A.T.M."},calendar:{sameDay:"[Hodiaŭ je] LT",nextDay:"[Morgaŭ je] LT",nextWeek:"dddd [je] LT",lastDay:"[Hieraŭ je] LT",lastWeek:"[pasinta] dddd [je] LT",sameElse:"L"},relativeTime:{future:"je %s",past:"antaŭ %s",s:"sekundoj",m:"minuto",mm:"%d minutoj",h:"horo",hh:"%d horoj",d:"tago",dd:"%d tagoj",M:"monato",MM:"%d monatoj",y:"jaro",yy:"%d jaroj"},ordinalParse:/\d{1,2}a/,ordinal:"%da",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t="ene._feb._mar._abr._may._jun._jul._ago._sep._oct._nov._dic.".split("_"),n="ene_feb_mar_abr_may_jun_jul_ago_sep_oct_nov_dic".split("_");e.defineLocale("es",{months:"enero_febrero_marzo_abril_mayo_junio_julio_agosto_septiembre_octubre_noviembre_diciembre".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},weekdays:"domingo_lunes_martes_miércoles_jueves_viernes_sábado".split("_"),weekdaysShort:"dom._lun._mar._mié._jue._vie._sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mi_Ju_Vi_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:function(){return"[hoy a la"+(1!==this.hours()?"s":"")+"] LT"},nextDay:function(){return"[mañana a la"+(1!==this.hours()?"s":"")+"] LT"},nextWeek:function(){return"dddd [a la"+(1!==this.hours()?"s":"")+"] LT"},lastDay:function(){return"[ayer a la"+(1!==this.hours()?"s":"")+"] LT"},lastWeek:function(){return"[el] dddd [pasado a la"+(1!==this.hours()?"s":"")+"] LT"},sameElse:"L"},relativeTime:{future:"en %s",past:"hace %s",s:"unos segundos",m:"un minuto",mm:"%d minutos",h:"una hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un año",yy:"%d años"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){var i={s:["mõne sekundi","mõni sekund","paar sekundit"],m:["ühe minuti","üks minut"],mm:[e+" minuti",e+" minutit"],h:["ühe tunni","tund aega","üks tund"],hh:[e+" tunni",e+" tundi"],d:["ühe päeva","üks päev"],M:["kuu aja","kuu aega","üks kuu"],MM:[e+" kuu",e+" kuud"],y:["ühe aasta","aasta","üks aasta"],yy:[e+" aasta",e+" aastat"]};return t?i[n][2]?i[n][2]:i[n][1]:r?i[n][0]:i[n][1]}e.defineLocale("et",{months:"jaanuar_veebruar_märts_aprill_mai_juuni_juuli_august_september_oktoober_november_detsember".split("_"),monthsShort:"jaan_veebr_märts_apr_mai_juuni_juuli_aug_sept_okt_nov_dets".split("_"),weekdays:"pühapäev_esmaspäev_teisipäev_kolmapäev_neljapäev_reede_laupäev".split("_"),weekdaysShort:"P_E_T_K_N_R_L".split("_"),weekdaysMin:"P_E_T_K_N_R_L".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Täna,] LT",nextDay:"[Homme,] LT",nextWeek:"[Järgmine] dddd LT",lastDay:"[Eile,] LT",lastWeek:"[Eelmine] dddd LT",sameElse:"L"},relativeTime:{future:"%s pärast",past:"%s tagasi",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:"%d päeva",M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("eu",{months:"urtarrila_otsaila_martxoa_apirila_maiatza_ekaina_uztaila_abuztua_iraila_urria_azaroa_abendua".split("_"),monthsShort:"urt._ots._mar._api._mai._eka._uzt._abu._ira._urr._aza._abe.".split("_"),weekdays:"igandea_astelehena_asteartea_asteazkena_osteguna_ostirala_larunbata".split("_"),weekdaysShort:"ig._al._ar._az._og._ol._lr.".split("_"),weekdaysMin:"ig_al_ar_az_og_ol_lr".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY[ko] MMMM[ren] D[a]",LLL:"YYYY[ko] MMMM[ren] D[a] LT",LLLL:"dddd, YYYY[ko] MMMM[ren] D[a] LT",l:"YYYY-M-D",ll:"YYYY[ko] MMM D[a]",lll:"YYYY[ko] MMM D[a] LT",llll:"ddd, YYYY[ko] MMM D[a] LT"},calendar:{sameDay:"[gaur] LT[etan]",nextDay:"[bihar] LT[etan]",nextWeek:"dddd LT[etan]",lastDay:"[atzo] LT[etan]",lastWeek:"[aurreko] dddd LT[etan]",sameElse:"L"},relativeTime:{future:"%s barru",past:"duela %s",s:"segundo batzuk",m:"minutu bat",mm:"%d minutu",h:"ordu bat",hh:"%d ordu",d:"egun bat",dd:"%d egun",M:"hilabete bat",MM:"%d hilabete",y:"urte bat",yy:"%d urte"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t={1:"۱",2:"۲",3:"۳",4:"۴",5:"۵",6:"۶",7:"۷",8:"۸",9:"۹",0:"۰"},n={"۱":"1","۲":"2","۳":"3","۴":"4","۵":"5","۶":"6","۷":"7","۸":"8","۹":"9","۰":"0"};e.defineLocale("fa",{months:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),monthsShort:"ژانویه_فوریه_مارس_آوریل_مه_ژوئن_ژوئیه_اوت_سپتامبر_اکتبر_نوامبر_دسامبر".split("_"),weekdays:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysShort:"یک‌شنبه_دوشنبه_سه‌شنبه_چهارشنبه_پنج‌شنبه_جمعه_شنبه".split("_"),weekdaysMin:"ی_د_س_چ_پ_ج_ش".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},meridiemParse:/قبل از ظهر|بعد از ظهر/,isPM:function(e){return/بعد از ظهر/.test(e)},meridiem:function(e,t,n){return e<12?"قبل از ظهر":"بعد از ظهر"},calendar:{sameDay:"[امروز ساعت] LT",nextDay:"[فردا ساعت] LT",nextWeek:"dddd [ساعت] LT",lastDay:"[دیروز ساعت] LT",lastWeek:"dddd [پیش] [ساعت] LT",sameElse:"L"},relativeTime:{future:"در %s",past:"%s پیش",s:"چندین ثانیه",m:"یک دقیقه",mm:"%d دقیقه",h:"یک ساعت",hh:"%d ساعت",d:"یک روز",dd:"%d روز",M:"یک ماه",MM:"%d ماه",y:"یک سال",yy:"%d سال"},preparse:function(e){return e.replace(/[۰-۹]/g,function(e){return n[e]}).replace(/،/g,",")},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]}).replace(/,/g,"،")},ordinalParse:/\d{1,2}م/,ordinal:"%dم",week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){function t(e,t,r,i){var o="";switch(r){case"s":return i?"muutaman sekunnin":"muutama sekunti";case"m":return i?"minuutin":"minuutti";case"mm":o=i?"minuutin":"minuuttia";break;case"h":return i?"tunnin":"tunti";case"hh":o=i?"tunnin":"tuntia";break;case"d":return i?"päivän":"päivä";case"dd":o=i?"päivän":"päivää";break;case"M":return i?"kuukauden":"kuukausi";case"MM":o=i?"kuukauden":"kuukautta";break;case"y":return i?"vuoden":"vuosi";case"yy":o=i?"vuoden":"vuotta"}return o=n(e,i)+" "+o}function n(e,t){return e<10?t?i[e]:r[e]:e}var r="nolla yksi kaksi kolme neljä viisi kuusi seitsemän kahdeksan yhdeksän".split(" "),i=["nolla","yhden","kahden","kolmen","neljän","viiden","kuuden",r[7],r[8],r[9]];e.defineLocale("fi",{months:"tammikuu_helmikuu_maaliskuu_huhtikuu_toukokuu_kesäkuu_heinäkuu_elokuu_syyskuu_lokakuu_marraskuu_joulukuu".split("_"),monthsShort:"tammi_helmi_maalis_huhti_touko_kesä_heinä_elo_syys_loka_marras_joulu".split("_"),weekdays:"sunnuntai_maanantai_tiistai_keskiviikko_torstai_perjantai_lauantai".split("_"),weekdaysShort:"su_ma_ti_ke_to_pe_la".split("_"),weekdaysMin:"su_ma_ti_ke_to_pe_la".split("_"),longDateFormat:{LT:"HH.mm",LTS:"HH.mm.ss",L:"DD.MM.YYYY",LL:"Do MMMM[ta] YYYY",LLL:"Do MMMM[ta] YYYY, [klo] LT",LLLL:"dddd, Do MMMM[ta] YYYY, [klo] LT",l:"D.M.YYYY",ll:"Do MMM YYYY",lll:"Do MMM YYYY, [klo] LT",llll:"ddd, Do MMM YYYY, [klo] LT"},calendar:{sameDay:"[tänään] [klo] LT",nextDay:"[huomenna] [klo] LT",nextWeek:"dddd [klo] LT",lastDay:"[eilen] [klo] LT",lastWeek:"[viime] dddd[na] [klo] LT",sameElse:"L"},relativeTime:{future:"%s päästä",past:"%s sitten",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("fo",{months:"januar_februar_mars_apríl_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sunnudagur_mánadagur_týsdagur_mikudagur_hósdagur_fríggjadagur_leygardagur".split("_"),weekdaysShort:"sun_mán_týs_mik_hós_frí_ley".split("_"),weekdaysMin:"su_má_tý_mi_hó_fr_le".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D. MMMM, YYYY LT"},calendar:{sameDay:"[Í dag kl.] LT",nextDay:"[Í morgin kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[Í gjár kl.] LT",lastWeek:"[síðstu] dddd [kl] LT",sameElse:"L"},relativeTime:{future:"um %s",past:"%s síðani",s:"fá sekund",m:"ein minutt",mm:"%d minuttir",h:"ein tími",hh:"%d tímar",d:"ein dagur",dd:"%d dagar",M:"ein mánaði",MM:"%d mánaðir",y:"eitt ár",yy:"%d ár"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("fr-ca",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")}})}(ye)}(),function(e){!function(e){e.defineLocale("fr",{months:"janvier_février_mars_avril_mai_juin_juillet_août_septembre_octobre_novembre_décembre".split("_"),monthsShort:"janv._févr._mars_avr._mai_juin_juil._août_sept._oct._nov._déc.".split("_"),weekdays:"dimanche_lundi_mardi_mercredi_jeudi_vendredi_samedi".split("_"),weekdaysShort:"dim._lun._mar._mer._jeu._ven._sam.".split("_"),weekdaysMin:"Di_Lu_Ma_Me_Je_Ve_Sa".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Aujourd'hui à] LT",nextDay:"[Demain à] LT",nextWeek:"dddd [à] LT",lastDay:"[Hier à] LT",lastWeek:"dddd [dernier à] LT",sameElse:"L"},relativeTime:{future:"dans %s",past:"il y a %s",s:"quelques secondes",m:"une minute",mm:"%d minutes",h:"une heure",hh:"%d heures",d:"un jour",dd:"%d jours",M:"un mois",MM:"%d mois",y:"un an",yy:"%d ans"},ordinalParse:/\d{1,2}(er|)/,ordinal:function(e){return e+(1===e?"er":"")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){var t="jan._feb._mrt._apr._mai_jun._jul._aug._sep._okt._nov._des.".split("_"),n="jan_feb_mrt_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_");e.defineLocale("fy",{months:"jannewaris_febrewaris_maart_april_maaie_juny_july_augustus_septimber_oktober_novimber_desimber".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},weekdays:"snein_moandei_tiisdei_woansdei_tongersdei_freed_sneon".split("_"),weekdaysShort:"si._mo._ti._wo._to._fr._so.".split("_"),weekdaysMin:"Si_Mo_Ti_Wo_To_Fr_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[hjoed om] LT",nextDay:"[moarn om] LT",nextWeek:"dddd [om] LT",lastDay:"[juster om] LT",lastWeek:"[ôfrûne] dddd [om] LT",sameElse:"L"},relativeTime:{future:"oer %s",past:"%s lyn",s:"in pear sekonden",m:"ien minút",mm:"%d minuten",h:"ien oere",hh:"%d oeren",d:"ien dei",dd:"%d dagen",M:"ien moanne",MM:"%d moannen",y:"ien jier",yy:"%d jierren"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("gl",{months:"Xaneiro_Febreiro_Marzo_Abril_Maio_Xuño_Xullo_Agosto_Setembro_Outubro_Novembro_Decembro".split("_"),monthsShort:"Xan._Feb._Mar._Abr._Mai._Xuñ._Xul._Ago._Set._Out._Nov._Dec.".split("_"),weekdays:"Domingo_Luns_Martes_Mércores_Xoves_Venres_Sábado".split("_"),weekdaysShort:"Dom._Lun._Mar._Mér._Xov._Ven._Sáb.".split("_"),weekdaysMin:"Do_Lu_Ma_Mé_Xo_Ve_Sá".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:function(){return"[hoxe "+(1!==this.hours()?"ás":"á")+"] LT"},nextDay:function(){return"[mañá "+(1!==this.hours()?"ás":"á")+"] LT"},nextWeek:function(){return"dddd ["+(1!==this.hours()?"ás":"a")+"] LT"},lastDay:function(){return"[onte "+(1!==this.hours()?"á":"a")+"] LT"},lastWeek:function(){return"[o] dddd [pasado "+(1!==this.hours()?"ás":"a")+"] LT"},sameElse:"L"},relativeTime:{future:function(e){return"uns segundos"===e?"nuns segundos":"en "+e},past:"hai %s",s:"uns segundos",m:"un minuto",mm:"%d minutos",h:"unha hora",hh:"%d horas",d:"un día",dd:"%d días",M:"un mes",MM:"%d meses",y:"un ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("he",{months:"ינואר_פברואר_מרץ_אפריל_מאי_יוני_יולי_אוגוסט_ספטמבר_אוקטובר_נובמבר_דצמבר".split("_"),monthsShort:"ינו׳_פבר׳_מרץ_אפר׳_מאי_יוני_יולי_אוג׳_ספט׳_אוק׳_נוב׳_דצמ׳".split("_"),weekdays:"ראשון_שני_שלישי_רביעי_חמישי_שישי_שבת".split("_"),weekdaysShort:"א׳_ב׳_ג׳_ד׳_ה׳_ו׳_ש׳".split("_"),weekdaysMin:"א_ב_ג_ד_ה_ו_ש".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [ב]MMMM YYYY",LLL:"D [ב]MMMM YYYY LT",LLLL:"dddd, D [ב]MMMM YYYY LT",l:"D/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[היום ב־]LT",nextDay:"[מחר ב־]LT",nextWeek:"dddd [בשעה] LT",lastDay:"[אתמול ב־]LT",lastWeek:"[ביום] dddd [האחרון בשעה] LT",sameElse:"L"},relativeTime:{future:"בעוד %s",past:"לפני %s",s:"מספר שניות",m:"דקה",mm:"%d דקות",h:"שעה",hh:function(e){return 2===e?"שעתיים":e+" שעות"},d:"יום",dd:function(e){return 2===e?"יומיים":e+" ימים"},M:"חודש",MM:function(e){return 2===e?"חודשיים":e+" חודשים"},y:"שנה",yy:function(e){return 2===e?"שנתיים":e%10==0&&10!==e?e+" שנה":e+" שנים"}}})}(ye)}(),function(e){!function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("hi",{months:"जनवरी_फ़रवरी_मार्च_अप्रैल_मई_जून_जुलाई_अगस्त_सितम्बर_अक्टूबर_नवम्बर_दिसम्बर".split("_"),monthsShort:"जन._फ़र._मार्च_अप्रै._मई_जून_जुल._अग._सित._अक्टू._नव._दिस.".split("_"),weekdays:"रविवार_सोमवार_मंगलवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगल_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm बजे",LTS:"A h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[कल] LT",nextWeek:"dddd, LT",lastDay:"[कल] LT",lastWeek:"[पिछले] dddd, LT",sameElse:"L"},relativeTime:{future:"%s में",past:"%s पहले",s:"कुछ ही क्षण",m:"एक मिनट",mm:"%d मिनट",h:"एक घंटा",hh:"%d घंटे",d:"एक दिन",dd:"%d दिन",M:"एक महीने",MM:"%d महीने",y:"एक वर्ष",yy:"%d वर्ष"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/रात|सुबह|दोपहर|शाम/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात"===t?e<4?e:e+12:"सुबह"===t?e:"दोपहर"===t?e>=10?e:e+12:"शाम"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात":e<10?"सुबह":e<17?"दोपहर":e<20?"शाम":"रात"},week:{dow:0,doy:6}})}(ye)}(),function(e){!function(e){function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"jedna minuta":"jedne minute";case"mm":return r+=1===e?"minuta":2===e||3===e||4===e?"minute":"minuta";case"h":return t?"jedan sat":"jednog sata";case"hh":return r+=1===e?"sat":2===e||3===e||4===e?"sata":"sati";case"dd":return r+=1===e?"dan":"dana";case"MM":return r+=1===e?"mjesec":2===e||3===e||4===e?"mjeseca":"mjeseci";case"yy":return r+=1===e?"godina":2===e||3===e||4===e?"godine":"godina"}}e.defineLocale("hr",{months:"sječanj_veljača_ožujak_travanj_svibanj_lipanj_srpanj_kolovoz_rujan_listopad_studeni_prosinac".split("_"),monthsShort:"sje._vel._ožu._tra._svi._lip._srp._kol._ruj._lis._stu._pro.".split("_"),weekdays:"nedjelja_ponedjeljak_utorak_srijeda_četvrtak_petak_subota".split("_"),weekdaysShort:"ned._pon._uto._sri._čet._pet._sub.".split("_"),weekdaysMin:"ne_po_ut_sr_če_pe_su".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedjelju] [u] LT";case 3:return"[u] [srijedu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[jučer u] LT",lastWeek:function(){switch(this.day()){case 0:case 3:return"[prošlu] dddd [u] LT";case 6:return"[prošle] [subote] [u] LT";case 1:case 2:case 4:case 5:return"[prošli] dddd [u] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"prije %s",s:"par sekundi",m:t,mm:t,h:t,hh:t,d:"dan",dd:t,M:"mjesec",MM:t,y:"godinu",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){var i=e;switch(n){case"s":return r||t?"néhány másodperc":"néhány másodperce";case"m":return"egy"+(r||t?" perc":" perce");case"mm":return i+(r||t?" perc":" perce");case"h":return"egy"+(r||t?" óra":" órája");case"hh":return i+(r||t?" óra":" órája");case"d":return"egy"+(r||t?" nap":" napja");case"dd":return i+(r||t?" nap":" napja");case"M":return"egy"+(r||t?" hónap":" hónapja");case"MM":return i+(r||t?" hónap":" hónapja");case"y":return"egy"+(r||t?" év":" éve");case"yy":return i+(r||t?" év":" éve")}return""}function n(e){return(e?"":"[múlt] ")+"["+r[this.day()]+"] LT[-kor]"}var r="vasárnap hétfőn kedden szerdán csütörtökön pénteken szombaton".split(" ");e.defineLocale("hu",{months:"január_február_március_április_május_június_július_augusztus_szeptember_október_november_december".split("_"),monthsShort:"jan_feb_márc_ápr_máj_jún_júl_aug_szept_okt_nov_dec".split("_"),weekdays:"vasárnap_hétfő_kedd_szerda_csütörtök_péntek_szombat".split("_"),weekdaysShort:"vas_hét_kedd_sze_csüt_pén_szo".split("_"),weekdaysMin:"v_h_k_sze_cs_p_szo".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"YYYY.MM.DD.",LL:"YYYY. MMMM D.",LLL:"YYYY. MMMM D., LT",LLLL:"YYYY. MMMM D., dddd LT"},meridiemParse:/de|du/i,isPM:function(e){return"u"===e.charAt(1).toLowerCase()},meridiem:function(e,t,n){return e<12?!0===n?"de":"DE":!0===n?"du":"DU"},calendar:{sameDay:"[ma] LT[-kor]",nextDay:"[holnap] LT[-kor]",nextWeek:function(){return n.call(this,!0)},lastDay:"[tegnap] LT[-kor]",lastWeek:function(){return n.call(this,!1)},sameElse:"L"},relativeTime:{future:"%s múlva",past:"%s",s:t,m:t,mm:t,h:t,hh:t,d:t,dd:t,M:t,MM:t,y:t,yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e,t){return{nominative:"հունվար_փետրվար_մարտ_ապրիլ_մայիս_հունիս_հուլիս_օգոստոս_սեպտեմբեր_հոկտեմբեր_նոյեմբեր_դեկտեմբեր".split("_"),accusative:"հունվարի_փետրվարի_մարտի_ապրիլի_մայիսի_հունիսի_հուլիսի_օգոստոսի_սեպտեմբերի_հոկտեմբերի_նոյեմբերի_դեկտեմբերի".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function n(e,t){return"հնվ_փտր_մրտ_ապր_մյս_հնս_հլս_օգս_սպտ_հկտ_նմբ_դկտ".split("_")[e.month()]}function r(e,t){return"կիրակի_երկուշաբթի_երեքշաբթի_չորեքշաբթի_հինգշաբթի_ուրբաթ_շաբաթ".split("_")[e.day()]}e.defineLocale("hy-am",{months:t,monthsShort:n,weekdays:r,weekdaysShort:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),weekdaysMin:"կրկ_երկ_երք_չրք_հնգ_ուրբ_շբթ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY թ.",LLL:"D MMMM YYYY թ., LT",LLLL:"dddd, D MMMM YYYY թ., LT"},calendar:{sameDay:"[այսօր] LT",nextDay:"[վաղը] LT",lastDay:"[երեկ] LT",nextWeek:function(){return"dddd [օրը ժամը] LT"},lastWeek:function(){return"[անցած] dddd [օրը ժամը] LT"},sameElse:"L"},relativeTime:{future:"%s հետո",past:"%s առաջ",s:"մի քանի վայրկյան",m:"րոպե",mm:"%d րոպե",h:"ժամ",hh:"%d ժամ",d:"օր",dd:"%d օր",M:"ամիս",MM:"%d ամիս",y:"տարի",yy:"%d տարի"},meridiemParse:/գիշերվա|առավոտվա|ցերեկվա|երեկոյան/,isPM:function(e){return/^(ցերեկվա|երեկոյան)$/.test(e)},meridiem:function(e){return e<4?"գիշերվա":e<12?"առավոտվա":e<17?"ցերեկվա":"երեկոյան"},ordinalParse:/\d{1,2}|\d{1,2}-(ին|րդ)/,ordinal:function(e,t){switch(t){case"DDD":case"w":case"W":case"DDDo":return 1===e?e+"-ին":e+"-րդ";default:return e}},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("id",{months:"Januari_Februari_Maret_April_Mei_Juni_Juli_Agustus_September_Oktober_November_Desember".split("_"),monthsShort:"Jan_Feb_Mar_Apr_Mei_Jun_Jul_Ags_Sep_Okt_Nov_Des".split("_"),weekdays:"Minggu_Senin_Selasa_Rabu_Kamis_Jumat_Sabtu".split("_"),weekdaysShort:"Min_Sen_Sel_Rab_Kam_Jum_Sab".split("_"),weekdaysMin:"Mg_Sn_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|siang|sore|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"siang"===t?e>=11?e:e+12:"sore"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"siang":e<19?"sore":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Besok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kemarin pukul] LT",lastWeek:"dddd [lalu pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lalu",s:"beberapa detik",m:"semenit",mm:"%d menit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e){return e%100==11||e%10!=1}function n(e,n,r,i){var o=e+" ";switch(r){case"s":return n||i?"nokkrar sekúndur":"nokkrum sekúndum";case"m":return n?"mínúta":"mínútu";case"mm":return t(e)?o+(n||i?"mínútur":"mínútum"):n?o+"mínúta":o+"mínútu";case"hh":return t(e)?o+(n||i?"klukkustundir":"klukkustundum"):o+"klukkustund";case"d":return n?"dagur":i?"dag":"degi";case"dd":return t(e)?n?o+"dagar":o+(i?"daga":"dögum"):n?o+"dagur":o+(i?"dag":"degi");case"M":return n?"mánuður":i?"mánuð":"mánuði";case"MM":return t(e)?n?o+"mánuðir":o+(i?"mánuði":"mánuðum"):n?o+"mánuður":o+(i?"mánuð":"mánuði");case"y":return n||i?"ár":"ári";case"yy":return t(e)?o+(n||i?"ár":"árum"):o+(n||i?"ár":"ári")}}e.defineLocale("is",{months:"janúar_febrúar_mars_apríl_maí_júní_júlí_ágúst_september_október_nóvember_desember".split("_"),monthsShort:"jan_feb_mar_apr_maí_jún_júl_ágú_sep_okt_nóv_des".split("_"),weekdays:"sunnudagur_mánudagur_þriðjudagur_miðvikudagur_fimmtudagur_föstudagur_laugardagur".split("_"),weekdaysShort:"sun_mán_þri_mið_fim_fös_lau".split("_"),weekdaysMin:"Su_Má_Þr_Mi_Fi_Fö_La".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd, D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[í dag kl.] LT",nextDay:"[á morgun kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[í gær kl.] LT",lastWeek:"[síðasta] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"eftir %s",past:"fyrir %s síðan",s:n,m:n,mm:n,h:"klukkustund",hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("it",{months:"gennaio_febbraio_marzo_aprile_maggio_giugno_luglio_agosto_settembre_ottobre_novembre_dicembre".split("_"),monthsShort:"gen_feb_mar_apr_mag_giu_lug_ago_set_ott_nov_dic".split("_"),weekdays:"Domenica_Lunedì_Martedì_Mercoledì_Giovedì_Venerdì_Sabato".split("_"),weekdaysShort:"Dom_Lun_Mar_Mer_Gio_Ven_Sab".split("_"),weekdaysMin:"D_L_Ma_Me_G_V_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Oggi alle] LT",nextDay:"[Domani alle] LT",nextWeek:"dddd [alle] LT",lastDay:"[Ieri alle] LT",lastWeek:function(){switch(this.day()){case 0:return"[la scorsa] dddd [alle] LT";default:return"[lo scorso] dddd [alle] LT"}},sameElse:"L"},relativeTime:{future:function(e){return(/^[0-9].+$/.test(e)?"tra":"in")+" "+e},past:"%s fa",s:"alcuni secondi",m:"un minuto",mm:"%d minuti",h:"un'ora",hh:"%d ore",d:"un giorno",dd:"%d giorni",M:"un mese",MM:"%d mesi",y:"un anno",yy:"%d anni"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("ja",{months:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"日曜日_月曜日_火曜日_水曜日_木曜日_金曜日_土曜日".split("_"),weekdaysShort:"日_月_火_水_木_金_土".split("_"),weekdaysMin:"日_月_火_水_木_金_土".split("_"),longDateFormat:{LT:"Ah時m分",LTS:"LTs秒",L:"YYYY/MM/DD",LL:"YYYY年M月D日",LLL:"YYYY年M月D日LT",LLLL:"YYYY年M月D日LT dddd"},meridiemParse:/午前|午後/i,isPM:function(e){return"午後"===e},meridiem:function(e,t,n){return e<12?"午前":"午後"},calendar:{sameDay:"[今日] LT",nextDay:"[明日] LT",nextWeek:"[来週]dddd LT",lastDay:"[昨日] LT",lastWeek:"[前週]dddd LT",sameElse:"L"},relativeTime:{future:"%s後",past:"%s前",s:"数秒",m:"1分",mm:"%d分",h:"1時間",hh:"%d時間",d:"1日",dd:"%d日",M:"1ヶ月",MM:"%dヶ月",y:"1年",yy:"%d年"}})}(ye)}(),function(e){!function(e){function t(e,t){return{nominative:"იანვარი_თებერვალი_მარტი_აპრილი_მაისი_ივნისი_ივლისი_აგვისტო_სექტემბერი_ოქტომბერი_ნოემბერი_დეკემბერი".split("_"),accusative:"იანვარს_თებერვალს_მარტს_აპრილის_მაისს_ივნისს_ივლისს_აგვისტს_სექტემბერს_ოქტომბერს_ნოემბერს_დეკემბერს".split("_")}[/D[oD] *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function n(e,t){return{nominative:"კვირა_ორშაბათი_სამშაბათი_ოთხშაბათი_ხუთშაბათი_პარასკევი_შაბათი".split("_"),accusative:"კვირას_ორშაბათს_სამშაბათს_ოთხშაბათს_ხუთშაბათს_პარასკევს_შაბათს".split("_")}[/(წინა|შემდეგ)/.test(t)?"accusative":"nominative"][e.day()]}e.defineLocale("ka",{months:t,monthsShort:"იან_თებ_მარ_აპრ_მაი_ივნ_ივლ_აგვ_სექ_ოქტ_ნოე_დეკ".split("_"),weekdays:n,weekdaysShort:"კვი_ორშ_სამ_ოთხ_ხუთ_პარ_შაბ".split("_"),weekdaysMin:"კვ_ორ_სა_ოთ_ხუ_პა_შა".split("_"),longDateFormat:{LT:"h:mm A",LTS:"h:mm:ss A",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[დღეს] LT[-ზე]",nextDay:"[ხვალ] LT[-ზე]",lastDay:"[გუშინ] LT[-ზე]",nextWeek:"[შემდეგ] dddd LT[-ზე]",lastWeek:"[წინა] dddd LT-ზე",sameElse:"L"},relativeTime:{future:function(e){return/(წამი|წუთი|საათი|წელი)/.test(e)?e.replace(/ი$/,"ში"):e+"ში"},past:function(e){return/(წამი|წუთი|საათი|დღე|თვე)/.test(e)?e.replace(/(ი|ე)$/,"ის წინ"):/წელი/.test(e)?e.replace(/წელი$/,"წლის წინ"):void 0},s:"რამდენიმე წამი",m:"წუთი",mm:"%d წუთი",h:"საათი",hh:"%d საათი",d:"დღე",dd:"%d დღე",M:"თვე",MM:"%d თვე",y:"წელი",yy:"%d წელი"},ordinalParse:/0|1-ლი|მე-\d{1,2}|\d{1,2}-ე/,ordinal:function(e){return 0===e?e:1===e?e+"-ლი":e<20||e<=100&&e%20==0||e%100==0?"მე-"+e:e+"-ე"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("km",{months:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),monthsShort:"មករា_កុម្ភៈ_មិនា_មេសា_ឧសភា_មិថុនា_កក្កដា_សីហា_កញ្ញា_តុលា_វិច្ឆិកា_ធ្នូ".split("_"),weekdays:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysShort:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),weekdaysMin:"អាទិត្យ_ច័ន្ទ_អង្គារ_ពុធ_ព្រហស្បតិ៍_សុក្រ_សៅរ៍".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[ថ្ងៃនៈ ម៉ោង] LT",nextDay:"[ស្អែក ម៉ោង] LT",nextWeek:"dddd [ម៉ោង] LT",lastDay:"[ម្សិលមិញ ម៉ោង] LT",lastWeek:"dddd [សប្តាហ៍មុន] [ម៉ោង] LT",sameElse:"L"},relativeTime:{future:"%sទៀត",past:"%sមុន",s:"ប៉ុន្មានវិនាទី",m:"មួយនាទី",mm:"%d នាទី",h:"មួយម៉ោង",hh:"%d ម៉ោង",d:"មួយថ្ងៃ",dd:"%d ថ្ងៃ",M:"មួយខែ",MM:"%d ខែ",y:"មួយឆ្នាំ",yy:"%d ឆ្នាំ"},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("ko",{months:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),monthsShort:"1월_2월_3월_4월_5월_6월_7월_8월_9월_10월_11월_12월".split("_"),weekdays:"일요일_월요일_화요일_수요일_목요일_금요일_토요일".split("_"),weekdaysShort:"일_월_화_수_목_금_토".split("_"),weekdaysMin:"일_월_화_수_목_금_토".split("_"),longDateFormat:{LT:"A h시 m분",LTS:"A h시 m분 s초",L:"YYYY.MM.DD",LL:"YYYY년 MMMM D일",LLL:"YYYY년 MMMM D일 LT",LLLL:"YYYY년 MMMM D일 dddd LT"},calendar:{sameDay:"오늘 LT",nextDay:"내일 LT",nextWeek:"dddd LT",lastDay:"어제 LT",lastWeek:"지난주 dddd LT",sameElse:"L"},relativeTime:{future:"%s 후",past:"%s 전",s:"몇초",ss:"%d초",m:"일분",mm:"%d분",h:"한시간",hh:"%d시간",d:"하루",dd:"%d일",M:"한달",MM:"%d달",y:"일년",yy:"%d년"},ordinalParse:/\d{1,2}일/,ordinal:"%d일",meridiemParse:/오전|오후/,isPM:function(e){return"오후"===e},meridiem:function(e,t,n){return e<12?"오전":"오후"}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){var i={m:["eng Minutt","enger Minutt"],h:["eng Stonn","enger Stonn"],d:["een Dag","engem Dag"],M:["ee Mount","engem Mount"],y:["ee Joer","engem Joer"]};return t?i[n][0]:i[n][1]}function n(e){return i(e.substr(0,e.indexOf(" ")))?"a "+e:"an "+e}function r(e){return i(e.substr(0,e.indexOf(" ")))?"viru "+e:"virun "+e}function i(e){if(e=parseInt(e,10),isNaN(e))return!1;if(e<0)return!0;if(e<10)return 4<=e&&e<=7;if(e<100){var t=e%10,n=e/10;return i(0===t?n:t)}if(e<1e4){for(;e>=10;)e/=10;return i(e)}return e/=1e3,i(e)}e.defineLocale("lb",{months:"Januar_Februar_Mäerz_Abrëll_Mee_Juni_Juli_August_September_Oktober_November_Dezember".split("_"),monthsShort:"Jan._Febr._Mrz._Abr._Mee_Jun._Jul._Aug._Sept._Okt._Nov._Dez.".split("_"),weekdays:"Sonndeg_Méindeg_Dënschdeg_Mëttwoch_Donneschdeg_Freideg_Samschdeg".split("_"),weekdaysShort:"So._Mé._Dë._Më._Do._Fr._Sa.".split("_"),weekdaysMin:"So_Mé_Dë_Më_Do_Fr_Sa".split("_"),longDateFormat:{LT:"H:mm [Auer]",LTS:"H:mm:ss [Auer]",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[Haut um] LT",sameElse:"L",nextDay:"[Muer um] LT",nextWeek:"dddd [um] LT",lastDay:"[Gëschter um] LT",lastWeek:function(){switch(this.day()){case 2:case 4:return"[Leschten] dddd [um] LT";default:return"[Leschte] dddd [um] LT"}}},relativeTime:{future:n,past:r,s:"e puer Sekonnen",m:t,mm:"%d Minutten",h:t,hh:"%d Stonnen",d:t,dd:"%d Deeg",M:t,MM:"%d Méint",y:t,yy:"%d Joer"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n,r){return t?"kelios sekundės":r?"kelių sekundžių":"kelias sekundes"}function n(e,t,n,r){return t?i(n)[0]:r?i(n)[1]:i(n)[2]}function r(e){return e%10==0||e>10&&e<20}function i(e){return s[e].split("_")}function o(e,t,o,a){var s=e+" ";return 1===e?s+n(e,t,o[0],a):t?s+(r(e)?i(o)[1]:i(o)[0]):a?s+i(o)[1]:s+(r(e)?i(o)[1]:i(o)[2])}function a(e,t){var n=-1===t.indexOf("dddd HH:mm"),r=l[e.day()];return n?r:r.substring(0,r.length-2)+"į"}var s={m:"minutė_minutės_minutę",mm:"minutės_minučių_minutes",h:"valanda_valandos_valandą",hh:"valandos_valandų_valandas",d:"diena_dienos_dieną",dd:"dienos_dienų_dienas",M:"mėnuo_mėnesio_mėnesį",MM:"mėnesiai_mėnesių_mėnesius",y:"metai_metų_metus",yy:"metai_metų_metus"},l="sekmadienis_pirmadienis_antradienis_trečiadienis_ketvirtadienis_penktadienis_šeštadienis".split("_");e.defineLocale("lt",{months:"sausio_vasario_kovo_balandžio_gegužės_birželio_liepos_rugpjūčio_rugsėjo_spalio_lapkričio_gruodžio".split("_"),monthsShort:"sau_vas_kov_bal_geg_bir_lie_rgp_rgs_spa_lap_grd".split("_"),weekdays:a,weekdaysShort:"Sek_Pir_Ant_Tre_Ket_Pen_Šeš".split("_"),weekdaysMin:"S_P_A_T_K_Pn_Š".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"YYYY [m.] MMMM D [d.]",LLL:"YYYY [m.] MMMM D [d.], LT [val.]",LLLL:"YYYY [m.] MMMM D [d.], dddd, LT [val.]",l:"YYYY-MM-DD",ll:"YYYY [m.] MMMM D [d.]",lll:"YYYY [m.] MMMM D [d.], LT [val.]",llll:"YYYY [m.] MMMM D [d.], ddd, LT [val.]"},calendar:{sameDay:"[Šiandien] LT",nextDay:"[Rytoj] LT",nextWeek:"dddd LT",lastDay:"[Vakar] LT",lastWeek:"[Praėjusį] dddd LT",sameElse:"L"},relativeTime:{future:"po %s",past:"prieš %s",s:t,m:n,mm:o,h:n,hh:o,d:n,dd:o,M:n,MM:o,y:n,yy:o},ordinalParse:/\d{1,2}-oji/,ordinal:function(e){return e+"-oji"},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n){var r=e.split("_");return n?t%10==1&&11!==t?r[2]:r[3]:t%10==1&&11!==t?r[0]:r[1]}function n(e,n,i){return e+" "+t(r[i],e,n)}var r={mm:"minūti_minūtes_minūte_minūtes",hh:"stundu_stundas_stunda_stundas",dd:"dienu_dienas_diena_dienas",MM:"mēnesi_mēnešus_mēnesis_mēneši",yy:"gadu_gadus_gads_gadi"};e.defineLocale("lv",{months:"janvāris_februāris_marts_aprīlis_maijs_jūnijs_jūlijs_augusts_septembris_oktobris_novembris_decembris".split("_"),monthsShort:"jan_feb_mar_apr_mai_jūn_jūl_aug_sep_okt_nov_dec".split("_"),weekdays:"svētdiena_pirmdiena_otrdiena_trešdiena_ceturtdiena_piektdiena_sestdiena".split("_"),weekdaysShort:"Sv_P_O_T_C_Pk_S".split("_"),weekdaysMin:"Sv_P_O_T_C_Pk_S".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"YYYY. [gada] D. MMMM",LLL:"YYYY. [gada] D. MMMM, LT",LLLL:"YYYY. [gada] D. MMMM, dddd, LT"},calendar:{sameDay:"[Šodien pulksten] LT",nextDay:"[Rīt pulksten] LT",nextWeek:"dddd [pulksten] LT",lastDay:"[Vakar pulksten] LT",lastWeek:"[Pagājušā] dddd [pulksten] LT",sameElse:"L"},relativeTime:{future:"%s vēlāk",past:"%s agrāk",s:"dažas sekundes",m:"minūti",mm:n,h:"stundu",hh:n,d:"dienu",dd:n,M:"mēnesi",MM:n,y:"gadu",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("mk",{months:"јануари_февруари_март_април_мај_јуни_јули_август_септември_октомври_ноември_декември".split("_"),monthsShort:"јан_фев_мар_апр_мај_јун_јул_авг_сеп_окт_ное_дек".split("_"),weekdays:"недела_понеделник_вторник_среда_четврток_петок_сабота".split("_"),weekdaysShort:"нед_пон_вто_сре_чет_пет_саб".split("_"),weekdaysMin:"нe_пo_вт_ср_че_пе_сa".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"D.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Денес во] LT",nextDay:"[Утре во] LT",nextWeek:"dddd [во] LT",lastDay:"[Вчера во] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[Во изминатата] dddd [во] LT";case 1:case 2:case 4:case 5:return"[Во изминатиот] dddd [во] LT"}},sameElse:"L"},relativeTime:{future:"после %s",past:"пред %s",s:"неколку секунди",m:"минута",mm:"%d минути",h:"час",hh:"%d часа",d:"ден",dd:"%d дена",M:"месец",MM:"%d месеци",y:"година",yy:"%d години"},ordinalParse:/\d{1,2}-(ев|ен|ти|ви|ри|ми)/,ordinal:function(e){var t=e%10,n=e%100;return 0===e?e+"-ев":0===n?e+"-ен":n>10&&n<20?e+"-ти":1===t?e+"-ви":2===t?e+"-ри":7===t||8===t?e+"-ми":e+"-ти"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("ml",{months:"ജനുവരി_ഫെബ്രുവരി_മാർച്ച്_ഏപ്രിൽ_മേയ്_ജൂൺ_ജൂലൈ_ഓഗസ്റ്റ്_സെപ്റ്റംബർ_ഒക്ടോബർ_നവംബർ_ഡിസംബർ".split("_"),monthsShort:"ജനു._ഫെബ്രു._മാർ._ഏപ്രി._മേയ്_ജൂൺ_ജൂലൈ._ഓഗ._സെപ്റ്റ._ഒക്ടോ._നവം._ഡിസം.".split("_"),weekdays:"ഞായറാഴ്ച_തിങ്കളാഴ്ച_ചൊവ്വാഴ്ച_ബുധനാഴ്ച_വ്യാഴാഴ്ച_വെള്ളിയാഴ്ച_ശനിയാഴ്ച".split("_"),weekdaysShort:"ഞായർ_തിങ്കൾ_ചൊവ്വ_ബുധൻ_വ്യാഴം_വെള്ളി_ശനി".split("_"),weekdaysMin:"ഞാ_തി_ചൊ_ബു_വ്യാ_വെ_ശ".split("_"),longDateFormat:{LT:"A h:mm -നു",LTS:"A h:mm:ss -നു",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[ഇന്ന്] LT",nextDay:"[നാളെ] LT",nextWeek:"dddd, LT",lastDay:"[ഇന്നലെ] LT",lastWeek:"[കഴിഞ്ഞ] dddd, LT",sameElse:"L"},relativeTime:{future:"%s കഴിഞ്ഞ്",past:"%s മുൻപ്",s:"അൽപ നിമിഷങ്ങൾ",m:"ഒരു മിനിറ്റ്",mm:"%d മിനിറ്റ്",h:"ഒരു മണിക്കൂർ",hh:"%d മണിക്കൂർ",d:"ഒരു ദിവസം",dd:"%d ദിവസം",M:"ഒരു മാസം",MM:"%d മാസം",y:"ഒരു വർഷം",yy:"%d വർഷം"},meridiemParse:/രാത്രി|രാവിലെ|ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി/i,isPM:function(e){return/^(ഉച്ച കഴിഞ്ഞ്|വൈകുന്നേരം|രാത്രി)$/.test(e)},meridiem:function(e,t,n){return e<4?"രാത്രി":e<12?"രാവിലെ":e<17?"ഉച്ച കഴിഞ്ഞ്":e<20?"വൈകുന്നേരം":"രാത്രി"}})}(ye)}(),function(e){!function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("mr",{months:"जानेवारी_फेब्रुवारी_मार्च_एप्रिल_मे_जून_जुलै_ऑगस्ट_सप्टेंबर_ऑक्टोबर_नोव्हेंबर_डिसेंबर".split("_"),monthsShort:"जाने._फेब्रु._मार्च._एप्रि._मे._जून._जुलै._ऑग._सप्टें._ऑक्टो._नोव्हें._डिसें.".split("_"),weekdays:"रविवार_सोमवार_मंगळवार_बुधवार_गुरूवार_शुक्रवार_शनिवार".split("_"),weekdaysShort:"रवि_सोम_मंगळ_बुध_गुरू_शुक्र_शनि".split("_"),weekdaysMin:"र_सो_मं_बु_गु_शु_श".split("_"),longDateFormat:{LT:"A h:mm वाजता",LTS:"A h:mm:ss वाजता",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[आज] LT",nextDay:"[उद्या] LT",nextWeek:"dddd, LT",lastDay:"[काल] LT",lastWeek:"[मागील] dddd, LT",sameElse:"L"},relativeTime:{future:"%s नंतर",past:"%s पूर्वी",s:"सेकंद",m:"एक मिनिट",mm:"%d मिनिटे",h:"एक तास",hh:"%d तास",d:"एक दिवस",dd:"%d दिवस",M:"एक महिना",MM:"%d महिने",y:"एक वर्ष",yy:"%d वर्षे"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/रात्री|सकाळी|दुपारी|सायंकाळी/,meridiemHour:function(e,t){return 12===e&&(e=0),"रात्री"===t?e<4?e:e+12:"सकाळी"===t?e:"दुपारी"===t?e>=10?e:e+12:"सायंकाळी"===t?e+12:void 0},meridiem:function(e,t,n){return e<4?"रात्री":e<10?"सकाळी":e<17?"दुपारी":e<20?"सायंकाळी":"रात्री"},week:{dow:0,doy:6}})}(ye)}(),function(e){!function(e){e.defineLocale("ms-my",{months:"Januari_Februari_Mac_April_Mei_Jun_Julai_Ogos_September_Oktober_November_Disember".split("_"),monthsShort:"Jan_Feb_Mac_Apr_Mei_Jun_Jul_Ogs_Sep_Okt_Nov_Dis".split("_"),weekdays:"Ahad_Isnin_Selasa_Rabu_Khamis_Jumaat_Sabtu".split("_"),weekdaysShort:"Ahd_Isn_Sel_Rab_Kha_Jum_Sab".split("_"),weekdaysMin:"Ah_Is_Sl_Rb_Km_Jm_Sb".split("_"),longDateFormat:{LT:"HH.mm",LTS:"LT.ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY [pukul] LT",LLLL:"dddd, D MMMM YYYY [pukul] LT"},meridiemParse:/pagi|tengahari|petang|malam/,meridiemHour:function(e,t){return 12===e&&(e=0),"pagi"===t?e:"tengahari"===t?e>=11?e:e+12:"petang"===t||"malam"===t?e+12:void 0},meridiem:function(e,t,n){return e<11?"pagi":e<15?"tengahari":e<19?"petang":"malam"},calendar:{sameDay:"[Hari ini pukul] LT",nextDay:"[Esok pukul] LT",nextWeek:"dddd [pukul] LT",lastDay:"[Kelmarin pukul] LT",lastWeek:"dddd [lepas pukul] LT",sameElse:"L"},relativeTime:{future:"dalam %s",past:"%s yang lepas",s:"beberapa saat",m:"seminit",mm:"%d minit",h:"sejam",hh:"%d jam",d:"sehari",dd:"%d hari",M:"sebulan",MM:"%d bulan",y:"setahun",yy:"%d tahun"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t={1:"၁",2:"၂",3:"၃",4:"၄",5:"၅",6:"၆",7:"၇",8:"၈",9:"၉",0:"၀"},n={"၁":"1","၂":"2","၃":"3","၄":"4","၅":"5","၆":"6","၇":"7","၈":"8","၉":"9","၀":"0"};e.defineLocale("my",{months:"ဇန်နဝါရီ_ဖေဖော်ဝါရီ_မတ်_ဧပြီ_မေ_ဇွန်_ဇူလိုင်_သြဂုတ်_စက်တင်ဘာ_အောက်တိုဘာ_နိုဝင်ဘာ_ဒီဇင်ဘာ".split("_"),monthsShort:"ဇန်_ဖေ_မတ်_ပြီ_မေ_ဇွန်_လိုင်_သြ_စက်_အောက်_နို_ဒီ".split("_"),weekdays:"တနင်္ဂနွေ_တနင်္လာ_အင်္ဂါ_ဗုဒ္ဓဟူး_ကြာသပတေး_သောကြာ_စနေ".split("_"),weekdaysShort:"နွေ_လာ_င်္ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),weekdaysMin:"နွေ_လာ_င်္ဂါ_ဟူး_ကြာ_သော_နေ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"HH:mm:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ယနေ.] LT [မှာ]",nextDay:"[မနက်ဖြန်] LT [မှာ]",nextWeek:"dddd LT [မှာ]",lastDay:"[မနေ.က] LT [မှာ]",lastWeek:"[ပြီးခဲ့သော] dddd LT [မှာ]",sameElse:"L"},relativeTime:{future:"လာမည့် %s မှာ",past:"လွန်ခဲ့သော %s က",s:"စက္ကန်.အနည်းငယ်",m:"တစ်မိနစ်",mm:"%d မိနစ်",h:"တစ်နာရီ",hh:"%d နာရီ",d:"တစ်ရက်",dd:"%d ရက်",M:"တစ်လ",MM:"%d လ",y:"တစ်နှစ်",yy:"%d နှစ်"},preparse:function(e){return e.replace(/[၁၂၃၄၅၆၇၈၉၀]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("nb",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"søndag_mandag_tirsdag_onsdag_torsdag_fredag_lørdag".split("_"),weekdaysShort:"søn_man_tirs_ons_tors_fre_lør".split("_"),weekdaysMin:"sø_ma_ti_on_to_fr_lø".split("_"),longDateFormat:{LT:"H.mm",LTS:"LT.ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY [kl.] LT",LLLL:"dddd D. MMMM YYYY [kl.] LT"},calendar:{sameDay:"[i dag kl.] LT",nextDay:"[i morgen kl.] LT",nextWeek:"dddd [kl.] LT",lastDay:"[i går kl.] LT",lastWeek:"[forrige] dddd [kl.] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s siden",s:"noen sekunder",m:"ett minutt",mm:"%d minutter",h:"en time",hh:"%d timer",d:"en dag",dd:"%d dager",M:"en måned",MM:"%d måneder",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){var t={1:"१",2:"२",3:"३",4:"४",5:"५",6:"६",7:"७",8:"८",9:"९",0:"०"},n={"१":"1","२":"2","३":"3","४":"4","५":"5","६":"6","७":"7","८":"8","९":"9","०":"0"};e.defineLocale("ne",{months:"जनवरी_फेब्रुवरी_मार्च_अप्रिल_मई_जुन_जुलाई_अगष्ट_सेप्टेम्बर_अक्टोबर_नोभेम्बर_डिसेम्बर".split("_"),monthsShort:"जन._फेब्रु._मार्च_अप्रि._मई_जुन_जुलाई._अग._सेप्ट._अक्टो._नोभे._डिसे.".split("_"),weekdays:"आइतबार_सोमबार_मङ्गलबार_बुधबार_बिहिबार_शुक्रबार_शनिबार".split("_"),weekdaysShort:"आइत._सोम._मङ्गल._बुध._बिहि._शुक्र._शनि.".split("_"),weekdaysMin:"आइ._सो._मङ्_बु._बि._शु._श.".split("_"),longDateFormat:{LT:"Aको h:mm बजे",LTS:"Aको h:mm:ss बजे",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},preparse:function(e){return e.replace(/[१२३४५६७८९०]/g,function(e){return n[e]})},postformat:function(e){return e.replace(/\d/g,function(e){return t[e]})},meridiemParse:/राती|बिहान|दिउँसो|बेलुका|साँझ|राती/,meridiemHour:function(e,t){return 12===e&&(e=0),"राती"===t?e<3?e:e+12:"बिहान"===t?e:"दिउँसो"===t?e>=10?e:e+12:"बेलुका"===t||"साँझ"===t?e+12:void 0},meridiem:function(e,t,n){return e<3?"राती":e<10?"बिहान":e<15?"दिउँसो":e<18?"बेलुका":e<20?"साँझ":"राती"},calendar:{sameDay:"[आज] LT",nextDay:"[भोली] LT",nextWeek:"[आउँदो] dddd[,] LT",lastDay:"[हिजो] LT",lastWeek:"[गएको] dddd[,] LT",sameElse:"L"},relativeTime:{future:"%sमा",past:"%s अगाडी",s:"केही समय",m:"एक मिनेट",mm:"%d मिनेट",h:"एक घण्टा",hh:"%d घण्टा",d:"एक दिन",dd:"%d दिन",M:"एक महिना",MM:"%d महिना",y:"एक बर्ष",yy:"%d बर्ष"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t="jan._feb._mrt._apr._mei_jun._jul._aug._sep._okt._nov._dec.".split("_"),n="jan_feb_mrt_apr_mei_jun_jul_aug_sep_okt_nov_dec".split("_");e.defineLocale("nl",{months:"januari_februari_maart_april_mei_juni_juli_augustus_september_oktober_november_december".split("_"),monthsShort:function(e,r){return/-MMM-/.test(r)?n[e.month()]:t[e.month()]},weekdays:"zondag_maandag_dinsdag_woensdag_donderdag_vrijdag_zaterdag".split("_"),weekdaysShort:"zo._ma._di._wo._do._vr._za.".split("_"),weekdaysMin:"Zo_Ma_Di_Wo_Do_Vr_Za".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD-MM-YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[vandaag om] LT",nextDay:"[morgen om] LT",nextWeek:"dddd [om] LT",lastDay:"[gisteren om] LT",lastWeek:"[afgelopen] dddd [om] LT",sameElse:"L"},relativeTime:{future:"over %s",past:"%s geleden",s:"een paar seconden",m:"één minuut",mm:"%d minuten",h:"één uur",hh:"%d uur",d:"één dag",dd:"%d dagen",M:"één maand",MM:"%d maanden",y:"één jaar",yy:"%d jaar"},ordinalParse:/\d{1,2}(ste|de)/,ordinal:function(e){return e+(1===e||8===e||e>=20?"ste":"de")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("nn",{months:"januar_februar_mars_april_mai_juni_juli_august_september_oktober_november_desember".split("_"),monthsShort:"jan_feb_mar_apr_mai_jun_jul_aug_sep_okt_nov_des".split("_"),weekdays:"sundag_måndag_tysdag_onsdag_torsdag_fredag_laurdag".split("_"),weekdaysShort:"sun_mån_tys_ons_tor_fre_lau".split("_"),weekdaysMin:"su_må_ty_on_to_fr_lø".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[I dag klokka] LT",nextDay:"[I morgon klokka] LT",nextWeek:"dddd [klokka] LT",lastDay:"[I går klokka] LT",lastWeek:"[Føregåande] dddd [klokka] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"for %s sidan",s:"nokre sekund",m:"eit minutt",mm:"%d minutt",h:"ein time",hh:"%d timar",d:"ein dag",dd:"%d dagar",M:"ein månad",MM:"%d månader",y:"eit år",yy:"%d år"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e){return e%10<5&&e%10>1&&~~(e/10)%10!=1}function n(e,n,r){var i=e+" ";switch(r){case"m":return n?"minuta":"minutę";case"mm":return i+(t(e)?"minuty":"minut");case"h":return n?"godzina":"godzinę";case"hh":return i+(t(e)?"godziny":"godzin");case"MM":return i+(t(e)?"miesiące":"miesięcy");case"yy":return i+(t(e)?"lata":"lat")}}var r="styczeń_luty_marzec_kwiecień_maj_czerwiec_lipiec_sierpień_wrzesień_październik_listopad_grudzień".split("_"),i="stycznia_lutego_marca_kwietnia_maja_czerwca_lipca_sierpnia_września_października_listopada_grudnia".split("_");e.defineLocale("pl",{months:function(e,t){return/D MMMM/.test(t)?i[e.month()]:r[e.month()]},monthsShort:"sty_lut_mar_kwi_maj_cze_lip_sie_wrz_paź_lis_gru".split("_"),weekdays:"niedziela_poniedziałek_wtorek_środa_czwartek_piątek_sobota".split("_"),weekdaysShort:"nie_pon_wt_śr_czw_pt_sb".split("_"),weekdaysMin:"N_Pn_Wt_Śr_Cz_Pt_So".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Dziś o] LT",nextDay:"[Jutro o] LT",nextWeek:"[W] dddd [o] LT",lastDay:"[Wczoraj o] LT",lastWeek:function(){switch(this.day()){case 0:return"[W zeszłą niedzielę o] LT";case 3:return"[W zeszłą środę o] LT";case 6:return"[W zeszłą sobotę o] LT";default:return"[W zeszły] dddd [o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"%s temu",s:"kilka sekund",m:n,mm:n,h:n,hh:n,d:"1 dzień",dd:"%d dni",M:"miesiąc",MM:n,y:"rok",yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("pt-br",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY [às] LT",LLLL:"dddd, D [de] MMMM [de] YYYY [às] LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"%s atrás",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº"})}(ye)}(),function(e){!function(e){e.defineLocale("pt",{months:"janeiro_fevereiro_março_abril_maio_junho_julho_agosto_setembro_outubro_novembro_dezembro".split("_"),monthsShort:"jan_fev_mar_abr_mai_jun_jul_ago_set_out_nov_dez".split("_"),weekdays:"domingo_segunda-feira_terça-feira_quarta-feira_quinta-feira_sexta-feira_sábado".split("_"),weekdaysShort:"dom_seg_ter_qua_qui_sex_sáb".split("_"),weekdaysMin:"dom_2ª_3ª_4ª_5ª_6ª_sáb".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D [de] MMMM [de] YYYY",LLL:"D [de] MMMM [de] YYYY LT",LLLL:"dddd, D [de] MMMM [de] YYYY LT"},calendar:{sameDay:"[Hoje às] LT",nextDay:"[Amanhã às] LT",nextWeek:"dddd [às] LT",lastDay:"[Ontem às] LT",lastWeek:function(){return 0===this.day()||6===this.day()?"[Último] dddd [às] LT":"[Última] dddd [às] LT"},sameElse:"L"},relativeTime:{future:"em %s",past:"há %s",s:"segundos",m:"um minuto",mm:"%d minutos",h:"uma hora",hh:"%d horas",d:"um dia",dd:"%d dias",M:"um mês",MM:"%d meses",y:"um ano",yy:"%d anos"},ordinalParse:/\d{1,2}º/,ordinal:"%dº",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n){var r={mm:"minute",hh:"ore",dd:"zile",MM:"luni",yy:"ani"},i=" ";return(e%100>=20||e>=100&&e%100==0)&&(i=" de "),e+i+r[n]}e.defineLocale("ro",{months:"ianuarie_februarie_martie_aprilie_mai_iunie_iulie_august_septembrie_octombrie_noiembrie_decembrie".split("_"),monthsShort:"ian._febr._mart._apr._mai_iun._iul._aug._sept._oct._nov._dec.".split("_"),weekdays:"duminică_luni_marți_miercuri_joi_vineri_sâmbătă".split("_"),weekdaysShort:"Dum_Lun_Mar_Mie_Joi_Vin_Sâm".split("_"),weekdaysMin:"Du_Lu_Ma_Mi_Jo_Vi_Sâ".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY H:mm",LLLL:"dddd, D MMMM YYYY H:mm"},calendar:{sameDay:"[azi la] LT",nextDay:"[mâine la] LT",nextWeek:"dddd [la] LT",lastDay:"[ieri la] LT",lastWeek:"[fosta] dddd [la] LT",sameElse:"L"},relativeTime:{future:"peste %s",past:"%s în urmă",s:"câteva secunde",m:"un minut",mm:t,h:"o oră",hh:t,d:"o zi",dd:t,M:"o lună",MM:t,y:"un an",yy:t},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:n?"минута_минуты_минут":"минуту_минуты_минут",hh:"час_часа_часов",dd:"день_дня_дней",MM:"месяц_месяца_месяцев",yy:"год_года_лет"};return"m"===r?n?"минута":"минуту":e+" "+t(i[r],+e)}function r(e,t){return{nominative:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),accusative:"января_февраля_марта_апреля_мая_июня_июля_августа_сентября_октября_ноября_декабря".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function i(e,t){return{nominative:"янв_фев_март_апр_май_июнь_июль_авг_сен_окт_ноя_дек".split("_"),accusative:"янв_фев_мар_апр_мая_июня_июля_авг_сен_окт_ноя_дек".split("_")}[/D[oD]?(\[[^\[\]]*\]|\s+)+MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function o(e,t){return{nominative:"воскресенье_понедельник_вторник_среда_четверг_пятница_суббота".split("_"),accusative:"воскресенье_понедельник_вторник_среду_четверг_пятницу_субботу".split("_")}[/\[ ?[Вв] ?(?:прошлую|следующую|эту)? ?\] ?dddd/.test(t)?"accusative":"nominative"][e.day()]}e.defineLocale("ru",{months:r,monthsShort:i,weekdays:o,weekdaysShort:"вс_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"вс_пн_вт_ср_чт_пт_сб".split("_"),monthsParse:[/^янв/i,/^фев/i,/^мар/i,/^апр/i,/^ма[й|я]/i,/^июн/i,/^июл/i,/^авг/i,/^сен/i,/^окт/i,/^ноя/i,/^дек/i],longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY г.",LLL:"D MMMM YYYY г., LT",LLLL:"dddd, D MMMM YYYY г., LT"},calendar:{sameDay:"[Сегодня в] LT",nextDay:"[Завтра в] LT",lastDay:"[Вчера в] LT",nextWeek:function(){return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT"},lastWeek:function(e){if(e.week()===this.week())return 2===this.day()?"[Во] dddd [в] LT":"[В] dddd [в] LT";switch(this.day()){case 0:return"[В прошлое] dddd [в] LT";case 1:case 2:case 4:return"[В прошлый] dddd [в] LT";case 3:case 5:case 6:return"[В прошлую] dddd [в] LT"}},sameElse:"L"},relativeTime:{future:"через %s",past:"%s назад",s:"несколько секунд",m:n,mm:n,h:"час",hh:n,d:"день",dd:n,M:"месяц",MM:n,y:"год",yy:n},meridiemParse:/ночи|утра|дня|вечера/i,isPM:function(e){return/^(дня|вечера)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночи":e<12?"утра":e<17?"дня":"вечера"},ordinalParse:/\d{1,2}-(й|го|я)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":return e+"-й";case"D":return e+"-го";case"w":case"W":return e+"-я";default:return e}},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){function t(e){return e>1&&e<5}function n(e,n,r,i){var o=e+" ";switch(r){case"s":return n||i?"pár sekúnd":"pár sekundami";case"m":return n?"minúta":i?"minútu":"minútou";case"mm":return n||i?o+(t(e)?"minúty":"minút"):o+"minútami";case"h":return n?"hodina":i?"hodinu":"hodinou";case"hh":return n||i?o+(t(e)?"hodiny":"hodín"):o+"hodinami";case"d":return n||i?"deň":"dňom";case"dd":return n||i?o+(t(e)?"dni":"dní"):o+"dňami";case"M":return n||i?"mesiac":"mesiacom";case"MM":return n||i?o+(t(e)?"mesiace":"mesiacov"):o+"mesiacmi";case"y":return n||i?"rok":"rokom";case"yy":return n||i?o+(t(e)?"roky":"rokov"):o+"rokmi"}}var r="január_február_marec_apríl_máj_jún_júl_august_september_október_november_december".split("_"),i="jan_feb_mar_apr_máj_jún_júl_aug_sep_okt_nov_dec".split("_");e.defineLocale("sk",{months:r,monthsShort:i,monthsParse:function(e,t){var n,r=[];for(n=0;n<12;n++)r[n]=new RegExp("^"+e[n]+"$|^"+t[n]+"$","i");return r}(r,i),weekdays:"nedeľa_pondelok_utorok_streda_štvrtok_piatok_sobota".split("_"),weekdaysShort:"ne_po_ut_st_št_pi_so".split("_"),weekdaysMin:"ne_po_ut_st_št_pi_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd D. MMMM YYYY LT"},calendar:{sameDay:"[dnes o] LT",nextDay:"[zajtra o] LT",nextWeek:function(){switch(this.day()){case 0:return"[v nedeľu o] LT";case 1:case 2:return"[v] dddd [o] LT";case 3:return"[v stredu o] LT";case 4:return"[vo štvrtok o] LT";case 5:return"[v piatok o] LT";case 6:return"[v sobotu o] LT"}},lastDay:"[včera o] LT",lastWeek:function(){switch(this.day()){case 0:return"[minulú nedeľu o] LT";case 1:case 2:return"[minulý] dddd [o] LT";case 3:return"[minulú stredu o] LT";case 4:case 5:return"[minulý] dddd [o] LT";case 6:return"[minulú sobotu o] LT"}},sameElse:"L"},relativeTime:{future:"za %s",past:"pred %s",s:n,m:n,mm:n,h:n,hh:n,d:n,dd:n,M:n,MM:n,y:n,yy:n},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){function t(e,t,n){var r=e+" ";switch(n){case"m":return t?"ena minuta":"eno minuto";case"mm":return r+=1===e?"minuta":2===e?"minuti":3===e||4===e?"minute":"minut";case"h":return t?"ena ura":"eno uro";case"hh":return r+=1===e?"ura":2===e?"uri":3===e||4===e?"ure":"ur";case"dd":return r+=1===e?"dan":"dni";case"MM":return r+=1===e?"mesec":2===e?"meseca":3===e||4===e?"mesece":"mesecev";case"yy":return r+=1===e?"leto":2===e?"leti":3===e||4===e?"leta":"let"}}e.defineLocale("sl",{months:"januar_februar_marec_april_maj_junij_julij_avgust_september_oktober_november_december".split("_"),monthsShort:"jan._feb._mar._apr._maj._jun._jul._avg._sep._okt._nov._dec.".split("_"),weekdays:"nedelja_ponedeljek_torek_sreda_četrtek_petek_sobota".split("_"),weekdaysShort:"ned._pon._tor._sre._čet._pet._sob.".split("_"),weekdaysMin:"ne_po_to_sr_če_pe_so".split("_"),longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danes ob] LT",nextDay:"[jutri ob] LT",nextWeek:function(){switch(this.day()){case 0:return"[v] [nedeljo] [ob] LT";case 3:return"[v] [sredo] [ob] LT";case 6:return"[v] [soboto] [ob] LT";case 1:case 2:case 4:case 5:return"[v] dddd [ob] LT"}},lastDay:"[včeraj ob] LT",lastWeek:function(){switch(this.day()){case 0:case 3:case 6:return"[prejšnja] dddd [ob] LT";case 1:case 2:case 4:case 5:return"[prejšnji] dddd [ob] LT"}},sameElse:"L"},relativeTime:{future:"čez %s",past:"%s nazaj",s:"nekaj sekund",m:t,mm:t,h:t,hh:t,d:"en dan",dd:t,M:"en mesec",MM:t,y:"eno leto",yy:t},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("sq",{months:"Janar_Shkurt_Mars_Prill_Maj_Qershor_Korrik_Gusht_Shtator_Tetor_Nëntor_Dhjetor".split("_"),monthsShort:"Jan_Shk_Mar_Pri_Maj_Qer_Kor_Gus_Sht_Tet_Nën_Dhj".split("_"),weekdays:"E Diel_E Hënë_E Martë_E Mërkurë_E Enjte_E Premte_E Shtunë".split("_"),weekdaysShort:"Die_Hën_Mar_Mër_Enj_Pre_Sht".split("_"),weekdaysMin:"D_H_Ma_Më_E_P_Sh".split("_"),meridiemParse:/PD|MD/,isPM:function(e){return"M"===e.charAt(0)},meridiem:function(e,t,n){return e<12?"PD":"MD"},longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[Sot në] LT",nextDay:"[Nesër në] LT",nextWeek:"dddd [në] LT",lastDay:"[Dje në] LT",lastWeek:"dddd [e kaluar në] LT",sameElse:"L"},relativeTime:{future:"në %s",past:"%s më parë",s:"disa sekonda",m:"një minutë",mm:"%d minuta",h:"një orë",hh:"%d orë",d:"një ditë",dd:"%d ditë",M:"një muaj",MM:"%d muaj",y:"një vit",yy:"%d vite"},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){var t={words:{m:["један минут","једне минуте"],mm:["минут","минуте","минута"],h:["један сат","једног сата"],hh:["сат","сата","сати"],dd:["дан","дана","дана"],MM:["месец","месеца","месеци"],yy:["година","године","година"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr-cyrl",{months:["јануар","фебруар","март","април","мај","јун","јул","август","септембар","октобар","новембар","децембар"],monthsShort:["јан.","феб.","мар.","апр.","мај","јун","јул","авг.","сеп.","окт.","нов.","дец."],weekdays:["недеља","понедељак","уторак","среда","четвртак","петак","субота"],weekdaysShort:["нед.","пон.","уто.","сре.","чет.","пет.","суб."],weekdaysMin:["не","по","ут","ср","че","пе","су"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[данас у] LT",nextDay:"[сутра у] LT",nextWeek:function(){switch(this.day()){case 0:return"[у] [недељу] [у] LT";case 3:return"[у] [среду] [у] LT";case 6:return"[у] [суботу] [у] LT";case 1:case 2:case 4:case 5:return"[у] dddd [у] LT"}},lastDay:"[јуче у] LT",lastWeek:function(){return["[прошле] [недеље] [у] LT","[прошлог] [понедељка] [у] LT","[прошлог] [уторка] [у] LT","[прошле] [среде] [у] LT","[прошлог] [четвртка] [у] LT","[прошлог] [петка] [у] LT","[прошле] [суботе] [у] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"за %s",past:"пре %s",s:"неколико секунди",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"дан",dd:t.translate,M:"месец",MM:t.translate,y:"годину",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){var t={words:{m:["jedan minut","jedne minute"],mm:["minut","minute","minuta"],h:["jedan sat","jednog sata"],hh:["sat","sata","sati"],dd:["dan","dana","dana"],MM:["mesec","meseca","meseci"],yy:["godina","godine","godina"]},correctGrammaticalCase:function(e,t){return 1===e?t[0]:e>=2&&e<=4?t[1]:t[2]},translate:function(e,n,r){var i=t.words[r];return 1===r.length?n?i[0]:i[1]:e+" "+t.correctGrammaticalCase(e,i)}};e.defineLocale("sr",{months:["januar","februar","mart","april","maj","jun","jul","avgust","septembar","oktobar","novembar","decembar"],monthsShort:["jan.","feb.","mar.","apr.","maj","jun","jul","avg.","sep.","okt.","nov.","dec."],weekdays:["nedelja","ponedeljak","utorak","sreda","četvrtak","petak","subota"],weekdaysShort:["ned.","pon.","uto.","sre.","čet.","pet.","sub."],weekdaysMin:["ne","po","ut","sr","če","pe","su"],longDateFormat:{LT:"H:mm",LTS:"LT:ss",L:"DD. MM. YYYY",LL:"D. MMMM YYYY",LLL:"D. MMMM YYYY LT",LLLL:"dddd, D. MMMM YYYY LT"},calendar:{sameDay:"[danas u] LT",nextDay:"[sutra u] LT",nextWeek:function(){switch(this.day()){case 0:return"[u] [nedelju] [u] LT";case 3:return"[u] [sredu] [u] LT";case 6:return"[u] [subotu] [u] LT";case 1:case 2:case 4:case 5:return"[u] dddd [u] LT"}},lastDay:"[juče u] LT",lastWeek:function(){return["[prošle] [nedelje] [u] LT","[prošlog] [ponedeljka] [u] LT","[prošlog] [utorka] [u] LT","[prošle] [srede] [u] LT","[prošlog] [četvrtka] [u] LT","[prošlog] [petka] [u] LT","[prošle] [subote] [u] LT"][this.day()]},sameElse:"L"},relativeTime:{future:"za %s",past:"pre %s",s:"nekoliko sekundi",m:t.translate,mm:t.translate,h:t.translate,hh:t.translate,d:"dan",dd:t.translate,M:"mesec",MM:t.translate,y:"godinu",yy:t.translate},ordinalParse:/\d{1,2}\./,ordinal:"%d.",week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("sv",{months:"januari_februari_mars_april_maj_juni_juli_augusti_september_oktober_november_december".split("_"),monthsShort:"jan_feb_mar_apr_maj_jun_jul_aug_sep_okt_nov_dec".split("_"),weekdays:"söndag_måndag_tisdag_onsdag_torsdag_fredag_lördag".split("_"),weekdaysShort:"sön_mån_tis_ons_tor_fre_lör".split("_"),weekdaysMin:"sö_må_ti_on_to_fr_lö".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"YYYY-MM-DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[Idag] LT",nextDay:"[Imorgon] LT",lastDay:"[Igår] LT",nextWeek:"dddd LT",lastWeek:"[Förra] dddd[en] LT",sameElse:"L"},relativeTime:{future:"om %s",past:"för %s sedan",s:"några sekunder",m:"en minut",mm:"%d minuter",h:"en timme",hh:"%d timmar",d:"en dag",dd:"%d dagar",M:"en månad",MM:"%d månader",y:"ett år",yy:"%d år"},ordinalParse:/\d{1,2}(e|a)/,ordinal:function(e){var t=e%10;return e+(1==~~(e%100/10)?"e":1===t?"a":2===t?"a":"e")},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("ta",{months:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),monthsShort:"ஜனவரி_பிப்ரவரி_மார்ச்_ஏப்ரல்_மே_ஜூன்_ஜூலை_ஆகஸ்ட்_செப்டெம்பர்_அக்டோபர்_நவம்பர்_டிசம்பர்".split("_"),weekdays:"ஞாயிற்றுக்கிழமை_திங்கட்கிழமை_செவ்வாய்கிழமை_புதன்கிழமை_வியாழக்கிழமை_வெள்ளிக்கிழமை_சனிக்கிழமை".split("_"),weekdaysShort:"ஞாயிறு_திங்கள்_செவ்வாய்_புதன்_வியாழன்_வெள்ளி_சனி".split("_"),weekdaysMin:"ஞா_தி_செ_பு_வி_வெ_ச".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY, LT",LLLL:"dddd, D MMMM YYYY, LT"},calendar:{sameDay:"[இன்று] LT",nextDay:"[நாளை] LT",nextWeek:"dddd, LT",lastDay:"[நேற்று] LT",lastWeek:"[கடந்த வாரம்] dddd, LT",sameElse:"L"},relativeTime:{future:"%s இல்",past:"%s முன்",s:"ஒரு சில விநாடிகள்",m:"ஒரு நிமிடம்",mm:"%d நிமிடங்கள்",h:"ஒரு மணி நேரம்",hh:"%d மணி நேரம்",d:"ஒரு நாள்",dd:"%d நாட்கள்",M:"ஒரு மாதம்",MM:"%d மாதங்கள்",y:"ஒரு வருடம்",yy:"%d ஆண்டுகள்"},ordinalParse:/\d{1,2}வது/,ordinal:function(e){return e+"வது"},meridiemParse:/யாமம்|வைகறை|காலை|நண்பகல்|எற்பாடு|மாலை/,meridiem:function(e,t,n){return e<2?" யாமம்":e<6?" வைகறை":e<10?" காலை":e<14?" நண்பகல்":e<18?" எற்பாடு":e<22?" மாலை":" யாமம்"},meridiemHour:function(e,t){return 12===e&&(e=0),"யாமம்"===t?e<2?e:e+12:"வைகறை"===t||"காலை"===t?e:"நண்பகல்"===t&&e>=10?e:e+12},week:{dow:0,doy:6}})}(ye)}(),function(e){!function(e){e.defineLocale("th",{months:"มกราคม_กุมภาพันธ์_มีนาคม_เมษายน_พฤษภาคม_มิถุนายน_กรกฎาคม_สิงหาคม_กันยายน_ตุลาคม_พฤศจิกายน_ธันวาคม".split("_"),monthsShort:"มกรา_กุมภา_มีนา_เมษา_พฤษภา_มิถุนา_กรกฎา_สิงหา_กันยา_ตุลา_พฤศจิกา_ธันวา".split("_"),weekdays:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัสบดี_ศุกร์_เสาร์".split("_"),weekdaysShort:"อาทิตย์_จันทร์_อังคาร_พุธ_พฤหัส_ศุกร์_เสาร์".split("_"),weekdaysMin:"อา._จ._อ._พ._พฤ._ศ._ส.".split("_"),longDateFormat:{LT:"H นาฬิกา m นาที",LTS:"LT s วินาที",L:"YYYY/MM/DD",LL:"D MMMM YYYY",LLL:"D MMMM YYYY เวลา LT",LLLL:"วันddddที่ D MMMM YYYY เวลา LT"},meridiemParse:/ก่อนเที่ยง|หลังเที่ยง/,isPM:function(e){return"หลังเที่ยง"===e},meridiem:function(e,t,n){return e<12?"ก่อนเที่ยง":"หลังเที่ยง"},calendar:{sameDay:"[วันนี้ เวลา] LT",nextDay:"[พรุ่งนี้ เวลา] LT",nextWeek:"dddd[หน้า เวลา] LT",lastDay:"[เมื่อวานนี้ เวลา] LT",lastWeek:"[วัน]dddd[ที่แล้ว เวลา] LT",sameElse:"L"},relativeTime:{future:"อีก %s",past:"%sที่แล้ว",s:"ไม่กี่วินาที",m:"1 นาที",mm:"%d นาที",h:"1 ชั่วโมง",hh:"%d ชั่วโมง",d:"1 วัน",dd:"%d วัน",M:"1 เดือน",MM:"%d เดือน",y:"1 ปี",yy:"%d ปี"}})}(ye)}(),function(e){!function(e){e.defineLocale("tl-ph",{months:"Enero_Pebrero_Marso_Abril_Mayo_Hunyo_Hulyo_Agosto_Setyembre_Oktubre_Nobyembre_Disyembre".split("_"),monthsShort:"Ene_Peb_Mar_Abr_May_Hun_Hul_Ago_Set_Okt_Nob_Dis".split("_"),weekdays:"Linggo_Lunes_Martes_Miyerkules_Huwebes_Biyernes_Sabado".split("_"),weekdaysShort:"Lin_Lun_Mar_Miy_Huw_Biy_Sab".split("_"),weekdaysMin:"Li_Lu_Ma_Mi_Hu_Bi_Sab".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"MM/D/YYYY",LL:"MMMM D, YYYY",LLL:"MMMM D, YYYY LT",LLLL:"dddd, MMMM DD, YYYY LT"},calendar:{sameDay:"[Ngayon sa] LT",nextDay:"[Bukas sa] LT",nextWeek:"dddd [sa] LT",lastDay:"[Kahapon sa] LT",lastWeek:"dddd [huling linggo] LT",sameElse:"L"},relativeTime:{future:"sa loob ng %s",past:"%s ang nakalipas",s:"ilang segundo",m:"isang minuto",mm:"%d minuto",h:"isang oras",hh:"%d oras",d:"isang araw",dd:"%d araw",M:"isang buwan",MM:"%d buwan",y:"isang taon",yy:"%d taon"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){var t={1:"'inci",5:"'inci",8:"'inci",70:"'inci",80:"'inci",2:"'nci",7:"'nci",20:"'nci",50:"'nci",3:"'üncü",4:"'üncü",100:"'üncü",6:"'ncı",9:"'uncu",10:"'uncu",30:"'uncu",60:"'ıncı",90:"'ıncı"};e.defineLocale("tr",{months:"Ocak_Şubat_Mart_Nisan_Mayıs_Haziran_Temmuz_Ağustos_Eylül_Ekim_Kasım_Aralık".split("_"),monthsShort:"Oca_Şub_Mar_Nis_May_Haz_Tem_Ağu_Eyl_Eki_Kas_Ara".split("_"),weekdays:"Pazar_Pazartesi_Salı_Çarşamba_Perşembe_Cuma_Cumartesi".split("_"),weekdaysShort:"Paz_Pts_Sal_Çar_Per_Cum_Cts".split("_"),weekdaysMin:"Pz_Pt_Sa_Ça_Pe_Cu_Ct".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd, D MMMM YYYY LT"},calendar:{sameDay:"[bugün saat] LT",nextDay:"[yarın saat] LT",nextWeek:"[haftaya] dddd [saat] LT",lastDay:"[dün] LT",lastWeek:"[geçen hafta] dddd [saat] LT",sameElse:"L"},relativeTime:{future:"%s sonra",past:"%s önce",s:"birkaç saniye",m:"bir dakika",mm:"%d dakika",h:"bir saat",hh:"%d saat",d:"bir gün",dd:"%d gün",M:"bir ay",MM:"%d ay",y:"bir yıl",yy:"%d yıl"},ordinalParse:/\d{1,2}'(inci|nci|üncü|ncı|uncu|ıncı)/,ordinal:function(e){if(0===e)return e+"'ıncı";var n=e%10,r=e%100-n,i=e>=100?100:null;return e+(t[n]||t[r]||t[i])},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("tzm-latn",{months:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),monthsShort:"innayr_brˤayrˤ_marˤsˤ_ibrir_mayyw_ywnyw_ywlywz_ɣwšt_šwtanbir_ktˤwbrˤ_nwwanbir_dwjnbir".split("_"),weekdays:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysShort:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),weekdaysMin:"asamas_aynas_asinas_akras_akwas_asimwas_asiḍyas".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[asdkh g] LT",nextDay:"[aska g] LT",nextWeek:"dddd [g] LT",lastDay:"[assant g] LT",lastWeek:"dddd [g] LT",sameElse:"L"},relativeTime:{future:"dadkh s yan %s",past:"yan %s",s:"imik",m:"minuḍ",mm:"%d minuḍ",h:"saɛa",hh:"%d tassaɛin",d:"ass",dd:"%d ossan",M:"ayowr",MM:"%d iyyirn",y:"asgas",yy:"%d isgasn"},week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){e.defineLocale("tzm",{months:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),monthsShort:"ⵉⵏⵏⴰⵢⵔ_ⴱⵕⴰⵢⵕ_ⵎⴰⵕⵚ_ⵉⴱⵔⵉⵔ_ⵎⴰⵢⵢⵓ_ⵢⵓⵏⵢⵓ_ⵢⵓⵍⵢⵓⵣ_ⵖⵓⵛⵜ_ⵛⵓⵜⴰⵏⴱⵉⵔ_ⴽⵟⵓⴱⵕ_ⵏⵓⵡⴰⵏⴱⵉⵔ_ⴷⵓⵊⵏⴱⵉⵔ".split("_"),weekdays:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysShort:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),weekdaysMin:"ⴰⵙⴰⵎⴰⵙ_ⴰⵢⵏⴰⵙ_ⴰⵙⵉⵏⴰⵙ_ⴰⴽⵔⴰⵙ_ⴰⴽⵡⴰⵙ_ⴰⵙⵉⵎⵡⴰⵙ_ⴰⵙⵉⴹⵢⴰⵙ".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"dddd D MMMM YYYY LT"},calendar:{sameDay:"[ⴰⵙⴷⵅ ⴴ] LT",nextDay:"[ⴰⵙⴽⴰ ⴴ] LT",nextWeek:"dddd [ⴴ] LT",lastDay:"[ⴰⵚⴰⵏⵜ ⴴ] LT",lastWeek:"dddd [ⴴ] LT",sameElse:"L"},relativeTime:{future:"ⴷⴰⴷⵅ ⵙ ⵢⴰⵏ %s",past:"ⵢⴰⵏ %s",s:"ⵉⵎⵉⴽ",m:"ⵎⵉⵏⵓⴺ",mm:"%d ⵎⵉⵏⵓⴺ",h:"ⵙⴰⵄⴰ",hh:"%d ⵜⴰⵙⵙⴰⵄⵉⵏ",d:"ⴰⵙⵙ",dd:"%d oⵙⵙⴰⵏ",M:"ⴰⵢoⵓⵔ",MM:"%d ⵉⵢⵢⵉⵔⵏ",y:"ⴰⵙⴳⴰⵙ",yy:"%d ⵉⵙⴳⴰⵙⵏ"},week:{dow:6,doy:12}})}(ye)}(),function(e){!function(e){function t(e,t){var n=e.split("_");return t%10==1&&t%100!=11?n[0]:t%10>=2&&t%10<=4&&(t%100<10||t%100>=20)?n[1]:n[2]}function n(e,n,r){var i={mm:"хвилина_хвилини_хвилин",hh:"година_години_годин",dd:"день_дні_днів",MM:"місяць_місяці_місяців",yy:"рік_роки_років"};return"m"===r?n?"хвилина":"хвилину":"h"===r?n?"година":"годину":e+" "+t(i[r],+e)}function r(e,t){return{nominative:"січень_лютий_березень_квітень_травень_червень_липень_серпень_вересень_жовтень_листопад_грудень".split("_"),accusative:"січня_лютого_березня_квітня_травня_червня_липня_серпня_вересня_жовтня_листопада_грудня".split("_")}[/D[oD]? *MMMM?/.test(t)?"accusative":"nominative"][e.month()]}function i(e,t){return{nominative:"неділя_понеділок_вівторок_середа_четвер_п’ятниця_субота".split("_"),accusative:"неділю_понеділок_вівторок_середу_четвер_п’ятницю_суботу".split("_"),genitive:"неділі_понеділка_вівторка_середи_четверга_п’ятниці_суботи".split("_")}[/(\[[ВвУу]\]) ?dddd/.test(t)?"accusative":/\[?(?:минулої|наступної)? ?\] ?dddd/.test(t)?"genitive":"nominative"][e.day()]}function o(e){return function(){return e+"о"+(11===this.hours()?"б":"")+"] LT"}}e.defineLocale("uk",{months:r,monthsShort:"січ_лют_бер_квіт_трав_черв_лип_серп_вер_жовт_лист_груд".split("_"),weekdays:i,weekdaysShort:"нд_пн_вт_ср_чт_пт_сб".split("_"),weekdaysMin:"нд_пн_вт_ср_чт_пт_сб".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD.MM.YYYY",LL:"D MMMM YYYY р.",LLL:"D MMMM YYYY р., LT",LLLL:"dddd, D MMMM YYYY р., LT"},calendar:{sameDay:o("[Сьогодні "),nextDay:o("[Завтра "),lastDay:o("[Вчора "),nextWeek:o("[У] dddd ["),lastWeek:function(){switch(this.day()){case 0:case 3:case 5:case 6:return o("[Минулої] dddd [").call(this);case 1:case 2:case 4:return o("[Минулого] dddd [").call(this)}},sameElse:"L"},relativeTime:{future:"за %s",past:"%s тому",s:"декілька секунд",m:n,mm:n,h:"годину",hh:n,d:"день",dd:n,M:"місяць",MM:n,y:"рік",yy:n},meridiemParse:/ночі|ранку|дня|вечора/,isPM:function(e){return/^(дня|вечора)$/.test(e)},meridiem:function(e,t,n){return e<4?"ночі":e<12?"ранку":e<17?"дня":"вечора"},ordinalParse:/\d{1,2}-(й|го)/,ordinal:function(e,t){switch(t){case"M":case"d":case"DDD":case"w":case"W":return e+"-й";case"D":return e+"-го";default:return e}},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("uz",{months:"январь_февраль_март_апрель_май_июнь_июль_август_сентябрь_октябрь_ноябрь_декабрь".split("_"),monthsShort:"янв_фев_мар_апр_май_июн_июл_авг_сен_окт_ноя_дек".split("_"),weekdays:"Якшанба_Душанба_Сешанба_Чоршанба_Пайшанба_Жума_Шанба".split("_"),weekdaysShort:"Якш_Душ_Сеш_Чор_Пай_Жум_Шан".split("_"),weekdaysMin:"Як_Ду_Се_Чо_Па_Жу_Ша".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM YYYY",LLL:"D MMMM YYYY LT",LLLL:"D MMMM YYYY, dddd LT"},calendar:{sameDay:"[Бугун соат] LT [да]",nextDay:"[Эртага] LT [да]",nextWeek:"dddd [куни соат] LT [да]",lastDay:"[Кеча соат] LT [да]",lastWeek:"[Утган] dddd [куни соат] LT [да]",sameElse:"L"},relativeTime:{future:"Якин %s ичида",past:"Бир неча %s олдин",s:"фурсат",m:"бир дакика",mm:"%d дакика",h:"бир соат",hh:"%d соат",d:"бир кун",dd:"%d кун",M:"бир ой",MM:"%d ой",y:"бир йил",yy:"%d йил"},week:{dow:1,doy:7}})}(ye)}(),function(e){!function(e){e.defineLocale("vi",{months:"tháng 1_tháng 2_tháng 3_tháng 4_tháng 5_tháng 6_tháng 7_tháng 8_tháng 9_tháng 10_tháng 11_tháng 12".split("_"),monthsShort:"Th01_Th02_Th03_Th04_Th05_Th06_Th07_Th08_Th09_Th10_Th11_Th12".split("_"),weekdays:"chủ nhật_thứ hai_thứ ba_thứ tư_thứ năm_thứ sáu_thứ bảy".split("_"),weekdaysShort:"CN_T2_T3_T4_T5_T6_T7".split("_"),weekdaysMin:"CN_T2_T3_T4_T5_T6_T7".split("_"),longDateFormat:{LT:"HH:mm",LTS:"LT:ss",L:"DD/MM/YYYY",LL:"D MMMM [năm] YYYY",LLL:"D MMMM [năm] YYYY LT",LLLL:"dddd, D MMMM [năm] YYYY LT",l:"DD/M/YYYY",ll:"D MMM YYYY",lll:"D MMM YYYY LT",llll:"ddd, D MMM YYYY LT"},calendar:{sameDay:"[Hôm nay lúc] LT",nextDay:"[Ngày mai lúc] LT",nextWeek:"dddd [tuần tới lúc] LT",lastDay:"[Hôm qua lúc] LT",lastWeek:"dddd [tuần rồi lúc] LT",sameElse:"L"},relativeTime:{future:"%s tới",past:"%s trước",s:"vài giây",m:"một phút",mm:"%d phút",h:"một giờ",hh:"%d giờ",d:"một ngày",dd:"%d ngày",M:"một tháng",MM:"%d tháng",y:"một năm",yy:"%d năm"},ordinalParse:/\d{1,2}/,ordinal:function(e){return e},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("zh-cn",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"周日_周一_周二_周三_周四_周五_周六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah点mm",LTS:"Ah点m分s秒",L:"YYYY-MM-DD",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY-MM-DD",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/凌晨|早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"凌晨"===t||"早上"===t||"上午"===t?e:"下午"===t||"晚上"===t?e+12:e>=11?e:e+12},meridiem:function(e,t,n){var r=100*e+t;return r<600?"凌晨":r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:function(){return 0===this.minutes()?"[今天]Ah[点整]":"[今天]LT"},nextDay:function(){return 0===this.minutes()?"[明天]Ah[点整]":"[明天]LT"},lastDay:function(){return 0===this.minutes()?"[昨天]Ah[点整]":"[昨天]LT"},nextWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()-t.unix()>=604800?"[下]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},lastWeek:function(){var t,n;return t=e().startOf("week"),n=this.unix()<t.unix()?"[上]":"[本]",0===this.minutes()?n+"dddAh点整":n+"dddAh点mm"},sameElse:"LL"},ordinalParse:/\d{1,2}(日|月|周)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"周";default:return e}},relativeTime:{future:"%s内",past:"%s前",s:"几秒",m:"1分钟",mm:"%d分钟",h:"1小时",hh:"%d小时",d:"1天",dd:"%d天",M:"1个月",MM:"%d个月",y:"1年",yy:"%d年"},week:{dow:1,doy:4}})}(ye)}(),function(e){!function(e){e.defineLocale("zh-tw",{months:"一月_二月_三月_四月_五月_六月_七月_八月_九月_十月_十一月_十二月".split("_"),monthsShort:"1月_2月_3月_4月_5月_6月_7月_8月_9月_10月_11月_12月".split("_"),weekdays:"星期日_星期一_星期二_星期三_星期四_星期五_星期六".split("_"),weekdaysShort:"週日_週一_週二_週三_週四_週五_週六".split("_"),weekdaysMin:"日_一_二_三_四_五_六".split("_"),longDateFormat:{LT:"Ah點mm",LTS:"Ah點m分s秒",L:"YYYY年MMMD日",LL:"YYYY年MMMD日",LLL:"YYYY年MMMD日LT",LLLL:"YYYY年MMMD日ddddLT",l:"YYYY年MMMD日",ll:"YYYY年MMMD日",lll:"YYYY年MMMD日LT",llll:"YYYY年MMMD日ddddLT"},meridiemParse:/早上|上午|中午|下午|晚上/,meridiemHour:function(e,t){return 12===e&&(e=0),"早上"===t||"上午"===t?e:"中午"===t?e>=11?e:e+12:"下午"===t||"晚上"===t?e+12:void 0},meridiem:function(e,t,n){var r=100*e+t;return r<900?"早上":r<1130?"上午":r<1230?"中午":r<1800?"下午":"晚上"},calendar:{sameDay:"[今天]LT",nextDay:"[明天]LT",nextWeek:"[下]ddddLT",lastDay:"[昨天]LT",lastWeek:"[上]ddddLT",sameElse:"L"},ordinalParse:/\d{1,2}(日|月|週)/,ordinal:function(e,t){switch(t){case"d":case"D":case"DDD":return e+"日";case"M":return e+"月";case"w":case"W":return e+"週";default:return e}},relativeTime:{future:"%s內",past:"%s前",s:"幾秒",m:"一分鐘",mm:"%d分鐘",h:"一小時",hh:"%d小時",d:"一天",dd:"%d天",M:"一個月",MM:"%d個月",y:"一年",yy:"%d年"}})}(ye)}(),ye.locale("en"),Re?module.exports=ye:"function"==typeof define&&define.amd?(define(function(e,t,n){return n.config&&n.config()&&!0===n.config().noGlobal&&(we.moment=be),ye}),ve(!0)):ve()}.call(this),function(){"use strict";function e(e,t){return e.module("angularMoment",[]).constant("angularMomentConfig",{preprocess:null,timezone:"",format:null}).constant("moment",t).constant("amTimeAgoConfig",{withoutSuffix:!1,serverTime:null,titleFormat:null}).directive("amTimeAgo",["$window","moment","amMoment","amTimeAgoConfig","angularMomentConfig",function(t,n,r,i,o){return function(a,s,l){function u(){var e;if(i.serverTime){var t=(new Date).getTime()-x+i.serverTime;e=n(t)}else e=n();return e}function c(){m&&(t.clearTimeout(m),m=null)}function d(e){if(s.text(e.from(u(),y)),b&&!s.attr("title")&&s.attr("title",e.local().format(b)),!C){var n=Math.abs(u().diff(e,"minute")),r=3600;1>n?r=1:60>n?r=30:180>n&&(r=300),m=t.setTimeout(function(){d(e)},1e3*r)}}function f(e){k&&s.attr("datetime",e)}function p(){if(c(),h){var e=r.preprocessDate(h,w,v);d(e),f(e.toISOString())}}var h,g,m=null,v=o.format,y=i.withoutSuffix,b=i.titleFormat,x=(new Date).getTime(),w=o.preprocess,_=l.amTimeAgo.replace(/^::/,""),C=0===l.amTimeAgo.indexOf("::"),k="TIME"===s[0].nodeName.toUpperCase();g=a.$watch(_,function(e){return void 0===e||null===e||""===e?(c(),void(h&&(s.text(""),f(""),h=null))):(h=e,p(),void(void 0!==e&&C&&g()))}),e.isDefined(l.amWithoutSuffix)&&a.$watch(l.amWithoutSuffix,function(e){"boolean"==typeof e?(y=e,p()):y=i.withoutSuffix}),l.$observe("amFormat",function(e){void 0!==e&&(v=e,p())}),l.$observe("amPreprocess",function(e){w=e,p()}),a.$on("$destroy",function(){c()}),a.$on("amMoment:localeChanged",function(){p()})}}]).service("amMoment",["moment","$rootScope","$log","angularMomentConfig",function(t,n,r,i){var o=this;this.preprocessors={utc:t.utc,unix:t.unix},this.changeLocale=function(r){var i=(t.locale||t.lang)(r);return e.isDefined(r)&&(n.$broadcast("amMoment:localeChanged"),n.$broadcast("amMoment:languageChange")),i},this.changeLanguage=function(e){return r.warn("angular-moment: Usage of amMoment.changeLanguage() is deprecated. Please use changeLocale()"),o.changeLocale(e)},this.preprocessDate=function(n,o,a){return e.isUndefined(o)&&(o=i.preprocess),this.preprocessors[o]?this.preprocessors[o](n,a):(o&&r.warn("angular-moment: Ignoring unsupported value for preprocess: "+o),!isNaN(parseFloat(n))&&isFinite(n)?t(parseInt(n,10)):t(n,a))},this.applyTimezone=function(e){var t=i.timezone;return e&&t&&(e.tz?e=e.tz(t):r.warn("angular-moment: timezone specified but moment.tz() is undefined. Did you forget to include moment-timezone.js?")),e}}]).filter("amCalendar",["moment","amMoment",function(e,t){return function(n,r){if(void 0===n||null===n)return"";n=t.preprocessDate(n,r);var i=e(n);return i.isValid()?t.applyTimezone(i).calendar():""}}]).filter("amDateFormat",["moment","amMoment",function(e,t){return function(n,r,i){if(void 0===n||null===n)return"";n=t.preprocessDate(n,i);var o=e(n);return o.isValid()?t.applyTimezone(o).format(r):""}}]).filter("amDurationFormat",["moment",function(e){return function(t,n,r){return void 0===t||null===t?"":e.duration(t,n).humanize(r)}}])}"function"==typeof define&&define.amd?define("angular-moment",["angular","moment"],e):e(angular,window.moment)}(),function(e,t,n){"use strict";function r(){var e=!1;this.$get=["$$sanitizeUri",function(n){return e&&t.extend(C,w),function(e){var t=[];return a(e,u(t,function(e,t){return!/^unsafe:/.test(n(e,t))})),t.join("")}}],this.enableSvg=function(n){return t.isDefined(n)?(e=n,this):e}}function i(e){var n=[];return u(n,t.noop).chars(e),n.join("")}function o(e,n){var r,i={},o=e.split(",");for(r=0;r<o.length;r++)i[n?t.lowercase(o[r]):o[r]]=!0;return i}function a(e,t){null===e||e===n?e="":"string"!=typeof e&&(e=""+e),d.innerHTML=e;var r=5;do{if(0===r)throw f("uinput","Failed to sanitize html because the input is unstable");r--,document.documentMode<=11&&c(d),e=d.innerHTML,d.innerHTML=e}while(e!==d.innerHTML);for(var i=d.firstChild;i;){switch(i.nodeType){case 1:t.start(i.nodeName.toLowerCase(),s(i.attributes));break;case 3:t.chars(i.textContent)}var o;if(!((o=i.firstChild)||(1==i.nodeType&&t.end(i.nodeName.toLowerCase()),o=i.nextSibling)))for(;null==o&&(i=i.parentNode)!==d;)o=i.nextSibling,1==i.nodeType&&t.end(i.nodeName.toLowerCase());i=o}for(;i=d.firstChild;)d.removeChild(i)}function s(e){for(var t={},n=0,r=e.length;n<r;n++){var i=e[n];t[i.name]=i.value}return t}function l(e){return e.replace(/&/g,"&amp;").replace(p,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(h,function(e){return"&#"+e.charCodeAt(0)+";"}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,o){e=t.lowercase(e),!r&&_[e]&&(r=e),r||!0!==C[e]||(i("<"),i(e),t.forEach(o,function(r,o){var a=t.lowercase(o),s="img"===e&&"src"===a||"background"===a;!0!==M[a]||!0===k[a]&&!n(r,s)||(i(" "),i(o),i('="'),i(l(r)),i('"'))}),i(">"))},end:function(e){e=t.lowercase(e),r||!0!==C[e]||!0===g[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(l(e))}}}function c(e){if(e.nodeType===Node.ELEMENT_NODE)for(var t=e.attributes,n=0,r=t.length;n<r;n++){var i=t[n],o=i.name.toLowerCase();"xmlns:ns1"!==o&&0!==o.indexOf("ns1:")||(e.removeAttributeNode(i),n--,r--)}var a=e.firstChild;a&&c(a),(a=e.nextSibling)&&c(a)}var d,f=t.$$minErr("$sanitize"),p=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,h=/([^\#-~ |!])/g,g=o("area,br,col,hr,img,wbr"),m=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),v=o("rp,rt"),y=t.extend({},v,m),b=t.extend({},m,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,section,table,ul")),x=t.extend({},v,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),w=o("circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,stop,svg,switch,text,title,tspan"),_=o("script,style"),C=t.extend({},g,b,x,y),k=o("background,cite,href,longdesc,src,xlink:href"),S=o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,tabindex,target,title,type,valign,value,vspace,width"),$=o("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan",!0),M=t.extend({},k,$,S);!function(e){var t;if(!e.document||!e.document.implementation)throw f("noinert","Can't create an inert html document");var n=((t=e.document.implementation.createHTMLDocument("inert")).documentElement||t.getDocumentElement()).getElementsByTagName("body");if(1===n.length)d=n[0];else{var r=t.createElement("html");d=t.createElement("body"),r.appendChild(d),t.appendChild(r)}}(e),t.module("ngSanitize",[]).provider("$sanitize",r),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"\u201d\u2019]/i,r=/^mailto:/i,o=t.$$minErr("linky"),a=t.isString;return function(s,l,u){function c(e){e&&g.push(i(e))}if(null==s||""===s)return s;if(!a(s))throw o("notstring","Expected string but received: {0}",s);for(var d,f,p,h=s,g=[];d=h.match(n);)f=d[0],d[2]||d[4]||(f=(d[3]?"http://":"mailto:")+f),p=d.index,c(h.substr(0,p)),function(e,n){var r;if(g.push("<a "),t.isFunction(u)&&(u=u(e)),t.isObject(u))for(r in u)g.push(r+'="'+u[r]+'" ');else u={};!t.isDefined(l)||"target"in u||g.push('target="',l,'" '),g.push('href="',e.replace(/"/g,"&quot;"),'">'),c(n),g.push("</a>")}(f,d[0].replace(r,"")),h=h.substring(p+d[0].length);return c(h),e(g.join(""))}}])}(window,window.angular),function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("angular")):"function"==typeof define&&define.amd?define(["exports","angular"],t):t(e["@uirouter/angularjs"]=e["@uirouter/angularjs"]||{},e.angular)}(this,function(e,t){"use strict";function n(e){function t(n){return n.length>=r?e.apply(null,n):function(){return t(n.concat([].slice.apply(arguments)))}}var n=[].slice.apply(arguments,[1]),r=e.length;return t(n)}function r(){var e=arguments,t=e.length-1;return function(){for(var n=t,r=e[t].apply(this,arguments);n--;)r=e[n].call(this,r);return r}}function i(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return r.apply(null,[].slice.call(arguments).reverse())}function o(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(null,n)&&t.apply(null,n)}}function a(e,t){return function(){for(var n=[],r=0;r<arguments.length;r++)n[r]=arguments[r];return e.apply(null,n)||t.apply(null,n)}}function s(e,t){return function(n){return n[e].apply(n,t)}}function l(e){return function(t){for(var n=0;n<e.length;n++)if(e[n][0](t))return e[n][1](t)}}function u(e){if(et(e)&&e.length){var t=e.slice(0,-1),n=e.slice(-1);return!(t.filter(Oe(Ze)).length||n.filter(Oe(Xe)).length)}return Xe(e)}function c(e){return e}function d(){}function f(e,t,n,r,i){void 0===i&&(i=!1);var o=function(t){return e()[t].bind(n())},a=function(e){return function(){return t[e]=o(e),t[e].apply(null,arguments)}};return(r=r||Object.keys(e())).reduce(function(e,t){return e[t]=i?a(t):o(t),e},t)}function p(e,t){return-1!==e.indexOf(t)}function h(e,t){var n=e.indexOf(t);return n>=0&&e.splice(n,1),e}function g(e,t){return e.push(t),t}function m(e){for(var t=[],n=1;n<arguments.length;n++)t[n-1]=arguments[n];var r=t.concat({}).reverse(),i=ft.apply(null,r);return ft({},i,y(e||{},Object.keys(i)))}function v(e,t){var n=[];for(var r in e.path){if(e.path[r]!==t.path[r])break;n.push(e.path[r])}return n}function y(e,t){var n={};for(var r in e)-1!==t.indexOf(r)&&(n[r]=e[r]);return n}function b(e,t){return Object.keys(e).filter(Oe(gt(t))).reduce(function(t,n){return t[n]=e[n],t},{})}function x(e,t){return C(e,Re(t))}function w(e,t){var n=et(e),r=n?[]:{},i=n?function(e){return r.push(e)}:function(e,t){return r[t]=e};return dt(e,function(e,n){t(e,n)&&i(e,n)}),r}function _(e,t){var n;return dt(e,function(e,r){n||t(e,r)&&(n=e)}),n}function C(e,t){var n=et(e)?[]:{};return dt(e,function(e,r){return n[r]=t(e,r)}),n}function k(e,t){return e.push(t),e}function S(e,t){return void 0===t&&(t="assert failure"),function(n){var r=e(n);if(!r)throw new Error(Xe(t)?t(n):t);return r}}function $(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];if(0===e.length)return[];var n,r=e.reduce(function(e,t){return Math.min(t.length,e)},9007199254740991),i=[];for(n=0;n<r;n++)switch(e.length){case 1:i.push([e[0][n]]);break;case 2:i.push([e[0][n],e[1][n]]);break;case 3:i.push([e[0][n],e[1][n],e[2][n]]);break;case 4:i.push([e[0][n],e[1][n],e[2][n],e[3][n]]);break;default:i.push(e.map(function(e){return e[n]}))}return i}function M(e,t){var n,r;if(et(t)&&(n=t[0],r=t[1]),!Ze(n))throw new Error("invalid parameters to applyPairs");return e[n]=r,e}function T(e){return e.length&&e[e.length-1]||void 0}function D(e,t){return t&&Object.keys(t).forEach(function(e){return delete t[e]}),t||(t={}),ft(t,e)}function E(e,t,n){if(et(e))return e.forEach(t,n);Object.keys(e).forEach(function(n){return t(e[n],n)})}function L(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];if(n)for(var r=Object.keys(n),i=0;i<r.length;i++)e[r[i]]=n[r[i]]}return e}function A(e,t){if(e===t)return!0;if(null===e||null===t)return!1;if(e!==e&&t!==t)return!0;var n=typeof e;if(n!==typeof t||"object"!==n)return!1;var r=[e,t];if(Ne(et)(r))return R(e,t);if(Ne(tt)(r))return e.getTime()===t.getTime();if(Ne(nt)(r))return e.toString()===t.toString();if(Ne(Xe)(r))return!0;if([Xe,et,tt,nt].map(Ie).reduce(function(e,t){return e||!!t(r)},!1))return!1;var i,o={};for(i in e){if(!A(e[i],t[i]))return!1;o[i]=!0}for(i in t)if(!o[i])return!1;return!0}function R(e,t){return e.length===t.length&&$(e,t).reduce(function(e,t){return e&&A(t[0],t[1])},!0)}function P(e){return e?"[ui-view#"+e.id+" tag in template from '"+(e.creationContext&&e.creationContext.name||"(root)")+"' state]: fqn: '"+e.fqn+"', name: '"+e.name+"@"+e.creationContext+"')":"ui-view (defunct)"}function F(t){return Je(t)?e.Category[t]:e.Category[e.Category[t]]}function O(e,t){function n(e){for(var t=r,n=0;n<t.length;n++){var i=new He(t[n]);if(i&&i.matches(e.name)||!i&&t[n]===e.name)return!0}return!1}var r=Ze(t)?[t]:t;return!!(Xe(r)?r:n)(e)}function N(e,t,n){function r(e,r,o){void 0===o&&(o={});var a=new qt(t,n,r,e,o);return i.push(a),function(){a._deregistered=!0,mt(i)(a)}}var i=(e._registeredHooks=e._registeredHooks||{})[n.name]=[];return e[n.name]=r,r}function I(e){return void 0===e&&(e=!1),function(t,n){var r=e?-1:1,i=(t.node.state.path.length-n.node.state.path.length)*r;return 0!==i?i:n.hook.priority-t.hook.priority}}function j(e,t){function n(e){return et(e)?e:Ge(e)?[e]:[]}function r(e){switch(e.length){case 0:return;case 1:return"auto"===t?e[0]:e;default:return e}}function i(e,t){return function(i){if(et(i)&&0===i.length)return i;var o=C(n(i),e);return!0===t?0===w(o,function(e){return!e}).length:r(o)}}function o(e){return function(t,r){var i=n(t),o=n(r);if(i.length!==o.length)return!1;for(var a=0;a<i.length;a++)if(!e(i[a],o[a]))return!1;return!0}}var a=this;["encode","decode","equals","$normalize"].forEach(function(t){var n=e[t].bind(e),r="equals"===t?o:i;a[t]=r(n)}),ft(this,{dynamic:e.dynamic,name:e.name,pattern:e.pattern,inherit:e.inherit,is:i(e.is.bind(e),!0),$arrayMode:t})}function Y(e){function t(){return e.value}return e=Zt(e)&&{value:e}||e,t.__cacheable=!0,ft(e,{$$fn:u(e.value)?e.value:t})}function z(t,n,r,i,o){if(t.type&&n&&"string"!==n.name)throw new Error("Param '"+i+"' has two type configurations.");if(t.type&&n&&"string"===n.name&&o.type(t.type))return o.type(t.type);if(n)return n;if(!t.type){var a=r===e.DefType.CONFIG?"any":r===e.DefType.PATH?"path":r===e.DefType.SEARCH?"query":"string";return o.type(a)}return t.type instanceof Xt?t.type:o.type(t.type)}function H(e,t,n){var r=e.squash;if(!t||!1===r)return!1;if(!Ge(r)||null==r)return n;if(!0===r||Ze(r))return r;throw new Error("Invalid squash policy: '"+r+"'. Valid policies: false, true, or arbitrary string")}function V(e,t,n,r){var i,o,a=[{from:"",to:n||t?void 0:""},{from:null,to:n||t?void 0:""}];return i=et(e.replace)?e.replace:[],Ze(r)&&i.push({from:r,to:void 0}),o=C(i,Re("from")),w(a,function(e){return-1===o.indexOf(e.from)}).concat(i)}function B(e,t){return t.length<=e?t:t.substr(0,e-3)+"..."}function W(e,t){for(;t.length<e;)t+=" ";return t}function U(e){return e.replace(/^([A-Z])/,function(e){return e.toLowerCase()}).replace(/([A-Z])/g,function(e){return"-"+e.toLowerCase()})}function G(e){var t=q(e),n=t.match(/^(function [^ ]+\([^)]*\))/),r=n?n[1]:t,i=e.name||"";return i&&r.match(/function \(/)?"function "+i+r.substr(9):r}function q(e){var t=et(e)?e.slice(-1)[0]:e;return t&&t.toString()||"undefined"}function K(e){function t(e){if(Qe(e)){if(-1!==n.indexOf(e))return"[circular ref]";n.push(e)}return gn(e)}var n=[];return JSON.stringify(e,function(e,n){return t(n)}).replace(/\\"/g,'"')}function X(e){var t=new RegExp("("+e+")","g");return function(e){return e.split(t).filter(c)}}function J(e,t){return Ze(T(e))&&Ze(t)?e.slice(0,-1).concat(T(e)+t):k(e,t)}function Z(e){return e.name}function Q(e){return e.self.$$state=function(){return e},e.self}function ee(e){return e.parent&&e.parent.data&&(e.data=e.self.data=ht(e.parent.data,e.data)),e.data}function te(e){return e.parent?e.parent.path.concat(e):[e]}function ne(e){var t=e.parent?ft({},e.parent.includes):{};return t[e.name]=!0,t}function re(e){var t=function(e){var t=at.$injector;return e.$inject||t&&t.annotate(e,t.strictDi)||"deferred"},n=function(e){return!(!e.token||!e.resolveFn)},r=function(e){return!(!e.provide&&!e.token||!(e.useValue||e.useFactory||e.useExisting||e.useClass))},o=function(e){return!!(e&&e.val&&(Ze(e.val)||et(e.val)||Xe(e.val)))},a=function(e){return e.provide||e.token},s=l([[Re("resolveFn"),function(e){return new rn(a(e),e.resolveFn,e.deps,e.policy)}],[Re("useFactory"),function(e){return new rn(a(e),e.useFactory,e.deps||e.dependencies,e.policy)}],[Re("useClass"),function(e){return new rn(a(e),function(){return new e.useClass},[],e.policy)}],[Re("useValue"),function(e){return new rn(a(e),function(){return e.useValue},[],e.policy,e.useValue)}],[Re("useExisting"),function(e){return new rn(a(e),c,[e.useExisting],e.policy)}]]),u=l([[i(Re("val"),Ze),function(e){return new rn(e.token,c,[e.val],e.policy)}],[i(Re("val"),et),function(e){return new rn(e.token,T(e.val),e.val.slice(0,-1),e.policy)}],[i(Re("val"),Xe),function(e){return new rn(e.token,e.val,t(e.val),e.policy)}]]),d=l([[je(rn),function(e){return e}],[n,s],[r,s],[o,u],[ze(!0),function(e){throw new Error("Invalid resolve value: "+K(e))}]]),f=e.resolve;return(et(f)?f:function(e,t){return Object.keys(e||{}).map(function(n){return{token:n,val:e[n],deps:void 0,policy:t[n]}})}(f,e.resolvePolicy||{})).map(d)}function ie(e,t){var n=["",""],r=e.replace(/[\\\[\]\^$*+?.()|{}]/g,"\\$&");if(!t)return r;switch(t.squash){case!1:n=["(",")"+(t.isOptional?"?":"")];break;case!0:r=r.replace(/\/$/,""),n=["(?:/(",")|/)?"];break;default:n=["("+t.squash+"|",")?"]}return r+n[0]+t.type.pattern.source+n[1]}function oe(e,t,n,r){return"/"===r?e:t?r.slice(0,-1)+e:n?r.slice(1)+e:e}function ae(e){if(!(Xe(e)||Ze(e)||je(Wt)(e)||Wt.isDef(e)))throw new Error("'handler' must be a string, function, TargetState, or have a state: 'newtarget' property");return Xe(e)?e:ze(e)}function se(e){e.addResolvable({token:Un,deps:[],resolveFn:function(){return e.router},data:e.router},""),e.addResolvable({token:pn,deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$transition$",deps:[],resolveFn:function(){return e},data:e},""),e.addResolvable({token:"$stateParams",deps:[],resolveFn:function(){return e.params()},data:e.params()},""),e.entering().forEach(function(t){e.addResolvable({token:"$state$",deps:[],resolveFn:function(){return t},data:t},t)})}function le(e){return function(t,n){return(0,n.$$state()[e])(t,n)}}function ue(e,t){function n(t){return t&&Array.isArray(t.states)&&t.states.forEach(function(t){return e.router.stateRegistry.register(t)}),t}var r=t.$$state().lazyLoad,i=r._promise;if(!i){var o=function(e){return delete t.lazyLoad,delete t.$$state().lazyLoad,delete r._promise,e},a=function(e){return delete r._promise,at.$q.reject(e)};i=r._promise=at.$q.when(r(e,t)).then(n).then(o,a)}return i}function ce(e){var t=e._ignoredReason();if(t){Bt.traceTransitionIgnored(e);var n=e.router.globals.transition;return"SameAsCurrent"===t&&n&&n.abort(),It.ignored().toPromise()}}function de(e){if(!e.valid())throw new Error(e.error())}function fe(e){var t=function(e){return e||""},n=$r(e).map(t),r=n[0],i=n[1],o=Mr(r).map(t);return{path:o[0],search:o[1],hash:i,url:e}}function pe(e,t,n,r){return function(i){function o(e){e.dispose(a),e.dispose(s)}var a=i.locationService=new n(i),s=i.locationConfig=new r(i,t);return{name:e,service:a,configuration:s,dispose:o}}}function he(e){return at.$injector=kr,at.$q=_r,{name:"vanilla.services",$q:_r,$injector:kr,dispose:function(){return null}}}function ge(){var e=null;return function(t,n){return e=e||at.$injector.get("$templateFactory"),[new Jr(t,n,e)]}}function me(e){if(!e.parent)return{};var t=["controller","controllerProvider","controllerAs","resolveAs"],n=["component","bindings","componentProvider"],r=["templateProvider","templateUrl","template","notify","async"].concat(t),i=n.concat(r);if(Ge(e.views)&&Kr(i,e))throw new Error("State '"+e.name+"' has a 'views' object. It cannot also have \"view properties\" at the state level.  Move the following properties into a view (in the 'views' object):  "+i.filter(function(t){return Ge(e[t])}).join(", "));var o={},a=e.views||{$default:y(e,i)};return dt(a,function(t,i){if(i=i||"$default",Ze(t)&&(t={component:t}),t=ft({},t),Kr(n,t)&&Kr(r,t))throw new Error("Cannot combine: "+n.join("|")+" with: "+r.join("|")+" in stateview: '"+i+"@"+e.name+"'");t.resolveAs=t.resolveAs||"$resolve",t.$type="ng1",t.$context=e,t.$name=i;var a=On.normalizeUIViewTarget(t.$context,t.$name);t.$uiViewName=a.uiViewName,t.$uiViewContextAnchor=a.uiViewContextAnchor,o[i]=t}),o}function ve(e){var t=at.$injector.get(e+"Directive");if(!t||!t.length)throw new Error("Unable to find component named '"+e+"'");return t.map(Qr).reduce(kt,[])}function ye(e){function t(e,t,r,i,o,a){return n._runtimeServices(i,e,r,t),delete ci.router,delete ci.$get,ci}(ci=this.router=new Un).stateProvider=new ti(ci.stateRegistry,ci.stateService),ci.stateRegistry.decorator("views",me),ci.stateRegistry.decorator("onExit",ni("onExit")),ci.stateRegistry.decorator("onRetain",ni("onRetain")),ci.stateRegistry.decorator("onEnter",ni("onEnter")),ci.viewService._pluginapi._viewConfigFactory("ng1",ge());var n=ci.locationService=ci.locationConfig=new ri(e);return ri.monkeyPatchPathParameterType(ci),ci.router=ci,ci.$get=t,t.$inject=["$location","$browser","$sniffer","$rootScope","$http","$templateCache"],ci}function be(e,t,n){at.$injector=e,at.$q=t,n.stateRegistry.get().map(function(e){return e.$$state().resolvables}).reduce(kt,[]).filter(function(e){return"deferred"===e.deps}).forEach(function(t){return t.deps=e.annotate(t.resolveFn)})}function xe(e){e.$watch(function(){Bt.approximateDigests++})}function we(e){var t,n=e.match(/^\s*({[^}]*})\s*$/);if(n&&(e="("+n[1]+")"),!(t=e.replace(/\n/g," ").match(/^\s*([^(]*?)\s*(\((.*)\))?\s*$/))||4!==t.length)throw new Error("Invalid state ref '"+e+"'");return{state:t[1]||null,paramExpr:t[3]||null}}function _e(e){var t=e.parent().inheritedData("$uiView"),n=Fe("$cfg.path")(t);return n?T(n).state.name:void 0}function Ce(e,t,n){var r=n.uiState||e.current.name,i=ft($e(t,e),n.uiStateOpts||{}),o=e.href(r,n.uiStateParams,i);return{uiState:r,uiStateParams:n.uiStateParams,uiStateOpts:i,href:o}}function ke(e){var t="[object SVGAnimatedString]"===Object.prototype.toString.call(e.prop("href")),n="FORM"===e[0].nodeName;return{attr:n?"action":t?"xlink:href":"href",isAnchor:"A"===e.prop("tagName").toUpperCase(),clickable:!n}}function Se(e,t,n,r,i){return function(o){var a=o.which||o.button,s=i();if(!(a>1||o.ctrlKey||o.metaKey||o.shiftKey||e.attr("target"))){var l=n(function(){t.go(s.uiState,s.uiStateParams,s.uiStateOpts)});o.preventDefault();var u=r.isAnchor&&!s.href?1:0;o.preventDefault=function(){u--<=0&&n.cancel(l)}}}}function $e(e,t){return{relative:_e(e)||t.$current,inherit:!0,source:"sref"}}function Me(e,t,n,r){var i;r&&(i=r.events),et(i)||(i=["click"]);for(var o=e.on?"on":"bind",a=0,s=i;a<s.length;a++){var l=s[a];e[o](l,n)}t.$on("$destroy",function(){for(var t=e.off?"off":"unbind",r=0,o=i;r<o.length;r++){var a=o[r];e[t](a,n)}})}function Te(e){var t=function(t,n,r){return e.is(t,n,r)};return t.$stateful=!0,t}function De(e){var t=function(t,n,r){return e.includes(t,n,r)};return t.$stateful=!0,t}function Ee(e,n,r,i,o,a){var s=Fe("viewDecl.controllerAs"),l=Fe("viewDecl.resolveAs");return{restrict:"ECA",priority:-400,compile:function(i){var a=i.html();return i.empty(),function(i,u){var c=u.data("$uiView");if(!c)return u.html(a),void e(u.contents())(i);var d=c.$cfg||{viewDecl:{},getTemplate:t.noop},f=d.path&&new cn(d.path);u.html(d.getTemplate(u,f)||a),Bt.traceUIViewFill(c.$uiView,u.html());var p=e(u.contents()),h=d.controller,g=s(d),m=l(d),v=f&&gi(f);if(i[m]=v,h){var y=n(h,ft({},v,{$scope:i,$element:u}));g&&(i[g]=y,i[g][m]=v),u.data("$ngControllerController",y),u.children().data("$ngControllerController",y),Le(o,r,y,i,d)}if(Ze(d.viewDecl.component))var b=d.viewDecl.component,x=U(b),w=new RegExp("^(x-|data-)?"+x+"$","i"),_=function(){var e=[].slice.call(u[0].children).filter(function(e){return e&&e.tagName&&w.exec(e.tagName)});return e&&qr.element(e).data("$"+b+"Controller")},C=i.$watch(_,function(e){e&&(Le(o,r,e,i,d),C())});p(i)}}}}function Le(e,t,n,r,i){!Xe(n.$onInit)||i.viewDecl.component&&bi||n.$onInit();var o=T(i.path).state.self,a={bind:n};if(Xe(n.uiOnParamsChanged)){var s=new cn(i.path).getResolvable("$transition$").data,l=function(e){if(e!==s&&-1===e.exiting().indexOf(o)){var t=e.params("to"),r=e.params("from"),i=e.treeChanges().to.map(function(e){return e.paramSchema}).reduce(kt,[]),a=e.treeChanges().from.map(function(e){return e.paramSchema}).reduce(kt,[]),l=i.filter(function(e){var n=a.indexOf(e);return-1===n||!a[n].type.equals(t[e.id],r[e.id])});if(l.length){var u=l.map(function(e){return e.id}),c=w(t,function(e,t){return-1!==u.indexOf(t)});n.uiOnParamsChanged(c,e)}}};r.$on("$destroy",t.onSuccess({},l,a))}if(Xe(n.uiCanExit)){var u=xi++,c=function(e){return!!e&&(e._uiCanExitIds&&!0===e._uiCanExitIds[u]||c(e.redirectedFrom()))},d=function(t){var r,i=t._uiCanExitIds=t._uiCanExitIds||{};return c(t)||(r=e.when(n.uiCanExit(t))).then(function(e){return i[u]=!1!==e}),r},f={exiting:o.name};r.$on("$destroy",t.onBefore(f,d,a))}}function Ae(){var e=!1;this.useAnchorScroll=function(){e=!0},this.$get=["$anchorScroll","$timeout",function(t,n){return e?t:function(e){return n(function(){e[0].scrollIntoView()},0,!1)}}]}var Re=function(e){return function(t){return t&&t[e]}},Pe=n(function(e,t,n){return n&&n[e]===t}),Fe=function(e){return i.apply(null,e.split(".").map(Re))},Oe=function(e){return function(){for(var t=[],n=0;n<arguments.length;n++)t[n]=arguments[n];return!e.apply(null,t)}},Ne=function(e){return function(t){return t.reduce(function(t,n){return t&&!!e(n)},!0)}},Ie=function(e){return function(t){return t.reduce(function(t,n){return t||!!e(n)},!1)}},je=function(e){return function(t){return null!=t&&t.constructor===e||t instanceof e}},Ye=function(e){return function(t){return e===t}},ze=function(e){return function(){return e}},He=function(){function e(e){this.text=e,this.glob=e.split(".");var t=this.text.split(".").map(function(e){return"**"===e?"(?:|(?:\\.[^.]*)*)":"*"===e?"\\.[^.]*":"\\."+e}).join("");this.regexp=new RegExp("^"+t+"$")}return e.prototype.matches=function(e){return this.regexp.test("."+e)},e.is=function(e){return!!/[!,*]+/.exec(e)},e.fromString=function(t){return e.is(t)?new e(t):null},e}(),Ve=function(){function e(t){return e.create(t||{})}return e.create=function(t){t=e.isStateClass(t)?new t:t;var n=ht(ht(t,e.prototype));return t.$$state=function(){return n},n.self=t,n.__stateObjectCache={nameGlob:He.fromString(n.name)},n},e.prototype.is=function(e){return this===e||this.self===e||this.fqn()===e},e.prototype.fqn=function(){if(!(this.parent&&this.parent instanceof this.constructor))return this.name;var e=this.parent.fqn();return e?e+"."+this.name:this.name},e.prototype.root=function(){return this.parent&&this.parent.root()||this},e.prototype.parameters=function(e){return((e=m(e,{inherit:!0,matchingKeys:null})).inherit&&this.parent&&this.parent.parameters()||[]).concat(wt(this.params)).filter(function(t){return!e.matchingKeys||e.matchingKeys.hasOwnProperty(t.id)})},e.prototype.parameter=function(e,t){return void 0===t&&(t={}),this.url&&this.url.parameter(e,t)||_(wt(this.params),Pe("id",e))||t.inherit&&this.parent&&this.parent.parameter(e)},e.prototype.toString=function(){return this.fqn()},e}();Ve.isStateClass=function(e){return Xe(e)&&!0===e.__uiRouterState},Ve.isState=function(e){return Qe(e.__stateObjectCache)};var Be=Object.prototype.toString,We=function(e){return function(t){return typeof t===e}},Ue=We("undefined"),Ge=Oe(Ue),qe=function(e){return null===e},Ke=a(qe,Ue),Xe=We("function"),Je=We("number"),Ze=We("string"),Qe=function(e){return null!==e&&"object"==typeof e},et=Array.isArray,tt=function(e){return"[object Date]"===Be.call(e)},nt=function(e){return"[object RegExp]"===Be.call(e)},rt=Ve.isState,it=o(Qe,i(Re("then"),Xe)),ot=function(e){return function(){throw new Error(e+"(): No coreservices implementation for UI-Router is loaded.")}},at={$q:void 0,$injector:void 0},st=("undefined"==typeof window?{}:window).angular||{},lt=st.fromJson||JSON.parse.bind(JSON),ut=st.toJson||JSON.stringify.bind(JSON),ct=st.copy||D,dt=st.forEach||E,ft=Object.assign||L,pt=st.equals||A,ht=function(e,t){return ft(Object.create(e),t)},gt=n(p),mt=n(h),vt=n(g),yt=function(e){return e.slice().forEach(function(t){"function"==typeof t&&t(),mt(e,t)})},bt=function(e,t){return ft(e,t)},xt=C,wt=function(e){return Object.keys(e).map(function(t){return e[t]})},_t=function(e,t){return e&&t},Ct=function(e,t){return e||t},kt=function(e,t){return e.concat(t)},St=function(e,t){return et(t)?e.concat(t.reduce(St,[])):k(e,t)},$t=function(e,t){return gt(e,t)?e:k(e,t)},Mt=function(e){return e.reduce(kt,[])},Tt=function(e){return e.reduce(St,[])},Dt=S,Et=S,Lt=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})},At=function(e,t){return void 0===t&&(t=ze(!0)),function(n,r){return t(n)&&t(r)?e(n)-e(r):0}},Rt=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];return function(t,n){return e.reduce(function(e,r){return e||r(t,n)},0)}},Pt=function(e){return e.catch(function(e){return 0})&&e},Ft=function(e){return Pt(at.$q.reject(e))},Ot=function(){function e(e,t){void 0===e&&(e=[]),void 0===t&&(t=null),this._items=e,this._limit=t}return e.prototype.enqueue=function(e){var t=this._items;return t.push(e),this._limit&&t.length>this._limit&&t.shift(),e},e.prototype.dequeue=function(){if(this.size())return this._items.splice(0,1)[0]},e.prototype.clear=function(){var e=this._items;return this._items=[],e},e.prototype.size=function(){return this._items.length},e.prototype.remove=function(e){var t=this._items.indexOf(e);return t>-1&&this._items.splice(t,1)[0]},e.prototype.peekTail=function(){return this._items[this._items.length-1]},e.prototype.peekHead=function(){if(this.size())return this._items[0]},e}();!function(e){e[e.SUPERSEDED=2]="SUPERSEDED",e[e.ABORTED=3]="ABORTED",e[e.INVALID=4]="INVALID",e[e.IGNORED=5]="IGNORED",e[e.ERROR=6]="ERROR"}(e.RejectType||(e.RejectType={}));var Nt=0,It=function(){function t(e,t,n){this.$id=Nt++,this.type=e,this.message=t,this.detail=n}return t.prototype.toString=function(){var e=function(e){return e&&e.toString!==Object.prototype.toString?e.toString():K(e)}(this.detail),t=this;return"Transition Rejection($id: "+t.$id+" type: "+t.type+", message: "+t.message+", detail: "+e+")"},t.prototype.toPromise=function(){return ft(Ft(this),{_transitionRejection:this})},t.isRejectionPromise=function(e){return e&&"function"==typeof e.then&&je(t)(e._transitionRejection)},t.superseded=function(n,r){var i=new t(e.RejectType.SUPERSEDED,"The transition has been superseded by a different transition",n);return r&&r.redirected&&(i.redirected=!0),i},t.redirected=function(e){return t.superseded(e,{redirected:!0})},t.invalid=function(n){return new t(e.RejectType.INVALID,"This transition is invalid",n)},t.ignored=function(n){return new t(e.RejectType.IGNORED,"The transition was ignored",n)},t.aborted=function(n){return new t(e.RejectType.ABORTED,"The transition has been aborted",n)},t.errored=function(n){return new t(e.RejectType.ERROR,"The transition errored",n)},t.normalize=function(e){return je(t)(e)?e:t.errored(e)},t}(),jt=function(e){return"[ViewConfig#"+e.$id+" from '"+(e.viewDecl.$context.name||"(root)")+"' state]: target ui-view: '"+e.viewDecl.$uiViewName+"@"+e.viewDecl.$uiViewContextAnchor+"'"};!function(e){e[e.RESOLVE=0]="RESOLVE",e[e.TRANSITION=1]="TRANSITION",e[e.HOOK=2]="HOOK",e[e.UIVIEW=3]="UIVIEW",e[e.VIEWCONFIG=4]="VIEWCONFIG"}(e.Category||(e.Category={}));var Yt=Fe("$id"),zt=Fe("router.$id"),Ht=function(e){return"Transition #"+Yt(e)+"-"+zt(e)},Vt=function(){function t(){this._enabled={},this.approximateDigests=0}return t.prototype._set=function(t,n){var r=this;n.length||(n=Object.keys(e.Category).map(function(e){return parseInt(e,10)}).filter(function(e){return!isNaN(e)}).map(function(t){return e.Category[t]})),n.map(F).forEach(function(e){return r._enabled[e]=t})},t.prototype.enable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._set(!0,e)},t.prototype.disable=function(){for(var e=[],t=0;t<arguments.length;t++)e[t]=arguments[t];this._set(!1,e)},t.prototype.enabled=function(e){return!!this._enabled[F(e)]},t.prototype.traceTransitionStart=function(t){this.enabled(e.Category.TRANSITION)&&console.log(Ht(t)+": Started  -> "+K(t))},t.prototype.traceTransitionIgnored=function(t){this.enabled(e.Category.TRANSITION)&&console.log(Ht(t)+": Ignored  <> "+K(t))},t.prototype.traceHookInvocation=function(t,n,r){if(this.enabled(e.Category.HOOK)){var i=Fe("traceData.hookType")(r)||"internal",o=Fe("traceData.context.state.name")(r)||Fe("traceData.context")(r)||"unknown",a=G(t.registeredHook.callback);console.log(Ht(n)+":   Hook -> "+i+" context: "+o+", "+B(200,a))}},t.prototype.traceHookResult=function(t,n,r){this.enabled(e.Category.HOOK)&&console.log(Ht(n)+":   <- Hook returned: "+B(200,K(t)))},t.prototype.traceResolvePath=function(t,n,r){this.enabled(e.Category.RESOLVE)&&console.log(Ht(r)+":         Resolving "+t+" ("+n+")")},t.prototype.traceResolvableResolved=function(t,n){this.enabled(e.Category.RESOLVE)&&console.log(Ht(n)+":               <- Resolved  "+t+" to: "+B(200,K(t.data)))},t.prototype.traceError=function(t,n){this.enabled(e.Category.TRANSITION)&&console.log(Ht(n)+": <- Rejected "+K(n)+", reason: "+t)},t.prototype.traceSuccess=function(t,n){this.enabled(e.Category.TRANSITION)&&console.log(Ht(n)+": <- Success  "+K(n)+", final state: "+t.name)},t.prototype.traceUIViewEvent=function(t,n,r){void 0===r&&(r=""),this.enabled(e.Category.UIVIEW)&&console.log("ui-view: "+W(30,t)+" "+P(n)+r)},t.prototype.traceUIViewConfigUpdated=function(t,n){this.enabled(e.Category.UIVIEW)&&this.traceUIViewEvent("Updating",t," with ViewConfig from context='"+n+"'")},t.prototype.traceUIViewFill=function(t,n){this.enabled(e.Category.UIVIEW)&&this.traceUIViewEvent("Fill",t," with: "+B(200,n))},t.prototype.traceViewServiceEvent=function(t,n){this.enabled(e.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+jt(n))},t.prototype.traceViewServiceUIViewEvent=function(t,n){this.enabled(e.Category.VIEWCONFIG)&&console.log("VIEWCONFIG: "+t+" "+P(n))},t}(),Bt=new Vt;!function(e){e[e.CREATE=0]="CREATE",e[e.BEFORE=1]="BEFORE",e[e.RUN=2]="RUN",e[e.SUCCESS=3]="SUCCESS",e[e.ERROR=4]="ERROR"}(e.TransitionHookPhase||(e.TransitionHookPhase={})),function(e){e[e.TRANSITION=0]="TRANSITION",e[e.STATE=1]="STATE"}(e.TransitionHookScope||(e.TransitionHookScope={}));var Wt=function(){function e(e,t,n,r){void 0===r&&(r={}),this._identifier=e,this._definition=t,this._options=r,this._params=n||{}}return e.prototype.name=function(){return this._definition&&this._definition.name||this._identifier},e.prototype.identifier=function(){return this._identifier},e.prototype.params=function(){return this._params},e.prototype.$state=function(){return this._definition},e.prototype.state=function(){return this._definition&&this._definition.self},e.prototype.options=function(){return this._options},e.prototype.exists=function(){return!(!this._definition||!this._definition.self)},e.prototype.valid=function(){return!this.error()},e.prototype.error=function(){var e=this.options().relative;if(!this._definition&&e){var t=e.name?e.name:e;return"Could not resolve '"+this.name()+"' from state '"+t+"'"}return this._definition?this._definition.self?void 0:"State '"+this.name()+"' has an invalid definition":"No such state '"+this.name()+"'"},e.prototype.toString=function(){return"'"+this.name()+"'"+ut(this.params())},e}();Wt.isDef=function(e){return e&&e.state&&(Ze(e.state)||Ze(e.state.name))};var Ut={current:d,transition:null,traceData:{},bind:null},Gt=function(){function t(t,n,r,i){var o=this;this.transition=t,this.stateContext=n,this.registeredHook=r,this.options=i,this.isSuperseded=function(){return o.type.hookPhase===e.TransitionHookPhase.RUN&&!o.options.transition.isActive()},this.options=m(i,Ut),this.type=r.eventType}return t.prototype.logError=function(e){this.transition.router.stateService.defaultErrorHandler()(e)},t.prototype.invokeHook=function(){var e=this,t=this.registeredHook;if(!t._deregistered){var n=this.getNotCurrentRejection();if(n)return n;var r=this.options;Bt.traceHookInvocation(this,this.transition,r);var i=function(e){return It.normalize(e).toPromise()},o=function(n){return t.eventType.getErrorHandler(e)(n)},a=function(n){return t.eventType.getResultHandler(e)(n)};try{var s=function(){return t.callback.call(r.bind,e.transition,e.stateContext)}();return!this.type.synchronous&&it(s)?s.catch(i).then(a,o):a(s)}catch(e){return o(It.normalize(e))}}},t.prototype.handleHookResult=function(e){var t=this;return this.getNotCurrentRejection()||(it(e)?e.then(function(e){return t.handleHookResult(e)}):(Bt.traceHookResult(e,this.transition,this.options),!1===e?It.aborted("Hook aborted transition").toPromise():je(Wt)(e)?It.redirected(e).toPromise():void 0))},t.prototype.getNotCurrentRejection=function(){var e=this.transition.router;return e._disposed?It.aborted("UIRouter instance #"+e.$id+" has been stopped (disposed)").toPromise():this.transition._aborted?It.aborted().toPromise():this.isSuperseded()?It.superseded(this.options.current()).toPromise():void 0},t.prototype.toString=function(){var e=this,t=e.options,n=e.registeredHook;return(Fe("traceData.hookType")(t)||"internal")+" context: "+(Fe("traceData.context.state.name")(t)||Fe("traceData.context")(t)||"unknown")+", "+B(200,q(n.callback))},t.chain=function(e,t){var n=function(e,t){return e.then(function(){return t.invokeHook()})};return e.reduce(n,t||at.$q.when())},t.invokeHooks=function(e,n){for(var r=0;r<e.length;r++){var i=e[r].invokeHook();if(it(i)){var o=e.slice(r+1);return t.chain(o,i).then(n)}}return n()},t.runAllHooks=function(e){e.forEach(function(e){return e.invokeHook()})},t}();Gt.HANDLE_RESULT=function(e){return function(t){return e.handleHookResult(t)}},Gt.LOG_REJECTED_RESULT=function(e){return function(t){it(t)&&t.catch(function(t){return e.logError(It.normalize(t))})}},Gt.LOG_ERROR=function(e){return function(t){return e.logError(t)}},Gt.REJECT_ERROR=function(e){return function(e){return Ft(e)}},Gt.THROW_ERROR=function(e){return function(e){throw e}};var qt=function(){function t(e,t,n,r,i){void 0===i&&(i={}),this.tranSvc=e,this.eventType=t,this.callback=n,this.matchCriteria=r,this.priority=i.priority||0,this.bind=i.bind||null,this._deregistered=!1}return t.prototype._matchingNodes=function(e,t){if(!0===t)return e;var n=e.filter(function(e){return O(e.state,t)});return n.length?n:null},t.prototype._getDefaultMatchCriteria=function(){return C(this.tranSvc._pluginapi._getPathTypes(),function(){return!0})},t.prototype._getMatchingNodes=function(t){var n=this,r=ft(this._getDefaultMatchCriteria(),this.matchCriteria);return wt(this.tranSvc._pluginapi._getPathTypes()).reduce(function(i,o){var a=o.scope===e.TransitionHookScope.STATE,s=t[o.name]||[],l=a?s:[T(s)];return i[o.name]=n._matchingNodes(l,r[o.name]),i},{})},t.prototype.matches=function(e){var t=this._getMatchingNodes(e);return wt(t).every(c)?t:null},t}(),Kt=function(){function t(e){this.transition=e}return t.prototype.buildHooksForPhase=function(e){var t=this;return this.transition.router.transitionService._pluginapi._getEvents(e).map(function(e){return t.buildHooks(e)}).reduce(kt,[]).filter(c)},t.prototype.buildHooks=function(t){var n=this.transition,r=n.treeChanges(),i=this.getMatchingHooks(t,r);if(!i)return[];var o={transition:n,current:n.options().current},a=function(i){return i.matches(r)[t.criteriaMatchPath.name].map(function(r){var a=ft({bind:i.bind,traceData:{hookType:t.name,context:r}},o),s=t.criteriaMatchPath.scope===e.TransitionHookScope.STATE?r.state.self:null,l=new Gt(n,s,i,a);return{hook:i,node:r,transitionHook:l}})};return i.map(a).reduce(kt,[]).sort(I(t.reverseSort)).map(function(e){return e.transitionHook})},t.prototype.getMatchingHooks=function(t,n){var r=t.hookPhase===e.TransitionHookPhase.CREATE,i=this.transition.router.transitionService;return(r?[i]:[this.transition,i]).map(function(e){return e.getHooks(t.name)}).filter(Dt(et,"broken event named: "+t.name)).reduce(kt,[]).filter(function(e){return e.matches(n)})},t}(),Xt=function(){function e(e){this.pattern=/.*/,this.inherit=!0,ft(this,e)}return e.prototype.is=function(e,t){return!0},e.prototype.encode=function(e,t){return e},e.prototype.decode=function(e,t){return e},e.prototype.equals=function(e,t){return e==t},e.prototype.$subPattern=function(){var e=this.pattern.toString();return e.substr(1,e.length-2)},e.prototype.toString=function(){return"{ParamType:"+this.name+"}"},e.prototype.$normalize=function(e){return this.is(e)?e:this.decode(e)},e.prototype.$asArray=function(e,t){if(!e)return this;if("auto"===e&&!t)throw new Error("'auto' array mode is for query parameters only");return new j(this,e)},e}(),Jt=Object.prototype.hasOwnProperty,Zt=function(e){return 0===["value","type","squash","array","dynamic"].filter(Jt.bind(e||{})).length};!function(e){e[e.PATH=0]="PATH",e[e.SEARCH=1]="SEARCH",e[e.CONFIG=2]="CONFIG"}(e.DefType||(e.DefType={}));var Qt=function(){function t(t,n,r,i,o){n=z(r=Y(r),n,i,t,o.paramTypes);var a=function(){var n={array:i===e.DefType.SEARCH&&"auto"},o=t.match(/\[\]$/)?{array:!0}:{};return ft(n,o,r).array}();n=a?n.$asArray(a,i===e.DefType.SEARCH):n;var s=void 0!==r.value||i===e.DefType.SEARCH,l=Ge(r.dynamic)?!!r.dynamic:!!n.dynamic,u=Ge(r.raw)?!!r.raw:!!n.raw,c=H(r,s,o.defaultSquashPolicy()),d=V(r,a,s,c),f=Ge(r.inherit)?!!r.inherit:!!n.inherit;ft(this,{id:t,type:n,location:i,isOptional:s,dynamic:l,raw:u,squash:c,replace:d,inherit:f,array:a,config:r})}return t.prototype.isDefaultValue=function(e){return this.isOptional&&this.type.equals(this.value(),e)},t.prototype.value=function(e){var t=this;return e=function(e){for(var n=0,r=t.replace;n<r.length;n++){var i=r[n];if(i.from===e)return i.to}return e}(e),Ue(e)?function(){if(t._defaultValueCache)return t._defaultValueCache.defaultValue;if(!at.$injector)throw new Error("Injectable functions cannot be called at configuration time");var e=at.$injector.invoke(t.config.$$fn);if(null!==e&&void 0!==e&&!t.type.is(e))throw new Error("Default value ("+e+") for parameter '"+t.id+"' is not an instance of ParamType ("+t.type.name+")");return t.config.$$fn.__cacheable&&(t._defaultValueCache={defaultValue:e}),e}():this.type.$normalize(e)},t.prototype.isSearch=function(){return this.location===e.DefType.SEARCH},t.prototype.validates=function(e){if((Ue(e)||null===e)&&this.isOptional)return!0;var t=this.type.$normalize(e);if(!this.type.is(t))return!1;var n=this.type.encode(t);return!(Ze(n)&&!this.type.pattern.exec(n))},t.prototype.toString=function(){return"{Param:"+this.id+" "+this.type+" squash: '"+this.squash+"' optional: "+this.isOptional+"}"},t.values=function(e,t){void 0===t&&(t={});for(var n={},r=0,i=e;r<i.length;r++){var o=i[r];n[o.id]=o.value(t[o.id])}return n},t.changed=function(e,t,n){return void 0===t&&(t={}),void 0===n&&(n={}),e.filter(function(e){return!e.type.equals(t[e.id],n[e.id])})},t.equals=function(e,n,r){return void 0===n&&(n={}),void 0===r&&(r={}),0===t.changed(e,n,r).length},t.validates=function(e,t){return void 0===t&&(t={}),e.map(function(e){return e.validates(t[e.id])}).reduce(_t,!0)},t}(),en=function(){function e(t){if(t instanceof e){var n=t;this.state=n.state,this.paramSchema=n.paramSchema.slice(),this.paramValues=ft({},n.paramValues),this.resolvables=n.resolvables.slice(),this.views=n.views&&n.views.slice()}else{var r=t;this.state=r,this.paramSchema=r.parameters({inherit:!1}),this.paramValues={},this.resolvables=r.resolvables.map(function(e){return e.clone()})}}return e.prototype.applyRawParams=function(e){var t=function(t){return[t.id,t.value(e[t.id])]};return this.paramValues=this.paramSchema.reduce(function(e,n){return M(e,t(n))},{}),this},e.prototype.parameter=function(e){return _(this.paramSchema,Pe("id",e))},e.prototype.equals=function(e,t){var n=this.diff(e,t);return n&&0===n.length},e.prototype.diff=function(e,t){if(this.state!==e.state)return!1;var n=t?t(this):this.paramSchema;return Qt.changed(n,this.paramValues,e.paramValues)},e.clone=function(t){return new e(t)},e}(),tn=function(){function e(){}return e.makeTargetState=function(e){var t=T(e).state;return new Wt(t,t,e.map(Re("paramValues")).reduce(bt,{}))},e.buildPath=function(e){var t=e.params();return e.$state().path.map(function(e){return new en(e).applyRawParams(t)})},e.buildToPath=function(t,n){var r=e.buildPath(n);return n.options().inherit?e.inheritParams(t,r,Object.keys(n.params())):r},e.applyViewConfigs=function(t,n,r){n.filter(function(e){return gt(r,e.state)}).forEach(function(r){var i=wt(r.state.views||{}),o=e.subPath(n,function(e){return e===r}),a=i.map(function(e){return t.createViewConfig(o,e)});r.views=a.reduce(kt,[])})},e.inheritParams=function(e,t,n){function r(e,t){var n=_(e,Pe("state",t));return ft({},n&&n.paramValues)}function i(t){var i=ft({},t&&t.paramValues),a=y(i,n);i=b(i,n);var s=b(r(e,t.state)||{},o),l=ft(i,s,a);return new en(t.state).applyRawParams(l)}void 0===n&&(n=[]);var o=e.map(function(e){return e.paramSchema}).reduce(kt,[]).filter(function(e){return!e.inherit}).map(Re("id"));return t.map(i)},e.treeChanges=function(t,n,r){function i(e,t){var r=en.clone(e);return r.paramValues=n[t].paramValues,r}for(var o=0,a=Math.min(t.length,n.length);o<a&&t[o].state!==r&&function(t,n){return t.equals(n,e.nonDynamicParams)}(t[o],n[o]);)o++;var s,l,u,c,d;l=(s=t).slice(0,o),u=s.slice(o);var f=l.map(i);return c=n.slice(o),d=f.concat(c),{from:s,to:d,retained:l,exiting:u,entering:c}},e.matching=function(e,t,n){var r=!1;return $(e,t).reduce(function(e,t){var i=t[0],o=t[1];return r=r||!i.equals(o,n),r?e:e.concat(i)},[])},e.equals=function(t,n,r){return t.length===n.length&&e.matching(t,n,r).length===t.length},e.subPath=function(e,t){var n=_(e,t),r=e.indexOf(n);return-1===r?void 0:e.slice(0,r+1)},e}();tn.nonDynamicParams=function(e){return e.state.parameters({inherit:!1}).filter(function(e){return!e.dynamic})},tn.paramValues=function(e){return e.reduce(function(e,t){return ft(e,t.paramValues)},{})};var nn={when:"LAZY",async:"WAIT"},rn=function(){function e(t,n,r,i,o){if(this.resolved=!1,this.promise=void 0,t instanceof e)ft(this,t);else if(Xe(n)){if(null==t||void 0==t)throw new Error("new Resolvable(): token argument is required");if(!Xe(n))throw new Error("new Resolvable(): resolveFn argument must be a function");this.token=t,this.policy=i,this.resolveFn=n,this.deps=r||[],this.data=o,this.resolved=void 0!==o,this.promise=this.resolved?at.$q.when(this.data):void 0}else if(Qe(t)&&t.token&&Xe(t.resolveFn)){var a=t;return new e(a.token,a.resolveFn,a.deps,a.policy,a.data)}}return e.prototype.getPolicy=function(e){var t=this.policy||{},n=e&&e.resolvePolicy||{};return{when:t.when||n.when||nn.when,async:t.async||n.async||nn.async}},e.prototype.resolve=function(e,t){var n=this,r=at.$q,i=function(){return r.all(e.getDependencies(n).map(function(n){return n.get(e,t)}))},o=function(e){return n.resolveFn.apply(null,e)},a=function(e){var t=e.cache(1);return t.take(1).toPromise().then(function(){return t})},s=e.findNode(this),l=s&&s.state,u="RXWAIT"===this.getPolicy(l).async?a:c,d=function(e){return n.data=e,n.resolved=!0,Bt.traceResolvableResolved(n,t),n.data};return this.promise=r.when().then(i).then(o).then(u).then(d)},e.prototype.get=function(e,t){return this.promise||this.resolve(e,t)},e.prototype.toString=function(){return"Resolvable(token: "+K(this.token)+", requires: ["+this.deps.map(K)+"])"},e.prototype.clone=function(){return new e(this)},e}();rn.fromData=function(e,t){return new rn(e,function(){return t},null,null,t)};var on={when:{LAZY:"LAZY",EAGER:"EAGER"},async:{WAIT:"WAIT",NOWAIT:"NOWAIT",RXWAIT:"RXWAIT"}},an=on.when,sn=[an.EAGER,an.LAZY],ln=[an.EAGER],un="Native Injector",cn=function(){function e(e){this._path=e}return e.prototype.getTokens=function(){return this._path.reduce(function(e,t){return e.concat(t.resolvables.map(function(e){return e.token}))},[]).reduce($t,[])},e.prototype.getResolvable=function(e){return T(this._path.map(function(e){return e.resolvables}).reduce(kt,[]).filter(function(t){return t.token===e}))},e.prototype.getPolicy=function(e){var t=this.findNode(e);return e.getPolicy(t.state)},e.prototype.subContext=function(t){return new e(tn.subPath(this._path,function(e){return e.state===t}))},e.prototype.addResolvables=function(e,t){var n=_(this._path,Pe("state",t)),r=e.map(function(e){return e.token});n.resolvables=n.resolvables.filter(function(e){return-1===r.indexOf(e.token)}).concat(e)},e.prototype.resolvePath=function(e,t){var n=this;void 0===e&&(e="LAZY");var r=(gt(sn,e)?e:"LAZY")===on.when.EAGER?ln:sn;Bt.traceResolvePath(this._path,e,t);var i=function(e,t){return function(r){return gt(e,n.getPolicy(r)[t])}},o=this._path.reduce(function(e,o){var a=o.resolvables.filter(i(r,"when")),s=a.filter(i(["NOWAIT"],"async")),l=a.filter(Oe(i(["NOWAIT"],"async"))),u=n.subContext(o.state),c=function(e){return e.get(u,t).then(function(t){return{token:e.token,value:t}})};return s.forEach(c),e.concat(l.map(c))},[]);return at.$q.all(o)},e.prototype.injector=function(){return this._injector||(this._injector=new dn(this))},e.prototype.findNode=function(e){return _(this._path,function(t){return gt(t.resolvables,e)})},e.prototype.getDependencies=function(e){var t=this,n=this.findNode(e),r=(tn.subPath(this._path,function(e){return e===n})||this._path).reduce(function(e,t){return e.concat(t.resolvables)},[]).filter(function(t){return t!==e}),i=function(e){var n=r.filter(function(t){return t.token===e});if(n.length)return T(n);var i=t.injector().getNative(e);if(!i)throw new Error("Could not find Dependency Injection token: "+K(e));return new rn(e,function(){return i},[],i)};return e.deps.map(i)},e}(),dn=function(){function e(e){this.context=e,this.native=this.get(un)||at.$injector}return e.prototype.get=function(e){var t=this.context.getResolvable(e);if(t){if("NOWAIT"===this.context.getPolicy(t).async)return t.get(this.context);if(!t.resolved)throw new Error("Resolvable async .get() not complete:"+K(t.token));return t.data}return this.native&&this.native.get(e)},e.prototype.getAsync=function(e){var t=this.context.getResolvable(e);return t?t.get(this.context):at.$q.when(this.native.get(e))},e.prototype.getNative=function(e){return this.native&&this.native.get(e)},e}(),fn=Re("self"),pn=function(){function t(t,n,r){var i=this;if(this._deferred=at.$q.defer(),this.promise=this._deferred.promise,this._registeredHooks={},this._hookBuilder=new Kt(this),this.isActive=function(){return i.router.globals.transition===i},this.router=r,this._targetState=n,!n.valid())throw new Error(n.error());this._options=ft({current:ze(this)},n.options()),this.$id=r.transitionService._transitionCount++;var o=tn.buildToPath(t,n);this._treeChanges=tn.treeChanges(t,o,this._options.reloadState),this.createTransitionHookRegFns();var a=this._hookBuilder.buildHooksForPhase(e.TransitionHookPhase.CREATE);Gt.invokeHooks(a,function(){return null}),this.applyViewConfigs(r)}return t.prototype.onBefore=function(e,t,n){},t.prototype.onStart=function(e,t,n){},t.prototype.onExit=function(e,t,n){},t.prototype.onRetain=function(e,t,n){},t.prototype.onEnter=function(e,t,n){},t.prototype.onFinish=function(e,t,n){},t.prototype.onSuccess=function(e,t,n){},t.prototype.onError=function(e,t,n){},t.prototype.createTransitionHookRegFns=function(){var t=this;this.router.transitionService._pluginapi._getEvents().filter(function(t){return t.hookPhase!==e.TransitionHookPhase.CREATE}).forEach(function(e){return N(t,t.router.transitionService,e)})},t.prototype.getHooks=function(e){return this._registeredHooks[e]},t.prototype.applyViewConfigs=function(e){var t=this._treeChanges.entering.map(function(e){return e.state});tn.applyViewConfigs(e.transitionService.$view,this._treeChanges.to,t)},t.prototype.$from=function(){return T(this._treeChanges.from).state},t.prototype.$to=function(){return T(this._treeChanges.to).state},t.prototype.from=function(){return this.$from().self},t.prototype.to=function(){return this.$to().self},t.prototype.targetState=function(){return this._targetState},t.prototype.is=function(e){return e instanceof t?this.is({to:e.$to().name,from:e.$from().name}):!(e.to&&!O(this.$to(),e.to)||e.from&&!O(this.$from(),e.from))},t.prototype.params=function(e){return void 0===e&&(e="to"),Object.freeze(this._treeChanges[e].map(Re("paramValues")).reduce(bt,{}))},t.prototype.injector=function(e,t){void 0===t&&(t="to");var n=this._treeChanges[t];return e&&(n=tn.subPath(n,function(t){return t.state===e||t.state.name===e})),new cn(n).injector()},t.prototype.getResolveTokens=function(e){return void 0===e&&(e="to"),new cn(this._treeChanges[e]).getTokens()},t.prototype.addResolvable=function(e,t){void 0===t&&(t=""),e=je(rn)(e)?e:new rn(e);var n="string"==typeof t?t:t.name,r=this._treeChanges.to,i=_(r,function(e){return e.state.name===n});new cn(r).addResolvables([e],i.state)},t.prototype.redirectedFrom=function(){return this._options.redirectedFrom||null},t.prototype.originalTransition=function(){var e=this.redirectedFrom();return e&&e.originalTransition()||this},t.prototype.options=function(){return this._options},t.prototype.entering=function(){return C(this._treeChanges.entering,Re("state")).map(fn)},t.prototype.exiting=function(){return C(this._treeChanges.exiting,Re("state")).map(fn).reverse()},t.prototype.retained=function(){return C(this._treeChanges.retained,Re("state")).map(fn)},t.prototype.views=function(e,t){void 0===e&&(e="entering");var n=this._treeChanges[e];return(n=t?n.filter(Pe("state",t)):n).map(Re("views")).filter(c).reduce(kt,[])},t.prototype.treeChanges=function(e){return e?this._treeChanges[e]:this._treeChanges},t.prototype.redirect=function(e){for(var t=1,n=this;null!=(n=n.redirectedFrom());)if(++t>20)throw new Error("Too many consecutive Transition redirects (20+)");var r={redirectedFrom:this,source:"redirect"};"url"===this.options().source&&!1!==e.options().location&&(r.location="replace");var i=ft({},this.options(),e.options(),r);e=new Wt(e.identifier(),e.$state(),e.params(),i);var o=this.router.transitionService.create(this._treeChanges.from,e),a=this._treeChanges.entering,s=o._treeChanges.entering;return tn.matching(s,a,tn.nonDynamicParams).filter(Oe(function(e){return function(t){return e&&t.state.includes[e.name]}}(e.options().reloadState))).forEach(function(e,t){e.resolvables=a[t].resolvables}),o},t.prototype._changedParams=function(){var e=this._treeChanges;if(!(this._options.reload||e.exiting.length||e.entering.length||e.to.length!==e.from.length||$(e.to,e.from).map(function(e){return e[0].state!==e[1].state}).reduce(Ct,!1))){var t=e.to.map(function(e){return e.paramSchema}),n=[e.to,e.from].map(function(e){return e.map(function(e){return e.paramValues})});return $(t,n[0],n[1]).map(function(e){var t=e[0],n=e[1],r=e[2];return Qt.changed(t,n,r)}).reduce(kt,[])}},t.prototype.dynamic=function(){var e=this._changedParams();return!!e&&e.map(function(e){return e.dynamic}).reduce(Ct,!1)},t.prototype.ignored=function(){return!!this._ignoredReason()},t.prototype._ignoredReason=function(){var e=this.router.globals.transition,t=this._options.reloadState,n=function(e,n){if(e.length!==n.length)return!1;var r=tn.matching(e,n);return e.length===r.filter(function(e){return!t||!e.state.includes[t.name]}).length},r=this.treeChanges(),i=e&&e.treeChanges();return i&&n(i.to,r.to)&&n(i.exiting,r.exiting)?"SameAsPending":0===r.exiting.length&&0===r.entering.length&&n(r.from,r.to)?"SameAsCurrent":void 0},t.prototype.run=function(){var t=this,n=Gt.runAllHooks,r=function(e){return t._hookBuilder.buildHooksForPhase(e)},i=function(){Bt.traceSuccess(t.$to(),t),t.success=!0,t._deferred.resolve(t.to()),n(r(e.TransitionHookPhase.SUCCESS))},o=function(i){Bt.traceError(i,t),t.success=!1,t._deferred.reject(i),t._error=i,n(r(e.TransitionHookPhase.ERROR))},a=function(){var t=r(e.TransitionHookPhase.RUN),n=function(){return at.$q.when(void 0)};return Gt.invokeHooks(t,n)},s=function(){var e=t.router.globals;return e.lastStartedTransitionId=t.$id,e.transition=t,e.transitionHistory.enqueue(t),Bt.traceTransitionStart(t),at.$q.when(void 0)},l=r(e.TransitionHookPhase.BEFORE);return Gt.invokeHooks(l,s).then(a).then(i,o),this.promise},t.prototype.valid=function(){return!this.error()||void 0!==this.success},t.prototype.abort=function(){Ue(this.success)&&(this._aborted=!0)},t.prototype.error=function(){var e=this.$to();return e.self.abstract?"Cannot transition to abstract state '"+e.name+"'":Qt.validates(e.parameters(),this.params())?!1===this.success?this._error:void 0:"Param values not valid for state '"+e.name+"'"},t.prototype.toString=function(){var e=this.from(),t=this.to(),n=function(e){return null!==e["#"]&&void 0!==e["#"]?e:b(e,["#"])};return"Transition#"+this.$id+"( '"+(Qe(e)?e.name:e)+"'"+ut(n(this._treeChanges.from.map(Re("paramValues")).reduce(bt,{})))+" -> "+(this.valid()?"":"(X) ")+"'"+(Qe(t)?t.name:t)+"'"+ut(n(this.params()))+" )"},t}();pn.diToken=pn;var hn=null,gn=function(e){var t=It.isRejectionPromise;return(hn=hn||l([[Oe(Ge),ze("undefined")],[qe,ze("null")],[it,ze("[Promise]")],[t,function(e){return e._transitionRejection.toString()}],[je(It),s("toString")],[je(pn),s("toString")],[je(rn),s("toString")],[u,G],[ze(!0),c]]))(e)},mn=function(e){return function(t){if(!t)return["",""];var n=t.indexOf(e);return-1===n?[t,""]:[t.substr(0,n),t.substr(n+1)]}},vn=function(){function e(){this.enqueue=!0,this.typeQueue=[],this.defaultTypes=y(e.prototype,["hash","string","query","path","int","bool","date","json","any"]);var t=function(e,t){return new Xt(ft({name:t},e))};this.types=ht(C(this.defaultTypes,t),{})}return e.prototype.dispose=function(){this.types={}},e.prototype.type=function(e,t,n){if(!Ge(t))return this.types[e];if(this.types.hasOwnProperty(e))throw new Error("A type named '"+e+"' has already been defined.");return this.types[e]=new Xt(ft({name:e},t)),n&&(this.typeQueue.push({name:e,def:n}),this.enqueue||this._flushTypeQueue()),this},e.prototype._flushTypeQueue=function(){for(;this.typeQueue.length;){var e=this.typeQueue.shift();if(e.pattern)throw new Error("You cannot override a type's .pattern at runtime.");ft(this.types[e.name],at.$injector.invoke(e.def))}},e}();!function(){var e=function(e){var t=function(e){return null!=e?e.toString():e},n={encode:t,decode:t,is:je(String),pattern:/.*/,equals:function(e,t){return e==t}};return ft({},n,e)};ft(vn.prototype,{string:e({}),path:e({pattern:/[^\/]*/}),query:e({}),hash:e({inherit:!1}),int:e({decode:function(e){return parseInt(e,10)},is:function(e){return!Ke(e)&&this.decode(e.toString())===e},pattern:/-?\d+/}),bool:e({encode:function(e){return e&&1||0},decode:function(e){return 0!==parseInt(e,10)},is:je(Boolean),pattern:/0|1/}),date:e({encode:function(e){return this.is(e)?[e.getFullYear(),("0"+(e.getMonth()+1)).slice(-2),("0"+e.getDate()).slice(-2)].join("-"):void 0},decode:function(e){if(this.is(e))return e;var t=this.capture.exec(e);return t?new Date(t[1],t[2]-1,t[3]):void 0},is:function(e){return e instanceof Date&&!isNaN(e.valueOf())},equals:function(e,t){return["getFullYear","getMonth","getDate"].reduce(function(n,r){return n&&e[r]()===t[r]()},!0)},pattern:/[0-9]{4}-(?:0[1-9]|1[0-2])-(?:0[1-9]|[1-2][0-9]|3[0-1])/,capture:/([0-9]{4})-(0[1-9]|1[0-2])-(0[1-9]|[1-2][0-9]|3[0-1])/}),json:e({encode:ut,decode:lt,is:je(Object),equals:pt,pattern:/[^\/]*/}),any:e({encode:c,decode:c,is:function(){return!0},equals:pt})})}();var yn=function(){function e(e){void 0===e&&(e={}),ft(this,e)}return e.prototype.$inherit=function(e,t,n){var r,i=v(t,n),o={},a=[];for(var s in i)if(i[s]&&i[s].params&&(r=Object.keys(i[s].params)).length)for(var l in r)a.indexOf(r[l])>=0||(a.push(r[l]),o[r[l]]=this[r[l]]);return ft({},o,e)},e}(),bn=function(e){if(!Ze(e))return!1;var t="^"===e.charAt(0);return{val:t?e.substring(1):e,root:t}},xn=function(e,t){return function(n){var r=n;r&&r.url&&r.name&&r.name.match(/\.\*\*$/)&&(r.url+="{remainder:any}");var i=bn(r.url),o=n.parent,a=i?e.compile(i.val,{params:n.params||{},paramMap:function(e,t){return!1===r.reloadOnSearch&&t&&(e=ft(e||{},{dynamic:!0})),e}}):r.url;if(!a)return null;if(!e.isMatcher(a))throw new Error("Invalid url '"+a+"' in state '"+n+"'");return i&&i.root?a:(o&&o.navigable||t()).url.append(a)}},wn=function(e){return function(t){return!e(t)&&t.url?t:t.parent?t.parent.navigable:null}},_n=function(e){return function(t){var n=function(t,n){return e.fromConfig(n,null,t)},r=t.url&&t.url.parameters({inherit:!1})||[],i=wt(xt(b(t.params||{},r.map(Re("id"))),n));return r.concat(i).map(function(e){return[e.id,e]}).reduce(M,{})}},Cn=function(){function e(e,t){function n(t){return o(t)?null:e.find(r.parentName(t))||i()}this.matcher=e;var r=this,i=function(){return e.find("")},o=function(e){return""===e.name};this.builders={name:[Z],self:[Q],parent:[n],data:[ee],url:[xn(t,i)],navigable:[wn(o)],params:[_n(t.paramFactory)],views:[],path:[te],includes:[ne],resolvables:[re]}}return e.prototype.builder=function(e,t){var n=this.builders,r=n[e]||[];return Ze(e)&&!Ge(t)?r.length>1?r:r[0]:Ze(e)&&Xe(t)?(n[e]=r,n[e].push(t),function(){return n[e].splice(n[e].indexOf(t,1))&&null}):void 0},e.prototype.build=function(e){var t=this,n=t.matcher,r=t.builders,i=this.parentName(e);if(i&&!n.find(i,void 0,!1))return null;for(var o in r)if(r.hasOwnProperty(o)){var a=r[o].reduce(function(e,t){return function(n){return t(n,e)}},d);e[o]=a(e)}return e},e.prototype.parentName=function(e){var t=e.name||"",n=t.split(".");if(n.length>1){if(e.parent)throw new Error("States that specify the 'parent:' property should not have a '.' in their name ("+t+")");return"**"===n.pop()&&n.pop(),n.join(".")}return e.parent?Ze(e.parent)?e.parent:e.parent.name:""},e.prototype.name=function(e){var t=e.name;if(-1!==t.indexOf(".")||!e.parent)return t;var n=Ze(e.parent)?e.parent:e.parent.name;return n?n+"."+t:t},e}(),kn=function(){function e(e){this._states=e}return e.prototype.isRelative=function(e){return 0===(e=e||"").indexOf(".")||0===e.indexOf("^")},e.prototype.find=function(e,t,n){if(void 0===n&&(n=!0),e||""===e){var r=Ze(e),i=r?e:e.name;this.isRelative(i)&&(i=this.resolvePath(i,t));var o=this._states[i];if(o&&(r||!(r||o!==e&&o.self!==e)))return o;if(r&&n){var a=wt(this._states).filter(function(e){return e.__stateObjectCache.nameGlob&&e.__stateObjectCache.nameGlob.matches(i)});return a.length>1&&console.log("stateMatcher.find: Found multiple matches for "+i+" using glob: ",a.map(function(e){return e.name})),a[0]}}},e.prototype.resolvePath=function(e,t){if(!t)throw new Error("No reference point given for path '"+e+"'");for(var n=this.find(t),r=e.split("."),i=0,o=r.length,a=n;i<o;i++)if(""!==r[i]||0!==i){if("^"!==r[i])break;if(!a.parent)throw new Error("Path '"+e+"' not valid for state '"+n.name+"'");a=a.parent}else a=n;var s=r.slice(i).join(".");return a.name+(a.name&&s?".":"")+s},e}(),Sn=function(){function e(e,t,n,r,i){this.$registry=e,this.$urlRouter=t,this.states=n,this.builder=r,this.listeners=i,this.queue=[],this.matcher=e.matcher}return e.prototype.dispose=function(){this.queue=[]},e.prototype.register=function(e){var t=this.queue,n=Ve.create(e),r=n.name;if(!Ze(r))throw new Error("State must have a valid name");if(this.states.hasOwnProperty(r)||gt(t.map(Re("name")),r))throw new Error("State '"+r+"' is already defined");return t.push(n),this.flush(),n},e.prototype.flush=function(){for(var e=this,t=this,n=t.queue,r=t.states,i=t.builder,o=[],a=[],s={},l=function(t){return e.states.hasOwnProperty(t)&&e.states[t]};n.length>0;){var u=n.shift(),c=u.name,d=i.build(u),f=a.indexOf(u);if(d){var p=l(c);if(p&&p.name===c)throw new Error("State '"+c+"' is already defined");var h=l(c+".**");h&&this.$registry.deregister(h),r[c]=u,this.attachRoute(u),f>=0&&a.splice(f,1),o.push(u)}else{var g=s[c];if(s[c]=n.length,f>=0&&g===n.length)return n.push(u),r;f<0&&a.push(u),n.push(u)}}return o.length&&this.listeners.forEach(function(e){return e("registered",o.map(function(e){return e.self}))}),r},e.prototype.attachRoute=function(e){!e.abstract&&e.url&&this.$urlRouter.rule(this.$urlRouter.urlRuleFactory.create(e))},e}(),$n=function(){function e(e){this._router=e,this.states={},this.listeners=[],this.matcher=new kn(this.states),this.builder=new Cn(this.matcher,e.urlMatcherFactory),this.stateQueue=new Sn(this,e.urlRouter,this.states,this.builder,this.listeners),this._registerRoot()}return e.prototype._registerRoot=function(){var e={name:"",url:"^",views:null,params:{"#":{value:null,type:"hash",dynamic:!0}},abstract:!0};(this._root=this.stateQueue.register(e)).navigable=null},e.prototype.dispose=function(){var e=this;this.stateQueue.dispose(),this.listeners=[],this.get().forEach(function(t){return e.get(t)&&e.deregister(t)})},e.prototype.onStatesChanged=function(e){return this.listeners.push(e),function(){mt(this.listeners)(e)}.bind(this)},e.prototype.root=function(){return this._root},e.prototype.register=function(e){return this.stateQueue.register(e)},e.prototype._deregisterTree=function(e){var t=this,n=this.get().map(function(e){return e.$$state()}),r=function(e){var t=n.filter(function(t){return-1!==e.indexOf(t.parent)});return 0===t.length?t:t.concat(r(t))},i=r([e]),o=[e].concat(i).reverse();return o.forEach(function(e){var n=t._router.urlRouter;n.rules().filter(Pe("state",e)).forEach(n.removeRule.bind(n)),delete t.states[e.name]}),o},e.prototype.deregister=function(e){var t=this.get(e);if(!t)throw new Error("Can't deregister state; not found: "+e);var n=this._deregisterTree(t.$$state());return this.listeners.forEach(function(e){return e("deregistered",n.map(function(e){return e.self}))}),n},e.prototype.get=function(e,t){var n=this;if(0===arguments.length)return Object.keys(this.states).map(function(e){return n.states[e].self});var r=this.matcher.find(e,t);return r&&r.self||null},e.prototype.decorator=function(e,t){return this.builder.builder(e,t)},e}(),Mn=function(e,t,n){return e[t]=e[t]||n()},Tn=X("/"),Dn=function(){function t(e,n,r,i){var o=this;this.config=i,this._cache={path:[this]},this._children=[],this._params=[],this._segments=[],this._compiled=[],this.pattern=e,this.config=m(this.config,{params:{},strict:!0,caseInsensitive:!1,paramMap:c});for(var a,s,l,u=/([:*])([\w\[\]]+)|\{([\w\[\]]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,d=/([:]?)([\w\[\].-]+)|\{([\w\[\].-]+)(?:\:\s*((?:[^{}\\]+|\\.|\{(?:[^{}\\]+|\\.)*\})+))?\}/g,f=0,p=[],h=function(n){if(!t.nameValidator.test(n))throw new Error("Invalid parameter name '"+n+"' in pattern '"+e+"'");if(_(o._params,Pe("id",n)))throw new Error("Duplicate parameter name '"+n+"' in pattern '"+e+"'")},g=function(t,r){var i=t[2]||t[3],a=r?t[4]:t[4]||("*"===t[1]?".*":null);return{id:i,regexp:a,cfg:o.config.params[i],segment:e.substring(f,t.index),type:a?n.type(a)||function(e){return ht(n.type(r?"query":"path"),{pattern:new RegExp(e,o.config.caseInsensitive?"i":void 0)})}(a):null}};(a=u.exec(e))&&!((s=g(a,!1)).segment.indexOf("?")>=0);)h(s.id),this._params.push(r.fromPath(s.id,s.type,this.config.paramMap(s.cfg,!1))),this._segments.push(s.segment),p.push([s.segment,T(this._params)]),f=u.lastIndex;var v=(l=e.substring(f)).indexOf("?");if(v>=0){var y=l.substring(v);if(l=l.substring(0,v),y.length>0)for(f=0;a=d.exec(y);)s=g(a,!0),h(s.id),this._params.push(r.fromSearch(s.id,s.type,this.config.paramMap(s.cfg,!0))),f=u.lastIndex}this._segments.push(l),this._compiled=p.map(function(e){return ie.apply(null,e)}).concat(ie(l))}return t.prototype.append=function(e){return this._children.push(e),e._cache={path:this._cache.path.concat(e),parent:this,pattern:null},e},t.prototype.isRoot=function(){return this._cache.path[0]===this},t.prototype.toString=function(){return this.pattern},t.prototype.exec=function(e,t,n,r){var i=this;void 0===t&&(t={}),void 0===r&&(r={});var o=Mn(this._cache,"pattern",function(){return new RegExp(["^",Mt(i._cache.path.map(Re("_compiled"))).join(""),!1===i.config.strict?"/?":"","$"].join(""),i.config.caseInsensitive?"i":void 0)}).exec(e);if(!o)return null;var a=this.parameters(),s=a.filter(function(e){return!e.isSearch()}),l=a.filter(function(e){return e.isSearch()}),u=this._cache.path.map(function(e){return e._segments.length-1}).reduce(function(e,t){return e+t}),c={};if(u!==o.length-1)throw new Error("Unbalanced capture group in route '"+this.pattern+"'");for(var d=0;d<u;d++){for(var f=s[d],p=o[d+1],h=0;h<f.replace.length;h++)f.replace[h].from===p&&(p=f.replace[h].to);p&&!0===f.array&&(p=function(e){var t=function(e){return e.split("").reverse().join("")},n=function(e){return e.replace(/\\-/g,"-")};return C(C(t(e).split(/-(?!\\)/),t),n).reverse()}(p)),Ge(p)&&(p=f.type.decode(p)),c[f.id]=f.value(p)}return l.forEach(function(e){for(var n=t[e.id],r=0;r<e.replace.length;r++)e.replace[r].from===n&&(n=e.replace[r].to);Ge(n)&&(n=e.type.decode(n)),c[e.id]=e.value(n)}),n&&(c["#"]=n),c},t.prototype.parameters=function(e){return void 0===e&&(e={}),!1===e.inherit?this._params:Mt(this._cache.path.map(function(e){return e._params}))},t.prototype.parameter=function(e,t){var n=this;void 0===t&&(t={});var r=this._cache.parent;return function(){for(var t=0,r=n._params;t<r.length;t++){var i=r[t];if(i.id===e)return i}}()||!1!==t.inherit&&r&&r.parameter(e,t)||null},t.prototype.validates=function(e){var t=function(e,t){return!e||e.validates(t)};return e=e||{},this.parameters().filter(function(t){return e.hasOwnProperty(t.id)}).map(function(n){return t(n,e[n.id])}).reduce(_t,!0)},t.prototype.format=function(e){function n(t){var n=t.value(e[t.id]),r=t.validates(n),i=t.isDefaultValue(n);return{param:t,value:n,isValid:r,isDefaultValue:i,squash:!!i&&t.squash,encoded:t.type.encode(n)}}void 0===e&&(e={});var r=this._cache.path,i=r.map(t.pathSegmentsAndParams).reduce(kt,[]).map(function(e){return Ze(e)?e:n(e)}),o=r.map(t.queryParams).reduce(kt,[]).map(n),a=function(e){return!1===e.isValid};if(i.concat(o).filter(a).length)return null;var s=i.reduce(function(e,n){if(Ze(n))return e+n;var r=n.squash,i=n.encoded,o=n.param;return!0===r?e.match(/\/$/)?e.slice(0,-1):e:Ze(r)?e+r:!1!==r?e:null==i?e:et(i)?e+C(i,t.encodeDashes).join("-"):o.raw?e+i:e+encodeURIComponent(i)},""),l=o.map(function(e){var t=e.param,n=e.squash,r=e.encoded,i=e.isDefaultValue;if(!(null==r||i&&!1!==n)&&(et(r)||(r=[r]),0!==r.length))return t.raw||(r=C(r,encodeURIComponent)),r.map(function(e){return t.id+"="+e})}).filter(c).reduce(kt,[]).join("&");return s+(l?"?"+l:"")+(e["#"]?"#"+e["#"]:"")},t.encodeDashes=function(e){return encodeURIComponent(e).replace(/-/g,function(e){return"%5C%"+e.charCodeAt(0).toString(16).toUpperCase()})},t.pathSegmentsAndParams=function(t){return $(t._segments,t._params.filter(function(t){return t.location===e.DefType.PATH}).concat(void 0)).reduce(kt,[]).filter(function(e){return""!==e&&Ge(e)})},t.queryParams=function(t){return t._params.filter(function(t){return t.location===e.DefType.SEARCH})},t.compare=function(e,n){var r,i,o=function(e){return e._cache.segments=e._cache.segments||e._cache.path.map(t.pathSegmentsAndParams).reduce(kt,[]).reduce(J,[]).map(function(e){return Ze(e)?Tn(e):e}).reduce(kt,[])},a=function(e){return e._cache.weights=e._cache.weights||o(e).map(function(e){return"/"===e?1:Ze(e)?2:e instanceof Qt?3:void 0})},s=$(a(e),a(n));for(i=0;i<s.length;i++)if(0!=(r=s[i][0]-s[i][1]))return r;return 0},t}();Dn.nameValidator=/^\w+([-.]+\w+)*(?:\[\])?$/;var En=function(){function t(){var t=this;this.paramTypes=new vn,this._isCaseInsensitive=!1,this._isStrictMode=!0,this._defaultSquashPolicy=!1,this._getConfig=function(e){return ft({strict:t._isStrictMode,caseInsensitive:t._isCaseInsensitive},e)},this.paramFactory={fromConfig:function(n,r,i){return new Qt(n,r,i,e.DefType.CONFIG,t)},fromPath:function(n,r,i){return new Qt(n,r,i,e.DefType.PATH,t)},fromSearch:function(n,r,i){return new Qt(n,r,i,e.DefType.SEARCH,t)}},ft(this,{UrlMatcher:Dn,Param:Qt})}return t.prototype.caseInsensitive=function(e){return this._isCaseInsensitive=Ge(e)?e:this._isCaseInsensitive},t.prototype.strictMode=function(e){return this._isStrictMode=Ge(e)?e:this._isStrictMode},t.prototype.defaultSquashPolicy=function(e){if(Ge(e)&&!0!==e&&!1!==e&&!Ze(e))throw new Error("Invalid squash policy: "+e+". Valid policies: false, true, arbitrary-string");return this._defaultSquashPolicy=Ge(e)?e:this._defaultSquashPolicy},t.prototype.compile=function(e,t){return new Dn(e,this.paramTypes,this.paramFactory,this._getConfig(t))},t.prototype.isMatcher=function(e){if(!Qe(e))return!1;var t=!0;return dt(Dn.prototype,function(n,r){Xe(n)&&(t=t&&Ge(e[r])&&Xe(e[r]))}),t},t.prototype.type=function(e,t,n){var r=this.paramTypes.type(e,t,n);return Ge(t)?this:r},t.prototype.$get=function(){return this.paramTypes.enqueue=!1,this.paramTypes._flushTypeQueue(),this},t.prototype.dispose=function(){this.paramTypes.dispose()},t}(),Ln=function(){function e(e){this.router=e}return e.prototype.compile=function(e){return this.router.urlMatcherFactory.compile(e)},e.prototype.create=function(e,t){var n=this,r=l([[Ze,function(e){return r(n.compile(e))}],[je(Dn),function(e){return n.fromUrlMatcher(e,t)}],[rt,function(e){return n.fromState(e,n.router)}],[je(RegExp),function(e){return n.fromRegExp(e,t)}],[Xe,function(e){return new Rn(e,t)}]]),i=r(e);if(!i)throw new Error("invalid 'what' in when()");return i},e.prototype.fromUrlMatcher=function(e,t){function n(t){var n=e.exec(t.path,t.search,t.hash);return e.validates(n)&&n}function r(t){var n=e.parameters().filter(function(e){return e.isOptional});return n.length?n.filter(function(e){return t[e.id]}).length/n.length:1e-6}var i=t;Ze(t)&&(t=this.router.urlMatcherFactory.compile(t)),je(Dn)(t)&&(i=function(e){return t.format(e)});var o={urlMatcher:e,matchPriority:r,type:"URLMATCHER"};return ft(new Rn(n,i),o)},e.prototype.fromState=function(e,t){var n=function(n){var r=t.stateService,i=t.globals;r.href(e,n)!==r.href(i.current,i.params)&&r.transitionTo(e,n,{inherit:!0,source:"url"})},r={state:e,type:"STATE"};return ft(this.fromUrlMatcher(e.url,n),r)},e.prototype.fromRegExp=function(e,t){if(e.global||e.sticky)throw new Error("Rule RegExp must not be global or sticky");var n=function(e){return t.replace(/\$(\$|\d{1,2})/,function(t,n){return e["$"===n?0:Number(n)]})},r=Ze(t)?n:t,i={regexp:e,type:"REGEXP"};return ft(new Rn(function(t){return e.exec(t.path)},r),i)},e}();Ln.isUrlRule=function(e){return e&&["type","match","handler"].every(function(t){return Ge(e[t])})};var An,Rn=function(){function e(e,t){var n=this;this.match=e,this.type="RAW",this.matchPriority=function(e){return 0-n.$id},this.handler=t||c}return e}(),Pn=Re("urlMatcher");An=Rt(At(i(Re("priority"),function(e){return-e})),At(i(Re("type"),function(e){return{STATE:4,URLMATCHER:4,REGEXP:3,RAW:2,OTHER:1}[e]})),function(e,t){return Pn(e)&&Pn(t)?Dn.compare(Pn(e),Pn(t)):0},At(Re("$id"),gt(["REGEXP","RAW","OTHER"])));var Fn=function(){function e(t){this._sortFn=An,this._rules=[],this.interceptDeferred=!1,this._id=0,this._sorted=!1,this._router=t,this.urlRuleFactory=new Ln(t),f(ze(e.prototype),this,ze(this))}return e.prototype.dispose=function(){this.listen(!1),this._rules=[],delete this._otherwiseFn},e.prototype.sort=function(e){this._rules.sort(this._sortFn=e||this._sortFn),this._sorted=!0},e.prototype.ensureSorted=function(){this._sorted||this.sort()},e.prototype.match=function(e){var t=this;this.ensureSorted(),e=ft({path:"",search:{},hash:""},e);var n=this.rules();this._otherwiseFn&&n.push(this._otherwiseFn);for(var r,i=0;i<n.length&&(!r||0===this._sortFn(n[i],r.rule));i++){var o=function(n){var r=n.match(e,t._router);return r&&{match:r,rule:n,weight:n.matchPriority(r)}}(n[i]);r=!r||o&&o.weight>r.weight?o:r}return r},e.prototype.sync=function(e){if(!e||!e.defaultPrevented){var t=this._router,n=t.urlService,r=t.stateService,i={path:n.path(),search:n.search(),hash:n.hash()},o=this.match(i);l([[Ze,function(e){return n.url(e,!0)}],[Wt.isDef,function(e){return r.go(e.state,e.params,e.options)}],[je(Wt),function(e){return r.go(e.state(),e.params(),e.options())}]])(o&&o.rule.handler(o.match,i,t))}},e.prototype.listen=function(e){var t=this;if(!1!==e)return this._stopFn=this._stopFn||this._router.urlService.onChange(function(e){return t.sync(e)});this._stopFn&&this._stopFn(),delete this._stopFn},e.prototype.update=function(e){var t=this._router.locationService;e?this.location=t.path():t.path()!==this.location&&t.url(this.location,!0)},e.prototype.push=function(e,t,n){var r=n&&!!n.replace;this._router.urlService.url(e.format(t||{}),r)},e.prototype.href=function(e,t,n){var r=e.format(t);if(null==r)return null;n=n||{absolute:!1};var i=this._router.urlService.config,o=i.html5Mode();if(o||null===r||(r="#"+i.hashPrefix()+r),r=oe(r,o,n.absolute,i.baseHref()),!n.absolute||!r)return r;var a=!o&&r?"/":"",s=i.port();return s=80===s||443===s?"":":"+s,[i.protocol(),"://",i.host(),s,a,r].join("")},e.prototype.rule=function(e){var t=this;if(!Ln.isUrlRule(e))throw new Error("invalid rule");return e.$id=this._id++,e.priority=e.priority||0,this._rules.push(e),this._sorted=!1,function(){return t.removeRule(e)}},e.prototype.removeRule=function(e){mt(this._rules,e)},e.prototype.rules=function(){return this.ensureSorted(),this._rules.slice()},e.prototype.otherwise=function(e){var t=ae(e);this._otherwiseFn=this.urlRuleFactory.create(ze(!0),t),this._sorted=!1},e.prototype.initial=function(e){var t=ae(e),n=function(e,t){return 0===t.globals.transitionHistory.size()&&!!/^\/?$/.exec(e.path)};this.rule(this.urlRuleFactory.create(n,t))},e.prototype.when=function(e,t,n){var r=this.urlRuleFactory.create(e,t);return Ge(n&&n.priority)&&(r.priority=n.priority),this.rule(r),r},e.prototype.deferIntercept=function(e){void 0===e&&(e=!0),this.interceptDeferred=e},e}(),On=function(){function e(){var e=this;this._uiViews=[],this._viewConfigs=[],this._viewConfigFactories={},this._pluginapi={_rootViewContext:this._rootViewContext.bind(this),_viewConfigFactory:this._viewConfigFactory.bind(this),_registeredUIViews:function(){return e._uiViews},_activeViewConfigs:function(){return e._viewConfigs}}}return e.prototype._rootViewContext=function(e){return this._rootContext=e||this._rootContext},e.prototype._viewConfigFactory=function(e,t){this._viewConfigFactories[e]=t},e.prototype.createViewConfig=function(e,t){var n=this._viewConfigFactories[t.$type];if(!n)throw new Error("ViewService: No view config factory registered for type "+t.$type);var r=n(e,t);return et(r)?r:[r]},e.prototype.deactivateViewConfig=function(e){Bt.traceViewServiceEvent("<- Removing",e),mt(this._viewConfigs,e)},e.prototype.activateViewConfig=function(e){Bt.traceViewServiceEvent("-> Registering",e),this._viewConfigs.push(e)},e.prototype.sync=function(){function t(e){var t=function(e){return e&&e.parent?t(e.parent)+1:1};return 1e4*e.fqn.split(".").length+t(e.creationContext)}function r(e){for(var t=e.viewDecl.$context,n=0;++n&&t.parent;)t=t.parent;return n}var i=this,o=this._uiViews.map(function(e){return[e.fqn,e]}).reduce(M,{}),a=n(function(e,t,n,r){return t*(e(n)-e(r))}),s=function(t){var n=i._viewConfigs.filter(e.matches(o,t));return n.length>1&&n.sort(a(r,-1)),[t,n[0]]},l=function(e){var t=e[0],n=e[1];-1!==i._uiViews.indexOf(t)&&t.configUpdated(n)};this._uiViews.sort(a(t,1)).map(s).forEach(l)},e.prototype.registerUIView=function(e){Bt.traceViewServiceUIViewEvent("-> Registering",e);var t=this._uiViews,n=function(t){return t.fqn===e.fqn};return t.filter(n).length&&Bt.traceViewServiceUIViewEvent("!!!! duplicate uiView named:",e),t.push(e),this.sync(),function(){-1!==t.indexOf(e)?(Bt.traceViewServiceUIViewEvent("<- Deregistering",e),mt(t)(e)):Bt.traceViewServiceUIViewEvent("Tried removing non-registered uiView",e)}},e.prototype.available=function(){return this._uiViews.map(Re("fqn"))},e.prototype.active=function(){return this._uiViews.filter(Re("$config")).map(Re("name"))},e.normalizeUIViewTarget=function(e,t){void 0===t&&(t="");var n=t.split("@"),r=n[0]||"$default",i=Ze(n[1])?n[1]:"^",o=/^(\^(?:\.\^)*)\.(.*$)/.exec(r);return o&&(i=o[1],r=o[2]),"!"===r.charAt(0)&&(r=r.substr(1),i=""),/^(\^(?:\.\^)*)$/.exec(i)?i=i.split(".").reduce(function(e,t){return e.parent},e).name:"."===i&&(i=e.name),{uiViewName:r,uiViewContextAnchor:i}},e}();On.matches=function(e,t){return function(n){if(t.$type!==n.viewDecl.$type)return!1;var r=n.viewDecl,i=r.$uiViewName.split("."),o=t.fqn.split(".");if(!pt(i,o.slice(0-i.length)))return!1;var a=1-i.length||void 0,s=o.slice(0,a).join("."),l=e[s].creationContext;return r.$uiViewContextAnchor===(l&&l.name)}};var Nn=function(){function e(){this.params=new yn,this.lastStartedTransitionId=-1,this.transitionHistory=new Ot([],1),this.successfulTransitions=new Ot([],1)}return e.prototype.dispose=function(){this.transitionHistory.clear(),this.successfulTransitions.clear(),this.transition=null},e}(),In=function(e){return e.reduce(function(e,t){return e[t]=ot(t),e},{dispose:d})},jn=["url","path","search","hash","onChange"],Yn=["port","protocol","host","baseHref","html5Mode","hashPrefix"],zn=["type","caseInsensitive","strictMode","defaultSquashPolicy"],Hn=["sort","when","initial","otherwise","rules","rule","removeRule"],Vn=["deferIntercept","listen","sync","match"],Bn=function(){function e(e,t){void 0===t&&(t=!0),this.router=e,this.rules={},this.config={};var n=function(){return e.locationService};f(n,this,n,jn,t);var r=function(){return e.locationConfig};f(r,this.config,r,Yn,t);var i=function(){return e.urlMatcherFactory};f(i,this.config,i,zn);var o=function(){return e.urlRouter};f(o,this.rules,o,Hn),f(o,this,o,Vn)}return e.prototype.url=function(e,t,n){},e.prototype.path=function(){},e.prototype.search=function(){},e.prototype.hash=function(){},e.prototype.onChange=function(e){},e.prototype.parts=function(){return{path:this.path(),search:this.search(),hash:this.hash()}},e.prototype.dispose=function(){},e.prototype.sync=function(e){},e.prototype.listen=function(e){},e.prototype.deferIntercept=function(e){},e.prototype.match=function(e){},e}();Bn.locationServiceStub=In(jn),Bn.locationConfigStub=In(Yn);var Wn=0,Un=function(){function e(e,t){void 0===e&&(e=Bn.locationServiceStub),void 0===t&&(t=Bn.locationConfigStub),this.locationService=e,this.locationConfig=t,this.$id=Wn++,this._disposed=!1,this._disposables=[],this.trace=Bt,this.viewService=new On,this.transitionService=new xr(this),this.globals=new Nn,this.urlMatcherFactory=new En,this.urlRouter=new Fn(this),this.stateRegistry=new $n(this),this.stateService=new wr(this),this.urlService=new Bn(this),this._plugins={},this.viewService._pluginapi._rootViewContext(this.stateRegistry.root()),this.globals.$current=this.stateRegistry.root(),this.globals.current=this.globals.$current.self,this.disposable(this.globals),this.disposable(this.stateService),this.disposable(this.stateRegistry),this.disposable(this.transitionService),this.disposable(this.urlRouter),this.disposable(e),this.disposable(t)}return e.prototype.disposable=function(e){this._disposables.push(e)},e.prototype.dispose=function(e){var t=this;e&&Xe(e.dispose)?e.dispose(this):(this._disposed=!0,this._disposables.slice().forEach(function(e){try{"function"==typeof e.dispose&&e.dispose(t),mt(t._disposables,e)}catch(e){}}))},e.prototype.plugin=function(e,t){void 0===t&&(t={});var n=new e(this,t);if(!n.name)throw new Error("Required property `name` missing on plugin: "+n);return this._disposables.push(n),this._plugins[n.name]=n},e.prototype.getPlugin=function(e){return e?this._plugins[e]:wt(this._plugins)},e}(),Gn=function(e){return e.onCreate({},se)},qn=function(e){function t(t){if(t)return t instanceof Wt?t:Ze(t)?r.target(t,e.params(),e.options()):t.state||t.params?r.target(t.state||e.to(),t.params||e.params(),e.options()):void 0}var n=e.to().redirectTo;if(n){var r=e.router.stateService;return Xe(n)?at.$q.when(n(e)).then(t):t(n)}},Kn=function(e){return e.onStart({to:function(e){return!!e.redirectTo}},qn)},Xn=le("onExit"),Jn=function(e){return e.onExit({exiting:function(e){return!!e.onExit}},Xn)},Zn=le("onRetain"),Qn=function(e){return e.onRetain({retained:function(e){return!!e.onRetain}},Zn)},er=le("onEnter"),tr=function(e){return e.onEnter({entering:function(e){return!!e.onEnter}},er)},nr=function(e){return new cn(e.treeChanges().to).resolvePath("EAGER",e).then(d)},rr=function(e){return e.onStart({},nr,{priority:1e3})},ir=function(e,t){return new cn(e.treeChanges().to).subContext(t.$$state()).resolvePath("LAZY",e).then(d)},or=function(e){return e.onEnter({entering:ze(!0)},ir,{priority:1e3})},ar=function(e){var t=at.$q,n=e.views("entering");if(n.length)return t.all(n.map(function(e){return t.when(e.load())})).then(d)},sr=function(e){return e.onFinish({},ar)},lr=function(e){var t=e.views("entering"),n=e.views("exiting");if(t.length||n.length){var r=e.router.viewService;n.forEach(function(e){return r.deactivateViewConfig(e)}),t.forEach(function(e){return r.activateViewConfig(e)}),r.sync()}},ur=function(e){return e.onSuccess({},lr)},cr=function(e){var t=e.router.globals,n=function(){t.successfulTransitions.enqueue(e),t.$current=e.$to(),t.current=t.$current.self,ct(e.params(),t.params)},r=function(){t.transition===e&&(t.transition=null)};e.onSuccess({},n,{priority:1e4}),e.promise.then(r,r)},dr=function(e){return e.onCreate({},cr)},fr=function(e){var t=e.options(),n=e.router.stateService,r=e.router.urlRouter;if("url"!==t.source&&t.location&&n.$current.navigable){var i={replace:"replace"===t.location};r.push(n.$current.navigable.url,n.params,i)}r.update(!0)},pr=function(e){return e.onSuccess({},fr,{priority:9999})},hr=function(e){function t(){if("url"!==e.originalTransition().options().source){var t=e.targetState();return n.stateService.target(t.identifier(),t.params(),t.options())}var r=n.urlService,i=r.match(r.parts()),o=i&&i.rule;if(o&&"STATE"===o.type){var a=o.state,s=i.match;return n.stateService.target(a,s,e.options())}n.urlService.sync()}var n=e.router,r=e.entering().filter(function(e){return!!e.$$state().lazyLoad}).map(function(t){return ue(e,t)});return at.$q.all(r).then(t)},gr=function(e){return e.onBefore({entering:function(e){return!!e.lazyLoad}},hr)},mr=function(){function e(e,t,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=Gt.HANDLE_RESULT),void 0===a&&(a=Gt.REJECT_ERROR),void 0===s&&(s=!1),this.name=e,this.hookPhase=t,this.hookOrder=n,this.criteriaMatchPath=r,this.reverseSort=i,this.getResultHandler=o,this.getErrorHandler=a,this.synchronous=s}return e}(),vr=function(e){return e.onBefore({},ce,{priority:-9999})},yr=function(e){return e.onBefore({},de,{priority:-1e4})},br={location:!0,relative:null,inherit:!1,notify:!0,reload:!1,custom:{},current:function(){return null},source:"unknown"},xr=function(){function t(e){this._transitionCount=0,this._eventTypes=[],this._registeredHooks={},this._criteriaPaths={},this._router=e,this.$view=e.viewService,this._deregisterHookFns={},this._pluginapi=f(ze(this),{},ze(this),["_definePathType","_defineEvent","_getPathTypes","_getEvents","getHooks"]),this._defineCorePaths(),this._defineCoreEvents(),this._registerCoreTransitionHooks()}return t.prototype.onCreate=function(e,t,n){},t.prototype.onBefore=function(e,t,n){},t.prototype.onStart=function(e,t,n){},t.prototype.onExit=function(e,t,n){},t.prototype.onRetain=function(e,t,n){},t.prototype.onEnter=function(e,t,n){},t.prototype.onFinish=function(e,t,n){},t.prototype.onSuccess=function(e,t,n){},t.prototype.onError=function(e,t,n){},t.prototype.dispose=function(e){wt(this._registeredHooks).forEach(function(e){return e.forEach(function(t){t._deregistered=!0,mt(e,t)})})},t.prototype.create=function(e,t){return new pn(e,t,this._router)},t.prototype._defineCoreEvents=function(){var t=e.TransitionHookPhase,n=Gt,r=this._criteriaPaths;this._defineEvent("onCreate",t.CREATE,0,r.to,!1,n.LOG_REJECTED_RESULT,n.THROW_ERROR,!0),this._defineEvent("onBefore",t.BEFORE,0,r.to),this._defineEvent("onStart",t.RUN,0,r.to),this._defineEvent("onExit",t.RUN,100,r.exiting,!0),this._defineEvent("onRetain",t.RUN,200,r.retained),this._defineEvent("onEnter",t.RUN,300,r.entering),this._defineEvent("onFinish",t.RUN,400,r.to),this._defineEvent("onSuccess",t.SUCCESS,0,r.to,!1,n.LOG_REJECTED_RESULT,n.LOG_ERROR,!0),this._defineEvent("onError",t.ERROR,0,r.to,!1,n.LOG_REJECTED_RESULT,n.LOG_ERROR,!0)},t.prototype._defineCorePaths=function(){var t=e.TransitionHookScope.STATE,n=e.TransitionHookScope.TRANSITION;this._definePathType("to",n),this._definePathType("from",n),this._definePathType("exiting",t),this._definePathType("retained",t),this._definePathType("entering",t)},t.prototype._defineEvent=function(e,t,n,r,i,o,a,s){void 0===i&&(i=!1),void 0===o&&(o=Gt.HANDLE_RESULT),void 0===a&&(a=Gt.REJECT_ERROR),void 0===s&&(s=!1);var l=new mr(e,t,n,r,i,o,a,s);this._eventTypes.push(l),N(this,this,l)},t.prototype._getEvents=function(e){return(Ge(e)?this._eventTypes.filter(function(t){return t.hookPhase===e}):this._eventTypes.slice()).sort(function(e,t){var n=e.hookPhase-t.hookPhase;return 0===n?e.hookOrder-t.hookOrder:n})},t.prototype._definePathType=function(e,t){this._criteriaPaths[e]={name:e,scope:t}},t.prototype._getPathTypes=function(){return this._criteriaPaths},t.prototype.getHooks=function(e){return this._registeredHooks[e]},t.prototype._registerCoreTransitionHooks=function(){var e=this._deregisterHookFns;e.addCoreResolves=Gn(this),e.ignored=vr(this),e.invalid=yr(this),e.redirectTo=Kn(this),e.onExit=Jn(this),e.onRetain=Qn(this),e.onEnter=tr(this),e.eagerResolve=rr(this),e.lazyResolve=or(this),e.loadViews=sr(this),e.activateViews=ur(this),e.updateGlobals=dr(this),e.updateUrl=pr(this),e.lazyLoad=gr(this)},t}(),wr=function(){function t(e){this.router=e,this.invalidCallbacks=[],this._defaultErrorHandler=function(e){e instanceof Error&&e.stack?(console.error(e),console.error(e.stack)):e instanceof It?(console.error(e.toString()),e.detail&&e.detail.stack&&console.error(e.detail.stack)):console.error(e)};var n=["current","$current","params","transition"],r=Object.keys(t.prototype).filter(Oe(gt(n)));f(ze(t.prototype),this,ze(this),r)}return Object.defineProperty(t.prototype,"transition",{get:function(){return this.router.globals.transition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"params",{get:function(){return this.router.globals.params},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"current",{get:function(){return this.router.globals.current},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"$current",{get:function(){return this.router.globals.$current},enumerable:!0,configurable:!0}),t.prototype.dispose=function(){this.defaultErrorHandler(d),this.invalidCallbacks=[]},t.prototype._handleInvalidTargetState=function(e,t){function n(){var e=l.dequeue();return void 0===e?It.invalid(t.error()).toPromise():at.$q.when(e(t,i,u)).then(c).then(function(e){return e||n()})}var r=this,i=tn.makeTargetState(e),o=this.router.globals,a=function(){return o.transitionHistory.peekTail()},s=a(),l=new Ot(this.invalidCallbacks.slice()),u=new cn(e).injector(),c=function(e){if(e instanceof Wt){var t=e;return t=r.target(t.identifier(),t.params(),t.options()),t.valid()?a()!==s?It.superseded().toPromise():r.transitionTo(t.identifier(),t.params(),t.options()):It.invalid(t.error()).toPromise()}};return n()},t.prototype.onInvalid=function(e){return this.invalidCallbacks.push(e),function(){mt(this.invalidCallbacks)(e)}.bind(this)},t.prototype.reload=function(e){return this.transitionTo(this.current,this.params,{reload:!Ge(e)||e,inherit:!1,notify:!1})},t.prototype.go=function(e,t,n){var r=m(n,{relative:this.$current,inherit:!0},br);return this.transitionTo(e,t,r)},t.prototype.target=function(e,t,n){if(void 0===n&&(n={}),Qe(n.reload)&&!n.reload.name)throw new Error("Invalid reload state object");var r=this.router.stateRegistry;if(n.reloadState=!0===n.reload?r.root():r.matcher.find(n.reload,n.relative),n.reload&&!n.reloadState)throw new Error("No such reload state '"+(Ze(n.reload)?n.reload:n.reload.name)+"'");var i=r.matcher.find(e,n.relative);return new Wt(e,i,t,n)},t.prototype.getCurrentPath=function(){var e=this,t=this.router.globals.successfulTransitions.peekTail();return t?t.treeChanges().to:function(){return[new en(e.router.stateRegistry.root())]}()},t.prototype.transitionTo=function(t,n,r){var i=this;void 0===n&&(n={}),void 0===r&&(r={});var o=this.router,a=o.globals;r=m(r,br),r=ft(r,{current:function(){return a.transition}});var s=this.target(t,n,r),l=this.getCurrentPath();if(!s.exists())return this._handleInvalidTargetState(l,s);if(!s.valid())return Ft(s.error());var u=function(t){return function(n){if(n instanceof It){var r=o.globals.lastStartedTransitionId===t.$id;if(n.type===e.RejectType.IGNORED)return r&&o.urlRouter.update(),at.$q.when(a.current);var s=n.detail;if(n.type===e.RejectType.SUPERSEDED&&n.redirected&&s instanceof Wt){var l=t.redirect(s);return l.run().catch(u(l))}if(n.type===e.RejectType.ABORTED)return r&&o.urlRouter.update(),at.$q.reject(n)}return i.defaultErrorHandler()(n),at.$q.reject(n)}},c=this.router.transitionService.create(l,s),d=c.run().catch(u(c));return Pt(d),ft(d,{transition:c})},t.prototype.is=function(e,t,n){n=m(n,{relative:this.$current});var r=this.router.stateRegistry.matcher.find(e,n.relative);if(Ge(r)){if(this.$current!==r)return!1;if(!t)return!0;var i=r.parameters({inherit:!0,matchingKeys:t});return Qt.equals(i,Qt.values(i,t),this.params)}},t.prototype.includes=function(e,t,n){n=m(n,{relative:this.$current});var r=Ze(e)&&He.fromString(e);if(r){if(!r.matches(this.$current.name))return!1;e=this.$current.name}var i=this.router.stateRegistry.matcher.find(e,n.relative),o=this.$current.includes;if(Ge(i)){if(!Ge(o[i.name]))return!1;if(!t)return!0;var a=i.parameters({inherit:!0,matchingKeys:t});return Qt.equals(a,Qt.values(a,t),this.params)}},t.prototype.href=function(e,t,n){n=m(n,{lossy:!0,inherit:!0,absolute:!1,relative:this.$current}),t=t||{};var r=this.router.stateRegistry.matcher.find(e,n.relative);if(!Ge(r))return null;n.inherit&&(t=this.params.$inherit(t,this.$current,r));var i=r&&n.lossy?r.navigable:r;return i&&void 0!==i.url&&null!==i.url?this.router.urlRouter.href(i.url,t,{absolute:n.absolute}):null},t.prototype.defaultErrorHandler=function(e){return this._defaultErrorHandler=e||this._defaultErrorHandler},t.prototype.get=function(e,t){var n=this.router.stateRegistry;return 0===arguments.length?n.get():n.get(e,t||this.$current)},t.prototype.lazyLoad=function(e,t){var n=this.get(e);if(!n||!n.lazyLoad)throw new Error("Can not lazy load "+e);var r=this.getCurrentPath(),i=tn.makeTargetState(r);return t=t||this.router.transitionService.create(r,i),ue(t,n)},t}(),_r={when:function(e){return new Promise(function(t,n){return t(e)})},reject:function(e){return new Promise(function(t,n){n(e)})},defer:function(){var e={};return e.promise=new Promise(function(t,n){e.resolve=t,e.reject=n}),e},all:function(e){if(et(e))return Promise.all(e);if(Qe(e)){var t=Object.keys(e).map(function(t){return e[t].then(function(e){return{key:t,val:e}})});return _r.all(t).then(function(e){return e.reduce(function(e,t){return e[t.key]=t.val,e},{})})}}},Cr={},kr={get:function(e){return Cr[e]},has:function(e){return null!=kr.get(e)},invoke:function(e,t,n){var r=ft({},Cr,n||{}),i=kr.annotate(e),o=Dt(function(e){return r.hasOwnProperty(e)},function(e){return"DI can't find injectable: '"+e+"'"}),a=i.filter(o).map(function(e){return r[e]});return Xe(e)?e.apply(t,a):e.slice(-1)[0].apply(t,a)},annotate:function(e){if(!u(e))throw new Error("Not an injectable function: "+e);if(e&&e.$inject)return e.$inject;if(et(e))return e.slice(0,-1);var t=e.toString().replace(/((\/\/.*$)|(\/\*[\s\S]*?\*\/))/gm,"");return t.slice(t.indexOf("(")+1,t.indexOf(")")).match(/([^\s,]+)/g)||[]}},Sr=function(e){return function(t){if(!t)return["",""];var n=t.indexOf(e);return-1===n?[t,""]:[t.substr(0,n),t.substr(n+1)]}},$r=Sr("#"),Mr=Sr("?"),Tr=Sr("="),Dr=function(e){return e?e.replace(/^#/,""):""},Er=function(e,t){var n=t[0],r=t[1];return e.hasOwnProperty(n)?et(e[n])?e[n].push(r):e[n]=[e[n],r]:e[n]=r,e},Lr=function(e){return e.split("&").filter(c).map(Tr).reduce(Er,{})},Ar=function(e){var t=e.path(),n=e.search(),r=e.hash(),i=Object.keys(n).map(function(e){var t=n[e];return(et(t)?t:[t]).map(function(t){return e+"="+t})}).reduce(kt,[]).join("&");return t+(i?"?"+i:"")+(r?"#"+r:"")},Rr=function(){function e(e,t){var n=this;this.fireAfterUpdate=t,this._listener=function(e){return n._listeners.forEach(function(t){return t(e)})},this._listeners=[],this.hash=function(){return fe(n._get()).hash},this.path=function(){return fe(n._get()).path},this.search=function(){return Lr(fe(n._get()).search)},this._location=window&&window.location,this._history=window&&window.history}return e.prototype.url=function(e,t){if(void 0===t&&(t=!0),Ge(e)&&e!==this._get()&&(this._set(null,null,e,t),this.fireAfterUpdate)){var n=ft(new Event("locationchange"),{url:e});this._listeners.forEach(function(e){return e(n)})}return Ar(this)},e.prototype.onChange=function(e){var t=this;return this._listeners.push(e),function(){return mt(t._listeners,e)}},e.prototype.dispose=function(e){yt(this._listeners)},e}(),Pr=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Fr=function(e){function t(t){var n=e.call(this,t,!1)||this;return window.addEventListener("hashchange",n._listener,!1),n}return Pr(t,e),t.prototype._get=function(){return Dr(this._location.hash)},t.prototype._set=function(e,t,n,r){this._location.hash=n},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t),window.removeEventListener("hashchange",this._listener)},t}(Rr),Or=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),Nr=function(e){function t(t){return e.call(this,t,!0)||this}return Or(t,e),t.prototype._get=function(){return this._url},t.prototype._set=function(e,t,n,r){this._url=n},t}(Rr),Ir=function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e[n]=t[n])};return function(t,n){function r(){this.constructor=t}e(t,n),t.prototype=null===n?Object.create(n):(r.prototype=n.prototype,new r)}}(),jr=function(e){function t(t){var n=e.call(this,t,!0)||this;return n._config=t.urlService.config,window.addEventListener("popstate",n._listener,!1),n}return Ir(t,e),t.prototype._get=function(){var e=this._location,t=e.pathname,n=e.hash,r=e.search;return r=Mr(r)[1],n=$r(n)[1],t+(r?"?"+r:"")+(n?"$"+r:"")},t.prototype._set=function(e,t,n,r){var i=this,o=i._config,a=i._history,s=o.baseHref()+n;r?a.replaceState(e,t,s):a.pushState(e,t,s)},t.prototype.dispose=function(t){e.prototype.dispose.call(this,t),window.removeEventListener("popstate",this._listener)},t}(Rr),Yr=function(){function e(){var e=this;this._baseHref="",this._port=80,this._protocol="http",this._host="localhost",this._hashPrefix="",this.port=function(){return e._port},this.protocol=function(){return e._protocol},this.host=function(){return e._host},this.baseHref=function(){return e._baseHref},this.html5Mode=function(){return!1},this.hashPrefix=function(t){return Ge(t)?e._hashPrefix=t:e._hashPrefix},this.dispose=d}return e}(),zr=function(){function e(e,t){void 0===t&&(t=!1),this._isHtml5=t,this._baseHref=void 0,this._hashPrefix=""}return e.prototype.port=function(){return location.port?Number(location.port):"https"===this.protocol()?443:80},e.prototype.protocol=function(){return location.protocol.replace(/:/g,"")},e.prototype.host=function(){return location.host},e.prototype.html5Mode=function(){return this._isHtml5},e.prototype.hashPrefix=function(e){return Ge(e)?this._hashPrefix=e:this._hashPrefix},e.prototype.baseHref=function(e){return Ge(e)?this._baseHref=e:this._baseHref||this.applyDocumentBaseHref()},e.prototype.applyDocumentBaseHref=function(){var e=document.getElementsByTagName("base");return this._baseHref=e.length?e[0].href.substr(location.origin.length):""},e.prototype.dispose=function(){},e}(),Hr=pe("vanilla.hashBangLocation",!1,Fr,zr),Vr=pe("vanilla.pushStateLocation",!0,jr,zr),Br=pe("vanilla.memoryLocation",!1,Nr,Yr),Wr=function(){function e(){}return e.prototype.dispose=function(e){},e}(),Ur=Object.freeze({fromJson:lt,toJson:ut,copy:ct,forEach:dt,extend:ft,equals:pt,identity:c,noop:d,createProxyFunctions:f,inherit:ht,inArray:gt,_inArray:p,removeFrom:mt,_removeFrom:h,pushTo:vt,_pushTo:g,deregAll:yt,defaults:m,mergeR:bt,ancestors:v,pick:y,omit:b,pluck:x,filter:w,find:_,mapObj:xt,map:C,values:wt,allTrueR:_t,anyTrueR:Ct,unnestR:kt,flattenR:St,pushR:k,uniqR:$t,unnest:Mt,flatten:Tt,assertPredicate:Dt,assertMap:Et,assertFn:S,pairs:Lt,arrayTuples:$,applyPairs:M,tail:T,_extend:L,sortBy:At,composeSort:Rt,silenceUncaughtInPromise:Pt,silentRejection:Ft,notImplemented:ot,services:at,Glob:He,curry:n,compose:r,pipe:i,prop:Re,propEq:Pe,parse:Fe,not:Oe,and:o,or:a,all:Ne,any:Ie,is:je,eq:Ye,val:ze,invoke:s,pattern:l,isUndefined:Ue,isDefined:Ge,isNull:qe,isNullOrUndefined:Ke,isFunction:Xe,isNumber:Je,isString:Ze,isObject:Qe,isArray:et,isDate:tt,isRegExp:nt,isState:rt,isInjectable:u,isPromise:it,Queue:Ot,maxLength:B,padString:W,kebobString:U,functionToString:G,fnToString:q,stringify:K,beforeAfterSubstr:mn,splitOnDelim:X,joinNeighborsR:J,get Category(){return e.Category},Trace:Vt,trace:Bt,get DefType(){return e.DefType},Param:Qt,ParamTypes:vn,StateParams:yn,ParamType:Xt,PathNode:en,PathUtils:tn,resolvePolicies:on,defaultResolvePolicy:nn,Resolvable:rn,NATIVE_INJECTOR_TOKEN:un,ResolveContext:cn,resolvablesBuilder:re,StateBuilder:Cn,StateObject:Ve,StateMatcher:kn,StateQueueManager:Sn,StateRegistry:$n,StateService:wr,TargetState:Wt,get TransitionHookPhase(){return e.TransitionHookPhase},get TransitionHookScope(){return e.TransitionHookScope},HookBuilder:Kt,matchState:O,RegisteredHook:qt,makeEvent:N,get RejectType(){return e.RejectType},Rejection:It,Transition:pn,TransitionHook:Gt,TransitionEventType:mr,defaultTransOpts:br,TransitionService:xr,UrlMatcher:Dn,UrlMatcherFactory:En,UrlRouter:Fn,UrlRuleFactory:Ln,BaseUrlRule:Rn,UrlService:Bn,ViewService:On,UIRouterGlobals:Nn,UIRouter:Un,$q:_r,$injector:kr,BaseLocationServices:Rr,HashLocationService:Fr,MemoryLocationService:Nr,PushStateLocationService:jr,MemoryLocationConfig:Yr,BrowserLocationConfig:zr,splitHash:$r,splitQuery:Mr,splitEqual:Tr,trimHashVal:Dr,keyValsToObjectR:Er,getParams:Lr,parseUrl:fe,buildUrl:Ar,locationPluginFactory:pe,servicesPlugin:he,hashLocationPlugin:Hr,pushStateLocationPlugin:Vr,memoryLocationPlugin:Br,UIRouterPluginBase:Wr}),Gr=angular,qr=t&&t.module?t:Gr,Kr=function(e,t){return e.reduce(function(e,n){return e||Ge(t[n])},!1)},Xr=0,Jr=function(){function e(e,t,n){var r=this;this.path=e,this.viewDecl=t,this.factory=n,this.$id=Xr++,this.loaded=!1,this.getTemplate=function(e,t){return r.component?r.factory.makeComponentTemplate(e,t,r.component,r.viewDecl.bindings):r.template}}return e.prototype.load=function(){var e=this,t=at.$q,n=new cn(this.path),r=this.path.reduce(function(e,t){return ft(e,t.paramValues)},{}),i={template:t.when(this.factory.fromConfig(this.viewDecl,r,n)),controller:t.when(this.getController(n))};return t.all(i).then(function(t){return Bt.traceViewServiceEvent("Loaded",e),e.controller=t.controller,ft(e,t.template),e})},e.prototype.getController=function(e){var t=this.viewDecl.controllerProvider;if(!u(t))return this.viewDecl.controller;var n=at.$injector.annotate(t),r=et(t)?T(t):t;return new rn("",r,n).get(e)},e}(),Zr=function(){function e(){var e=this;this._useHttp=qr.version.minor<3,this.$get=["$http","$templateCache","$injector",function(t,n,r){return e.$templateRequest=r.has&&r.has("$templateRequest")&&r.get("$templateRequest"),e.$http=t,e.$templateCache=n,e}]}return e.prototype.useHttpService=function(e){this._useHttp=e},e.prototype.fromConfig=function(e,t,n){var r=function(e){return at.$q.when(e).then(function(e){return{template:e}})},i=function(e){return at.$q.when(e).then(function(e){return{component:e}})};return Ge(e.template)?r(this.fromString(e.template,t)):Ge(e.templateUrl)?r(this.fromUrl(e.templateUrl,t)):Ge(e.templateProvider)?r(this.fromProvider(e.templateProvider,t,n)):Ge(e.component)?i(e.component):Ge(e.componentProvider)?i(this.fromComponentProvider(e.componentProvider,t,n)):r("<ui-view></ui-view>")},e.prototype.fromString=function(e,t){return Xe(e)?e(t):e},e.prototype.fromUrl=function(e,t){return Xe(e)&&(e=e(t)),null==e?null:this._useHttp?this.$http.get(e,{cache:this.$templateCache,headers:{Accept:"text/html"}}).then(function(e){return e.data}):this.$templateRequest(e)},e.prototype.fromProvider=function(e,t,n){var r=at.$injector.annotate(e),i=et(e)?T(e):e;return new rn("",i,r).get(n)},e.prototype.fromComponentProvider=function(e,t,n){var r=at.$injector.annotate(e),i=et(e)?T(e):e;return new rn("",i,r).get(n)},e.prototype.makeComponentTemplate=function(e,t,n,r){r=r||{};var i=qr.version.minor>=3?"::":"",o=function(e){var t=U(e);return/^(x|data)-/.exec(t)?"x-"+t:t},a=function(n){var a=n.name,s=n.type,l=o(a);if(e.attr(l)&&!r[a])return l+"='"+e.attr(l)+"'";var u=r[a]||a;if("@"===s)return l+"='{{"+i+"$resolve."+u+"}}'";if("&"===s){var c=t.getResolvable(u),d=c&&c.data,f=d&&at.$injector.annotate(d)||[];return l+"='$resolve."+u+(et(d)?"["+(d.length-1)+"]":"")+"("+f.join(",")+")'"}return l+"='"+i+"$resolve."+u+"'"},s=ve(n).map(a).join(" "),l=o(n);return"<"+l+" "+s+"></"+l+">"},e}(),Qr=function(e){return ei(Qe(e.bindToController)?e.bindToController:e.scope)},ei=function(e){return Object.keys(e||{}).map(function(t){return[t,/^([=<@&])[?]?(.*)/.exec(e[t])]}).filter(function(e){return Ge(e)&&et(e[1])}).map(function(e){return{name:e[1][2]||e[0],type:e[1][1]}})},ti=function(){function e(t,n){this.stateRegistry=t,this.stateService=n,f(ze(e.prototype),this,ze(this))}return e.prototype.decorator=function(e,t){return this.stateRegistry.decorator(e,t)||this},e.prototype.state=function(e,t){return Qe(e)?t=e:t.name=e,this.stateRegistry.register(t),this},e.prototype.onInvalid=function(e){return this.stateService.onInvalid(e)},e}(),ni=function(e){return function(t,n){function r(e,t){var n=new cn(e.treeChanges(o)),r=ft(gi(n),{$state$:t,$transition$:e});return at.$injector.invoke(i,this,r)}var i=t[e],o="onExit"===e?"from":"to";return i?r:void 0}},ri=function(){function e(e){this._urlListeners=[],this.$locationProvider=e;var t=ze(e);f(t,this,t,["hashPrefix"])}return e.prototype.dispose=function(){},e.prototype.onChange=function(e){var t=this;return this._urlListeners.push(e),function(){return mt(t._urlListeners)(e)}},e.prototype.html5Mode=function(){var e=this.$locationProvider.html5Mode();return(e=Qe(e)?e.enabled:e)&&this.$sniffer.history},e.prototype.url=function(e,t,n){return void 0===t&&(t=!1),e&&this.$location.url(e),t&&this.$location.replace(),n&&this.$location.state(n),this.$location.url()},e.prototype._runtimeServices=function(e,t,n,r){var i=this;this.$location=t,this.$sniffer=n,e.$on("$locationChangeSuccess",function(e){return i._urlListeners.forEach(function(t){return t(e)})});var o=ze(t),a=ze(r);f(o,this,o,["replace","path","search","hash"]),f(o,this,o,["port","protocol","host"]),f(a,this,a,["baseHref"])},e.monkeyPatchPathParameterType=function(e){var t=e.urlMatcherFactory.type("path");t.encode=function(e){return null!=e?e.toString().replace(/(~|\/)/g,function(e){return{"~":"~~","/":"~2F"}[e]}):e},t.decode=function(e){return null!=e?e.toString().replace(/(~~|~2F)/g,function(e){return{"~~":"~","~2F":"/"}[e]}):e}},e}(),ii=function(){function e(e){this._router=e,this._urlRouter=e.urlRouter}return e.prototype.$get=function(){var e=this._urlRouter;return e.update(!0),e.interceptDeferred||e.listen(),e},e.prototype.rule=function(e){var t=this;if(!Xe(e))throw new Error("'rule' must be a function");var n=new Rn(function(){return e(at.$injector,t._router.locationService)},c);return this._urlRouter.rule(n),this},e.prototype.otherwise=function(e){var t=this,n=this._urlRouter;if(Ze(e))n.otherwise(e);else{if(!Xe(e))throw new Error("'rule' must be a string or function");n.otherwise(function(){return e(at.$injector,t._router.locationService)})}return this},e.prototype.when=function(t,n){return(et(n)||Xe(n))&&(n=e.injectableHandler(this._router,n)),this._urlRouter.when(t,n),this},e.injectableHandler=function(e,t){return function(n){return at.$injector.invoke(t,null,{$match:n,$stateParams:e.globals.params})}},e.prototype.deferIntercept=function(e){this._urlRouter.deferIntercept(e)},e}();qr.module("ui.router.angular1",[]);var oi=qr.module("ui.router.init",[]),ai=qr.module("ui.router.util",["ng","ui.router.init"]),si=qr.module("ui.router.router",["ui.router.util"]),li=qr.module("ui.router.state",["ui.router.router","ui.router.util","ui.router.angular1"]),ui=qr.module("ui.router",["ui.router.init","ui.router.state","ui.router.angular1"]),ci=(qr.module("ui.router.compat",["ui.router"]),null);ye.$inject=["$locationProvider"];var di=function(e){return["$uiRouterProvider",function(t){var n=t.router[e];return n.$get=function(){return n},n}]};be.$inject=["$injector","$q","$uiRouter"];var fi=function(e){return e.urlRouterProvider=new ii(e)},pi=function(){return ft(ci.stateProvider,{$get:function(){return ci.stateService}})};xe.$inject=["$rootScope"],oi.provider("$uiRouter",ye),si.provider("$urlRouter",["$uiRouterProvider",fi]),ai.provider("$urlService",di("urlService")),ai.provider("$urlMatcherFactory",["$uiRouterProvider",function(){return ci.urlMatcherFactory}]),ai.provider("$templateFactory",function(){return new Zr}),li.provider("$stateRegistry",di("stateRegistry")),li.provider("$uiRouterGlobals",di("globals")),li.provider("$transitions",di("transitionService")),li.provider("$state",["$uiRouterProvider",pi]),li.factory("$stateParams",["$uiRouter",function(e){return e.globals.params}]),ui.factory("$view",function(){return ci.viewService}),ui.service("$trace",function(){return Bt}),ui.run(xe),ai.run(["$urlMatcherFactory",function(e){}]),li.run(["$state",function(e){}]),si.run(["$urlRouter",function(e){}]),oi.run(be);var hi,gi=function(e){return e.getTokens().filter(Ze).map(function(t){var n=e.getResolvable(t);return[t,"NOWAIT"===e.getPolicy(n).async?n.promise:n.data]}).reduce(M,{})};hi=["$uiRouter","$timeout",function(e,t){var n=e.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){function s(){var e=p();d&&d(),c&&(d=c.$$addStateInfo(e.uiState,e.uiStateParams)),null!=e.href&&o.$set(u.attr,e.href)}var l,u=ke(i),c=a[1]||a[0],d=null,f={},p=function(){return Ce(n,i,f)},h=we(o.uiSref);f.uiState=h.state,f.uiStateOpts=o.uiSrefOpts?r.$eval(o.uiSrefOpts):{},h.paramExpr&&(r.$watch(h.paramExpr,function(e){f.uiStateParams=ft({},e),s()},!0),f.uiStateParams=ft({},r.$eval(h.paramExpr))),s(),r.$on("$destroy",e.stateRegistry.onStatesChanged(s)),r.$on("$destroy",e.transitionService.onSuccess({},s)),u.clickable&&(l=Se(i,n,t,u,p),Me(i,r,l,f.uiStateOpts))}}}];var mi;mi=["$uiRouter","$timeout",function(e,t){var n=e.stateService;return{restrict:"A",require:["?^uiSrefActive","?^uiSrefActiveEq"],link:function(r,i,o,a){function s(){var e=h();f&&f(),c&&(f=c.$$addStateInfo(e.uiState,e.uiStateParams)),null!=e.href&&o.$set(u.attr,e.href)}var l,u=ke(i),c=a[1]||a[0],f=null,p={},h=function(){return Ce(n,i,p)},g=["uiState","uiStateParams","uiStateOpts"],m=g.reduce(function(e,t){return e[t]=d,e},{});g.forEach(function(e){p[e]=o[e]?r.$eval(o[e]):null,o.$observe(e,function(t){m[e](),m[e]=r.$watch(t,function(t){p[e]=t,s()},!0)})}),s(),r.$on("$destroy",e.stateRegistry.onStatesChanged(s)),r.$on("$destroy",e.transitionService.onSuccess({},s)),u.clickable&&(l=Se(i,n,t,u,h),Me(i,r,l,p.uiStateOpts))}}}];var vi;vi=["$state","$stateParams","$interpolate","$uiRouter",function(e,t,n,r){return{restrict:"A",controller:["$scope","$element","$attrs",function(t,i,o){function a(e){e.promise.then(l)}function s(t,n,r){var o={state:e.get(t,_e(i))||{name:t},params:n,activeClass:r};return f.push(o),function(){mt(f)(o)}}function l(){var n=function(e){return e.split(/\s/).filter(c)},r=function(e){return e.map(function(e){return e.activeClass}).map(n).reduce(kt,[])},o=r(f).concat(n(u)).reduce($t,[]),a=r(f.filter(function(t){return e.includes(t.state.name,t.params)})),s=!!f.filter(function(t){return e.is(t.state.name,t.params)}).length?n(u):[],l=a.concat(s).reduce($t,[]),d=o.filter(function(e){return!gt(l,e)});t.$evalAsync(function(){l.forEach(function(e){return i.addClass(e)}),d.forEach(function(e){return i.removeClass(e)})})}var u,d,f=[];u=n(o.uiSrefActiveEq||"",!1)(t);try{d=t.$eval(o.uiSrefActive)}catch(e){}d=d||n(o.uiSrefActive||"",!1)(t),Qe(d)&&dt(d,function(e,n){if(Ze(e)){var r=we(e);s(r.state,t.$eval(r.paramExpr),n)}}),this.$$addStateInfo=function(e,t){if(!(Qe(d)&&f.length>0)){var n=s(e,t,d);return l(),n}},t.$on("$stateChangeSuccess",l),t.$on("$destroy",r.transitionService.onStart({},a)),r.globals.transition&&a(r.globals.transition),l()}]}}],qr.module("ui.router.state").directive("uiSref",hi).directive("uiSrefActive",vi).directive("uiSrefActiveEq",vi).directive("uiState",mi),Te.$inject=["$state"],De.$inject=["$state"],qr.module("ui.router.state").filter("isState",Te).filter("includedByState",De);var yi;yi=["$view","$animate","$uiViewScroll","$interpolate","$q",function(e,t,n,r,i){function o(e,n){return{enter:function(e,n,r){qr.version.minor>2?t.enter(e,null,n).then(r):t.enter(e,null,n,r)},leave:function(e,n){qr.version.minor>2?t.leave(e).then(n):t.leave(e,n)}}}function a(e,t){return e===t}var s={$cfg:{viewDecl:{$context:e._pluginapi._rootViewContext()}},$uiView:{}},l={count:0,restrict:"ECA",terminal:!0,priority:400,transclude:"element",compile:function(t,u,c){return function(t,u,d){function f(e){(!e||e instanceof Jr)&&(a(_,e)||(Bt.traceUIViewConfigUpdated(S,e&&e.viewDecl&&e.viewDecl.$context),_=e,h(e)))}function p(){if(g&&(Bt.traceUIViewEvent("Removing (previous) el",g.data("$uiView")),g.remove(),g=null),v&&(Bt.traceUIViewEvent("Destroying scope",S),v.$destroy(),v=null),m){var e=m.data("$uiViewAnim");Bt.traceUIViewEvent("Animate out",e),w.leave(m,function(){e.$$animLeave.resolve(),g=null}),g=m,m=null}}function h(e){var r=t.$new(),o=i.defer(),a=i.defer(),s={$cfg:e,$uiView:S},l={$animEnter:o.promise,$animLeave:a.promise,$$animLeave:a};r.$emit("$viewContentLoading",k);var d=c(r,function(e){e.data("$uiViewAnim",l),e.data("$uiView",s),w.enter(e,u,function(){o.resolve(),v&&v.$emit("$viewContentAnimationEnded"),(Ge(x)&&!x||t.$eval(x))&&n(e)}),p()});m=d,(v=r).$emit("$viewContentLoaded",e||_),v.$eval(b)}var g,m,v,y,b=d.onload||"",x=d.autoscroll,w=o(d,t),_=void 0,C=u.inheritedData("$uiView")||s,k=r(d.uiView||d.name||"")(t)||"$default",S={$type:"ng1",id:l.count++,name:k,fqn:C.$uiView.fqn?C.$uiView.fqn+"."+k:k,config:null,configUpdated:f,get creationContext(){var e=Fe("$cfg.viewDecl.$context")(C),t=Fe("$uiView.creationContext")(C);return e||t}};Bt.traceUIViewEvent("Linking",S),u.data("$uiView",{$uiView:S}),h(),y=e.registerUIView(S),t.$on("$destroy",function(){Bt.traceUIViewEvent("Destroying/Unregistering",S),y()})}}};return l}],Ee.$inject=["$compile","$controller","$transitions","$view","$q","$timeout"];var bi="function"==typeof qr.module("ui.router").component,xi=0;qr.module("ui.router.state").directive("uiView",yi),qr.module("ui.router.state").directive("uiView",Ee),qr.module("ui.router.state").provider("$uiViewScroll",Ae),e.core=Ur,e.default="ui.router",e.fromJson=lt,e.toJson=ut,e.copy=ct,e.forEach=dt,e.extend=ft,e.equals=pt,e.identity=c,e.noop=d,e.createProxyFunctions=f,e.inherit=ht,e.inArray=gt,e._inArray=p,e.removeFrom=mt,e._removeFrom=h,e.pushTo=vt,e._pushTo=g,e.deregAll=yt,e.defaults=m,e.mergeR=bt,e.ancestors=v,e.pick=y,e.omit=b,e.pluck=x,e.filter=w,e.find=_,e.mapObj=xt,e.map=C,e.values=wt,e.allTrueR=_t,e.anyTrueR=Ct,e.unnestR=kt,e.flattenR=St,e.pushR=k,e.uniqR=$t,e.unnest=Mt,e.flatten=Tt,e.assertPredicate=Dt,e.assertMap=Et,e.assertFn=S,e.pairs=Lt,e.arrayTuples=$,e.applyPairs=M,e.tail=T,e._extend=L,e.sortBy=At,e.composeSort=Rt,e.silenceUncaughtInPromise=Pt,e.silentRejection=Ft,e.notImplemented=ot,e.services=at,e.Glob=He,e.curry=n,e.compose=r,e.pipe=i,e.prop=Re,e.propEq=Pe,e.parse=Fe,e.not=Oe,e.and=o,e.or=a,e.all=Ne,e.any=Ie,e.is=je,e.eq=Ye,e.val=ze,e.invoke=s,e.pattern=l,e.isUndefined=Ue,e.isDefined=Ge,e.isNull=qe,e.isNullOrUndefined=Ke,e.isFunction=Xe,e.isNumber=Je,e.isString=Ze,e.isObject=Qe,e.isArray=et,e.isDate=tt,e.isRegExp=nt,e.isState=rt,e.isInjectable=u,e.isPromise=it,e.Queue=Ot,e.maxLength=B,e.padString=W,e.kebobString=U,e.functionToString=G,e.fnToString=q,e.stringify=K,e.beforeAfterSubstr=mn,e.splitOnDelim=X,e.joinNeighborsR=J,e.Trace=Vt,e.trace=Bt,e.Param=Qt,e.ParamTypes=vn,e.StateParams=yn,e.ParamType=Xt,e.PathNode=en,e.PathUtils=tn,e.resolvePolicies=on,e.defaultResolvePolicy=nn,e.Resolvable=rn,e.NATIVE_INJECTOR_TOKEN=un,e.ResolveContext=cn,e.resolvablesBuilder=re,e.StateBuilder=Cn,e.StateObject=Ve,e.StateMatcher=kn,e.StateQueueManager=Sn,e.StateRegistry=$n,e.StateService=wr,e.TargetState=Wt,e.HookBuilder=Kt,e.matchState=O,e.RegisteredHook=qt,e.makeEvent=N,e.Rejection=It,e.Transition=pn,e.TransitionHook=Gt,e.TransitionEventType=mr,e.defaultTransOpts=br,e.TransitionService=xr,e.UrlMatcher=Dn,e.UrlMatcherFactory=En,e.UrlRouter=Fn,e.UrlRuleFactory=Ln,e.BaseUrlRule=Rn,e.UrlService=Bn,e.ViewService=On,e.UIRouterGlobals=Nn,e.UIRouter=Un,e.$q=_r,e.$injector=kr,e.BaseLocationServices=Rr,e.HashLocationService=Fr,e.MemoryLocationService=Nr,e.PushStateLocationService=jr,e.MemoryLocationConfig=Yr,e.BrowserLocationConfig=zr,e.splitHash=$r,e.splitQuery=Mr,e.splitEqual=Tr,e.trimHashVal=Dr,e.keyValsToObjectR=Er,e.getParams=Lr,e.parseUrl=fe,e.buildUrl=Ar,e.locationPluginFactory=pe,e.servicesPlugin=he,e.hashLocationPlugin=Hr,e.pushStateLocationPlugin=Vr,e.memoryLocationPlugin=Br,e.UIRouterPluginBase=Wr,e.watchDigests=xe,e.getLocals=gi,e.getNg1ViewConfigFactory=ge,e.ng1ViewsBuilder=me,e.Ng1ViewConfig=Jr,e.StateProvider=ti,e.UrlRouterProvider=ii,Object.defineProperty(e,"__esModule",{value:!0})}),function(){"use strict";angular.module("base64",[]).constant("$base64",function(){function e(e,t){var n=o.indexOf(e.charAt(t));if(-1==n)throw"Cannot decode base64";return n}function t(t){var n,r,o,a=(t=""+t).length;if(0==a)return t;if(a%4!=0)throw"Cannot decode base64";n=0,t.charAt(a-1)==i&&(n=1,t.charAt(a-2)==i&&(n=2),a-=4);var s=[];for(r=0;r<a;r+=4)o=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6|e(t,r+3),s.push(String.fromCharCode(o>>16,o>>8&255,255&o));switch(n){case 1:o=e(t,r)<<18|e(t,r+1)<<12|e(t,r+2)<<6,s.push(String.fromCharCode(o>>16,o>>8&255));break;case 2:o=e(t,r)<<18|e(t,r+1)<<12,s.push(String.fromCharCode(o>>16))}return s.join("")}function n(e,t){var n=e.charCodeAt(t);if(n>255)throw"INVALID_CHARACTER_ERR: DOM Exception 5";return n}function r(e){if(1!=arguments.length)throw"SyntaxError: Not enough arguments";var t,r,a=[],s=(e=""+e).length-e.length%3;if(0==e.length)return e;for(t=0;t<s;t+=3)r=n(e,t)<<16|n(e,t+1)<<8|n(e,t+2),a.push(o.charAt(r>>18)),a.push(o.charAt(r>>12&63)),a.push(o.charAt(r>>6&63)),a.push(o.charAt(63&r));switch(e.length-s){case 1:r=n(e,t)<<16,a.push(o.charAt(r>>18)+o.charAt(r>>12&63)+i+i);break;case 2:r=n(e,t)<<16|n(e,t+1)<<8,a.push(o.charAt(r>>18)+o.charAt(r>>12&63)+o.charAt(r>>6&63)+i)}return a.join("")}var i="=",o="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/";return{encode:r,decode:t}}())}(),function(){"use strict";angular.module("nvd3",[]).directive("nvd3",["nvd3Utils",function(e){return{restrict:"AE",scope:{data:"=",options:"=",api:"=?",events:"=?",config:"=?",onReady:"&?"},link:function(t,n,r){function i(e,n,r){e&&n&&angular.forEach(e,function(a,s){"_"===s[0]||("dispatch"===s?(void 0!==n[s]&&null!==n[s]||t._config.extended&&(n[s]={}),o(a,n[s])):"tooltip"===s?(void 0!==n[s]&&null!==n[s]||t._config.extended&&(n[s]={}),i(e[s],n[s],r)):"contentGenerator"===s?n[s]&&e[s](n[s]):-1===["axis","clearHighlights","defined","highlightPoint","nvPointerEventsClass","options","rangeBand","rangeBands","scatter","open","close","node"].indexOf(s)&&(void 0===n[s]||null===n[s]?t._config.extended&&(n[s]=a()):e[s](n[s])))})}function o(e,n){e&&n&&angular.forEach(e,function(r,i){void 0===n[i]||null===n[i]?t._config.extended&&(n[i]=r.on):e.on(i+"._",n[i])})}function a(r){var i=e.deepExtend(l(r),t.options[r]||{});t._config.extended&&(t.options[r]=i);var o=angular.element("<div></div>").html(i.html||"").addClass(r).addClass(i.className).removeAttr("style").css(i.css);i.html||o.text(i.text),i.enable&&("title"===r?n.prepend(o):"subtitle"===r?angular.element(n[0].querySelector(".title")).after(o):"caption"===r&&n.append(o))}function s(){var r=e.deepExtend({classes:{"with-3d-shadow":!0,"with-transitions":!0,gallery:!1},css:{}},t.options.styles||{});t._config.extended&&(t.options.styles=r),angular.forEach(r.classes,function(e,t){e?n.addClass(t):n.removeClass(t)}),n.removeAttr("style").css(r.css)}function l(e){switch(e){case"title":return{enable:!1,text:"Write Your Title",className:"h4",css:{width:t.options.chart.width+"px",textAlign:"center"}};case"subtitle":return{enable:!1,text:"Write Your Subtitle",css:{width:t.options.chart.width+"px",textAlign:"center"}};case"caption":return{enable:!1,text:"Figure 1. Write Your Caption text.",css:{width:t.options.chart.width+"px",textAlign:"center"}}}}function u(e,n){e!==n&&(t._config.disabled||(t._config.refreshDataOnly?t.api.update():t.api.refresh()))}var c={extended:!1,visible:!0,disabled:!1,refreshDataOnly:!0,deepWatchOptions:!0,deepWatchData:!0,deepWatchDataDepth:2,debounce:10,debounceImmediate:!0};t.isReady=!1,t._config=angular.extend(c,t.config),t.api={refresh:function(){t.api.updateWithOptions(t.options),t.isReady=!0},refreshWithTimeout:function(e){setTimeout(function(){t.api.refresh()},e)},update:function(){t.chart&&t.svg?t.svg.datum(t.data).call(t.chart):t.api.refresh()},updateWithTimeout:function(e){setTimeout(function(){t.api.update()},e)},updateWithOptions:function(n){t.api.clearElement(),!1!==angular.isDefined(n)&&t._config.visible&&(t.chart=nv.models[n.chart.type](),t.chart.id=Math.random().toString(36).substr(2,15),angular.forEach(t.chart,function(e,r){"_"===r[0]||["clearHighlights","highlightPoint","id","options","resizeHandler","state","open","close","tooltipContent"].indexOf(r)>=0||("dispatch"===r?(void 0!==n.chart[r]&&null!==n.chart[r]||t._config.extended&&(n.chart[r]={}),o(t.chart[r],n.chart[r])):["bars","bars1","bars2","boxplot","bullet","controls","discretebar","distX","distY","interactiveLayer","legend","lines","lines1","lines2","multibar","pie","scatter","scatters1","scatters2","sparkline","stack1","stack2","sunburst","tooltip","x2Axis","xAxis","y1Axis","y2Axis","y3Axis","y4Axis","yAxis","yAxis1","yAxis2"].indexOf(r)>=0||"stacked"===r&&"stackedAreaChart"===n.chart.type?(void 0!==n.chart[r]&&null!==n.chart[r]||t._config.extended&&(n.chart[r]={}),i(t.chart[r],n.chart[r],n.chart.type)):"focusHeight"===r&&"lineChart"===n.chart.type||"focusHeight"===r&&"lineWithFocusChart"===n.chart.type||("xTickFormat"!==r&&"yTickFormat"!==r||"lineWithFocusChart"!==n.chart.type)&&("tooltips"===r&&"boxPlotChart"===n.chart.type||("tooltipXContent"!==r&&"tooltipYContent"!==r||"scatterChart"!==n.chart.type)&&("x"!==r&&"y"!==r||"forceDirectedGraph"!==n.chart.type)&&(void 0===n.chart[r]||null===n.chart[r]?t._config.extended&&(n.chart[r]="barColor"===r?e()():e()):t.chart[r](n.chart[r]))))}),"sunburstChart"===n.chart.type?t.api.updateWithData(angular.copy(t.data)):t.api.updateWithData(t.data),(n.title||t._config.extended)&&a("title"),(n.subtitle||t._config.extended)&&a("subtitle"),(n.caption||t._config.extended)&&a("caption"),(n.styles||t._config.extended)&&s(),nv.addGraph(function(){if(t.chart)return t.chart.resizeHandler&&t.chart.resizeHandler.clear(),t.chart.resizeHandler=nv.utils.windowResize(function(){t.chart&&t.chart.update&&t.chart.update()}),void 0!==n.chart.zoom&&["scatterChart","lineChart","candlestickBarChart","cumulativeLineChart","historicalBarChart","ohlcBarChart","stackedAreaChart"].indexOf(n.chart.type)>-1&&e.zoom(t,n),t.chart},n.chart.callback))},updateWithData:function(e){if(e){d3.select(n[0]).select("svg").remove();var r,i;t.svg=d3.select(n[0]).append("svg"),(r=t.options.chart.height)&&(isNaN(+r)||(r+="px"),t.svg.attr("height",r).style({height:r})),(i=t.options.chart.width)?(isNaN(+i)||(i+="px"),t.svg.attr("width",i).style({width:i})):t.svg.attr("width","100%").style({width:"100%"}),t.svg.datum(e).call(t.chart)}},clearElement:function(){if(n.find(".title").remove(),n.find(".subtitle").remove(),n.find(".caption").remove(),n.empty(),t.chart&&t.chart.tooltip&&t.chart.tooltip.id&&d3.select("#"+t.chart.tooltip.id()).remove(),nv.graphs&&t.chart)for(var e=nv.graphs.length-1;e>=0;e--)nv.graphs[e]&&nv.graphs[e].id===t.chart.id&&nv.graphs.splice(e,1);nv.tooltip&&nv.tooltip.cleanup&&nv.tooltip.cleanup(),t.chart&&t.chart.resizeHandler&&t.chart.resizeHandler.clear(),t.chart=null},getScope:function(){return t},getElement:function(){return n}},t._config.deepWatchOptions&&t.$watch("options",e.debounce(function(e){t._config.disabled||t.api.refresh()},t._config.debounce,t._config.debounceImmediate),!0),t._config.deepWatchData&&(1===t._config.deepWatchDataDepth?t.$watchCollection("data",u):t.$watch("data",u,2===t._config.deepWatchDataDepth)),t.$watch("config",function(e,n){e!==n&&(t._config=angular.extend(c,e),t.api.refresh())},!0),t._config.deepWatchOptions||t._config.deepWatchData||t.api.refresh(),angular.forEach(t.events,function(e,n){t.$on(n,function(n,r){return e(n,t,r)})}),n.on("$destroy",function(){t.api.clearElement()}),t.$watch("isReady",function(e){e&&t.onReady&&"function"==typeof t.onReady()&&t.onReady()(t,n)})}}}]).factory("nvd3Utils",function(){return{debounce:function(e,t,n){var r;return function(){var i=this,o=arguments,a=function(){r=null,n||e.apply(i,o)},s=n&&!r;clearTimeout(r),r=setTimeout(a,t),s&&e.apply(i,o)}},deepExtend:function(e){var t=this;return angular.forEach(arguments,function(n){n!==e&&angular.forEach(n,function(n,r){e[r]&&e[r].constructor&&e[r].constructor===Object?t.deepExtend(e[r],n):e[r]=n})}),e},zoom:function(e,t){var n=t.chart.zoom;if(void 0===n.enabled||null===n.enabled||n.enabled){var r,i,o,a,s,l=e.chart.xAxis.scale(),u=e.chart.yAxis.scale(),c=e.chart.xDomain||l.domain,d=e.chart.yDomain||u.domain,f=l.domain().slice(),p=u.domain().slice(),h=n.scale||1,g=n.translate||[0,0],m=n.scaleExtent||[1,10],v=n.useFixedDomain||!1,y=n.useNiceScale||!1,b=n.horizontalOff||!1,x=n.verticalOff||!1,w=n.unzoomEventType||"dblclick.zoom";y&&(l.nice(),u.nice()),r=function(e,t){return e[0]=Math.min(Math.max(e[0],t[0]),t[1]-t[1]/m[1]),e[1]=Math.max(t[0]+t[1]/m[1],Math.min(e[1],t[1])),e},o=function(){if(void 0!==n.zoomed){var t=n.zoomed(l.domain(),u.domain());b||c([t.x1,t.x2]),x||d([t.y1,t.y2])}else b||c(v?r(l.domain(),f):l.domain()),x||d(v?r(u.domain(),p):u.domain());e.chart.update()},a=function(){if(void 0!==n.unzoomed){var t=n.unzoomed(l.domain(),u.domain());b||c([t.x1,t.x2]),x||d([t.y1,t.y2])}else b||c(f),x||d(p);i.scale(h).translate(g),e.chart.update()},s=function(){void 0!==n.zoomend&&n.zoomend()},i=d3.behavior.zoom().x(l).y(u).scaleExtent(m).on("zoom",o).on("zoomend",s),e.svg.call(i),i.scale(h).translate(g).event(e.svg),"none"!==w&&e.svg.on(w,a)}}}})}(),angular.module("angularUUID2",[]).factory("uuid2",[function(){function e(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return{newuuid:function(){for(var e=[],t=0;t<36;t++)e[t]="0123456789abcdef".substr(Math.floor(16*Math.random()),1);return e[14]="4",e[19]="0123456789abcdef".substr(3&e[19]|8,1),e[8]=e[13]=e[18]=e[23]="-",e.join("")},newguid:function(){return e()+e()+"-"+e()+"-"+e()+"-"+e()+"-"+e()+e()+e()}}}]),angular.module("ui.bootstrap.contextMenu",[]).directive("contextMenu",["$parse","$q",function(e,t){var n=[],r=function(e){for(;n.length&&(!e||n.length>e);)n.pop().remove();0==n.length&&i&&i.remove()},i=null,o=function(e,a,s,l,u){if(u||(u=0),!c)var c=angular.element;c(a.currentTarget).addClass("context");var d=c("<div>");i?d=i:i=d,d.addClass("dropdown clearfix");var f=c("<ul>");f.addClass("dropdown-menu"),f.attr({role:"menu"}),f.css({display:"block",position:"absolute",left:a.pageX+"px",top:a.pageY+"px","z-index":1e4});var p=[];angular.forEach(s,function(n,i){var s=c("<li>");if(null===n)s.addClass("divider");else{var d=angular.isArray(n[1])?n[1]:angular.isArray(n[2])?n[2]:angular.isArray(n[3])?n[3]:null,h=c("<a>");h.css("padding-right","8px"),h.attr({tabindex:"-1",href:"#"});var g="string"==typeof n[0]?n[0]:n[0].call(e,e,a,l);if($promise=t.when(g),p.push($promise),$promise.then(function(e){h.text(e),d&&(h.css("cursor","default"),h.append(c('<strong style="font-family:monospace;font-weight:bold;float:right;">&gt;</strong>')))}),s.append(h),!angular.isFunction(n[2])||n[2].call(e,e,a,l,g)){var m=function(t){r(u+1);var n={pageX:a.pageX+f[0].offsetWidth-1,pageY:f[0].offsetTop+s[0].offsetTop-3};o(e,n,d,l,u+1)};s.on("click",function(t){t.preventDefault(),e.$apply(function(){d?m():(c(a.currentTarget).removeClass("context"),r(),n[1].call(e,e,a,l,g))})}),s.on("mouseover",function(t){e.$apply(function(){d&&m()})})}else s.on("click",function(e){e.preventDefault()}),s.addClass("disabled")}f.append(s)}),d.append(f);var h=Math.max(document.body.scrollHeight,document.documentElement.scrollHeight,document.body.offsetHeight,document.documentElement.offsetHeight,document.body.clientHeight,document.documentElement.clientHeight);d.css({width:"100%",height:h+"px",position:"absolute",top:0,left:0,zIndex:9999}),c(document).find("body").append(d),t.all(p).then(function(){if(0===u){var e=a.pageY,t=angular.element(f[0]).prop("offsetHeight"),n=a.view.innerHeight;e>t&&n-e<t&&(e=a.pageY-t);var r=a.pageX,i=angular.element(f[0]).prop("offsetWidth"),o=a.view.innerWidth;r>i&&o-r<i&&(r=a.pageX-i),f.css({display:"block",position:"absolute",left:r+"px",top:e+"px"})}}),d.on("mousedown",function(e){c(e.target).hasClass("dropdown")&&(c(a.currentTarget).removeClass("context"),r())}).on("contextmenu",function(e){c(e.currentTarget).removeClass("context"),e.preventDefault(),r(u)}),e.$on("$destroy",function(){r()}),n.push(f)};return function(e,t,n){t.on("contextmenu",function(t){t.stopPropagation(),e.$apply(function(){t.preventDefault();var r=e.$eval(n.contextMenu),i=e.$eval(n.model);if(!(r instanceof Array))throw'"'+n.contextMenu+'" not an array';0!==r.length&&o(e,t,r,i)})})}}]),function(){function e(e){return["$rootScope","$window","$log",function(t,n,r){for(var i,o,a,s=n[e]||(r.warn("This browser does not support Web Storage!"),{}),l={$default:function(e){for(var t in e)angular.isDefined(l[t])||(l[t]=e[t]);return l},$reset:function(e){for(var t in l)"$"===t[0]||delete l[t];return l.$default(e)}},u=0;u<s.length;u++)(a=s.key(u))&&"ngStorage-"===a.slice(0,10)&&(l[a.slice(10)]=angular.fromJson(s.getItem(a)));return i=angular.copy(l),t.$watch(function(){o||(o=setTimeout(function(){if(o=null,!angular.equals(l,i)){angular.forEach(l,function(e,t){angular.isDefined(e)&&"$"!==t[0]&&s.setItem("ngStorage-"+t,angular.toJson(e)),delete i[t]});for(var e in i)s.removeItem("ngStorage-"+e);i=angular.copy(l)}},100))}),"localStorage"===e&&n.addEventListener&&n.addEventListener("storage",function(e){"ngStorage-"===e.key.slice(0,10)&&(e.newValue?l[e.key.slice(10)]=angular.fromJson(e.newValue):delete l[e.key.slice(10)],i=angular.copy(l),t.$apply())}),l}]}angular.module("ngStorage",[]).factory("$localStorage",e("localStorage")).factory("$sessionStorage",e("sessionStorage"))}(),function(e,t){"use strict";function n(e,t,n){if(!e)throw K("areq",t||"?",n||"required");return e}function r(e,t){return e||t?e?t?(O(e)&&(e=e.join(" ")),O(t)&&(t=t.join(" ")),e+" "+t):e:t:""}function i(e){var t={};return e&&(e.to||e.from)&&(t.to=e.to,t.from=e.from),t}function o(e,t,n){var r="";return e=O(e)?e:e&&z(e)&&e.length?e.split(/\s+/):[],F(e,function(e,i){e&&0<e.length&&(r+=0<i?" ":"",r+=n?t+e:e+t)}),r}function a(e){if(e instanceof V)switch(e.length){case 0:return e;case 1:if(1===e[0].nodeType)return e;break;default:return V(s(e))}if(1===e.nodeType)return V(e)}function s(e){if(!e[0])return e;for(var t=0;t<e.length;t++){var n=e[t];if(1===n.nodeType)return n}}function l(e,t,n){F(t,function(t){e.addClass(t,n)})}function u(e,t,n){F(t,function(t){e.removeClass(t,n)})}function c(e){return function(t,n){n.addClass&&(l(e,t,n.addClass),n.addClass=null),n.removeClass&&(u(e,t,n.removeClass),n.removeClass=null)}}function d(e){if(!(e=e||{}).$$prepared){var t=e.domOperation||B;e.domOperation=function(){e.$$domOperationFired=!0,t(),t=B},e.$$prepared=!0}return e}function f(e,t){p(e,t),h(e,t)}function p(e,t){t.from&&(e.css(t.from),t.from=null)}function h(e,t){t.to&&(e.css(t.to),t.to=null)}function g(e,t,n){var r=t.options||{};n=n.options||{};var i=(r.addClass||"")+" "+(n.addClass||""),o=(r.removeClass||"")+" "+(n.removeClass||"");return e=m(e.attr("class"),i,o),n.preparationClasses&&(r.preparationClasses=_(n.preparationClasses,r.preparationClasses),delete n.preparationClasses),i=r.domOperation!==B?r.domOperation:null,P(r,n),i&&(r.domOperation=i),r.addClass=e.addClass?e.addClass:null,r.removeClass=e.removeClass?e.removeClass:null,t.addClass=r.addClass,t.removeClass=r.removeClass,r}function m(e,t,n){function r(e){z(e)&&(e=e.split(" "));var t={};return F(e,function(e){e.length&&(t[e]=!0)}),t}var i={};e=r(e),t=r(t),F(t,function(e,t){i[t]=1}),n=r(n),F(n,function(e,t){i[t]=1===i[t]?null:-1});var o={addClass:"",removeClass:""};return F(i,function(t,n){var r,i;1===t?(r="addClass",i=!e[n]||e[n+"-remove"]):-1===t&&(r="removeClass",i=e[n]||e[n+"-add"]),i&&(o[r].length&&(o[r]+=" "),o[r]+=n)}),o}function v(e){return e instanceof V?e[0]:e}function y(e,t,n){var r="";t&&(r=o(t,"ng-",!0)),n.addClass&&(r=_(r,o(n.addClass,"-add"))),n.removeClass&&(r=_(r,o(n.removeClass,"-remove"))),r.length&&(n.preparationClasses=r,e.addClass(r))}function b(e,t){var n=t?"-"+t+"s":"";return w(e,[G,n]),[G,n]}function x(e,t){var n=t?"paused":"",r=L+"PlayState";return w(e,[r,n]),[r,n]}function w(e,t){e.style[t[0]]=t[1]}function _(e,t){return e?t?e+" "+t:e:t}function C(e,t,n){var r=Object.create(null),i=e.getComputedStyle(t)||{};return F(n,function(e,t){var n=i[e];if(n){var o=n.charAt(0);("-"===o||"+"===o||0<=o)&&(n=k(n)),0===n&&(n=null),r[t]=n}}),r}function k(e){var t=0;return e=e.split(/\s*,\s*/),F(e,function(e){"s"===e.charAt(e.length-1)&&(e=e.substring(0,e.length-1)),e=parseFloat(e)||0,t=t?Math.max(e,t):e}),t}function S(e){return 0===e||null!=e}function $(e,t){var n=D,r=e+"s";return t?n+="Duration":r+=" linear all",[n,r]}function M(){var e=Object.create(null);return{flush:function(){e=Object.create(null)},count:function(t){return(t=e[t])?t.total:0},get:function(t){return(t=e[t])&&t.value},put:function(t,n){e[t]?e[t].total++:e[t]={total:1,value:n}}}}function T(e,t,n){F(n,function(n){e[n]=N(e[n])?e[n]:t.style.getPropertyValue(n)})}var D,E,L,A;void 0===e.ontransitionend&&void 0!==e.onwebkittransitionend?(D="WebkitTransition",E="webkitTransitionEnd transitionend"):(D="transition",E="transitionend"),void 0===e.onanimationend&&void 0!==e.onwebkitanimationend?(L="WebkitAnimation",A="webkitAnimationEnd animationend"):(L="animation",A="animationend");var R,P,F,O,N,I,j,Y,z,H,V,B,W=L+"Delay",U=L+"Duration",G=D+"Delay",q=D+"Duration",K=t.$$minErr("ng"),X={transitionDuration:q,transitionDelay:G,transitionProperty:D+"Property",animationDuration:U,animationDelay:W,animationIterationCount:L+"IterationCount"},J={transitionDuration:q,transitionDelay:G,animationDuration:U,animationDelay:W};t.module("ngAnimate",[],function(){B=t.noop,R=t.copy,P=t.extend,V=t.element,F=t.forEach,O=t.isArray,z=t.isString,Y=t.isObject,H=t.isUndefined,N=t.isDefined,j=t.isFunction,I=t.isElement}).info({angularVersion:"1.6.4"}).directive("ngAnimateSwap",["$animate","$rootScope",function(e,t){return{restrict:"A",transclude:"element",terminal:!0,priority:600,link:function(t,n,r,i,o){var a,s;t.$watchCollection(r.ngAnimateSwap||r.for,function(r){a&&e.leave(a),s&&(s.$destroy(),s=null),(r||0===r)&&(s=t.$new(),o(s,function(t){a=t,e.enter(t,null,n)}))})}}}]).directive("ngAnimateChildren",["$interpolate",function(e){return{link:function(t,n,r){function i(e){n.data("$$ngAnimateChildren","on"===e||"true"===e)}var o=r.ngAnimateChildren;z(o)&&0===o.length?n.data("$$ngAnimateChildren",!0):(i(e(o)(t)),r.$observe("ngAnimateChildren",i))}}}]).factory("$$rAFScheduler",["$$rAF",function(e){function t(e){r=r.concat(e),n()}function n(){if(r.length){for(var t=r.shift(),o=0;o<t.length;o++)t[o]();i||e(function(){i||n()})}}var r,i;return r=t.queue=[],t.waitUntilQuiet=function(t){i&&i(),i=e(function(){i=null,t(),n()})},t}]).provider("$$animateQueue",["$animateProvider",function(t){function r(e){if(!e)return null;e=e.split(" ");var t=Object.create(null);return F(e,function(e){t[e]=!0}),t}function i(e,t){if(e&&t){var n=r(t);return e.split(" ").some(function(e){return n[e]})}}function o(e,t,n){return u[e].some(function(e){return e(t,n)})}function l(e,t){var n=0<(e.addClass||"").length,r=0<(e.removeClass||"").length;return t?n&&r:n||r}var u=this.rules={skip:[],cancel:[],join:[]};u.join.push(function(e,t){return!e.structural&&l(e)}),u.skip.push(function(e,t){return!e.structural&&!l(e)}),u.skip.push(function(e,t){return"leave"===t.event&&e.structural}),u.skip.push(function(e,t){return t.structural&&2===t.state&&!e.structural}),u.cancel.push(function(e,t){return t.structural&&e.structural}),u.cancel.push(function(e,t){return 2===t.state&&e.structural}),u.cancel.push(function(e,t){if(t.structural)return!1;var n=e.addClass,r=e.removeClass,o=t.addClass,a=t.removeClass;return!(H(n)&&H(r)||H(o)&&H(a))&&(i(n,a)||i(r,o))}),this.$get=["$$rAF","$rootScope","$rootElement","$document","$$Map","$$animation","$$AnimateRunner","$templateRequest","$$jqLite","$$forceReflow","$$isDocumentHidden",function(r,i,u,p,h,m,b,x,w,_,C){function k(){var e=!1;return function(t){e?t():i.$$postDigest(function(){e=!0,t()})}}function S(e,t,n){var r=[],i=U[n];return i&&F(i,function(i){X.call(i.node,t)?r.push(i.callback):"leave"===n&&X.call(i.node,e)&&r.push(i.callback)}),r}function $(e,t,n){var r=s(t);return e.filter(function(e){return!(e.node===r&&(!n||e.callback===n))})}function M(e,t,n){function s(e,t,n,i){_(function(){var e=S(x,h,t);e.length?r(function(){F(e,function(e){e(p,n,i)}),"close"!==n||h.parentNode||J.off(h)}):"close"!==n||h.parentNode||J.off(h)}),e.progress(t,n,i)}function u(e){var t=p,n=c;n.preparationClasses&&(t.removeClass(n.preparationClasses),n.preparationClasses=null),n.activeClasses&&(t.removeClass(n.activeClasses),n.activeClasses=null),K(p,c),f(p,c),c.domOperation(),w.complete(!e)}var c=R(n),p=a(e),h=v(p),x=h&&h.parentNode,c=d(c),w=new b,_=k();if(O(c.addClass)&&(c.addClass=c.addClass.join(" ")),c.addClass&&!z(c.addClass)&&(c.addClass=null),O(c.removeClass)&&(c.removeClass=c.removeClass.join(" ")),c.removeClass&&!z(c.removeClass)&&(c.removeClass=null),c.from&&!Y(c.from)&&(c.from=null),c.to&&!Y(c.to)&&(c.to=null),!h)return u(),w;if(n=[h.getAttribute("class"),c.addClass,c.removeClass].join(" "),!q(n))return u(),w;var $=0<=["enter","move","leave"].indexOf(t),M=C(),P=!B||M||j.get(h),N=!!(n=!P&&A.get(h)||{}).state;if(P||N&&1===n.state||(P=!E(h,x,t)),P)return M&&s(w,t,"start"),u(),M&&s(w,t,"close"),w;if($&&T(h),M={structural:$,element:p,event:t,addClass:c.addClass,removeClass:c.removeClass,close:u,options:c,runner:w},N){if(o("skip",M,n))return 2===n.state?(u(),w):(g(p,n,M),n.runner);if(o("cancel",M,n))if(2===n.state)n.runner.end();else{if(!n.structural)return g(p,n,M),n.runner;n.close()}else if(o("join",M,n)){if(2!==n.state)return y(p,$?t:null,c),t=M.event=n.event,c=g(p,n,M),n.runner;g(p,M,{})}}else g(p,M,{});if((N=M.structural)||(N="animate"===M.event&&0<Object.keys(M.options.to||{}).length||l(M)),!N)return u(),D(h),w;var I=(n.counter||0)+1;return M.counter=I,L(h,1,M),i.$$postDigest(function(){p=a(e);var n=!(r=A.get(h)),r=r||{},i=0<(p.parent()||[]).length&&("animate"===r.event||r.structural||l(r));n||r.counter!==I||!i?(n&&(K(p,c),f(p,c)),(n||$&&r.event!==t)&&(c.domOperation(),w.end()),i||D(h)):(t=!r.structural&&l(r,!0)?"setClass":r.event,L(h,2),r=m(p,t,r.options),w.setHost(r),s(w,t,"start",{}),r.done(function(e){u(!e),(e=A.get(h))&&e.counter===I&&D(h),s(w,t,"close",{})}))}),w}function T(e){e=e.querySelectorAll("[data-ng-animate]"),F(e,function(e){var t=parseInt(e.getAttribute("data-ng-animate"),10),n=A.get(e);if(n)switch(t){case 2:n.runner.end();case 1:A.delete(e)}})}function D(e){e.removeAttribute("data-ng-animate"),A.delete(e)}function E(e,t,n){n=p[0].body;var r,i=v(u),o=e===n||"HTML"===e.nodeName,a=e===i,s=!1,l=j.get(e);for((e=V.data(e,"$ngAnimatePin"))&&(t=v(e));t&&(a||(a=t===i),1===t.nodeType);){if(e=A.get(t)||{},!s){var c=j.get(t);if(!0===c&&!1!==l){l=!0;break}!1===c&&(l=!1),s=e.structural}if((H(r)||!0===r)&&(e=V.data(t,"$$ngAnimateChildren"),N(e)&&(r=e)),s&&!1===r)break;if(o||(o=t===n),o&&a)break;t=a||!(e=V.data(t,"$ngAnimatePin"))?t.parentNode:v(e)}return(!s||r)&&!0!==l&&a&&o}function L(e,t,n){(n=n||{}).state=t,e.setAttribute("data-ng-animate",t),n=(t=A.get(e))?P(t,n):n,A.set(e,n)}var A=new h,j=new h,B=null,W=i.$watch(function(){return 0===x.totalPendingRequests},function(e){e&&(W(),i.$$postDigest(function(){i.$$postDigest(function(){null===B&&(B=!0)})}))}),U=Object.create(null),G=t.classNameFilter(),q=G?function(e){return G.test(e)}:function(){return!0},K=c(w),X=e.Node.prototype.contains||function(e){return this===e||!!(16&this.compareDocumentPosition(e))},J={on:function(e,t,n){var r=s(t);U[e]=U[e]||[],U[e].push({node:r,callback:n}),V(t).on("$destroy",function(){A.get(r)||J.off(e,t,n)})},off:function(e,t,n){if(1!==arguments.length||z(arguments[0])){var r=U[e];r&&(U[e]=1===arguments.length?null:$(r,t,n))}else for(r in t=arguments[0],U)U[r]=$(U[r],t)},pin:function(e,t){n(I(e),"element","not an element"),n(I(t),"parentElement","not an element"),e.data("$ngAnimatePin",t)},push:function(e,t,n,r){return n=n||{},n.domOperation=r,M(e,t,n)},enabled:function(e,t){var n=arguments.length;if(0===n)t=!!B;else if(I(e)){var r=v(e);1===n?t=!j.get(r):j.set(r,!t)}else t=B=!!e;return t}};return J}]}]).provider("$$animation",["$animateProvider",function(e){var t=this.drivers=[];this.$get=["$$jqLite","$rootScope","$injector","$$AnimateRunner","$$Map","$$rAFScheduler",function(e,n,i,o,a,s){function l(e){function t(e){if(e.processed)return e;e.processed=!0;var n=e.domNode,o=n.parentNode;i.set(n,e);for(var a;o;){if(a=i.get(o)){a.processed||(a=t(a));break}o=o.parentNode}return(a||r).children.push(e),e}var n,r={children:[]},i=new a;for(n=0;n<e.length;n++){var o=e[n];i.set(o.domNode,e[n]={domNode:o.domNode,fn:o.fn,children:[]})}for(n=0;n<e.length;n++)t(e[n]);return function(e){var t,n=[],r=[];for(t=0;t<e.children.length;t++)r.push(e.children[t]);e=r.length;var i=0,o=[];for(t=0;t<r.length;t++){var a=r[t];0>=e&&(e=i,i=0,n.push(o),o=[]),o.push(a.fn),a.children.forEach(function(e){i++,r.push(e)}),e--}return o.length&&n.push(o),n}(r)}var u=[],p=c(e);return function(a,c,h){function g(e){e=e.hasAttribute("ng-animate-ref")?[e]:e.querySelectorAll("[ng-animate-ref]");var t=[];return F(e,function(e){var n=e.getAttribute("ng-animate-ref");n&&n.length&&t.push(e)}),t}function m(e){var t=[],n={};F(e,function(e,r){var i=v(e.element),o=0<=["enter","move"].indexOf(e.event);if((i=e.structural?g(i):[]).length){var a=o?"to":"from";F(i,function(e){var t=e.getAttribute("ng-animate-ref");n[t]=n[t]||{},n[t][a]={animationID:r,element:V(e)}})}else t.push(e)});var r={},i={};return F(n,function(n,o){var a=n.from,s=n.to;if(a&&s){var l=e[a.animationID],u=e[s.animationID],c=a.animationID.toString();if(!i[c]){var d=i[c]={structural:!0,beforeStart:function(){l.beforeStart(),u.beforeStart()},close:function(){l.close(),u.close()},classes:y(l.classes,u.classes),from:l,to:u,anchors:[]};d.classes.length?t.push(d):(t.push(l),t.push(u))}i[c].anchors.push({out:a.element,in:s.element})}else a=a?a.animationID:s.animationID,s=a.toString(),r[s]||(r[s]=!0,t.push(e[a]))}),t}function y(e,t){e=e.split(" "),t=t.split(" ");for(var n=[],r=0;r<e.length;r++){var i=e[r];if("ng-"!==i.substring(0,3))for(var o=0;o<t.length;o++)if(i===t[o]){n.push(i);break}}return n.join(" ")}function b(e){for(var n=t.length-1;0<=n;n--){var r=i.get(t[n])(e);if(r)return r}}function x(e,t){function n(e){(e=e.data("$$animationRunner"))&&e.setHost(t)}e.from&&e.to?(n(e.from.element),n(e.to.element)):n(e.element)}function w(){var e=a.data("$$animationRunner");!e||"leave"===c&&h.$$domOperationFired||e.end()}function _(t){a.off("$destroy",w),a.removeData("$$animationRunner"),p(a,h),f(a,h),h.domOperation(),$&&e.removeClass(a,$),a.removeClass("ng-animate"),k.complete(!t)}h=d(h);var C=0<=["enter","move","leave"].indexOf(c),k=new o({end:function(){_()},cancel:function(){_(!0)}});if(!t.length)return _(),k;a.data("$$animationRunner",k);var S=r(a.attr("class"),r(h.addClass,h.removeClass)),$=h.tempClasses;$&&(S+=" "+$,h.tempClasses=null);var M;return C&&(M="ng-"+c+"-prepare",e.addClass(a,M)),u.push({element:a,classes:S,event:c,structural:C,options:h,beforeStart:function(){a.addClass("ng-animate"),$&&e.addClass(a,$),M&&(e.removeClass(a,M),M=null)},close:_}),a.on("$destroy",w),1<u.length?k:(n.$$postDigest(function(){var e=[];F(u,function(t){t.element.data("$$animationRunner")?e.push(t):t.close()}),u.length=0;var t=m(e),n=[];F(t,function(e){n.push({domNode:v(e.from?e.from.element:e.element),fn:function(){e.beforeStart();var t,n=e.close;if((e.anchors?e.from.element||e.to.element:e.element).data("$$animationRunner")){var r=b(e);r&&(t=r.start)}t?((t=t()).done(function(e){n(!e)}),x(e,t)):n()}})}),s(l(n))}),k)}}]}]).provider("$animateCss",["$animateProvider",function(e){var t=M(),n=M();this.$get=["$window","$$jqLite","$$AnimateRunner","$timeout","$$forceReflow","$sniffer","$$rAFScheduler","$$animateQueue",function(e,r,a,s,l,u,g,m){function y(e,t){var n=e.parentNode;return(n.$$ngAnimateParentKey||(n.$$ngAnimateParentKey=++N))+"-"+e.getAttribute("class")+"-"+t}function _(i,a,s,l){var u;return 0<t.count(s)&&((u=n.get(s))||(a=o(a,"-stagger"),r.addClass(i,a),u=C(e,i,l),u.animationDuration=Math.max(u.animationDuration,0),u.transitionDuration=Math.max(u.transitionDuration,0),r.removeClass(i,a),n.put(s,u))),u||{}}function k(e){I.push(e),g.waitUntilQuiet(function(){t.flush(),n.flush();for(var e=l(),r=0;r<I.length;r++)I[r](e);I.length=0})}function M(n,r,i){return(r=t.get(i))||"infinite"===(r=C(e,n,X)).animationIterationCount&&(r.animationIterationCount=1),t.put(i,r),n=r,i=n.animationDelay,r=n.transitionDelay,n.maxDelay=i&&r?Math.max(i,r):i||r,n.maxDuration=Math.max(n.animationDuration*n.animationIterationCount,n.transitionDuration),n}var P=c(r),N=0,I=[];return function(e,n){function l(){g()}function c(){g(!0)}function g(t){if(!(V||K&&q)){V=!0,q=!1,Y.$$skipPreparationClasses||r.removeClass(e,de),r.removeClass(e,pe),x(H,!1),b(H,!1),F(ie,function(e){H.style[e[0]]=""}),P(e,Y),f(e,Y),Object.keys(z).length&&F(z,function(e,t){e?H.style.setProperty(t,e):H.style.removeProperty(t)}),Y.onDone&&Y.onDone(),se&&se.length&&e.off(se.join(" "),I);var n=e.data("$$animateCss");n&&(s.cancel(n[0].timer),e.removeData("$$animateCss")),X&&X.complete(!t)}}function C(e){be.blockTransition&&b(H,e),be.blockKeyframeAnimation&&x(H,!!e)}function N(){return X=new a({end:l,cancel:c}),k(B),g(),{$$willAnimate:!1,start:function(){return X},end:l}}function I(e){e.stopPropagation();var t=e.originalEvent||e;e=t.$manualTimeStamp||Date.now(),t=parseFloat(t.elapsedTime.toFixed(3)),Math.max(e-re,0)>=ee&&t>=te&&(K=!0,g())}function j(){function t(){if(!V){if(C(!1),F(ie,function(e){H.style[e[0]]=e[1]}),P(e,Y),r.addClass(e,pe),be.recalculateTimingStyles){if(fe=H.getAttribute("class")+" "+de,he=y(H,fe),ve=M(H,fe,he),ye=ve.maxDelay,Q=Math.max(ye,0),0===(te=ve.maxDuration))return void g();be.hasTransitions=0<ve.transitionDuration,be.hasAnimations=0<ve.animationDuration}if(be.applyAnimationDelay&&(ye="boolean"!=typeof Y.delay&&S(Y.delay)?parseFloat(Y.delay):ye,Q=Math.max(ye,0),ve.animationDelay=ye,xe=[W,ye+"s"],ie.push(xe),H.style[xe[0]]=xe[1]),ee=1e3*Q,ne=1e3*te,Y.easing){var t,i=Y.easing;be.hasTransitions&&(t=D+"TimingFunction",ie.push([t,i]),H.style[t]=i),be.hasAnimations&&(t=L+"TimingFunction",ie.push([t,i]),H.style[t]=i)}ve.transitionDuration&&se.push(E),ve.animationDuration&&se.push(A),re=Date.now();var o=ee+1.5*ne;t=re+o;var a=!0;if((i=e.data("$$animateCss")||[]).length){var l=i[0];(a=t>l.expectedEndTime)?s.cancel(l.timer):i.push(g)}a&&(o=s(n,o,!1),i[0]={timer:o,expectedEndTime:t},i.push(g),e.data("$$animateCss",i)),se.length&&e.on(se.join(" "),I),Y.to&&(Y.cleanupStyles&&T(z,H,Object.keys(Y.to)),h(e,Y))}}function n(){var t=e.data("$$animateCss");if(t){for(var n=1;n<t.length;n++)t[n]();e.removeData("$$animateCss")}}if(!V)if(H.parentNode){var i=function(e){if(K)q&&e&&(q=!1,g());else if(q=!e,ve.animationDuration)if(e=x(H,q),q)ie.push(e);else{var t=ie,n=t.indexOf(e);0<=e&&t.splice(n,1)}},o=0<me&&(ve.transitionDuration&&0===ge.transitionDuration||ve.animationDuration&&0===ge.animationDuration)&&Math.max(ge.animationDelay,ge.transitionDelay);o?s(t,Math.floor(o*me*1e3),!1):t(),Z.resume=function(){i(!0)},Z.pause=function(){i(!1)}}else g()}var Y=n||{};Y.$$prepared||(Y=d(R(Y)));var z={},H=v(e);if(!H||!H.parentNode||!m.enabled())return N();var V,q,K,X,Z,Q,ee,te,ne,re,ie=[],oe=e.attr("class"),ae=i(Y),se=[];if(0===Y.duration||!u.animations&&!u.transitions)return N();var le=Y.event&&O(Y.event)?Y.event.join(" "):Y.event,ue="",ce="";le&&Y.structural?ue=o(le,"ng-",!0):le&&(ue=le),Y.addClass&&(ce+=o(Y.addClass,"-add")),Y.removeClass&&(ce.length&&(ce+=" "),ce+=o(Y.removeClass,"-remove")),Y.applyClassesEarly&&ce.length&&P(e,Y);var de=[ue,ce].join(" ").trim(),fe=oe+" "+de,pe=o(de,"-active"),oe=ae.to&&0<Object.keys(ae.to).length;if(!(0<(Y.keyframeStyle||"").length||oe||de))return N();var he,ge;0<Y.stagger?(ae=parseFloat(Y.stagger),ge={transitionDelay:ae,animationDelay:ae,transitionDuration:0,animationDuration:0}):(he=y(H,fe),ge=_(H,de,he,J)),Y.$$skipPreparationClasses||r.addClass(e,de),Y.transitionStyle&&(ae=[D,Y.transitionStyle],w(H,ae),ie.push(ae)),0<=Y.duration&&(ae=0<H.style[D].length,ae=$(Y.duration,ae),w(H,ae),ie.push(ae)),Y.keyframeStyle&&(ae=[L,Y.keyframeStyle],w(H,ae),ie.push(ae));var me=ge?0<=Y.staggerIndex?Y.staggerIndex:t.count(he):0;(le=0===me)&&!Y.skipBlocking&&b(H,9999);var ve=M(H,fe,he),ye=ve.maxDelay;Q=Math.max(ye,0),te=ve.maxDuration;var be={};if(be.hasTransitions=0<ve.transitionDuration,be.hasAnimations=0<ve.animationDuration,be.hasTransitionAll=be.hasTransitions&&"all"===ve.transitionProperty,be.applyTransitionDuration=oe&&(be.hasTransitions&&!be.hasTransitionAll||be.hasAnimations&&!be.hasTransitions),be.applyAnimationDuration=Y.duration&&be.hasAnimations,be.applyTransitionDelay=S(Y.delay)&&(be.applyTransitionDuration||be.hasTransitions),be.applyAnimationDelay=S(Y.delay)&&be.hasAnimations,be.recalculateTimingStyles=0<ce.length,(be.applyTransitionDuration||be.applyAnimationDuration)&&(te=Y.duration?parseFloat(Y.duration):te,be.applyTransitionDuration&&(be.hasTransitions=!0,ve.transitionDuration=te,ae=0<H.style[D+"Property"].length,ie.push($(te,ae))),be.applyAnimationDuration&&(be.hasAnimations=!0,ve.animationDuration=te,ie.push([U,te+"s"]))),0===te&&!be.recalculateTimingStyles)return N();if(null!=Y.delay){var xe;"boolean"!=typeof Y.delay&&(xe=parseFloat(Y.delay),Q=Math.max(xe,0)),be.applyTransitionDelay&&ie.push([G,xe+"s"]),be.applyAnimationDelay&&ie.push([W,xe+"s"])}return null==Y.duration&&0<ve.transitionDuration&&(be.recalculateTimingStyles=be.recalculateTimingStyles||le),ee=1e3*Q,ne=1e3*te,Y.skipBlocking||(be.blockTransition=0<ve.transitionDuration,be.blockKeyframeAnimation=0<ve.animationDuration&&0<ge.animationDelay&&0===ge.animationDuration),Y.from&&(Y.cleanupStyles&&T(z,H,Object.keys(Y.from)),p(e,Y)),be.blockTransition||be.blockKeyframeAnimation?C(te):Y.skipBlocking||b(H,!1),{$$willAnimate:!0,end:l,start:function(){if(!V)return Z={end:l,cancel:c,resume:null,pause:null},X=new a(Z),k(j),X}}}}]}]).provider("$$animateCssDriver",["$$animationProvider",function(e){e.drivers.push("$$animateCssDriver"),this.$get=["$animateCss","$rootScope","$$AnimateRunner","$rootElement","$sniffer","$$jqLite","$document",function(e,t,n,r,i,o,a){function s(e){return e.replace(/\bng-\S+\b/g,"")}function l(e,t){return z(e)&&(e=e.split(" ")),z(t)&&(t=t.split(" ")),e.filter(function(e){return-1===t.indexOf(e)}).join(" ")}function u(t,r,i){function o(e){var t={},n=v(e).getBoundingClientRect();return F(["width","height","top","left"],function(e){var r=n[e];switch(e){case"top":r+=f.scrollTop;break;case"left":r+=f.scrollLeft}t[e]=Math.floor(r)+"px"}),t}function a(){var t=l(n=s(i.attr("class")||""),d),n=l(d,n);return(t=e(c,{to:o(i),addClass:"ng-anchor-in "+t,removeClass:"ng-anchor-out "+n,delay:!0})).$$willAnimate?t:null}function u(){c.remove(),r.removeClass("ng-animate-shim"),i.removeClass("ng-animate-shim")}var c=V(v(r).cloneNode(!0)),d=s(c.attr("class")||"");r.addClass("ng-animate-shim"),i.addClass("ng-animate-shim"),c.addClass("ng-anchor"),p.append(c);var h;if(!(t=function(){var t=e(c,{addClass:"ng-anchor-out",delay:!0,from:o(r)});return t.$$willAnimate?t:null}())&&!(h=a()))return u();var g=t||h;return{start:function(){function e(){r&&r.end()}var t,r=g.start();return r.done(function(){if(r=null,!h&&(h=a()))return(r=h.start()).done(function(){r=null,u(),t.complete()}),r;u(),t.complete()}),t=new n({end:e,cancel:e})}}}function c(e,t,r,i){var o=d(e),a=d(t),s=[];if(F(i,function(e){(e=u(r,e.out,e.in))&&s.push(e)}),o||a||0!==s.length)return{start:function(){function e(){F(t,function(e){e.end()})}var t=[];o&&t.push(o.start()),a&&t.push(a.start()),F(s,function(e){t.push(e.start())});var r=new n({end:e,cancel:e});return n.all(t,function(e){r.complete(e)}),r}}}function d(t){var n=t.element,r=t.options||{};return t.structural&&(r.event=t.event,r.structural=!0,r.applyClassesEarly=!0,"leave"===t.event&&(r.onDone=r.domOperation)),r.preparationClasses&&(r.event=_(r.event,r.preparationClasses)),t=e(n,r),t.$$willAnimate?t:null}if(!i.animations&&!i.transitions)return B;var f=a[0].body;t=v(r);var p=V(t.parentNode&&11===t.parentNode.nodeType||f.contains(t)?t:f);return function(e){return e.from&&e.to?c(e.from,e.to,e.classes,e.anchors):d(e)}}]}]).provider("$$animateJs",["$animateProvider",function(e){this.$get=["$injector","$$AnimateRunner","$$jqLite",function(t,n,r){function i(n){n=O(n)?n:n.split(" ");for(var r=[],i={},o=0;o<n.length;o++){var a=n[o],s=e.$$registeredAnimations[a];s&&!i[a]&&(r.push(t.get(s)),i[a]=!0)}return r}var o=c(r);return function(e,t,r,a){function s(){a.domOperation(),o(e,a)}function l(e,t,r,i,o){switch(r){case"animate":t=[t,i.from,i.to,o];break;case"setClass":t=[t,m,v,o];break;case"addClass":t=[t,m,o];break;case"removeClass":t=[t,v,o];break;default:t=[t,o]}if(t.push(i),e=e.apply(e,t))if(j(e.start)&&(e=e.start()),e instanceof n)e.done(o);else if(j(e))return e;return B}function u(e,t,r,i,o){var a=[];return F(i,function(i){var s=i[o];s&&a.push(function(){var i,o,a=!1,u=function(e){a||(a=!0,(o||B)(e),i.complete(!e))};return i=new n({end:function(){u()},cancel:function(){u(!0)}}),o=l(s,e,t,r,function(e){u(!1===e)}),i})}),a}function c(e,t,r,i,o){var a=u(e,t,r,i,o);if(0===a.length){var s,l;"beforeSetClass"===o?(s=u(e,"removeClass",r,i,"beforeRemoveClass"),l=u(e,"addClass",r,i,"beforeAddClass")):"setClass"===o&&(s=u(e,"removeClass",r,i,"removeClass"),l=u(e,"addClass",r,i,"addClass")),s&&(a=a.concat(s)),l&&(a=a.concat(l))}if(0!==a.length)return function(e){var t=[];return a.length&&F(a,function(e){t.push(e())}),t.length?n.all(t,e):e(),function(e){F(t,function(t){e?t.cancel():t.end()})}}}var p=!1;3===arguments.length&&Y(r)&&(a=r,r=null),a=d(a),r||(r=e.attr("class")||"",a.addClass&&(r+=" "+a.addClass),a.removeClass&&(r+=" "+a.removeClass));var h,g,m=a.addClass,v=a.removeClass,y=i(r);if(y.length){var b,x;"leave"===t?(x="leave",b="afterLeave"):(x="before"+t.charAt(0).toUpperCase()+t.substr(1),b=t),"enter"!==t&&"move"!==t&&(h=c(e,t,a,y,x)),g=c(e,t,a,y,b)}if(h||g){var w;return{$$willAnimate:!0,end:function(){return w?w.end():(p=!0,s(),f(e,a),(w=new n).complete(!0)),w},start:function(){function t(t){p=!0,s(),f(e,a),w.complete(t)}if(w)return w;w=new n;var r,i=[];return h&&i.push(function(e){r=h(e)}),i.length?i.push(function(e){s(),e(!0)}):s(),g&&i.push(function(e){r=g(e)}),w.setHost({end:function(){p||((r||B)(void 0),t(void 0))},cancel:function(){p||((r||B)(!0),t(!0))}}),n.chain(i,t),w}}}}}]}]).provider("$$animateJsDriver",["$$animationProvider",function(e){e.drivers.push("$$animateJsDriver"),this.$get=["$$animateJs","$$AnimateRunner",function(e,t){function n(t){return e(t.element,t.event,t.classes,t.options)}return function(e){if(!e.from||!e.to)return n(e);var r=n(e.from),i=n(e.to);return r||i?{start:function(){function e(){return function(){F(n,function(e){e.end()})}}var n=[];r&&n.push(r.start()),i&&n.push(i.start()),t.all(n,function(e){o.complete(e)});var o=new t({end:e(),cancel:e()});return o}}:void 0}}]}])}(window,window.angular),function(){"use strict";function e(e){var t={lg:"(min-width: 1200px)",md:"(min-width: 992px) and (max-width: 1199px)",sm:"(min-width: 768px) and (max-width: 991px)",xs:"(max-width: 767px)"};this.isRetina=window.devicePixelRatio>1||window.matchMedia&&window.matchMedia("(-webkit-min-device-pixel-ratio: 1.5),(-moz-min-device-pixel-ratio: 1.5),(min-device-pixel-ratio: 1.5),(min-resolution: 192dpi),(min-resolution: 2dppx)").matches;var n=this,r=function(t,n){var r=(n=n||e).$root.$$phase;"$apply"===r||"$digest"===r?t&&"function"==typeof t&&t():n.$apply(t)},i=function(e){if("string"!=typeof e&&"[object Array]"!==Object.prototype.toString.call(e))throw new Error("screenSize requires array or comma-separated list");return"string"==typeof e?e.split(/\s*,\s*/):e},o=function(){var e=n.rules||t;for(var r in e)if(e.hasOwnProperty(r)&&window.matchMedia(e[r]).matches)return r};this.get=o,this.is=function(e){return-1!==(e=i(e)).indexOf(o())},this.on=function(e,t,i){function o(){r(t(n.is(e)),i)}return window.addEventListener("resize",o),i&&i.$on("$destroy",function(){window.removeEventListener("resize",o)}),n.is(e)},this.onChange=function(e,t,a){function s(){var n=l;l=o();var i=-1!==t.indexOf(n),s=-1!==t.indexOf(l);i!==s&&r(a(s),e)}var l=o();if(t=i(t),!e)throw"scope has to be applied for cleanup reasons. (destroy)";return window.addEventListener("resize",s),e.$on("$destroy",function(){window.removeEventListener("resize",s)}),n.is(t)},this.when=function(e,t,i){function o(){!0===n.is(e)&&r(t(n.is(e)),i)}return window.addEventListener("resize",o),i&&i.$on("$destroy",function(){window.removeEventListener("resize",o)}),n.is(e)}}var t=angular.module("matchMedia",[]);t.run(function(){window.matchMedia||(window.matchMedia=function(){var e=window.styleMedia||window.media;if(!e){var t=document.createElement("style"),n=document.getElementsByTagName("script")[0],r=null;t.type="text/css",t.id="matchmediajs-test",n.parentNode.insertBefore(t,n),r="getComputedStyle"in window&&window.getComputedStyle(t,null)||t.currentStyle,e={matchMedium:function(e){var n="@media "+e+"{ #matchmediajs-test { width: 1px; } }";return t.styleSheet?t.styleSheet.cssText=n:t.textContent=n,"1px"===r.width}}}return function(t){return{matches:e.matchMedium(t||"all"),media:t||"all"}}}())}),t.service("screenSize",e),e.$inject=["$rootScope"],t.filter("media",["screenSize",function(e){var t=function(t,n){var r=e.get(),i="";if(!n)return r;if(n.groups){for(var o in n.groups)n.groups.hasOwnProperty(o)&&n.groups[o].indexOf(r)>=0&&(i=o);""===i&&(i=r)}return n.replace&&"string"==typeof n.replace&&n.replace.length>0?t.replace(n.replace,i):i};return t.$stateful=!0,t}])}(),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(0,function(){function e(e){"use strict";var t=e.storageKey(),n=e.storage(),r=function(){var r=e.preferredLanguage();angular.isString(r)?e.use(r):n.put(t,e.use())};r.displayName="fallbackFromIncorrectStorageValue",n?n.get(t)?e.use(n.get(t)).catch(r):r():angular.isString(e.preferredLanguage())&&e.use(e.preferredLanguage())}function t(){"use strict";var e,t,n,r=null,i=!1,o=!1;(n={sanitize:function(e,t){return"text"===t&&(e=s(e)),e},escape:function(e,t){return"text"===t&&(e=a(e)),e},sanitizeParameters:function(e,t){return"params"===t&&(e=u(e,s)),e},escapeParameters:function(e,t){return"params"===t&&(e=u(e,a)),e},sce:function(e,t,n){return"text"===t?e=l(e):"params"===t&&"filter"!==n&&(e=u(e,a)),e},sceParameters:function(e,t){return"params"===t&&(e=u(e,l)),e}}).escaped=n.escapeParameters,this.addStrategy=function(e,t){return n[e]=t,this},this.removeStrategy=function(e){return delete n[e],this},this.useStrategy=function(e){return i=!0,r=e,this},this.$get=["$injector","$log",function(a,s){var l={},u=function(e,t,r,i){return angular.forEach(i,function(i){if(angular.isFunction(i))e=i(e,t,r);else if(angular.isFunction(n[i]))e=n[i](e,t,r);else{if(!angular.isString(n[i]))throw new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'");if(!l[n[i]])try{l[n[i]]=a.get(n[i])}catch(e){throw l[n[i]]=function(){},new Error("pascalprecht.translate.$translateSanitization: Unknown sanitization strategy: '"+i+"'")}e=l[n[i]](e,t,r)}}),e},c=function(){i||o||(s.warn("pascalprecht.translate.$translateSanitization: No sanitization strategy has been configured. This can have serious security implications. See http://angular-translate.github.io/docs/#/guide/19_security for details."),o=!0)};return a.has("$sanitize")&&(e=a.get("$sanitize")),a.has("$sce")&&(t=a.get("$sce")),{useStrategy:function(e){return function(t){e.useStrategy(t)}}(this),sanitize:function(e,t,n,i){if(r||c(),n||null===n||(n=r),!n)return e;i||(i="service");var o=angular.isArray(n)?n:[n];return u(e,t,i,o)}}}];var a=function(e){var t=angular.element("<div></div>");return t.text(e),t.html()},s=function(t){if(!e)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sanitize service. Either include the ngSanitize module (https://docs.angularjs.org/api/ngSanitize) or use a sanitization strategy which does not depend on $sanitize, such as 'escape'.");return e(t)},l=function(e){if(!t)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot find $sce service.");return t.trustAsHtml(e)},u=function(e,t,n){if(angular.isDate(e))return e;if(angular.isObject(e)){var r=angular.isArray(e)?[]:{};if(n){if(n.indexOf(e)>-1)throw new Error("pascalprecht.translate.$translateSanitization: Error cannot interpolate parameter due recursive object")}else n=[];return n.push(e),angular.forEach(e,function(e,i){angular.isFunction(e)||(r[i]=u(e,t,n))}),n.splice(-1,1),r}return angular.isNumber(e)?e:angular.isUndefined(e)||null===e?e:t(e)}}function n(e,t,n,r){"use strict";var i,o,a,s,l,u,c,d,f,p,h,g,m,v,y,b,x={},w=[],_=e,C=[],k="translate-cloak",S=!1,$=!1,M=".",T=!1,D=!1,E=0,L=!0,A="default",R={default:function(e){return(e||"").split("-").join("_")},java:function(e){var t=(e||"").split("-").join("_"),n=t.split("_");return n.length>1?n[0].toLowerCase()+"_"+n[1].toUpperCase():t},bcp47:function(e){var t=(e||"").split("_").join("-"),n=t.split("-");return n.length>1?n[0].toLowerCase()+"-"+n[1].toUpperCase():t},"iso639-1":function(e){return(e||"").split("_").join("-").split("-")[0].toLowerCase()}},P=function(){if(angular.isFunction(r.getLocale))return r.getLocale();var e,n,i=t.$get().navigator,o=["language","browserLanguage","systemLanguage","userLanguage"];if(angular.isArray(i.languages))for(e=0;e<i.languages.length;e++)if((n=i.languages[e])&&n.length)return n;for(e=0;e<o.length;e++)if((n=i[o[e]])&&n.length)return n;return null};P.displayName="angular-translate/service: getFirstBrowserLanguage";var F=function(){var e=P()||"";return R[A]&&(e=R[A](e)),e};F.displayName="angular-translate/service: getLocale";var O=function(e,t){for(var n=0,r=e.length;n<r;n++)if(e[n]===t)return n;return-1},N=function(){return this.toString().replace(/^\s+|\s+$/g,"")},I=function(e){if(e){for(var t=[],n=angular.lowercase(e),r=0,i=w.length;r<i;r++)t.push(angular.lowercase(w[r]));if(O(t,n)>-1)return e;if(o){var a;for(var s in o)if(o.hasOwnProperty(s)){var l=!1,u=Object.prototype.hasOwnProperty.call(o,s)&&angular.lowercase(s)===angular.lowercase(e);if("*"===s.slice(-1)&&(l=s.slice(0,-1)===e.slice(0,s.length-1)),(u||l)&&(a=o[s],O(t,angular.lowercase(a))>-1))return a}}var c=e.split("_");return c.length>1&&O(t,angular.lowercase(c[0]))>-1?c[0]:void 0}},j=function(e,t){if(!e&&!t)return x;if(e&&!t){if(angular.isString(e))return x[e]}else angular.isObject(x[e])||(x[e]={}),angular.extend(x[e],Y(t));return this};this.translations=j,this.cloakClassName=function(e){return e?(k=e,this):k},this.nestedObjectDelimeter=function(e){return e?(M=e,this):M};var Y=function(e,t,n,r){var i,o,a;t||(t=[]),n||(n={});for(i in e)Object.prototype.hasOwnProperty.call(e,i)&&(a=e[i],angular.isObject(a)?Y(a,t.concat(i),n,i):(o=t.length?""+t.join(M)+M+i:i,t.length&&i===r&&(n[""+t.join(M)]="@:"+o),n[o]=a));return n};Y.displayName="flatObject",this.addInterpolation=function(e){return C.push(e),this},this.useMessageFormatInterpolation=function(){return this.useInterpolation("$translateMessageFormatInterpolation")},this.useInterpolation=function(e){return p=e,this},this.useSanitizeValueStrategy=function(e){return n.useStrategy(e),this},this.preferredLanguage=function(e){return e?(z(e),this):i};var z=function(e){return e&&(i=e),i};this.translationNotFoundIndicator=function(e){return this.translationNotFoundIndicatorLeft(e),this.translationNotFoundIndicatorRight(e),this},this.translationNotFoundIndicatorLeft=function(e){return e?(m=e,this):m},this.translationNotFoundIndicatorRight=function(e){return e?(v=e,this):v},this.fallbackLanguage=function(e){return H(e),this};var H=function(e){return e?(angular.isString(e)?(s=!0,a=[e]):angular.isArray(e)&&(s=!1,a=e),angular.isString(i)&&O(a,i)<0&&a.push(i),this):s?a[0]:a};this.use=function(e){if(e){if(!x[e]&&!h)throw new Error("$translateProvider couldn't find translationTable for langKey: '"+e+"'");return l=e,this}return l},this.resolveClientLocale=function(){return F()};var V=function(e){return e?(_=e,this):d?d+_:_};this.storageKey=V,this.useUrlLoader=function(e,t){return this.useLoader("$translateUrlLoader",angular.extend({url:e},t))},this.useStaticFilesLoader=function(e){return this.useLoader("$translateStaticFilesLoader",e)},this.useLoader=function(e,t){return h=e,g=t||{},this},this.useLocalStorage=function(){return this.useStorage("$translateLocalStorage")},this.useCookieStorage=function(){return this.useStorage("$translateCookieStorage")},this.useStorage=function(e){return c=e,this},this.storagePrefix=function(e){return e?(d=e,this):e},this.useMissingTranslationHandlerLog=function(){return this.useMissingTranslationHandler("$translateMissingTranslationHandlerLog")},this.useMissingTranslationHandler=function(e){return f=e,this},this.usePostCompiling=function(e){return S=!!e,this},this.forceAsyncReload=function(e){return $=!!e,this},this.uniformLanguageTag=function(e){return e?angular.isString(e)&&(e={standard:e}):e={},A=e.standard,this},this.determinePreferredLanguage=function(e){var t=e&&angular.isFunction(e)?e():F();return i=w.length?I(t)||t:t,this},this.registerAvailableLanguageKeys=function(e,t){return e?(w=e,t&&(o=t),this):w},this.useLoaderCache=function(e){return!1===e?y=void 0:!0===e?y=!0:void 0===e?y="$translationCache":e&&(y=e),this},this.directivePriority=function(e){return void 0===e?E:(E=e,this)},this.statefulFilter=function(e){return void 0===e?L:(L=e,this)},this.postProcess=function(e){return b=e||void 0,this},this.keepContent=function(e){return D=!!e,this},this.$get=["$log","$injector","$rootScope","$q",function(e,t,n,r){var o,d,A,R=t.get(p||"$translateDefaultInterpolation"),P=!1,B={},W={},U=function(e,t,n,s,u){!l&&i&&(l=i);var f=u&&u!==l?I(u)||u:l;if(u&&ue(u),angular.isArray(e)){return function(e){for(var i={},o=[],a=0,l=e.length;a<l;a++)o.push(function(e){var o=r.defer(),a=function(t){i[e]=t,o.resolve([e,t])};return U(e,t,n,s,u).then(a,a),o.promise}(e[a]));return r.all(o).then(function(){return i})}(e)}var p=r.defer();e&&(e=N.apply(e));var h=function(){var e=i?W[i]:W[f];if(d=0,c&&!e){var t=o.get(_);if(e=W[t],a&&a.length){var n=O(a,t);d=0===n?1:0,O(a,i)<0&&a.push(i)}}return e}();if(h){var g=function(){u||(f=l),oe(e,t,n,s,f).then(p.resolve,p.reject)};g.displayName="promiseResolved",h.finally(g).catch(angular.noop)}else oe(e,t,n,s,f).then(p.resolve,p.reject);return p.promise},G=function(e){return m&&(e=[m,e].join(" ")),v&&(e=[e,v].join(" ")),e},q=function(e){l=e,c&&o.put(U.storageKey(),l),n.$emit("$translateChangeSuccess",{language:e}),R.setLocale(l);var t=function(e,t){B[t].setLocale(l)};t.displayName="eachInterpolatorLocaleSetter",angular.forEach(B,t),n.$emit("$translateChangeEnd",{language:e})},K=function(e){if(!e)throw"No language key specified for loading.";var i=r.defer();n.$emit("$translateLoadingStart",{language:e}),P=!0;var o=y;"string"==typeof o&&(o=t.get(o));var a=angular.extend({},g,{key:e,$http:angular.extend({},{cache:o},g.$http)}),s=function(t){var r={};n.$emit("$translateLoadingSuccess",{language:e}),angular.isArray(t)?angular.forEach(t,function(e){angular.extend(r,Y(e))}):angular.extend(r,Y(t)),P=!1,i.resolve({key:e,table:r}),n.$emit("$translateLoadingEnd",{language:e})};s.displayName="onLoaderSuccess";var l=function(e){n.$emit("$translateLoadingError",{language:e}),i.reject(e),n.$emit("$translateLoadingEnd",{language:e})};return l.displayName="onLoaderError",t.get(h)(a).then(s,l),i.promise};if(c&&(!(o=t.get(c)).get||!o.put))throw new Error("Couldn't use storage '"+c+"', missing get() or put() method!");if(C.length){var X=function(e){var n=t.get(e);n.setLocale(i||l),B[n.getInterpolationIdentifier()]=n};X.displayName="interpolationFactoryAdder",angular.forEach(C,X)}var J=function(e){var t=r.defer();if(Object.prototype.hasOwnProperty.call(x,e))t.resolve(x[e]);else if(W[e]){var n=function(e){j(e.key,e.table),t.resolve(e.table)};n.displayName="translationTableResolver",W[e].then(n,t.reject)}else t.reject();return t.promise},Z=function(e,t,n,i,o){var a=r.defer(),s=function(r){if(Object.prototype.hasOwnProperty.call(r,t)&&null!==r[t]){i.setLocale(e);var s=r[t];if("@:"===s.substr(0,2))Z(e,s.substr(2),n,i,o).then(a.resolve,a.reject);else{var u=i.interpolate(r[t],n,"service",o,t);u=le(t,r[t],u,n,e),a.resolve(u)}i.setLocale(l)}else a.reject()};return s.displayName="fallbackTranslationResolver",J(e).then(s,a.reject),a.promise},Q=function(e,t,n,r,i){var o,a=x[e];if(a&&Object.prototype.hasOwnProperty.call(a,t)&&null!==a[t]){if(r.setLocale(e),o=r.interpolate(a[t],n,"filter",i,t),o=le(t,a[t],o,n,e,i),!angular.isString(o)&&angular.isFunction(o.$$unwrapTrustedValue)){var s=o.$$unwrapTrustedValue();if("@:"===s.substr(0,2))return Q(e,s.substr(2),n,r,i)}else if("@:"===o.substr(0,2))return Q(e,o.substr(2),n,r,i);r.setLocale(l)}return o},ee=function(e,n,r,i){return f?t.get(f)(e,l,n,r,i):e},te=function(e,t,n,i,o,s){var l=r.defer();if(e<a.length){var u=a[e];Z(u,t,n,i,s).then(function(e){l.resolve(e)},function(){return te(e+1,t,n,i,o,s).then(l.resolve,l.reject)})}else if(o)l.resolve(o);else{var c=ee(t,n,o);f&&c?l.resolve(c):l.reject(G(t))}return l.promise},ne=function(e,t,n,r,i){var o;if(e<a.length){var s=a[e];(o=Q(s,t,n,r,i))||""===o||(o=ne(e+1,t,n,r))}return o},re=function(e,t,n,r,i){return te(A>0?A:d,e,t,n,r,i)},ie=function(e,t,n,r){return ne(A>0?A:d,e,t,n,r)},oe=function(e,t,n,i,o,s){var l=r.defer(),u=o?x[o]:x,c=n?B[n]:R;if(u&&Object.prototype.hasOwnProperty.call(u,e)&&null!==u[e]){var d=u[e];if("@:"===d.substr(0,2))U(d.substr(2),t,n,i,o).then(l.resolve,l.reject);else{var p=c.interpolate(d,t,"service",s,e);p=le(e,d,p,t,o),l.resolve(p)}}else{var h;f&&!P&&(h=ee(e,t,i)),o&&a&&a.length?re(e,t,c,i,s).then(function(e){l.resolve(e)},function(e){l.reject(G(e))}):f&&!P&&h?i?l.resolve(i):l.resolve(h):i?l.resolve(i):l.reject(G(e))}return l.promise},ae=function(e,t,n,r,i){var o,s=r?x[r]:x,l=R;if(B&&Object.prototype.hasOwnProperty.call(B,n)&&(l=B[n]),s&&Object.prototype.hasOwnProperty.call(s,e)&&null!==s[e]){var u=s[e];"@:"===u.substr(0,2)?o=ae(u.substr(2),t,n,r,i):(o=l.interpolate(u,t,"filter",i,e),o=le(e,u,o,t,r,i))}else{var c;f&&!P&&(c=ee(e,t,i)),r&&a&&a.length?(d=0,o=ie(e,t,l,i)):o=f&&!P&&c?c:G(e)}return o},se=function(e){u===e&&(u=void 0),W[e]=void 0},le=function(e,n,r,i,o,a){var s=b;return s&&("string"==typeof s&&(s=t.get(s)),s)?s(e,n,r,i,o,a):r},ue=function(e){x[e]||!h||W[e]||(W[e]=K(e).then(function(e){return j(e.key,e.table),e}))};U.preferredLanguage=function(e){return e&&z(e),i},U.cloakClassName=function(){return k},U.nestedObjectDelimeter=function(){return M},U.fallbackLanguage=function(e){if(void 0!==e&&null!==e){if(H(e),h&&a&&a.length)for(var t=0,n=a.length;t<n;t++)W[a[t]]||(W[a[t]]=K(a[t]));U.use(U.use())}return s?a[0]:a},U.useFallbackLanguage=function(e){if(void 0!==e&&null!==e)if(e){var t=O(a,e);t>-1&&(A=t)}else A=0},U.proposedLanguage=function(){return u},U.storage=function(){return o},U.negotiateLocale=I,U.use=function(e){if(!e)return l;var t=r.defer();t.promise.then(null,angular.noop),n.$emit("$translateChangeStart",{language:e});var i=I(e);return w.length>0&&!i?r.reject(e):(i&&(e=i),u=e,!$&&x[e]||!h||W[e]?W[e]?W[e].then(function(e){return u===e.key&&q(e.key),t.resolve(e.key),e},function(e){return!l&&a&&a.length>0&&a[0]!==e?U.use(a[0]).then(t.resolve,t.reject):t.reject(e)}):(t.resolve(e),q(e)):(W[e]=K(e).then(function(n){return j(n.key,n.table),t.resolve(n.key),u===e&&q(n.key),n},function(e){return n.$emit("$translateChangeError",{language:e}),t.reject(e),n.$emit("$translateChangeEnd",{language:e}),r.reject(e)}),W[e].finally(function(){se(e)}).catch(angular.noop)),t.promise)},U.resolveClientLocale=function(){return F()},U.storageKey=function(){return V()},U.isPostCompilingEnabled=function(){return S},U.isForceAsyncReloadEnabled=function(){return $},U.isKeepContent=function(){return D},U.refresh=function(e){function t(e){var t=K(e);return W[e]=t,t.then(function(t){x[e]={},j(e,t.table),o[e]=!0},angular.noop),t}if(!h)throw new Error("Couldn't refresh translation table, no loader registered!");n.$emit("$translateRefreshStart",{language:e});var i=r.defer(),o={};if(i.promise.then(function(){for(var e in x)x.hasOwnProperty(e)&&(e in o||delete x[e]);l&&q(l)},angular.noop).finally(function(){n.$emit("$translateRefreshEnd",{language:e})}),e)x[e]?t(e).then(i.resolve,i.reject):i.reject();else{var s=a&&a.slice()||[];l&&-1===s.indexOf(l)&&s.push(l),r.all(s.map(t)).then(i.resolve,i.reject)}return i.promise},U.instant=function(e,t,n,r,o){var s=r&&r!==l?I(r)||r:l;if(null===e||angular.isUndefined(e))return e;if(r&&ue(r),angular.isArray(e)){for(var u={},c=0,d=e.length;c<d;c++)u[e[c]]=U.instant(e[c],t,n,r,o);return u}if(angular.isString(e)&&e.length<1)return e;e&&(e=N.apply(e));var p,h=[];i&&h.push(i),s&&h.push(s),a&&a.length&&(h=h.concat(a));for(var g=0,y=h.length;g<y;g++){var b=h[g];if(x[b]&&void 0!==x[b][e]&&(p=ae(e,t,n,s,o)),void 0!==p)break}if(!p&&""!==p)if(m||v)p=G(e);else{p=R.interpolate(e,t,"filter",o);var w;f&&!P&&(w=ee(e,t,o)),f&&!P&&w&&(p=w)}return p},U.versionInfo=function(){return"2.15.1"},U.loaderCache=function(){return y},U.directivePriority=function(){return E},U.statefulFilter=function(){return L},U.isReady=function(){return T};var ce=r.defer();ce.promise.then(function(){T=!0}),U.onReady=function(e){var t=r.defer();return angular.isFunction(e)&&t.promise.then(e),T?t.resolve():ce.promise.then(t.resolve),t.promise},U.getAvailableLanguageKeys=function(){return w.length>0?w:null},U.getTranslationTable=function(e){return e=e||U.use(),e&&x[e]?angular.copy(x[e]):null};var de=n.$on("$translateReady",function(){ce.resolve(),de(),de=null}),fe=n.$on("$translateChangeEnd",function(){ce.resolve(),fe(),fe=null});if(h){if(angular.equals(x,{})&&U.use()&&U.use(U.use()),a&&a.length)for(var pe=function(e){return j(e.key,e.table),n.$emit("$translateChangeEnd",{language:e.key}),e},he=0,ge=a.length;he<ge;he++){var me=a[he];!$&&x[me]||(W[me]=K(me).then(pe))}}else n.$emit("$translateReady",{language:U.use()});return U}]}function r(e,t){"use strict";var n,r={};return r.setLocale=function(e){n=e},r.getInterpolationIdentifier=function(){return"default"},r.useSanitizeValueStrategy=function(e){return t.useStrategy(e),this},r.interpolate=function(n,r,i,o,a){r=r||{},r=t.sanitize(r,"params",o,i);var s;return angular.isNumber(n)?s=""+n:angular.isString(n)?(s=e(n)(r),s=t.sanitize(s,"text",o,i)):s="",s},r}function i(e,t,n,r,i){"use strict";var a=function(){return this.toString().replace(/^\s+|\s+$/g,"")};return{restrict:"AE",scope:!0,priority:e.directivePriority(),compile:function(s,l){var u=l.translateValues?l.translateValues:void 0,c=l.translateInterpolation?l.translateInterpolation:void 0,d=s[0].outerHTML.match(/translate-value-+/i),f="^(.*)("+t.startSymbol()+".*"+t.endSymbol()+")(.*)",p="^(.*)"+t.startSymbol()+"(.*)"+t.endSymbol()+"(.*)";return function(s,h,g){s.interpolateParams={},s.preText="",s.postText="",s.translateNamespace=o(s);var m={},v=function(e){if(angular.isFunction(v._unwatchOld)&&(v._unwatchOld(),v._unwatchOld=void 0),angular.equals(e,"")||!angular.isDefined(e)){var n=a.apply(h.text()),r=n.match(f);if(angular.isArray(r)){s.preText=r[1],s.postText=r[3],m.translate=t(r[2])(s.$parent);var i=n.match(p);angular.isArray(i)&&i[2]&&i[2].length&&(v._unwatchOld=s.$watch(i[2],function(e){m.translate=e,w()}))}else m.translate=n||void 0}else m.translate=e;w()};!function(e,t,n){if(t.translateValues&&angular.extend(e,r(t.translateValues)(s.$parent)),d)for(var i in n)Object.prototype.hasOwnProperty.call(t,i)&&"translateValue"===i.substr(0,14)&&"translateValues"!==i&&(e[angular.lowercase(i.substr(14,1))+i.substr(15)]=n[i])}(s.interpolateParams,g,l);var y=!0;g.$observe("translate",function(e){void 0===e?v(""):""===e&&y||(m.translate=e,w()),y=!1});for(var b in g)g.hasOwnProperty(b)&&"translateAttr"===b.substr(0,13)&&b.length>13&&function(e){g.$observe(e,function(t){m[e]=t,w()})}(b);if(g.$observe("translateDefault",function(e){s.defaultText=e,w()}),u&&g.$observe("translateValues",function(e){e&&s.$parent.$watch(function(){angular.extend(s.interpolateParams,r(e)(s.$parent))})}),d){for(var x in g)Object.prototype.hasOwnProperty.call(g,x)&&"translateValue"===x.substr(0,14)&&"translateValues"!==x&&function(e){g.$observe(e,function(t){var n=angular.lowercase(e.substr(14,1))+e.substr(15);s.interpolateParams[n]=t})}(x)}var w=function(){for(var e in m)m.hasOwnProperty(e)&&void 0!==m[e]&&_(e,m[e],s,s.interpolateParams,s.defaultText,s.translateNamespace)},_=function(t,n,r,i,o,a){n?(a&&"."===n.charAt(0)&&(n=a+n),e(n,i,c,o,r.translateLanguage).then(function(e){C(e,r,!0,t)},function(e){C(e,r,!1,t)})):C(n,r,!1,t)},C=function(t,r,i,o){if(i||void 0!==r.defaultText&&(t=r.defaultText),"translate"===o){(i||!i&&!e.isKeepContent()&&void 0===g.translateKeepContent)&&h.empty().append(r.preText+t+r.postText);var a=e.isPostCompilingEnabled(),s=void 0!==l.translateCompile,u=s&&"false"!==l.translateCompile;(a&&!s||u)&&n(h.contents())(r)}else{var c=g.$attr[o];"data-"===c.substr(0,5)&&(c=c.substr(5)),c=c.substr(15),h.attr(c,t)}};(u||d||g.translateDefault)&&s.$watch("interpolateParams",w,!0),s.$on("translateLanguageChanged",w);var k=i.$on("$translateChangeSuccess",w);h.text().length?v(g.translate?g.translate:""):g.translate&&v(g.translate),w(),s.$on("$destroy",k)}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function a(e,t){"use strict";return{restrict:"A",priority:e.directivePriority(),link:function(n,r,i){var o,a,l={},u=function(){angular.forEach(o,function(t,o){t&&(l[o]=!0,n.translateNamespace&&"."===t.charAt(0)&&(t=n.translateNamespace+t),e(t,a,i.translateInterpolation,void 0,n.translateLanguage).then(function(e){r.attr(o,e)},function(e){r.attr(o,e)}))}),angular.forEach(l,function(e,t){o[t]||(r.removeAttr(t),delete l[t])})};s(n,i.translateAttr,function(e){o=e},u),s(n,i.translateValues,function(e){a=e},u),i.translateValues&&n.$watch(i.translateValues,u,!0),n.$on("translateLanguageChanged",u);var c=t.$on("$translateChangeSuccess",u);u(),n.$on("$destroy",c)}}}function s(e,t,n,r){"use strict";t&&("::"===t.substr(0,2)?t=t.substr(2):e.$watch(t,function(e){n(e),r()},!0),n(e.$eval(t)))}function l(e,t){"use strict";return{compile:function(n){var r=function(t){t.addClass(e.cloakClassName())},i=function(t){t.removeClass(e.cloakClassName())};return r(n),function(n,o,a){var s=i.bind(this,o),l=r.bind(this,o);a.translateCloak&&a.translateCloak.length?(a.$observe("translateCloak",function(t){e(t).then(s,l)}),t.$on("$translateChangeSuccess",function(){e(a.translateCloak).then(s,l)})):e.onReady(s)}}}}function u(){"use strict";return{restrict:"A",scope:!0,compile:function(){return{pre:function(e,t,n){e.translateNamespace=o(e),e.translateNamespace&&"."===n.translateNamespace.charAt(0)?e.translateNamespace+=n.translateNamespace:e.translateNamespace=n.translateNamespace}}}}}function o(e){"use strict";return e.translateNamespace?e.translateNamespace:e.$parent?o(e.$parent):void 0}function c(){"use strict";return{restrict:"A",scope:!0,compile:function(){return function(e,t,n){n.$observe("translateLanguage",function(t){e.translateLanguage=t}),e.$watch("translateLanguage",function(){e.$broadcast("translateLanguageChanged")})}}}}function d(e,t){"use strict";var n=function(n,r,i,o){if(!angular.isObject(r)){var a=this||{__SCOPE_IS_NOT_AVAILABLE:"More info at https://github.com/angular/angular.js/commit/8863b9d04c722b278fa93c5d66ad1e578ad6eb1f"};r=e(r)(a)}return t.instant(n,r,i,o)};return t.statefulFilter()&&(n.$stateful=!0),n}function f(e){"use strict";return e("translations")}return e.$inject=["$translate"],n.$inject=["$STORAGE_KEY","$windowProvider","$translateSanitizationProvider","pascalprechtTranslateOverrider"],r.$inject=["$interpolate","$translateSanitization"],i.$inject=["$translate","$interpolate","$compile","$parse","$rootScope"],a.$inject=["$translate","$rootScope"],l.$inject=["$translate","$rootScope"],d.$inject=["$parse","$translate"],f.$inject=["$cacheFactory"],angular.module("pascalprecht.translate",["ng"]).run(e),e.displayName="runTranslate",angular.module("pascalprecht.translate").provider("$translateSanitization",t),angular.module("pascalprecht.translate").constant("pascalprechtTranslateOverrider",{}).provider("$translate",n),n.displayName="displayName",angular.module("pascalprecht.translate").factory("$translateDefaultInterpolation",r),r.displayName="$translateDefaultInterpolation",angular.module("pascalprecht.translate").constant("$STORAGE_KEY","NG_TRANSLATE_LANG_KEY"),angular.module("pascalprecht.translate").directive("translate",i),i.displayName="translateDirective",angular.module("pascalprecht.translate").directive("translateAttr",a),a.displayName="translateAttrDirective",angular.module("pascalprecht.translate").directive("translateCloak",l),l.displayName="translateCloakDirective",angular.module("pascalprecht.translate").directive("translateNamespace",u),u.displayName="translateNamespaceDirective",angular.module("pascalprecht.translate").directive("translateLanguage",c),c.displayName="translateLanguageDirective",angular.module("pascalprecht.translate").filter("translate",d),d.displayName="translateFilterFactory",angular.module("pascalprecht.translate").factory("$translationCache",f),f.displayName="$translationCache","pascalprecht.translate"}),function(e,t){"function"==typeof define&&define.amd?define([],function(){return t()}):"object"==typeof exports?module.exports=t():t()}(0,function(){function e(e,t){"use strict";return function(n){if(!(n&&(angular.isArray(n.files)||angular.isString(n.prefix)&&angular.isString(n.suffix))))throw new Error("Couldn't load static files, no files and prefix or suffix specified!");n.files||(n.files=[{prefix:n.prefix,suffix:n.suffix}]);for(var r=[],i=n.files.length,o=0;o<i;o++)r.push(function(r){if(!r||!angular.isString(r.prefix)||!angular.isString(r.suffix))throw new Error("Couldn't load static file, no prefix or suffix specified!");var i=[r.prefix,n.key,r.suffix].join("");return angular.isObject(n.fileMap)&&n.fileMap[i]&&(i=n.fileMap[i]),t(angular.extend({url:i,method:"GET"},n.$http)).then(function(e){return e.data},function(){return e.reject(n.key)})}({prefix:n.files[o].prefix,key:n.key,suffix:n.files[o].suffix}));return e.all(r).then(function(e){for(var t=e.length,n={},r=0;r<t;r++)for(var i in e[r])n[i]=e[r][i];return n})}}return e.$inject=["$q","$http"],angular.module("pascalprecht.translate").factory("$translateStaticFilesLoader",e),e.displayName="$translateStaticFilesLoader","pascalprecht.translate"}),function(e){function t(e,t){return"all"==t?e:e.filter(function(e){return-1!=t.toLowerCase().indexOf(e)})}var n="application/x-dnd",r="application/json",i="Text",o=["move","copy","link"];e.directive("dndDraggable",["$parse","$timeout",function(e,s){return function(l,u,c){u.attr("draggable","true"),c.dndDisableIf&&l.$watch(c.dndDisableIf,function(e){u.attr("draggable",!e)}),u.on("dragstart",function(d){if(d=d.originalEvent||d,"false"==u.attr("draggable"))return!0;a.isDragging=!0,a.itemType=c.dndType&&l.$eval(c.dndType).toLowerCase(),a.dropEffect="none",a.effectAllowed=c.dndEffectAllowed||o[0],d.dataTransfer.effectAllowed=a.effectAllowed;var f=l.$eval(c.dndDraggable),p=n+(a.itemType?"-"+a.itemType:"");try{d.dataTransfer.setData(p,angular.toJson(f))}catch(e){var h=angular.toJson({item:f,type:a.itemType});try{d.dataTransfer.setData(r,h)}catch(e){var g=t(o,a.effectAllowed);d.dataTransfer.effectAllowed=g[0],d.dataTransfer.setData(i,h)}}if(u.addClass("dndDragging"),s(function(){u.addClass("dndDraggingSource")},0),d._dndHandle&&d.dataTransfer.setDragImage&&d.dataTransfer.setDragImage(u[0],0,0),e(c.dndDragstart)(l,{event:d}),c.dndCallback){var m=e(c.dndCallback);a.callback=function(e){return m(l,e||{})}}d.stopPropagation()}),u.on("dragend",function(t){t=t.originalEvent||t,l.$apply(function(){var n=a.dropEffect;e(c[{copy:"dndCopied",link:"dndLinked",move:"dndMoved",none:"dndCanceled"}[n]])(l,{event:t}),e(c.dndDragend)(l,{event:t,dropEffect:n})}),a.isDragging=!1,a.callback=void 0,u.removeClass("dndDragging"),u.removeClass("dndDraggingSource"),t.stopPropagation(),s(function(){u.removeClass("dndDraggingSource")},0)}),u.on("click",function(t){c.dndSelected&&(t=t.originalEvent||t,l.$apply(function(){e(c.dndSelected)(l,{event:t})}),t.stopPropagation())}),u.on("selectstart",function(){this.dragDrop&&this.dragDrop()})}}]),e.directive("dndList",["$parse",function(e){return function(s,l,u){function c(e){if(!e)return i;for(var t=0;t<e.length;t++)if(e[t]==i||e[t]==r||e[t].substr(0,n.length)==n)return e[t];return null}function d(e){return a.isDragging?a.itemType||void 0:e==i||e==r?null:e&&e.substr(n.length+1)||void 0}function f(e){return!x.disabled&&(!(!x.externalSources&&!a.isDragging)&&(!x.allowedTypes||null===e||e&&-1!=x.allowedTypes.indexOf(e)))}function p(e,n){var r=o;return n||(r=t(r,e.dataTransfer.effectAllowed)),a.isDragging&&(r=t(r,a.effectAllowed)),u.dndEffectAllowed&&(r=t(r,u.dndEffectAllowed)),r.length?e.ctrlKey&&-1!=r.indexOf("copy")?"copy":e.altKey&&-1!=r.indexOf("link")?"link":r[0]:"none"}function h(){return v.remove(),l.removeClass("dndDragover"),!0}function g(t,n,r,i,o,l){return e(t)(s,{callback:a.callback,dropEffect:r,event:n,external:!a.isDragging,index:void 0!==o?o:m(),item:l||void 0,type:i})}function m(){return Array.prototype.indexOf.call(b.children,y)}var v=function(){var e;return angular.forEach(l.children(),function(t){var n=angular.element(t);n.hasClass("dndPlaceholder")&&(e=n)}),e||angular.element("<li class='dndPlaceholder'></li>")}();v.remove();var y=v[0],b=l[0],x={};l.on("dragenter",function(e){e=e.originalEvent||e;var t=u.dndAllowedTypes&&s.$eval(u.dndAllowedTypes);x={allowedTypes:angular.isArray(t)&&t.join("|").toLowerCase().split("|"),disabled:u.dndDisableIf&&s.$eval(u.dndDisableIf),externalSources:u.dndExternalSources&&s.$eval(u.dndExternalSources),horizontal:u.dndHorizontalList&&s.$eval(u.dndHorizontalList)};var n=c(e.dataTransfer.types);if(!n||!f(d(n)))return!0;e.preventDefault()}),l.on("dragover",function(e){var t=c((e=e.originalEvent||e).dataTransfer.types),n=d(t);if(!t||!f(n))return!0;if(y.parentNode!=b&&l.append(v),e.target!=b){for(var r=e.target;r.parentNode!=b&&r.parentNode;)r=r.parentNode;if(r.parentNode==b&&r!=y){var o=r.getBoundingClientRect();if(x.horizontal)a=e.clientX<o.left+o.width/2;else var a=e.clientY<o.top+o.height/2;b.insertBefore(y,a?r:r.nextSibling)}}var s=t==i,m=p(e,s);return"none"==m?h():u.dndDragover&&!g(u.dndDragover,e,m,n)?h():(e.preventDefault(),s||(e.dataTransfer.dropEffect=m),l.addClass("dndDragover"),e.stopPropagation(),!1)}),l.on("drop",function(e){var t=c((e=e.originalEvent||e).dataTransfer.types),n=d(t);if(!t||!f(n))return!0;e.preventDefault();try{var o=JSON.parse(e.dataTransfer.getData(t))}catch(e){return h()}if((t==i||t==r)&&(n=o.type||void 0,o=o.item,!f(n)))return h();var l=t==i,v=p(e,l);if("none"==v)return h();var y=m();return u.dndDrop&&!(o=g(u.dndDrop,e,v,n,y,o))?h():(a.dropEffect=v,l||(e.dataTransfer.dropEffect=v),!0!==o&&s.$apply(function(){s.$eval(u.dndList).splice(y,0,o)}),g(u.dndInserted,e,v,n,y,o),h(),e.stopPropagation(),!1)}),l.on("dragleave",function(e){e=e.originalEvent||e;var t=document.elementFromPoint(e.clientX,e.clientY);b.contains(t)&&!e._dndPhShown?e._dndPhShown=!0:h()})}}]),e.directive("dndNodrag",function(){return function(e,t,n){t.attr("draggable","true"),t.on("dragstart",function(e){(e=e.originalEvent||e)._dndHandle||(e.dataTransfer.types&&e.dataTransfer.types.length||e.preventDefault(),e.stopPropagation())}),t.on("dragend",function(e){(e=e.originalEvent||e)._dndHandle||e.stopPropagation()})}}),e.directive("dndHandle",function(){return function(e,t,n){t.attr("draggable","true"),t.on("dragstart dragend",function(e){(e=e.originalEvent||e)._dndHandle=!0})}});var a={}}(angular.module("dndLists",[])),function(e,t){if("function"==typeof define&&define.amd)define("DataTable",["exports"],t);else if("undefined"!=typeof exports)t(exports);else{var n={exports:{}};t(n.exports),e.DataTable=n.exports}}(this,function(e){"use strict";function t(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function r(e,t){return{restrict:"A",scope:{isResizable:"=resizable",minWidth:"=",maxWidth:"=",onResize:"&"},link:function(n,r){function i(e){e=e.originalEvent||e;var t=s[0].clientWidth+(e.movementX||e.mozMovementX||e.screenX-l||0);l=e.screenX,(!n.minWidth||t>=n.minWidth)&&(!n.maxWidth||t<=n.maxWidth)&&s.css({width:t+"px"})}function o(){n.onResize&&t(function(){var e=s[0].clientWidth;e<n.minWidth&&(e=n.minWidth),n.onResize({width:e})}),e.unbind("mousemove",i),e.unbind("mouseup",o)}n.isResizable&&r.addClass("resizable");var a=angular.element('<span class="dt-resize-handle" title="Resize"></span>'),s=r.parent(),l=void 0;a.on("mousedown",function(t){r[0].classList.contains("resizable")&&(t.stopPropagation(),t.preventDefault(),e.on("mousemove",i),e.on("mouseup",o))}),r.append(a)}}}function i(){return{restrict:"A",scope:{isSortable:"=sortable",onSortableSort:"&"},link:function(e,t){function n(e,t){if(e.parentNode===t.parentNode)for(var n=e;n;n=n.previousSibling)if(n===t)return!0;return!1}function r(e){var t=e.target;n(a,t)?t.parentNode.insertBefore(a,t):t.nextSibling&&t.hasAttribute("draggable")&&t.parentNode.insertBefore(a,t.nextSibling.nextSibling)}function i(n){n.preventDefault(),a.classList.remove("dt-clone"),t.off("dragend",i),t.off("dragenter",r),s!==a.nextSibling&&e.onSortableSort({event:n,columnId:angular.element(a).attr("data-id")})}function o(n){e.isSortable&&(n=n.originalEvent||n,a=n.target,s=a.nextSibling,a.classList.add("dt-clone"),n.dataTransfer.effectAllowed="move",n.dataTransfer.setData("Text",a.textContent),t.on("dragenter",r),t.on("dragend",i))}var a=void 0,s=void 0;t.on("dragstart",o),e.$on("$destroy",function(){t.off("dragstart",o)})}}}function o(){return Math.floor((new Date).getTime()/1e3).toString(16)+"xxxxxxxxxxxxxxxx".replace(/[x]/g,function(){return Math.floor(16*Math.random()).toString(16)}).toLowerCase()}function a(e){for(var t={left:[],center:[],right:[]},n=0,r=e.length;n<r;n+=1){var i=e[n];i.frozenLeft?t.left.push(i):i.frozenRight?t.right.push(i):t.center.push(i)}return t}function s(e,t){return{left:p(e.left),center:p(e.center),right:p(e.right),total:p(t)}}function l(e,t){if(!e||!t)return e;var n=t.split("."),r=e;if(n.length)for(var i=0,o=n.length;i<o;i+=1)r=r[n[i]];return r}function u(e){return e=e.replace(/[^a-zA-Z0-9 ]/g," "),e=e.replace(/([a-z](?=[A-Z]))/g,"$1 "),e=e.replace(/([^a-zA-Z0-9 ])|^[0-9]+/g,"").trim().toLowerCase(),e=e.replace(/([ 0-9]+)([a-zA-Z])/g,function(e,t,n){return t.trim()+n.toUpperCase()})}function c(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),t-r}function d(e,t){if("single"===e)return"asc"===t?"desc":"asc";if(!t)return"asc";if("asc"===t)return"desc"}function f(){return 1===angular.version.major&&angular.version.minor<5}function p(e,t){var n=0;return e.forEach(function(e){var r=t&&e[t];n+=r?e[t]:e.width}),n}function h(e){var t=0;return e.forEach(function(e){t+=e.flexGrow||0}),t}function g(e,t){var n=p(e),r=h(e),i=a(e);n!==t&&m(i,t,r)}function m(e,t,n){function r(e,t){e.forEach(function(e,n){if(e.canAutoResize&&!i[n]){var r=e.width+e.flexGrow*t;angular.isDefined(e.minWidth)&&r<e.minWidth?(o+=r-e.minWidth,e.width=e.minWidth,i[n]=!0):e.width=r}})}angular.forEach(e,function(e){e.forEach(function(e){e.canAutoResize?e.width=0:(t-=e.width,n-=e.flexGrow)})});var i={},o=t;do{!function(){var t=o/n;o=0,angular.forEach(e,function(e){r(e,t)})}()}while(0!==o)}function v(e,t,n){var r=0,i=n>-1?e.slice(n,e.length).filter(function(e){return e.canAutoResize}):e.filter(function(e){return e.canAutoResize});e.forEach(function(e){e.canAutoResize?r+=e.$$oldWidth||e.width:r+=e.width});var o=(t-r)/i.length,a=r>t;i.forEach(function(e){if(a)e.width=e.$$oldWidth||e.width;else{e.$$oldWidth||(e.$$oldWidth=e.width);var t=e.$$oldWidth+o;e.minWith&&t<e.minWidth?e.width=e.minWidth:e.maxWidth&&t>e.maxWidth?e.width=e.maxWidth:e.width=t}})}function y(e,t,n){return{restrict:"E",replace:!0,controller:V,scope:!0,bindToController:{options:"=",rows:"=",selected:"=?",expanded:"=?",onSelect:"&",onSort:"&",onTreeToggle:"&",onPage:"&",onRowClick:"&",onRowDblClick:"&",onColumnResize:"&"},controllerAs:"dt",template:function(e){var t=e[0].getElementsByTagName("column"),n=o();return B.saveColumns(n,t),'<div class="dt" ng-class="dt.tableCss()" data-column-id="'+n+'">\n          <dt-header options="dt.options"\n                     columns="dt.columnsByPin"\n                     column-widths="dt.columnWidths"\n                     ng-if="dt.options.headerHeight"\n                     on-resize="dt.onResized(column, width)"\n                     selected-rows="dt.selected"\n                     all-rows="dt.rows"\n                     on-sort="dt.onSorted()">\n          </dt-header>\n          <dt-body rows="dt.rows"\n                   selected="dt.selected"\n                   expanded="dt.expanded"\n                   columns="dt.columnsByPin"\n                   on-select="dt.onSelected(rows)"\n                   on-row-click="dt.onRowClicked(row)"\n                   on-row-dbl-click="dt.onRowDblClicked(row)"\n                   column-widths="dt.columnWidths"\n                   options="dt.options"\n                   on-page="dt.onBodyPage(offset, size)"\n                   on-tree-toggle="dt.onTreeToggled(row, cell)">\n           </dt-body>\n          <dt-footer ng-if="dt.options.footerHeight || dt.options.paging.mode"\n                     ng-style="{ height: dt.options.footerHeight + \'px\' }"\n                     on-page="dt.onFooterPage(offset, size)"\n                     paging="dt.options.paging">\n           </dt-footer>\n        </div>'},compile:function(){return{pre:function(r,i,o,a){function s(){var e=i[0].getBoundingClientRect();if(a.options.internal.innerWidth=Math.floor(e.width),a.options.scrollbarV){var t=e.height;a.options.headerHeight&&(t-=a.options.headerHeight),a.options.footerHeight&&(t-=a.options.footerHeight),a.options.internal.bodyHeight=t,a.calculatePageSize()}a.adjustColumns(),a.options.internal.setYOffset()}function l(){t(s)}B.buildColumns(r,n);var u=i.attr("data-column-id"),d=B.columns[u];d&&(a.options.columns=d),a.inheritColumnSortableProps(),a.transposeColumnDefaults(),a.options.internal.scrollBarWidth=c(),r.$on("dt-resize",l),e.addEventListener("resize",l);!function e(){var n=i[0].getBoundingClientRect();n.width&&n.height?s():t(e,100)}(),i.addClass("dt-loaded"),r.$on("$destroy",function(){angular.element(e).off("resize")})}}}}}function b(e){var t=u(e);return W[t]||(angular.isDefined(U[G.css+e])?W[t]=G.css+e:angular.isDefined(U[e])&&(W[t]=e)),W[t]}function x(e,t,n){J?!Q&&Z?(e[K]="translate3d("+t+"px, "+n+"px, 0)",e[X]="hidden"):e[u(K)]="translate("+t+"px, "+n+"px)":(e.top=n+"px",e.left=t+"px")}function w(e){return{restrict:"E",controller:ee,controllerAs:"header",scope:!0,bindToController:{options:"=",columns:"=",columnWidths:"=",selectedRows:"=?",allRows:"=",onSort:"&",onResize:"&"},template:'\n      <div class="dt-header" ng-style="header.styles()">\n        <div class="dt-header-inner" ng-style="header.innerStyles()">\n          <div class="dt-row-left"\n               ng-style="header.stylesByGroup(\'left\')"\n               ng-if="header.columns[\'left\'].length"\n               sortable="header.options.reorderable"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'left\'] track by column.$id"\n              on-sort="header.onSorted(column, modifierPressed)"\n              options="header.options"\n              sort-type="header.options.sortType"\n              on-resize="header.onResized(column, width)"\n              all-rows="header.allRows"\n              column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-center"\n               sortable="header.options.reorderable"\n               ng-style="header.stylesByGroup(\'center\')"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'center\'] track by column.$id"\n              on-checkbox-change="header.onCheckboxChanged()"\n              on-sort="header.onSorted(column, modifierPressed)"\n              sort-type="header.options.sortType"\n              selected="header.isSelected()"\n              on-resize="header.onResized(column, width)"\n              options="header.options"\n              column="column">\n            </dt-header-cell>\n          </div>\n          <div class="dt-row-right"\n               ng-if="header.columns[\'right\'].length"\n               sortable="header.options.reorderable"\n               ng-style="header.stylesByGroup(\'right\')"\n               on-sortable-sort="columnsResorted(event, columnId)">\n            <dt-header-cell\n              ng-repeat="column in header.columns[\'right\'] track by column.$id"\n              on-checkbox-change="header.onCheckboxChanged()"\n              on-sort="header.onSorted(column, modifierPressed)"\n              sort-type="header.options.sortType"\n              selected="header.isSelected()"\n              on-resize="header.onResized(column, width)"\n              options="header.options"\n              column="column">\n            </dt-header-cell>\n          </div>\n        </div>\n      </div>',replace:!0,link:function(t,n,r,i){t.columnsResorted=function(t,n){var r=o(n),a=angular.element(t.currentTarget),s=-1;angular.forEach(a.children(),function(e,t){n===angular.element(e).attr("data-id")&&(s=t)}),e(function(){angular.forEach(i.columns,function(e){if(e.indexOf(r)>-1){var t=e[s],n=i.options.columns.indexOf(t),o=i.options.columns.indexOf(r);return i.options.columns.splice(o,1),i.options.columns.splice(n,0,r),!1}})})};var o=function(e){return i.columns.left.concat(i.columns.center).concat(i.columns.right).find(function(t){return t.$id===e})}}}}function _(e){return{restrict:"E",controller:te,controllerAs:"hcell",scope:!0,bindToController:{options:"=",column:"=",onSort:"&",sortType:"=",onResize:"&",selected:"="},replace:!0,template:'<div ng-class="hcell.cellClass()"\n            class="dt-header-cell"\n            draggable="true"\n            data-id="{{column.$id}}"\n            ng-style="hcell.styles()"\n            title="{{::hcell.column.name}}">\n        <div resizable="hcell.column.resizable"\n             on-resize="hcell.onResized(width, hcell.column)"\n             min-width="hcell.column.minWidth"\n             max-width="hcell.column.maxWidth">\n          <label ng-if="hcell.column.isCheckboxColumn && hcell.column.headerCheckbox" class="dt-checkbox">\n            <input type="checkbox"\n                   ng-model="hcell.column.allRowsSelected"\n                   ng-change="hcell.checkboxChangeCallback()" />\n          </label>\n          <span class="dt-header-cell-label"\n                ng-click="hcell.onSorted($event)">\n          </span>\n          <span ng-class="hcell.sortClass()">{{hcell.column.sortPriority}}</span>\n        </div>\n      </div>',compile:function(){return{pre:function(t,n,r,i){var o=n[0].querySelector(".dt-header-cell-label"),a=void 0;if((i.column.headerTemplate||i.column.headerRenderer)&&((a=i.options.$outer.$new(!1)).$header=i.column.name,a.$index=t.$index),i.column.headerTemplate){var s=angular.element("<span>"+i.column.headerTemplate.trim()+"</span>");angular.element(o).append(e(s)(a))}else if(i.column.headerRenderer){var l=angular.element(i.column.headerRenderer(n));angular.element(o).append(e(l)(a)[0])}else{var u=i.column.name;(angular.isUndefined(u)||null===u)&&(u=""),o.textContent=u}}}}}}function C(){return{restrict:"E",controller:re,controllerAs:"body",bindToController:{columns:"=",columnWidths:"=",rows:"=",options:"=",selected:"=?",expanded:"=?",onPage:"&",onTreeToggle:"&",onSelect:"&",onRowClick:"&",onRowDblClick:"&"},scope:!0,template:'\n      <div\n        class="progress-linear"\n        role="progressbar"\n        ng-show="body.options.loadingIndicator">\n        <div class="container">\n          <div class="bar"></div>\n        </div>\n      </div>\n      <div class="dt-body" ng-style="body.styles()" dt-selection>\n        <dt-scroller class="dt-body-scroller">\n          <dt-group-row ng-repeat-start="r in body.tempRows track by $index"\n                        ng-if="r.group"\n                        ng-style="body.groupRowStyles(r)"\n                        options="body.options"\n                        on-group-toggle="body.onGroupToggle(group)"\n                        expanded="body.getRowExpanded(r)"\n                        tabindex="{{$index}}"\n                        row="r">\n          </dt-group-row>\n          <dt-row ng-repeat-end\n                  ng-if="!r.group"\n                  row="body.getRowValue($index)"\n                  tabindex="{{$index}}"\n                  columns="body.columns"\n                  column-widths="body.columnWidths"\n                  ng-keydown="selCtrl.keyDown($event, $index, r)"\n                  ng-click="selCtrl.rowClicked($event, r.$$index, r)"\n                  ng-dblclick="selCtrl.rowDblClicked($event, r.$$index, r)"\n                  on-tree-toggle="body.onTreeToggled(row, cell)"\n                  ng-class="body.rowClasses(r)"\n                  options="body.options"\n                  selected="body.isSelected(r)"\n                  on-checkbox-change="selCtrl.onCheckboxChange($event, $index, row)"\n                  columns="body.columnsByPin"\n                  has-children="body.getRowHasChildren(r)"\n                  expanded="body.getRowExpanded(r)"\n                  ng-style="body.rowStyles(r)">\n          </dt-row>\n        </dt-scroller>\n        <div ng-if="body.rows && !body.rows.length"\n             class="empty-row"\n             ng-bind="::body.options.emptyMessage">\n       </div>\n       <div ng-if="body.rows === undefined"\n             class="loading-row"\n             ng-bind="::body.options.loadingMessage">\n        </div>\n      </div>'}}function k(e){return{restrict:"E",require:"^dtBody",transclude:!0,replace:!0,template:'<div ng-style="scrollerStyles()" ng-transclude></div>',link:function(e,t,n,r){function i(){r.options.internal.offsetY=u,r.options.internal.offsetX=c,r.updatePage(),r.options.scrollbarV&&(r.getRows(!0),r.scrollYApplied&&(r.options.internal.scrollY=u)),r.options.$outer.$digest(),l=!1}function o(){l||(H(i),l=!0)}function a(){u=this.scrollTop,c=this.scrollLeft,o()}var s=t.parent(),l=!1,u=0,c=0;r.options.internal.styleTranslator=new ie(r.options.rowHeight),r.options.internal.setYOffset=function(e){s.prop("scrollHeight")>0&&(r.options.internal&&r.options.internal.scrollY&&!r.scrollYApplied?(s[0].scrollTop=r.options.internal.scrollY,r.scrollYApplied=!0):s[0].scrollTop=e,r.scrollYApplied=!0)},s.on("scroll",a),e.$on("$destroy",function(){s.off("scroll")}),e.scrollerStyles=function(){if(r.options.scrollbarV)return{height:r.count*r.options.rowHeight+"px"}},r.scrollerMove=function(){r.options&&r.options.scrollTop&&s.scrollTop(r.options.scrollTop),u=s.scrollTop(),c=s.scrollLeft(),o()},r.scrollerMove()}}}function S(){return{controller:ae,restrict:"A",require:"^dtBody",controllerAs:"selCtrl"}}function $(){return{restrict:"E",controller:se,controllerAs:"rowCtrl",scope:!0,bindToController:{row:"=",columns:"=",columnWidths:"=",expanded:"=",selected:"=",hasChildren:"=",options:"=",onCheckboxChange:"&",onTreeToggle:"&"},link:function(e,t,n,r){r.row&&x(t[0].style,0,r.row.$$index*r.options.rowHeight),r.options.internal.styleTranslator.register(e.$index,t)},template:'\n      <div class="dt-row">\n        <div class="dt-row-left dt-row-block"\n             ng-if="rowCtrl.columns[\'left\'].length"\n             ng-style="rowCtrl.stylesByGroup(\'left\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'left\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   selected="rowCtrl.selected"\n                   expanded="rowCtrl.expanded"\n                   row="rowCtrl.row"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-center dt-row-block"\n             ng-style="rowCtrl.stylesByGroup(\'center\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'center\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   expanded="rowCtrl.expanded"\n                   selected="rowCtrl.selected"\n                   row="rowCtrl.row"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n        <div class="dt-row-right dt-row-block"\n             ng-if="rowCtrl.columns[\'right\'].length"\n             ng-style="rowCtrl.stylesByGroup(\'right\')">\n          <dt-cell ng-repeat="column in rowCtrl.columns[\'right\'] track by column.$id"\n                   on-tree-toggle="rowCtrl.onTreeToggled(cell)"\n                   column="column"\n                   options="rowCtrl.options"\n                   has-children="rowCtrl.hasChildren"\n                   selected="rowCtrl.selected"\n                   on-checkbox-change="rowCtrl.onCheckboxChanged($event)"\n                   row="rowCtrl.row"\n                   expanded="rowCtrl.expanded"\n                   value="rowCtrl.getValue(column)">\n          </dt-cell>\n        </div>\n      </div>',replace:!0}}function M(){return{restrict:"E",controller:le,controllerAs:"group",bindToController:{row:"=",onGroupToggle:"&",expanded:"=",options:"="},scope:!0,replace:!0,template:'\n      <div class="dt-group-row">\n        <span ng-class="group.treeClass()"\n              ng-click="group.onGroupToggled($event)">\n        </span>\n        <span class="dt-group-row-label" ng-bind="group.row.name">\n        </span>\n      </div>',link:function(e,t,n,r){x(t[0].style,0,r.row.$$index*r.options.rowHeight),r.options.internal.styleTranslator.register(e.$index,t)}}}function T(e,t){return{restrict:"E",controller:ue,scope:!0,controllerAs:"cell",bindToController:{options:"=",value:"=",selected:"=",column:"=",row:"=",expanded:"=",hasChildren:"=",onTreeToggle:"&",onCheckboxChange:"&"},template:'<div class="dt-cell"\n            data-title="{{::cell.column.name}}"\n            ng-style="cell.styles()"\n            ng-class="cell.cellClass()">\n        <label ng-if="cell.column.isCheckboxColumn" class="dt-checkbox">\n          <input type="checkbox"\n                 ng-checked="cell.selected"\n                 ng-click="cell.onCheckboxChanged($event)" />\n        </label>\n        <span ng-if="cell.column.isTreeColumn && cell.hasChildren"\n              ng-class="cell.treeClass()"\n              ng-click="cell.onTreeToggled($event)"></span>\n        <span class="dt-cell-content"></span>\n      </div>',replace:!0,compile:function(){return{pre:function(e,n,r,i){function o(){(s=i.options.$outer.$new(!1)).getValue=i.getValue}var a=angular.element(n[0].querySelector(".dt-cell-content")),s=void 0;(i.column.template||i.column.cellRenderer)&&o(),e.$watch("cell.row",function(){if(s&&(s.$destroy(),o(),s.$cell=i.value,s.$row=i.row,s.$column=i.column,s.$$watchers=null),i.column.template){a.empty();var e=angular.element("<span>"+i.column.template.trim()+"</span>");a.append(t(e)(s))}else if(i.column.cellRenderer){a.empty();var n=angular.element(i.column.cellRenderer(s,a));a.append(t(n)(s))}else a[0].innerHTML=i.getValue()},!0)}}}}}function D(){return{restrict:"E",controller:ce,controllerAs:"footer",scope:!0,bindToController:{paging:"=",onPage:"&"},template:'<div class="dt-footer">\n        <div class="page-count">{{footer.paging.count}} total</div>\n        <dt-pager page="footer.page"\n               size="footer.paging.size"\n               count="footer.paging.count"\n               on-page="footer.onPaged(page)"\n               ng-show="footer.paging.count / footer.paging.size > 1">\n         </dt-pager>\n      </div>',replace:!0}}function E(){return{restrict:"E",controller:de,controllerAs:"pager",scope:!0,bindToController:{page:"=",size:"=",count:"=",onPage:"&"},template:'<div class="dt-pager">\n        <ul class="pager">\n          <li ng-class="{ disabled: !pager.canPrevious() }">\n            <a href ng-click="pager.selectPage(1)" class="icon-prev"></a>\n          </li>\n          <li ng-class="{ disabled: !pager.canPrevious() }">\n            <a href ng-click="pager.prevPage()" class="icon-left"></a>\n          </li>\n          <li ng-repeat="pg in pager.pages track by $index" ng-class="{ active: pg.active }">\n            <a href ng-click="pager.selectPage(pg.number)">{{pg.text}}</a>\n          </li>\n          <li ng-class="{ disabled: !pager.canNext() }">\n            <a href ng-click="pager.nextPage()" class="icon-right"></a>\n          </li>\n          <li ng-class="{ disabled: !pager.canNext() }">\n            <a href ng-click="pager.selectPage(pager.totalPages)" class="icon-skip"></a>\n          </li>\n        </ul>\n      </div>',replace:!0}}function L(e,t,n,r,i,o,a,s,l){function u(e,t){return e?angular.isString(e)&&t?e:o.get(e)||r.get(e,{cache:!0}):""}function c(e){return e=!(!e||0===e.length)&&"true"===e.toString().toLowerCase()}return{restrict:"A",scope:!0,replace:!1,link:function(r,o,d){function f(){r.exitTimeout=a(b,500)}function p(){a.cancel(r.exitTimeout)}function h(){p();var e=n[0].getElementById(r.options.popoverId);r.popover&&e||(r.options.text&&!r.options.template?m():g())}function g(){i.when(u(r.options.template,r.options.plain)).then(function(e){angular.isString(e)||(e=e.data&&angular.isString(e.data)?e.data:""),v("template"),r.popover.html(e),t(r.popover)(r),angular.element(n.body).append(r.popover),x(o,r.popover,r.options),y()})}function m(){v("text"),r.popover.html(r.options.text),angular.element(n[0].body).append(r.popover),y()}function v(e){r.popover=angular.element('<div\n          class="dt-popover popover'+r.options.placement+'"\n          id="'+r.options.popoverId+'"></div>'),"text"===e&&r.popover.addClass("popover-text")}function y(){x(o,r.popover,r.options),r.popover.on("mouseleave",f),r.popover.on("mousemove",p),s.add(r.options.popoverId,{element:o,popover:r.popover})}function b(){r.popover&&(r.popover.off(),r.popover.remove()),r.popover=null,s.remove(r.options.popoverId)}function x(t,n,i){a(function(){function o(){return l.calculateVerticalAlignment(s,u,i.alignment)}function a(){return l.calculateHorizontalAlignment(s,u,i.alignment)}var s=t[0].getBoundingClientRect(),u=n[0].getBoundingClientRect(),c=void 0,d=void 0;i.placement===fe.RIGHT?(d=s.left+s.width+i.spacing,c=o()):i.placement===fe.LEFT?(d=s.left-u.width-i.spacing,c=o()):i.placement===fe.TOP?(c=s.top-u.height-i.spacing,d=a()):i.placement===fe.BOTTOM&&(c=s.top+s.height+i.spacing,d=a()),n.css({top:c+"px",left:d+"px",height:"300px"}),r.options.showCaret&&w(r.popover,s,u),e.addClass(r.popover,"popover-animation")},50)}function w(e,t,n){function i(){return l.calculateVerticalCaret(t,n,s,r.options.alignment)}function o(){return l.calculateHorizontalCaret(t,n,s,r.options.alignment)}var a=angular.element('<span class="popover-caret caret-'+r.options.placement+'"></span>');e.append(a);var s=a[0].getBoundingClientRect(),u=void 0,c=void 0;r.options.placement===fe.RIGHT?(u=-6,c=i()):r.options.placement===fe.LEFT?(u=n.width-2,c=i()):r.options.placement===fe.TOP?(c=n.height-5,u=o()):r.options.placement===fe.BOTTOM&&(c=-8,u=o()),a.css({top:c+"px",left:u+"px"})}r.popover=null,r.options={alignment:d.popoverAlignment||"middle",placement:d.popoverPlacement||"right",plain:c(d.popoverPlain||!1),popoverId:d.popoverId,showCaret:c(d.popoverPlain||!1),spacing:parseInt(d.popoverSpacing,10)||0,template:d.popoverTemplate,text:d.popoverText},r.$on("$destroy",function(){o.off()}),o.on("mouseenter",h),o.on("mouseleave",f),o.on("mousemove",p)}}}function A(){var e={};return{add:function(t,n){return e[t]=n,e[t]},find:function(t){return e[t]},remove:function(t){delete e[t]}}}function R(e){function t(e){var t=0;return e.forEach(function(e,n){t=0===n?t+=e:t-=e}),t}return{calculateHorizontalAlignment:function(t,n,r){switch(r){case fe.LEFT:return t.left;case fe.RIGHT:return t.left+(t.width-n.width);case fe.CENTER:return t.left+(t.width/2-n.width/2);default:return e.warn("calculateHorizontalAlignment issue",this)}},calculateVerticalAlignment:function(t,n,r){switch(r){case fe.TOP:return t.top;case fe.BOTTOM:return t.top+(t.height-n.height);case fe.MIDDLE:return t.top+(t.height/2-n.height/2);default:return e.warn("calculateVerticalAlignment issue",this)}},calculateVerticalCaret:function(n,r,i,o){switch(o){case fe.TOP:return t([n.height/2,i.height/2,1]);case fe.BOTTOM:return t([r.height,n.height/2,i.height/2,1]);case fe.MIDDLE:return t([r.height/2,i.height/2,1]);default:return e.warn("calculateVerticalCaret issue",this)}},calculateHorizontalCaret:function(n,r,i,o){switch(o){case fe.LEFT:return t([n.width/2,i.height/2,1]);case fe.RIGHT:return t([r.width,n.width/2,i.height/2,1]);case fe.CENTER:return t([r.width/2,i.height/2,1]);default:return e.warn("calculateHorizontalCaret issue",this)}}}}function P(){return{restrict:"E",controller:"MenuController",controllerAs:"dtm",scope:{current:"=",available:"="},template:'<div class="dt-menu dropdown" close-on-click="false">\n        <a href="#" class="dropdown-toggle icon-add">\n          Configure Columns\n        </a>\n        <div class="dropdown-menu" role="menu" aria-labelledby="dropdown">\n          <div class="keywords">\n            <input type="text"\n                   click-select\n                   placeholder="Filter columns..."\n                   ng-model="columnKeyword"\n                   autofocus />\n          </div>\n          <ul>\n            <li ng-repeat="column in available | filter:columnKeyword">\n              <label class="dt-checkbox">\n                <input type="checkbox"\n                       ng-checked="dtm.isChecked(column)"\n                       ng-click="dtm.onCheck(column)">\n                {{column.name}}\n              </label>\n            </li>\n          </ul>\n        </div>\n      </div>'}}function F(e,t){return{restrict:"C",controller:"DropdownController",link:function(n,r){function i(e){r[0].contains(e.target)||t(function(){n.open=!1,a()})}function o(e){27===e.which&&t(function(){n.open=!1,a()})}function a(){e.unbind("click",i),e.unbind("keydown",o)}n.$watch("open",function(t){t&&(e.bind("click",i),e.bind("keydown",o))})}}}function O(e){return{restrict:"C",controller:"DropdownController",require:"?^dropdown",link:function(t,n,r,i){function o(t){t.preventDefault(),e(function(){i.toggle()})}function a(){n.unbind("click",o)}n.bind("click",o),t.$on("$destroy",a)}}}function N(e){return{restrict:"C",require:"?^dropdown",link:function(t,n){t.$watch("open",function(){e[t.open?"addClass":"removeClass"](n,"ddm-open")})}}}R.$inject=["$log"],L.$inject=["$animate","$compile","$document","$http","$q","$templateCache","$timeout","PopoverRegistry","PositionHelper"],F.$inject=["$document","$timeout"],O.$inject=["$timeout"],N.$inject=["$animate"],y.$inject=["$window","$timeout","$parse"],r.$inject=["$document","$timeout"],w.$inject=["$timeout"],_.$inject=["$compile"],T.$inject=["$rootScope","$compile"],k.$inject=["$timeout"],Object.defineProperty(e,"__esModule",{value:!0});var I=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},j=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}();!function(){Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.find called on null or undefined");if(!angular.isFunction(e))throw new TypeError("predicate must be a function");for(var n=Object(this),r=n.length>>>0,i=void 0,o=0;o<r;o+=1)if(i=n[o],e.call(t,i,o,n))return i}}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e,t){if(null==this)throw new TypeError("Array.prototype.findIndex called on null or undefined");if(!angular.isFunction(e))throw new TypeError("predicate must be a function");for(var n=Object(this),r=n.length>>>0,i=void 0,o=0;o<r;o+=1)if(i=n[o],e.call(t,i,o,n))return o;return-1},enumerable:!1,configurable:!1,writable:!1})}();var Y={checkboxSelection:!1,columnMode:"standard",emptyMessage:"No data to display",footerHeight:0,headerHeight:30,internal:{offsetX:0,offsetY:0,innerWidth:0,bodyHeight:300},loadingIndicator:!1,loadingMessage:"Loading...",multiSelect:!1,paging:{count:0,offset:0,mode:null,size:10},reorderable:!0,rowHeight:30,scrollbarV:!0,selectable:!1,sortable:!0,sortType:"multiple",modifierActive:!0},z={canAutoResize:!0,cellDataGetter:void 0,cellRenderer:void 0,className:void 0,comparator:void 0,flexGrow:0,frozenLeft:!1,frozenRight:!1,group:!1,headerCheckbox:!1,headerClassName:void 0,headerRenderer:void 0,isCheckboxColumn:!1,isTreeColumn:!1,maxWidth:void 0,minWidth:100,resizable:!0,sort:void 0,sortable:!0,sortBy:void 0,width:150},H=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){window.setTimeout(e,1e3/60)}}(),V=function(){function e(t,r){n(this,e),I(this,{$scope:t,$filter:r}),f()&&this.$onInit()}return e.$inject=["$scope","$filter"],j(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.defaults(),this.options.$outer=this.$scope.$parent,this.$scope.$watch("dt.options.columns",function(t,n){e.transposeColumnDefaults(),t.length!==n.length&&e.adjustColumns(),e.calculateColumns()},!0),this.$scope.$watchCollection("dt.rows",function(t,n){t&&n&&t.length>n.length&&e.onSorted()})}},{key:"defaults",value:function(){var e=this;this.expanded=this.expanded||{},this.options=I({},Y,this.options),angular.forEach(Y.paging,function(t,n){e.options.paging[n]||(e.options.paging[n]=t)}),this.options.selectable&&this.options.multiSelect&&(this.selected=this.selected||[],this.$scope.$watch("dt.selected",function(){angular.forEach(e.options.columns,function(t){t.headerCheckbox&&angular.isFunction(t.headerCheckboxCallback)&&t.headerCheckboxCallback(e)})},!0))}},{key:"transposeColumnDefaults",value:function(){for(var e=this,t=0,n=this.options.columns.length;t<n;t+=1)!function(t,n){var r=e.options.columns[t];r.$id=o(),angular.forEach(z,function(e,t){Object.prototype.hasOwnProperty.call(r,t)||(r[t]=e)}),r.name&&!r.prop&&(r.prop=u(r.name)),e.options.columns[t]=r}(t)}},{key:"inheritColumnSortableProps",value:function(){var e=this;angular.forEach(this.options.columns,function(t){t.sortable=angular.isDefined(t.sortable)?t.sortable:e.options.sortable})}},{key:"calculateColumns",value:function(){var e=this.options.columns;this.columnsByPin=a(e),this.columnWidths=s(this.columnsByPin,e)}},{key:"tableCss",value:function(){return{fixed:this.options.scrollbarV,selectable:this.options.selectable,checkboxable:this.options.checkboxSelection}}},{key:"adjustColumns",value:function(e){var t=this.options.internal.innerWidth-this.options.internal.scrollBarWidth;"force"===this.options.columnMode?v(this.options.columns,t,e):"flex"===this.options.columnMode&&g(this.options.columns,t)}},{key:"calculatePageSize",value:function(){this.options.paging.size=Math.ceil(this.options.internal.bodyHeight/this.options.rowHeight)+1}},{key:"onSorted",value:function(){if(this.rows){var e=this.options.columns.filter(function(e){return e.sort}).sort(function(e,t){if(e.sortPriority&&t.sortPriority){if(e.sortPriority>t.sortPriority)return 1;if(e.sortPriority<t.sortPriority)return-1}else{if(e.sortPriority)return-1;if(t.sortPriority)return 1}return 0}).map(function(e,t){return e.sortPriority=t+1,e});if(e.length){this.onSort&&this.onSort({sorts:e}),this.options.onSort&&this.options.onSort(e);for(var n=[],r=0,i=e.length;r<i;r+=1){var o=e[r];if(!1!==o.comparator){var a="asc"===o.sort?"":"-";angular.isDefined(o.sortBy)?n.push(a+o.sortBy):n.push(a+o.prop)}}if(n.length){var s,l=this.$filter("orderBy")(this.rows,n);this.rows.splice(0,this.rows.length),(s=this.rows).push.apply(s,t(l))}}this.options.internal.setYOffset()}}},{key:"onTreeToggled",value:function(e,t){this.onTreeToggle({row:e,cell:t})}},{key:"onBodyPage",value:function(e,t){this.onPage({offset:e,size:t})}},{key:"onFooterPage",value:function(e,t){var n=this.options.rowHeight*t*e;this.options.internal.setYOffset(n)}},{key:"selectAllRows",value:function(){var e;return this.selected.splice(0,this.selected.length),(e=this.selected).push.apply(e,t(this.rows)),this.isAllRowsSelected()}},{key:"deselectAllRows",value:function(){return this.selected.splice(0,this.selected.length),this.isAllRowsSelected()}},{key:"isAllRowsSelected",value:function(){return!(!this.rows||!this.selected)&&this.selected.length===this.rows.length}},{key:"onResized",value:function(e,t){var n=this.options.columns.indexOf(e),r=e;n>-1&&(r=this.options.columns[n],e.width=t,e.canAutoResize=!1,this.adjustColumns(n),this.calculateColumns()),this.onColumnResize&&this.onColumnResize({column:r,width:t})}},{key:"onSelected",value:function(e){this.onSelect({rows:e})}},{key:"onRowClicked",value:function(e){this.onRowClick({row:e})}},{key:"onRowDblClicked",value:function(e){this.onRowDblClick({row:e})}}]),e}(),B={columns:{},dTables:{},saveColumns:function(e,t){if(t&&t.length){var n=[].slice.call(t);this.dTables[e]=n}},buildColumns:function(e,t){var n=this;angular.forEach(this.dTables,function(r,i){n.columns[i]=[],angular.forEach(r,function(r){var o={},a=!0;angular.forEach(r.attributes,function(n){var r=u(n.name);switch(r){case"class":o.className=n.value;break;case"name":case"prop":o[r]=n.value;break;case"headerRenderer":case"cellRenderer":case"cellDataGetter":o[r]=t(n.value);break;case"visible":a=t(n.value)(e);break;default:o[r]=t(n.value)(e)}});var s=r.getElementsByTagName("column-header");s.length&&(o.headerTemplate=s[0].innerHTML,r.removeChild(s[0])),""!==r.innerHTML&&(o.template=r.innerHTML),a&&n.columns[i].push(o)})}),this.dTables={}}},W={},U=document.createElement("div").style,G=function(){var e=window.getComputedStyle(document.documentElement,""),t=(Array.prototype.slice.call(e).join("").match(/-(moz|webkit|ms)-/)||""===e.OLink&&["","o"])[1];return{dom:"WebKit|Moz|MS|O".match(new RegExp("("+t+")","i"))[1],lowercase:t,css:"-"+t+"-",js:t[0].toUpperCase()+t.substr(1)}}(),q=window.navigator.userAgent,K=b("transform"),X=b("backfaceVisibility"),J=!!b("transform"),Z=!!b("perspective"),Q=/Safari\//.test(q)&&!/Chrome\//.test(q),ee=function(){function e(){n(this,e)}return j(e,[{key:"styles",value:function(){return{width:this.options.internal.innerWidth+"px",height:this.options.headerHeight+"px"}}},{key:"innerStyles",value:function(){return{width:this.columnWidths.total+"px"}}},{key:"onSorted",value:function(e,t){function n(t){t!==e&&(t.sort=void 0)}("single"===this.options.sortType&&(!this.options.modifierActive||!t)||"multiple"===this.options.sortType&&this.options.modifierActive&&t)&&(this.columns.left.forEach(n),this.columns.center.forEach(n),this.columns.right.forEach(n)),this.onSort({column:e})}},{key:"stylesByGroup",value:function(e){var t={width:this.columnWidths[e]+"px"};return"center"===e?x(t,-1*this.options.internal.offsetX,0):"right"===e&&x(t,-1*(this.columnWidths.total-this.options.internal.innerWidth),0),t}},{key:"onResized",value:function(e,t){this.onResize({column:e,width:t})}}]),e}(),te=function(){function e(t){n(this,e),I(this,{$scope:t}),f()&&this.$onInit()}return e.$inject=["$scope"],j(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){this.column.headerCheckbox&&(this.column.headerCheckboxCallback=this.rowSelected),this.$scope.$parent.$parent.$parent.$parent.dt&&(this.dt=this.$scope.$parent.$parent.$parent.$parent.dt)}},{key:"styles",value:function(){return{width:this.column.width+"px",minWidth:this.column.minWidth+"px",maxWidth:this.column.maxWidth+"px",height:this.column.height+"px"}}},{key:"cellClass",value:function(){var e={sortable:this.column.sortable,resizable:this.column.resizable};return this.column.headerClassName&&(e[this.column.headerClassName]=!0),e}},{key:"onSorted",value:function(e){this.column.sortable&&(this.column.sort=d(this.sortType,this.column.sort),angular.isUndefined(this.column.sort)&&(this.column.sortPriority=void 0),this.onSort({column:this.column,modifierPressed:e.shiftKey}))}},{key:"sortClass",value:function(){return{"sort-btn":!0,"sort-asc icon-down":"asc"===this.column.sort,"sort-desc icon-up":"desc"===this.column.sort}}},{key:"onResized",value:function(e,t){this.onResize({column:t,width:e})}},{key:"rowSelected",value:function(e){this.allRowsSelected=e.selected&&e.rows.length===e.selected.length}},{key:"checkboxChangeCallback",value:function(){return this.isAllRowsSelected=this.column.allRowsSelected,this.isAllRowsSelected?this.dt.selectAllRows():this.dt.deselectAllRows()}}]),e}(),ne={GROUP:"refreshGroups",TREE:"refreshTree"},re=function(){function e(t){n(this,e),I(this,{$scope:t}),f()&&this.$onInit()}return e.$inject=["$scope"],j(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.tempRows=[],this.watchListeners=[],this.setTreeAndGroupColumns(),this.setConditionalWatches(),this.$scope.$watch("body.options.columns",function(t){if(t){var n=angular.copy(e.treeColumn),r=angular.copy(e.groupColumn);e.setTreeAndGroupColumns(),e.setConditionalWatches(),(e.treeColumn&&n!==e.treeColumn||e.groupColumn&&r!==e.groupColumn)&&(e.rowsUpdated(e.rows),e.treeColumn?e.refreshTree():e.groupColumn&&e.refreshGroups())}},!0),this.$scope.$watchCollection("body.rows",this.rowsUpdated.bind(this))}},{key:"setTreeAndGroupColumns",value:function(){this.options&&this.options.columns&&(this.treeColumn=this.options.columns.find(function(e){return e.isTreeColumn}),this.treeColumn?this.groupColumn=void 0:this.groupColumn=this.options.columns.find(function(e){return e.group}))}},{key:"buildInternalPage",value:function(){var e=void 0,t=void 0;for(this.tempRows.splice(0,this.tempRows.length),e=0;e<this.options.paging.size;e+=1)t=this.options.paging.offset*this.options.paging.size+e,angular.isDefined(this.rows[t])&&(this.tempRows[e]=this.rows[t])}},{key:"setConditionalWatches",value:function(){for(var e=this,t=this.watchListeners.length-1;t>=0;t-=1)this.watchListeners[t](),this.watchListeners.splice(t,1);if(this.options&&(this.options.scrollbarV||!this.options.scrollbarV&&this.options.paging&&this.options.paging.size)){var n=!1;this.watchListeners.push(this.$scope.$watch("body.options.paging.size",function(t,r){(!n||t>r)&&(e.getRows(),n=!0)})),this.watchListeners.push(this.$scope.$watch("body.options.paging.count",function(t){e.count=t,e.updatePage()})),this.watchListeners.push(this.$scope.$watch("body.options.paging.offset",function(t){e.options.paging.size&&("internal"===e.options.paging.mode&&e.buildInternalPage(),e.onPage&&e.onPage({offset:t,size:e.options.paging.size}))}))}}},{key:"rowsUpdated",value:function(e,n){if(e)if("external"!==this.options.paging.mode&&(this.options.paging.count=e.length),this.count=this.options.paging.count,(this.treeColumn||this.groupColumn)&&this.buildRowsByGroup(),this.options.scrollbarV){var r=e&&n&&(e.length===n.length||e.length<n.length);this.getRows(r)}else{var i=this.rows;if(this.treeColumn?i=this.buildTree():this.groupColumn&&(i=this.buildGroups()),"external"===this.options.paging.mode){var o=this.getFirstLastIndexes(),a=o.first;for(this.tempRows.splice(0,this.tempRows.length);a<o.last;)this.tempRows.push(i[a+=1])}else if("internal"===this.options.paging.mode)this.buildInternalPage();else{var s;this.tempRows.splice(0,this.tempRows.length),(s=this.tempRows).push.apply(s,t(i))}}else this.getRows(!0)}},{key:"getFirstLastIndexes",value:function(){var e=void 0,t=void 0;return this.options.scrollbarV?(e=Math.max(Math.floor((this.options.internal.offsetY||0)/this.options.rowHeight,0),0),t=Math.min(e+this.options.paging.size,this.count)):"external"===this.options.paging.mode?(e=Math.max(this.options.paging.offset*this.options.paging.size,0),t=Math.min(e+this.options.paging.size,this.count)):t=this.count,{first:e,last:t}}},{key:"updatePage",value:function(){var e=this.options.paging.offset,t=this.getFirstLastIndexes();angular.isUndefined(this.options.internal.oldScrollPosition)&&(this.options.internal.oldScrollPosition=0);var n=this.options.internal.oldScrollPosition,r=t.first/this.options.paging.size;this.options.internal.oldScrollPosition=r,r=r<n?Math.floor(r):r>n?Math.ceil(r):e,isNaN(r)||(this.options.paging.offset=r)}},{key:"calculateDepth",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,r=this.treeColumn.prop;if(!e[n])return t;if(e.$$depth)return e.$$depth+t;var i=this.index[e[n]];if(i)return t+=1,this.calculateDepth(i,t);for(var o=0,a=this.rows.length;o<a;o+=1){var s=this.rows[o];if(s[r]===e[n])return t+=1,this.calculateDepth(s,t)}return t}},{key:"buildRowsByGroup",value:function(){this.index={},this.rowsByGroup={};for(var e=this.treeColumn?this.treeColumn.relationProp:this.groupColumn.prop,t=0,n=this.rows.length;t<n;t+=1){var r=this.rows[t],i=r[e];if(i&&(this.rowsByGroup[i]?this.rowsByGroup[i].push(r):this.rowsByGroup[i]=[r]),this.treeColumn){var o=this.treeColumn.prop;if(this.index[r[o]]=r,angular.isUndefined(r[e]))r.$$depth=0;else{var a=this.index[r[e]];if(angular.isUndefined(a))for(var s=0;s<n;s+=1)if(this.rows[s][o]===i){a=this.rows[s];break}angular.isUndefined(a.$$depth)&&(a.$$depth=this.calculateDepth(a)),r.$$depth=a.$$depth+1,a.$$children?a.$$children.push(r[o]):a.$$children=[r[o]]}}}}},{key:"buildGroups",value:function(){var e=this,n=[];return angular.forEach(this.rowsByGroup,function(r,i){n.push({name:i,group:!0}),e.expanded[i]&&n.push.apply(n,t(r))}),n}},{key:"isSelected",value:function(e){var t=!1;return this.options.selectable&&(t=this.options.multiSelect?this.selected.indexOf(e)>-1:this.selected===e),t}},{key:"buildTree",value:function(){var e=[],t=this;return function e(n,r,i){n.forEach(function(n){var o=n[t.treeColumn.relationProp],a=n[t.treeColumn.prop],s=t.rowsByGroup[a],l=t.expanded[a];(i>0||!o)&&(r.push(n),s&&s.length>0&&l&&e(s,r,i+1))})}(this.rows,e,0),e}},{key:"getRows",value:function(e){if((this.treeColumn||this.groupColumn)&&!this.rowsByGroup)return!1;var t=void 0;this.treeColumn?(t=this.treeTemp||[],!e&&this.treeTemp||(t=this.buildTree(),this.treeTemp=t,this.count=t.length,this.tempRows.splice(0,this.tempRows.length))):this.groupColumn?(t=this.groupsTemp||[],!e&&this.groupsTemp||(t=this.buildGroups(),this.groupsTemp=t,this.count=t.length)):(t=this.rows,!0===e&&this.tempRows.splice(0,this.tempRows.length));var n=0,r=this.getFirstLastIndexes(),i=r.first;for(this.tempRows.splice(0,r.last-r.first);i<r.last&&i<this.count;){var o=t[i];o&&(o.$$index=i,this.tempRows[n]=o),n+=1,i+=1}return this.options.internal&&this.options.internal.styleTranslator&&this.options.internal.styleTranslator.update(this.tempRows),this.tempRows}},{key:"styles",value:function(){var e={width:this.options.internal.innerWidth+"px"};return this.options.scrollbarV?!1===this.options.scrollbarH&&(e.overflowX="hidden"):e.overflowY="hidden",this.options.scrollbarV&&(e.height=this.options.internal.bodyHeight+"px"),e}},{key:"rowStyles",value:function(){var e={};return"auto"===this.options.rowHeight&&(e.height=this.options.rowHeight+"px"),e}},{key:"groupRowStyles",value:function(e){var t=this.rowStyles(e);return t.width=this.columnWidths.total+"px",t}},{key:"rowClasses",value:function(e){var t={selected:this.isSelected(e),"dt-row-even":e&&e.$$index%2==0,"dt-row-odd":e&&e.$$index%2!=0};return this.treeColumn&&(t["dt-leaf"]=this.rowsByGroup[e[this.treeColumn.relationProp]],t["dt-has-leafs"]=this.rowsByGroup[e[this.treeColumn.prop]],t["dt-depth-"+e.$$depth]=!0),t}},{key:"getRowValue",value:function(e){return this.tempRows[e]}},{key:"getRowExpanded",value:function(e){return this.treeColumn?this.expanded[e[this.treeColumn.prop]]:this.groupColumn?this.expanded[e.name]:void 0}},{key:"refresh",value:function(e){if(this.options.scrollbarV)this.getRows(!0);else{var n,r=this[e]();this.tempRows.splice(0,this.tempRows.length),(n=this.tempRows).push.apply(n,t(r))}}},{key:"getRowHasChildren",value:function(e){if(this.treeColumn){var t=this.rowsByGroup[e[this.treeColumn.prop]];return angular.isDefined(t)||t&&!t.length}}},{key:"refreshTree",value:function(){this.refresh(ne.TREE)}},{key:"onTreeToggled",value:function(e,t){var n=e[this.treeColumn.prop];this.expanded[n]=!this.expanded[n],this.refreshTree(),this.onTreeToggle({row:e,cell:t})}},{key:"refreshGroups",value:function(){this.refresh(ne.GROUP)}},{key:"onGroupToggle",value:function(e){this.expanded[e.name]=!this.expanded[e.name],this.refreshGroups()}}]),e}(),ie=function(){function e(t){n(this,e),this.height=t,this.map=new Map}return j(e,[{key:"update",value:function(e){for(var t=0;t<=this.map.size;){var n=this.map.get(t),r=e[t];n&&r&&x(n[0].style,0,r.$$index*this.height),t+=1}}},{key:"register",value:function(e,t){this.map.set(e,t)}}]),e}(),oe={BACKSPACE:8,TAB:9,RETURN:13,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46,COMMA:188,PERIOD:190,A:65,Z:90,ZERO:48,NUMPAD_0:96,NUMPAD_9:105},ae=function(){function e(t){n(this,e),this.body=t.body,this.options=t.body.options,this.selected=t.body.selected}return e.$inject=["$scope"],j(e,[{key:"keyDown",value:function(e,t,n){if(oe[e.keyCode]&&e.preventDefault(),e.keyCode===oe.DOWN){var r=e.target.nextElementSibling;r&&r.focus()}else if(e.keyCode===oe.UP){var i=e.target.previousElementSibling;i&&i.focus()}else e.keyCode===oe.RETURN&&this.selectRow(t,n)}},{key:"rowClicked",value:function(e,t,n){this.options.checkboxSelection||this.selectRow(e,t,n),this.body.onRowClick({row:n})}},{key:"rowDblClicked",value:function(e,t,n){this.options.checkboxSelection||(e.preventDefault(),this.selectRow(e,t,n)),this.body.onRowDblClick({row:n})}},{key:"onCheckboxChange",value:function(e,t,n){this.selectRow(e,t,n)}},{key:"selectRow",value:function(e,t,n){if(this.options.selectable)if(this.options.multiSelect){if(e.shiftKey)this.selectRowsBetween(t,n);else{var r=this.selected.indexOf(n);r>-1?this.selected.splice(r,1):(this.options.multiSelectOnShift&&1===this.selected.length&&this.selected.splice(0,1),this.selected.push(n),this.body.onSelect({rows:[n]}))}this.prevIndex=t}else this.selected=n,this.body.onSelect({rows:[n]})}},{key:"selectRowsBetween",value:function(e){for(var t=e<this.prevIndex,n=[],r=0,i=this.body.rows.length;r<i;r+=1){var o=this.body.rows[r],a=r>=this.prevIndex&&r<=e,s=r<=this.prevIndex&&r>=e,l={};if(l=t?{start:e,end:this.prevIndex-e}:{start:this.prevIndex,end:e+1},t&&s||!t&&a){var u=this.selected.indexOf(o);t&&u>-1?this.selected.splice(u,1):r>=l.start&&r<l.end&&-1===u&&(this.selected.push(o),n.push(o))}this.body.onSelect({rows:n})}}}]),e}(),se=function(){function e(){n(this,e)}return j(e,[{key:"getValue",value:function(e){return e.prop?l(this.row,e.prop):""}},{key:"onTreeToggled",value:function(e){this.onTreeToggle({cell:e,row:this.row})}},{key:"stylesByGroup",value:function(e){var t={width:this.columnWidths[e]+"px"};return"left"===e?x(t,this.options.internal.offsetX,0):"right"===e&&x(t,-1*(this.columnWidths.total-this.options.internal.innerWidth-this.options.internal.offsetX+this.options.internal.scrollBarWidth),0),t}},{key:"onCheckboxChanged",value:function(e){this.onCheckboxChange({$event:e,row:this.row})}}]),e}(),le=function(){function e(){n(this,e)}return j(e,[{key:"onGroupToggled",value:function(e){e.stopPropagation(),this.onGroupToggle({group:this.row})}},{key:"treeClass",value:function(){return{"dt-tree-toggle":!0,"icon-right":!this.expanded,"icon-down":this.expanded}}}]),e}(),ue=function(){function e(){n(this,e)}return j(e,[{key:"styles",value:function(){return{width:this.column.width+"px","min-width":this.column.width+"px"}}},{key:"cellClass",value:function(){var e={"dt-tree-col":this.column.isTreeColumn};return this.column.className&&(e[this.column.className]=!0),e}},{key:"treeClass",value:function(){return{"dt-tree-toggle":!0,"icon-right":!this.expanded,"icon-down":this.expanded}}},{key:"onTreeToggled",value:function(e){e.stopPropagation(),this.expanded=!this.expanded,this.onTreeToggle({cell:{value:this.value,column:this.column,expanded:this.expanded}})}},{key:"onCheckboxChanged",value:function(e){e.stopPropagation(),this.onCheckboxChange({$event:e})}},{key:"getValue",value:function(){var e=this.column.cellDataGetter?this.column.cellDataGetter(this.value):this.value;return(angular.isUndefined(e)||null===e)&&(e=""),e}}]),e}(),ce=function(){function e(t){n(this,e),I(this,{$scope:t}),f()&&this.$onInit()}return e.$inject=["$scope"],j(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.page=this.paging.offset+1,this.$scope.$watch("footer.paging.offset",function(t){e.offsetChanged(t)})}},{key:"offsetChanged",value:function(e){this.page=e+1}},{key:"onPaged",value:function(e){this.paging.offset=e-1,this.onPage({offset:this.paging.offset,size:this.paging.size})}}]),e}(),de=function(){function e(t){n(this,e),I(this,{$scope:t}),f()&&this.$onInit()}return e.$inject=["$scope"],j(e,[{key:"$onInit",value:function(){this.init()}},{key:"init",value:function(){var e=this;this.$scope.$watch("pager.count",function(){e.findAndSetPages()}),this.$scope.$watch("pager.size",function(){e.findAndSetPages()}),this.$scope.$watch("pager.page",function(t){0!==t&&t<=e.totalPages&&e.getPages(t)}),this.size&&this.count&&this.page&&this.findAndSetPages()}},{key:"findAndSetPages",value:function(){this.calcTotalPages(this.size,this.count),this.getPages(this.page||1)}},{key:"calcTotalPages",value:function(e,t){var n=e<1?1:Math.ceil(t/e);this.totalPages=Math.max(n||0,1)}},{key:"selectPage",value:function(e){e>0&&e<=this.totalPages&&(this.page=e,this.onPage({page:e}))}},{key:"prevPage",value:function(){this.canPrevious()&&this.selectPage(this.page-=1)}},{key:"nextPage",value:function(){this.canNext()&&this.selectPage(this.page+=1)}},{key:"canPrevious",value:function(){return this.page>1}},{key:"canNext",value:function(){return this.page<this.totalPages}},{key:"getPages",value:function(e){var t=[],n=5<this.totalPages,r=1,i=this.totalPages;n&&(r=5*(Math.ceil(e/5)-1)+1,i=Math.min(r+5-1,this.totalPages));for(var o=r;o<=i;o+=1)t.push({number:o,text:o,active:o===e});this.pages=t}}]),e}(),fe={LEFT:"left",RIGHT:"right",TOP:"top",BOTTOM:"bottom",CENTER:"center",MIDDLE:"middle"},pe=angular.module("dt.popover",[]).factory("PopoverRegistry",A).factory("PositionHelper",R).directive("popover",L),he=function(){function e(t){n(this,e),this.$scope=t}return e.$inject=["$scope"],j(e,[{key:"getColumnIndex",value:function(e){return this.$scope.current.findIndex(function(t){return e.name===t.name})}},{key:"isChecked",value:function(e){return this.getColumnIndex(e)>-1}},{key:"onCheck",value:function(e){var t=this.getColumnIndex(e);-1===t?this.$scope.current.push(e):this.$scope.current.splice(t,1)}}]),e}(),ge=function(){function e(t){n(this,e),I(this,{$scope:t}),t.open=!1}return e.$inject=["$scope"],j(e,[{key:"toggle",value:function(){this.$scope.open=!this.$scope.open}}]),e}(),me=angular.module("dt.dropdown",[]).controller("DropdownController",ge).directive("dropdown",F).directive("dropdownToggle",O).directive("dropdownMenu",N),ve=angular.module("dt.menu",[me.name]).controller("MenuController",he).directive("dtm",P),ye=angular.module("data-table",[]).directive("dtable",y).directive("resizable",r).directive("sortable",i).directive("dtHeader",w).directive("dtHeaderCell",_).directive("dtBody",C).directive("dtScroller",k).directive("dtSelection",S).directive("dtRow",$).directive("dtGroupRow",M).directive("dtCell",T).directive("dtFooter",D).directive("dtPager",E);e.dtPopover=pe,e.dtMenu=ve,e.default=ye}),function(e,t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):e.bootbox=t(e.jQuery)}(this,function e(t,n){"use strict";function r(e){var t=m[h.locale];return t?t[e]:m.en[e]}function i(e,n,r){e.stopPropagation(),e.preventDefault(),t.isFunction(r)&&!1===r.call(n,e)||n.modal("hide")}function o(e){var t,n=0;for(t in e)n++;return n}function a(e,n){var r=0;t.each(e,function(e,t){n(e,t,r++)})}function s(e){var n,r;if("object"!=typeof e)throw new Error("Please supply an object of options");if(!e.message)throw new Error("Please specify a message");return(e=t.extend({},h,e)).buttons||(e.buttons={}),n=e.buttons,r=o(n),a(n,function(e,i,o){if(t.isFunction(i)&&(i=n[e]={callback:i}),"object"!==t.type(i))throw new Error("button with key "+e+" must be an object");i.label||(i.label=e),i.className||(i.className=r<=2&&o===r-1?"btn-primary":"btn-default")}),e}function l(e,t){var n=e.length,r={};if(n<1||n>2)throw new Error("Invalid argument length");return 2===n||"string"==typeof e[0]?(r[t[0]]=e[0],r[t[1]]=e[1]):r=e[0],r}function u(e,n,r){return t.extend(!0,{},e,l(n,r))}function c(e,t,n,r){return f(u({className:"bootbox-"+e,buttons:d.apply(null,t)},r,n),t)}function d(){for(var e={},t=0,n=arguments.length;t<n;t++){var i=arguments[t],o=i.toLowerCase(),a=i.toUpperCase();e[o]={label:r(a)}}return e}function f(e,t){var r={};return a(t,function(e,t){r[t]=!0}),a(e.buttons,function(e){if(r[e]===n)throw new Error("button key "+e+" is not allowed (options are "+t.join("\n")+")")}),e}var p={dialog:"<div class='bootbox modal' tabindex='-1' role='dialog'><div class='modal-dialog'><div class='modal-content'><div class='modal-body'><div class='bootbox-body'></div></div></div></div></div>",header:"<div class='modal-header'><h4 class='modal-title'></h4></div>",footer:"<div class='modal-footer'></div>",closeButton:"<button type='button' class='bootbox-close-button close' data-dismiss='modal' aria-hidden='true'>&times;</button>",form:"<form class='bootbox-form'></form>",inputs:{text:"<input class='bootbox-input bootbox-input-text form-control' autocomplete=off type=text />",textarea:"<textarea class='bootbox-input bootbox-input-textarea form-control'></textarea>",email:"<input class='bootbox-input bootbox-input-email form-control' autocomplete='off' type='email' />",select:"<select class='bootbox-input bootbox-input-select form-control'></select>",checkbox:"<div class='checkbox'><label><input class='bootbox-input bootbox-input-checkbox' type='checkbox' /></label></div>",date:"<input class='bootbox-input bootbox-input-date form-control' autocomplete=off type='date' />",time:"<input class='bootbox-input bootbox-input-time form-control' autocomplete=off type='time' />",number:"<input class='bootbox-input bootbox-input-number form-control' autocomplete=off type='number' />",password:"<input class='bootbox-input bootbox-input-password form-control' autocomplete='off' type='password' />"}},h={locale:"en",backdrop:"static",animate:!0,className:null,closeButton:!0,show:!0,container:"body"},g={};g.alert=function(){var e;if((e=c("alert",["ok"],["message","callback"],arguments)).callback&&!t.isFunction(e.callback))throw new Error("alert requires callback property to be a function when provided");return e.buttons.ok.callback=e.onEscape=function(){return!t.isFunction(e.callback)||e.callback.call(this)},g.dialog(e)},g.confirm=function(){var e;if(e=c("confirm",["cancel","confirm"],["message","callback"],arguments),e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,!1)},e.buttons.confirm.callback=function(){return e.callback.call(this,!0)},!t.isFunction(e.callback))throw new Error("confirm requires a callback");return g.dialog(e)},g.prompt=function(){var e,r,i,o,s,l,c;if(o=t(p.form),r={className:"bootbox-prompt",buttons:d("cancel","confirm"),value:"",inputType:"text"},e=f(u(r,arguments,["title","callback"]),["cancel","confirm"]),l=e.show===n||e.show,e.message=o,e.buttons.cancel.callback=e.onEscape=function(){return e.callback.call(this,null)},e.buttons.confirm.callback=function(){var n;switch(e.inputType){case"text":case"textarea":case"email":case"select":case"date":case"time":case"number":case"password":n=s.val();break;case"checkbox":var r=s.find("input:checked");n=[],a(r,function(e,r){n.push(t(r).val())})}return e.callback.call(this,n)},e.show=!1,!e.title)throw new Error("prompt requires a title");if(!t.isFunction(e.callback))throw new Error("prompt requires a callback");if(!p.inputs[e.inputType])throw new Error("invalid prompt type");switch(s=t(p.inputs[e.inputType]),e.inputType){case"text":case"textarea":case"email":case"date":case"time":case"number":case"password":s.val(e.value);break;case"select":var h={};if(c=e.inputOptions||[],!t.isArray(c))throw new Error("Please pass an array of input options");if(!c.length)throw new Error("prompt with select requires options");a(c,function(e,r){var i=s;if(r.value===n||r.text===n)throw new Error("given options in wrong format");r.group&&(h[r.group]||(h[r.group]=t("<optgroup/>").attr("label",r.group)),i=h[r.group]),i.append("<option value='"+r.value+"'>"+r.text+"</option>")}),a(h,function(e,t){s.append(t)}),s.val(e.value);break;case"checkbox":var m=t.isArray(e.value)?e.value:[e.value];if(!(c=e.inputOptions||[]).length)throw new Error("prompt with checkbox requires options");if(!c[0].value||!c[0].text)throw new Error("given options in wrong format");s=t("<div/>"),a(c,function(n,r){var i=t(p.inputs[e.inputType]);i.find("input").attr("value",r.value),i.find("label").append(r.text),a(m,function(e,t){t===r.value&&i.find("input").prop("checked",!0)}),s.append(i)})}return e.placeholder&&s.attr("placeholder",e.placeholder),e.pattern&&s.attr("pattern",e.pattern),e.maxlength&&s.attr("maxlength",e.maxlength),o.append(s),o.on("submit",function(e){e.preventDefault(),e.stopPropagation(),i.find(".btn-primary").click()}),(i=g.dialog(e)).off("shown.bs.modal"),i.on("shown.bs.modal",function(){s.focus()}),!0===l&&i.modal("show"),i},g.dialog=function(e){e=s(e);var r=t(p.dialog),o=r.find(".modal-dialog"),l=r.find(".modal-body"),u=e.buttons,c="",d={onEscape:e.onEscape};if(t.fn.modal===n)throw new Error("$.fn.modal is not defined; please double check you have included the Bootstrap JavaScript library. See http://getbootstrap.com/javascript/ for more details.");if(a(u,function(e,t){c+="<button data-bb-handler='"+e+"' type='button' class='btn "+t.className+"'>"+t.label+"</button>",d[e]=t.callback}),l.find(".bootbox-body").html(e.message),!0===e.animate&&r.addClass("fade"),e.className&&r.addClass(e.className),"large"===e.size?o.addClass("modal-lg"):"small"===e.size&&o.addClass("modal-sm"),e.title&&l.before(p.header),e.closeButton){var f=t(p.closeButton);e.title?r.find(".modal-header").prepend(f):f.css("margin-top","-10px").prependTo(l)}return e.title&&r.find(".modal-title").html(e.title),c.length&&(l.after(p.footer),r.find(".modal-footer").html(c)),r.on("hidden.bs.modal",function(e){e.target===this&&r.remove()}),r.on("shown.bs.modal",function(){r.find(".btn-primary:first").focus()}),"static"!==e.backdrop&&r.on("click.dismiss.bs.modal",function(e){r.children(".modal-backdrop").length&&(e.currentTarget=r.children(".modal-backdrop").get(0)),e.target===e.currentTarget&&r.trigger("escape.close.bb")}),r.on("escape.close.bb",function(e){d.onEscape&&i(e,r,d.onEscape)}),r.on("click",".modal-footer button",function(e){var n=t(this).data("bb-handler");i(e,r,d[n])}),r.on("click",".bootbox-close-button",function(e){i(e,r,d.onEscape)}),r.on("keyup",function(e){27===e.which&&r.trigger("escape.close.bb")}),t(e.container).append(r),r.modal({backdrop:!!e.backdrop&&"static",keyboard:!1,show:!1}),e.show&&r.modal("show"),r},g.setDefaults=function(){var e={};2===arguments.length?e[arguments[0]]=arguments[1]:e=arguments[0],t.extend(h,e)},g.hideAll=function(){return t(".bootbox").modal("hide"),g};var m={bg_BG:{OK:"Ок",CANCEL:"Отказ",CONFIRM:"Потвърждавам"},br:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Sim"},cs:{OK:"OK",CANCEL:"Zrušit",CONFIRM:"Potvrdit"},da:{OK:"OK",CANCEL:"Annuller",CONFIRM:"Accepter"},de:{OK:"OK",CANCEL:"Abbrechen",CONFIRM:"Akzeptieren"},el:{OK:"Εντάξει",CANCEL:"Ακύρωση",CONFIRM:"Επιβεβαίωση"},en:{OK:"OK",CANCEL:"Cancel",CONFIRM:"OK"},es:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Aceptar"},et:{OK:"OK",CANCEL:"Katkesta",CONFIRM:"OK"},fa:{OK:"قبول",CANCEL:"لغو",CONFIRM:"تایید"},fi:{OK:"OK",CANCEL:"Peruuta",CONFIRM:"OK"},fr:{OK:"OK",CANCEL:"Annuler",CONFIRM:"D'accord"},he:{OK:"אישור",CANCEL:"ביטול",CONFIRM:"אישור"},hu:{OK:"OK",CANCEL:"Mégsem",CONFIRM:"Megerősít"},hr:{OK:"OK",CANCEL:"Odustani",CONFIRM:"Potvrdi"},id:{OK:"OK",CANCEL:"Batal",CONFIRM:"OK"},it:{OK:"OK",CANCEL:"Annulla",CONFIRM:"Conferma"},ja:{OK:"OK",CANCEL:"キャンセル",CONFIRM:"確認"},lt:{OK:"Gerai",CANCEL:"Atšaukti",CONFIRM:"Patvirtinti"},lv:{OK:"Labi",CANCEL:"Atcelt",CONFIRM:"Apstiprināt"},nl:{OK:"OK",CANCEL:"Annuleren",CONFIRM:"Accepteren"},no:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},pl:{OK:"OK",CANCEL:"Anuluj",CONFIRM:"Potwierdź"},pt:{OK:"OK",CANCEL:"Cancelar",CONFIRM:"Confirmar"},ru:{OK:"OK",CANCEL:"Отмена",CONFIRM:"Применить"},sq:{OK:"OK",CANCEL:"Anulo",CONFIRM:"Prano"},sv:{OK:"OK",CANCEL:"Avbryt",CONFIRM:"OK"},th:{OK:"ตกลง",CANCEL:"ยกเลิก",CONFIRM:"ยืนยัน"},tr:{OK:"Tamam",CANCEL:"İptal",CONFIRM:"Onayla"},zh_CN:{OK:"OK",CANCEL:"取消",CONFIRM:"确认"},zh_TW:{OK:"OK",CANCEL:"取消",CONFIRM:"確認"}};return g.addLocale=function(e,n){return t.each(["OK","CANCEL","CONFIRM"],function(e,t){if(!n[t])throw new Error("Please supply a translation for '"+t+"'")}),m[e]={OK:n.OK,CANCEL:n.CANCEL,CONFIRM:n.CONFIRM},g},g.removeLocale=function(e){return delete m[e],g},g.setLocale=function(e){return g.setDefaults("locale",e)},g.init=function(n){return e(n||t)},g}),"function"==typeof define&&define.amd&&define(["bootbox"],function(e){window.bootbox=e}),angular.module("ngBootbox",[]).provider("$ngBootboxConfig",function(){var e="";return{setDefaultLocale:function(t){e=t,window.bootbox.setLocale(t)},addLocale:function(e,t){window.bootbox.addLocale(e,t)},removeLocale:function(e){window.bootbox.removeLocale(e)},$get:function(){return{getDefaultLocale:function(){return e}}}}}).directive("ngBootboxAlert",["$ngBootbox",function(e){return{restrict:"A",scope:!1,link:function(t,n,r){var i=r.ngBootboxAlert||"Yo!";n.bind("click",function(){e.alert(i)})}}}]).directive("ngBootboxConfirm",["$ngBootbox",function(e){return{restrict:"A",scope:{actionOK:"&ngBootboxConfirmAction",actionCancel:"&ngBootboxConfirmActionCancel"},link:function(t,n,r){var i=r.ngBootboxConfirm||"Are you sure?";n.bind("click",function(){e.confirm(i).then(function(){t.actionOK()},function(){t.actionCancel()})})}}}]).directive("ngBootboxPrompt",["$ngBootbox",function(e){return{restrict:"A",scope:{actionOK:"&ngBootboxPromptAction",actionCancel:"&ngBootboxPromptActionCancel",value:"@ngBootboxPromptDefaultValue",selectAllOnFocus:"@ngBootboxPromptSelectAllOnFocus"},link:function(t,n,r){var i=r.ngBootboxPrompt||"Are you sure?",o=r.ngBootboxPromptDefaultValue||"",a=t.$eval(r.ngBootboxPromptSelectAllOnFocus)||!1;n.bind("click",function(){e.prompt(i,o,a).then(function(e){t.actionOK({result:e})},function(){t.actionCancel()})})}}}]).directive("ngBootboxCustomDialog",["$ngBootbox",function(e){return{restrict:"A",scope:{title:"@ngBootboxTitle",buttons:"=ngBootboxButtons",className:"@ngBootboxClassName",data:"=ngBootboxData",options:"=ngBootboxOptions"},link:function(t,n,r){var i={},o=r.ngBootboxCustomDialogTemplate;t.options&&(i=t.options),t.title&&(i.title=t.title),t.buttons&&(i.buttons=t.buttons),t.className&&(i.className=t.className),t.data&&(i.data=t.data),o?i.templateUrl=o:i.message=r.ngBootboxCustomDialog,n.bind("click",function(){e.customDialog(i)})}}}]).factory("$ngBootbox",["$q","$templateCache","$compile","$rootScope","$http","$window",function(e,t,n,r,i,o){function a(n){var r=e.defer(),o=t.get(n);return void 0===o?i.get(n).success(function(e){t.put(n,e),r.resolve(e)}):r.resolve(o),r.promise}return{alert:function(t){var n=e.defer();return o.bootbox.alert(t,function(){n.resolve()}),n.promise},confirm:function(t){var n=e.defer();return o.bootbox.confirm(t,function(e){e?n.resolve():n.reject()}),n.promise},prompt:function(t,n,r){var i=e.defer();return o.bootbox.prompt({title:t,value:n||"",selectAllOnFocus:r||!1,callback:function(e){null!==e?i.resolve(e):i.reject()}}),i.promise},customDialog:function(e){e.templateUrl?a(e.templateUrl).then(function(t){e.scope=e.scope||r,e.message=n(t)(e.scope),o.bootbox.dialog(e)},function(){o.bootbox.dialog(e)}):o.bootbox.dialog(e)},setDefaults:function(e){o.bootbox.setDefaults(e)},hideAll:function(){o.bootbox.hideAll()},setLocale:function(e){o.bootbox.setLocale(e)},addLocale:function(e,t){o.bootbox.addLocale(e,t)},removeLocale:function(e){o.bootbox.removeLocale(e)}}}]),angular.module("ui.bootstrap",["ui.bootstrap.tpls","ui.bootstrap.collapse","ui.bootstrap.tabindex","ui.bootstrap.accordion","ui.bootstrap.alert","ui.bootstrap.buttons","ui.bootstrap.carousel","ui.bootstrap.dateparser","ui.bootstrap.isClass","ui.bootstrap.datepicker","ui.bootstrap.position","ui.bootstrap.datepickerPopup","ui.bootstrap.debounce","ui.bootstrap.multiMap","ui.bootstrap.dropdown","ui.bootstrap.stackedMap","ui.bootstrap.modal","ui.bootstrap.paging","ui.bootstrap.pager","ui.bootstrap.pagination","ui.bootstrap.tooltip","ui.bootstrap.popover","ui.bootstrap.progressbar","ui.bootstrap.rating","ui.bootstrap.tabs","ui.bootstrap.timepicker","ui.bootstrap.typeahead"]),angular.module("ui.bootstrap.tpls",["uib/template/accordion/accordion-group.html","uib/template/accordion/accordion.html","uib/template/alert/alert.html","uib/template/carousel/carousel.html","uib/template/carousel/slide.html","uib/template/datepicker/datepicker.html","uib/template/datepicker/day.html","uib/template/datepicker/month.html","uib/template/datepicker/year.html","uib/template/datepickerPopup/popup.html","uib/template/modal/window.html","uib/template/pager/pager.html","uib/template/pagination/pagination.html","uib/template/tooltip/tooltip-html-popup.html","uib/template/tooltip/tooltip-popup.html","uib/template/tooltip/tooltip-template-popup.html","uib/template/popover/popover-html.html","uib/template/popover/popover-template.html","uib/template/popover/popover.html","uib/template/progressbar/bar.html","uib/template/progressbar/progress.html","uib/template/progressbar/progressbar.html","uib/template/rating/rating.html","uib/template/tabs/tab.html","uib/template/tabs/tabset.html","uib/template/timepicker/timepicker.html","uib/template/typeahead/typeahead-match.html","uib/template/typeahead/typeahead-popup.html"]),angular.module("ui.bootstrap.collapse",[]).directive("uibCollapse",["$animate","$q","$parse","$injector",function(e,t,n,r){var i=r.has("$animateCss")?r.get("$animateCss"):null;return{link:function(r,o,a){function s(e){return m?{width:e.scrollWidth+"px"}:{height:e.scrollHeight+"px"}}function l(){o.hasClass("collapse")&&o.hasClass("in")||t.resolve(f(r)).then(function(){o.removeClass("collapse").addClass("collapsing").attr("aria-expanded",!0).attr("aria-hidden",!1),i?i(o,{addClass:"in",easing:"ease",css:{overflow:"hidden"},to:s(o[0])}).start().finally(u):e.addClass(o,"in",{css:{overflow:"hidden"},to:s(o[0])}).then(u)},angular.noop)}function u(){o.removeClass("collapsing").addClass("collapse").css(v),p(r)}function c(){if(!o.hasClass("collapse")&&!o.hasClass("in"))return d();t.resolve(h(r)).then(function(){o.css(s(o[0])).removeClass("collapse").addClass("collapsing").attr("aria-expanded",!1).attr("aria-hidden",!0),i?i(o,{removeClass:"in",to:y}).start().finally(d):e.removeClass(o,"in",{to:y}).then(d)},angular.noop)}function d(){o.css(y),o.removeClass("collapsing").addClass("collapse"),g(r)}var f=n(a.expanding),p=n(a.expanded),h=n(a.collapsing),g=n(a.collapsed),m=!1,v={},y={};!function(){(m=!!("horizontal"in a))?(v={width:""},y={width:"0"}):(v={height:""},y={height:"0"}),r.$eval(a.uibCollapse)||o.addClass("in").addClass("collapse").attr("aria-expanded",!0).attr("aria-hidden",!1).css(v)}(),r.$watch(a.uibCollapse,function(e){e?c():l()})}}}]),angular.module("ui.bootstrap.tabindex",[]).directive("uibTabindexToggle",function(){return{restrict:"A",link:function(e,t,n){n.$observe("disabled",function(e){n.$set("tabindex",e?-1:null)})}}}),angular.module("ui.bootstrap.accordion",["ui.bootstrap.collapse","ui.bootstrap.tabindex"]).constant("uibAccordionConfig",{closeOthers:!0}).controller("UibAccordionController",["$scope","$attrs","uibAccordionConfig",function(e,t,n){this.groups=[],this.closeOthers=function(r){(angular.isDefined(t.closeOthers)?e.$eval(t.closeOthers):n.closeOthers)&&angular.forEach(this.groups,function(e){e!==r&&(e.isOpen=!1)})},this.addGroup=function(e){var t=this;this.groups.push(e),e.$on("$destroy",function(n){t.removeGroup(e)})},this.removeGroup=function(e){var t=this.groups.indexOf(e);-1!==t&&this.groups.splice(t,1)}}]).directive("uibAccordion",function(){return{controller:"UibAccordionController",controllerAs:"accordion",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion.html"}}}).directive("uibAccordionGroup",function(){return{require:"^uibAccordion",transclude:!0,restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/accordion/accordion-group.html"},scope:{heading:"@",panelClass:"@?",isOpen:"=?",isDisabled:"=?"},controller:function(){this.setHeading=function(e){this.heading=e}},link:function(e,t,n,r){t.addClass("panel"),r.addGroup(e),e.openClass=n.openClass||"panel-open",e.panelClass=n.panelClass||"panel-default",e.$watch("isOpen",function(n){t.toggleClass(e.openClass,!!n),n&&r.closeOthers(e)}),e.toggleOpen=function(t){e.isDisabled||t&&32!==t.which||(e.isOpen=!e.isOpen)};var i="accordiongroup-"+e.$id+"-"+Math.floor(1e4*Math.random());e.headingId=i+"-tab",e.panelId=i+"-panel"}}}).directive("uibAccordionHeading",function(){return{transclude:!0,template:"",replace:!0,require:"^uibAccordionGroup",link:function(e,t,n,r,i){r.setHeading(i(e,angular.noop))}}}).directive("uibAccordionTransclude",function(){return{require:"^uibAccordionGroup",link:function(e,t,n,r){e.$watch(function(){return r[n.uibAccordionTransclude]},function(e){if(e){var n=angular.element(t[0].querySelector("uib-accordion-header,data-uib-accordion-header,x-uib-accordion-header,uib\\:accordion-header,[uib-accordion-header],[data-uib-accordion-header],[x-uib-accordion-header]"));n.html(""),n.append(e)}})}}}),angular.module("ui.bootstrap.alert",[]).controller("UibAlertController",["$scope","$element","$attrs","$interpolate","$timeout",function(e,t,n,r,i){e.closeable=!!n.close,t.addClass("alert"),n.$set("role","alert"),e.closeable&&t.addClass("alert-dismissible");var o=angular.isDefined(n.dismissOnTimeout)?r(n.dismissOnTimeout)(e.$parent):null;o&&i(function(){e.close()},parseInt(o,10))}]).directive("uibAlert",function(){return{controller:"UibAlertController",controllerAs:"alert",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/alert/alert.html"},transclude:!0,scope:{close:"&"}}}),angular.module("ui.bootstrap.buttons",[]).constant("uibButtonConfig",{activeClass:"active",toggleEvent:"click"}).controller("UibButtonsController",["uibButtonConfig",function(e){this.activeClass=e.activeClass||"active",this.toggleEvent=e.toggleEvent||"click"}]).directive("uibBtnRadio",["$parse",function(e){return{require:["uibBtnRadio","ngModel"],controller:"UibButtonsController",controllerAs:"buttons",link:function(t,n,r,i){var o=i[0],a=i[1],s=e(r.uibUncheckable);n.find("input").css({display:"none"}),a.$render=function(){n.toggleClass(o.activeClass,angular.equals(a.$modelValue,t.$eval(r.uibBtnRadio)))},n.on(o.toggleEvent,function(){if(!r.disabled){var e=n.hasClass(o.activeClass);e&&!angular.isDefined(r.uncheckable)||t.$apply(function(){a.$setViewValue(e?null:t.$eval(r.uibBtnRadio)),a.$render()})}}),r.uibUncheckable&&t.$watch(s,function(e){r.$set("uncheckable",e?"":void 0)})}}}]).directive("uibBtnCheckbox",function(){return{require:["uibBtnCheckbox","ngModel"],controller:"UibButtonsController",controllerAs:"button",link:function(e,t,n,r){function i(){return a(n.btnCheckboxTrue,!0)}function o(){return a(n.btnCheckboxFalse,!1)}function a(t,n){return angular.isDefined(t)?e.$eval(t):n}var s=r[0],l=r[1];t.find("input").css({display:"none"}),l.$render=function(){t.toggleClass(s.activeClass,angular.equals(l.$modelValue,i()))},t.on(s.toggleEvent,function(){n.disabled||e.$apply(function(){l.$setViewValue(t.hasClass(s.activeClass)?o():i()),l.$render()})})}}}),angular.module("ui.bootstrap.carousel",[]).controller("UibCarouselController",["$scope","$element","$interval","$timeout","$animate",function(e,t,n,r,i){function o(e){for(var t=0;t<g.length;t++)g[t].slide.active=t===e}function a(n,r,a){if(!y){if(angular.extend(n,{direction:a}),angular.extend(g[v].slide||{},{direction:a}),i.enabled(t)&&!e.$currentTransition&&g[r].element&&h.slides.length>1){g[r].element.data(m,n.direction);var s=h.getCurrentIndex();angular.isNumber(s)&&g[s].element&&g[s].element.data(m,n.direction),e.$currentTransition=!0,i.on("addClass",g[r].element,function(t,n){"close"===n&&(e.$currentTransition=null,i.off("addClass",t))})}e.active=n.index,v=n.index,o(r),c()}}function s(e){for(var t=0;t<g.length;t++)if(g[t].slide===e)return t}function l(){f&&(n.cancel(f),f=null)}function u(t){t.length||(e.$currentTransition=null)}function c(){l();var t=+e.interval;!isNaN(t)&&t>0&&(f=n(d,t))}function d(){var t=+e.interval;p&&!isNaN(t)&&t>0&&g.length?e.next():e.pause()}var f,p,h=this,g=h.slides=e.slides=[],m="uib-slideDirection",v=e.active,y=!1;t.addClass("carousel"),h.addSlide=function(t,n){g.push({slide:t,element:n}),g.sort(function(e,t){return+e.slide.index-+t.slide.index}),(t.index===e.active||1===g.length&&!angular.isNumber(e.active))&&(e.$currentTransition&&(e.$currentTransition=null),v=t.index,e.active=t.index,o(v),h.select(g[s(t)]),1===g.length&&e.play())},h.getCurrentIndex=function(){for(var e=0;e<g.length;e++)if(g[e].slide.index===v)return e},h.next=e.next=function(){var t=(h.getCurrentIndex()+1)%g.length;{if(0!==t||!e.noWrap())return h.select(g[t],"next");e.pause()}},h.prev=e.prev=function(){var t=h.getCurrentIndex()-1<0?g.length-1:h.getCurrentIndex()-1;{if(!e.noWrap()||t!==g.length-1)return h.select(g[t],"prev");e.pause()}},h.removeSlide=function(t){var n=s(t);g.splice(n,1),g.length>0&&v===n?n>=g.length?(v=g.length-1,e.active=v,o(v),h.select(g[g.length-1])):(v=n,e.active=v,o(v),h.select(g[n])):v>n&&(v--,e.active=v),0===g.length&&(v=null,e.active=null)},h.select=e.select=function(t,n){var r=s(t.slide);void 0===n&&(n=r>h.getCurrentIndex()?"next":"prev"),t.slide.index===v||e.$currentTransition||a(t.slide,r,n)},e.indexOfSlide=function(e){return+e.slide.index},e.isActive=function(t){return e.active===t.slide.index},e.isPrevDisabled=function(){return 0===e.active&&e.noWrap()},e.isNextDisabled=function(){return e.active===g.length-1&&e.noWrap()},e.pause=function(){e.noPause||(p=!1,l())},e.play=function(){p||(p=!0,c())},t.on("mouseenter",e.pause),t.on("mouseleave",e.play),e.$on("$destroy",function(){y=!0,l()}),e.$watch("noTransition",function(e){i.enabled(t,!e)}),e.$watch("interval",c),e.$watchCollection("slides",u),e.$watch("active",function(e){if(angular.isNumber(e)&&v!==e){for(var t=0;t<g.length;t++)if(g[t].slide.index===e){e=t;break}g[e]&&(o(e),h.select(g[e]),v=e)}})}]).directive("uibCarousel",function(){return{transclude:!0,controller:"UibCarouselController",controllerAs:"carousel",restrict:"A",templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/carousel.html"},scope:{active:"=",interval:"=",noTransition:"=",noPause:"=",noWrap:"&"}}}).directive("uibSlide",["$animate",function(e){return{require:"^uibCarousel",restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/carousel/slide.html"},scope:{actual:"=?",index:"=?"},link:function(t,n,r,i){n.addClass("item"),i.addSlide(t,n),t.$on("$destroy",function(){i.removeSlide(t)}),t.$watch("active",function(t){e[t?"addClass":"removeClass"](n,"active")})}}}]).animation(".item",["$animateCss",function(e){function t(e,t,n){e.removeClass(t),n&&n()}return{beforeAddClass:function(n,r,i){if("active"===r){var o=!1,a=n.data("uib-slideDirection"),s="next"===a?"left":"right",l=t.bind(this,n,s+" "+a,i);return n.addClass(a),e(n,{addClass:s}).start().done(l),function(){o=!0}}i()},beforeRemoveClass:function(n,r,i){if("active"===r){var o=!1,a="next"===n.data("uib-slideDirection")?"left":"right",s=t.bind(this,n,a,i);return e(n,{addClass:a}).start().done(s),function(){o=!0}}i()}}}]),angular.module("ui.bootstrap.dateparser",[]).service("uibDateParser",["$log","$locale","dateFilter","orderByFilter","filterFilter",function(e,t,n,r,i){function o(e){return i(y,{key:e},!0)[0]}function a(e){var t=[],n=e.split(""),i=e.indexOf("'");if(i>-1){var o=!1;e=e.split("");for(var a=i;a<e.length;a++)o?("'"===e[a]&&(a+1<e.length&&"'"===e[a+1]?(e[a+1]="$",n[a+1]=""):(n[a]="",o=!1)),e[a]="$"):"'"===e[a]&&(e[a]="$",n[a]="",o=!0);e=e.join("")}return angular.forEach(y,function(r){var i=e.indexOf(r.key);if(i>-1){e=e.split(""),n[i]="("+r.regex+")",e[i]="$";for(var o=i+1,a=i+r.key.length;o<a;o++)n[o]="",e[o]="$";e=e.join(""),t.push({index:i,key:r.key,apply:r.apply,matcher:r.regex})}}),{regex:new RegExp("^"+n.join("")+"$"),map:r(t,"index")}}function s(e){for(var t,n,r=[],i=0;i<e.length;)if(angular.isNumber(n)){if("'"===e.charAt(i))(i+1>=e.length||"'"!==e.charAt(i+1))&&(r.push(l(e,n,i)),n=null);else if(i===e.length)for(;n<e.length;)t=u(e,n),r.push(t),n=t.endIdx;i++}else"'"!==e.charAt(i)?(t=u(e,i),r.push(t.parser),i=t.endIdx):(n=i,i++);return r}function l(e,t,n){return function(){return e.substr(t+1,n-t-1)}}function u(e,t){for(var n=e.substr(t),r=0;r<y.length;r++)if(new RegExp("^"+y[r].key).test(n)){var i=y[r];return{endIdx:t+i.key.length,parser:i.formatter}}return{endIdx:t+1,parser:function(){return n.charAt(0)}}}function c(e,t,n){return!(n<1)&&(1===t&&n>28?29===n&&(e%4==0&&e%100!=0||e%400==0):3!==t&&5!==t&&8!==t&&10!==t||n<31)}function d(e){return parseInt(e,10)}function f(e,t){return e&&t?m(e,t):e}function p(e,t){return e&&t?m(e,t,!0):e}function h(e,t){e=e.replace(/:/g,"");var n=Date.parse("Jan 01, 1970 00:00:00 "+e)/6e4;return isNaN(n)?t:n}function g(e,t){return(e=new Date(e.getTime())).setMinutes(e.getMinutes()+t),e}function m(e,t,n){n=n?-1:1;var r=e.getTimezoneOffset();return g(e,n*(h(t,r)-r))}var v,y,b=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;this.init=function(){v=t.id,this.parsers={},this.formatters={},y=[{key:"yyyy",regex:"\\d{4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yyyy")}},{key:"yy",regex:"\\d{2}",apply:function(e){e=+e,this.year=e<69?e+2e3:e+1900},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"yy")}},{key:"y",regex:"\\d{1,4}",apply:function(e){this.year=+e},formatter:function(e){var t=new Date;return t.setFullYear(Math.abs(e.getFullYear())),n(t,"y")}},{key:"M!",regex:"0?[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){var t=e.getMonth();return/^[0-9]$/.test(t)?n(e,"MM"):n(e,"M")}},{key:"MMMM",regex:t.DATETIME_FORMATS.MONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.MONTH.indexOf(e)},formatter:function(e){return n(e,"MMMM")}},{key:"MMM",regex:t.DATETIME_FORMATS.SHORTMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.SHORTMONTH.indexOf(e)},formatter:function(e){return n(e,"MMM")}},{key:"MM",regex:"0[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"MM")}},{key:"M",regex:"[1-9]|1[0-2]",apply:function(e){this.month=e-1},formatter:function(e){return n(e,"M")}},{key:"d!",regex:"[0-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){var t=e.getDate();return/^[1-9]$/.test(t)?n(e,"dd"):n(e,"d")}},{key:"dd",regex:"[0-2][0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"dd")}},{key:"d",regex:"[1-2]?[0-9]{1}|3[0-1]{1}",apply:function(e){this.date=+e},formatter:function(e){return n(e,"d")}},{key:"EEEE",regex:t.DATETIME_FORMATS.DAY.join("|"),formatter:function(e){return n(e,"EEEE")}},{key:"EEE",regex:t.DATETIME_FORMATS.SHORTDAY.join("|"),formatter:function(e){return n(e,"EEE")}},{key:"HH",regex:"(?:0|1)[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"HH")}},{key:"hh",regex:"0[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"hh")}},{key:"H",regex:"1?[0-9]|2[0-3]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"H")}},{key:"h",regex:"[0-9]|1[0-2]",apply:function(e){this.hours=+e},formatter:function(e){return n(e,"h")}},{key:"mm",regex:"[0-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"mm")}},{key:"m",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.minutes=+e},formatter:function(e){return n(e,"m")}},{key:"sss",regex:"[0-9][0-9][0-9]",apply:function(e){this.milliseconds=+e},formatter:function(e){return n(e,"sss")}},{key:"ss",regex:"[0-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"ss")}},{key:"s",regex:"[0-9]|[1-5][0-9]",apply:function(e){this.seconds=+e},formatter:function(e){return n(e,"s")}},{key:"a",regex:t.DATETIME_FORMATS.AMPMS.join("|"),apply:function(e){12===this.hours&&(this.hours=0),"PM"===e&&(this.hours+=12)},formatter:function(e){return n(e,"a")}},{key:"Z",regex:"[+-]\\d{4}",apply:function(e){var t=e.match(/([+-])(\d{2})(\d{2})/),n=t[1],r=t[2],i=t[3];this.hours+=d(n+r),this.minutes+=d(n+i)},formatter:function(e){return n(e,"Z")}},{key:"ww",regex:"[0-4][0-9]|5[0-3]",formatter:function(e){return n(e,"ww")}},{key:"w",regex:"[0-9]|[1-4][0-9]|5[0-3]",formatter:function(e){return n(e,"w")}},{key:"GGGG",regex:t.DATETIME_FORMATS.ERANAMES.join("|").replace(/\s/g,"\\s"),formatter:function(e){return n(e,"GGGG")}},{key:"GGG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GGG")}},{key:"GG",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"GG")}},{key:"G",regex:t.DATETIME_FORMATS.ERAS.join("|"),formatter:function(e){return n(e,"G")}}],angular.version.major>=1&&angular.version.minor>4&&y.push({key:"LLLL",regex:t.DATETIME_FORMATS.STANDALONEMONTH.join("|"),apply:function(e){this.month=t.DATETIME_FORMATS.STANDALONEMONTH.indexOf(e)},formatter:function(e){return n(e,"LLLL")}})},this.init(),this.getParser=function(e){var t=o(e);return t&&t.apply||null},this.overrideParser=function(e,t){var n=o(e);n&&angular.isFunction(t)&&(this.parsers={},n.apply=t)}.bind(this),this.filter=function(e,n){return angular.isDate(e)&&!isNaN(e)&&n?(n=t.DATETIME_FORMATS[n]||n,t.id!==v&&this.init(),this.formatters[n]||(this.formatters[n]=s(n)),this.formatters[n].reduce(function(t,n){return t+n(e)},"")):""},this.parse=function(n,r,i){if(!angular.isString(n)||!r)return n;r=(r=t.DATETIME_FORMATS[r]||r).replace(b,"\\$&"),t.id!==v&&this.init(),this.parsers[r]||(this.parsers[r]=a(r));var o=this.parsers[r],s=o.regex,l=o.map,u=n.match(s),d=!1;if(u&&u.length){var f,p;angular.isDate(i)&&!isNaN(i.getTime())?f={year:i.getFullYear(),month:i.getMonth(),date:i.getDate(),hours:i.getHours(),minutes:i.getMinutes(),seconds:i.getSeconds(),milliseconds:i.getMilliseconds()}:(i&&e.warn("dateparser:","baseDate is not a valid date"),f={year:1900,month:0,date:1,hours:0,minutes:0,seconds:0,milliseconds:0});for(var h=1,g=u.length;h<g;h++){var m=l[h-1];"Z"===m.matcher&&(d=!0),m.apply&&m.apply.call(f,u[h])}var y=d?Date.prototype.setUTCFullYear:Date.prototype.setFullYear,x=d?Date.prototype.setUTCHours:Date.prototype.setHours;return c(f.year,f.month,f.date)&&(!angular.isDate(i)||isNaN(i.getTime())||d?(p=new Date(0),y.call(p,f.year,f.month,f.date),x.call(p,f.hours||0,f.minutes||0,f.seconds||0,f.milliseconds||0)):(p=new Date(i),y.call(p,f.year,f.month,f.date),x.call(p,f.hours,f.minutes,f.seconds,f.milliseconds))),p}},this.toTimezone=f,this.fromTimezone=p,this.timezoneToOffset=h,this.addDateMinutes=g,this.convertTimezoneToLocal=m}]),angular.module("ui.bootstrap.isClass",[]).directive("uibIsClass",["$animate",function(e){var t=/^\s*([\s\S]+?)\s+on\s+([\s\S]+?)\s*$/,n=/^\s*([\s\S]+?)\s+for\s+([\s\S]+?)\s*$/;return{restrict:"A",compile:function(r,i){function o(e,t,n){l.push(e),u.push({scope:e,element:t}),p.forEach(function(t,n){a(t,e)}),e.$on("$destroy",s)}function a(t,r){var i=t.match(n),o=r.$eval(i[1]),a=i[2],s=c[t];if(!s){var l=function(t){var n=null;u.some(function(e){if(e.scope.$eval(f)===t)return n=e,!0}),s.lastActivated!==n&&(s.lastActivated&&e.removeClass(s.lastActivated.element,o),n&&e.addClass(n.element,o),s.lastActivated=n)};c[t]=s={lastActivated:null,scope:r,watchFn:l,compareWithExp:a,watcher:r.$watch(a,l)}}s.watchFn(r.$eval(a))}function s(e){var t=e.targetScope,n=l.indexOf(t);if(l.splice(n,1),u.splice(n,1),l.length){var r=l[0];angular.forEach(c,function(e){e.scope===t&&(e.watcher=r.$watch(e.compareWithExp,e.watchFn),e.scope=r)})}else c={}}var l=[],u=[],c={},d=i.uibIsClass.match(t),f=d[2],p=d[1].split(",");return o}}}]),angular.module("ui.bootstrap.datepicker",["ui.bootstrap.dateparser","ui.bootstrap.isClass"]).value("$datepickerSuppressError",!1).value("$datepickerLiteralWarning",!0).constant("uibDatepickerConfig",{datepickerMode:"day",formatDay:"dd",formatMonth:"MMMM",formatYear:"yyyy",formatDayHeader:"EEE",formatDayTitle:"MMMM yyyy",formatMonthTitle:"yyyy",maxDate:null,maxMode:"year",minDate:null,minMode:"day",monthColumns:3,ngModelOptions:{},shortcutPropagation:!1,showWeeks:!0,yearColumns:5,yearRows:4}).controller("UibDatepickerController",["$scope","$element","$attrs","$parse","$interpolate","$locale","$log","dateFilter","uibDatepickerConfig","$datepickerLiteralWarning","$datepickerSuppressError","uibDateParser",function(e,t,n,r,i,o,a,s,l,u,c,d){function f(t){e.datepickerMode=t,e.datepickerOptions.datepickerMode=t}function p(t){var n;if(angular.version.minor<6)(n=t.$options||e.datepickerOptions.ngModelOptions||l.ngModelOptions||{}).getOption=function(e){return n[e]};else{var r=t.$options.getOption("timezone")||(e.datepickerOptions.ngModelOptions?e.datepickerOptions.ngModelOptions.timezone:null)||(l.ngModelOptions?l.ngModelOptions.timezone:null);n=t.$options.createChild(l.ngModelOptions).createChild(e.datepickerOptions.ngModelOptions).createChild(t.$options).createChild({timezone:r})}return n}var h=this,g={$setViewValue:angular.noop},m={},v=[];t.addClass("uib-datepicker"),n.$set("role","application"),e.datepickerOptions||(e.datepickerOptions={}),this.modes=["day","month","year"],["customClass","dateDisabled","datepickerMode","formatDay","formatDayHeader","formatDayTitle","formatMonth","formatMonthTitle","formatYear","maxDate","maxMode","minDate","minMode","monthColumns","showWeeks","shortcutPropagation","startingDay","yearColumns","yearRows"].forEach(function(t){switch(t){case"customClass":case"dateDisabled":e[t]=e.datepickerOptions[t]||angular.noop;break;case"datepickerMode":e.datepickerMode=angular.isDefined(e.datepickerOptions.datepickerMode)?e.datepickerOptions.datepickerMode:l.datepickerMode;break;case"formatDay":case"formatDayHeader":case"formatDayTitle":case"formatMonth":case"formatMonthTitle":case"formatYear":h[t]=angular.isDefined(e.datepickerOptions[t])?i(e.datepickerOptions[t])(e.$parent):l[t];break;case"monthColumns":case"showWeeks":case"shortcutPropagation":case"yearColumns":case"yearRows":h[t]=angular.isDefined(e.datepickerOptions[t])?e.datepickerOptions[t]:l[t];break;case"startingDay":angular.isDefined(e.datepickerOptions.startingDay)?h.startingDay=e.datepickerOptions.startingDay:angular.isNumber(l.startingDay)?h.startingDay=l.startingDay:h.startingDay=(o.DATETIME_FORMATS.FIRSTDAYOFWEEK+8)%7;break;case"maxDate":case"minDate":e.$watch("datepickerOptions."+t,function(e){e?angular.isDate(e)?h[t]=d.fromTimezone(new Date(e),m.getOption("timezone")):(u&&a.warn("Literal date support has been deprecated, please switch to date object usage"),h[t]=new Date(s(e,"medium"))):h[t]=l[t]?d.fromTimezone(new Date(l[t]),m.getOption("timezone")):null,h.refreshView()});break;case"maxMode":case"minMode":e.datepickerOptions[t]?e.$watch(function(){return e.datepickerOptions[t]},function(n){h[t]=e[t]=angular.isDefined(n)?n:e.datepickerOptions[t],("minMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)<h.modes.indexOf(h[t])||"maxMode"===t&&h.modes.indexOf(e.datepickerOptions.datepickerMode)>h.modes.indexOf(h[t]))&&(e.datepickerMode=h[t],e.datepickerOptions.datepickerMode=h[t])}):h[t]=e[t]=l[t]||null}}),e.uniqueId="datepicker-"+e.$id+"-"+Math.floor(1e4*Math.random()),e.disabled=angular.isDefined(n.disabled)||!1,angular.isDefined(n.ngDisabled)&&v.push(e.$parent.$watch(n.ngDisabled,function(t){e.disabled=t,h.refreshView()})),e.isActive=function(t){return 0===h.compare(t.date,h.activeDate)&&(e.activeDateId=t.uid,!0)},this.init=function(t){m=p(g=t),e.datepickerOptions.initDate?(h.activeDate=d.fromTimezone(e.datepickerOptions.initDate,m.getOption("timezone"))||new Date,e.$watch("datepickerOptions.initDate",function(e){e&&(g.$isEmpty(g.$modelValue)||g.$invalid)&&(h.activeDate=d.fromTimezone(e,m.getOption("timezone")),h.refreshView())})):h.activeDate=new Date;var n=g.$modelValue?new Date(g.$modelValue):new Date;this.activeDate=isNaN(n)?d.fromTimezone(new Date,m.getOption("timezone")):d.fromTimezone(n,m.getOption("timezone")),g.$render=function(){h.render()}},this.render=function(){if(g.$viewValue){var e=new Date(g.$viewValue);!isNaN(e)?this.activeDate=d.fromTimezone(e,m.getOption("timezone")):c||a.error('Datepicker directive: "ng-model" value must be a Date object')}this.refreshView()},this.refreshView=function(){if(this.element){e.selectedDt=null,this._refreshView(),e.activeDt&&(e.activeDateId=e.activeDt.uid);var t=g.$viewValue?new Date(g.$viewValue):null;t=d.fromTimezone(t,m.getOption("timezone")),g.$setValidity("dateDisabled",!t||this.element&&!this.isDisabled(t))}},this.createDateObject=function(t,n){var r=g.$viewValue?new Date(g.$viewValue):null;r=d.fromTimezone(r,m.getOption("timezone"));var i=new Date;i=d.fromTimezone(i,m.getOption("timezone"));var o=this.compare(t,i),a={date:t,label:d.filter(t,n),selected:r&&0===this.compare(t,r),disabled:this.isDisabled(t),past:o<0,current:0===o,future:o>0,customClass:this.customClass(t)||null};return r&&0===this.compare(t,r)&&(e.selectedDt=a),h.activeDate&&0===this.compare(a.date,h.activeDate)&&(e.activeDt=a),a},this.isDisabled=function(t){return e.disabled||this.minDate&&this.compare(t,this.minDate)<0||this.maxDate&&this.compare(t,this.maxDate)>0||e.dateDisabled&&e.dateDisabled({date:t,mode:e.datepickerMode})},this.customClass=function(t){return e.customClass({date:t,mode:e.datepickerMode})},this.split=function(e,t){for(var n=[];e.length>0;)n.push(e.splice(0,t));return n},e.select=function(t){if(e.datepickerMode===h.minMode){var n=g.$viewValue?d.fromTimezone(new Date(g.$viewValue),m.getOption("timezone")):new Date(0,0,0,0,0,0,0);n.setFullYear(t.getFullYear(),t.getMonth(),t.getDate()),n=d.toTimezone(n,m.getOption("timezone")),g.$setViewValue(n),g.$render()}else h.activeDate=t,f(h.modes[h.modes.indexOf(e.datepickerMode)-1]),e.$emit("uib:datepicker.mode");e.$broadcast("uib:datepicker.focus")},e.move=function(e){var t=h.activeDate.getFullYear()+e*(h.step.years||0),n=h.activeDate.getMonth()+e*(h.step.months||0);h.activeDate.setFullYear(t,n,1),h.refreshView()},e.toggleMode=function(t){t=t||1,e.datepickerMode===h.maxMode&&1===t||e.datepickerMode===h.minMode&&-1===t||(f(h.modes[h.modes.indexOf(e.datepickerMode)+t]),e.$emit("uib:datepicker.mode"))},e.keys={13:"enter",32:"space",33:"pageup",34:"pagedown",35:"end",36:"home",37:"left",38:"up",39:"right",40:"down"};var y=function(){h.element[0].focus()};e.$on("uib:datepicker.focus",y),e.keydown=function(t){var n=e.keys[t.which];if(n&&!t.shiftKey&&!t.altKey&&!e.disabled)if(t.preventDefault(),h.shortcutPropagation||t.stopPropagation(),"enter"===n||"space"===n){if(h.isDisabled(h.activeDate))return;e.select(h.activeDate)}else!t.ctrlKey||"up"!==n&&"down"!==n?(h.handleKeyDown(n,t),h.refreshView()):e.toggleMode("up"===n?1:-1)},t.on("keydown",function(t){e.$apply(function(){e.keydown(t)})}),e.$on("$destroy",function(){for(;v.length;)v.shift()()})}]).controller("UibDaypickerController",["$scope","$element","dateFilter",function(e,t,n){function r(e,t){return 1!==t||e%4!=0||e%100==0&&e%400!=0?o[t]:29}function i(e){var t=new Date(e);t.setDate(t.getDate()+4-(t.getDay()||7));var n=t.getTime();return t.setMonth(0),t.setDate(1),Math.floor(Math.round((n-t)/864e5)/7)+1}var o=[31,28,31,30,31,30,31,31,30,31,30,31];this.step={months:1},this.element=t,this.init=function(t){angular.extend(t,this),e.showWeeks=t.showWeeks,t.refreshView()},this.getDates=function(e,t){for(var n,r=new Array(t),i=new Date(e),o=0;o<t;)n=new Date(i),r[o++]=n,i.setDate(i.getDate()+1);return r},this._refreshView=function(){var t=this.activeDate.getFullYear(),r=this.activeDate.getMonth(),o=new Date(this.activeDate);o.setFullYear(t,r,1);var a=this.startingDay-o.getDay(),s=a>0?7-a:-a,l=new Date(o);s>0&&l.setDate(1-s);for(var u=this.getDates(l,42),c=0;c<42;c++)u[c]=angular.extend(this.createDateObject(u[c],this.formatDay),{secondary:u[c].getMonth()!==r,uid:e.uniqueId+"-"+c});e.labels=new Array(7);for(var d=0;d<7;d++)e.labels[d]={abbr:n(u[d].date,this.formatDayHeader),full:n(u[d].date,"EEEE")};if(e.title=n(this.activeDate,this.formatDayTitle),e.rows=this.split(u,7),e.showWeeks){e.weekNumbers=[];for(var f=(11-this.startingDay)%7,p=e.rows.length,h=0;h<p;h++)e.weekNumbers.push(i(e.rows[h][f].date))}},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth(),e.getDate()),r=new Date(t.getFullYear(),t.getMonth(),t.getDate());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getDate();if("left"===e)n-=1;else if("up"===e)n-=7;else if("right"===e)n+=1;else if("down"===e)n+=7;else if("pageup"===e||"pagedown"===e){var i=this.activeDate.getMonth()+("pageup"===e?-1:1);this.activeDate.setMonth(i,1),n=Math.min(r(this.activeDate.getFullYear(),this.activeDate.getMonth()),n)}else"home"===e?n=1:"end"===e&&(n=r(this.activeDate.getFullYear(),this.activeDate.getMonth()));this.activeDate.setDate(n)}}]).controller("UibMonthpickerController",["$scope","$element","dateFilter",function(e,t,n){this.step={years:1},this.element=t,this.init=function(e){angular.extend(e,this),e.refreshView()},this._refreshView=function(){for(var t,r=new Array(12),i=this.activeDate.getFullYear(),o=0;o<12;o++)(t=new Date(this.activeDate)).setFullYear(i,o,1),r[o]=angular.extend(this.createDateObject(t,this.formatMonth),{uid:e.uniqueId+"-"+o});e.title=n(this.activeDate,this.formatMonthTitle),e.rows=this.split(r,this.monthColumns),e.yearHeaderColspan=this.monthColumns>3?this.monthColumns-2:1},this.compare=function(e,t){var n=new Date(e.getFullYear(),e.getMonth()),r=new Date(t.getFullYear(),t.getMonth());return n.setFullYear(e.getFullYear()),r.setFullYear(t.getFullYear()),n-r},this.handleKeyDown=function(e,t){var n=this.activeDate.getMonth();if("left"===e)n-=1;else if("up"===e)n-=this.monthColumns;else if("right"===e)n+=1;else if("down"===e)n+=this.monthColumns;else if("pageup"===e||"pagedown"===e){var r=this.activeDate.getFullYear()+("pageup"===e?-1:1);this.activeDate.setFullYear(r)}else"home"===e?n=0:"end"===e&&(n=11);this.activeDate.setMonth(n)}}]).controller("UibYearpickerController",["$scope","$element","dateFilter",function(e,t,n){function r(e){return parseInt((e-1)/o,10)*o+1}var i,o;this.element=t,this.yearpickerInit=function(){i=this.yearColumns,o=this.yearRows*i,this.step={years:o}},this._refreshView=function(){for(var t,n=new Array(o),a=0,s=r(this.activeDate.getFullYear());a<o;a++)(t=new Date(this.activeDate)).setFullYear(s+a,0,1),n[a]=angular.extend(this.createDateObject(t,this.formatYear),{uid:e.uniqueId+"-"+a});e.title=[n[0].label,n[o-1].label].join(" - "),e.rows=this.split(n,i),e.columns=i},this.compare=function(e,t){return e.getFullYear()-t.getFullYear()},this.handleKeyDown=function(e,t){var n=this.activeDate.getFullYear();"left"===e?n-=1:"up"===e?n-=i:"right"===e?n+=1:"down"===e?n+=i:"pageup"===e||"pagedown"===e?n+=("pageup"===e?-1:1)*o:"home"===e?n=r(this.activeDate.getFullYear()):"end"===e&&(n=r(this.activeDate.getFullYear())+o-1),this.activeDate.setFullYear(n)}}]).directive("uibDatepicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/datepicker.html"},scope:{datepickerOptions:"=?"},require:["uibDatepicker","^ngModel"],restrict:"A",controller:"UibDatepickerController",controllerAs:"datepicker",link:function(e,t,n,r){var i=r[0],o=r[1];i.init(o)}}}).directive("uibDaypicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/day.html"},require:["^uibDatepicker","uibDaypicker"],restrict:"A",controller:"UibDaypickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibMonthpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/month.html"},require:["^uibDatepicker","uibMonthpicker"],restrict:"A",controller:"UibMonthpickerController",link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibYearpicker",function(){return{templateUrl:function(e,t){return t.templateUrl||"uib/template/datepicker/year.html"},require:["^uibDatepicker","uibYearpicker"],restrict:"A",controller:"UibYearpickerController",link:function(e,t,n,r){var i=r[0];angular.extend(i,r[1]),i.yearpickerInit(),i.refreshView()}}}),angular.module("ui.bootstrap.position",[]).factory("$uibPosition",["$document","$window",function(e,t){var n,r,i={normal:/(auto|scroll)/,hidden:/(auto|scroll|hidden)/},o={auto:/\s?auto?\s?/i,primary:/^(top|bottom|left|right)$/,secondary:/^(top|bottom|left|right|center)$/,vertical:/^(top|bottom)$/},a=/(HTML|BODY)/;return{getRawNode:function(e){return e.nodeName?e:e[0]||e},parseStyle:function(e){return e=parseFloat(e),isFinite(e)?e:0},offsetParent:function(n){for(var r=(n=this.getRawNode(n)).offsetParent||e[0].documentElement;r&&r!==e[0].documentElement&&function(e){return"static"===(t.getComputedStyle(e).position||"static")}(r);)r=r.offsetParent;return r||e[0].documentElement},scrollbarWidth:function(i){if(i){if(angular.isUndefined(r)){var o=e.find("body");o.addClass("uib-position-body-scrollbar-measure"),r=t.innerWidth-o[0].clientWidth,r=isFinite(r)?r:0,o.removeClass("uib-position-body-scrollbar-measure")}return r}if(angular.isUndefined(n)){var a=angular.element('<div class="uib-position-scrollbar-measure"></div>');e.find("body").append(a),n=a[0].offsetWidth-a[0].clientWidth,n=isFinite(n)?n:0,a.remove()}return n},scrollbarPadding:function(e){e=this.getRawNode(e);var n=t.getComputedStyle(e),r=this.parseStyle(n.paddingRight),i=this.parseStyle(n.paddingBottom),o=this.scrollParent(e,!1,!0),s=this.scrollbarWidth(a.test(o.tagName));return{scrollbarWidth:s,widthOverflow:o.scrollWidth>o.clientWidth,right:r+s,originalRight:r,heightOverflow:o.scrollHeight>o.clientHeight,bottom:i+s,originalBottom:i}},isScrollable:function(e,n){e=this.getRawNode(e);var r=n?i.hidden:i.normal,o=t.getComputedStyle(e);return r.test(o.overflow+o.overflowY+o.overflowX)},scrollParent:function(n,r,o){n=this.getRawNode(n);var a=r?i.hidden:i.normal,s=e[0].documentElement,l=t.getComputedStyle(n);if(o&&a.test(l.overflow+l.overflowY+l.overflowX))return n;var u="absolute"===l.position,c=n.parentElement||s;if(c===s||"fixed"===l.position)return s;for(;c.parentElement&&c!==s;){var d=t.getComputedStyle(c);if(u&&"static"!==d.position&&(u=!1),!u&&a.test(d.overflow+d.overflowY+d.overflowX))break;c=c.parentElement}return c},position:function(n,r){n=this.getRawNode(n);var i=this.offset(n);if(r){var o=t.getComputedStyle(n);i.top-=this.parseStyle(o.marginTop),i.left-=this.parseStyle(o.marginLeft)}var a=this.offsetParent(n),s={top:0,left:0};return a!==e[0].documentElement&&((s=this.offset(a)).top+=a.clientTop-a.scrollTop,s.left+=a.clientLeft-a.scrollLeft),{width:Math.round(angular.isNumber(i.width)?i.width:n.offsetWidth),height:Math.round(angular.isNumber(i.height)?i.height:n.offsetHeight),top:Math.round(i.top-s.top),left:Math.round(i.left-s.left)}},offset:function(n){var r=(n=this.getRawNode(n)).getBoundingClientRect();return{width:Math.round(angular.isNumber(r.width)?r.width:n.offsetWidth),height:Math.round(angular.isNumber(r.height)?r.height:n.offsetHeight),top:Math.round(r.top+(t.pageYOffset||e[0].documentElement.scrollTop)),left:Math.round(r.left+(t.pageXOffset||e[0].documentElement.scrollLeft))}},viewportOffset:function(n,r,i){i=!1!==i;var o=(n=this.getRawNode(n)).getBoundingClientRect(),a={top:0,left:0,bottom:0,right:0},s=r?e[0].documentElement:this.scrollParent(n),l=s.getBoundingClientRect();if(a.top=l.top+s.clientTop,a.left=l.left+s.clientLeft,s===e[0].documentElement&&(a.top+=t.pageYOffset,a.left+=t.pageXOffset),a.bottom=a.top+s.clientHeight,a.right=a.left+s.clientWidth,i){var u=t.getComputedStyle(s);a.top+=this.parseStyle(u.paddingTop),a.bottom-=this.parseStyle(u.paddingBottom),a.left+=this.parseStyle(u.paddingLeft),a.right-=this.parseStyle(u.paddingRight)}return{top:Math.round(o.top-a.top),bottom:Math.round(a.bottom-o.bottom),left:Math.round(o.left-a.left),right:Math.round(a.right-o.right)}},parsePlacement:function(e){var t=o.auto.test(e);return t&&(e=e.replace(o.auto,"")),e=e.split("-"),e[0]=e[0]||"top",o.primary.test(e[0])||(e[0]="top"),e[1]=e[1]||"center",o.secondary.test(e[1])||(e[1]="center"),e[2]=!!t,e},positionElements:function(e,n,r,i){e=this.getRawNode(e),n=this.getRawNode(n);var a=angular.isDefined(n.offsetWidth)?n.offsetWidth:n.prop("offsetWidth"),s=angular.isDefined(n.offsetHeight)?n.offsetHeight:n.prop("offsetHeight");r=this.parsePlacement(r);var l=i?this.offset(e):this.position(e),u={top:0,left:0,placement:""};if(r[2]){var c=this.viewportOffset(e,i),d=t.getComputedStyle(n),f={width:a+Math.round(Math.abs(this.parseStyle(d.marginLeft)+this.parseStyle(d.marginRight))),height:s+Math.round(Math.abs(this.parseStyle(d.marginTop)+this.parseStyle(d.marginBottom)))};if(r[0]="top"===r[0]&&f.height>c.top&&f.height<=c.bottom?"bottom":"bottom"===r[0]&&f.height>c.bottom&&f.height<=c.top?"top":"left"===r[0]&&f.width>c.left&&f.width<=c.right?"right":"right"===r[0]&&f.width>c.right&&f.width<=c.left?"left":r[0],r[1]="top"===r[1]&&f.height-l.height>c.bottom&&f.height-l.height<=c.top?"bottom":"bottom"===r[1]&&f.height-l.height>c.top&&f.height-l.height<=c.bottom?"top":"left"===r[1]&&f.width-l.width>c.right&&f.width-l.width<=c.left?"right":"right"===r[1]&&f.width-l.width>c.left&&f.width-l.width<=c.right?"left":r[1],"center"===r[1])if(o.vertical.test(r[0])){var p=l.width/2-a/2;c.left+p<0&&f.width-l.width<=c.right?r[1]="left":c.right+p<0&&f.width-l.width<=c.left&&(r[1]="right")}else{var h=l.height/2-f.height/2;c.top+h<0&&f.height-l.height<=c.bottom?r[1]="top":c.bottom+h<0&&f.height-l.height<=c.top&&(r[1]="bottom")}}switch(r[0]){case"top":u.top=l.top-s;break;case"bottom":u.top=l.top+l.height;break;case"left":u.left=l.left-a;break;case"right":u.left=l.left+l.width}switch(r[1]){case"top":u.top=l.top;break;case"bottom":u.top=l.top+l.height-s;break;case"left":u.left=l.left;break;case"right":u.left=l.left+l.width-a;break;case"center":o.vertical.test(r[0])?u.left=l.left+l.width/2-a/2:u.top=l.top+l.height/2-s/2}return u.top=Math.round(u.top),u.left=Math.round(u.left),u.placement="center"===r[1]?r[0]:r[0]+"-"+r[1],u},adjustTop:function(e,t,n,r){if(-1!==e.indexOf("top")&&n!==r)return{top:t.top-r+"px"}},positionArrow:function(e,n){var r=(e=this.getRawNode(e)).querySelector(".tooltip-inner, .popover-inner");if(r){var i=angular.element(r).hasClass("tooltip-inner"),a=i?e.querySelector(".tooltip-arrow"):e.querySelector(".arrow");if(a){var s={top:"",bottom:"",left:"",right:""};if("center"!==(n=this.parsePlacement(n))[1]){var l="border-"+n[0]+"-width",u=t.getComputedStyle(a)[l],c="border-";o.vertical.test(n[0])?c+=n[0]+"-"+n[1]:c+=n[1]+"-"+n[0],c+="-radius";var d=t.getComputedStyle(i?r:e)[c];switch(n[0]){case"top":s.bottom=i?"0":"-"+u;break;case"bottom":s.top=i?"0":"-"+u;break;case"left":s.right=i?"0":"-"+u;break;case"right":s.left=i?"0":"-"+u}s[n[1]]=d,angular.element(a).css(s)}else angular.element(a).css(s)}}}}}]),angular.module("ui.bootstrap.datepickerPopup",["ui.bootstrap.datepicker","ui.bootstrap.position"]).value("$datepickerPopupLiteralWarning",!0).constant("uibDatepickerPopupConfig",{altInputFormats:[],appendToBody:!1,clearText:"Clear",closeOnDateSelection:!0,closeText:"Done",currentText:"Today",datepickerPopup:"yyyy-MM-dd",datepickerPopupTemplateUrl:"uib/template/datepickerPopup/popup.html",datepickerTemplateUrl:"uib/template/datepicker/datepicker.html",html5Types:{date:"yyyy-MM-dd","datetime-local":"yyyy-MM-ddTHH:mm:ss.sss",month:"yyyy-MM"},onOpenFocus:!0,showButtonBar:!0,placement:"auto bottom-left"}).controller("UibDatepickerPopupController",["$scope","$element","$attrs","$compile","$log","$parse","$window","$document","$rootScope","$uibPosition","dateFilter","uibDateParser","uibDatepickerPopupConfig","$timeout","uibDatepickerConfig","$datepickerPopupLiteralWarning",function(e,t,n,r,i,o,a,s,l,u,c,d,f,p,h,g){function m(t){var n=d.parse(t,C,e.date);if(isNaN(n))for(var r=0;r<F.length;r++)if(n=d.parse(t,F[r],e.date),!isNaN(n))return n;return n}function v(e){if(angular.isNumber(e)&&(e=new Date(e)),!e)return null;if(angular.isDate(e)&&!isNaN(e))return e;if(angular.isString(e)){var t=m(e);if(!isNaN(t))return d.toTimezone(t,R.getOption("timezone"))}return R.getOption("allowInvalid")?e:void 0}function y(e,t){var r=e||t;return!n.ngRequired&&!r||(angular.isNumber(r)&&(r=new Date(r)),!r||(!(!angular.isDate(r)||isNaN(r))||!!angular.isString(r)&&!isNaN(m(r))))}function b(n){if(e.isOpen||!e.disabled){var r=P[0],i=t[0].contains(n.target),o=void 0!==r.contains&&r.contains(n.target);!e.isOpen||i||o||e.$apply(function(){e.isOpen=!1})}}function x(n){27===n.which&&e.isOpen?(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!1}),t[0].focus()):40!==n.which||e.isOpen||(n.preventDefault(),n.stopPropagation(),e.$apply(function(){e.isOpen=!0}))}function w(){if(e.isOpen){var r=angular.element(P[0].querySelector(".uib-datepicker-popup")),i=n.popupPlacement?n.popupPlacement:f.placement,o=u.positionElements(t,r,i,S);r.css({top:o.top+"px",left:o.left+"px"}),r.hasClass("uib-position-measure")&&r.removeClass("uib-position-measure")}}function _(e){var t;return angular.version.minor<6?(t=angular.isObject(e.$options)?e.$options:{timezone:null}).getOption=function(e){return t[e]}:t=e.$options,t}var C,k,S,$,M,T,D,E,L,A,R,P,F,O=!1,N=[];this.init=function(i){if(A=i,R=_(A),k=angular.isDefined(n.closeOnDateSelection)?e.$parent.$eval(n.closeOnDateSelection):f.closeOnDateSelection,S=angular.isDefined(n.datepickerAppendToBody)?e.$parent.$eval(n.datepickerAppendToBody):f.appendToBody,$=angular.isDefined(n.onOpenFocus)?e.$parent.$eval(n.onOpenFocus):f.onOpenFocus,M=angular.isDefined(n.datepickerPopupTemplateUrl)?n.datepickerPopupTemplateUrl:f.datepickerPopupTemplateUrl,T=angular.isDefined(n.datepickerTemplateUrl)?n.datepickerTemplateUrl:f.datepickerTemplateUrl,F=angular.isDefined(n.altInputFormats)?e.$parent.$eval(n.altInputFormats):f.altInputFormats,e.showButtonBar=angular.isDefined(n.showButtonBar)?e.$parent.$eval(n.showButtonBar):f.showButtonBar,f.html5Types[n.type]?(C=f.html5Types[n.type],O=!0):(C=n.uibDatepickerPopup||f.datepickerPopup,n.$observe("uibDatepickerPopup",function(e,t){var n=e||f.datepickerPopup;if(n!==C&&(C=n,A.$modelValue=null,!C))throw new Error("uibDatepickerPopup must have a date format specified.")})),!C)throw new Error("uibDatepickerPopup must have a date format specified.");if(O&&n.uibDatepickerPopup)throw new Error("HTML5 date input types do not support custom formats.");(D=angular.element("<div uib-datepicker-popup-wrap><div uib-datepicker></div></div>")).attr({"ng-model":"date","ng-change":"dateSelection(date)","template-url":M}),(E=angular.element(D.children()[0])).attr("template-url",T),e.datepickerOptions||(e.datepickerOptions={}),O&&"month"===n.type&&(e.datepickerOptions.datepickerMode="month",e.datepickerOptions.minMode="month"),E.attr("datepicker-options","datepickerOptions"),O?A.$formatters.push(function(t){return e.date=d.fromTimezone(t,R.getOption("timezone")),t}):(A.$$parserName="date",A.$validators.date=y,A.$parsers.unshift(v),A.$formatters.push(function(t){return A.$isEmpty(t)?(e.date=t,t):(angular.isNumber(t)&&(t=new Date(t)),e.date=d.fromTimezone(t,R.getOption("timezone")),d.filter(e.date,C))})),A.$viewChangeListeners.push(function(){e.date=m(A.$viewValue)}),t.on("keydown",x),P=r(D)(e),D.remove(),S?s.find("body").append(P):t.after(P),e.$on("$destroy",function(){for(!0===e.isOpen&&(l.$$phase||e.$apply(function(){e.isOpen=!1})),P.remove(),t.off("keydown",x),s.off("click",b),L&&L.off("scroll",w),angular.element(a).off("resize",w);N.length;)N.shift()()})},e.getText=function(t){return e[t+"Text"]||f[t+"Text"]},e.isDisabled=function(t){"today"===t&&(t=d.fromTimezone(new Date,R.getOption("timezone")));var n={};return angular.forEach(["minDate","maxDate"],function(t){e.datepickerOptions[t]?angular.isDate(e.datepickerOptions[t])?n[t]=new Date(e.datepickerOptions[t]):(g&&i.warn("Literal date support has been deprecated, please switch to date object usage"),n[t]=new Date(c(e.datepickerOptions[t],"medium"))):n[t]=null}),e.datepickerOptions&&n.minDate&&e.compare(t,n.minDate)<0||n.maxDate&&e.compare(t,n.maxDate)>0},e.compare=function(e,t){return new Date(e.getFullYear(),e.getMonth(),e.getDate())-new Date(t.getFullYear(),t.getMonth(),t.getDate())},e.dateSelection=function(n){e.date=n;var r=e.date?d.filter(e.date,C):null;t.val(r),A.$setViewValue(r),k&&(e.isOpen=!1,t[0].focus())},e.keydown=function(n){27===n.which&&(n.stopPropagation(),e.isOpen=!1,t[0].focus())},e.select=function(t,n){if(n.stopPropagation(),"today"===t){var r=new Date;angular.isDate(e.date)?(t=new Date(e.date)).setFullYear(r.getFullYear(),r.getMonth(),r.getDate()):(t=d.fromTimezone(r,R.getOption("timezone"))).setHours(0,0,0,0)}e.dateSelection(t)},e.close=function(n){n.stopPropagation(),e.isOpen=!1,t[0].focus()},e.disabled=angular.isDefined(n.disabled)||!1,n.ngDisabled&&N.push(e.$parent.$watch(o(n.ngDisabled),function(t){e.disabled=t})),e.$watch("isOpen",function(r){r?e.disabled?e.isOpen=!1:p(function(){w(),$&&e.$broadcast("uib:datepicker.focus"),s.on("click",b);var r=n.popupPlacement?n.popupPlacement:f.placement;S||u.parsePlacement(r)[2]?(L=L||angular.element(u.scrollParent(t)))&&L.on("scroll",w):L=null,angular.element(a).on("resize",w)},0,!1):(s.off("click",b),L&&L.off("scroll",w),angular.element(a).off("resize",w))}),e.$on("uib:datepicker.mode",function(){p(w,0,!1)})}]).directive("uibDatepickerPopup",function(){return{require:["ngModel","uibDatepickerPopup"],controller:"UibDatepickerPopupController",scope:{datepickerOptions:"=?",isOpen:"=?",currentText:"@",clearText:"@",closeText:"@"},link:function(e,t,n,r){var i=r[0];r[1].init(i)}}}).directive("uibDatepickerPopupWrap",function(){return{restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/datepickerPopup/popup.html"}}}),angular.module("ui.bootstrap.debounce",[]).factory("$$debounce",["$timeout",function(e){return function(t,n){var r;return function(){var i=this,o=Array.prototype.slice.call(arguments);r&&e.cancel(r),r=e(function(){t.apply(i,o)},n)}}}]),angular.module("ui.bootstrap.multiMap",[]).factory("$$multiMap",function(){return{createNew:function(){var e={};return{entries:function(){return Object.keys(e).map(function(t){return{key:t,value:e[t]}})},get:function(t){return e[t]},hasKey:function(t){return!!e[t]},keys:function(){return Object.keys(e)},put:function(t,n){e[t]||(e[t]=[]),e[t].push(n)},remove:function(t,n){var r=e[t];if(r){var i=r.indexOf(n);-1!==i&&r.splice(i,1),r.length||delete e[t]}}}}}}),angular.module("ui.bootstrap.dropdown",["ui.bootstrap.multiMap","ui.bootstrap.position"]).constant("uibDropdownConfig",{appendToOpenClass:"uib-dropdown-open",openClass:"open"}).service("uibDropdownService",["$document","$rootScope","$$multiMap",function(e,t,n){var r=null,i=n.createNew();this.isOnlyOpen=function(e,t){var n=i.get(t);return!(!n||!n.reduce(function(t,n){return n.scope===e?n:t},{}))&&1===n.length},this.open=function(t,n,a){if(r||e.on("click",o),r&&r!==t&&(r.isOpen=!1),r=t,a){var s=i.get(a);s?-1===s.map(function(e){return e.scope}).indexOf(t)&&i.put(a,{scope:t}):i.put(a,{scope:t})}},this.close=function(t,n,a){if(r===t&&(e.off("click",o),e.off("keydown",this.keybindFilter),r=null),a){var s=i.get(a);if(s){var l=s.reduce(function(e,n){return n.scope===t?n:e},{});l&&i.remove(a,l)}}};var o=function(e){if(r&&r.isOpen&&!(e&&"disabled"===r.getAutoClose()||e&&3===e.which)){var n=r.getToggleElement();if(!(e&&n&&n[0].contains(e.target))){var i=r.getDropdownElement();e&&"outsideClick"===r.getAutoClose()&&i&&i[0].contains(e.target)||(r.focusToggleElement(),r.isOpen=!1,t.$$phase||r.$apply())}}};this.keybindFilter=function(e){if(r){var t=r.getDropdownElement(),n=r.getToggleElement(),i=t&&t[0].contains(e.target),a=n&&n[0].contains(e.target);27===e.which?(e.stopPropagation(),r.focusToggleElement(),o()):r.isKeynavEnabled()&&-1!==[38,40].indexOf(e.which)&&r.isOpen&&(i||a)&&(e.preventDefault(),e.stopPropagation(),r.focusDropdownEntry(e.which))}}}]).controller("UibDropdownController",["$scope","$element","$attrs","$parse","uibDropdownConfig","uibDropdownService","$animate","$uibPosition","$document","$compile","$templateRequest",function(e,t,n,r,i,o,a,s,l,u,c){function d(){t.append(h.dropdownMenu)}var f,p,h=this,g=e.$new(),m=i.appendToOpenClass,v=i.openClass,y=angular.noop,b=n.onToggle?r(n.onToggle):angular.noop,x=!1,w=l.find("body");t.addClass("dropdown"),this.init=function(){n.isOpen&&(p=r(n.isOpen),y=p.assign,e.$watch(p,function(e){g.isOpen=!!e})),x=angular.isDefined(n.keyboardNav)},this.toggle=function(e){return g.isOpen=arguments.length?!!e:!g.isOpen,angular.isFunction(y)&&y(g,g.isOpen),g.isOpen},this.isOpen=function(){return g.isOpen},g.getToggleElement=function(){return h.toggleElement},g.getAutoClose=function(){return n.autoClose||"always"},g.getElement=function(){return t},g.isKeynavEnabled=function(){return x},g.focusDropdownEntry=function(e){var n=h.dropdownMenu?angular.element(h.dropdownMenu).find("a"):t.find("ul").eq(0).find("a");switch(e){case 40:angular.isNumber(h.selectedOption)?h.selectedOption=h.selectedOption===n.length-1?h.selectedOption:h.selectedOption+1:h.selectedOption=0;break;case 38:angular.isNumber(h.selectedOption)?h.selectedOption=0===h.selectedOption?0:h.selectedOption-1:h.selectedOption=n.length-1}n[h.selectedOption].focus()},g.getDropdownElement=function(){return h.dropdownMenu},g.focusToggleElement=function(){h.toggleElement&&h.toggleElement[0].focus()},g.$watch("isOpen",function(i,p){var x=null,_=!1;if(angular.isDefined(n.dropdownAppendTo)){var C=r(n.dropdownAppendTo)(g);C&&(x=angular.element(C))}if(angular.isDefined(n.dropdownAppendToBody)&&!1!==r(n.dropdownAppendToBody)(g)&&(_=!0),_&&!x&&(x=w),x&&h.dropdownMenu&&(i?(x.append(h.dropdownMenu),t.on("$destroy",d)):(t.off("$destroy",d),d())),x&&h.dropdownMenu){var k,S,$,M=s.positionElements(t,h.dropdownMenu,"bottom-left",!0),T=0;if(k={top:M.top+"px",display:i?"block":"none"},S=h.dropdownMenu.hasClass("dropdown-menu-right"),S?(k.left="auto",($=s.scrollbarPadding(x)).heightOverflow&&$.scrollbarWidth&&(T=$.scrollbarWidth),k.right=window.innerWidth-T-(M.left+t.prop("offsetWidth"))+"px"):(k.left=M.left+"px",k.right="auto"),!_){var D=s.offset(x);k.top=M.top-D.top+"px",S?k.right=window.innerWidth-(M.left-D.left+t.prop("offsetWidth"))+"px":k.left=M.left-D.left+"px"}h.dropdownMenu.css(k)}var E=x||t,L=x?m:v,A=E.hasClass(L),R=o.isOnlyOpen(e,x);if(A===!i){a[x?R?"removeClass":"addClass":i?"addClass":"removeClass"](E,L).then(function(){angular.isDefined(i)&&i!==p&&b(e,{open:!!i})})}if(i)h.dropdownMenuTemplateUrl?c(h.dropdownMenuTemplateUrl).then(function(e){f=g.$new(),u(e.trim())(f,function(e){var t=e;h.dropdownMenu.replaceWith(t),h.dropdownMenu=t,l.on("keydown",o.keybindFilter)})}):l.on("keydown",o.keybindFilter),g.focusToggleElement(),o.open(g,t,x);else{if(o.close(g,t,x),h.dropdownMenuTemplateUrl){f&&f.$destroy();var P=angular.element('<ul class="dropdown-menu"></ul>');h.dropdownMenu.replaceWith(P),h.dropdownMenu=P}h.selectedOption=null}angular.isFunction(y)&&y(e,i)})}]).directive("uibDropdown",function(){return{controller:"UibDropdownController",link:function(e,t,n,r){r.init()}}}).directive("uibDropdownMenu",function(){return{restrict:"A",require:"?^uibDropdown",link:function(e,t,n,r){if(r&&!angular.isDefined(n.dropdownNested)){t.addClass("dropdown-menu");var i=n.templateUrl;i&&(r.dropdownMenuTemplateUrl=i),r.dropdownMenu||(r.dropdownMenu=t)}}}}).directive("uibDropdownToggle",function(){return{require:"?^uibDropdown",link:function(e,t,n,r){if(r){t.addClass("dropdown-toggle"),r.toggleElement=t;var i=function(i){i.preventDefault(),t.hasClass("disabled")||n.disabled||e.$apply(function(){r.toggle()})};t.on("click",i),t.attr({"aria-haspopup":!0,"aria-expanded":!1}),e.$watch(r.isOpen,function(e){t.attr("aria-expanded",!!e)}),e.$on("$destroy",function(){t.off("click",i)})}}}}),angular.module("ui.bootstrap.stackedMap",[]).factory("$$stackedMap",function(){return{createNew:function(){var e=[];return{add:function(t,n){e.push({key:t,value:n})},get:function(t){for(var n=0;n<e.length;n++)if(t===e[n].key)return e[n]},keys:function(){for(var t=[],n=0;n<e.length;n++)t.push(e[n].key);return t},top:function(){return e[e.length-1]},remove:function(t){for(var n=-1,r=0;r<e.length;r++)if(t===e[r].key){n=r;break}return e.splice(n,1)[0]},removeTop:function(){return e.pop()},length:function(){return e.length}}}}}),angular.module("ui.bootstrap.modal",["ui.bootstrap.multiMap","ui.bootstrap.stackedMap","ui.bootstrap.position"]).provider("$uibResolve",function(){var e=this;this.resolver=null,this.setResolver=function(e){this.resolver=e},this.$get=["$injector","$q",function(t,n){var r=e.resolver?t.get(e.resolver):null;return{resolve:function(e,i,o,a){if(r)return r.resolve(e,i,o,a);var s=[];return angular.forEach(e,function(e){angular.isFunction(e)||angular.isArray(e)?s.push(n.resolve(t.invoke(e))):angular.isString(e)?s.push(n.resolve(t.get(e))):s.push(n.resolve(e))}),n.all(s).then(function(t){var n={},r=0;return angular.forEach(e,function(e,i){n[i]=t[r++]}),n})}}}]}).directive("uibModalBackdrop",["$animate","$injector","$uibModalStack",function(e,t,n){function r(t,r,i){i.modalInClass&&(e.addClass(r,i.modalInClass),t.$on(n.NOW_CLOSING_EVENT,function(n,o){var a=o();t.modalOptions.animation?e.removeClass(r,i.modalInClass).then(a):a()}))}return{restrict:"A",compile:function(e,t){return e.addClass(t.backdropClass),r}}}]).directive("uibModalWindow",["$uibModalStack","$q","$animateCss","$document",function(e,t,n,r){return{scope:{index:"@"},restrict:"A",transclude:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/modal/window.html"},link:function(i,o,a){o.addClass(a.windowTopClass||""),i.size=a.size,i.close=function(t){var n=e.getTop();n&&n.value.backdrop&&"static"!==n.value.backdrop&&t.target===t.currentTarget&&(t.preventDefault(),t.stopPropagation(),e.dismiss(n.key,"backdrop click"))},o.on("click",i.close),i.$isRendered=!0;var s=t.defer();i.$$postDigest(function(){s.resolve()}),s.promise.then(function(){var s=null;a.modalInClass&&(s=n(o,{addClass:a.modalInClass}).start(),i.$on(e.NOW_CLOSING_EVENT,function(e,t){var r=t();n(o,{removeClass:a.modalInClass}).start().then(r)})),t.when(s).then(function(){var t=e.getTop();if(t&&e.modalRendered(t.key),!r[0].activeElement||!o[0].contains(r[0].activeElement)){var n=o[0].querySelector("[autofocus]");n?n.focus():o[0].focus()}})})}}}]).directive("uibModalAnimationClass",function(){return{compile:function(e,t){t.modalAnimation&&e.addClass(t.uibModalAnimationClass)}}}).directive("uibModalTransclude",["$animate",function(e){return{link:function(t,n,r,i,o){o(t.$parent,function(t){n.empty(),e.enter(t,n)})}}}]).factory("$uibModalStack",["$animate","$animateCss","$document","$compile","$rootScope","$q","$$multiMap","$$stackedMap","$uibPosition",function(e,t,n,r,i,o,a,s,l){function u(e){return e.replace(D,function(e,t){return(t?"-":"")+e.toLowerCase()})}function c(e){return!!(e.offsetWidth||e.offsetHeight||e.getClientRects().length)}function d(){for(var e=-1,t=C.keys(),n=0;n<t.length;n++)C.get(t[n]).value.backdrop&&(e=n);return e>-1&&e<$&&(e=$),e}function f(e,t){var n=C.get(e).value,r=n.appendTo;C.remove(e),(M=C.top())&&($=parseInt(M.value.modalDomEl.attr("index"),10)),g(n.modalDomEl,n.modalScope,function(){var t=n.openedClass||_;k.remove(t,e);var i=k.hasKey(t);r.toggleClass(t,i),!i&&w&&w.heightOverflow&&w.scrollbarWidth&&(w.originalRight?r.css({paddingRight:w.originalRight+"px"}):r.css({paddingRight:""}),w=null),p(!0)},n.closedDeferred),h(),t&&t.focus?t.focus():r.focus&&r.focus()}function p(e){var t;C.length()>0&&(t=C.top().value).modalDomEl.toggleClass(t.windowTopClass||"",e)}function h(){if(b&&-1===d()){var e=x;g(b,x,function(){e=null}),b=void 0,x=void 0}}function g(t,n,r,i){function a(){a.done||(a.done=!0,e.leave(t).then(function(){r&&r(),t.remove(),i&&i.resolve()}),n.$destroy())}var s,l=null,u=function(){return s||(s=o.defer(),l=s.promise),function(){s.resolve()}};return n.$broadcast(S.NOW_CLOSING_EVENT,u),o.when(l).then(a)}function m(e){if(e.isDefaultPrevented())return e;var t=C.top();if(t)switch(e.which){case 27:t.value.keyboard&&(e.preventDefault(),i.$apply(function(){S.dismiss(t.key,"escape key press")}));break;case 9:var n=S.loadFocusElementList(t),r=!1;e.shiftKey?(S.isFocusInFirstItem(e,n)||S.isModalFocused(e,t))&&(r=S.focusLastFocusableElement(n)):S.isFocusInLastItem(e,n)&&(r=S.focusFirstFocusableElement(n)),r&&(e.preventDefault(),e.stopPropagation())}}function v(e,t,n){return!e.value.modalScope.$broadcast("modal.closing",t,n).defaultPrevented}function y(){Array.prototype.forEach.call(document.querySelectorAll("["+T+"]"),function(e){var t=parseInt(e.getAttribute(T),10)-1;e.setAttribute(T,t),t||(e.removeAttribute(T),e.removeAttribute("aria-hidden"))})}var b,x,w,_="modal-open",C=s.createNew(),k=a.createNew(),S={NOW_CLOSING_EVENT:"modal.stack.now-closing"},$=0,M=null,T="data-bootstrap-modal-aria-hidden-count",D=/[A-Z]/g;return i.$watch(d,function(e){x&&(x.index=e)}),n.on("keydown",m),i.$on("$destroy",function(){n.off("keydown",m)}),S.open=function(t,o){function a(e){if(e&&"BODY"!==e[0].tagName)return function(e){var t=e.parent()?e.parent().children():[];return Array.prototype.filter.call(t,function(t){return t!==e[0]})}(e).forEach(function(e){var t="true"===e.getAttribute("aria-hidden"),n=parseInt(e.getAttribute(T),10);n||(n=t?1:0),e.setAttribute(T,n+1),e.setAttribute("aria-hidden","true")}),a(e.parent())}var s=n[0].activeElement,c=o.openedClass||_;p(!1),M=C.top(),C.add(t,{deferred:o.deferred,renderDeferred:o.renderDeferred,closedDeferred:o.closedDeferred,modalScope:o.scope,backdrop:o.backdrop,keyboard:o.keyboard,openedClass:o.openedClass,windowTopClass:o.windowTopClass,animation:o.animation,appendTo:o.appendTo}),k.put(c,t);var f=o.appendTo,h=d();h>=0&&!b&&((x=i.$new(!0)).modalOptions=o,x.index=h,(b=angular.element('<div uib-modal-backdrop="modal-backdrop"></div>')).attr({class:"modal-backdrop","ng-style":"{'z-index': 1040 + (index && 1 || 0) + index*10}","uib-modal-animation-class":"fade","modal-in-class":"in"}),o.backdropClass&&b.addClass(o.backdropClass),o.animation&&b.attr("modal-animation","true"),r(b)(x),e.enter(b,f),l.isScrollable(f)&&(w=l.scrollbarPadding(f)).heightOverflow&&w.scrollbarWidth&&f.css({paddingRight:w.right+"px"}));var g;o.component?(g=document.createElement(u(o.component.name)),(g=angular.element(g)).attr({resolve:"$resolve","modal-instance":"$uibModalInstance",close:"$close($value)",dismiss:"$dismiss($value)"})):g=o.content,$=M?parseInt(M.value.modalDomEl.attr("index"),10)+1:0;var m=angular.element('<div uib-modal-window="modal-window"></div>');m.attr({class:"modal","template-url":o.windowTemplateUrl,"window-top-class":o.windowTopClass,role:"dialog","aria-labelledby":o.ariaLabelledBy,"aria-describedby":o.ariaDescribedBy,size:o.size,index:$,animate:"animate","ng-style":"{'z-index': 1050 + $$topModalIndex*10, display: 'block'}",tabindex:-1,"uib-modal-animation-class":"fade","modal-in-class":"in"}).append(g),o.windowClass&&m.addClass(o.windowClass),o.animation&&m.attr("modal-animation","true"),f.addClass(c),o.scope&&(o.scope.$$topModalIndex=$),e.enter(r(m)(o.scope),f),C.top().value.modalDomEl=m,C.top().value.modalOpener=s,a(m)},S.close=function(e,t){var n=C.get(e);return y(),n&&v(n,t,!0)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.resolve(t),f(e,n.value.modalOpener),!0):!n},S.dismiss=function(e,t){var n=C.get(e);return y(),n&&v(n,t,!1)?(n.value.modalScope.$$uibDestructionScheduled=!0,n.value.deferred.reject(t),f(e,n.value.modalOpener),!0):!n},S.dismissAll=function(e){for(var t=this.getTop();t&&this.dismiss(t.key,e);)t=this.getTop()},S.getTop=function(){return C.top()},S.modalRendered=function(e){var t=C.get(e);t&&t.value.renderDeferred.resolve()},S.focusFirstFocusableElement=function(e){return e.length>0&&(e[0].focus(),!0)},S.focusLastFocusableElement=function(e){return e.length>0&&(e[e.length-1].focus(),!0)},S.isModalFocused=function(e,t){if(e&&t){var n=t.value.modalDomEl;if(n&&n.length)return(e.target||e.srcElement)===n[0]}return!1},S.isFocusInFirstItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[0]},S.isFocusInLastItem=function(e,t){return t.length>0&&(e.target||e.srcElement)===t[t.length-1]},S.loadFocusElementList=function(e){if(e){var t=e.value.modalDomEl;if(t&&t.length){var n=t[0].querySelectorAll("a[href], area[href], input:not([disabled]):not([tabindex='-1']), button:not([disabled]):not([tabindex='-1']),select:not([disabled]):not([tabindex='-1']), textarea:not([disabled]):not([tabindex='-1']), iframe, object, embed, *[tabindex]:not([tabindex='-1']), *[contenteditable=true]");return n?Array.prototype.filter.call(n,function(e){return c(e)}):n}}},S}]).provider("$uibModal",function(){var e={options:{animation:!0,backdrop:!0,keyboard:!0},$get:["$rootScope","$q","$document","$templateRequest","$controller","$uibResolve","$uibModalStack",function(t,n,r,i,o,a,s){function l(e){return e.template?n.when(e.template):i(angular.isFunction(e.templateUrl)?e.templateUrl():e.templateUrl)}var u={},c=null;return u.getPromiseChain=function(){return c},u.open=function(i){function u(){return m}var d=n.defer(),f=n.defer(),p=n.defer(),h=n.defer(),g={result:d.promise,opened:f.promise,closed:p.promise,rendered:h.promise,close:function(e){return s.close(g,e)},dismiss:function(e){return s.dismiss(g,e)}};if(i=angular.extend({},e.options,i),i.resolve=i.resolve||{},i.appendTo=i.appendTo||r.find("body").eq(0),!i.appendTo.length)throw new Error("appendTo element not found. Make sure that the element passed is in DOM.");if(!i.component&&!i.template&&!i.templateUrl)throw new Error("One of component or template or templateUrl options is required.");var m;m=i.component?n.when(a.resolve(i.resolve,{},null,null)):n.all([l(i),a.resolve(i.resolve,{},null,null)]);var v;return v=c=n.all([c]).then(u,u).then(function(e){function n(t,n,r,i){t.$scope=a,t.$scope.$resolve={},r?t.$scope.$uibModalInstance=g:t.$uibModalInstance=g;var o=n?e[1]:e;angular.forEach(o,function(e,n){i&&(t[n]=e),t.$scope.$resolve[n]=e})}var r=i.scope||t,a=r.$new();a.$close=g.close,a.$dismiss=g.dismiss,a.$on("$destroy",function(){a.$$uibDestructionScheduled||a.$dismiss("$uibUnscheduledDestruction")});var l,u,c={scope:a,deferred:d,renderDeferred:h,closedDeferred:p,animation:i.animation,backdrop:i.backdrop,keyboard:i.keyboard,backdropClass:i.backdropClass,windowTopClass:i.windowTopClass,windowClass:i.windowClass,windowTemplateUrl:i.windowTemplateUrl,ariaLabelledBy:i.ariaLabelledBy,ariaDescribedBy:i.ariaDescribedBy,size:i.size,openedClass:i.openedClass,appendTo:i.appendTo},m={},v={};i.component?(n(m,!1,!0,!1),m.name=i.component,c.component=m):i.controller&&(n(v,!0,!1,!0),u=o(i.controller,v,!0,i.controllerAs),i.controllerAs&&i.bindToController&&((l=u.instance).$close=a.$close,l.$dismiss=a.$dismiss,angular.extend(l,{$resolve:v.$scope.$resolve},r)),l=u(),angular.isFunction(l.$onInit)&&l.$onInit()),i.component||(c.content=e[0]),s.open(g,c),f.resolve(!0)},function(e){f.reject(e),d.reject(e)}).finally(function(){c===v&&(c=null)}),g},u}]};return e}),angular.module("ui.bootstrap.paging",[]).factory("uibPaging",["$parse",function(e){return{create:function(t,n,r){t.setNumPages=r.numPages?e(r.numPages).assign:angular.noop,t.ngModelCtrl={$setViewValue:angular.noop},t._watchers=[],t.init=function(e,i){t.ngModelCtrl=e,t.config=i,e.$render=function(){t.render()},r.itemsPerPage?t._watchers.push(n.$parent.$watch(r.itemsPerPage,function(e){t.itemsPerPage=parseInt(e,10),n.totalPages=t.calculateTotalPages(),t.updatePage()})):t.itemsPerPage=i.itemsPerPage,n.$watch("totalItems",function(e,r){(angular.isDefined(e)||e!==r)&&(n.totalPages=t.calculateTotalPages(),t.updatePage())})},t.calculateTotalPages=function(){var e=t.itemsPerPage<1?1:Math.ceil(n.totalItems/t.itemsPerPage);return Math.max(e||0,1)},t.render=function(){n.page=parseInt(t.ngModelCtrl.$viewValue,10)||1},n.selectPage=function(e,r){r&&r.preventDefault(),(!n.ngDisabled||!r)&&n.page!==e&&e>0&&e<=n.totalPages&&(r&&r.target&&r.target.blur(),t.ngModelCtrl.$setViewValue(e),t.ngModelCtrl.$render())},n.getText=function(e){return n[e+"Text"]||t.config[e+"Text"]},n.noPrevious=function(){return 1===n.page},n.noNext=function(){return n.page===n.totalPages},t.updatePage=function(){t.setNumPages(n.$parent,n.totalPages),n.page>n.totalPages?n.selectPage(n.totalPages):t.ngModelCtrl.$render()},n.$on("$destroy",function(){for(;t._watchers.length;)t._watchers.shift()()})}}}]),angular.module("ui.bootstrap.pager",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPagerController",["$scope","$attrs","uibPaging","uibPagerConfig",function(e,t,n,r){e.align=angular.isDefined(t.align)?e.$parent.$eval(t.align):r.align,n.create(this,e,t)}]).constant("uibPagerConfig",{itemsPerPage:10,previousText:"« Previous",nextText:"Next »",align:!0}).directive("uibPager",["uibPagerConfig",function(e){return{scope:{totalItems:"=",previousText:"@",nextText:"@",ngDisabled:"="},require:["uibPager","?ngModel"],restrict:"A",controller:"UibPagerController",controllerAs:"pager",templateUrl:function(e,t){return t.templateUrl||"uib/template/pager/pager.html"},link:function(t,n,r,i){n.addClass("pager");var o=i[0],a=i[1];a&&o.init(a,e)}}}]),angular.module("ui.bootstrap.pagination",["ui.bootstrap.paging","ui.bootstrap.tabindex"]).controller("UibPaginationController",["$scope","$attrs","$parse","uibPaging","uibPaginationConfig",function(e,t,n,r,i){function o(e,t,n){return{number:e,text:t,active:n}}function a(e,t){var n=[],r=1,i=t,a=angular.isDefined(l)&&l<t;a&&(u?(i=(r=Math.max(e-Math.floor(l/2),1))+l-1)>t&&(r=(i=t)-l+1):(r=(Math.ceil(e/l)-1)*l+1,i=Math.min(r+l-1,t)));for(var s=r;s<=i;s++){var p=o(s,f(s),s===e);n.push(p)}if(a&&l>0&&(!u||c||d)){if(r>1){if(!d||r>3){var h=o(r-1,"...",!1);n.unshift(h)}if(d){if(3===r){var g=o(2,"2",!1);n.unshift(g)}var m=o(1,"1",!1);n.unshift(m)}}if(i<t){if(!d||i<t-2){var v=o(i+1,"...",!1);n.push(v)}if(d){if(i===t-2){var y=o(t-1,t-1,!1);n.push(y)}var b=o(t,t,!1);n.push(b)}}}return n}var s=this,l=angular.isDefined(t.maxSize)?e.$parent.$eval(t.maxSize):i.maxSize,u=angular.isDefined(t.rotate)?e.$parent.$eval(t.rotate):i.rotate,c=angular.isDefined(t.forceEllipses)?e.$parent.$eval(t.forceEllipses):i.forceEllipses,d=angular.isDefined(t.boundaryLinkNumbers)?e.$parent.$eval(t.boundaryLinkNumbers):i.boundaryLinkNumbers,f=angular.isDefined(t.pageLabel)?function(n){return e.$parent.$eval(t.pageLabel,{$page:n})}:angular.identity;e.boundaryLinks=angular.isDefined(t.boundaryLinks)?e.$parent.$eval(t.boundaryLinks):i.boundaryLinks,e.directionLinks=angular.isDefined(t.directionLinks)?e.$parent.$eval(t.directionLinks):i.directionLinks,t.$set("role","menu"),r.create(this,e,t),t.maxSize&&s._watchers.push(e.$parent.$watch(n(t.maxSize),function(e){l=parseInt(e,10),s.render()}));var p=this.render;this.render=function(){p(),e.page>0&&e.page<=e.totalPages&&(e.pages=a(e.page,e.totalPages))}}]).constant("uibPaginationConfig",{itemsPerPage:10,boundaryLinks:!1,boundaryLinkNumbers:!1,directionLinks:!0,firstText:"First",previousText:"Previous",nextText:"Next",lastText:"Last",rotate:!0,forceEllipses:!1}).directive("uibPagination",["$parse","uibPaginationConfig",function(e,t){return{scope:{totalItems:"=",firstText:"@",previousText:"@",nextText:"@",lastText:"@",ngDisabled:"="},require:["uibPagination","?ngModel"],restrict:"A",controller:"UibPaginationController",controllerAs:"pagination",templateUrl:function(e,t){return t.templateUrl||"uib/template/pagination/pagination.html"},link:function(e,n,r,i){n.addClass("pagination");var o=i[0],a=i[1];a&&o.init(a,t)}}}]),angular.module("ui.bootstrap.tooltip",["ui.bootstrap.position","ui.bootstrap.stackedMap"]).provider("$uibTooltip",function(){function e(e){var t=/[A-Z]/g;return e.replace(t,function(e,t){return(t?"-":"")+e.toLowerCase()})}var t={placement:"top",placementClassPrefix:"",animation:!0,popupDelay:0,popupCloseDelay:0,useContentExp:!1},n={mouseenter:"mouseleave",click:"click",outsideClick:"outsideClick",focus:"blur",none:""},r={};this.options=function(e){angular.extend(r,e)},this.setTriggers=function(e){angular.extend(n,e)},this.$get=["$window","$compile","$timeout","$document","$uibPosition","$interpolate","$rootScope","$parse","$$stackedMap",function(i,o,a,s,l,u,c,d,f){function p(e){if(27===e.which){var t=h.top();t&&(t.value.close(),t=null)}}var h=f.createNew();return s.on("keyup",p),c.$on("$destroy",function(){s.off("keyup",p)}),function(i,c,f,p){function g(e){var t=(e||p.trigger||f).split(" ");return{show:t,hide:t.map(function(e){return n[e]||e})}}p=angular.extend({},t,r,p);var m=e(i),v=u.startSymbol(),y=u.endSymbol(),b="<div "+m+'-popup uib-title="'+v+"title"+y+'" '+(p.useContentExp?'content-exp="contentExp()" ':'content="'+v+"content"+y+'" ')+'origin-scope="origScope" class="uib-position-measure '+c+'" tooltip-animation-class="fade"uib-tooltip-classes ng-class="{ in: isOpen }" ></div>';return{compile:function(e,t){var n=o(b);return function(e,t,r,o){function u(){Y.isOpen?m():f()}function f(){j&&!e.$eval(r[c+"Enable"])||(x(),C(),Y.popupDelay?A||(A=a(v,Y.popupDelay,!1)):v())}function m(){y(),Y.popupCloseDelay?R||(R=a(b,Y.popupCloseDelay,!1)):b()}function v(){if(y(),x(),!Y.content)return angular.noop;w(),Y.$evalAsync(function(){Y.isOpen=!0,k(!0),W()})}function y(){A&&(a.cancel(A),A=null),P&&(a.cancel(P),P=null)}function b(){Y&&Y.$evalAsync(function(){Y&&(Y.isOpen=!1,k(!1),Y.animation?L||(L=a(_,150,!1)):_())})}function x(){R&&(a.cancel(R),R=null),L&&(a.cancel(L),L=null)}function w(){D||(E=Y.$new(),D=n(E,function(e){N?s.find("body").append(e):t.after(e)}),h.add(Y,{close:b}),S())}function _(){y(),x(),$(),D&&(D.remove(),D=null,F&&a.cancel(F)),h.remove(Y),E&&(E.$destroy(),E=null)}function C(){Y.title=r[c+"Title"],Y.content=V?V(e):r[i],Y.popupClass=r[c+"Class"],Y.placement=angular.isDefined(r[c+"Placement"])?r[c+"Placement"]:p.placement;var t=l.parsePlacement(Y.placement);O=t[1]?t[0]+"-"+t[1]:t[0];var n=parseInt(r[c+"PopupDelay"],10),o=parseInt(r[c+"PopupCloseDelay"],10);Y.popupDelay=isNaN(n)?p.popupDelay:n,Y.popupCloseDelay=isNaN(o)?p.popupCloseDelay:o}function k(t){H&&angular.isFunction(H.assign)&&H.assign(e,t)}function S(){B.length=0,V?(B.push(e.$watch(V,function(e){Y.content=e,!e&&Y.isOpen&&b()})),B.push(E.$watch(function(){z||(z=!0,E.$$postDigest(function(){z=!1,Y&&Y.isOpen&&W()}))}))):B.push(r.$observe(i,function(e){Y.content=e,!e&&Y.isOpen?b():W()})),B.push(r.$observe(c+"Title",function(e){Y.title=e,Y.isOpen&&W()})),B.push(r.$observe(c+"Placement",function(e){Y.placement=e||p.placement,Y.isOpen&&W()}))}function $(){B.length&&(angular.forEach(B,function(e){e()}),B.length=0)}function M(e){Y&&Y.isOpen&&D&&(t[0].contains(e.target)||D[0].contains(e.target)||m())}function T(e){27===e.which&&m()}var D,E,L,A,R,P,F,O,N=!!angular.isDefined(p.appendToBody)&&p.appendToBody,I=g(void 0),j=angular.isDefined(r[c+"Enable"]),Y=e.$new(!0),z=!1,H=!!angular.isDefined(r[c+"IsOpen"])&&d(r[c+"IsOpen"]),V=!!p.useContentExp&&d(r[i]),B=[],W=function(){D&&D.html()&&(P||(P=a(function(){var e=l.positionElements(t,D,Y.placement,N),n=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),r=N?l.offset(t):l.position(t);D.css({top:e.top+"px",left:e.left+"px"});var i=e.placement.split("-");D.hasClass(i[0])||(D.removeClass(O.split("-")[0]),D.addClass(i[0])),D.hasClass(p.placementClassPrefix+e.placement)||(D.removeClass(p.placementClassPrefix+O),D.addClass(p.placementClassPrefix+e.placement)),F=a(function(){var e=angular.isDefined(D.offsetHeight)?D.offsetHeight:D.prop("offsetHeight"),t=l.adjustTop(i,r,n,e);t&&D.css(t),F=null},0,!1),D.hasClass("uib-position-measure")?(l.positionArrow(D,e.placement),D.removeClass("uib-position-measure")):O!==e.placement&&l.positionArrow(D,e.placement),O=e.placement,P=null},0,!1)))};Y.origScope=e,Y.isOpen=!1,Y.contentExp=function(){return Y.content},r.$observe("disabled",function(e){e&&y(),e&&Y.isOpen&&b()}),H&&e.$watch(H,function(e){Y&&!e===Y.isOpen&&u()});var U=function(){I.show.forEach(function(e){"outsideClick"===e?t.off("click",u):(t.off(e,f),t.off(e,u)),t.off("keypress",T)}),I.hide.forEach(function(e){"outsideClick"===e?s.off("click",M):t.off(e,m)})};!function(){var n=[],i=[],o=e.$eval(r[c+"Trigger"]);U(),angular.isObject(o)?(Object.keys(o).forEach(function(e){n.push(e),i.push(o[e])}),I={show:n,hide:i}):I=g(o),"none"!==I.show&&I.show.forEach(function(e,n){"outsideClick"===e?(t.on("click",u),s.on("click",M)):e===I.hide[n]?t.on(e,u):e&&(t.on(e,f),t.on(I.hide[n],m)),t.on("keypress",T)})}();var G=e.$eval(r[c+"Animation"]);Y.animation=angular.isDefined(G)?!!G:p.animation;var q,K=c+"AppendToBody";q=K in r&&void 0===r[K]||e.$eval(r[K]),N=angular.isDefined(q)?q:N,e.$on("$destroy",function(){U(),_(),Y=null})}}}}}]}).directive("uibTooltipTemplateTransclude",["$animate","$sce","$compile","$templateRequest",function(e,t,n,r){return{link:function(i,o,a){var s,l,u,c=i.$eval(a.tooltipTemplateTranscludeScope),d=0,f=function(){l&&(l.remove(),l=null),s&&(s.$destroy(),s=null),u&&(e.leave(u).then(function(){l=null}),l=u,u=null)};i.$watch(t.parseAsResourceUrl(a.uibTooltipTemplateTransclude),function(t){var a=++d;t?(r(t,!0).then(function(r){if(a===d){var i=c.$new(),l=n(r)(i,function(t){f(),e.enter(t,o)});u=l,(s=i).$emit("$includeContentLoaded",t)}},function(){a===d&&(f(),i.$emit("$includeContentError",t))}),i.$emit("$includeContentRequested",t)):f()}),i.$on("$destroy",f)}}}]).directive("uibTooltipClasses",["$uibPosition",function(e){return{restrict:"A",link:function(t,n,r){if(t.placement){var i=e.parsePlacement(t.placement);n.addClass(i[0])}t.popupClass&&n.addClass(t.popupClass),t.animation&&n.addClass(r.tooltipAnimationClass)}}}]).directive("uibTooltipPopup",function(){return{restrict:"A",scope:{content:"@"},templateUrl:"uib/template/tooltip/tooltip-popup.html"}}).directive("uibTooltip",["$uibTooltip",function(e){return e("uibTooltip","tooltip","mouseenter")}]).directive("uibTooltipTemplatePopup",function(){return{restrict:"A",scope:{contentExp:"&",originScope:"&"},templateUrl:"uib/template/tooltip/tooltip-template-popup.html"}}).directive("uibTooltipTemplate",["$uibTooltip",function(e){return e("uibTooltipTemplate","tooltip","mouseenter",{useContentExp:!0})}]).directive("uibTooltipHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&"},templateUrl:"uib/template/tooltip/tooltip-html-popup.html"}}).directive("uibTooltipHtml",["$uibTooltip",function(e){return e("uibTooltipHtml","tooltip","mouseenter",{useContentExp:!0})}]),angular.module("ui.bootstrap.popover",["ui.bootstrap.tooltip"]).directive("uibPopoverTemplatePopup",function(){return{restrict:"A",scope:{uibTitle:"@",contentExp:"&",originScope:"&"},templateUrl:"uib/template/popover/popover-template.html"}}).directive("uibPopoverTemplate",["$uibTooltip",function(e){return e("uibPopoverTemplate","popover","click",{useContentExp:!0})}]).directive("uibPopoverHtmlPopup",function(){return{restrict:"A",scope:{contentExp:"&",uibTitle:"@"},templateUrl:"uib/template/popover/popover-html.html"}}).directive("uibPopoverHtml",["$uibTooltip",function(e){return e("uibPopoverHtml","popover","click",{useContentExp:!0})}]).directive("uibPopoverPopup",function(){return{restrict:"A",scope:{uibTitle:"@",content:"@"},templateUrl:"uib/template/popover/popover.html"}}).directive("uibPopover",["$uibTooltip",function(e){return e("uibPopover","popover","click")}]),angular.module("ui.bootstrap.progressbar",[]).constant("uibProgressConfig",{animate:!0,max:100}).controller("UibProgressController",["$scope","$attrs","uibProgressConfig",function(e,t,n){function r(){return angular.isDefined(e.maxParam)?e.maxParam:n.max}var i=this,o=angular.isDefined(t.animate)?e.$parent.$eval(t.animate):n.animate;this.bars=[],e.max=r(),this.addBar=function(e,t,n){o||t.css({transition:"none"}),this.bars.push(e),e.max=r(),e.title=n&&angular.isDefined(n.title)?n.title:"progressbar",e.$watch("value",function(t){e.recalculatePercentage()}),e.recalculatePercentage=function(){var t=i.bars.reduce(function(e,t){return t.percent=+(100*t.value/t.max).toFixed(2),e+t.percent},0);t>100&&(e.percent-=t-100)},e.$on("$destroy",function(){t=null,i.removeBar(e)})},this.removeBar=function(e){this.bars.splice(this.bars.indexOf(e),1),this.bars.forEach(function(e){e.recalculatePercentage()})},e.$watch("maxParam",function(e){i.bars.forEach(function(e){e.max=r(),e.recalculatePercentage()})})}]).directive("uibProgress",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",require:"uibProgress",scope:{maxParam:"=?max"},templateUrl:"uib/template/progressbar/progress.html"}}).directive("uibBar",function(){return{replace:!0,transclude:!0,require:"^uibProgress",scope:{value:"=",type:"@"},templateUrl:"uib/template/progressbar/bar.html",link:function(e,t,n,r){r.addBar(e,t,n)}}}).directive("uibProgressbar",function(){return{replace:!0,transclude:!0,controller:"UibProgressController",scope:{value:"=",maxParam:"=?max",type:"@"},templateUrl:"uib/template/progressbar/progressbar.html",link:function(e,t,n,r){r.addBar(e,angular.element(t.children()[0]),{title:n.title})}}}),angular.module("ui.bootstrap.rating",[]).constant("uibRatingConfig",{max:5,stateOn:null,stateOff:null,enableReset:!0,titles:["one","two","three","four","five"]}).controller("UibRatingController",["$scope","$attrs","uibRatingConfig",function(e,t,n){var r={$setViewValue:angular.noop},i=this;this.init=function(i){(r=i).$render=this.render,r.$formatters.push(function(e){return angular.isNumber(e)&&e<<0!==e&&(e=Math.round(e)),e}),this.stateOn=angular.isDefined(t.stateOn)?e.$parent.$eval(t.stateOn):n.stateOn,this.stateOff=angular.isDefined(t.stateOff)?e.$parent.$eval(t.stateOff):n.stateOff,this.enableReset=angular.isDefined(t.enableReset)?e.$parent.$eval(t.enableReset):n.enableReset;var o=angular.isDefined(t.titles)?e.$parent.$eval(t.titles):n.titles;this.titles=angular.isArray(o)&&o.length>0?o:n.titles;var a=angular.isDefined(t.ratingStates)?e.$parent.$eval(t.ratingStates):new Array(angular.isDefined(t.max)?e.$parent.$eval(t.max):n.max);e.range=this.buildTemplateObjects(a)},this.buildTemplateObjects=function(e){for(var t=0,n=e.length;t<n;t++)e[t]=angular.extend({index:t},{stateOn:this.stateOn,stateOff:this.stateOff,title:this.getTitle(t)},e[t]);return e},this.getTitle=function(e){return e>=this.titles.length?e+1:this.titles[e]},e.rate=function(t){if(!e.readonly&&t>=0&&t<=e.range.length){var n=i.enableReset&&r.$viewValue===t?0:t;r.$setViewValue(n),r.$render()}},e.enter=function(t){e.readonly||(e.value=t),e.onHover({value:t})},e.reset=function(){e.value=r.$viewValue,e.onLeave()},e.onKeydown=function(t){/(37|38|39|40)/.test(t.which)&&(t.preventDefault(),t.stopPropagation(),e.rate(e.value+(38===t.which||39===t.which?1:-1)))},this.render=function(){e.value=r.$viewValue,e.title=i.getTitle(e.value-1)}}]).directive("uibRating",function(){return{require:["uibRating","ngModel"],restrict:"A",scope:{readonly:"=?readOnly",onHover:"&",onLeave:"&"},controller:"UibRatingController",templateUrl:"uib/template/rating/rating.html",link:function(e,t,n,r){var i=r[0],o=r[1];i.init(o)}}}),angular.module("ui.bootstrap.tabs",[]).controller("UibTabsetController",["$scope",function(e){function t(e){for(var t=0;t<r.tabs.length;t++)if(r.tabs[t].index===e)return t}var n,r=this;r.tabs=[],r.select=function(e,o){if(!i){var a=t(n),s=r.tabs[a];if(s){if(s.tab.onDeselect({$event:o,$selectedIndex:e}),o&&o.isDefaultPrevented())return;s.tab.active=!1}var l=r.tabs[e];l?(l.tab.onSelect({$event:o}),l.tab.active=!0,r.active=l.index,n=l.index):!l&&angular.isDefined(n)&&(r.active=null,n=null)}},r.addTab=function(e){if(r.tabs.push({tab:e,index:e.index}),r.tabs.sort(function(e,t){return e.index>t.index?1:e.index<t.index?-1:0}),e.index===r.active||!angular.isDefined(r.active)&&1===r.tabs.length){var n=t(e.index);r.select(n)}},r.removeTab=function(e){for(var t,n=0;n<r.tabs.length;n++)if(r.tabs[n].tab===e){t=n;break}if(r.tabs[t].index===r.active){var i=t===r.tabs.length-1?t-1:t+1%r.tabs.length;r.select(i)}r.tabs.splice(t,1)},e.$watch("tabset.active",function(e){angular.isDefined(e)&&e!==n&&r.select(t(e))});var i;e.$on("$destroy",function(){i=!0})}]).directive("uibTabset",function(){return{transclude:!0,replace:!0,scope:{},bindToController:{active:"=?",type:"@"},controller:"UibTabsetController",controllerAs:"tabset",templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tabset.html"},link:function(e,t,n){e.vertical=!!angular.isDefined(n.vertical)&&e.$parent.$eval(n.vertical),e.justified=!!angular.isDefined(n.justified)&&e.$parent.$eval(n.justified)}}}).directive("uibTab",["$parse",function(e){return{require:"^uibTabset",replace:!0,templateUrl:function(e,t){return t.templateUrl||"uib/template/tabs/tab.html"},transclude:!0,scope:{heading:"@",index:"=?",classes:"@?",onSelect:"&select",onDeselect:"&deselect"},controller:function(){},controllerAs:"tab",link:function(t,n,r,i,o){t.disabled=!1,r.disable&&t.$parent.$watch(e(r.disable),function(e){t.disabled=!!e}),angular.isUndefined(r.index)&&(i.tabs&&i.tabs.length?t.index=Math.max.apply(null,i.tabs.map(function(e){return e.index}))+1:t.index=0),angular.isUndefined(r.classes)&&(t.classes=""),t.select=function(e){if(!t.disabled){for(var n,r=0;r<i.tabs.length;r++)if(i.tabs[r].tab===t){n=r;break}i.select(n,e)}},i.addTab(t),t.$on("$destroy",function(){i.removeTab(t)}),t.$transcludeFn=o}}}]).directive("uibTabHeadingTransclude",function(){return{restrict:"A",require:"^uibTab",link:function(e,t){e.$watch("headingElement",function(e){e&&(t.html(""),t.append(e))})}}}).directive("uibTabContentTransclude",function(){function e(e){return e.tagName&&(e.hasAttribute("uib-tab-heading")||e.hasAttribute("data-uib-tab-heading")||e.hasAttribute("x-uib-tab-heading")||"uib-tab-heading"===e.tagName.toLowerCase()||"data-uib-tab-heading"===e.tagName.toLowerCase()||"x-uib-tab-heading"===e.tagName.toLowerCase()||"uib:tab-heading"===e.tagName.toLowerCase())}return{restrict:"A",require:"^uibTabset",link:function(t,n,r){var i=t.$eval(r.uibTabContentTransclude).tab;i.$transcludeFn(i.$parent,function(t){angular.forEach(t,function(t){e(t)?i.headingElement=t:n.append(t)})})}}}),angular.module("ui.bootstrap.timepicker",[]).constant("uibTimepickerConfig",{hourStep:1,minuteStep:1,secondStep:1,showMeridian:!0,showSeconds:!1,meridians:null,readonlyInput:!1,mousewheel:!0,arrowkeys:!0,showSpinners:!0,templateUrl:"uib/template/timepicker/timepicker.html"}).controller("UibTimepickerController",["$scope","$element","$attrs","$parse","$log","$locale","uibTimepickerConfig",function(e,t,n,r,i,o,a){function s(){var t=+e.hours;if((e.showMeridian?t>0&&t<13:t>=0&&t<24)&&""!==e.hours)return e.showMeridian&&(12===t&&(t=0),e.meridian===k[1]&&(t+=12)),t}function l(){var t=+e.minutes;if(t>=0&&t<60&&""!==e.minutes)return t}function u(){var t=+e.seconds;return t>=0&&t<60?t:void 0}function c(e,t){return null===e?"":angular.isDefined(e)&&e.toString().length<2&&!t?"0"+e:e.toString()}function d(e){f(),C.$setViewValue(new Date(w)),p(e)}function f(){y&&y.$setValidity("hours",!0),b&&b.$setValidity("minutes",!0),x&&x.$setValidity("seconds",!0),C.$setValidity("time",!0),e.invalidHours=!1,e.invalidMinutes=!1,e.invalidSeconds=!1}function p(t){if(C.$modelValue){var n=w.getHours(),r=w.getMinutes(),i=w.getSeconds();e.showMeridian&&(n=0===n||12===n?12:n%12),e.hours="h"===t?n:c(n,!S),"m"!==t&&(e.minutes=c(r)),e.meridian=w.getHours()<12?k[0]:k[1],"s"!==t&&(e.seconds=c(i)),e.meridian=w.getHours()<12?k[0]:k[1]}else e.hours=null,e.minutes=null,e.seconds=null,e.meridian=k[0]}function h(e){w=m(w,e),d()}function g(e,t){return m(e,60*t)}function m(e,t){var n=new Date(e.getTime()+1e3*t),r=new Date(e);return r.setHours(n.getHours(),n.getMinutes(),n.getSeconds()),r}function v(){return(null===e.hours||""===e.hours)&&(null===e.minutes||""===e.minutes)&&(!e.showSeconds||e.showSeconds&&(null===e.seconds||""===e.seconds))}var y,b,x,w=new Date,_=[],C={$setViewValue:angular.noop},k=angular.isDefined(n.meridians)?e.$parent.$eval(n.meridians):a.meridians||o.DATETIME_FORMATS.AMPMS,S=!angular.isDefined(n.padHours)||e.$parent.$eval(n.padHours);e.tabindex=angular.isDefined(n.tabindex)?n.tabindex:0,t.removeAttr("tabindex"),this.init=function(t,r){(C=t).$render=this.render,C.$formatters.unshift(function(e){return e?new Date(e):null});var i=r.eq(0),o=r.eq(1),s=r.eq(2);y=i.controller("ngModel"),b=o.controller("ngModel"),x=s.controller("ngModel"),(angular.isDefined(n.mousewheel)?e.$parent.$eval(n.mousewheel):a.mousewheel)&&this.setupMousewheelEvents(i,o,s),(angular.isDefined(n.arrowkeys)?e.$parent.$eval(n.arrowkeys):a.arrowkeys)&&this.setupArrowkeyEvents(i,o,s),e.readonlyInput=angular.isDefined(n.readonlyInput)?e.$parent.$eval(n.readonlyInput):a.readonlyInput,this.setupInputEvents(i,o,s)};var $=a.hourStep;n.hourStep&&_.push(e.$parent.$watch(r(n.hourStep),function(e){$=+e}));var M=a.minuteStep;n.minuteStep&&_.push(e.$parent.$watch(r(n.minuteStep),function(e){M=+e}));var T;_.push(e.$parent.$watch(r(n.min),function(e){var t=new Date(e);T=isNaN(t)?void 0:t}));var D;_.push(e.$parent.$watch(r(n.max),function(e){var t=new Date(e);D=isNaN(t)?void 0:t}));var E=!1;n.ngDisabled&&_.push(e.$parent.$watch(r(n.ngDisabled),function(e){E=e})),e.noIncrementHours=function(){var e=g(w,60*$);return E||e>D||e<w&&e<T},e.noDecrementHours=function(){var e=g(w,60*-$);return E||e<T||e>w&&e>D},e.noIncrementMinutes=function(){var e=g(w,M);return E||e>D||e<w&&e<T},e.noDecrementMinutes=function(){var e=g(w,-M);return E||e<T||e>w&&e>D},e.noIncrementSeconds=function(){var e=m(w,L);return E||e>D||e<w&&e<T},e.noDecrementSeconds=function(){var e=m(w,-L);return E||e<T||e>w&&e>D},e.noToggleMeridian=function(){return w.getHours()<12?E||g(w,720)>D:E||g(w,-720)<T};var L=a.secondStep;n.secondStep&&_.push(e.$parent.$watch(r(n.secondStep),function(e){L=+e})),e.showSeconds=a.showSeconds,n.showSeconds&&_.push(e.$parent.$watch(r(n.showSeconds),function(t){e.showSeconds=!!t})),e.showMeridian=a.showMeridian,n.showMeridian&&_.push(e.$parent.$watch(r(n.showMeridian),function(t){if(e.showMeridian=!!t,C.$error.time){var n=s(),r=l();angular.isDefined(n)&&angular.isDefined(r)&&(w.setHours(n),d())}else p()})),this.setupMousewheelEvents=function(t,n,r){var i=function(e){e.originalEvent&&(e=e.originalEvent);var t=e.wheelDelta?e.wheelDelta:-e.deltaY;return e.detail||t>0};t.on("mousewheel wheel",function(t){E||e.$apply(i(t)?e.incrementHours():e.decrementHours()),t.preventDefault()}),n.on("mousewheel wheel",function(t){E||e.$apply(i(t)?e.incrementMinutes():e.decrementMinutes()),t.preventDefault()}),r.on("mousewheel wheel",function(t){E||e.$apply(i(t)?e.incrementSeconds():e.decrementSeconds()),t.preventDefault()})},this.setupArrowkeyEvents=function(t,n,r){t.on("keydown",function(t){E||(38===t.which?(t.preventDefault(),e.incrementHours(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementHours(),e.$apply()))}),n.on("keydown",function(t){E||(38===t.which?(t.preventDefault(),e.incrementMinutes(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementMinutes(),e.$apply()))}),r.on("keydown",function(t){E||(38===t.which?(t.preventDefault(),e.incrementSeconds(),e.$apply()):40===t.which&&(t.preventDefault(),e.decrementSeconds(),e.$apply()))})},this.setupInputEvents=function(t,n,r){if(e.readonlyInput)return e.updateHours=angular.noop,e.updateMinutes=angular.noop,void(e.updateSeconds=angular.noop);var i=function(t,n,r){C.$setViewValue(null),C.$setValidity("time",!1),angular.isDefined(t)&&(e.invalidHours=t,y&&y.$setValidity("hours",!1)),angular.isDefined(n)&&(e.invalidMinutes=n,b&&b.$setValidity("minutes",!1)),angular.isDefined(r)&&(e.invalidSeconds=r,x&&x.$setValidity("seconds",!1))};e.updateHours=function(){var e=s(),t=l();C.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(w.setHours(e),w.setMinutes(t),w<T||w>D?i(!0):d("h")):i(!0)},t.on("blur",function(t){C.$setTouched(),v()?f():null===e.hours||""===e.hours?i(!0):!e.invalidHours&&e.hours<10&&e.$apply(function(){e.hours=c(e.hours,!S)})}),e.updateMinutes=function(){var e=l(),t=s();C.$setDirty(),angular.isDefined(e)&&angular.isDefined(t)?(w.setHours(t),w.setMinutes(e),w<T||w>D?i(void 0,!0):d("m")):i(void 0,!0)},n.on("blur",function(t){C.$setTouched(),v()?f():null===e.minutes?i(void 0,!0):!e.invalidMinutes&&e.minutes<10&&e.$apply(function(){e.minutes=c(e.minutes)})}),e.updateSeconds=function(){var e=u();C.$setDirty(),angular.isDefined(e)?(w.setSeconds(e),d("s")):i(void 0,void 0,!0)},r.on("blur",function(t){v()?f():!e.invalidSeconds&&e.seconds<10&&e.$apply(function(){e.seconds=c(e.seconds)})})},this.render=function(){var t=C.$viewValue;isNaN(t)?(C.$setValidity("time",!1),i.error('Timepicker directive: "ng-model" value must be a Date object, a number of milliseconds since 01.01.1970 or a string representing an RFC2822 or ISO 8601 date.')):(t&&(w=t),w<T||w>D?(C.$setValidity("time",!1),e.invalidHours=!0,e.invalidMinutes=!0):f(),p())},e.showSpinners=angular.isDefined(n.showSpinners)?e.$parent.$eval(n.showSpinners):a.showSpinners,e.incrementHours=function(){e.noIncrementHours()||h(60*$*60)},e.decrementHours=function(){e.noDecrementHours()||h(60*-$*60)},e.incrementMinutes=function(){e.noIncrementMinutes()||h(60*M)},e.decrementMinutes=function(){e.noDecrementMinutes()||h(60*-M)},e.incrementSeconds=function(){e.noIncrementSeconds()||h(L)},e.decrementSeconds=function(){e.noDecrementSeconds()||h(-L)},e.toggleMeridian=function(){var t=l(),n=s();e.noToggleMeridian()||(angular.isDefined(t)&&angular.isDefined(n)?h(720*(w.getHours()<12?60:-60)):e.meridian=e.meridian===k[0]?k[1]:k[0])},e.blur=function(){C.$setTouched()},e.$on("$destroy",function(){for(;_.length;)_.shift()()})}]).directive("uibTimepicker",["uibTimepickerConfig",function(e){return{require:["uibTimepicker","?^ngModel"],restrict:"A",controller:"UibTimepickerController",controllerAs:"timepicker",scope:{},templateUrl:function(t,n){return n.templateUrl||e.templateUrl},link:function(e,t,n,r){var i=r[0],o=r[1];o&&i.init(o,t.find("input"))}}}]),angular.module("ui.bootstrap.typeahead",["ui.bootstrap.debounce","ui.bootstrap.position"]).factory("uibTypeaheadParser",["$parse",function(e){var t=/^\s*([\s\S]+?)(?:\s+as\s+([\s\S]+?))?\s+for\s+(?:([\$\w][\$\w\d]*))\s+in\s+([\s\S]+?)$/;return{parse:function(n){var r=n.match(t);if(!r)throw new Error('Expected typeahead specification in form of "_modelValue_ (as _label_)? for _item_ in _collection_" but got "'+n+'".');return{itemName:r[3],source:e(r[4]),viewMapper:e(r[2]||r[1]),modelMapper:e(r[1])}}}}]).controller("UibTypeaheadController",["$scope","$element","$attrs","$compile","$parse","$q","$timeout","$document","$window","$rootScope","$$debounce","$uibPosition","uibTypeaheadParser",function(e,t,n,r,i,o,a,s,l,u,c,d,f){function p(){Y.moveInProgress||(Y.moveInProgress=!0,Y.$digest()),J()}function h(){Y.position=E?d.offset(t):d.position(t),Y.position.top+=t.prop("offsetHeight")}function g(e){var t;return angular.version.minor<6?(t=e.$options||{}).getOption=function(e){return t[e]}:t=e.$options,t}var m,v,y=[9,13,27,38,40],b=e.$eval(n.typeaheadMinLength);b||0===b||(b=1),e.$watch(n.typeaheadMinLength,function(e){b=e||0===e?e:1});var x=e.$eval(n.typeaheadWaitMs)||0,w=!1!==e.$eval(n.typeaheadEditable);e.$watch(n.typeaheadEditable,function(e){w=!1!==e});var _,C,k=i(n.typeaheadLoading).assign||angular.noop,S=n.typeaheadShouldSelect?i(n.typeaheadShouldSelect):function(e,t){var n=t.$event;return 13===n.which||9===n.which},$=i(n.typeaheadOnSelect),M=!!angular.isDefined(n.typeaheadSelectOnBlur)&&e.$eval(n.typeaheadSelectOnBlur),T=i(n.typeaheadNoResults).assign||angular.noop,D=n.typeaheadInputFormatter?i(n.typeaheadInputFormatter):void 0,E=!!n.typeaheadAppendToBody&&e.$eval(n.typeaheadAppendToBody),L=n.typeaheadAppendTo?e.$eval(n.typeaheadAppendTo):null,A=!1!==e.$eval(n.typeaheadFocusFirst),R=!!n.typeaheadSelectOnExact&&e.$eval(n.typeaheadSelectOnExact),P=i(n.typeaheadIsOpen).assign||angular.noop,F=e.$eval(n.typeaheadShowHint)||!1,O=i(n.ngModel),N=i(n.ngModel+"($$$p)"),I=function(t,n){return angular.isFunction(O(e))&&v.getOption("getterSetter")?N(t,{$$$p:n}):O.assign(t,n)},j=f.parse(n.uibTypeahead),Y=e.$new(),z=e.$on("$destroy",function(){Y.$destroy()});Y.$on("$destroy",z);var H="typeahead-"+Y.$id+"-"+Math.floor(1e4*Math.random());t.attr({"aria-autocomplete":"list","aria-expanded":!1,"aria-owns":H});var V,B;F&&((V=angular.element("<div></div>")).css("position","relative"),t.after(V),(B=t.clone()).attr("placeholder",""),B.attr("tabindex","-1"),B.val(""),B.css({position:"absolute",top:"0px",left:"0px","border-color":"transparent","box-shadow":"none",opacity:1,background:"none 0% 0% / auto repeat scroll padding-box border-box rgb(255, 255, 255)",color:"#999"}),t.css({position:"relative","vertical-align":"top","background-color":"transparent"}),B.attr("id")&&B.removeAttr("id"),V.append(B),B.after(t));var W=angular.element("<div uib-typeahead-popup></div>");W.attr({id:H,matches:"matches",active:"activeIdx",select:"select(activeIdx, evt)","move-in-progress":"moveInProgress",query:"query",position:"position","assign-is-open":"assignIsOpen(isOpen)",debounce:"debounceUpdate"}),angular.isDefined(n.typeaheadTemplateUrl)&&W.attr("template-url",n.typeaheadTemplateUrl),angular.isDefined(n.typeaheadPopupTemplateUrl)&&W.attr("popup-template-url",n.typeaheadPopupTemplateUrl);var U=function(){F&&B.val("")},G=function(){Y.matches=[],Y.activeIdx=-1,t.attr("aria-expanded",!1),U()},q=function(e){return H+"-option-"+e};Y.$watch("activeIdx",function(e){e<0?t.removeAttr("aria-activedescendant"):t.attr("aria-activedescendant",q(e))});var K=function(e,t){return!!(Y.matches.length>t&&e)&&e.toUpperCase()===Y.matches[t].label.toUpperCase()},X=function(n,r){var i={$viewValue:n};k(e,!0),T(e,!1),o.when(j.source(e,i)).then(function(o){var a=n===m.$viewValue;if(a&&_)if(o&&o.length>0){Y.activeIdx=A?0:-1,T(e,!1),Y.matches.length=0;for(var s=0;s<o.length;s++)i[j.itemName]=o[s],Y.matches.push({id:q(s),label:j.viewMapper(Y,i),model:o[s]});if(Y.query=n,h(),t.attr("aria-expanded",!0),R&&1===Y.matches.length&&K(n,0)&&(angular.isNumber(Y.debounceUpdate)||angular.isObject(Y.debounceUpdate)?c(function(){Y.select(0,r)},angular.isNumber(Y.debounceUpdate)?Y.debounceUpdate:Y.debounceUpdate.default):Y.select(0,r)),F){var l=Y.matches[0].label;angular.isString(n)&&n.length>0&&l.slice(0,n.length).toUpperCase()===n.toUpperCase()?B.val(n+l.slice(n.length)):B.val("")}}else G(),T(e,!0);a&&k(e,!1)},function(){G(),k(e,!1),T(e,!0)})};E&&(angular.element(l).on("resize",p),s.find("body").on("scroll",p));var J=c(function(){Y.matches.length&&h(),Y.moveInProgress=!1},200);Y.moveInProgress=!1,Y.query=void 0;var Z,Q=function(e){Z=a(function(){X(e)},x)},ee=function(){Z&&a.cancel(Z)};G(),Y.assignIsOpen=function(t){P(e,t)},Y.select=function(r,i){var o,s,l={};C=!0,l[j.itemName]=s=Y.matches[r].model,o=j.modelMapper(e,l),I(e,o),m.$setValidity("editable",!0),m.$setValidity("parse",!0),$(e,{$item:s,$model:o,$label:j.viewMapper(e,l),$event:i}),G(),!1!==Y.$eval(n.typeaheadFocusOnSelect)&&a(function(){t[0].focus()},0,!1)},t.on("keydown",function(t){if(0!==Y.matches.length&&-1!==y.indexOf(t.which)){var n=S(e,{$event:t});if(-1===Y.activeIdx&&n||9===t.which&&t.shiftKey)return G(),void Y.$digest();t.preventDefault();var r;switch(t.which){case 27:t.stopPropagation(),G(),e.$digest();break;case 38:Y.activeIdx=(Y.activeIdx>0?Y.activeIdx:Y.matches.length)-1,Y.$digest(),(r=W[0].querySelectorAll(".uib-typeahead-match")[Y.activeIdx]).parentNode.scrollTop=r.offsetTop;break;case 40:Y.activeIdx=(Y.activeIdx+1)%Y.matches.length,Y.$digest(),(r=W[0].querySelectorAll(".uib-typeahead-match")[Y.activeIdx]).parentNode.scrollTop=r.offsetTop;break;default:n&&Y.$apply(function(){angular.isNumber(Y.debounceUpdate)||angular.isObject(Y.debounceUpdate)?c(function(){Y.select(Y.activeIdx,t)},angular.isNumber(Y.debounceUpdate)?Y.debounceUpdate:Y.debounceUpdate.default):Y.select(Y.activeIdx,t)})}}}),t.on("focus",function(e){_=!0,0!==b||m.$viewValue||a(function(){X(m.$viewValue,e)},0)}),t.on("blur",function(e){M&&Y.matches.length&&-1!==Y.activeIdx&&!C&&(C=!0,Y.$apply(function(){angular.isObject(Y.debounceUpdate)&&angular.isNumber(Y.debounceUpdate.blur)?c(function(){Y.select(Y.activeIdx,e)},Y.debounceUpdate.blur):Y.select(Y.activeIdx,e)})),!w&&m.$error.editable&&(m.$setViewValue(),Y.$apply(function(){m.$setValidity("editable",!0),m.$setValidity("parse",!0)}),t.val("")),_=!1,C=!1});var te=function(n){t[0]!==n.target&&3!==n.which&&0!==Y.matches.length&&(G(),u.$$phase||e.$digest())};s.on("click",te),e.$on("$destroy",function(){s.off("click",te),(E||L)&&ne.remove(),E&&(angular.element(l).off("resize",p),s.find("body").off("scroll",p)),W.remove(),F&&V.remove()});var ne=r(W)(Y);E?s.find("body").append(ne):L?angular.element(L).eq(0).append(ne):t.after(ne),this.init=function(t){v=g(m=t),Y.debounceUpdate=i(v.getOption("debounce"))(e),m.$parsers.unshift(function(t){return _=!0,0===b||t&&t.length>=b?x>0?(ee(),Q(t)):X(t):(k(e,!1),ee(),G()),w?t:t?void m.$setValidity("editable",!1):(m.$setValidity("editable",!0),null)}),m.$formatters.push(function(t){var n,r,i={};return w||m.$setValidity("editable",!0),D?(i.$model=t,D(e,i)):(i[j.itemName]=t,n=j.viewMapper(e,i),i[j.itemName]=void 0,r=j.viewMapper(e,i),n!==r?n:t)})}}]).directive("uibTypeahead",function(){return{controller:"UibTypeaheadController",require:["ngModel","uibTypeahead"],link:function(e,t,n,r){r[1].init(r[0])}}}).directive("uibTypeaheadPopup",["$$debounce",function(e){return{scope:{matches:"=",query:"=",active:"=",position:"&",moveInProgress:"=",select:"&",assignIsOpen:"&",debounce:"&"},replace:!0,templateUrl:function(e,t){return t.popupTemplateUrl||"uib/template/typeahead/typeahead-popup.html"},link:function(t,n,r){t.templateUrl=r.templateUrl,t.isOpen=function(){var e=t.matches.length>0;return t.assignIsOpen({isOpen:e}),e},t.isActive=function(e){return t.active===e},t.selectActive=function(e){t.active=e},t.selectMatch=function(n,r){var i=t.debounce();angular.isNumber(i)||angular.isObject(i)?e(function(){t.select({activeIdx:n,evt:r})},angular.isNumber(i)?i:i.default):t.select({activeIdx:n,evt:r})}}}}]).directive("uibTypeaheadMatch",["$templateRequest","$compile","$parse",function(e,t,n){return{scope:{index:"=",match:"=",query:"="},link:function(r,i,o){var a=n(o.templateUrl)(r.$parent)||"uib/template/typeahead/typeahead-match.html";e(a).then(function(e){var n=angular.element(e.trim());i.replaceWith(n),t(n)(r)})}}}]).filter("uibTypeaheadHighlight",["$sce","$injector","$log",function(e,t,n){function r(e){return e.replace(/([.?*+^$[\]\\(){}|-])/g,"\\$1")}function i(e){return/<.*>/g.test(e)}var o;return o=t.has("$sanitize"),function(t,a){return!o&&i(t)&&n.warn("Unsafe use of typeahead please use ngSanitize"),t=a?(""+t).replace(new RegExp(r(a),"gi"),"<strong>$&</strong>"):t,o||(t=e.trustAsHtml(t)),t}}]),angular.module("uib/template/accordion/accordion-group.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion-group.html",'<div role="tab" id="{{::headingId}}" aria-selected="{{isOpen}}" class="panel-heading" ng-keypress="toggleOpen($event)">\n  <h4 class="panel-title">\n    <a role="button" data-toggle="collapse" href aria-expanded="{{isOpen}}" aria-controls="{{::panelId}}" tabindex="0" class="accordion-toggle" ng-click="toggleOpen()" uib-accordion-transclude="heading" ng-disabled="isDisabled" uib-tabindex-toggle><span uib-accordion-header ng-class="{\'text-muted\': isDisabled}">{{heading}}</span></a>\n  </h4>\n</div>\n<div id="{{::panelId}}" aria-labelledby="{{::headingId}}" aria-hidden="{{!isOpen}}" role="tabpanel" class="panel-collapse collapse" uib-collapse="!isOpen">\n  <div class="panel-body" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/accordion/accordion.html",[]).run(["$templateCache",function(e){e.put("uib/template/accordion/accordion.html",'<div role="tablist" class="panel-group" ng-transclude></div>')}]),angular.module("uib/template/alert/alert.html",[]).run(["$templateCache",function(e){e.put("uib/template/alert/alert.html",'<button ng-show="closeable" type="button" class="close" ng-click="close({$event: $event})">\n  <span aria-hidden="true">&times;</span>\n  <span class="sr-only">Close</span>\n</button>\n<div ng-transclude></div>\n')}]),angular.module("uib/template/carousel/carousel.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/carousel.html",'<div class="carousel-inner" ng-transclude></div>\n<a role="button" href class="left carousel-control" ng-click="prev()" ng-class="{ disabled: isPrevDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-left"></span>\n  <span class="sr-only">previous</span>\n</a>\n<a role="button" href class="right carousel-control" ng-click="next()" ng-class="{ disabled: isNextDisabled() }" ng-show="slides.length > 1">\n  <span aria-hidden="true" class="glyphicon glyphicon-chevron-right"></span>\n  <span class="sr-only">next</span>\n</a>\n<ol class="carousel-indicators" ng-show="slides.length > 1">\n  <li ng-repeat="slide in slides | orderBy:indexOfSlide track by $index" ng-class="{ active: isActive(slide) }" ng-click="select(slide)">\n    <span class="sr-only">slide {{ $index + 1 }} of {{ slides.length }}<span ng-if="isActive(slide)">, currently active</span></span>\n  </li>\n</ol>\n')}]),angular.module("uib/template/carousel/slide.html",[]).run(["$templateCache",function(e){e.put("uib/template/carousel/slide.html",'<div class="text-center" ng-transclude></div>\n')}]),angular.module("uib/template/datepicker/datepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/datepicker.html",'<div ng-switch="datepickerMode">\n  <div uib-daypicker ng-switch-when="day" tabindex="0" class="uib-daypicker"></div>\n  <div uib-monthpicker ng-switch-when="month" tabindex="0" class="uib-monthpicker"></div>\n  <div uib-yearpicker ng-switch-when="year" tabindex="0" class="uib-yearpicker"></div>\n</div>\n')}]),angular.module("uib/template/datepicker/day.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/day.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::5 + showWeeks}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n    <tr>\n      <th ng-if="showWeeks" class="text-center"></th>\n      <th ng-repeat="label in ::labels track by $index" class="text-center"><small aria-label="{{::label.full}}">{{::label.abbr}}</small></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-weeks" ng-repeat="row in rows track by $index" role="row">\n      <td ng-if="showWeeks" class="text-center h6"><em>{{ weekNumbers[$index] }}</em></td>\n      <td ng-repeat="dt in row" class="uib-day text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default btn-sm"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-muted\': dt.secondary, \'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/month.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/month.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::yearHeaderColspan}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></i></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-months" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-month text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepicker/year.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepicker/year.html",'<table role="grid" aria-labelledby="{{::uniqueId}}-title" aria-activedescendant="{{activeDateId}}">\n  <thead>\n    <tr>\n      <th><button type="button" class="btn btn-default btn-sm pull-left uib-left" ng-click="move(-1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-left"></i><span class="sr-only">previous</span></button></th>\n      <th colspan="{{::columns - 2}}"><button id="{{::uniqueId}}-title" role="heading" aria-live="assertive" aria-atomic="true" type="button" class="btn btn-default btn-sm uib-title" ng-click="toggleMode()" ng-disabled="datepickerMode === maxMode" tabindex="-1"><strong>{{title}}</strong></button></th>\n      <th><button type="button" class="btn btn-default btn-sm pull-right uib-right" ng-click="move(1)" tabindex="-1"><i aria-hidden="true" class="glyphicon glyphicon-chevron-right"></i><span class="sr-only">next</span></button></th>\n    </tr>\n  </thead>\n  <tbody>\n    <tr class="uib-years" ng-repeat="row in rows track by $index" role="row">\n      <td ng-repeat="dt in row" class="uib-year text-center" role="gridcell"\n        id="{{::dt.uid}}"\n        ng-class="::dt.customClass">\n        <button type="button" class="btn btn-default"\n          uib-is-class="\n            \'btn-info\' for selectedDt,\n            \'active\' for activeDt\n            on dt"\n          ng-click="select(dt.date)"\n          ng-disabled="::dt.disabled"\n          tabindex="-1"><span ng-class="::{\'text-info\': dt.current}">{{::dt.label}}</span></button>\n      </td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/datepickerPopup/popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/datepickerPopup/popup.html",'<ul role="presentation" class="uib-datepicker-popup dropdown-menu uib-position-measure" dropdown-nested ng-if="isOpen" ng-keydown="keydown($event)" ng-click="$event.stopPropagation()">\n  <li ng-transclude></li>\n  <li ng-if="showButtonBar" class="uib-button-bar">\n    <span class="btn-group pull-left">\n      <button type="button" class="btn btn-sm btn-info uib-datepicker-current" ng-click="select(\'today\', $event)" ng-disabled="isDisabled(\'today\')">{{ getText(\'current\') }}</button>\n      <button type="button" class="btn btn-sm btn-danger uib-clear" ng-click="select(null, $event)">{{ getText(\'clear\') }}</button>\n    </span>\n    <button type="button" class="btn btn-sm btn-success pull-right uib-close" ng-click="close($event)">{{ getText(\'close\') }}</button>\n  </li>\n</ul>\n')}]),angular.module("uib/template/modal/window.html",[]).run(["$templateCache",function(e){e.put("uib/template/modal/window.html","<div class=\"modal-dialog {{size ? 'modal-' + size : ''}}\"><div class=\"modal-content\" uib-modal-transclude></div></div>\n")}]),angular.module("uib/template/pager/pager.html",[]).run(["$templateCache",function(e){e.put("uib/template/pager/pager.html",'<li ng-class="{disabled: noPrevious()||ngDisabled, previous: align}"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li ng-class="{disabled: noNext()||ngDisabled, next: align}"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n')}]),angular.module("uib/template/pagination/pagination.html",[]).run(["$templateCache",function(e){e.put("uib/template/pagination/pagination.html",'<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-first"><a href ng-click="selectPage(1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'first\')}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noPrevious()||ngDisabled}" class="pagination-prev"><a href ng-click="selectPage(page - 1, $event)" ng-disabled="noPrevious()||ngDisabled" uib-tabindex-toggle>{{::getText(\'previous\')}}</a></li>\n<li role="menuitem" ng-repeat="page in pages track by $index" ng-class="{active: page.active,disabled: ngDisabled&&!page.active}" class="pagination-page"><a href ng-click="selectPage(page.number, $event)" ng-disabled="ngDisabled&&!page.active" uib-tabindex-toggle>{{page.text}}</a></li>\n<li role="menuitem" ng-if="::directionLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-next"><a href ng-click="selectPage(page + 1, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'next\')}}</a></li>\n<li role="menuitem" ng-if="::boundaryLinks" ng-class="{disabled: noNext()||ngDisabled}" class="pagination-last"><a href ng-click="selectPage(totalPages, $event)" ng-disabled="noNext()||ngDisabled" uib-tabindex-toggle>{{::getText(\'last\')}}</a></li>\n')}]),angular.module("uib/template/tooltip/tooltip-html-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-html-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind-html="contentExp()"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner" ng-bind="content"></div>\n')}]),angular.module("uib/template/tooltip/tooltip-template-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/tooltip/tooltip-template-popup.html",'<div class="tooltip-arrow"></div>\n<div class="tooltip-inner"\n  uib-tooltip-template-transclude="contentExp()"\n  tooltip-template-transclude-scope="originScope()"></div>\n')}]),angular.module("uib/template/popover/popover-html.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-html.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind-html="contentExp()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover-template.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover-template.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content"\n      uib-tooltip-template-transclude="contentExp()"\n      tooltip-template-transclude-scope="originScope()"></div>\n</div>\n')}]),angular.module("uib/template/popover/popover.html",[]).run(["$templateCache",function(e){e.put("uib/template/popover/popover.html",'<div class="arrow"></div>\n\n<div class="popover-inner">\n    <h3 class="popover-title" ng-bind="uibTitle" ng-if="uibTitle"></h3>\n    <div class="popover-content" ng-bind="content"></div>\n</div>\n')}]),angular.module("uib/template/progressbar/bar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/bar.html",'<div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n')}]),angular.module("uib/template/progressbar/progress.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progress.html",'<div class="progress" ng-transclude aria-labelledby="{{::title}}"></div>')}]),angular.module("uib/template/progressbar/progressbar.html",[]).run(["$templateCache",function(e){e.put("uib/template/progressbar/progressbar.html",'<div class="progress">\n  <div class="progress-bar" ng-class="type && \'progress-bar-\' + type" role="progressbar" aria-valuenow="{{value}}" aria-valuemin="0" aria-valuemax="{{max}}" ng-style="{width: (percent < 100 ? percent : 100) + \'%\'}" aria-valuetext="{{percent | number:0}}%" aria-labelledby="{{::title}}" ng-transclude></div>\n</div>\n')}]),angular.module("uib/template/rating/rating.html",[]).run(["$templateCache",function(e){e.put("uib/template/rating/rating.html",'<span ng-mouseleave="reset()" ng-keydown="onKeydown($event)" tabindex="0" role="slider" aria-valuemin="0" aria-valuemax="{{range.length}}" aria-valuenow="{{value}}" aria-valuetext="{{title}}">\n    <span ng-repeat-start="r in range track by $index" class="sr-only">({{ $index < value ? \'*\' : \' \' }})</span>\n    <i ng-repeat-end ng-mouseenter="enter($index + 1)" ng-click="rate($index + 1)" class="glyphicon" ng-class="$index < value && (r.stateOn || \'glyphicon-star\') || (r.stateOff || \'glyphicon-star-empty\')" ng-attr-title="{{r.title}}"></i>\n</span>\n')}]),angular.module("uib/template/tabs/tab.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tab.html",'<li ng-class="[{active: active, disabled: disabled}, classes]" class="uib-tab nav-item">\n  <a href ng-click="select($event)" class="nav-link" uib-tab-heading-transclude>{{heading}}</a>\n</li>\n')}]),angular.module("uib/template/tabs/tabset.html",[]).run(["$templateCache",function(e){e.put("uib/template/tabs/tabset.html",'<div>\n  <ul class="nav nav-{{tabset.type || \'tabs\'}}" ng-class="{\'nav-stacked\': vertical, \'nav-justified\': justified}" ng-transclude></ul>\n  <div class="tab-content">\n    <div class="tab-pane"\n         ng-repeat="tab in tabset.tabs"\n         ng-class="{active: tabset.active === tab.index}"\n         uib-tab-content-transclude="tab">\n    </div>\n  </div>\n</div>\n')}]),angular.module("uib/template/timepicker/timepicker.html",[]).run(["$templateCache",function(e){e.put("uib/template/timepicker/timepicker.html",'<table class="uib-timepicker">\n  <tbody>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-increment hours"><a ng-click="incrementHours()" ng-class="{disabled: noIncrementHours()}" class="btn btn-link" ng-disabled="noIncrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-increment minutes"><a ng-click="incrementMinutes()" ng-class="{disabled: noIncrementMinutes()}" class="btn btn-link" ng-disabled="noIncrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-increment seconds"><a ng-click="incrementSeconds()" ng-class="{disabled: noIncrementSeconds()}" class="btn btn-link" ng-disabled="noIncrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-up"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n    <tr>\n      <td class="form-group uib-time hours" ng-class="{\'has-error\': invalidHours}">\n        <input type="text" placeholder="HH" ng-model="hours" ng-change="updateHours()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementHours()" ng-blur="blur()">\n      </td>\n      <td class="uib-separator">:</td>\n      <td class="form-group uib-time minutes" ng-class="{\'has-error\': invalidMinutes}">\n        <input type="text" placeholder="MM" ng-model="minutes" ng-change="updateMinutes()" class="form-control text-center" ng-readonly="::readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementMinutes()" ng-blur="blur()">\n      </td>\n      <td ng-show="showSeconds" class="uib-separator">:</td>\n      <td class="form-group uib-time seconds" ng-class="{\'has-error\': invalidSeconds}" ng-show="showSeconds">\n        <input type="text" placeholder="SS" ng-model="seconds" ng-change="updateSeconds()" class="form-control text-center" ng-readonly="readonlyInput" maxlength="2" tabindex="{{::tabindex}}" ng-disabled="noIncrementSeconds()" ng-blur="blur()">\n      </td>\n      <td ng-show="showMeridian" class="uib-time am-pm"><button type="button" ng-class="{disabled: noToggleMeridian()}" class="btn btn-default text-center" ng-click="toggleMeridian()" ng-disabled="noToggleMeridian()" tabindex="{{::tabindex}}">{{meridian}}</button></td>\n    </tr>\n    <tr class="text-center" ng-show="::showSpinners">\n      <td class="uib-decrement hours"><a ng-click="decrementHours()" ng-class="{disabled: noDecrementHours()}" class="btn btn-link" ng-disabled="noDecrementHours()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td>&nbsp;</td>\n      <td class="uib-decrement minutes"><a ng-click="decrementMinutes()" ng-class="{disabled: noDecrementMinutes()}" class="btn btn-link" ng-disabled="noDecrementMinutes()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showSeconds">&nbsp;</td>\n      <td ng-show="showSeconds" class="uib-decrement seconds"><a ng-click="decrementSeconds()" ng-class="{disabled: noDecrementSeconds()}" class="btn btn-link" ng-disabled="noDecrementSeconds()" tabindex="-1"><span class="glyphicon glyphicon-chevron-down"></span></a></td>\n      <td ng-show="showMeridian"></td>\n    </tr>\n  </tbody>\n</table>\n')}]),angular.module("uib/template/typeahead/typeahead-match.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-match.html",'<a href\n   tabindex="-1"\n   ng-bind-html="match.label | uibTypeaheadHighlight:query"\n   ng-attr-title="{{match.label}}"></a>\n')}]),angular.module("uib/template/typeahead/typeahead-popup.html",[]).run(["$templateCache",function(e){e.put("uib/template/typeahead/typeahead-popup.html",'<ul class="dropdown-menu" ng-show="isOpen() && !moveInProgress" ng-style="{top: position().top+\'px\', left: position().left+\'px\'}" role="listbox" aria-hidden="{{!isOpen()}}">\n    <li class="uib-typeahead-match" ng-repeat="match in matches track by $index" ng-class="{active: isActive($index) }" ng-mouseenter="selectActive($index)" ng-click="selectMatch($index, $event)" role="option" id="{{::match.id}}">\n        <div uib-typeahead-match index="$index" match="match" query="query" template-url="templateUrl"></div>\n    </li>\n</ul>\n')}]),angular.module("ui.bootstrap.carousel").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibCarouselCss&&angular.element(document).find("head").prepend('<style type="text/css">.ng-animate.item:not(.left):not(.right){-webkit-transition:0s ease-in-out left;transition:0s ease-in-out left}</style>'),angular.$$uibCarouselCss=!0}),angular.module("ui.bootstrap.datepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker .uib-title{width:100%;}.uib-day button,.uib-month button,.uib-year button{min-width:100%;}.uib-left,.uib-right{width:100%}</style>'),angular.$$uibDatepickerCss=!0}),angular.module("ui.bootstrap.position").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibPositionCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-position-measure{display:block !important;visibility:hidden !important;position:absolute !important;top:-9999px !important;left:-9999px !important;}.uib-position-scrollbar-measure{position:absolute !important;top:-9999px !important;width:50px !important;height:50px !important;overflow:scroll !important;}.uib-position-body-scrollbar-measure{overflow:scroll !important;}</style>'),angular.$$uibPositionCss=!0}),angular.module("ui.bootstrap.datepickerPopup").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibDatepickerpopupCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-datepicker-popup.dropdown-menu{display:block;float:none;margin:0;}.uib-button-bar{padding:10px 9px 2px;}</style>'),angular.$$uibDatepickerpopupCss=!0}),angular.module("ui.bootstrap.tooltip").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTooltipCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-tooltip-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-html-popup].tooltip.right-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.top-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-left > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.bottom-right > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.left-bottom > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-top > .tooltip-arrow,[uib-tooltip-template-popup].tooltip.right-bottom > .tooltip-arrow,[uib-popover-popup].popover.top-left > .arrow,[uib-popover-popup].popover.top-right > .arrow,[uib-popover-popup].popover.bottom-left > .arrow,[uib-popover-popup].popover.bottom-right > .arrow,[uib-popover-popup].popover.left-top > .arrow,[uib-popover-popup].popover.left-bottom > .arrow,[uib-popover-popup].popover.right-top > .arrow,[uib-popover-popup].popover.right-bottom > .arrow,[uib-popover-html-popup].popover.top-left > .arrow,[uib-popover-html-popup].popover.top-right > .arrow,[uib-popover-html-popup].popover.bottom-left > .arrow,[uib-popover-html-popup].popover.bottom-right > .arrow,[uib-popover-html-popup].popover.left-top > .arrow,[uib-popover-html-popup].popover.left-bottom > .arrow,[uib-popover-html-popup].popover.right-top > .arrow,[uib-popover-html-popup].popover.right-bottom > .arrow,[uib-popover-template-popup].popover.top-left > .arrow,[uib-popover-template-popup].popover.top-right > .arrow,[uib-popover-template-popup].popover.bottom-left > .arrow,[uib-popover-template-popup].popover.bottom-right > .arrow,[uib-popover-template-popup].popover.left-top > .arrow,[uib-popover-template-popup].popover.left-bottom > .arrow,[uib-popover-template-popup].popover.right-top > .arrow,[uib-popover-template-popup].popover.right-bottom > .arrow{top:auto;bottom:auto;left:auto;right:auto;margin:0;}[uib-popover-popup].popover,[uib-popover-html-popup].popover,[uib-popover-template-popup].popover{display:block !important;}</style>'),angular.$$uibTooltipCss=!0}),angular.module("ui.bootstrap.timepicker").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTimepickerCss&&angular.element(document).find("head").prepend('<style type="text/css">.uib-time input{width:50px;}</style>'),angular.$$uibTimepickerCss=!0}),angular.module("ui.bootstrap.typeahead").run(function(){!angular.$$csp().noInlineStyle&&!angular.$$uibTypeaheadCss&&angular.element(document).find("head").prepend('<style type="text/css">[uib-typeahead-popup].dropdown-menu{display:block;}</style>'),angular.$$uibTypeaheadCss=!0}),function(){var e=[].indexOf||function(e){for(var t=0,n=this.length;t<n;t++)if(t in this&&this[t]===e)return t;return-1};angular.module("angularBootstrapNavTree",[]).directive("abnTree",["$timeout",function(t){return{restrict:"E",template:'<ul class="nav nav-list nav-pills nav-stacked abn-tree">\n  <li ng-repeat="row in tree_rows | filter:{visible:true} track by row.branch.uid" ng-animate="\'abn-tree-animate\'" ng-class="\'level-\' + {{ row.level }} + (row.branch.selected ? \' active\':\'\') + \' \' +row.classes.join(\' \')" class="abn-tree-row"><span><a href="" ng-click="row.branch.expanded = !row.branch.expanded"><i ng-class="[row.tree_icon, row.branch.icon_class]" class="indented tree-icon"> </i></a></span><span title="{{row.labelText}}"><a href="{{generate_url(row.branch)}}" ng-click="user_clicks_branch(row.branch)"><span class="indented tree-label" ng-bind-html="row.label"></span></a></span></li>\n</ul>',replace:!0,scope:{treeData:"=",onSelect:"&",onGenerateUrl:"&",initialSelection:"@",treeControl:"="},link:function(n,r,i){var o,a,s,l,u,c,d,f,p,h,g;if(function(e){console.log("ERROR:"+e)},null==i.iconExpand&&(i.iconExpand="fa fa-plus"),null==i.iconCollapse&&(i.iconCollapse="fa fa-minus"),null==i.iconLeaf&&(i.iconLeaf="fa"),null==i.expandLevel&&(i.expandLevel="3"),a=parseInt(i.expandLevel,10),n.treeData){if(null==n.treeData.length){if(null==treeData.label)return void alert("treeData should be an array of root branches");n.treeData=[treeData]}return l=function(e){var t,r,i,o,a,s;for(t=function(n,r){var i,o,a,s,l;if(e(n,r),null!=n.children){for(l=[],o=0,a=(s=n.children).length;o<a;o++)i=s[o],l.push(t(i,r+1));return l}},s=[],i=0,o=(a=n.treeData).length;i<o;i++)r=a[i],s.push(t(r,1));return s},h=null,f=function(e){if(!e)return null!=h&&(h.selected=!1),void(h=null);if(e!==h){if(null!=h&&(h.selected=!1),e.selected=!0,h=e,o(e),null!=e.onSelect)return t(function(){return e.onSelect(e)});if(null!=n.onSelect)return t(function(){return n.onSelect({branch:e})})}},p=function(){null!=h&&(h.selected=!1,h=null)},n.user_clicks_branch=function(e){if(e!==h)return f(e)},n.generate_url=function(e){if(null!=n.onGenerateUrl){var t=n.onGenerateUrl({branch:e});return t||""}return""},u=function(e){var t;return t=void 0,e.parent_uid&&l(function(n){if(n.uid===e.parent_uid)return t=n}),t},s=function(e,t){var n;if(null!=(n=u(e)))return t(n),s(n,t)},o=function(e){return s(e,function(e){return e.expanded=!0})},n.tree_rows=[],d=function(){var t,r,o,a,s,u;for(l(function(e,t){if(!e.uid)return e.uid=""+Math.random()}),l(function(e){var t,n,r,i,o;if(angular.isArray(e.children)){for(o=[],n=0,r=(i=e.children).length;n<r;n++)t=i[n],o.push(t.parent_uid=e.uid);return o}}),n.tree_rows=[],l(function(e){var t,n;return e.children?e.children.length>0?(n=function(e){return"string"==typeof e?{label:e,children:[]}:e},e.children=function(){var r,i,o,a;for(a=[],r=0,i=(o=e.children).length;r<i;r++)t=o[r],a.push(n(t));return a}()):void 0:e.children=[]}),t=function(r,o,a){var s,l,u,c,d,f,p;if(null==o.expanded&&(o.expanded=!1),null==o.classes&&(o.classes=[]),o.noLeaf||o.children&&0!==o.children.length?u=o.expanded?i.iconCollapse:i.iconExpand:(u=i.iconLeaf,e.call(o.classes,"leaf")<0&&o.classes.push("leaf")),n.tree_rows.push({level:r,branch:o,label:o.label,labelText:o.label?String(o.label).replace(/<[^>]+>/gm,""):"",classes:o.classes,tree_icon:u,visible:a}),null!=o.children){for(p=[],c=0,d=(f=o.children).length;c<d;c++)s=f[c],l=a&&o.expanded,p.push(t(r+1,s,l));return p}},u=[],o=0,a=(s=n.treeData).length;o<a;o++)r=s[o],u.push(t(1,r,!0));return u},n.$watch("treeData",d,!0),null!=i.initialSelection&&l(function(e){if(e.label===i.initialSelection)return t(function(){return f(e)})}),c=n.treeData.length,l(function(e,t){return e.level=t,e.expanded=e.level<a}),null!=n.treeControl&&angular.isObject(n.treeControl)?(g=n.treeControl,g.expand_all=function(){return l(function(e,t){return e.expanded=!0})},g.collapse_all=function(){return l(function(e,t){return e.expanded=!1})},g.get_first_branch=function(){if((c=n.treeData.length)>0)return n.treeData[0]},g.select_first_branch=function(){var e;return e=g.get_first_branch(),g.select_branch(e)},g.get_selected_branch=function(){return h},g.get_parent_branch=function(e){return u(e)},g.selected_branch=function(){return h},g.select_branch=function(e){return f(e),e},g.deselect_branch=function(){p()},g.get_children=function(e){return e.children},g.select_parent_branch=function(e){var t;if(null==e&&(e=g.get_selected_branch()),null!=e&&null!=(t=g.get_parent_branch(e)))return g.select_branch(t),t},g.add_branch=function(e,t){return null!=e?(e.children.push(t),e.expanded=!0):n.treeData.push(t),t},g.add_root_branch=function(e){return g.add_branch(null,e),e},g.expand_branch=function(e){if(null==e&&(e=g.get_selected_branch()),null!=e)return e.expanded=!0,e},g.collapse_branch=function(e){if(null==e&&(e=h),null!=e)return e.expanded=!1,e},g.get_siblings=function(e){var t;if(null==e&&(e=h),null!=e)return t=g.get_parent_branch(e),t?t.children:n.treeData},g.get_next_sibling=function(e){var t,n;if(null==e&&(e=h),null!=e&&(n=g.get_siblings(e),c=n.length,(t=n.indexOf(e))<c))return n[t+1]},g.get_prev_sibling=function(e){var t,n;if(null==e&&(e=h),n=g.get_siblings(e),c=n.length,(t=n.indexOf(e))>0)return n[t-1]},g.select_next_sibling=function(e){var t;if(null==e&&(e=h),null!=e&&null!=(t=g.get_next_sibling(e)))return g.select_branch(t)},g.select_prev_sibling=function(e){var t;if(null==e&&(e=h),null!=e&&null!=(t=g.get_prev_sibling(e)))return g.select_branch(t)},g.get_first_child=function(e){var t;if(null==e&&(e=h),null!=e&&(null!=(t=e.children)?t.length:void 0)>0)return e.children[0]},g.get_closest_ancestor_next_sibling=function(e){var t,n;return t=g.get_next_sibling(e),null!=t?t:(n=g.get_parent_branch(e),g.get_closest_ancestor_next_sibling(n))},g.get_next_branch=function(e){var t;if(null==e&&(e=h),null!=e)return t=g.get_first_child(e),null!=t?t:t=g.get_closest_ancestor_next_sibling(e)},g.select_next_branch=function(e){var t;if(null==e&&(e=h),null!=e&&null!=(t=g.get_next_branch(e)))return g.select_branch(t),t},g.last_descendant=function(e){var t;return c=e.children.length,0===c?e:(t=e.children[c-1],g.last_descendant(t))},g.get_prev_branch=function(e){var t;if(null==e&&(e=h),null!=e)return t=g.get_prev_sibling(e),null!=t?g.last_descendant(t):g.get_parent_branch(e)},g.select_prev_branch=function(e){var t;if(null==e&&(e=h),null!=e&&null!=(t=g.get_prev_branch(e)))return g.select_branch(t),t}):void 0}alert("no treeData defined for the tree!")}}}])}.call(this),function(e){function t(t){var n=e(this),r=null,i=[],o=null,a=null,s=e.extend({rowSelector:"> li",submenuSelector:"*",submenuDirection:"right",tolerance:75,enter:e.noop,exit:e.noop,activate:e.noop,deactivate:e.noop,exitMenu:e.noop},t),l=function(e){i.push({x:e.pageX,y:e.pageY}),i.length>3&&i.shift()},u=function(){a&&clearTimeout(a),s.exitMenu(this)&&(r&&s.deactivate(r),r=null)},c=function(){a&&clearTimeout(a),s.enter(this),h(this)},d=function(){s.exit(this)},f=function(){p(this)},p=function(e){e!=r&&(r&&s.deactivate(r),s.activate(e),r=e)},h=function(e){var t=g();t?a=setTimeout(function(){h(e)},t):p(e)},g=function(){function t(e,t){return(t.y-e.y)/(t.x-e.x)}if(!r||!e(r).is(s.submenuSelector))return 0;var a=n.offset(),l={x:a.left,y:a.top-s.tolerance},u={x:a.left+n.outerWidth(),y:l.y},c={x:a.left,y:a.top+n.outerHeight()+s.tolerance},d={x:a.left+n.outerWidth(),y:c.y},f=i[i.length-1],p=i[0];if(!f)return 0;if(p||(p=f),p.x<a.left||p.x>d.x||p.y<a.top||p.y>d.y)return 0;if(o&&f.x==o.x&&f.y==o.y)return 0;var h=u,g=d;"left"==s.submenuDirection?(h=c,g=l):"below"==s.submenuDirection?(h=d,g=c):"above"==s.submenuDirection&&(h=l,g=u);var m=t(f,h),v=t(f,g),y=t(p,h),b=t(p,g);return m<y&&v>b?(o=f,300):(o=null,0)};n.mouseleave(u).find(s.rowSelector).mouseenter(c).mouseleave(d).click(f),e(document).mousemove(l)}e.fn.menuAim=function(e){return this.each(function(){t.call(this,e)}),this}}(jQuery),window.Modernizr=function(e,t,n){function r(e){m.cssText=e}function i(e,t){return r(x.join(e+";")+(t||""))}function o(e,t){return typeof e===t}function a(e,t){return!!~(""+e).indexOf(t)}function s(e,t){for(var r in e){var i=e[r];if(!a(i,"-")&&m[i]!==n)return"pfx"!=t||i}return!1}function l(e,t,r){for(var i in e){var a=t[e[i]];if(a!==n)return!1===r?e[i]:o(a,"function")?a.bind(r||t):a}return!1}function u(e,t,n){var r=e.charAt(0).toUpperCase()+e.slice(1),i=(e+" "+_.join(r+" ")+r).split(" ");return o(t,"string")||o(t,"undefined")?s(i,t):(i=(e+" "+C.join(r+" ")+r).split(" "),l(i,t,n))}var c,d,f={},p=t.documentElement,h="modernizr",g=t.createElement(h),m=g.style,v=t.createElement("input"),y=":)",b={}.toString,x=" -webkit- -moz- -o- -ms- ".split(" "),w="Webkit Moz O ms",_=w.split(" "),C=w.toLowerCase().split(" "),k={svg:"http://www.w3.org/2000/svg"},S={},$={},M={},T=[],D=T.slice,E=function(e,n,r,i){var o,a,s,l,u=t.createElement("div"),c=t.body,d=c||t.createElement("body");if(parseInt(r,10))for(;r--;)s=t.createElement("div"),s.id=i?i[r]:h+(r+1),u.appendChild(s);return o=["&#173;",'<style id="s',h,'">',e,"</style>"].join(""),u.id=h,(c?u:d).innerHTML+=o,d.appendChild(u),c||(d.style.background="",d.style.overflow="hidden",l=p.style.overflow,p.style.overflow="hidden",p.appendChild(d)),a=n(u,e),c?u.parentNode.removeChild(u):(d.parentNode.removeChild(d),p.style.overflow=l),!!a},L=function(){function e(e,i){i=i||t.createElement(r[e]||"div");var a=(e="on"+e)in i;return a||(i.setAttribute||(i=t.createElement("div")),i.setAttribute&&i.removeAttribute&&(i.setAttribute(e,""),a=o(i[e],"function"),o(i[e],"undefined")||(i[e]=n),i.removeAttribute(e))),i=null,a}var r={select:"input",change:"input",submit:"form",reset:"form",error:"img",load:"img",abort:"img"};return e}(),A={}.hasOwnProperty;d=o(A,"undefined")||o(A.call,"undefined")?function(e,t){return t in e&&o(e.constructor.prototype[t],"undefined")}:function(e,t){return A.call(e,t)},Function.prototype.bind||(Function.prototype.bind=function(e){var t=this;if("function"!=typeof t)throw new TypeError;var n=D.call(arguments,1),r=function(){if(this instanceof r){var i=function(){};i.prototype=t.prototype;var o=new i,a=t.apply(o,n.concat(D.call(arguments)));return Object(a)===a?a:o}return t.apply(e,n.concat(D.call(arguments)))};return r}),S.flexbox=function(){return u("flexWrap")},S.canvas=function(){var e=t.createElement("canvas");return!!e.getContext&&!!e.getContext("2d")},S.canvastext=function(){return!!f.canvas&&!!o(t.createElement("canvas").getContext("2d").fillText,"function")},S.webgl=function(){return!!e.WebGLRenderingContext},S.touch=function(){var n;return"ontouchstart"in e||e.DocumentTouch&&t instanceof DocumentTouch?n=!0:E(["@media (",x.join("touch-enabled),("),h,")","{#modernizr{top:9px;position:absolute}}"].join(""),function(e){n=9===e.offsetTop}),n},S.geolocation=function(){return"geolocation"in navigator},S.postmessage=function(){return!!e.postMessage},S.websqldatabase=function(){return!!e.openDatabase},S.indexedDB=function(){return!!u("indexedDB",e)},S.hashchange=function(){return L("hashchange",e)&&(t.documentMode===n||t.documentMode>7)},S.history=function(){return!!e.history&&!!history.pushState},S.draganddrop=function(){var e=t.createElement("div");return"draggable"in e||"ondragstart"in e&&"ondrop"in e},S.websockets=function(){return"WebSocket"in e||"MozWebSocket"in e},S.rgba=function(){return r("background-color:rgba(150,255,150,.5)"),a(m.backgroundColor,"rgba")},S.hsla=function(){return r("background-color:hsla(120,40%,100%,.5)"),a(m.backgroundColor,"rgba")||a(m.backgroundColor,"hsla")},S.multiplebgs=function(){return r("background:url(https://),url(https://),red url(https://)"),/(url\s*\(.*?){3}/.test(m.background)},S.backgroundsize=function(){return u("backgroundSize")},S.borderimage=function(){return u("borderImage")},S.borderradius=function(){return u("borderRadius")},S.boxshadow=function(){return u("boxShadow")},S.textshadow=function(){return""===t.createElement("div").style.textShadow},S.opacity=function(){return i("opacity:.55"),/^0.55$/.test(m.opacity)},S.cssanimations=function(){return u("animationName")},S.csscolumns=function(){return u("columnCount")},S.cssgradients=function(){var e="background-image:";return r((e+"-webkit- ".split(" ").join("gradient(linear,left top,right bottom,from(#9f9),to(white));"+e)+x.join("linear-gradient(left top,#9f9, white);"+e)).slice(0,-e.length)),a(m.backgroundImage,"gradient")},S.cssreflections=function(){return u("boxReflect")},S.csstransforms=function(){return!!u("transform")},S.csstransforms3d=function(){var e=!!u("perspective");return e&&"webkitPerspective"in p.style&&E("@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}",function(t,n){e=9===t.offsetLeft&&3===t.offsetHeight}),e},S.csstransitions=function(){return u("transition")},S.fontface=function(){var e;return E('@font-face {font-family:"font";src:url("https://")}',function(n,r){var i=t.getElementById("smodernizr"),o=i.sheet||i.styleSheet,a=o?o.cssRules&&o.cssRules[0]?o.cssRules[0].cssText:o.cssText||"":"";e=/src/i.test(a)&&0===a.indexOf(r.split(" ")[0])}),e},S.generatedcontent=function(){var e;return E(["#",h,"{font:0/0 a}#",h,':after{content:"',y,'";visibility:hidden;font:3px/1 a}'].join(""),function(t){e=t.offsetHeight>=3}),e},S.video=function(){var e=t.createElement("video"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('video/ogg; codecs="theora"').replace(/^no$/,""),n.h264=e.canPlayType('video/mp4; codecs="avc1.42E01E"').replace(/^no$/,""),n.webm=e.canPlayType('video/webm; codecs="vp8, vorbis"').replace(/^no$/,""))}catch(e){}return n},S.audio=function(){var e=t.createElement("audio"),n=!1;try{(n=!!e.canPlayType)&&(n=new Boolean(n),n.ogg=e.canPlayType('audio/ogg; codecs="vorbis"').replace(/^no$/,""),n.mp3=e.canPlayType("audio/mpeg;").replace(/^no$/,""),n.wav=e.canPlayType('audio/wav; codecs="1"').replace(/^no$/,""),n.m4a=(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""))}catch(e){}return n},S.localstorage=function(){try{return localStorage.setItem(h,h),localStorage.removeItem(h),!0}catch(e){return!1}},S.sessionstorage=function(){try{return sessionStorage.setItem(h,h),sessionStorage.removeItem(h),!0}catch(e){return!1}},S.webworkers=function(){return!!e.Worker},S.applicationcache=function(){return!!e.applicationCache},S.svg=function(){return!!t.createElementNS&&!!t.createElementNS(k.svg,"svg").createSVGRect},S.inlinesvg=function(){var e=t.createElement("div");return e.innerHTML="<svg/>",(e.firstChild&&e.firstChild.namespaceURI)==k.svg},S.smil=function(){return!!t.createElementNS&&/SVGAnimate/.test(b.call(t.createElementNS(k.svg,"animate")))},S.svgclippaths=function(){return!!t.createElementNS&&/SVGClipPath/.test(b.call(t.createElementNS(k.svg,"clipPath")))};for(var R in S)d(S,R)&&(c=R.toLowerCase(),f[c]=S[R](),T.push((f[c]?"":"no-")+c));return f.input||function(){f.input=function(n){for(var r=0,i=n.length;r<i;r++)M[n[r]]=n[r]in v;return M.list&&(M.list=!!t.createElement("datalist")&&!!e.HTMLDataListElement),M}("autocomplete autofocus list placeholder max min multiple pattern required step".split(" ")),f.inputtypes=function(e){for(var r,i,o,a=0,s=e.length;a<s;a++)v.setAttribute("type",i=e[a]),(r="text"!==v.type)&&(v.value=y,v.style.cssText="position:absolute;visibility:hidden;",/^range$/.test(i)&&v.style.WebkitAppearance!==n?(p.appendChild(v),o=t.defaultView,r=o.getComputedStyle&&"textfield"!==o.getComputedStyle(v,null).WebkitAppearance&&0!==v.offsetHeight,p.removeChild(v)):/^(search|tel)$/.test(i)||(r=/^(url|email)$/.test(i)?v.checkValidity&&!1===v.checkValidity():v.value!=y)),$[e[a]]=!!r;return $}("search tel url email datetime date month week time datetime-local number range color".split(" "))}(),f.addTest=function(e,t){if("object"==typeof e)for(var r in e)d(e,r)&&f.addTest(r,e[r]);else{if(e=e.toLowerCase(),f[e]!==n)return f;t="function"==typeof t?t():t,p.className+=" "+(t?"":"no-")+e,f[e]=t}return f},r(""),g=v=null,function(e,t){function n(e,t){var n=e.createElement("p"),r=e.getElementsByTagName("head")[0]||e.documentElement;return n.innerHTML="x<style>"+t+"</style>",r.insertBefore(n.lastChild,r.firstChild)}function r(){var e=v.elements;return"string"==typeof e?e.split(" "):e}function i(e){var t=m[e[h]];return t||(t={},g++,e[h]=g,m[g]=t),t}function o(e,n,r){if(n||(n=t),c)return n.createElement(e);r||(r=i(n));var o;return o=r.cache[e]?r.cache[e].cloneNode():p.test(e)?(r.cache[e]=r.createElem(e)).cloneNode():r.createElem(e),!o.canHaveChildren||f.test(e)||o.tagUrn?o:r.frag.appendChild(o)}function a(e,n){if(e||(e=t),c)return e.createDocumentFragment();for(var o=(n=n||i(e)).frag.cloneNode(),a=0,s=r(),l=s.length;a<l;a++)o.createElement(s[a]);return o}function s(e,t){t.cache||(t.cache={},t.createElem=e.createElement,t.createFrag=e.createDocumentFragment,t.frag=t.createFrag()),e.createElement=function(n){return v.shivMethods?o(n,e,t):t.createElem(n)},e.createDocumentFragment=Function("h,f","return function(){var n=f.cloneNode(),c=n.createElement;h.shivMethods&&("+r().join().replace(/[\w\-]+/g,function(e){return t.createElem(e),t.frag.createElement(e),'c("'+e+'")'})+");return n}")(v,t.frag)}function l(e){e||(e=t);var r=i(e);return v.shivCSS&&!u&&!r.hasCSS&&(r.hasCSS=!!n(e,"article,aside,dialog,figcaption,figure,footer,header,hgroup,main,nav,section{display:block}mark{background:#FF0;color:#000}template{display:none}")),c||s(e,r),e}var u,c,d=e.html5||{},f=/^<|^(?:button|map|select|textarea|object|iframe|option|optgroup)$/i,p=/^(?:a|b|code|div|fieldset|h1|h2|h3|h4|h5|h6|i|label|li|ol|p|q|span|strong|style|table|tbody|td|th|tr|ul)$/i,h="_html5shiv",g=0,m={};!function(){try{var e=t.createElement("a");e.innerHTML="<xyz></xyz>",u="hidden"in e,c=1==e.childNodes.length||function(){t.createElement("a");var e=t.createDocumentFragment();return void 0===e.cloneNode||void 0===e.createDocumentFragment||void 0===e.createElement}()}catch(e){u=!0,c=!0}}();var v={elements:d.elements||"abbr article aside audio bdi canvas data datalist details dialog figcaption figure footer header hgroup main mark meter nav output progress section summary template time video",version:"3.7.0",shivCSS:!1!==d.shivCSS,supportsUnknownElements:c,shivMethods:!1!==d.shivMethods,type:"default",shivDocument:l,createElement:o,createDocumentFragment:a};e.html5=v,l(t)}(this,t),f._version="2.8.3",f._prefixes=x,f._domPrefixes=C,f._cssomPrefixes=_,f.hasEvent=L,f.testProp=function(e){return s([e])},f.testAllProps=u,f.testStyles=E,f.prefixed=function(e,t,n){return t?u(e,t,n):u(e,"pfx")},p.className=p.className.replace(/(^|\s)no-js(\s|$)/,"$1$2")+" js "+T.join(" "),f}(this,this.document),function(e,t,n){function r(e){return"[object Function]"==m.call(e)}function i(e){return"string"==typeof e}function o(){}function a(e){return!e||"loaded"==e||"complete"==e||"uninitialized"==e}function s(){var e=v.shift();y=1,e?e.t?h(function(){("c"==e.t?f.injectCss:f.injectJs)(e.s,0,e.a,e.x,e.e,1)},0):(e(),s()):y=0}function l(e,n,r,i,o,l,u){function c(t){if(!p&&a(d.readyState)&&(b.r=p=1,!y&&s(),d.onload=d.onreadystatechange=null,t)){"img"!=e&&h(function(){w.removeChild(d)},50);for(var r in $[n])$[n].hasOwnProperty(r)&&$[n][r].onload()}}var u=u||f.errorTimeout,d=t.createElement(e),p=0,m=0,b={t:r,s:n,e:o,a:l,x:u};1===$[n]&&(m=1,$[n]=[]),"object"==e?d.data=n:(d.src=n,d.type=e),d.width=d.height="0",d.onerror=d.onload=d.onreadystatechange=function(){c.call(this,m)},v.splice(i,0,b),"img"!=e&&(m||2===$[n]?(w.insertBefore(d,x?null:g),h(c,u)):$[n].push(d))}function u(e,t,n,r,o){return y=0,t=t||"j",i(e)?l("c"==t?C:_,e,t,this.i++,n,r,o):(v.splice(this.i++,0,e),1==v.length&&s()),this}function c(){var e=f;return e.loader={load:u,i:0},e}var d,f,p=t.documentElement,h=e.setTimeout,g=t.getElementsByTagName("script")[0],m={}.toString,v=[],y=0,b="MozAppearance"in p.style,x=b&&!!t.createRange().compareNode,w=x?p:g.parentNode,p=e.opera&&"[object Opera]"==m.call(e.opera),p=!!t.attachEvent&&!p,_=b?"object":p?"script":"img",C=p?"script":_,k=Array.isArray||function(e){return"[object Array]"==m.call(e)},S=[],$={},M={timeout:function(e,t){return t.length&&(e.timeout=t[0]),e}};(f=function(e){function t(e){var t,n,r,e=e.split("!"),i=S.length,o=e.pop(),a=e.length,o={url:o,origUrl:o,prefixes:e};for(n=0;n<a;n++)r=e[n].split("="),(t=M[r.shift()])&&(o=t(o,r));for(n=0;n<i;n++)o=S[n](o);return o}function a(e,i,o,a,s){var l=t(e),u=l.autoCallback;l.url.split(".").pop().split("?").shift(),l.bypass||(i&&(i=r(i)?i:i[e]||i[a]||i[e.split("/").pop().split("?")[0]]),l.instead?l.instead(e,i,o,a,s):($[l.url]?l.noexec=!0:$[l.url]=1,o.load(l.url,l.forceCSS||!l.forceJS&&"css"==l.url.split(".").pop().split("?").shift()?"c":n,l.noexec,l.attrs,l.timeout),(r(i)||r(u))&&o.load(function(){c(),i&&i(l.origUrl,s,a),u&&u(l.origUrl,s,a),$[l.url]=2})))}function s(e,t){function n(e,n){if(e){if(i(e))n||(d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}),a(e,d,t,0,u);else if(Object(e)===e)for(l in s=function(){var t,n=0;for(t in e)e.hasOwnProperty(t)&&n++;return n}(),e)e.hasOwnProperty(l)&&(!n&&!--s&&(r(d)?d=function(){var e=[].slice.call(arguments);f.apply(this,e),p()}:d[l]=function(e){return function(){var t=[].slice.call(arguments);e&&e.apply(this,t),p()}}(f[l])),a(e[l],d,t,l,u))}else!n&&p()}var s,l,u=!!e.test,c=e.load||e.both,d=e.callback||o,f=d,p=e.complete||o;n(u?e.yep:e.nope,!!c),c&&n(c)}var l,u,d=this.yepnope.loader;if(i(e))a(e,0,d,0);else if(k(e))for(l=0;l<e.length;l++)u=e[l],i(u)?a(u,0,d,0):k(u)?f(u):Object(u)===u&&s(u,d);else Object(e)===e&&s(e,d)}).addPrefix=function(e,t){M[e]=t},f.addFilter=function(e){S.push(e)},f.errorTimeout=1e4,null==t.readyState&&t.addEventListener&&(t.readyState="loading",t.addEventListener("DOMContentLoaded",d=function(){t.removeEventListener("DOMContentLoaded",d,0),t.readyState="complete"},0)),e.yepnope=c(),e.yepnope.executeStack=s,e.yepnope.injectJs=function(e,n,r,i,l,u){var c,d,p=t.createElement("script"),i=i||f.errorTimeout;p.src=e;for(d in r)p.setAttribute(d,r[d]);n=u?s:n||o,p.onreadystatechange=p.onload=function(){!c&&a(p.readyState)&&(c=1,n(),p.onload=p.onreadystatechange=null)},h(function(){c||(c=1,n(1))},i),l?p.onload():g.parentNode.insertBefore(p,g)},e.yepnope.injectCss=function(e,n,r,i,a,l){var u,i=t.createElement("link"),n=l?s:n||o;i.href=e,i.rel="stylesheet",i.type="text/css";for(u in r)i.setAttribute(u,r[u]);a||(g.parentNode.insertBefore(i,g),h(n,0))}}(this,document),Modernizr.load=function(){yepnope.apply(window,[].slice.call(arguments,0))},function(){function e(e){return e&&(e.ownerDocument||e.document||e).documentElement}function t(e){return e&&(e.ownerDocument&&e.ownerDocument.defaultView||e.document&&e||e.defaultView)}function n(e,t){return e<t?-1:e>t?1:e>=t?0:NaN}function r(e){return null===e?NaN:+e}function i(e){return!isNaN(e)}function o(e){return{left:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)<0?r=o+1:i=o}return r},right:function(t,n,r,i){for(arguments.length<3&&(r=0),arguments.length<4&&(i=t.length);r<i;){var o=r+i>>>1;e(t[o],n)>0?i=o:r=o+1}return r}}}function a(e){return e.length}function s(e){for(var t=1;e*t%1;)t*=10;return t}function l(e,t){for(var n in t)Object.defineProperty(e.prototype,n,{value:t[n],enumerable:!1})}function u(){this._=Object.create(null)}function c(e){return(e+="")===ya||e[0]===ba?ba+e:e}function d(e){return(e+="")[0]===ba?e.slice(1):e}function f(e){return c(e)in this._}function p(e){return(e=c(e))in this._&&delete this._[e]}function h(){var e=[];for(var t in this._)e.push(d(t));return e}function g(){var e=0;for(var t in this._)++e;return e}function m(){for(var e in this._)return!1;return!0}function v(){this._=Object.create(null)}function y(e){return e}function b(e,t,n){return function(){var r=n.apply(t,arguments);return r===t?e:r}}function x(e,t){if(t in e)return t;t=t.charAt(0).toUpperCase()+t.slice(1);for(var n=0,r=xa.length;n<r;++n){var i=xa[n]+t;if(i in e)return i}}function w(){}function _(){}function C(e){function t(){for(var t,r=n,i=-1,o=r.length;++i<o;)(t=r[i].on)&&t.apply(this,arguments);return e}var n=[],r=new u;return t.on=function(t,i){var o,a=r.get(t);return arguments.length<2?a&&a.on:(a&&(a.on=null,n=n.slice(0,o=n.indexOf(a)).concat(n.slice(o+1)),r.remove(t)),i&&n.push(r.set(t,{on:i})),e)},t}function k(){sa.event.preventDefault()}function S(){for(var e,t=sa.event;e=t.sourceEvent;)t=e;return t}function $(e){for(var t=new _,n=0,r=arguments.length;++n<r;)t[arguments[n]]=C(t);return t.of=function(n,r){return function(i){try{var o=i.sourceEvent=sa.event;i.target=e,sa.event=i,t[i.type].apply(n,r)}finally{sa.event=o}}},t}function M(e){return _a(e,$a),e}function T(e){return"function"==typeof e?e:function(){return Ca(e,this)}}function D(e){return"function"==typeof e?e:function(){return ka(e,this)}}function E(e,t){function n(){this.removeAttribute(e)}function r(){this.removeAttributeNS(e.space,e.local)}function i(){this.setAttribute(e,t)}function o(){this.setAttributeNS(e.space,e.local,t)}function a(){var n=t.apply(this,arguments);null==n?this.removeAttribute(e):this.setAttribute(e,n)}function s(){var n=t.apply(this,arguments);null==n?this.removeAttributeNS(e.space,e.local):this.setAttributeNS(e.space,e.local,n)}return e=sa.ns.qualify(e),null==t?e.local?r:n:"function"==typeof t?e.local?s:a:e.local?o:i}function L(e){return e.trim().replace(/\s+/g," ")}function A(e){return new RegExp("(?:^|\\s+)"+sa.requote(e)+"(?:\\s+|$)","g")}function R(e){return(e+"").trim().split(/^|\s+/)}function P(e,t){function n(){for(var n=-1;++n<i;)e[n](this,t)}function r(){for(var n=-1,r=t.apply(this,arguments);++n<i;)e[n](this,r)}var i=(e=R(e).map(F)).length;return"function"==typeof t?r:n}function F(e){var t=A(e);return function(n,r){if(i=n.classList)return r?i.add(e):i.remove(e);var i=n.getAttribute("class")||"";r?(t.lastIndex=0,t.test(i)||n.setAttribute("class",L(i+" "+e))):n.setAttribute("class",L(i.replace(t," ")))}}function O(e,t,n){function r(){this.style.removeProperty(e)}function i(){this.style.setProperty(e,t,n)}function o(){var r=t.apply(this,arguments);null==r?this.style.removeProperty(e):this.style.setProperty(e,r,n)}return null==t?r:"function"==typeof t?o:i}function N(e,t){function n(){delete this[e]}function r(){this[e]=t}function i(){var n=t.apply(this,arguments);null==n?delete this[e]:this[e]=n}return null==t?n:"function"==typeof t?i:r}function I(e){function t(){var t=this.ownerDocument,n=this.namespaceURI;return n===Ma&&t.documentElement.namespaceURI===Ma?t.createElement(e):t.createElementNS(n,e)}function n(){return this.ownerDocument.createElementNS(e.space,e.local)}return"function"==typeof e?e:(e=sa.ns.qualify(e)).local?n:t}function j(){var e=this.parentNode;e&&e.removeChild(this)}function Y(e){return{__data__:e}}function z(e){return function(){return Sa(this,e)}}function H(e){return arguments.length||(e=n),function(t,n){return t&&n?e(t.__data__,n.__data__):!t-!n}}function V(e,t){for(var n=0,r=e.length;n<r;n++)for(var i,o=e[n],a=0,s=o.length;a<s;a++)(i=o[a])&&t(i,a,n);return e}function B(e){return _a(e,Da),e}function W(e){var t,n;return function(r,i,o){var a,s=e[o].update,l=s.length;for(o!=n&&(n=o,t=0),i>=t&&(t=i+1);!(a=s[t])&&++t<l;);return a}}function U(e,t,n){function r(){var t=this[a];t&&(this.removeEventListener(e,t,t.$),delete this[a])}function i(){var i=l(t,ua(arguments));r.call(this),this.addEventListener(e,this[a]=i,i.$=n),i._=t}function o(){var t,n=new RegExp("^__on([^.]+)"+sa.requote(e)+"$");for(var r in this)if(t=r.match(n)){var i=this[r];this.removeEventListener(t[1],i,i.$),delete this[r]}}var a="__on"+e,s=e.indexOf("."),l=G;s>0&&(e=e.slice(0,s));var u=Ea.get(e);return u&&(e=u,l=q),s?t?i:r:t?w:o}function G(e,t){return function(n){var r=sa.event;sa.event=n,t[0]=this.__data__;try{e.apply(this,t)}finally{sa.event=r}}}function q(e,t){var n=G(e,t);return function(e){var t=this,r=e.relatedTarget;r&&(r===t||8&r.compareDocumentPosition(t))||n.call(t,e)}}function K(n){var r=".dragsuppress-"+ ++Aa,i="click"+r,o=sa.select(t(n)).on("touchmove"+r,k).on("dragstart"+r,k).on("selectstart"+r,k);if(null==La&&(La=!("onselectstart"in n)&&x(n.style,"userSelect")),La){var a=e(n).style,s=a[La];a[La]="none"}return function(e){if(o.on(r,null),La&&(a[La]=s),e){var t=function(){o.on(i,null)};o.on(i,function(){k(),t()},!0),setTimeout(t,0)}}}function X(e,n){n.changedTouches&&(n=n.changedTouches[0]);var r=e.ownerSVGElement||e;if(r.createSVGPoint){var i=r.createSVGPoint();if(Ra<0){var o=t(e);if(o.scrollX||o.scrollY){var a=(r=sa.select("body").append("svg").style({position:"absolute",top:0,left:0,margin:0,padding:0,border:"none"},"important"))[0][0].getScreenCTM();Ra=!(a.f||a.e),r.remove()}}return Ra?(i.x=n.pageX,i.y=n.pageY):(i.x=n.clientX,i.y=n.clientY),i=i.matrixTransform(e.getScreenCTM().inverse()),[i.x,i.y]}var s=e.getBoundingClientRect();return[n.clientX-s.left-e.clientLeft,n.clientY-s.top-e.clientTop]}function J(){return sa.event.changedTouches[0].identifier}function Z(e){return e>0?1:e<0?-1:0}function Q(e,t,n){return(t[0]-e[0])*(n[1]-e[1])-(t[1]-e[1])*(n[0]-e[0])}function ee(e){return e>1?0:e<-1?Oa:Math.acos(e)}function te(e){return e>1?ja:e<-1?-ja:Math.asin(e)}function ne(e){return((e=Math.exp(e))-1/e)/2}function re(e){return((e=Math.exp(e))+1/e)/2}function ie(e){return((e=Math.exp(2*e))-1)/(e+1)}function oe(e){return(e=Math.sin(e/2))*e}function ae(){}function se(e,t,n){return this instanceof se?(this.h=+e,this.s=+t,void(this.l=+n)):arguments.length<2?e instanceof se?new se(e.h,e.s,e.l):we(""+e,_e,se):new se(e,t,n)}function le(e,t,n){function r(e){return e>360?e-=360:e<0&&(e+=360),e<60?o+(a-o)*e/60:e<180?a:e<240?o+(a-o)*(240-e)/60:o}function i(e){return Math.round(255*r(e))}var o,a;return e=isNaN(e)?0:(e%=360)<0?e+360:e,t=isNaN(t)?0:t<0?0:t>1?1:t,n=n<0?0:n>1?1:n,a=n<=.5?n*(1+t):n+t-n*t,o=2*n-a,new ve(i(e+120),i(e),i(e-120))}function ue(e,t,n){return this instanceof ue?(this.h=+e,this.c=+t,void(this.l=+n)):arguments.length<2?e instanceof ue?new ue(e.h,e.c,e.l):e instanceof de?pe(e.l,e.a,e.b):pe((e=Ce((e=sa.rgb(e)).r,e.g,e.b)).l,e.a,e.b):new ue(e,t,n)}function ce(e,t,n){return isNaN(e)&&(e=0),isNaN(t)&&(t=0),new de(n,Math.cos(e*=Ya)*t,Math.sin(e)*t)}function de(e,t,n){return this instanceof de?(this.l=+e,this.a=+t,void(this.b=+n)):arguments.length<2?e instanceof de?new de(e.l,e.a,e.b):e instanceof ue?ce(e.h,e.c,e.l):Ce((e=ve(e)).r,e.g,e.b):new de(e,t,n)}function fe(e,t,n){var r=(e+16)/116,i=r+t/500,o=r-n/200;return i=he(i)*Ka,r=he(r)*Xa,o=he(o)*Ja,new ve(me(3.2404542*i-1.5371385*r-.4985314*o),me(-.969266*i+1.8760108*r+.041556*o),me(.0556434*i-.2040259*r+1.0572252*o))}function pe(e,t,n){return e>0?new ue(Math.atan2(n,t)*za,Math.sqrt(t*t+n*n),e):new ue(NaN,NaN,e)}function he(e){return e>.206893034?e*e*e:(e-4/29)/7.787037}function ge(e){return e>.008856?Math.pow(e,1/3):7.787037*e+4/29}function me(e){return Math.round(255*(e<=.00304?12.92*e:1.055*Math.pow(e,1/2.4)-.055))}function ve(e,t,n){return this instanceof ve?(this.r=~~e,this.g=~~t,void(this.b=~~n)):arguments.length<2?e instanceof ve?new ve(e.r,e.g,e.b):we(""+e,ve,le):new ve(e,t,n)}function ye(e){return new ve(e>>16,e>>8&255,255&e)}function be(e){return ye(e)+""}function xe(e){return e<16?"0"+Math.max(0,e).toString(16):Math.min(255,e).toString(16)}function we(e,t,n){var r,i,o,a=0,s=0,l=0;if(r=/([a-z]+)\((.*)\)/.exec(e=e.toLowerCase()))switch(i=r[2].split(","),r[1]){case"hsl":return n(parseFloat(i[0]),parseFloat(i[1])/100,parseFloat(i[2])/100);case"rgb":return t(Se(i[0]),Se(i[1]),Se(i[2]))}return(o=es.get(e))?t(o.r,o.g,o.b):(null==e||"#"!==e.charAt(0)||isNaN(o=parseInt(e.slice(1),16))||(4===e.length?(a=(3840&o)>>4,a|=a>>4,s=240&o,s|=s>>4,l=15&o,l|=l<<4):7===e.length&&(a=(16711680&o)>>16,s=(65280&o)>>8,l=255&o)),t(a,s,l))}function _e(e,t,n){var r,i,o=Math.min(e/=255,t/=255,n/=255),a=Math.max(e,t,n),s=a-o,l=(a+o)/2;return s?(i=l<.5?s/(a+o):s/(2-a-o),r=e==a?(t-n)/s+(t<n?6:0):t==a?(n-e)/s+2:(e-t)/s+4,r*=60):(r=NaN,i=l>0&&l<1?0:r),new se(r,i,l)}function Ce(e,t,n){var r=ge((.4124564*(e=ke(e))+.3575761*(t=ke(t))+.1804375*(n=ke(n)))/Ka),i=ge((.2126729*e+.7151522*t+.072175*n)/Xa);return de(116*i-16,500*(r-i),200*(i-ge((.0193339*e+.119192*t+.9503041*n)/Ja)))}function ke(e){return(e/=255)<=.04045?e/12.92:Math.pow((e+.055)/1.055,2.4)}function Se(e){var t=parseFloat(e);return"%"===e.charAt(e.length-1)?Math.round(2.55*t):t}function $e(e){return"function"==typeof e?e:function(){return e}}function Me(e){return function(t,n,r){return 2===arguments.length&&"function"==typeof n&&(r=n,n=null),Te(t,n,e,r)}}function Te(e,t,n,r){function i(){var e,t=l.status;if(!t&&Ee(l)||t>=200&&t<300||304===t){try{e=n.call(o,l)}catch(e){return void a.error.call(o,e)}a.load.call(o,e)}else a.error.call(o,l)}var o={},a=sa.dispatch("beforesend","progress","load","error"),s={},l=new XMLHttpRequest,u=null;return!this.XDomainRequest||"withCredentials"in l||!/^(http(s)?:)?\/\//.test(e)||(l=new XDomainRequest),"onload"in l?l.onload=l.onerror=i:l.onreadystatechange=function(){l.readyState>3&&i()},l.onprogress=function(e){var t=sa.event;sa.event=e;try{a.progress.call(o,l)}finally{sa.event=t}},o.header=function(e,t){return e=(e+"").toLowerCase(),arguments.length<2?s[e]:(null==t?delete s[e]:s[e]=t+"",o)},o.mimeType=function(e){return arguments.length?(t=null==e?null:e+"",o):t},o.responseType=function(e){return arguments.length?(u=e,o):u},o.response=function(e){return n=e,o},["get","post"].forEach(function(e){o[e]=function(){return o.send.apply(o,[e].concat(ua(arguments)))}}),o.send=function(n,r,i){if(2===arguments.length&&"function"==typeof r&&(i=r,r=null),l.open(n,e,!0),null==t||"accept"in s||(s.accept=t+",*/*"),l.setRequestHeader)for(var c in s)l.setRequestHeader(c,s[c]);return null!=t&&l.overrideMimeType&&l.overrideMimeType(t),null!=u&&(l.responseType=u),null!=i&&o.on("error",i).on("load",function(e){i(null,e)}),a.beforesend.call(o,l),l.send(null==r?null:r),o},o.abort=function(){return l.abort(),o},sa.rebind(o,a,"on"),null==r?o:o.get(De(r))}function De(e){return 1===e.length?function(t,n){e(null==t?n:null)}:e}function Ee(e){var t=e.responseType;return t&&"text"!==t?e.response:e.responseText}function Le(e,t,n){var r=arguments.length;r<2&&(t=0),r<3&&(n=Date.now());var i={c:e,t:n+t,n:null};return ns?ns.n=i:ts=i,ns=i,rs||(is=clearTimeout(is),rs=1,os(Ae)),i}function Ae(){var e=Re(),t=Pe()-e;t>24?(isFinite(t)&&(clearTimeout(is),is=setTimeout(Ae,t)),rs=0):(rs=1,os(Ae))}function Re(){for(var e=Date.now(),t=ts;t;)e>=t.t&&t.c(e-t.t)&&(t.c=null),t=t.n;return e}function Pe(){for(var e,t=ts,n=1/0;t;)t.c?(t.t<n&&(n=t.t),t=(e=t).n):t=e?e.n=t.n:ts=t.n;return ns=e,n}function Fe(e,t){return t-(e?Math.ceil(Math.log(e)/Math.LN10):1)}function Oe(e,t){var n=Math.pow(10,3*va(8-t));return{scale:t>8?function(e){return e/n}:function(e){return e*n},symbol:e}}function Ne(e){var t=e.decimal,n=e.thousands,r=e.grouping,i=e.currency,o=r&&n?function(e,t){for(var i=e.length,o=[],a=0,s=r[0],l=0;i>0&&s>0&&(l+s+1>t&&(s=Math.max(1,t-l)),o.push(e.substring(i-=s,i+s)),!((l+=s+1)>t));)s=r[a=(a+1)%r.length];return o.reverse().join(n)}:y;return function(e){var n=ss.exec(e),r=n[1]||" ",a=n[2]||">",s=n[3]||"-",l=n[4]||"",u=n[5],c=+n[6],d=n[7],f=n[8],p=n[9],h=1,g="",m="",v=!1,y=!0;switch(f&&(f=+f.substring(1)),(u||"0"===r&&"="===a)&&(u=r="0",a="="),p){case"n":d=!0,p="g";break;case"%":h=100,m="%",p="f";break;case"p":h=100,m="%",p="r";break;case"b":case"o":case"x":case"X":"#"===l&&(g="0"+p.toLowerCase());case"c":y=!1;case"d":v=!0,f=0;break;case"s":h=-1,p="r"}"$"===l&&(g=i[0],m=i[1]),"r"!=p||f||(p="g"),null!=f&&("g"==p?f=Math.max(1,Math.min(21,f)):"e"!=p&&"f"!=p||(f=Math.max(0,Math.min(20,f)))),p=ls.get(p)||Ie;var b=u&&d;return function(e){var n=m;if(v&&e%1)return"";var i=e<0||0===e&&1/e<0?(e=-e,"-"):"-"===s?"":s;if(h<0){var l=sa.formatPrefix(e,f);e=l.scale(e),n=l.symbol+m}else e*=h;var x,w,_=(e=p(e,f)).lastIndexOf(".");if(_<0){var C=y?e.lastIndexOf("e"):-1;C<0?(x=e,w=""):(x=e.substring(0,C),w=e.substring(C))}else x=e.substring(0,_),w=t+e.substring(_+1);!u&&d&&(x=o(x,1/0));var k=g.length+x.length+w.length+(b?0:i.length),S=k<c?new Array(k=c-k+1).join(r):"";return b&&(x=o(S+x,S.length?c-w.length:1/0)),i+=g,e=x+w,("<"===a?i+e+S:">"===a?S+i+e:"^"===a?S.substring(0,k>>=1)+i+e+S.substring(k):i+(b?e:S+e))+n}}}function Ie(e){return e+""}function je(){this._=new Date(arguments.length>1?Date.UTC.apply(this,arguments):arguments[0])}function Ye(e,t,n){function r(t){var n=e(t),r=o(n,1);return t-n<r-t?n:r}function i(n){return t(n=e(new cs(n-1)),1),n}function o(e,n){return t(e=new cs(+e),n),e}function a(e,r,o){var a=i(e),s=[];if(o>1)for(;a<r;)n(a)%o||s.push(new Date(+a)),t(a,1);else for(;a<r;)s.push(new Date(+a)),t(a,1);return s}function s(e,t,n){try{cs=je;var r=new je;return r._=e,a(r,t,n)}finally{cs=Date}}e.floor=e,e.round=r,e.ceil=i,e.offset=o,e.range=a;var l=e.utc=ze(e);return l.floor=l,l.round=ze(r),l.ceil=ze(i),l.offset=ze(o),l.range=s,e}function ze(e){return function(t,n){try{cs=je;var r=new je;return r._=t,e(r,n)._}finally{cs=Date}}}function He(e){function t(e){function t(t){for(var n,i,o,a=[],s=-1,l=0;++s<r;)37===e.charCodeAt(s)&&(a.push(e.slice(l,s)),null!=(i=fs[n=e.charAt(++s)])&&(n=e.charAt(++s)),(o=T[n])&&(n=o(t,null==i?"e"===n?" ":"0":i)),a.push(n),l=s+1);return a.push(e.slice(l,s)),a.join("")}var r=e.length;return t.parse=function(t){var r={y:1900,m:0,d:1,H:0,M:0,S:0,L:0,Z:null};if(n(r,e,t,0)!=t.length)return null;"p"in r&&(r.H=r.H%12+12*r.p);var i=null!=r.Z&&cs!==je,o=new(i?je:cs);return"j"in r?o.setFullYear(r.y,0,r.j):"W"in r||"U"in r?("w"in r||(r.w="W"in r?1:0),o.setFullYear(r.y,0,1),o.setFullYear(r.y,0,"W"in r?(r.w+6)%7+7*r.W-(o.getDay()+5)%7:r.w+7*r.U-(o.getDay()+6)%7)):o.setFullYear(r.y,r.m,r.d),o.setHours(r.H+(r.Z/100|0),r.M+r.Z%100,r.S,r.L),i?o._:o},t.toString=function(){return e},t}function n(e,t,n,r){for(var i,o,a,s=0,l=t.length,u=n.length;s<l;){if(r>=u)return-1;if(37===(i=t.charCodeAt(s++))){if(a=t.charAt(s++),!(o=D[a in fs?t.charAt(s++):a])||(r=o(e,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function r(e,t,n){_.lastIndex=0;var r=_.exec(t.slice(n));return r?(e.w=C.get(r[0].toLowerCase()),n+r[0].length):-1}function i(e,t,n){x.lastIndex=0;var r=x.exec(t.slice(n));return r?(e.w=w.get(r[0].toLowerCase()),n+r[0].length):-1}function o(e,t,n){$.lastIndex=0;var r=$.exec(t.slice(n));return r?(e.m=M.get(r[0].toLowerCase()),n+r[0].length):-1}function a(e,t,n){k.lastIndex=0;var r=k.exec(t.slice(n));return r?(e.m=S.get(r[0].toLowerCase()),n+r[0].length):-1}function s(e,t,r){return n(e,T.c.toString(),t,r)}function l(e,t,r){return n(e,T.x.toString(),t,r)}function u(e,t,r){return n(e,T.X.toString(),t,r)}function c(e,t,n){var r=b.get(t.slice(n,n+=2).toLowerCase());return null==r?-1:(e.p=r,n)}var d=e.dateTime,f=e.date,p=e.time,h=e.periods,g=e.days,m=e.shortDays,v=e.months,y=e.shortMonths;t.utc=function(e){function n(e){try{var t=new(cs=je);return t._=e,r(t)}finally{cs=Date}}var r=t(e);return n.parse=function(e){try{cs=je;var t=r.parse(e);return t&&t._}finally{cs=Date}},n.toString=r.toString,n},t.multi=t.utc.multi=lt;var b=sa.map(),x=Be(g),w=We(g),_=Be(m),C=We(m),k=Be(v),S=We(v),$=Be(y),M=We(y);h.forEach(function(e,t){b.set(e.toLowerCase(),t)});var T={a:function(e){return m[e.getDay()]},A:function(e){return g[e.getDay()]},b:function(e){return y[e.getMonth()]},B:function(e){return v[e.getMonth()]},c:t(d),d:function(e,t){return Ve(e.getDate(),t,2)},e:function(e,t){return Ve(e.getDate(),t,2)},H:function(e,t){return Ve(e.getHours(),t,2)},I:function(e,t){return Ve(e.getHours()%12||12,t,2)},j:function(e,t){return Ve(1+us.dayOfYear(e),t,3)},L:function(e,t){return Ve(e.getMilliseconds(),t,3)},m:function(e,t){return Ve(e.getMonth()+1,t,2)},M:function(e,t){return Ve(e.getMinutes(),t,2)},p:function(e){return h[+(e.getHours()>=12)]},S:function(e,t){return Ve(e.getSeconds(),t,2)},U:function(e,t){return Ve(us.sundayOfYear(e),t,2)},w:function(e){return e.getDay()},W:function(e,t){return Ve(us.mondayOfYear(e),t,2)},x:t(f),X:t(p),y:function(e,t){return Ve(e.getFullYear()%100,t,2)},Y:function(e,t){return Ve(e.getFullYear()%1e4,t,4)},Z:at,"%":function(){return"%"}},D={a:r,A:i,b:o,B:a,c:s,d:et,e:et,H:nt,I:nt,j:tt,L:ot,m:Qe,M:rt,p:c,S:it,U:Ge,w:Ue,W:qe,x:l,X:u,y:Xe,Y:Ke,Z:Je,"%":st};return t}function Ve(e,t,n){var r=e<0?"-":"",i=(r?-e:e)+"",o=i.length;return r+(o<n?new Array(n-o+1).join(t)+i:i)}function Be(e){return new RegExp("^(?:"+e.map(sa.requote).join("|")+")","i")}function We(e){for(var t=new u,n=-1,r=e.length;++n<r;)t.set(e[n].toLowerCase(),n);return t}function Ue(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+1));return r?(e.w=+r[0],n+r[0].length):-1}function Ge(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n));return r?(e.U=+r[0],n+r[0].length):-1}function qe(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n));return r?(e.W=+r[0],n+r[0].length):-1}function Ke(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+4));return r?(e.y=+r[0],n+r[0].length):-1}function Xe(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.y=Ze(+r[0]),n+r[0].length):-1}function Je(e,t,n){return/^[+-]\d{4}$/.test(t=t.slice(n,n+5))?(e.Z=-t,n+5):-1}function Ze(e){return e+(e>68?1900:2e3)}function Qe(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.m=r[0]-1,n+r[0].length):-1}function et(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.d=+r[0],n+r[0].length):-1}function tt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+3));return r?(e.j=+r[0],n+r[0].length):-1}function nt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.H=+r[0],n+r[0].length):-1}function rt(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.M=+r[0],n+r[0].length):-1}function it(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+2));return r?(e.S=+r[0],n+r[0].length):-1}function ot(e,t,n){ps.lastIndex=0;var r=ps.exec(t.slice(n,n+3));return r?(e.L=+r[0],n+r[0].length):-1}function at(e){var t=e.getTimezoneOffset(),n=t>0?"-":"+",r=va(t)/60|0,i=va(t)%60;return n+Ve(r,"0",2)+Ve(i,"0",2)}function st(e,t,n){hs.lastIndex=0;var r=hs.exec(t.slice(n,n+1));return r?n+r[0].length:-1}function lt(e){for(var t=e.length,n=-1;++n<t;)e[n][0]=this(e[n][0]);return function(t){for(var n=0,r=e[n];!r[1](t);)r=e[++n];return r[0](t)}}function ut(){}function ct(e,t,n){var r=n.s=e+t,i=r-e,o=r-i;n.t=e-o+(t-i)}function dt(e,t){e&&ys.hasOwnProperty(e.type)&&ys[e.type](e,t)}function ft(e,t,n){var r,i=-1,o=e.length-n;for(t.lineStart();++i<o;)r=e[i],t.point(r[0],r[1],r[2]);t.lineEnd()}function pt(e,t){var n=-1,r=e.length;for(t.polygonStart();++n<r;)ft(e[n],t,1);t.polygonEnd()}function ht(){function e(e,t){t=t*Ya/2+Oa/4;var n=(e*=Ya)-r,a=n>=0?1:-1,s=a*n,l=Math.cos(t),u=Math.sin(t),c=o*u,d=i*l+c*Math.cos(s),f=c*a*Math.sin(s);xs.add(Math.atan2(f,d)),r=e,i=l,o=u}var t,n,r,i,o;ws.point=function(a,s){ws.point=e,r=(t=a)*Ya,i=Math.cos(s=(n=s)*Ya/2+Oa/4),o=Math.sin(s)},ws.lineEnd=function(){e(t,n)}}function gt(e){var t=e[0],n=e[1],r=Math.cos(n);return[r*Math.cos(t),r*Math.sin(t),Math.sin(n)]}function mt(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]}function vt(e,t){return[e[1]*t[2]-e[2]*t[1],e[2]*t[0]-e[0]*t[2],e[0]*t[1]-e[1]*t[0]]}function yt(e,t){e[0]+=t[0],e[1]+=t[1],e[2]+=t[2]}function bt(e,t){return[e[0]*t,e[1]*t,e[2]*t]}function xt(e){var t=Math.sqrt(e[0]*e[0]+e[1]*e[1]+e[2]*e[2]);e[0]/=t,e[1]/=t,e[2]/=t}function wt(e){return[Math.atan2(e[1],e[0]),te(e[2])]}function _t(e,t){return va(e[0]-t[0])<Pa&&va(e[1]-t[1])<Pa}function Ct(e,t){e*=Ya;var n=Math.cos(t*=Ya);kt(n*Math.cos(e),n*Math.sin(e),Math.sin(t))}function kt(e,t,n){ks+=(e-ks)/++_s,Ss+=(t-Ss)/_s,$s+=(n-$s)/_s}function St(){function e(e,i){e*=Ya;var o=Math.cos(i*=Ya),a=o*Math.cos(e),s=o*Math.sin(e),l=Math.sin(i),u=Math.atan2(Math.sqrt((u=n*l-r*s)*u+(u=r*a-t*l)*u+(u=t*s-n*a)*u),t*a+n*s+r*l);Cs+=u,Ms+=u*(t+(t=a)),Ts+=u*(n+(n=s)),Ds+=u*(r+(r=l)),kt(t,n,r)}var t,n,r;Rs.point=function(i,o){i*=Ya;var a=Math.cos(o*=Ya);t=a*Math.cos(i),n=a*Math.sin(i),r=Math.sin(o),Rs.point=e,kt(t,n,r)}}function $t(){Rs.point=Ct}function Mt(){function e(e,t){e*=Ya;var n=Math.cos(t*=Ya),a=n*Math.cos(e),s=n*Math.sin(e),l=Math.sin(t),u=i*l-o*s,c=o*a-r*l,d=r*s-i*a,f=Math.sqrt(u*u+c*c+d*d),p=r*a+i*s+o*l,h=f&&-ee(p)/f,g=Math.atan2(f,p);Es+=h*u,Ls+=h*c,As+=h*d,Cs+=g,Ms+=g*(r+(r=a)),Ts+=g*(i+(i=s)),Ds+=g*(o+(o=l)),kt(r,i,o)}var t,n,r,i,o;Rs.point=function(a,s){t=a,n=s,Rs.point=e,a*=Ya;var l=Math.cos(s*=Ya);r=l*Math.cos(a),i=l*Math.sin(a),o=Math.sin(s),kt(r,i,o)},Rs.lineEnd=function(){e(t,n),Rs.lineEnd=$t,Rs.point=Ct}}function Tt(e,t){function n(n,r){return n=e(n,r),t(n[0],n[1])}return e.invert&&t.invert&&(n.invert=function(n,r){return(n=t.invert(n,r))&&e.invert(n[0],n[1])}),n}function Dt(){return!0}function Et(e,t,n,r,i){var o=[],a=[];if(e.forEach(function(e){if(!((t=e.length-1)<=0)){var t,n=e[0],r=e[t];if(_t(n,r)){i.lineStart();for(var s=0;s<t;++s)i.point((n=e[s])[0],n[1]);i.lineEnd()}else{var l=new At(n,e,null,!0),u=new At(n,null,l,!1);l.o=u,o.push(l),a.push(u),u=new At(r,null,l=new At(r,e,null,!1),!0),l.o=u,o.push(l),a.push(u)}}}),a.sort(t),Lt(o),Lt(a),o.length){for(var s=0,l=n,u=a.length;s<u;++s)a[s].e=l=!l;for(var c,d,f=o[0];;){for(var p=f,h=!0;p.v;)if((p=p.n)===f)return;c=p.z,i.lineStart();do{if(p.v=p.o.v=!0,p.e){if(h)for(var s=0,u=c.length;s<u;++s)i.point((d=c[s])[0],d[1]);else r(p.x,p.n.x,1,i);p=p.n}else{if(h)for(s=(c=p.p.z).length-1;s>=0;--s)i.point((d=c[s])[0],d[1]);else r(p.x,p.p.x,-1,i);p=p.p}c=(p=p.o).z,h=!h}while(!p.v);i.lineEnd()}}}function Lt(e){if(t=e.length){for(var t,n,r=0,i=e[0];++r<t;)i.n=n=e[r],n.p=i,i=n;i.n=n=e[0],n.p=i}}function At(e,t,n,r){this.x=e,this.z=t,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function Rt(e,t,n,r){return function(i,o){function a(t,n){var r=i(t,n);e(t=r[0],n=r[1])&&o.point(t,n)}function s(e,t){var n=i(e,t);m.point(n[0],n[1])}function l(){y.point=s,m.lineStart()}function u(){y.point=a,m.lineEnd()}function c(e,t){g.push([e,t]);var n=i(e,t);x.point(n[0],n[1])}function d(){x.lineStart(),g=[]}function f(){c(g[0][0],g[0][1]),x.lineEnd();var e,t=x.clean(),n=b.buffer(),r=n.length;if(g.pop(),h.push(g),g=null,r)if(1&t){var i,a=-1;if((r=(e=n[0]).length-1)>0){for(w||(o.polygonStart(),w=!0),o.lineStart();++a<r;)o.point((i=e[a])[0],i[1]);o.lineEnd()}}else r>1&&2&t&&n.push(n.pop().concat(n.shift())),p.push(n.filter(Pt))}var p,h,g,m=t(o),v=i.invert(r[0],r[1]),y={point:a,lineStart:l,lineEnd:u,polygonStart:function(){y.point=c,y.lineStart=d,y.lineEnd=f,p=[],h=[]},polygonEnd:function(){y.point=a,y.lineStart=l,y.lineEnd=u,p=sa.merge(p);var e=Yt(v,h);p.length?(w||(o.polygonStart(),w=!0),Et(p,Ot,e,n,o)):e&&(w||(o.polygonStart(),w=!0),o.lineStart(),n(null,null,1,o),o.lineEnd()),w&&(o.polygonEnd(),w=!1),p=h=null},sphere:function(){o.polygonStart(),o.lineStart(),n(null,null,1,o),o.lineEnd(),o.polygonEnd()}},b=Ft(),x=t(b),w=!1;return y}}function Pt(e){return e.length>1}function Ft(){var e,t=[];return{lineStart:function(){t.push(e=[])},point:function(t,n){e.push([t,n])},lineEnd:w,buffer:function(){var n=t;return t=[],e=null,n},rejoin:function(){t.length>1&&t.push(t.pop().concat(t.shift()))}}}function Ot(e,t){return((e=e.x)[0]<0?e[1]-ja-Pa:ja-e[1])-((t=t.x)[0]<0?t[1]-ja-Pa:ja-t[1])}function Nt(e){var t,n=NaN,r=NaN,i=NaN;return{lineStart:function(){e.lineStart(),t=1},point:function(o,a){var s=o>0?Oa:-Oa,l=va(o-n);va(l-Oa)<Pa?(e.point(n,r=(r+a)/2>0?ja:-ja),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),e.point(o,r),t=0):i!==s&&l>=Oa&&(va(n-i)<Pa&&(n-=i*Pa),va(o-s)<Pa&&(o-=s*Pa),r=It(n,r,o,a),e.point(i,r),e.lineEnd(),e.lineStart(),e.point(s,r),t=0),e.point(n=o,r=a),i=s},lineEnd:function(){e.lineEnd(),n=r=NaN},clean:function(){return 2-t}}}function It(e,t,n,r){var i,o,a=Math.sin(e-n);return va(a)>Pa?Math.atan((Math.sin(t)*(o=Math.cos(r))*Math.sin(n)-Math.sin(r)*(i=Math.cos(t))*Math.sin(e))/(i*o*a)):(t+r)/2}function jt(e,t,n,r){var i;if(null==e)i=n*ja,r.point(-Oa,i),r.point(0,i),r.point(Oa,i),r.point(Oa,0),r.point(Oa,-i),r.point(0,-i),r.point(-Oa,-i),r.point(-Oa,0),r.point(-Oa,i);else if(va(e[0]-t[0])>Pa){var o=e[0]<t[0]?Oa:-Oa;i=n*o/2,r.point(-o,i),r.point(0,i),r.point(o,i)}else r.point(t[0],t[1])}function Yt(e,t){var n=e[0],r=e[1],i=[Math.sin(n),-Math.cos(n),0],o=0,a=0;xs.reset();for(var s=0,l=t.length;s<l;++s){var u=t[s],c=u.length;if(c)for(var d=u[0],f=d[0],p=d[1]/2+Oa/4,h=Math.sin(p),g=Math.cos(p),m=1;;){m===c&&(m=0);var v=(e=u[m])[0],y=e[1]/2+Oa/4,b=Math.sin(y),x=Math.cos(y),w=v-f,_=w>=0?1:-1,C=_*w,k=C>Oa,S=h*b;if(xs.add(Math.atan2(S*_*Math.sin(C),g*x+S*Math.cos(C))),o+=k?w+_*Na:w,k^f>=n^v>=n){var $=vt(gt(d),gt(e));xt($);var M=vt(i,$);xt(M);var T=(k^w>=0?-1:1)*te(M[2]);(r>T||r===T&&($[0]||$[1]))&&(a+=k^w>=0?1:-1)}if(!m++)break;f=v,h=b,g=x,d=e}}return(o<-Pa||o<Pa&&xs<-Pa)^1&a}function zt(e){function t(e,t){return Math.cos(e)*Math.cos(t)>o}function n(e){var n,o,l,u,c;return{lineStart:function(){u=l=!1,c=1},point:function(d,f){var p,h=[d,f],g=t(d,f),m=a?g?0:i(d,f):g?i(d+(d<0?Oa:-Oa),f):0;if(!n&&(u=l=g)&&e.lineStart(),g!==l&&(p=r(n,h),(_t(n,p)||_t(h,p))&&(h[0]+=Pa,h[1]+=Pa,g=t(h[0],h[1]))),g!==l)c=0,g?(e.lineStart(),p=r(h,n),e.point(p[0],p[1])):(p=r(n,h),e.point(p[0],p[1]),e.lineEnd()),n=p;else if(s&&n&&a^g){var v;m&o||!(v=r(h,n,!0))||(c=0,a?(e.lineStart(),e.point(v[0][0],v[0][1]),e.point(v[1][0],v[1][1]),e.lineEnd()):(e.point(v[1][0],v[1][1]),e.lineEnd(),e.lineStart(),e.point(v[0][0],v[0][1])))}!g||n&&_t(n,h)||e.point(h[0],h[1]),n=h,l=g,o=m},lineEnd:function(){l&&e.lineEnd(),n=null},clean:function(){return c|(u&&l)<<1}}}function r(e,t,n){var r=[1,0,0],i=vt(gt(e),gt(t)),a=mt(i,i),s=i[0],l=a-s*s;if(!l)return!n&&e;var u=o*a/l,c=-o*s/l,d=vt(r,i),f=bt(r,u);yt(f,bt(i,c));var p=d,h=mt(f,p),g=mt(p,p),m=h*h-g*(mt(f,f)-1);if(!(m<0)){var v=Math.sqrt(m),y=bt(p,(-h-v)/g);if(yt(y,f),y=wt(y),!n)return y;var b,x=e[0],w=t[0],_=e[1],C=t[1];w<x&&(b=x,x=w,w=b);var k=w-x,S=va(k-Oa)<Pa,$=S||k<Pa;if(!S&&C<_&&(b=_,_=C,C=b),$?S?_+C>0^y[1]<(va(y[0]-x)<Pa?_:C):_<=y[1]&&y[1]<=C:k>Oa^(x<=y[0]&&y[0]<=w)){var M=bt(p,(-h+v)/g);return yt(M,f),[y,wt(M)]}}}function i(t,n){var r=a?e:Oa-e,i=0;return t<-r?i|=1:t>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var o=Math.cos(e),a=o>0,s=va(o)>Pa;return Rt(t,n,gn(e,6*Ya),a?[0,-e]:[-Oa,e-Oa])}function Ht(e,t,n,r){return function(i){var o,a=i.a,s=i.b,l=a.x,u=a.y,c=0,d=1,f=s.x-l,p=s.y-u;if(o=e-l,f||!(o>0)){if(o/=f,f<0){if(o<c)return;o<d&&(d=o)}else if(f>0){if(o>d)return;o>c&&(c=o)}if(o=n-l,f||!(o<0)){if(o/=f,f<0){if(o>d)return;o>c&&(c=o)}else if(f>0){if(o<c)return;o<d&&(d=o)}if(o=t-u,p||!(o>0)){if(o/=p,p<0){if(o<c)return;o<d&&(d=o)}else if(p>0){if(o>d)return;o>c&&(c=o)}if(o=r-u,p||!(o<0)){if(o/=p,p<0){if(o>d)return;o>c&&(c=o)}else if(p>0){if(o<c)return;o<d&&(d=o)}return c>0&&(i.a={x:l+c*f,y:u+c*p}),d<1&&(i.b={x:l+d*f,y:u+d*p}),i}}}}}}function Vt(e,t,n,r){function i(r,i){return va(r[0]-e)<Pa?i>0?0:3:va(r[0]-n)<Pa?i>0?2:1:va(r[1]-t)<Pa?i>0?1:0:i>0?3:2}function o(e,t){return a(e.x,t.x)}function a(e,t){var n=i(e,1),r=i(t,1);return n!==r?n-r:0===n?t[1]-e[1]:1===n?e[0]-t[0]:2===n?e[1]-t[1]:t[0]-e[0]}return function(s){function l(e){for(var t=0,n=m.length,r=e[1],i=0;i<n;++i)for(var o,a=1,s=m[i],l=s.length,u=s[0];a<l;++a)o=s[a],u[1]<=r?o[1]>r&&Q(u,o,e)>0&&++t:o[1]<=r&&Q(u,o,e)<0&&--t,u=o;return 0!==t}function u(o,s,l,u){var c=0,d=0;if(null==o||(c=i(o,l))!==(d=i(s,l))||a(o,s)<0^l>0)do{u.point(0===c||3===c?e:n,c>1?r:t)}while((c=(c+l+4)%4)!==d);else u.point(s[0],s[1])}function c(i,o){return e<=i&&i<=n&&t<=o&&o<=r}function d(e,t){c(e,t)&&s.point(e,t)}function f(){D.point=h,m&&m.push(v=[]),k=!0,C=!1,w=_=NaN}function p(){g&&(h(y,b),x&&C&&M.rejoin(),g.push(M.buffer())),D.point=d,C&&s.lineEnd()}function h(e,t){var n=c(e=Math.max(-Fs,Math.min(Fs,e)),t=Math.max(-Fs,Math.min(Fs,t)));if(m&&v.push([e,t]),k)y=e,b=t,x=n,k=!1,n&&(s.lineStart(),s.point(e,t));else if(n&&C)s.point(e,t);else{var r={a:{x:w,y:_},b:{x:e,y:t}};T(r)?(C||(s.lineStart(),s.point(r.a.x,r.a.y)),s.point(r.b.x,r.b.y),n||s.lineEnd(),S=!1):n&&(s.lineStart(),s.point(e,t),S=!1)}w=e,_=t,C=n}var g,m,v,y,b,x,w,_,C,k,S,$=s,M=Ft(),T=Ht(e,t,n,r),D={point:d,lineStart:f,lineEnd:p,polygonStart:function(){s=M,g=[],m=[],S=!0},polygonEnd:function(){s=$,g=sa.merge(g);var t=l([e,r]),n=S&&t,i=g.length;(n||i)&&(s.polygonStart(),n&&(s.lineStart(),u(null,null,1,s),s.lineEnd()),i&&Et(g,o,t,u,s),s.polygonEnd()),g=m=v=null}};return D}}function Bt(e){var t=0,n=Oa/3,r=sn(e),i=r(t,n);return i.parallels=function(e){return arguments.length?r(t=e[0]*Oa/180,n=e[1]*Oa/180):[t/Oa*180,n/Oa*180]},i}function Wt(e,t){function n(e,t){var n=Math.sqrt(o-2*i*Math.sin(t))/i;return[n*Math.sin(e*=i),a-n*Math.cos(e)]}var r=Math.sin(e),i=(r+Math.sin(t))/2,o=1+r*(2*i-r),a=Math.sqrt(o)/i;return n.invert=function(e,t){var n=a-t;return[Math.atan2(e,n)/i,te((o-(e*e+n*n)*i*i)/(2*i))]},n}function Ut(){function e(e,t){Ns+=i*e-r*t,r=e,i=t}var t,n,r,i;Hs.point=function(o,a){Hs.point=e,t=r=o,n=i=a},Hs.lineEnd=function(){e(t,n)}}function Gt(e,t){e<Is&&(Is=e),e>Ys&&(Ys=e),t<js&&(js=t),t>zs&&(zs=t)}function qt(){function e(e,t){a.push("M",e,",",t,o)}function t(e,t){a.push("M",e,",",t),s.point=n}function n(e,t){a.push("L",e,",",t)}function r(){s.point=e}function i(){a.push("Z")}var o=Kt(4.5),a=[],s={point:e,lineStart:function(){s.point=t},lineEnd:r,polygonStart:function(){s.lineEnd=i},polygonEnd:function(){s.lineEnd=r,s.point=e},pointRadius:function(e){return o=Kt(e),s},result:function(){if(a.length){var e=a.join("");return a=[],e}}};return s}function Kt(e){return"m0,"+e+"a"+e+","+e+" 0 1,1 0,"+-2*e+"a"+e+","+e+" 0 1,1 0,"+2*e+"z"}function Xt(e,t){ks+=e,Ss+=t,++$s}function Jt(){function e(e,r){var i=e-t,o=r-n,a=Math.sqrt(i*i+o*o);Ms+=a*(t+e)/2,Ts+=a*(n+r)/2,Ds+=a,Xt(t=e,n=r)}var t,n;Bs.point=function(r,i){Bs.point=e,Xt(t=r,n=i)}}function Zt(){Bs.point=Xt}function Qt(){function e(e,t){var n=e-r,o=t-i,a=Math.sqrt(n*n+o*o);Ms+=a*(r+e)/2,Ts+=a*(i+t)/2,Ds+=a,Es+=(a=i*e-r*t)*(r+e),Ls+=a*(i+t),As+=3*a,Xt(r=e,i=t)}var t,n,r,i;Bs.point=function(o,a){Bs.point=e,Xt(t=r=o,n=i=a)},Bs.lineEnd=function(){e(t,n)}}function en(e){function t(t,n){e.moveTo(t+a,n),e.arc(t,n,a,0,Na)}function n(t,n){e.moveTo(t,n),s.point=r}function r(t,n){e.lineTo(t,n)}function i(){s.point=t}function o(){e.closePath()}var a=4.5,s={point:t,lineStart:function(){s.point=n},lineEnd:i,polygonStart:function(){s.lineEnd=o},polygonEnd:function(){s.lineEnd=i,s.point=t},pointRadius:function(e){return a=e,s},result:w};return s}function tn(e){function t(e){return(s?r:n)(e)}function n(t){return on(t,function(n,r){n=e(n,r),t.point(n[0],n[1])})}function r(t){function n(n,r){n=e(n,r),t.point(n[0],n[1])}function r(){b=NaN,k.point=o,t.lineStart()}function o(n,r){var o=gt([n,r]),a=e(n,r);i(b,x,y,w,_,C,b=a[0],x=a[1],y=n,w=o[0],_=o[1],C=o[2],s,t),t.point(b,x)}function a(){k.point=n,t.lineEnd()}function l(){r(),k.point=u,k.lineEnd=c}function u(e,t){o(d=e,f=t),p=b,h=x,g=w,m=_,v=C,k.point=o}function c(){i(b,x,y,w,_,C,p,h,d,g,m,v,s,t),k.lineEnd=a,a()}var d,f,p,h,g,m,v,y,b,x,w,_,C,k={point:n,lineStart:r,lineEnd:a,polygonStart:function(){t.polygonStart(),k.lineStart=l},polygonEnd:function(){t.polygonEnd(),k.lineStart=r}};return k}function i(t,n,r,s,l,u,c,d,f,p,h,g,m,v){var y=c-t,b=d-n,x=y*y+b*b;if(x>4*o&&m--){var w=s+p,_=l+h,C=u+g,k=Math.sqrt(w*w+_*_+C*C),S=Math.asin(C/=k),$=va(va(C)-1)<Pa||va(r-f)<Pa?(r+f)/2:Math.atan2(_,w),M=e($,S),T=M[0],D=M[1],E=T-t,L=D-n,A=b*E-y*L;(A*A/x>o||va((y*E+b*L)/x-.5)>.3||s*p+l*h+u*g<a)&&(i(t,n,r,s,l,u,T,D,$,w/=k,_/=k,C,m,v),v.point(T,D),i(T,D,$,w,_,C,c,d,f,p,h,g,m,v))}}var o=.5,a=Math.cos(30*Ya),s=16;return t.precision=function(e){return arguments.length?(s=(o=e*e)>0&&16,t):Math.sqrt(o)},t}function nn(e){var t=tn(function(t,n){return e([t*za,n*za])});return function(e){return ln(t(e))}}function rn(e){this.stream=e}function on(e,t){return{point:t,sphere:function(){e.sphere()},lineStart:function(){e.lineStart()},lineEnd:function(){e.lineEnd()},polygonStart:function(){e.polygonStart()},polygonEnd:function(){e.polygonEnd()}}}function an(e){return sn(function(){return e})()}function sn(e){function t(e){return e=s(e[0]*Ya,e[1]*Ya),[e[0]*f+l,u-e[1]*f]}function n(e){return(e=s.invert((e[0]-l)/f,(u-e[1])/f))&&[e[0]*za,e[1]*za]}function r(){s=Tt(a=dn(v,b,x),o);var e=o(g,m);return l=p-e[0]*f,u=h+e[1]*f,i()}function i(){return c&&(c.valid=!1,c=null),t}var o,a,s,l,u,c,d=tn(function(e,t){return e=o(e,t),[e[0]*f+l,u-e[1]*f]}),f=150,p=480,h=250,g=0,m=0,v=0,b=0,x=0,w=Ps,_=y,C=null,k=null;return t.stream=function(e){return c&&(c.valid=!1),c=ln(w(a,d(_(e)))),c.valid=!0,c},t.clipAngle=function(e){return arguments.length?(w=null==e?(C=e,Ps):zt((C=+e)*Ya),i()):C},t.clipExtent=function(e){return arguments.length?(k=e,_=e?Vt(e[0][0],e[0][1],e[1][0],e[1][1]):y,i()):k},t.scale=function(e){return arguments.length?(f=+e,r()):f},t.translate=function(e){return arguments.length?(p=+e[0],h=+e[1],r()):[p,h]},t.center=function(e){return arguments.length?(g=e[0]%360*Ya,m=e[1]%360*Ya,r()):[g*za,m*za]},t.rotate=function(e){return arguments.length?(v=e[0]%360*Ya,b=e[1]%360*Ya,x=e.length>2?e[2]%360*Ya:0,r()):[v*za,b*za,x*za]},sa.rebind(t,d,"precision"),function(){return o=e.apply(this,arguments),t.invert=o.invert&&n,r()}}function ln(e){return on(e,function(t,n){e.point(t*Ya,n*Ya)})}function un(e,t){return[e,t]}function cn(e,t){return[e>Oa?e-Na:e<-Oa?e+Na:e,t]}function dn(e,t,n){return e?t||n?Tt(pn(e),hn(t,n)):pn(e):t||n?hn(t,n):cn}function fn(e){return function(t,n){return t+=e,[t>Oa?t-Na:t<-Oa?t+Na:t,n]}}function pn(e){var t=fn(e);return t.invert=fn(-e),t}function hn(e,t){function n(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*r+s*i;return[Math.atan2(l*o-c*a,s*r-u*i),te(c*o+l*a)]}var r=Math.cos(e),i=Math.sin(e),o=Math.cos(t),a=Math.sin(t);return n.invert=function(e,t){var n=Math.cos(t),s=Math.cos(e)*n,l=Math.sin(e)*n,u=Math.sin(t),c=u*o-l*a;return[Math.atan2(l*o+u*a,s*r+c*i),te(c*r-s*i)]},n}function gn(e,t){var n=Math.cos(e),r=Math.sin(e);return function(i,o,a,s){var l=a*t;null!=i?(i=mn(n,i),o=mn(n,o),(a>0?i<o:i>o)&&(i+=a*Na)):(i=e+a*Na,o=e-.5*l);for(var u,c=i;a>0?c>o:c<o;c-=l)s.point((u=wt([n,-r*Math.cos(c),-r*Math.sin(c)]))[0],u[1])}}function mn(e,t){var n=gt(t);n[0]-=e,xt(n);var r=ee(-n[1]);return((-n[2]<0?-r:r)+2*Math.PI-Pa)%(2*Math.PI)}function vn(e,t,n){var r=sa.range(e,t-Pa,n).concat(t);return function(e){return r.map(function(t){return[e,t]})}}function yn(e,t,n){var r=sa.range(e,t-Pa,n).concat(t);return function(e){return r.map(function(t){return[t,e]})}}function bn(e){return e.source}function xn(e){return e.target}function wn(e,t,n,r){var i=Math.cos(t),o=Math.sin(t),a=Math.cos(r),s=Math.sin(r),l=i*Math.cos(e),u=i*Math.sin(e),c=a*Math.cos(n),d=a*Math.sin(n),f=2*Math.asin(Math.sqrt(oe(r-t)+i*a*oe(n-e))),p=1/Math.sin(f),h=f?function(e){var t=Math.sin(e*=f)*p,n=Math.sin(f-e)*p,r=n*l+t*c,i=n*u+t*d,a=n*o+t*s;return[Math.atan2(i,r)*za,Math.atan2(a,Math.sqrt(r*r+i*i))*za]}:function(){return[e*za,t*za]};return h.distance=f,h}function _n(){function e(e,i){var o=Math.sin(i*=Ya),a=Math.cos(i),s=va((e*=Ya)-t),l=Math.cos(s);Ws+=Math.atan2(Math.sqrt((s=a*Math.sin(s))*s+(s=r*o-n*a*l)*s),n*o+r*a*l),t=e,n=o,r=a}var t,n,r;Us.point=function(i,o){t=i*Ya,n=Math.sin(o*=Ya),r=Math.cos(o),Us.point=e},Us.lineEnd=function(){Us.point=Us.lineEnd=w}}function Cn(e,t){function n(t,n){var r=Math.cos(t),i=Math.cos(n),o=e(r*i);return[o*i*Math.sin(t),o*Math.sin(n)]}return n.invert=function(e,n){var r=Math.sqrt(e*e+n*n),i=t(r),o=Math.sin(i),a=Math.cos(i);return[Math.atan2(e*o,r*a),Math.asin(r&&n*o/r)]},n}function kn(e,t){function n(e,t){a>0?t<-ja+Pa&&(t=-ja+Pa):t>ja-Pa&&(t=ja-Pa);var n=a/Math.pow(i(t),o);return[n*Math.sin(o*e),a-n*Math.cos(o*e)]}var r=Math.cos(e),i=function(e){return Math.tan(Oa/4+e/2)},o=e===t?Math.sin(e):Math.log(r/Math.cos(t))/Math.log(i(t)/i(e)),a=r*Math.pow(i(e),o)/o;return o?(n.invert=function(e,t){var n=a-t,r=Z(o)*Math.sqrt(e*e+n*n);return[Math.atan2(e,n)/o,2*Math.atan(Math.pow(a/r,1/o))-ja]},n):$n}function Sn(e,t){function n(e,t){var n=o-t;return[n*Math.sin(i*e),o-n*Math.cos(i*e)]}var r=Math.cos(e),i=e===t?Math.sin(e):(r-Math.cos(t))/(t-e),o=r/i+e;return va(i)<Pa?un:(n.invert=function(e,t){var n=o-t;return[Math.atan2(e,n)/i,o-Z(i)*Math.sqrt(e*e+n*n)]},n)}function $n(e,t){return[e,Math.log(Math.tan(Oa/4+t/2))]}function Mn(e){var t,n=an(e),r=n.scale,i=n.translate,o=n.clipExtent;return n.scale=function(){var e=r.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.translate=function(){var e=i.apply(n,arguments);return e===n?t?n.clipExtent(null):n:e},n.clipExtent=function(e){var a=o.apply(n,arguments);if(a===n){if(t=null==e){var s=Oa*r(),l=i();o([[l[0]-s,l[1]-s],[l[0]+s,l[1]+s]])}}else t&&(a=null);return a},n.clipExtent(null)}function Tn(e,t){return[Math.log(Math.tan(Oa/4+t/2)),-e]}function Dn(e){return e[0]}function En(e){return e[1]}function Ln(e){for(var t=e.length,n=[0,1],r=2,i=2;i<t;i++){for(;r>1&&Q(e[n[r-2]],e[n[r-1]],e[i])<=0;)--r;n[r++]=i}return n.slice(0,r)}function An(e,t){return e[0]-t[0]||e[1]-t[1]}function Rn(e,t,n){return(n[0]-t[0])*(e[1]-t[1])<(n[1]-t[1])*(e[0]-t[0])}function Pn(e,t,n,r){var i=e[0],o=n[0],a=t[0]-i,s=r[0]-o,l=e[1],u=n[1],c=t[1]-l,d=r[1]-u,f=(s*(l-u)-d*(i-o))/(d*a-s*c);return[i+f*a,l+f*c]}function Fn(e){var t=e[0],n=e[e.length-1];return!(t[0]-n[0]||t[1]-n[1])}function On(){rr(this),this.edge=this.site=this.circle=null}function Nn(e){var t=il.pop()||new On;return t.site=e,t}function In(e){qn(e),tl.remove(e),il.push(e),rr(e)}function jn(e){var t=e.circle,n=t.x,r=t.cy,i={x:n,y:r},o=e.P,a=e.N,s=[e];In(e);for(var l=o;l.circle&&va(n-l.circle.x)<Pa&&va(r-l.circle.cy)<Pa;)o=l.P,s.unshift(l),In(l),l=o;s.unshift(l),qn(l);for(var u=a;u.circle&&va(n-u.circle.x)<Pa&&va(r-u.circle.cy)<Pa;)a=u.N,s.push(u),In(u),u=a;s.push(u),qn(u);var c,d=s.length;for(c=1;c<d;++c)u=s[c],l=s[c-1],er(u.edge,l.site,u.site,i);l=s[0],(u=s[d-1]).edge=Zn(l.site,u.site,null,i),Gn(l),Gn(u)}function Yn(e){for(var t,n,r,i,o=e.x,a=e.y,s=tl._;s;)if((r=zn(s,a)-o)>Pa)s=s.L;else{if(!((i=o-Hn(s,a))>Pa)){r>-Pa?(t=s.P,n=s):i>-Pa?(t=s,n=s.N):t=n=s;break}if(!s.R){t=s;break}s=s.R}var l=Nn(e);if(tl.insert(t,l),t||n){if(t===n)return qn(t),n=Nn(t.site),tl.insert(l,n),l.edge=n.edge=Zn(t.site,l.site),Gn(t),void Gn(n);if(n){qn(t),qn(n);var u=t.site,c=u.x,d=u.y,f=e.x-c,p=e.y-d,h=n.site,g=h.x-c,m=h.y-d,v=2*(f*m-p*g),y=f*f+p*p,b=g*g+m*m,x={x:(m*y-p*b)/v+c,y:(f*b-g*y)/v+d};er(n.edge,u,h,x),l.edge=Zn(u,e,null,x),n.edge=Zn(e,h,null,x),Gn(t),Gn(n)}else l.edge=Zn(t.site,l.site)}}function zn(e,t){var n=e.site,r=n.x,i=n.y,o=i-t;if(!o)return r;var a=e.P;if(!a)return-1/0;var s=(n=a.site).x,l=n.y,u=l-t;if(!u)return s;var c=s-r,d=1/o-1/u,f=c/u;return d?(-f+Math.sqrt(f*f-2*d*(c*c/(-2*u)-l+u/2+i-o/2)))/d+r:(r+s)/2}function Hn(e,t){var n=e.N;if(n)return zn(n,t);var r=e.site;return r.y===t?r.x:1/0}function Vn(e){this.site=e,this.edges=[]}function Bn(e){for(var t,n,r,i,o,a,s,l,u,c,d=e[0][0],f=e[1][0],p=e[0][1],h=e[1][1],g=el,m=g.length;m--;)if((o=g[m])&&o.prepare())for(l=(s=o.edges).length,a=0;a<l;)r=(c=s[a].end()).x,i=c.y,t=(u=s[++a%l].start()).x,n=u.y,(va(r-t)>Pa||va(i-n)>Pa)&&(s.splice(a,0,new tr(Qn(o.site,c,va(r-d)<Pa&&h-i>Pa?{x:d,y:va(t-d)<Pa?n:h}:va(i-h)<Pa&&f-r>Pa?{x:va(n-h)<Pa?t:f,y:h}:va(r-f)<Pa&&i-p>Pa?{x:f,y:va(t-f)<Pa?n:p}:va(i-p)<Pa&&r-d>Pa?{x:va(n-p)<Pa?t:d,y:p}:null),o.site,null)),++l)}function Wn(e,t){return t.angle-e.angle}function Un(){rr(this),this.x=this.y=this.arc=this.site=this.cy=null}function Gn(e){var t=e.P,n=e.N;if(t&&n){var r=t.site,i=e.site,o=n.site;if(r!==o){var a=i.x,s=i.y,l=r.x-a,u=r.y-s,c=o.x-a,d=2*(l*(m=o.y-s)-u*c);if(!(d>=-Fa)){var f=l*l+u*u,p=c*c+m*m,h=(m*f-u*p)/d,g=(l*p-c*f)/d,m=g+s,v=ol.pop()||new Un;v.arc=e,v.site=i,v.x=h+a,v.y=m+Math.sqrt(h*h+g*g),v.cy=m,e.circle=v;for(var y=null,b=rl._;b;)if(v.y<b.y||v.y===b.y&&v.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}rl.insert(y,v),y||(nl=v)}}}}function qn(e){var t=e.circle;t&&(t.P||(nl=t.N),rl.remove(t),ol.push(t),rr(t),e.circle=null)}function Kn(e){for(var t,n=Qs,r=Ht(e[0][0],e[0][1],e[1][0],e[1][1]),i=n.length;i--;)(!Xn(t=n[i],e)||!r(t)||va(t.a.x-t.b.x)<Pa&&va(t.a.y-t.b.y)<Pa)&&(t.a=t.b=null,n.splice(i,1))}function Xn(e,t){var n=e.b;if(n)return!0;var r,i,o=e.a,a=t[0][0],s=t[1][0],l=t[0][1],u=t[1][1],c=e.l,d=e.r,f=c.x,p=c.y,h=d.x,g=d.y,m=(f+h)/2,v=(p+g)/2;if(g===p){if(m<a||m>=s)return;if(f>h){if(o){if(o.y>=u)return}else o={x:m,y:l};n={x:m,y:u}}else{if(o){if(o.y<l)return}else o={x:m,y:u};n={x:m,y:l}}}else if(r=(f-h)/(g-p),i=v-r*m,r<-1||r>1)if(f>h){if(o){if(o.y>=u)return}else o={x:(l-i)/r,y:l};n={x:(u-i)/r,y:u}}else{if(o){if(o.y<l)return}else o={x:(u-i)/r,y:u};n={x:(l-i)/r,y:l}}else if(p<g){if(o){if(o.x>=s)return}else o={x:a,y:r*a+i};n={x:s,y:r*s+i}}else{if(o){if(o.x<a)return}else o={x:s,y:r*s+i};n={x:a,y:r*a+i}}return e.a=o,e.b=n,!0}function Jn(e,t){this.l=e,this.r=t,this.a=this.b=null}function Zn(e,t,n,r){var i=new Jn(e,t);return Qs.push(i),n&&er(i,e,t,n),r&&er(i,t,e,r),el[e.i].edges.push(new tr(i,e,t)),el[t.i].edges.push(new tr(i,t,e)),i}function Qn(e,t,n){var r=new Jn(e,null);return r.a=t,r.b=n,Qs.push(r),r}function er(e,t,n,r){e.a||e.b?e.l===n?e.b=r:e.a=r:(e.a=r,e.l=t,e.r=n)}function tr(e,t,n){var r=e.a,i=e.b;this.edge=e,this.site=t,this.angle=n?Math.atan2(n.y-t.y,n.x-t.x):e.l===t?Math.atan2(i.x-r.x,r.y-i.y):Math.atan2(r.x-i.x,i.y-r.y)}function nr(){this._=null}function rr(e){e.U=e.C=e.L=e.R=e.P=e.N=null}function ir(e,t){var n=t,r=t.R,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function or(e,t){var n=t,r=t.L,i=n.U;i?i.L===n?i.L=r:i.R=r:e._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function ar(e){for(;e.L;)e=e.L;return e}function sr(e,t){var n,r,i,o=e.sort(lr).pop();for(Qs=[],el=new Array(e.length),tl=new nr,rl=new nr;;)if(i=nl,o&&(!i||o.y<i.y||o.y===i.y&&o.x<i.x))o.x===n&&o.y===r||(el[o.i]=new Vn(o),Yn(o),n=o.x,r=o.y),o=e.pop();else{if(!i)break;jn(i.arc)}t&&(Kn(t),Bn(t));var a={cells:el,edges:Qs};return tl=rl=Qs=el=null,a}function lr(e,t){return t.y-e.y||t.x-e.x}function ur(e,t,n){return(e.x-n.x)*(t.y-e.y)-(e.x-t.x)*(n.y-e.y)}function cr(e){return e.x}function dr(e){return e.y}function fr(e,t,n,r,i,o){if(!e(t,n,r,i,o)){var a=.5*(n+i),s=.5*(r+o),l=t.nodes;l[0]&&fr(e,l[0],n,r,a,s),l[1]&&fr(e,l[1],a,r,i,s),l[2]&&fr(e,l[2],n,s,a,o),l[3]&&fr(e,l[3],a,s,i,o)}}function pr(e,t,n,r,i,o,a){var s,l=1/0;return function e(u,c,d,f,p){if(!(c>o||d>a||f<r||p<i)){if(h=u.point){var h,g=t-u.x,m=n-u.y,v=g*g+m*m;if(v<l){var y=Math.sqrt(l=v);r=t-y,i=n-y,o=t+y,a=n+y,s=h}}for(var b=u.nodes,x=.5*(c+f),w=.5*(d+p),_=(n>=w)<<1|t>=x,C=_+4;_<C;++_)if(u=b[3&_])switch(3&_){case 0:e(u,c,d,x,w);break;case 1:e(u,x,d,f,w);break;case 2:e(u,c,w,x,p);break;case 3:e(u,x,w,f,p)}}}(e,r,i,o,a),s}function hr(e,t){e=sa.rgb(e),t=sa.rgb(t);var n=e.r,r=e.g,i=e.b,o=t.r-n,a=t.g-r,s=t.b-i;return function(e){return"#"+xe(Math.round(n+o*e))+xe(Math.round(r+a*e))+xe(Math.round(i+s*e))}}function gr(e,t){var n,r={},i={};for(n in e)n in t?r[n]=yr(e[n],t[n]):i[n]=e[n];for(n in t)n in e||(i[n]=t[n]);return function(e){for(n in r)i[n]=r[n](e);return i}}function mr(e,t){return e=+e,t=+t,function(n){return e*(1-n)+t*n}}function vr(e,t){var n,r,i,o=sl.lastIndex=ll.lastIndex=0,a=-1,s=[],l=[];for(e+="",t+="";(n=sl.exec(e))&&(r=ll.exec(t));)(i=r.index)>o&&(i=t.slice(o,i),s[a]?s[a]+=i:s[++a]=i),(n=n[0])===(r=r[0])?s[a]?s[a]+=r:s[++a]=r:(s[++a]=null,l.push({i:a,x:mr(n,r)})),o=ll.lastIndex;return o<t.length&&(i=t.slice(o),s[a]?s[a]+=i:s[++a]=i),s.length<2?l[0]?(t=l[0].x,function(e){return t(e)+""}):function(){return t}:(t=l.length,function(e){for(var n,r=0;r<t;++r)s[(n=l[r]).i]=n.x(e);return s.join("")})}function yr(e,t){for(var n,r=sa.interpolators.length;--r>=0&&!(n=sa.interpolators[r](e,t)););return n}function br(e,t){var n,r=[],i=[],o=e.length,a=t.length,s=Math.min(e.length,t.length);for(n=0;n<s;++n)r.push(yr(e[n],t[n]));for(;n<o;++n)i[n]=e[n];for(;n<a;++n)i[n]=t[n];return function(e){for(n=0;n<s;++n)i[n]=r[n](e);return i}}function xr(e){return function(t){return t<=0?0:t>=1?1:e(t)}}function wr(e){return function(t){return 1-e(1-t)}}function _r(e){return function(t){return.5*(t<.5?e(2*t):2-e(2-2*t))}}function Cr(e){return e*e}function kr(e){return e*e*e}function Sr(e){if(e<=0)return 0;if(e>=1)return 1;var t=e*e,n=t*e;return 4*(e<.5?n:3*(e-t)+n-.75)}function $r(e){return function(t){return Math.pow(t,e)}}function Mr(e){return 1-Math.cos(e*ja)}function Tr(e){return Math.pow(2,10*(e-1))}function Dr(e){return 1-Math.sqrt(1-e*e)}function Er(e,t){var n;return arguments.length<2&&(t=.45),arguments.length?n=t/Na*Math.asin(1/e):(e=1,n=t/4),function(r){return 1+e*Math.pow(2,-10*r)*Math.sin((r-n)*Na/t)}}function Lr(e){return e||(e=1.70158),function(t){return t*t*((e+1)*t-e)}}function Ar(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375}function Rr(e,t){e=sa.hcl(e),t=sa.hcl(t);var n=e.h,r=e.c,i=e.l,o=t.h-n,a=t.c-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.c:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return ce(n+o*e,r+a*e,i+s*e)+""}}function Pr(e,t){e=sa.hsl(e),t=sa.hsl(t);var n=e.h,r=e.s,i=e.l,o=t.h-n,a=t.s-r,s=t.l-i;return isNaN(a)&&(a=0,r=isNaN(r)?t.s:r),isNaN(o)?(o=0,n=isNaN(n)?t.h:n):o>180?o-=360:o<-180&&(o+=360),function(e){return le(n+o*e,r+a*e,i+s*e)+""}}function Fr(e,t){e=sa.lab(e),t=sa.lab(t);var n=e.l,r=e.a,i=e.b,o=t.l-n,a=t.a-r,s=t.b-i;return function(e){return fe(n+o*e,r+a*e,i+s*e)+""}}function Or(e,t){return t-=e,function(n){return Math.round(e+t*n)}}function Nr(e){var t=[e.a,e.b],n=[e.c,e.d],r=jr(t),i=Ir(t,n),o=jr(Yr(n,t,-i))||0;t[0]*n[1]<n[0]*t[1]&&(t[0]*=-1,t[1]*=-1,r*=-1,i*=-1),this.rotate=(r?Math.atan2(t[1],t[0]):Math.atan2(-n[0],n[1]))*za,this.translate=[e.e,e.f],this.scale=[r,o],this.skew=o?Math.atan2(i,o)*za:0}function Ir(e,t){return e[0]*t[0]+e[1]*t[1]}function jr(e){var t=Math.sqrt(Ir(e,e));return t&&(e[0]/=t,e[1]/=t),t}function Yr(e,t,n){return e[0]+=n*t[0],e[1]+=n*t[1],e}function zr(e){return e.length?e.pop()+",":""}function Hr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push("translate(",null,",",null,")");r.push({i:i-4,x:mr(e[0],t[0])},{i:i-2,x:mr(e[1],t[1])})}else(t[0]||t[1])&&n.push("translate("+t+")")}function Vr(e,t,n,r){e!==t?(e-t>180?t+=360:t-e>180&&(e+=360),r.push({i:n.push(zr(n)+"rotate(",null,")")-2,x:mr(e,t)})):t&&n.push(zr(n)+"rotate("+t+")")}function Br(e,t,n,r){e!==t?r.push({i:n.push(zr(n)+"skewX(",null,")")-2,x:mr(e,t)}):t&&n.push(zr(n)+"skewX("+t+")")}function Wr(e,t,n,r){if(e[0]!==t[0]||e[1]!==t[1]){var i=n.push(zr(n)+"scale(",null,",",null,")");r.push({i:i-4,x:mr(e[0],t[0])},{i:i-2,x:mr(e[1],t[1])})}else 1===t[0]&&1===t[1]||n.push(zr(n)+"scale("+t+")")}function Ur(e,t){var n=[],r=[];return e=sa.transform(e),t=sa.transform(t),Hr(e.translate,t.translate,n,r),Vr(e.rotate,t.rotate,n,r),Br(e.skew,t.skew,n,r),Wr(e.scale,t.scale,n,r),e=t=null,function(e){for(var t,i=-1,o=r.length;++i<o;)n[(t=r[i]).i]=t.x(e);return n.join("")}}function Gr(e,t){return t=(t-=e=+e)||1/t,function(n){return(n-e)/t}}function qr(e,t){return t=(t-=e=+e)||1/t,function(n){return Math.max(0,Math.min(1,(n-e)/t))}}function Kr(e){for(var t=e.source,n=e.target,r=Jr(t,n),i=[t];t!==r;)t=t.parent,i.push(t);for(var o=i.length;n!==r;)i.splice(o,0,n),n=n.parent;return i}function Xr(e){for(var t=[],n=e.parent;null!=n;)t.push(e),e=n,n=n.parent;return t.push(e),t}function Jr(e,t){if(e===t)return e;for(var n=Xr(e),r=Xr(t),i=n.pop(),o=r.pop(),a=null;i===o;)a=i,i=n.pop(),o=r.pop();return a}function Zr(e){e.fixed|=2}function Qr(e){e.fixed&=-7}function ei(e){e.fixed|=4,e.px=e.x,e.py=e.y}function ti(e){e.fixed&=-5}function ni(e,t,n){var r=0,i=0;if(e.charge=0,!e.leaf)for(var o,a=e.nodes,s=a.length,l=-1;++l<s;)null!=(o=a[l])&&(ni(o,t,n),e.charge+=o.charge,r+=o.charge*o.cx,i+=o.charge*o.cy);if(e.point){e.leaf||(e.point.x+=Math.random()-.5,e.point.y+=Math.random()-.5);var u=t*n[e.point.index];e.charge+=e.pointCharge=u,r+=u*e.point.x,i+=u*e.point.y}e.cx=r/e.charge,e.cy=i/e.charge}function ri(e,t){return sa.rebind(e,t,"sort","children","value"),e.nodes=e,e.links=ui,e}function ii(e,t){for(var n=[e];null!=(e=n.pop());)if(t(e),(i=e.children)&&(r=i.length))for(var r,i;--r>=0;)n.push(i[r])}function oi(e,t){for(var n=[e],r=[];null!=(e=n.pop());)if(r.push(e),(o=e.children)&&(i=o.length))for(var i,o,a=-1;++a<i;)n.push(o[a]);for(;null!=(e=r.pop());)t(e)}function ai(e){return e.children}function si(e){return e.value}function li(e,t){return t.value-e.value}function ui(e){return sa.merge(e.map(function(e){return(e.children||[]).map(function(t){return{source:e,target:t}})}))}function ci(e){return e.x}function di(e){return e.y}function fi(e,t,n){e.y0=t,e.y=n}function pi(e){return sa.range(e.length)}function hi(e){for(var t=-1,n=e[0].length,r=[];++t<n;)r[t]=0;return r}function gi(e){for(var t,n=1,r=0,i=e[0][1],o=e.length;n<o;++n)(t=e[n][1])>i&&(r=n,i=t);return r}function mi(e){return e.reduce(vi,0)}function vi(e,t){return e+t[1]}function yi(e,t){return bi(e,Math.ceil(Math.log(t.length)/Math.LN2+1))}function bi(e,t){for(var n=-1,r=+e[0],i=(e[1]-r)/t,o=[];++n<=t;)o[n]=i*n+r;return o}function xi(e){return[sa.min(e),sa.max(e)]}function wi(e,t){return e.value-t.value}function _i(e,t){var n=e._pack_next;e._pack_next=t,t._pack_prev=e,t._pack_next=n,n._pack_prev=t}function Ci(e,t){e._pack_next=t,t._pack_prev=e}function ki(e,t){var n=t.x-e.x,r=t.y-e.y,i=e.r+t.r;return.999*i*i>n*n+r*r}function Si(e){function t(e){c=Math.min(e.x-e.r,c),d=Math.max(e.x+e.r,d),f=Math.min(e.y-e.r,f),p=Math.max(e.y+e.r,p)}if((n=e.children)&&(u=n.length)){var n,r,i,o,a,s,l,u,c=1/0,d=-1/0,f=1/0,p=-1/0;if(n.forEach($i),r=n[0],r.x=-r.r,r.y=0,t(r),u>1&&(i=n[1],i.x=i.r,i.y=0,t(i),u>2))for(Di(r,i,o=n[2]),t(o),_i(r,o),r._pack_prev=o,_i(o,i),i=r._pack_next,a=3;a<u;a++){Di(r,i,o=n[a]);var h=0,g=1,m=1;for(s=i._pack_next;s!==i;s=s._pack_next,g++)if(ki(s,o)){h=1;break}if(1==h)for(l=r._pack_prev;l!==s._pack_prev&&!ki(l,o);l=l._pack_prev,m++);h?(g<m||g==m&&i.r<r.r?Ci(r,i=s):Ci(r=l,i),a--):(_i(r,o),i=o,t(o))}var v=(c+d)/2,y=(f+p)/2,b=0;for(a=0;a<u;a++)(o=n[a]).x-=v,o.y-=y,b=Math.max(b,o.r+Math.sqrt(o.x*o.x+o.y*o.y));e.r=b,n.forEach(Mi)}}function $i(e){e._pack_next=e._pack_prev=e}function Mi(e){delete e._pack_next,delete e._pack_prev}function Ti(e,t,n,r){var i=e.children;if(e.x=t+=r*e.x,e.y=n+=r*e.y,e.r*=r,i)for(var o=-1,a=i.length;++o<a;)Ti(i[o],t,n,r)}function Di(e,t,n){var r=e.r+n.r,i=t.x-e.x,o=t.y-e.y;if(r&&(i||o)){var a=t.r+n.r,s=i*i+o*o,l=.5+((r*=r)-(a*=a))/(2*s),u=Math.sqrt(Math.max(0,2*a*(r+s)-(r-=s)*r-a*a))/(2*s);n.x=e.x+l*i+u*o,n.y=e.y+l*o-u*i}else n.x=e.x+r,n.y=e.y}function Ei(e,t){return e.parent==t.parent?1:2}function Li(e){var t=e.children;return t.length?t[0]:e.t}function Ai(e){var t,n=e.children;return(t=n.length)?n[t-1]:e.t}function Ri(e,t,n){var r=n/(t.i-e.i);t.c-=r,t.s+=n,e.c+=r,t.z+=n,t.m+=n}function Pi(e){for(var t,n=0,r=0,i=e.children,o=i.length;--o>=0;)(t=i[o]).z+=n,t.m+=n,n+=t.s+(r+=t.c)}function Fi(e,t,n){return e.a.parent===t.parent?e.a:n}function Oi(e){return 1+sa.max(e,function(e){return e.y})}function Ni(e){return e.reduce(function(e,t){return e+t.x},0)/e.length}function Ii(e){var t=e.children;return t&&t.length?Ii(t[0]):e}function ji(e){var t,n=e.children;return n&&(t=n.length)?ji(n[t-1]):e}function Yi(e){return{x:e.x,y:e.y,dx:e.dx,dy:e.dy}}function zi(e,t){var n=e.x+t[3],r=e.y+t[0],i=e.dx-t[1]-t[3],o=e.dy-t[0]-t[2];return i<0&&(n+=i/2,i=0),o<0&&(r+=o/2,o=0),{x:n,y:r,dx:i,dy:o}}function Hi(e){var t=e[0],n=e[e.length-1];return t<n?[t,n]:[n,t]}function Vi(e){return e.rangeExtent?e.rangeExtent():Hi(e.range())}function Bi(e,t,n,r){var i=n(e[0],e[1]),o=r(t[0],t[1]);return function(e){return o(i(e))}}function Wi(e,t){var n,r=0,i=e.length-1,o=e[r],a=e[i];return a<o&&(n=r,r=i,i=n,n=o,o=a,a=n),e[r]=t.floor(o),e[i]=t.ceil(a),e}function Ui(e){return e?{floor:function(t){return Math.floor(t/e)*e},ceil:function(t){return Math.ceil(t/e)*e}}:bl}function Gi(e,t,n,r){var i=[],o=[],a=0,s=Math.min(e.length,t.length)-1;for(e[s]<e[0]&&(e=e.slice().reverse(),t=t.slice().reverse());++a<=s;)i.push(n(e[a-1],e[a])),o.push(r(t[a-1],t[a]));return function(t){var n=sa.bisect(e,t,1,s)-1;return o[n](i[n](t))}}function qi(e,t,n,r){function i(){var i=Math.min(e.length,t.length)>2?Gi:Bi,l=r?qr:Gr;return a=i(e,t,l,n),s=i(t,e,l,yr),o}function o(e){return a(e)}var a,s;return o.invert=function(e){return s(e)},o.domain=function(t){return arguments.length?(e=t.map(Number),i()):e},o.range=function(e){return arguments.length?(t=e,i()):t},o.rangeRound=function(e){return o.range(e).interpolate(Or)},o.clamp=function(e){return arguments.length?(r=e,i()):r},o.interpolate=function(e){return arguments.length?(n=e,i()):n},o.ticks=function(t){return Zi(e,t)},o.tickFormat=function(t,n){return Qi(e,t,n)},o.nice=function(t){return Xi(e,t),i()},o.copy=function(){return qi(e,t,n,r)},i()}function Ki(e,t){return sa.rebind(e,t,"range","rangeRound","interpolate","clamp")}function Xi(e,t){return Wi(e,Ui(Ji(e,t)[2])),Wi(e,Ui(Ji(e,t)[2])),e}function Ji(e,t){null==t&&(t=10);var n=Hi(e),r=n[1]-n[0],i=Math.pow(10,Math.floor(Math.log(r/t)/Math.LN10)),o=t/r*i;return o<=.15?i*=10:o<=.35?i*=5:o<=.75&&(i*=2),n[0]=Math.ceil(n[0]/i)*i,n[1]=Math.floor(n[1]/i)*i+.5*i,n[2]=i,n}function Zi(e,t){return sa.range.apply(sa,Ji(e,t))}function Qi(e,t,n){var r=Ji(e,t);if(n){var i=ss.exec(n);if(i.shift(),"s"===i[8]){var o=sa.formatPrefix(Math.max(va(r[0]),va(r[1])));return i[7]||(i[7]="."+eo(o.scale(r[2]))),i[8]="f",n=sa.format(i.join("")),function(e){return n(o.scale(e))+o.symbol}}i[7]||(i[7]="."+to(i[8],r)),n=i.join("")}else n=",."+eo(r[2])+"f";return sa.format(n)}function eo(e){return-Math.floor(Math.log(e)/Math.LN10+.01)}function to(e,t){var n=eo(t[2]);return e in xl?Math.abs(n-eo(Math.max(va(t[0]),va(t[1]))))+ +("e"!==e):n-2*("%"===e)}function no(e,t,n,r){function i(e){return(n?Math.log(e<0?0:e):-Math.log(e>0?0:-e))/Math.log(t)}function o(e){return n?Math.pow(t,e):-Math.pow(t,-e)}function a(t){return e(i(t))}return a.invert=function(t){return o(e.invert(t))},a.domain=function(t){return arguments.length?(n=t[0]>=0,e.domain((r=t.map(Number)).map(i)),a):r},a.base=function(n){return arguments.length?(t=+n,e.domain(r.map(i)),a):t},a.nice=function(){var t=Wi(r.map(i),n?Math:_l);return e.domain(t),r=t.map(o),a},a.ticks=function(){var e=Hi(r),a=[],s=e[0],l=e[1],u=Math.floor(i(s)),c=Math.ceil(i(l)),d=t%1?2:t;if(isFinite(c-u)){if(n){for(;u<c;u++)for(f=1;f<d;f++)a.push(o(u)*f);a.push(o(u))}else for(a.push(o(u));u++<c;)for(var f=d-1;f>0;f--)a.push(o(u)*f);for(u=0;a[u]<s;u++);for(c=a.length;a[c-1]>l;c--);a=a.slice(u,c)}return a},a.tickFormat=function(e,n){if(!arguments.length)return wl;arguments.length<2?n=wl:"function"!=typeof n&&(n=sa.format(n));var r=Math.max(1,t*e/a.ticks().length);return function(e){var a=e/o(Math.round(i(e)));return a*t<t-.5&&(a*=t),a<=r?n(e):""}},a.copy=function(){return no(e.copy(),t,n,r)},Ki(a,e)}function ro(e,t,n){function r(t){return e(i(t))}var i=io(t),o=io(1/t);return r.invert=function(t){return o(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain((n=t.map(Number)).map(i)),r):n},r.ticks=function(e){return Zi(n,e)},r.tickFormat=function(e,t){return Qi(n,e,t)},r.nice=function(e){return r.domain(Xi(n,e))},r.exponent=function(a){return arguments.length?(i=io(t=a),o=io(1/t),e.domain(n.map(i)),r):t},r.copy=function(){return ro(e.copy(),t,n)},Ki(r,e)}function io(e){return function(t){return t<0?-Math.pow(-t,e):Math.pow(t,e)}}function oo(e,t){function n(n){return o[((i.get(n)||("range"===t.t?i.set(n,e.push(n)):NaN))-1)%o.length]}function r(t,n){return sa.range(e.length).map(function(e){return t+n*e})}var i,o,a;return n.domain=function(r){if(!arguments.length)return e;e=[],i=new u;for(var o,a=-1,s=r.length;++a<s;)i.has(o=r[a])||i.set(o,e.push(o));return n[t.t].apply(n,t.a)},n.range=function(e){return arguments.length?(o=e,a=0,t={t:"range",a:arguments},n):o},n.rangePoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=(l+u)/2,0):(u-l)/(e.length-1+s);return o=r(l+c*s/2,c),a=0,t={t:"rangePoints",a:arguments},n},n.rangeRoundPoints=function(i,s){arguments.length<2&&(s=0);var l=i[0],u=i[1],c=e.length<2?(l=u=Math.round((l+u)/2),0):(u-l)/(e.length-1+s)|0;return o=r(l+Math.round(c*s/2+(u-l-(e.length-1+s)*c)/2),c),a=0,t={t:"rangeRoundPoints",a:arguments},n},n.rangeBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=(i[1-u]-c)/(e.length-s+2*l);return o=r(c+d*l,d),u&&o.reverse(),a=d*(1-s),t={t:"rangeBands",a:arguments},n},n.rangeRoundBands=function(i,s,l){arguments.length<2&&(s=0),arguments.length<3&&(l=s);var u=i[1]<i[0],c=i[u-0],d=i[1-u],f=Math.floor((d-c)/(e.length-s+2*l));return o=r(c+Math.round((d-c-(e.length-s)*f)/2),f),u&&o.reverse(),a=Math.round(f*(1-s)),t={t:"rangeRoundBands",a:arguments},n},n.rangeBand=function(){return a},n.rangeExtent=function(){return Hi(t.a[0])},n.copy=function(){return oo(e,t)},n.domain(e)}function ao(e,t){function o(){var n=0,r=t.length;for(s=[];++n<r;)s[n-1]=sa.quantile(e,n/r);return a}function a(e){if(!isNaN(e=+e))return t[sa.bisect(s,e)]}var s;return a.domain=function(t){return arguments.length?(e=t.map(r).filter(i).sort(n),o()):e},a.range=function(e){return arguments.length?(t=e,o()):t},a.quantiles=function(){return s},a.invertExtent=function(n){return n=t.indexOf(n),n<0?[NaN,NaN]:[n>0?s[n-1]:e[0],n<s.length?s[n]:e[e.length-1]]},a.copy=function(){return ao(e,t)},o()}function so(e,t,n){function r(t){return n[Math.max(0,Math.min(a,Math.floor(o*(t-e))))]}function i(){return o=n.length/(t-e),a=n.length-1,r}var o,a;return r.domain=function(n){return arguments.length?(e=+n[0],t=+n[n.length-1],i()):[e,t]},r.range=function(e){return arguments.length?(n=e,i()):n},r.invertExtent=function(t){return t=n.indexOf(t),t=t<0?NaN:t/o+e,[t,t+1/o]},r.copy=function(){return so(e,t,n)},i()}function lo(e,t){function n(n){if(n<=n)return t[sa.bisect(e,n)]}return n.domain=function(t){return arguments.length?(e=t,n):e},n.range=function(e){return arguments.length?(t=e,n):t},n.invertExtent=function(n){return n=t.indexOf(n),[e[n-1],e[n]]},n.copy=function(){return lo(e,t)},n}function uo(e){function t(e){return+e}return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=n.map(t),t):e},t.ticks=function(t){return Zi(e,t)},t.tickFormat=function(t,n){return Qi(e,t,n)},t.copy=function(){return uo(e)},t}function co(){return 0}function fo(e){return e.innerRadius}function po(e){return e.outerRadius}function ho(e){return e.startAngle}function go(e){return e.endAngle}function mo(e){return e&&e.padAngle}function vo(e,t,n,r){return(e-n)*t-(t-r)*e>0?0:1}function yo(e,t,n,r,i){var o=e[0]-t[0],a=e[1]-t[1],s=(i?r:-r)/Math.sqrt(o*o+a*a),l=s*a,u=-s*o,c=e[0]+l,d=e[1]+u,f=t[0]+l,p=t[1]+u,h=(c+f)/2,g=(d+p)/2,m=f-c,v=p-d,y=m*m+v*v,b=n-r,x=c*p-f*d,w=(v<0?-1:1)*Math.sqrt(Math.max(0,b*b*y-x*x)),_=(x*v-m*w)/y,C=(-x*m-v*w)/y,k=(x*v+m*w)/y,S=(-x*m+v*w)/y,$=_-h,M=C-g,T=k-h,D=S-g;return $*$+M*M>T*T+D*D&&(_=k,C=S),[[_-l,C-u],[_*n/b,C*n/b]]}function bo(e){function t(t){function a(){u.push("M",o(e(c),s))}for(var l,u=[],c=[],d=-1,f=t.length,p=$e(n),h=$e(r);++d<f;)i.call(this,l=t[d],d)?c.push([+p.call(this,l,d),+h.call(this,l,d)]):c.length&&(a(),c=[]);return c.length&&a(),u.length?u.join(""):null}var n=Dn,r=En,i=Dt,o=xo,a=o.key,s=.7;return t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t.defined=function(e){return arguments.length?(i=e,t):i},t.interpolate=function(e){return arguments.length?(a="function"==typeof e?o=e:(o=Tl.get(e)||xo).key,t):a},t.tension=function(e){return arguments.length?(s=e,t):s},t}function xo(e){return e.length>1?e.join("L"):e+"Z"}function wo(e){return e.join("L")+"Z"}function _o(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r[0]+(r=e[t])[0])/2,"V",r[1]);return n>1&&i.push("H",r[0]),i.join("")}function Co(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("V",(r=e[t])[1],"H",r[0]);return i.join("")}function ko(e){for(var t=0,n=e.length,r=e[0],i=[r[0],",",r[1]];++t<n;)i.push("H",(r=e[t])[0],"V",r[1]);return i.join("")}function So(e,t){return e.length<4?xo(e):e[1]+To(e.slice(1,-1),Do(e,t))}function $o(e,t){return e.length<3?wo(e):e[0]+To((e.push(e[0]),e),Do([e[e.length-2]].concat(e,[e[1]]),t))}function Mo(e,t){return e.length<3?xo(e):e[0]+To(e,Do(e,t))}function To(e,t){if(t.length<1||e.length!=t.length&&e.length!=t.length+2)return xo(e);var n=e.length!=t.length,r="",i=e[0],o=e[1],a=t[0],s=a,l=1;if(n&&(r+="Q"+(o[0]-2*a[0]/3)+","+(o[1]-2*a[1]/3)+","+o[0]+","+o[1],i=e[1],l=2),t.length>1){s=t[1],o=e[l],l++,r+="C"+(i[0]+a[0])+","+(i[1]+a[1])+","+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1];for(var u=2;u<t.length;u++,l++)o=e[l],s=t[u],r+="S"+(o[0]-s[0])+","+(o[1]-s[1])+","+o[0]+","+o[1]}if(n){var c=e[l];r+="Q"+(o[0]+2*s[0]/3)+","+(o[1]+2*s[1]/3)+","+c[0]+","+c[1]}return r}function Do(e,t){for(var n,r=[],i=(1-t)/2,o=e[0],a=e[1],s=1,l=e.length;++s<l;)n=o,o=a,a=e[s],r.push([i*(a[0]-n[0]),i*(a[1]-n[1])]);return r}function Eo(e){if(e.length<3)return xo(e);var t=1,n=e.length,r=e[0],i=r[0],o=r[1],a=[i,i,i,(r=e[1])[0]],s=[o,o,o,r[1]],l=[i,",",o,"L",Po(Ll,a),",",Po(Ll,s)];for(e.push(e[n-1]);++t<=n;)r=e[t],a.shift(),a.push(r[0]),s.shift(),s.push(r[1]),Fo(l,a,s);return e.pop(),l.push("L",r),l.join("")}function Lo(e){if(e.length<4)return xo(e);for(var t,n=[],r=-1,i=e.length,o=[0],a=[0];++r<3;)t=e[r],o.push(t[0]),a.push(t[1]);for(n.push(Po(Ll,o)+","+Po(Ll,a)),--r;++r<i;)t=e[r],o.shift(),o.push(t[0]),a.shift(),a.push(t[1]),Fo(n,o,a);return n.join("")}function Ao(e){for(var t,n,r=-1,i=e.length,o=i+4,a=[],s=[];++r<4;)n=e[r%i],a.push(n[0]),s.push(n[1]);for(t=[Po(Ll,a),",",Po(Ll,s)],--r;++r<o;)n=e[r%i],a.shift(),a.push(n[0]),s.shift(),s.push(n[1]),Fo(t,a,s);return t.join("")}function Ro(e,t){var n=e.length-1;if(n)for(var r,i,o=e[0][0],a=e[0][1],s=e[n][0]-o,l=e[n][1]-a,u=-1;++u<=n;)i=u/n,(r=e[u])[0]=t*r[0]+(1-t)*(o+i*s),r[1]=t*r[1]+(1-t)*(a+i*l);return Eo(e)}function Po(e,t){return e[0]*t[0]+e[1]*t[1]+e[2]*t[2]+e[3]*t[3]}function Fo(e,t,n){e.push("C",Po(Dl,t),",",Po(Dl,n),",",Po(El,t),",",Po(El,n),",",Po(Ll,t),",",Po(Ll,n))}function Oo(e,t){return(t[1]-e[1])/(t[0]-e[0])}function No(e){for(var t=0,n=e.length-1,r=[],i=e[0],o=e[1],a=r[0]=Oo(i,o);++t<n;)r[t]=(a+(a=Oo(i=o,o=e[t+1])))/2;return r[t]=a,r}function Io(e){for(var t,n,r,i,o=[],a=No(e),s=-1,l=e.length-1;++s<l;)t=Oo(e[s],e[s+1]),va(t)<Pa?a[s]=a[s+1]=0:(i=(n=a[s]/t)*n+(r=a[s+1]/t)*r)>9&&(i=3*t/Math.sqrt(i),a[s]=i*n,a[s+1]=i*r);for(s=-1;++s<=l;)i=(e[Math.min(l,s+1)][0]-e[Math.max(0,s-1)][0])/(6*(1+a[s]*a[s])),o.push([i||0,a[s]*i||0]);return o}function jo(e){return e.length<3?xo(e):e[0]+To(e,Io(e))}function Yo(e){for(var t,n,r,i=-1,o=e.length;++i<o;)n=(t=e[i])[0],r=t[1]-ja,t[0]=n*Math.cos(r),t[1]=n*Math.sin(r);return e}function zo(e){function t(t){function l(){g.push("M",s(e(v),d),c,u(e(m.reverse()),d),"Z")}for(var f,p,h,g=[],m=[],v=[],y=-1,b=t.length,x=$e(n),w=$e(i),_=n===r?function(){return p}:$e(r),C=i===o?function(){return h}:$e(o);++y<b;)a.call(this,f=t[y],y)?(m.push([p=+x.call(this,f,y),h=+w.call(this,f,y)]),v.push([+_.call(this,f,y),+C.call(this,f,y)])):m.length&&(l(),m=[],v=[]);return m.length&&l(),g.length?g.join(""):null}var n=Dn,r=Dn,i=0,o=En,a=Dt,s=xo,l=s.key,u=s,c="L",d=.7;return t.x=function(e){return arguments.length?(n=r=e,t):r},t.x0=function(e){return arguments.length?(n=e,t):n},t.x1=function(e){return arguments.length?(r=e,t):r},t.y=function(e){return arguments.length?(i=o=e,t):o},t.y0=function(e){return arguments.length?(i=e,t):i},t.y1=function(e){return arguments.length?(o=e,t):o},t.defined=function(e){return arguments.length?(a=e,t):a},t.interpolate=function(e){return arguments.length?(l="function"==typeof e?s=e:(s=Tl.get(e)||xo).key,u=s.reverse||s,c=s.closed?"M":"L",t):l},t.tension=function(e){return arguments.length?(d=e,t):d},t}function Ho(e){return e.radius}function Vo(e){return[e.x,e.y]}function Bo(e){return function(){var t=e.apply(this,arguments),n=t[0],r=t[1]-ja;return[n*Math.cos(r),n*Math.sin(r)]}}function Wo(){return 64}function Uo(){return"circle"}function Go(e){var t=Math.sqrt(e/Oa);return"M0,"+t+"A"+t+","+t+" 0 1,1 0,"+-t+"A"+t+","+t+" 0 1,1 0,"+t+"Z"}function qo(e){return function(){var t,n,r;(t=this[e])&&(r=t[n=t.active])&&(r.timer.c=null,r.timer.t=NaN,--t.count?delete t[n]:delete this[e],t.active+=.5,r.event&&r.event.interrupt.call(this,this.__data__,r.index))}}function Ko(e,t,n){return _a(e,Il),e.namespace=t,e.id=n,e}function Xo(e,t,n,r){var i=e.id,o=e.namespace;return V(e,"function"==typeof n?function(e,a,s){e[o][i].tween.set(t,r(n.call(e,e.__data__,a,s)))}:(n=r(n),function(e){e[o][i].tween.set(t,n)}))}function Jo(e){return null==e&&(e=""),function(){this.textContent=e}}function Zo(e){return null==e?"__transition__":"__transition_"+e+"__"}function Qo(e,t,n,r,i){function o(e){var t=g.delay;if(c.t=t+l,t<=e)return a(e-t);c.c=a}function a(n){var i=h.active,o=h[i];o&&(o.timer.c=null,o.timer.t=NaN,--h.count,delete h[i],o.event&&o.event.interrupt.call(e,e.__data__,o.index));for(var a in h)if(+a<r){var u=h[a];u.timer.c=null,u.timer.t=NaN,--h.count,delete h[a]}c.c=s,Le(function(){return c.c&&s(n||1)&&(c.c=null,c.t=NaN),1},0,l),h.active=r,g.event&&g.event.start.call(e,e.__data__,t),p=[],g.tween.forEach(function(n,r){(r=r.call(e,e.__data__,t))&&p.push(r)}),f=g.ease,d=g.duration}function s(i){for(var o=i/d,a=f(o),s=p.length;s>0;)p[--s].call(e,a);if(o>=1)return g.event&&g.event.end.call(e,e.__data__,t),--h.count?delete h[r]:delete e[n],1}var l,c,d,f,p,h=e[n]||(e[n]={active:0,count:0}),g=h[r];g||(l=i.time,c=Le(o,0,l),g=h[r]={tween:new u,time:l,timer:c,delay:i.delay,duration:i.duration,ease:i.ease,index:t},i=null,++h.count)}function ea(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate("+(isFinite(r)?r:n(e))+",0)"})}function ta(e,t,n){e.attr("transform",function(e){var r=t(e);return"translate(0,"+(isFinite(r)?r:n(e))+")"})}function na(e){return e.toISOString()}function ra(e,t,n){function r(t){return e(t)}function i(e,n){var r=(e[1]-e[0])/n,i=sa.bisect(Gl,r);return i==Gl.length?[t.year,Ji(e.map(function(e){return e/31536e6}),n)[2]]:i?t[r/Gl[i-1]<Gl[i]/r?i-1:i]:[Xl,Ji(e,n)[2]]}return r.invert=function(t){return ia(e.invert(t))},r.domain=function(t){return arguments.length?(e.domain(t),r):e.domain().map(ia)},r.nice=function(e,t){function n(n){return!isNaN(n)&&!e.range(n,ia(+n+1),t).length}var o=r.domain(),a=Hi(o),s=null==e?i(a,10):"number"==typeof e&&i(a,e);return s&&(e=s[0],t=s[1]),r.domain(Wi(o,t>1?{floor:function(t){for(;n(t=e.floor(t));)t=ia(t-1);return t},ceil:function(t){for(;n(t=e.ceil(t));)t=ia(+t+1);return t}}:e))},r.ticks=function(e,t){var n=Hi(r.domain()),o=null==e?i(n,10):"number"==typeof e?i(n,e):!e.range&&[{range:e},t];return o&&(e=o[0],t=o[1]),e.range(n[0],ia(+n[1]+1),t<1?1:t)},r.tickFormat=function(){return n},r.copy=function(){return ra(e.copy(),t,n)},Ki(r,e)}function ia(e){return new Date(e)}function oa(e){return JSON.parse(e.responseText)}function aa(e){var t=ca.createRange();return t.selectNode(ca.body),t.createContextualFragment(e.responseText)}var sa={version:"3.5.17"},la=[].slice,ua=function(e){return la.call(e)},ca=this.document;if(ca)try{ua(ca.documentElement.childNodes)[0].nodeType}catch(e){ua=function(e){for(var t=e.length,n=new Array(t);t--;)n[t]=e[t];return n}}if(Date.now||(Date.now=function(){return+new Date}),ca)try{ca.createElement("DIV").style.setProperty("opacity",0,"")}catch(e){var da=this.Element.prototype,fa=da.setAttribute,pa=da.setAttributeNS,ha=this.CSSStyleDeclaration.prototype,ga=ha.setProperty;da.setAttribute=function(e,t){fa.call(this,e,t+"")},da.setAttributeNS=function(e,t,n){pa.call(this,e,t,n+"")},ha.setProperty=function(e,t,n){ga.call(this,e,t+"",n)}}sa.ascending=n,sa.descending=function(e,t){return t<e?-1:t>e?1:t>=e?0:NaN},sa.min=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&n>r&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&n>r&&(n=r)}return n},sa.max=function(e,t){var n,r,i=-1,o=e.length;if(1===arguments.length){for(;++i<o;)if(null!=(r=e[i])&&r>=r){n=r;break}for(;++i<o;)null!=(r=e[i])&&r>n&&(n=r)}else{for(;++i<o;)if(null!=(r=t.call(e,e[i],i))&&r>=r){n=r;break}for(;++i<o;)null!=(r=t.call(e,e[i],i))&&r>n&&(n=r)}return n},sa.extent=function(e,t){var n,r,i,o=-1,a=e.length;if(1===arguments.length){for(;++o<a;)if(null!=(r=e[o])&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=e[o])&&(n>r&&(n=r),i<r&&(i=r))}else{for(;++o<a;)if(null!=(r=t.call(e,e[o],o))&&r>=r){n=i=r;break}for(;++o<a;)null!=(r=t.call(e,e[o],o))&&(n>r&&(n=r),i<r&&(i=r))}return[n,i]},sa.sum=function(e,t){var n,r=0,o=e.length,a=-1;if(1===arguments.length)for(;++a<o;)i(n=+e[a])&&(r+=n);else for(;++a<o;)i(n=+t.call(e,e[a],a))&&(r+=n);return r},sa.mean=function(e,t){var n,o=0,a=e.length,s=-1,l=a;if(1===arguments.length)for(;++s<a;)i(n=r(e[s]))?o+=n:--l;else for(;++s<a;)i(n=r(t.call(e,e[s],s)))?o+=n:--l;if(l)return o/l},sa.quantile=function(e,t){var n=(e.length-1)*t+1,r=Math.floor(n),i=+e[r-1],o=n-r;return o?i+o*(e[r]-i):i},sa.median=function(e,t){var o,a=[],s=e.length,l=-1;if(1===arguments.length)for(;++l<s;)i(o=r(e[l]))&&a.push(o);else for(;++l<s;)i(o=r(t.call(e,e[l],l)))&&a.push(o);if(a.length)return sa.quantile(a.sort(n),.5)},sa.variance=function(e,t){var n,o,a=e.length,s=0,l=0,u=-1,c=0;if(1===arguments.length)for(;++u<a;)i(n=r(e[u]))&&(l+=(o=n-s)*(n-(s+=o/++c)));else for(;++u<a;)i(n=r(t.call(e,e[u],u)))&&(l+=(o=n-s)*(n-(s+=o/++c)));if(c>1)return l/(c-1)},sa.deviation=function(){var e=sa.variance.apply(this,arguments);return e?Math.sqrt(e):e};var ma=o(n);sa.bisectLeft=ma.left,sa.bisect=sa.bisectRight=ma.right,sa.bisector=function(e){return o(1===e.length?function(t,r){return n(e(t),r)}:e)},sa.shuffle=function(e,t,n){(o=arguments.length)<3&&(n=e.length,o<2&&(t=0));for(var r,i,o=n-t;o;)i=Math.random()*o--|0,r=e[o+t],e[o+t]=e[i+t],e[i+t]=r;return e},sa.permute=function(e,t){for(var n=t.length,r=new Array(n);n--;)r[n]=e[t[n]];return r},sa.pairs=function(e){for(var t=0,n=e.length-1,r=e[0],i=new Array(n<0?0:n);t<n;)i[t]=[r,r=e[++t]];return i},sa.transpose=function(e){if(!(i=e.length))return[];for(var t=-1,n=sa.min(e,a),r=new Array(n);++t<n;)for(var i,o=-1,s=r[t]=new Array(i);++o<i;)s[o]=e[o][t];return r},sa.zip=function(){return sa.transpose(arguments)},sa.keys=function(e){var t=[];for(var n in e)t.push(n);return t},sa.values=function(e){var t=[];for(var n in e)t.push(e[n]);return t},sa.entries=function(e){var t=[];for(var n in e)t.push({key:n,value:e[n]});return t},sa.merge=function(e){for(var t,n,r,i=e.length,o=-1,a=0;++o<i;)a+=e[o].length;for(n=new Array(a);--i>=0;)for(t=(r=e[i]).length;--t>=0;)n[--a]=r[t];return n};var va=Math.abs;sa.range=function(e,t,n){if(arguments.length<3&&(n=1,arguments.length<2&&(t=e,e=0)),(t-e)/n==1/0)throw new Error("infinite range");var r,i=[],o=s(va(n)),a=-1;if(e*=o,t*=o,(n*=o)<0)for(;(r=e+n*++a)>t;)i.push(r/o);else for(;(r=e+n*++a)<t;)i.push(r/o);return i},sa.map=function(e,t){var n=new u;if(e instanceof u)e.forEach(function(e,t){n.set(e,t)});else if(Array.isArray(e)){var r,i=-1,o=e.length;if(1===arguments.length)for(;++i<o;)n.set(i,e[i]);else for(;++i<o;)n.set(t.call(e,r=e[i],i),r)}else for(var a in e)n.set(a,e[a]);return n};var ya="__proto__",ba="\0";l(u,{has:f,get:function(e){return this._[c(e)]},set:function(e,t){return this._[c(e)]=t},remove:p,keys:h,values:function(){var e=[];for(var t in this._)e.push(this._[t]);return e},entries:function(){var e=[];for(var t in this._)e.push({key:d(t),value:this._[t]});return e},size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t),this._[t])}}),sa.nest=function(){function e(t,a,s){if(s>=o.length)return r?r.call(i,a):n?a.sort(n):a;for(var l,c,d,f,p=-1,h=a.length,g=o[s++],m=new u;++p<h;)(f=m.get(l=g(c=a[p])))?f.push(c):m.set(l,[c]);return t?(c=t(),d=function(n,r){c.set(n,e(t,r,s))}):(c={},d=function(n,r){c[n]=e(t,r,s)}),m.forEach(d),c}function t(e,n){if(n>=o.length)return e;var r=[],i=a[n++];return e.forEach(function(e,i){r.push({key:e,values:t(i,n)})}),i?r.sort(function(e,t){return i(e.key,t.key)}):r}var n,r,i={},o=[],a=[];return i.map=function(t,n){return e(n,t,0)},i.entries=function(n){return t(e(sa.map,n,0),0)},i.key=function(e){return o.push(e),i},i.sortKeys=function(e){return a[o.length-1]=e,i},i.sortValues=function(e){return n=e,i},i.rollup=function(e){return r=e,i},i},sa.set=function(e){var t=new v;if(e)for(var n=0,r=e.length;n<r;++n)t.add(e[n]);return t},l(v,{has:f,add:function(e){return this._[c(e+="")]=!0,e},remove:p,values:h,size:g,empty:m,forEach:function(e){for(var t in this._)e.call(this,d(t))}}),sa.behavior={},sa.rebind=function(e,t){for(var n,r=1,i=arguments.length;++r<i;)e[n=arguments[r]]=b(e,t,t[n]);return e};var xa=["webkit","ms","moz","Moz","o","O"];sa.dispatch=function(){for(var e=new _,t=-1,n=arguments.length;++t<n;)e[arguments[t]]=C(e);return e},_.prototype.on=function(e,t){var n=e.indexOf("."),r="";if(n>=0&&(r=e.slice(n+1),e=e.slice(0,n)),e)return arguments.length<2?this[e].on(r):this[e].on(r,t);if(2===arguments.length){if(null==t)for(e in this)this.hasOwnProperty(e)&&this[e].on(r,null);return this}},sa.event=null,sa.requote=function(e){return e.replace(wa,"\\$&")};var wa=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g,_a={}.__proto__?function(e,t){e.__proto__=t}:function(e,t){for(var n in t)e[n]=t[n]},Ca=function(e,t){return t.querySelector(e)},ka=function(e,t){return t.querySelectorAll(e)},Sa=function(e,t){var n=e.matches||e[x(e,"matchesSelector")];return(Sa=function(e,t){return n.call(e,t)})(e,t)};"function"==typeof Sizzle&&(Ca=function(e,t){return Sizzle(e,t)[0]||null},ka=Sizzle,Sa=Sizzle.matchesSelector),sa.selection=function(){return sa.select(ca.documentElement)};var $a=sa.selection.prototype=[];$a.select=function(e){var t,n,r,i,o=[];e=T(e);for(var a=-1,s=this.length;++a<s;){o.push(t=[]),t.parentNode=(r=this[a]).parentNode;for(var l=-1,u=r.length;++l<u;)(i=r[l])?(t.push(n=e.call(i,i.__data__,l,a)),n&&"__data__"in i&&(n.__data__=i.__data__)):t.push(null)}return M(o)},$a.selectAll=function(e){var t,n,r=[];e=D(e);for(var i=-1,o=this.length;++i<o;)for(var a=this[i],s=-1,l=a.length;++s<l;)(n=a[s])&&(r.push(t=ua(e.call(n,n.__data__,s,i))),t.parentNode=n);return M(r)};var Ma="http://www.w3.org/1999/xhtml",Ta={svg:"http://www.w3.org/2000/svg",xhtml:Ma,xlink:"http://www.w3.org/1999/xlink",xml:"http://www.w3.org/XML/1998/namespace",xmlns:"http://www.w3.org/2000/xmlns/"};sa.ns={prefix:Ta,qualify:function(e){var t=e.indexOf(":"),n=e;return t>=0&&"xmlns"!==(n=e.slice(0,t))&&(e=e.slice(t+1)),Ta.hasOwnProperty(n)?{space:Ta[n],local:e}:e}},$a.attr=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node();return e=sa.ns.qualify(e),e.local?n.getAttributeNS(e.space,e.local):n.getAttribute(e)}for(t in e)this.each(E(t,e[t]));return this}return this.each(E(e,t))},$a.classed=function(e,t){if(arguments.length<2){if("string"==typeof e){var n=this.node(),r=(e=R(e)).length,i=-1;if(t=n.classList){for(;++i<r;)if(!t.contains(e[i]))return!1}else for(t=n.getAttribute("class");++i<r;)if(!A(e[i]).test(t))return!1;return!0}for(t in e)this.each(P(t,e[t]));return this}return this.each(P(e,t))},$a.style=function(e,n,r){var i=arguments.length;if(i<3){if("string"!=typeof e){i<2&&(n="");for(r in e)this.each(O(r,e[r],n));return this}if(i<2){var o=this.node();return t(o).getComputedStyle(o,null).getPropertyValue(e)}r=""}return this.each(O(e,n,r))},$a.property=function(e,t){if(arguments.length<2){if("string"==typeof e)return this.node()[e];for(t in e)this.each(N(t,e[t]));return this}return this.each(N(e,t))},$a.text=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.textContent=null==t?"":t}:null==e?function(){this.textContent=""}:function(){this.textContent=e}):this.node().textContent},$a.html=function(e){return arguments.length?this.each("function"==typeof e?function(){var t=e.apply(this,arguments);this.innerHTML=null==t?"":t}:null==e?function(){this.innerHTML=""}:function(){this.innerHTML=e}):this.node().innerHTML},$a.append=function(e){return e=I(e),this.select(function(){return this.appendChild(e.apply(this,arguments))})},$a.insert=function(e,t){return e=I(e),t=T(t),this.select(function(){return this.insertBefore(e.apply(this,arguments),t.apply(this,arguments)||null)})},$a.remove=function(){return this.each(j)},$a.data=function(e,t){function n(e,n){var r,i,o,a=e.length,d=n.length,f=Math.min(a,d),p=new Array(d),h=new Array(d),g=new Array(a);if(t){var m,v=new u,y=new Array(a);for(r=-1;++r<a;)(i=e[r])&&(v.has(m=t.call(i,i.__data__,r))?g[r]=i:v.set(m,i),y[r]=m);for(r=-1;++r<d;)(i=v.get(m=t.call(n,o=n[r],r)))?!0!==i&&(p[r]=i,i.__data__=o):h[r]=Y(o),v.set(m,!0);for(r=-1;++r<a;)r in y&&!0!==v.get(y[r])&&(g[r]=e[r])}else{for(r=-1;++r<f;)i=e[r],o=n[r],i?(i.__data__=o,p[r]=i):h[r]=Y(o);for(;r<d;++r)h[r]=Y(n[r]);for(;r<a;++r)g[r]=e[r]}h.update=p,h.parentNode=p.parentNode=g.parentNode=e.parentNode,s.push(h),l.push(p),c.push(g)}var r,i,o=-1,a=this.length;if(!arguments.length){for(e=new Array(a=(r=this[0]).length);++o<a;)(i=r[o])&&(e[o]=i.__data__);return e}var s=B([]),l=M([]),c=M([]);if("function"==typeof e)for(;++o<a;)n(r=this[o],e.call(r,r.parentNode.__data__,o));else for(;++o<a;)n(r=this[o],e);return l.enter=function(){return s},l.exit=function(){return c},l},$a.datum=function(e){return arguments.length?this.property("__data__",e):this.property("__data__")},$a.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]),t.parentNode=(n=this[o]).parentNode;for(var s=0,l=n.length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return M(i)},$a.order=function(){for(var e=-1,t=this.length;++e<t;)for(var n,r=this[e],i=r.length-1,o=r[i];--i>=0;)(n=r[i])&&(o&&o!==n.nextSibling&&o.parentNode.insertBefore(n,o),o=n);return this},$a.sort=function(e){e=H.apply(this,arguments);for(var t=-1,n=this.length;++t<n;)this[t].sort(e);return this.order()},$a.each=function(e){return V(this,function(t,n,r){e.call(t,t.__data__,n,r)})},$a.call=function(e){var t=ua(arguments);return e.apply(t[0]=this,t),this},$a.empty=function(){return!this.node()},$a.node=function(){for(var e=0,t=this.length;e<t;e++)for(var n=this[e],r=0,i=n.length;r<i;r++){var o=n[r];if(o)return o}return null},$a.size=function(){var e=0;return V(this,function(){++e}),e};var Da=[];sa.selection.enter=B,sa.selection.enter.prototype=Da,Da.append=$a.append,Da.empty=$a.empty,Da.node=$a.node,Da.call=$a.call,Da.size=$a.size,Da.select=function(e){for(var t,n,r,i,o,a=[],s=-1,l=this.length;++s<l;){r=(i=this[s]).update,a.push(t=[]),t.parentNode=i.parentNode;for(var u=-1,c=i.length;++u<c;)(o=i[u])?(t.push(r[u]=n=e.call(i.parentNode,o.__data__,u,s)),n.__data__=o.__data__):t.push(null)}return M(a)},Da.insert=function(e,t){return arguments.length<2&&(t=W(this)),$a.insert.call(this,e,t)},sa.select=function(t){var n;return"string"==typeof t?(n=[Ca(t,ca)]).parentNode=ca.documentElement:(n=[t]).parentNode=e(t),M([n])},sa.selectAll=function(e){var t;return"string"==typeof e?(t=ua(ka(e,ca))).parentNode=ca.documentElement:(t=ua(e)).parentNode=null,M([t])},$a.on=function(e,t,n){var r=arguments.length;if(r<3){if("string"!=typeof e){r<2&&(t=!1);for(n in e)this.each(U(n,e[n],t));return this}if(r<2)return(r=this.node()["__on"+e])&&r._;n=!1}return this.each(U(e,t,n))};var Ea=sa.map({mouseenter:"mouseover",mouseleave:"mouseout"});ca&&Ea.forEach(function(e){"on"+e in ca&&Ea.remove(e)});var La,Aa=0;sa.mouse=function(e){return X(e,S())};var Ra=this.navigator&&/WebKit/.test(this.navigator.userAgent)?-1:0;sa.touch=function(e,t,n){if(arguments.length<3&&(n=t,t=S().changedTouches),t)for(var r,i=0,o=t.length;i<o;++i)if((r=t[i]).identifier===n)return X(e,r)},sa.behavior.drag=function(){function e(){this.on("mousedown.drag",o).on("touchstart.drag",a)}function n(e,t,n,o,a){return function(){function s(){var e,n,r=t(f,g);r&&(e=r[0]-b[0],n=r[1]-b[1],h|=e|n,b=r,p({type:"drag",x:r[0]+u[0],y:r[1]+u[1],dx:e,dy:n}))}function l(){t(f,g)&&(v.on(o+m,null).on(a+m,null),y(h),p({type:"dragend"}))}var u,c=this,d=sa.event.target.correspondingElement||sa.event.target,f=c.parentNode,p=r.of(c,arguments),h=0,g=e(),m=".drag"+(null==g?"":"-"+g),v=sa.select(n(d)).on(o+m,s).on(a+m,l),y=K(d),b=t(f,g);i?(u=i.apply(c,arguments),u=[u.x-b[0],u.y-b[1]]):u=[0,0],p({type:"dragstart"})}}var r=$(e,"drag","dragstart","dragend"),i=null,o=n(w,sa.mouse,t,"mousemove","mouseup"),a=n(J,sa.touch,y,"touchmove","touchend");return e.origin=function(t){return arguments.length?(i=t,e):i},sa.rebind(e,r,"on")},sa.touches=function(e,t){return arguments.length<2&&(t=S().touches),t?ua(t).map(function(t){var n=X(e,t);return n.identifier=t.identifier,n}):[]};var Pa=1e-6,Fa=Pa*Pa,Oa=Math.PI,Na=2*Oa,Ia=Na-Pa,ja=Oa/2,Ya=Oa/180,za=180/Oa,Ha=Math.SQRT2;sa.interpolateZoom=function(e,t){var n,r,i=e[0],o=e[1],a=e[2],s=t[0],l=t[1],u=t[2],c=s-i,d=l-o,f=c*c+d*d;if(f<Fa)r=Math.log(u/a)/Ha,n=function(e){return[i+e*c,o+e*d,a*Math.exp(Ha*e*r)]};else{var p=Math.sqrt(f),h=(u*u-a*a+4*f)/(2*a*2*p),g=(u*u-a*a-4*f)/(2*u*2*p),m=Math.log(Math.sqrt(h*h+1)-h),v=Math.log(Math.sqrt(g*g+1)-g);r=(v-m)/Ha,n=function(e){var t=e*r,n=re(m),s=a/(2*p)*(n*ie(Ha*t+m)-ne(m));return[i+s*c,o+s*d,a*n/re(Ha*t+m)]}}return n.duration=1e3*r,n},sa.behavior.zoom=function(){function e(e){e.on(L,d).on(Ba+".zoom",p).on("dblclick.zoom",h).on(P,f)}function n(e){return[(e[0]-S.x)/S.k,(e[1]-S.y)/S.k]}function r(e){return[e[0]*S.k+S.x,e[1]*S.k+S.y]}function i(e){S.k=Math.max(T[0],Math.min(T[1],e))}function o(e,t){t=r(t),S.x+=e[0]-t[0],S.y+=e[1]-t[1]}function a(t,n,r,a){t.__chart__={x:S.x,y:S.y,k:S.k},i(Math.pow(2,a)),o(m=n,r),t=sa.select(t),D>0&&(t=t.transition().duration(D)),t.call(e.event)}function s(){w&&w.domain(x.range().map(function(e){return(e-S.x)/S.k}).map(x.invert)),C&&C.domain(_.range().map(function(e){return(e-S.y)/S.k}).map(_.invert))}function l(e){E++||e({type:"zoomstart"})}function u(e){s(),e({type:"zoom",scale:S.k,translate:[S.x,S.y]})}function c(e){--E||(e({type:"zoomend"}),m=null)}function d(){function e(){s=1,o(sa.mouse(i),f),u(a)}function r(){d.on(A,null).on(R,null),p(s),c(a)}var i=this,a=F.of(i,arguments),s=0,d=sa.select(t(i)).on(A,e).on(R,r),f=n(sa.mouse(i)),p=K(i);Nl.call(i),l(a)}function f(){function e(){var e=sa.touches(h);return p=S.k,e.forEach(function(e){e.identifier in m&&(m[e.identifier]=n(e))}),e}function t(){var t=sa.event.target;sa.select(t).on(x,r).on(w,s),_.push(t);for(var n=sa.event.changedTouches,i=0,o=n.length;i<o;++i)m[n[i].identifier]=null;var l=e(),u=Date.now();if(1===l.length){if(u-b<500){c=l[0];a(h,c,m[c.identifier],Math.floor(Math.log(S.k)/Math.LN2)+1),k()}b=u}else if(l.length>1){var c=l[0],d=l[1],f=c[0]-d[0],p=c[1]-d[1];v=f*f+p*p}}function r(){var e,t,n,r,a=sa.touches(h);Nl.call(h);for(var s=0,l=a.length;s<l;++s,r=null)if(n=a[s],r=m[n.identifier]){if(t)break;e=n,t=r}if(r){var c=(c=n[0]-e[0])*c+(c=n[1]-e[1])*c,d=v&&Math.sqrt(c/v);e=[(e[0]+n[0])/2,(e[1]+n[1])/2],t=[(t[0]+r[0])/2,(t[1]+r[1])/2],i(d*p)}b=null,o(e,t),u(g)}function s(){if(sa.event.touches.length){for(var t=sa.event.changedTouches,n=0,r=t.length;n<r;++n)delete m[t[n].identifier];for(var i in m)return void e()}sa.selectAll(_).on(y,null),C.on(L,d).on(P,f),$(),c(g)}var p,h=this,g=F.of(h,arguments),m={},v=0,y=".zoom-"+sa.event.changedTouches[0].identifier,x="touchmove"+y,w="touchend"+y,_=[],C=sa.select(h),$=K(h);t(),l(g),C.on(L,null).on(P,t)}function p(){var e=F.of(this,arguments);y?clearTimeout(y):(Nl.call(this),g=n(m=v||sa.mouse(this)),l(e)),y=setTimeout(function(){y=null,c(e)},50),k(),i(Math.pow(2,.002*Va())*S.k),o(m,g),u(e)}function h(){var e=sa.mouse(this),t=Math.log(S.k)/Math.LN2;a(this,e,n(e),sa.event.shiftKey?Math.ceil(t)-1:Math.floor(t)+1)}var g,m,v,y,b,x,w,_,C,S={x:0,y:0,k:1},M=[960,500],T=Wa,D=250,E=0,L="mousedown.zoom",A="mousemove.zoom",R="mouseup.zoom",P="touchstart.zoom",F=$(e,"zoomstart","zoom","zoomend");return Ba||(Ba="onwheel"in ca?(Va=function(){return-sa.event.deltaY*(sa.event.deltaMode?120:1)},"wheel"):"onmousewheel"in ca?(Va=function(){return sa.event.wheelDelta},"mousewheel"):(Va=function(){return-sa.event.detail},"MozMousePixelScroll")),e.event=function(e){e.each(function(){var e=F.of(this,arguments),t=S;Fl?sa.select(this).transition().each("start.zoom",function(){S=this.__chart__||{x:0,y:0,k:1},l(e)}).tween("zoom:zoom",function(){var n=M[0],r=M[1],i=m?m[0]:n/2,o=m?m[1]:r/2,a=sa.interpolateZoom([(i-S.x)/S.k,(o-S.y)/S.k,n/S.k],[(i-t.x)/t.k,(o-t.y)/t.k,n/t.k]);return function(t){var r=a(t),s=n/r[2];this.__chart__=S={x:i-r[0]*s,y:o-r[1]*s,k:s},u(e)}}).each("interrupt.zoom",function(){c(e)}).each("end.zoom",function(){c(e)}):(this.__chart__=S,l(e),u(e),c(e))})},e.translate=function(t){return arguments.length?(S={x:+t[0],y:+t[1],k:S.k},s(),e):[S.x,S.y]},e.scale=function(t){return arguments.length?(S={x:S.x,y:S.y,k:null},i(+t),s(),e):S.k},e.scaleExtent=function(t){return arguments.length?(T=null==t?Wa:[+t[0],+t[1]],e):T},e.center=function(t){return arguments.length?(v=t&&[+t[0],+t[1]],e):v},e.size=function(t){return arguments.length?(M=t&&[+t[0],+t[1]],e):M},e.duration=function(t){return arguments.length?(D=+t,e):D},e.x=function(t){return arguments.length?(w=t,x=t.copy(),S={x:0,y:0,k:1},e):w},e.y=function(t){return arguments.length?(C=t,_=t.copy(),S={x:0,y:0,k:1},e):C},sa.rebind(e,F,"on")};var Va,Ba,Wa=[0,1/0];sa.color=ae,ae.prototype.toString=function(){return this.rgb()+""},sa.hsl=se;var Ua=se.prototype=new ae;Ua.brighter=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,this.l/e)},Ua.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new se(this.h,this.s,e*this.l)},Ua.rgb=function(){return le(this.h,this.s,this.l)},sa.hcl=ue;var Ga=ue.prototype=new ae;Ga.brighter=function(e){return new ue(this.h,this.c,Math.min(100,this.l+qa*(arguments.length?e:1)))},Ga.darker=function(e){return new ue(this.h,this.c,Math.max(0,this.l-qa*(arguments.length?e:1)))},Ga.rgb=function(){return ce(this.h,this.c,this.l).rgb()},sa.lab=de;var qa=18,Ka=.95047,Xa=1,Ja=1.08883,Za=de.prototype=new ae;Za.brighter=function(e){return new de(Math.min(100,this.l+qa*(arguments.length?e:1)),this.a,this.b)},Za.darker=function(e){return new de(Math.max(0,this.l-qa*(arguments.length?e:1)),this.a,this.b)},Za.rgb=function(){return fe(this.l,this.a,this.b)},sa.rgb=ve;var Qa=ve.prototype=new ae;Qa.brighter=function(e){e=Math.pow(.7,arguments.length?e:1);var t=this.r,n=this.g,r=this.b,i=30;return t||n||r?(t&&t<i&&(t=i),n&&n<i&&(n=i),r&&r<i&&(r=i),new ve(Math.min(255,t/e),Math.min(255,n/e),Math.min(255,r/e))):new ve(i,i,i)},Qa.darker=function(e){return e=Math.pow(.7,arguments.length?e:1),new ve(e*this.r,e*this.g,e*this.b)},Qa.hsl=function(){return _e(this.r,this.g,this.b)},Qa.toString=function(){return"#"+xe(this.r)+xe(this.g)+xe(this.b)};var es=sa.map({aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074});es.forEach(function(e,t){es.set(e,ye(t))}),sa.functor=$e,sa.xhr=Me(y),sa.dsv=function(e,t){function n(e,n,o){arguments.length<3&&(o=n,n=null);var a=Te(e,t,null==n?r:i(n),o);return a.row=function(e){return arguments.length?a.response(null==(n=e)?r:i(e)):n},a}function r(e){return n.parse(e.responseText)}function i(e){return function(t){return n.parse(t.responseText,e)}}function o(t){return t.map(a).join(e)}function a(e){return s.test(e)?'"'+e.replace(/\"/g,'""')+'"':e}var s=new RegExp('["'+e+"\n]"),l=e.charCodeAt(0);return n.parse=function(e,t){var r;return n.parseRows(e,function(e,n){if(r)return r(e,n-1);var i=new Function("d","return {"+e.map(function(e,t){return JSON.stringify(e)+": d["+t+"]"}).join(",")+"}");r=t?function(e,n){return t(i(e),n)}:i})},n.parseRows=function(e,t){function n(){if(c>=u)return a;if(i)return i=!1,o;var t=c;if(34===e.charCodeAt(t)){for(var n=t;n++<u;)if(34===e.charCodeAt(n)){if(34!==e.charCodeAt(n+1))break;++n}return c=n+2,13===(r=e.charCodeAt(n+1))?(i=!0,10===e.charCodeAt(n+2)&&++c):10===r&&(i=!0),e.slice(t+1,n).replace(/""/g,'"')}for(;c<u;){var r=e.charCodeAt(c++),s=1;if(10===r)i=!0;else if(13===r)i=!0,10===e.charCodeAt(c)&&(++c,++s);else if(r!==l)continue;return e.slice(t,c-s)}return e.slice(t)}for(var r,i,o={},a={},s=[],u=e.length,c=0,d=0;(r=n())!==a;){for(var f=[];r!==o&&r!==a;)f.push(r),r=n();t&&null==(f=t(f,d++))||s.push(f)}return s},n.format=function(t){if(Array.isArray(t[0]))return n.formatRows(t);var r=new v,i=[];return t.forEach(function(e){for(var t in e)r.has(t)||i.push(r.add(t))}),[i.map(a).join(e)].concat(t.map(function(t){return i.map(function(e){return a(t[e])}).join(e)})).join("\n")},n.formatRows=function(e){return e.map(o).join("\n")},n},sa.csv=sa.dsv(",","text/csv"),sa.tsv=sa.dsv("\t","text/tab-separated-values");var ts,ns,rs,is,os=this[x(this,"requestAnimationFrame")]||function(e){setTimeout(e,17)};sa.timer=function(){Le.apply(this,arguments)},sa.timer.flush=function(){Re(),Pe()},sa.round=function(e,t){return t?Math.round(e*(t=Math.pow(10,t)))/t:Math.round(e)};var as=["y","z","a","f","p","n","µ","m","","k","M","G","T","P","E","Z","Y"].map(Oe);sa.formatPrefix=function(e,t){var n=0;return(e=+e)&&(e<0&&(e*=-1),t&&(e=sa.round(e,Fe(e,t))),n=1+Math.floor(1e-12+Math.log(e)/Math.LN10),n=Math.max(-24,Math.min(24,3*Math.floor((n-1)/3)))),as[8+n/3]};var ss=/(?:([^{])?([<>=^]))?([+\- ])?([$#])?(0)?(\d+)?(,)?(\.-?\d+)?([a-z%])?/i,ls=sa.map({b:function(e){return e.toString(2)},c:function(e){return String.fromCharCode(e)},o:function(e){return e.toString(8)},x:function(e){return e.toString(16)},X:function(e){return e.toString(16).toUpperCase()},g:function(e,t){return e.toPrecision(t)},e:function(e,t){return e.toExponential(t)},f:function(e,t){return e.toFixed(t)},r:function(e,t){return(e=sa.round(e,Fe(e,t))).toFixed(Math.max(0,Math.min(20,Fe(e*(1+1e-15),t))))}}),us=sa.time={},cs=Date;je.prototype={getDate:function(){return this._.getUTCDate()},getDay:function(){return this._.getUTCDay()},getFullYear:function(){return this._.getUTCFullYear()},getHours:function(){return this._.getUTCHours()},getMilliseconds:function(){return this._.getUTCMilliseconds()},getMinutes:function(){return this._.getUTCMinutes()},getMonth:function(){return this._.getUTCMonth()},getSeconds:function(){return this._.getUTCSeconds()},getTime:function(){return this._.getTime()},getTimezoneOffset:function(){return 0},valueOf:function(){return this._.valueOf()},setDate:function(){ds.setUTCDate.apply(this._,arguments)},setDay:function(){ds.setUTCDay.apply(this._,arguments)},setFullYear:function(){ds.setUTCFullYear.apply(this._,arguments)},setHours:function(){ds.setUTCHours.apply(this._,arguments)},setMilliseconds:function(){ds.setUTCMilliseconds.apply(this._,arguments)},setMinutes:function(){ds.setUTCMinutes.apply(this._,arguments)},setMonth:function(){ds.setUTCMonth.apply(this._,arguments)},setSeconds:function(){ds.setUTCSeconds.apply(this._,arguments)},setTime:function(){ds.setTime.apply(this._,arguments)}};var ds=Date.prototype;us.year=Ye(function(e){return(e=us.day(e)).setMonth(0,1),e},function(e,t){e.setFullYear(e.getFullYear()+t)},function(e){return e.getFullYear()}),us.years=us.year.range,us.years.utc=us.year.utc.range,us.day=Ye(function(e){var t=new cs(2e3,0);return t.setFullYear(e.getFullYear(),e.getMonth(),e.getDate()),t},function(e,t){e.setDate(e.getDate()+t)},function(e){return e.getDate()-1}),us.days=us.day.range,us.days.utc=us.day.utc.range,us.dayOfYear=function(e){var t=us.year(e);return Math.floor((e-t-6e4*(e.getTimezoneOffset()-t.getTimezoneOffset()))/864e5)},["sunday","monday","tuesday","wednesday","thursday","friday","saturday"].forEach(function(e,t){t=7-t;var n=us[e]=Ye(function(e){return(e=us.day(e)).setDate(e.getDate()-(e.getDay()+t)%7),e},function(e,t){e.setDate(e.getDate()+7*Math.floor(t))},function(e){var n=us.year(e).getDay();return Math.floor((us.dayOfYear(e)+(n+t)%7)/7)-(n!==t)});us[e+"s"]=n.range,us[e+"s"].utc=n.utc.range,us[e+"OfYear"]=function(e){var n=us.year(e).getDay();return Math.floor((us.dayOfYear(e)+(n+t)%7)/7)}}),us.week=us.sunday,us.weeks=us.sunday.range,us.weeks.utc=us.sunday.utc.range,us.weekOfYear=us.sundayOfYear;var fs={"-":"",_:" ",0:"0"},ps=/^\s*\d+/,hs=/^%/;sa.locale=function(e){return{numberFormat:Ne(e),timeFormat:He(e)}};var gs=sa.locale({decimal:".",thousands:",",grouping:[3],currency:["$",""],dateTime:"%a %b %e %X %Y",date:"%m/%d/%Y",time:"%H:%M:%S",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});sa.format=gs.numberFormat,sa.geo={},ut.prototype={s:0,t:0,add:function(e){ct(e,this.t,ms),ct(ms.s,this.s,this),this.s?this.t+=ms.t:this.s=ms.t},reset:function(){this.s=this.t=0},valueOf:function(){return this.s}};var ms=new ut;sa.geo.stream=function(e,t){e&&vs.hasOwnProperty(e.type)?vs[e.type](e,t):dt(e,t)};var vs={Feature:function(e,t){dt(e.geometry,t)},FeatureCollection:function(e,t){for(var n=e.features,r=-1,i=n.length;++r<i;)dt(n[r].geometry,t)}},ys={Sphere:function(e,t){t.sphere()},Point:function(e,t){e=e.coordinates,t.point(e[0],e[1],e[2])},MultiPoint:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)e=n[r],t.point(e[0],e[1],e[2])},LineString:function(e,t){ft(e.coordinates,t,0)},MultiLineString:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)ft(n[r],t,0)},Polygon:function(e,t){pt(e.coordinates,t)},MultiPolygon:function(e,t){for(var n=e.coordinates,r=-1,i=n.length;++r<i;)pt(n[r],t)},GeometryCollection:function(e,t){for(var n=e.geometries,r=-1,i=n.length;++r<i;)dt(n[r],t)}};sa.geo.area=function(e){return bs=0,sa.geo.stream(e,ws),bs};var bs,xs=new ut,ws={sphere:function(){bs+=4*Oa},point:w,lineStart:w,lineEnd:w,polygonStart:function(){xs.reset(),ws.lineStart=ht},polygonEnd:function(){var e=2*xs;bs+=e<0?4*Oa+e:e,ws.lineStart=ws.lineEnd=ws.point=w}};sa.geo.bounds=function(){function e(e,t){b.push(x=[c=e,f=e]),t<d&&(d=t),t>p&&(p=t)}function t(t,n){var r=gt([t*Ya,n*Ya]);if(v){var i=vt(v,r),o=vt([i[1],-i[0],0],i);xt(o),o=wt(o);var a=t-h,l=a>0?1:-1,u=o[0]*za*l,g=va(a)>180;if(g^(l*h<u&&u<l*t))(m=o[1]*za)>p&&(p=m);else if(u=(u+360)%360-180,g^(l*h<u&&u<l*t)){var m=-o[1]*za;m<d&&(d=m)}else n<d&&(d=n),n>p&&(p=n);g?t<h?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t):f>=c?(t<c&&(c=t),t>f&&(f=t)):t>h?s(c,t)>s(c,f)&&(f=t):s(t,f)>s(c,f)&&(c=t)}else e(t,n);v=r,h=t}function n(){w.point=t}function r(){x[0]=c,x[1]=f,w.point=e,v=null}function i(e,n){if(v){var r=e-h;y+=va(r)>180?r+(r>0?360:-360):r}else g=e,m=n;ws.point(e,n),t(e,n)}function o(){ws.lineStart()}function a(){i(g,m),ws.lineEnd(),va(y)>Pa&&(c=-(f=180)),x[0]=c,x[1]=f,v=null}function s(e,t){return(t-=e)<0?t+360:t}function l(e,t){return e[0]-t[0]}function u(e,t){return t[0]<=t[1]?t[0]<=e&&e<=t[1]:e<t[0]||t[1]<e}var c,d,f,p,h,g,m,v,y,b,x,w={point:e,lineStart:n,lineEnd:r,polygonStart:function(){w.point=i,w.lineStart=o,w.lineEnd=a,y=0,ws.polygonStart()},polygonEnd:function(){ws.polygonEnd(),w.point=e,w.lineStart=n,w.lineEnd=r,xs<0?(c=-(f=180),d=-(p=90)):y>Pa?p=90:y<-Pa&&(d=-90),x[0]=c,x[1]=f}};return function(e){p=f=-(c=d=1/0),b=[],sa.geo.stream(e,w);var t=b.length;if(t){b.sort(l);for(var n=1,r=[h=b[0]];n<t;++n)u((o=b[n])[0],h)||u(o[1],h)?(s(h[0],o[1])>s(h[0],h[1])&&(h[1]=o[1]),s(o[0],h[1])>s(h[0],h[1])&&(h[0]=o[0])):r.push(h=o);for(var i,o,a=-1/0,n=0,h=r[t=r.length-1];n<=t;h=o,++n)o=r[n],(i=s(h[1],o[0]))>a&&(a=i,c=o[0],f=h[1])}return b=x=null,c===1/0||d===1/0?[[NaN,NaN],[NaN,NaN]]:[[c,d],[f,p]]}}(),sa.geo.centroid=function(e){_s=Cs=ks=Ss=$s=Ms=Ts=Ds=Es=Ls=As=0,sa.geo.stream(e,Rs);var t=Es,n=Ls,r=As,i=t*t+n*n+r*r;return i<Fa&&(t=Ms,n=Ts,r=Ds,Cs<Pa&&(t=ks,n=Ss,r=$s),(i=t*t+n*n+r*r)<Fa)?[NaN,NaN]:[Math.atan2(n,t)*za,te(r/Math.sqrt(i))*za]};var _s,Cs,ks,Ss,$s,Ms,Ts,Ds,Es,Ls,As,Rs={sphere:w,point:Ct,lineStart:St,lineEnd:$t,polygonStart:function(){Rs.lineStart=Mt},polygonEnd:function(){Rs.lineStart=St}},Ps=Rt(Dt,Nt,jt,[-Oa,-Oa/2]),Fs=1e9;sa.geo.clipExtent=function(){var e,t,n,r,i,o,a={stream:function(e){return i&&(i.valid=!1),i=o(e),i.valid=!0,i},extent:function(s){return arguments.length?(o=Vt(e=+s[0][0],t=+s[0][1],n=+s[1][0],r=+s[1][1]),i&&(i.valid=!1,i=null),a):[[e,t],[n,r]]}};return a.extent([[0,0],[960,500]])},(sa.geo.conicEqualArea=function(){return Bt(Wt)}).raw=Wt,sa.geo.albers=function(){return sa.geo.conicEqualArea().rotate([96,0]).center([-.6,38.7]).parallels([29.5,45.5]).scale(1070)},sa.geo.albersUsa=function(){function e(e){var o=e[0],a=e[1];return t=null,n(o,a),t||(r(o,a),t)||i(o,a),t}var t,n,r,i,o=sa.geo.albers(),a=sa.geo.conicEqualArea().rotate([154,0]).center([-2,58.5]).parallels([55,65]),s=sa.geo.conicEqualArea().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(e,n){t=[e,n]}};return e.invert=function(e){var t=o.scale(),n=o.translate(),r=(e[0]-n[0])/t,i=(e[1]-n[1])/t;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?a:i>=.166&&i<.234&&r>=-.214&&r<-.115?s:o).invert(e)},e.stream=function(e){var t=o.stream(e),n=a.stream(e),r=s.stream(e);return{point:function(e,i){t.point(e,i),n.point(e,i),r.point(e,i)},sphere:function(){t.sphere(),n.sphere(),r.sphere()},lineStart:function(){t.lineStart(),n.lineStart(),r.lineStart()},lineEnd:function(){t.lineEnd(),n.lineEnd(),r.lineEnd()},polygonStart:function(){t.polygonStart(),n.polygonStart(),r.polygonStart()},polygonEnd:function(){t.polygonEnd(),n.polygonEnd(),r.polygonEnd()}}},e.precision=function(t){return arguments.length?(o.precision(t),a.precision(t),s.precision(t),e):o.precision()},e.scale=function(t){return arguments.length?(o.scale(t),a.scale(.35*t),s.scale(t),e.translate(o.translate())):o.scale()},e.translate=function(t){if(!arguments.length)return o.translate();var u=o.scale(),c=+t[0],d=+t[1];return n=o.translate(t).clipExtent([[c-.455*u,d-.238*u],[c+.455*u,d+.238*u]]).stream(l).point,r=a.translate([c-.307*u,d+.201*u]).clipExtent([[c-.425*u+Pa,d+.12*u+Pa],[c-.214*u-Pa,d+.234*u-Pa]]).stream(l).point,i=s.translate([c-.205*u,d+.212*u]).clipExtent([[c-.214*u+Pa,d+.166*u+Pa],[c-.115*u-Pa,d+.234*u-Pa]]).stream(l).point,e},e.scale(1070)};var Os,Ns,Is,js,Ys,zs,Hs={point:w,lineStart:w,lineEnd:w,polygonStart:function(){Ns=0,Hs.lineStart=Ut},polygonEnd:function(){Hs.lineStart=Hs.lineEnd=Hs.point=w,Os+=va(Ns/2)}},Vs={point:Gt,lineStart:w,lineEnd:w,polygonStart:w,polygonEnd:w},Bs={point:Xt,lineStart:Jt,lineEnd:Zt,polygonStart:function(){Bs.lineStart=Qt},polygonEnd:function(){Bs.point=Xt,Bs.lineStart=Jt,Bs.lineEnd=Zt}};sa.geo.path=function(){function e(e){return e&&("function"==typeof s&&o.pointRadius(+s.apply(this,arguments)),a&&a.valid||(a=i(o)),sa.geo.stream(e,a)),o.result()}function t(){return a=null,e}var n,r,i,o,a,s=4.5;return e.area=function(e){return Os=0,sa.geo.stream(e,i(Hs)),Os},e.centroid=function(e){return ks=Ss=$s=Ms=Ts=Ds=Es=Ls=As=0,sa.geo.stream(e,i(Bs)),As?[Es/As,Ls/As]:Ds?[Ms/Ds,Ts/Ds]:$s?[ks/$s,Ss/$s]:[NaN,NaN]},e.bounds=function(e){return Ys=zs=-(Is=js=1/0),sa.geo.stream(e,i(Vs)),[[Is,js],[Ys,zs]]},e.projection=function(e){return arguments.length?(i=(n=e)?e.stream||nn(e):y,t()):n},e.context=function(e){return arguments.length?(o=null==(r=e)?new qt:new en(e),"function"!=typeof s&&o.pointRadius(s),t()):r},e.pointRadius=function(t){return arguments.length?(s="function"==typeof t?t:(o.pointRadius(+t),+t),e):s},e.projection(sa.geo.albersUsa()).context(null)},sa.geo.transform=function(e){return{stream:function(t){var n=new rn(t);for(var r in e)n[r]=e[r];return n}}},rn.prototype={point:function(e,t){this.stream.point(e,t)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}},sa.geo.projection=an,sa.geo.projectionMutator=sn,(sa.geo.equirectangular=function(){return an(un)}).raw=un.invert=un,sa.geo.rotation=function(e){function t(t){return t=e(t[0]*Ya,t[1]*Ya),t[0]*=za,t[1]*=za,t}return e=dn(e[0]%360*Ya,e[1]*Ya,e.length>2?e[2]*Ya:0),t.invert=function(t){return t=e.invert(t[0]*Ya,t[1]*Ya),t[0]*=za,t[1]*=za,t},t},cn.invert=un,sa.geo.circle=function(){function e(){var e="function"==typeof r?r.apply(this,arguments):r,t=dn(-e[0]*Ya,-e[1]*Ya,0).invert,i=[];return n(null,null,1,{point:function(e,n){i.push(e=t(e,n)),e[0]*=za,e[1]*=za}}),{type:"Polygon",coordinates:[i]}}var t,n,r=[0,0],i=6;return e.origin=function(t){return arguments.length?(r=t,e):r},e.angle=function(r){return arguments.length?(n=gn((t=+r)*Ya,i*Ya),e):t},e.precision=function(r){return arguments.length?(n=gn(t*Ya,(i=+r)*Ya),e):i},e.angle(90)},sa.geo.distance=function(e,t){var n,r=(t[0]-e[0])*Ya,i=e[1]*Ya,o=t[1]*Ya,a=Math.sin(r),s=Math.cos(r),l=Math.sin(i),u=Math.cos(i),c=Math.sin(o),d=Math.cos(o);return Math.atan2(Math.sqrt((n=d*a)*n+(n=u*c-l*d*s)*n),l*c+u*d*s)},sa.geo.graticule=function(){function e(){return{type:"MultiLineString",coordinates:t()}}function t(){return sa.range(Math.ceil(o/m)*m,i,m).map(f).concat(sa.range(Math.ceil(u/v)*v,l,v).map(p)).concat(sa.range(Math.ceil(r/h)*h,n,h).filter(function(e){return va(e%m)>Pa}).map(c)).concat(sa.range(Math.ceil(s/g)*g,a,g).filter(function(e){return va(e%v)>Pa}).map(d))}var n,r,i,o,a,s,l,u,c,d,f,p,h=10,g=h,m=90,v=360,y=2.5;return e.lines=function(){return t().map(function(e){return{type:"LineString",coordinates:e}})},e.outline=function(){return{type:"Polygon",coordinates:[f(o).concat(p(l).slice(1),f(i).reverse().slice(1),p(u).reverse().slice(1))]}},e.extent=function(t){return arguments.length?e.majorExtent(t).minorExtent(t):e.minorExtent()},e.majorExtent=function(t){return arguments.length?(o=+t[0][0],i=+t[1][0],u=+t[0][1],l=+t[1][1],o>i&&(t=o,o=i,i=t),u>l&&(t=u,u=l,l=t),e.precision(y)):[[o,u],[i,l]]},e.minorExtent=function(t){return arguments.length?(r=+t[0][0],n=+t[1][0],s=+t[0][1],a=+t[1][1],r>n&&(t=r,r=n,n=t),s>a&&(t=s,s=a,a=t),e.precision(y)):[[r,s],[n,a]]},e.step=function(t){return arguments.length?e.majorStep(t).minorStep(t):e.minorStep()},e.majorStep=function(t){return arguments.length?(m=+t[0],v=+t[1],e):[m,v]},e.minorStep=function(t){return arguments.length?(h=+t[0],g=+t[1],e):[h,g]},e.precision=function(t){return arguments.length?(y=+t,c=vn(s,a,90),d=yn(r,n,y),f=vn(u,l,90),p=yn(o,i,y),e):y},e.majorExtent([[-180,-90+Pa],[180,90-Pa]]).minorExtent([[-180,-80-Pa],[180,80+Pa]])},sa.geo.greatArc=function(){function e(){return{type:"LineString",coordinates:[t||r.apply(this,arguments),n||i.apply(this,arguments)]}}var t,n,r=bn,i=xn;return e.distance=function(){return sa.geo.distance(t||r.apply(this,arguments),n||i.apply(this,arguments))},e.source=function(n){return arguments.length?(r=n,t="function"==typeof n?null:n,e):r},e.target=function(t){return arguments.length?(i=t,n="function"==typeof t?null:t,e):i},e.precision=function(){return arguments.length?e:0},e},sa.geo.interpolate=function(e,t){return wn(e[0]*Ya,e[1]*Ya,t[0]*Ya,t[1]*Ya)},sa.geo.length=function(e){return Ws=0,sa.geo.stream(e,Us),Ws};var Ws,Us={sphere:w,point:w,lineStart:_n,lineEnd:w,polygonStart:w,polygonEnd:w},Gs=Cn(function(e){return Math.sqrt(2/(1+e))},function(e){return 2*Math.asin(e/2)});(sa.geo.azimuthalEqualArea=function(){return an(Gs)}).raw=Gs;var qs=Cn(function(e){var t=Math.acos(e);return t&&t/Math.sin(t)},y);(sa.geo.azimuthalEquidistant=function(){return an(qs)}).raw=qs,(sa.geo.conicConformal=function(){return Bt(kn)}).raw=kn,(sa.geo.conicEquidistant=function(){return Bt(Sn)}).raw=Sn;var Ks=Cn(function(e){return 1/e},Math.atan);(sa.geo.gnomonic=function(){return an(Ks)}).raw=Ks,$n.invert=function(e,t){return[e,2*Math.atan(Math.exp(t))-ja]},(sa.geo.mercator=function(){return Mn($n)}).raw=$n;var Xs=Cn(function(){return 1},Math.asin);(sa.geo.orthographic=function(){return an(Xs)}).raw=Xs;var Js=Cn(function(e){return 1/(1+e)},function(e){return 2*Math.atan(e)});(sa.geo.stereographic=function(){return an(Js)}).raw=Js,Tn.invert=function(e,t){return[-t,2*Math.atan(Math.exp(e))-ja]},(sa.geo.transverseMercator=function(){var e=Mn(Tn),t=e.center,n=e.rotate;return e.center=function(e){return e?t([-e[1],e[0]]):(e=t(),[e[1],-e[0]])},e.rotate=function(e){return e?n([e[0],e[1],e.length>2?e[2]+90:90]):(e=n(),[e[0],e[1],e[2]-90])},n([0,0,90])}).raw=Tn,sa.geom={},sa.geom.hull=function(e){function t(e){if(e.length<3)return[];var t,i=$e(n),o=$e(r),a=e.length,s=[],l=[];for(t=0;t<a;t++)s.push([+i.call(this,e[t],t),+o.call(this,e[t],t),t]);for(s.sort(An),t=0;t<a;t++)l.push([s[t][0],-s[t][1]]);var u=Ln(s),c=Ln(l),d=c[0]===u[0],f=c[c.length-1]===u[u.length-1],p=[];for(t=u.length-1;t>=0;--t)p.push(e[s[u[t]][2]]);for(t=+d;t<c.length-f;++t)p.push(e[s[c[t]][2]]);return p}var n=Dn,r=En;return arguments.length?t(e):(t.x=function(e){return arguments.length?(n=e,t):n},t.y=function(e){return arguments.length?(r=e,t):r},t)},sa.geom.polygon=function(e){return _a(e,Zs),e};var Zs=sa.geom.polygon.prototype=[];Zs.area=function(){for(var e,t=-1,n=this.length,r=this[n-1],i=0;++t<n;)e=r,r=this[t],i+=e[1]*r[0]-e[0]*r[1];return.5*i},Zs.centroid=function(e){var t,n,r=-1,i=this.length,o=0,a=0,s=this[i-1];for(arguments.length||(e=-1/(6*this.area()));++r<i;)t=s,s=this[r],n=t[0]*s[1]-s[0]*t[1],o+=(t[0]+s[0])*n,a+=(t[1]+s[1])*n;return[o*e,a*e]},Zs.clip=function(e){for(var t,n,r,i,o,a,s=Fn(e),l=-1,u=this.length-Fn(this),c=this[u-1];++l<u;){for(t=e.slice(),e.length=0,i=this[l],o=t[(r=t.length-s)-1],n=-1;++n<r;)Rn(a=t[n],c,i)?(Rn(o,c,i)||e.push(Pn(o,a,c,i)),e.push(a)):Rn(o,c,i)&&e.push(Pn(o,a,c,i)),o=a;s&&e.push(e[0]),c=i}return e};var Qs,el,tl,nl,rl,il=[],ol=[];Vn.prototype.prepare=function(){for(var e,t=this.edges,n=t.length;n--;)(e=t[n].edge).b&&e.a||t.splice(n,1);return t.sort(Wn),t.length},tr.prototype={start:function(){return this.edge.l===this.site?this.edge.a:this.edge.b},end:function(){return this.edge.l===this.site?this.edge.b:this.edge.a}},nr.prototype={insert:function(e,t){var n,r,i;if(e){if(t.P=e,t.N=e.N,e.N&&(e.N.P=t),e.N=t,e.R){for(e=e.R;e.L;)e=e.L;e.L=t}else e.R=t;n=e}else this._?(e=ar(this._),t.P=null,t.N=e,e.P=e.L=t,n=e):(t.P=t.N=null,this._=t,n=null);for(t.L=t.R=null,t.U=n,t.C=!0,e=t;n&&n.C;)n===(r=n.U).L?(i=r.R)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.R&&(ir(this,n),n=(e=n).U),n.C=!1,r.C=!0,or(this,r)):(i=r.L)&&i.C?(n.C=i.C=!1,r.C=!0,e=r):(e===n.L&&(or(this,n),n=(e=n).U),n.C=!1,r.C=!0,ir(this,r)),n=e.U;this._.C=!1},remove:function(e){e.N&&(e.N.P=e.P),e.P&&(e.P.N=e.N),e.N=e.P=null;var t,n,r,i=e.U,o=e.L,a=e.R;if(n=o?a?ar(a):o:a,i?i.L===e?i.L=n:i.R=n:this._=n,o&&a?(r=n.C,n.C=e.C,n.L=o,o.U=n,n!==a?(i=n.U,n.U=e.U,e=n.R,i.L=e,n.R=a,a.U=n):(n.U=i,i=n,e=n.R)):(r=e.C,e=n),e&&(e.U=i),!r)if(e&&e.C)e.C=!1;else{do{if(e===this._)break;if(e===i.L){if((t=i.R).C&&(t.C=!1,i.C=!0,ir(this,i),t=i.R),t.L&&t.L.C||t.R&&t.R.C){t.R&&t.R.C||(t.L.C=!1,t.C=!0,or(this,t),t=i.R),t.C=i.C,i.C=t.R.C=!1,ir(this,i),e=this._;break}}else if((t=i.L).C&&(t.C=!1,i.C=!0,or(this,i),t=i.L),t.L&&t.L.C||t.R&&t.R.C){t.L&&t.L.C||(t.R.C=!1,t.C=!0,ir(this,t),t=i.L),t.C=i.C,i.C=t.L.C=!1,or(this,i),e=this._;break}t.C=!0,e=i,i=i.U}while(!e.C);e&&(e.C=!1)}}},sa.geom.voronoi=function(e){function t(e){var t=new Array(e.length),r=s[0][0],i=s[0][1],o=s[1][0],a=s[1][1];return sr(n(e),s).cells.forEach(function(n,s){var l=n.edges,u=n.site;(t[s]=l.length?l.map(function(e){var t=e.start();return[t.x,t.y]}):u.x>=r&&u.x<=o&&u.y>=i&&u.y<=a?[[r,a],[o,a],[o,i],[r,i]]:[]).point=e[s]}),t}function n(e){return e.map(function(e,t){return{x:Math.round(o(e,t)/Pa)*Pa,y:Math.round(a(e,t)/Pa)*Pa,i:t}})}var r=Dn,i=En,o=r,a=i,s=al;return e?t(e):(t.links=function(e){return sr(n(e)).edges.filter(function(e){return e.l&&e.r}).map(function(t){return{source:e[t.l.i],target:e[t.r.i]}})},t.triangles=function(e){var t=[];return sr(n(e)).cells.forEach(function(n,r){for(var i,o=n.site,a=n.edges.sort(Wn),s=-1,l=a.length,u=a[l-1].edge,c=u.l===o?u.r:u.l;++s<l;)u,i=c,c=(u=a[s].edge).l===o?u.r:u.l,r<i.i&&r<c.i&&ur(o,i,c)<0&&t.push([e[r],e[i.i],e[c.i]])}),t},t.x=function(e){return arguments.length?(o=$e(r=e),t):r},t.y=function(e){return arguments.length?(a=$e(i=e),t):i},t.clipExtent=function(e){return arguments.length?(s=null==e?al:e,t):s===al?null:s},t.size=function(e){return arguments.length?t.clipExtent(e&&[[0,0],e]):s===al?null:s&&s[1]},t)};var al=[[-1e6,-1e6],[1e6,1e6]];sa.geom.delaunay=function(e){return sa.geom.voronoi().triangles(e)},sa.geom.quadtree=function(e,t,n,r,i){function o(e){function o(e,t,n,r,i,o,a,s){if(!isNaN(n)&&!isNaN(r))if(e.leaf){var l=e.x,c=e.y;if(null!=l)if(va(l-n)+va(c-r)<.01)u(e,t,n,r,i,o,a,s);else{var d=e.point;e.x=e.y=e.point=null,u(e,d,l,c,i,o,a,s),u(e,t,n,r,i,o,a,s)}else e.x=n,e.y=r,e.point=t}else u(e,t,n,r,i,o,a,s)}function u(e,t,n,r,i,a,s,l){var u=.5*(i+s),c=.5*(a+l),d=n>=u,f=r>=c,p=f<<1|d;e.leaf=!1,e=e.nodes[p]||(e.nodes[p]={leaf:!0,nodes:[],point:null,x:null,y:null}),d?i=u:s=u,f?a=c:l=c,o(e,t,n,r,i,a,s,l)}var c,d,f,p,h,g,m,v,y,b=$e(s),x=$e(l);if(null!=t)g=t,m=n,v=r,y=i;else if(v=y=-(g=m=1/0),d=[],f=[],h=e.length,a)for(p=0;p<h;++p)(c=e[p]).x<g&&(g=c.x),c.y<m&&(m=c.y),c.x>v&&(v=c.x),c.y>y&&(y=c.y),d.push(c.x),f.push(c.y);else for(p=0;p<h;++p){var w=+b(c=e[p],p),_=+x(c,p);w<g&&(g=w),_<m&&(m=_),w>v&&(v=w),_>y&&(y=_),d.push(w),f.push(_)}var C=v-g,k=y-m;C>k?y=m+C:v=g+k;var S={leaf:!0,nodes:[],point:null,x:null,y:null};if(S.add=function(e){o(S,e,+b(e,++p),+x(e,p),g,m,v,y)},S.visit=function(e){fr(e,S,g,m,v,y)},S.find=function(e){return pr(S,e[0],e[1],g,m,v,y)},p=-1,null==t){for(;++p<h;)o(S,e[p],d[p],f[p],g,m,v,y);--p}else e.forEach(S.add);return d=f=e=c=null,S}var a,s=Dn,l=En;return(a=arguments.length)?(s=cr,l=dr,3===a&&(i=n,r=t,n=t=0),o(e)):(o.x=function(e){return arguments.length?(s=e,o):s},o.y=function(e){return arguments.length?(l=e,o):l},o.extent=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=+e[0][0],n=+e[0][1],r=+e[1][0],i=+e[1][1]),o):null==t?null:[[t,n],[r,i]]},o.size=function(e){return arguments.length?(null==e?t=n=r=i=null:(t=n=0,r=+e[0],i=+e[1]),o):null==t?null:[r-t,i-n]},o)},sa.interpolateRgb=hr,sa.interpolateObject=gr,sa.interpolateNumber=mr,sa.interpolateString=vr;var sl=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,ll=new RegExp(sl.source,"g");sa.interpolate=yr,sa.interpolators=[function(e,t){var n=typeof t;return("string"===n?es.has(t.toLowerCase())||/^(#|rgb\(|hsl\()/i.test(t)?hr:vr:t instanceof ae?hr:Array.isArray(t)?br:"object"===n&&isNaN(t)?gr:mr)(e,t)}],sa.interpolateArray=br;var ul=function(){return y},cl=sa.map({linear:ul,poly:$r,quad:function(){return Cr},cubic:function(){return kr},sin:function(){return Mr},exp:function(){return Tr},circle:function(){return Dr},elastic:Er,back:Lr,bounce:function(){return Ar}}),dl=sa.map({in:y,out:wr,"in-out":_r,"out-in":function(e){return _r(wr(e))}});sa.ease=function(e){var t=e.indexOf("-"),n=t>=0?e.slice(0,t):e,r=t>=0?e.slice(t+1):"in";return n=cl.get(n)||ul,r=dl.get(r)||y,xr(r(n.apply(null,la.call(arguments,1))))},sa.interpolateHcl=Rr,sa.interpolateHsl=Pr,sa.interpolateLab=Fr,sa.interpolateRound=Or,sa.transform=function(e){var t=ca.createElementNS(sa.ns.prefix.svg,"g");return(sa.transform=function(e){if(null!=e){t.setAttribute("transform",e);var n=t.transform.baseVal.consolidate()}return new Nr(n?n.matrix:fl)})(e)},Nr.prototype.toString=function(){return"translate("+this.translate+")rotate("+this.rotate+")skewX("+this.skew+")scale("+this.scale+")"};var fl={a:1,b:0,c:0,d:1,e:0,f:0};sa.interpolateTransform=Ur,sa.layout={},sa.layout.bundle=function(){return function(e){for(var t=[],n=-1,r=e.length;++n<r;)t.push(Kr(e[n]));return t}},sa.layout.chord=function(){function e(){var e,u,d,f,p,h={},g=[],m=sa.range(o),v=[];for(n=[],r=[],e=0,f=-1;++f<o;){for(u=0,p=-1;++p<o;)u+=i[f][p];g.push(u),v.push(sa.range(o)),e+=u}for(a&&m.sort(function(e,t){return a(g[e],g[t])}),s&&v.forEach(function(e,t){e.sort(function(e,n){return s(i[t][e],i[t][n])})}),e=(Na-c*o)/e,u=0,f=-1;++f<o;){for(d=u,p=-1;++p<o;){var y=m[f],b=v[y][p],x=i[y][b],w=u,_=u+=x*e;h[y+"-"+b]={index:y,subindex:b,startAngle:w,endAngle:_,value:x}}r[y]={index:y,startAngle:d,endAngle:u,value:g[y]},u+=c}for(f=-1;++f<o;)for(p=f-1;++p<o;){var C=h[f+"-"+p],k=h[p+"-"+f];(C.value||k.value)&&n.push(C.value<k.value?{source:k,target:C}:{source:C,target:k})}l&&t()}function t(){n.sort(function(e,t){return l((e.source.value+e.target.value)/2,(t.source.value+t.target.value)/2)})}var n,r,i,o,a,s,l,u={},c=0;return u.matrix=function(e){return arguments.length?(o=(i=e)&&i.length,n=r=null,u):i},u.padding=function(e){return arguments.length?(c=e,n=r=null,u):c},u.sortGroups=function(e){return arguments.length?(a=e,n=r=null,u):a},u.sortSubgroups=function(e){return arguments.length?(s=e,n=null,u):s},u.sortChords=function(e){return arguments.length?(l=e,n&&t(),u):l},u.chords=function(){return n||e(),n},u.groups=function(){return r||e(),r},u},sa.layout.force=function(){function e(e){return function(t,n,r,i){if(t.point!==e){var o=t.cx-e.x,a=t.cy-e.y,s=i-n,l=o*o+a*a;if(s*s/v<l){if(l<g){u=t.charge/l;e.px-=o*u,e.py-=a*u}return!0}if(t.point&&l&&l<g){var u=t.pointCharge/l;e.px-=o*u,e.py-=a*u}}return!t.charge}}function t(e){e.px=sa.event.x,e.py=sa.event.y,l.resume()}var n,r,i,o,a,s,l={},u=sa.dispatch("start","tick","end"),c=[1,1],d=.9,f=pl,p=hl,h=-30,g=gl,m=.1,v=.64,b=[],x=[];return l.tick=function(){if((i*=.99)<.005)return n=null,u.end({type:"end",alpha:i=0}),!0;var t,r,l,f,p,g,v,y,w,_=b.length,C=x.length;for(r=0;r<C;++r)f=(l=x[r]).source,(g=(y=(p=l.target).x-f.x)*y+(w=p.y-f.y)*w)&&(y*=g=i*a[r]*((g=Math.sqrt(g))-o[r])/g,w*=g,p.x-=y*(v=f.weight+p.weight?f.weight/(f.weight+p.weight):.5),p.y-=w*v,f.x+=y*(v=1-v),f.y+=w*v);if((v=i*m)&&(y=c[0]/2,w=c[1]/2,r=-1,v))for(;++r<_;)(l=b[r]).x+=(y-l.x)*v,l.y+=(w-l.y)*v;if(h)for(ni(t=sa.geom.quadtree(b),i,s),r=-1;++r<_;)(l=b[r]).fixed||t.visit(e(l));for(r=-1;++r<_;)(l=b[r]).fixed?(l.x=l.px,l.y=l.py):(l.x-=(l.px-(l.px=l.x))*d,l.y-=(l.py-(l.py=l.y))*d);u.tick({type:"tick",alpha:i})},l.nodes=function(e){return arguments.length?(b=e,l):b},l.links=function(e){return arguments.length?(x=e,l):x},l.size=function(e){return arguments.length?(c=e,l):c},l.linkDistance=function(e){return arguments.length?(f="function"==typeof e?e:+e,l):f},l.distance=l.linkDistance,l.linkStrength=function(e){return arguments.length?(p="function"==typeof e?e:+e,l):p},l.friction=function(e){return arguments.length?(d=+e,l):d},l.charge=function(e){return arguments.length?(h="function"==typeof e?e:+e,l):h},l.chargeDistance=function(e){return arguments.length?(g=e*e,l):Math.sqrt(g)},l.gravity=function(e){return arguments.length?(m=+e,l):m},l.theta=function(e){return arguments.length?(v=e*e,l):Math.sqrt(v)},l.alpha=function(e){return arguments.length?(e=+e,i?e>0?i=e:(n.c=null,n.t=NaN,n=null,u.end({type:"end",alpha:i=0})):e>0&&(u.start({type:"start",alpha:i=e}),n=Le(l.tick)),l):i},l.start=function(){function e(e,r){if(!n){for(n=new Array(i),l=0;l<i;++l)n[l]=[];for(l=0;l<u;++l){var o=x[l];n[o.source.index].push(o.target),n[o.target.index].push(o.source)}}for(var a,s=n[t],l=-1,c=s.length;++l<c;)if(!isNaN(a=s[l][e]))return a;return Math.random()*r}var t,n,r,i=b.length,u=x.length,d=c[0],g=c[1];for(t=0;t<i;++t)(r=b[t]).index=t,r.weight=0;for(t=0;t<u;++t)"number"==typeof(r=x[t]).source&&(r.source=b[r.source]),"number"==typeof r.target&&(r.target=b[r.target]),++r.source.weight,++r.target.weight;for(t=0;t<i;++t)r=b[t],isNaN(r.x)&&(r.x=e("x",d)),isNaN(r.y)&&(r.y=e("y",g)),isNaN(r.px)&&(r.px=r.x),isNaN(r.py)&&(r.py=r.y);if(o=[],"function"==typeof f)for(t=0;t<u;++t)o[t]=+f.call(this,x[t],t);else for(t=0;t<u;++t)o[t]=f;if(a=[],"function"==typeof p)for(t=0;t<u;++t)a[t]=+p.call(this,x[t],t);else for(t=0;t<u;++t)a[t]=p;if(s=[],"function"==typeof h)for(t=0;t<i;++t)s[t]=+h.call(this,b[t],t);else for(t=0;t<i;++t)s[t]=h;return l.resume()},l.resume=function(){return l.alpha(.1)},l.stop=function(){return l.alpha(0)},l.drag=function(){if(r||(r=sa.behavior.drag().origin(y).on("dragstart.force",Zr).on("drag.force",t).on("dragend.force",Qr)),!arguments.length)return r;this.on("mouseover.force",ei).on("mouseout.force",ti).call(r)},sa.rebind(l,u,"on")};var pl=20,hl=1,gl=1/0;sa.layout.hierarchy=function(){function e(i){var o,a=[i],s=[];for(i.depth=0;null!=(o=a.pop());)if(s.push(o),(u=n.call(e,o,o.depth))&&(l=u.length)){for(var l,u,c;--l>=0;)a.push(c=u[l]),c.parent=o,c.depth=o.depth+1;r&&(o.value=0),o.children=u}else r&&(o.value=+r.call(e,o,o.depth)||0),delete o.children;return oi(i,function(e){var n,i;t&&(n=e.children)&&n.sort(t),r&&(i=e.parent)&&(i.value+=e.value)}),s}var t=li,n=ai,r=si;return e.sort=function(n){return arguments.length?(t=n,e):t},e.children=function(t){return arguments.length?(n=t,e):n},e.value=function(t){return arguments.length?(r=t,e):r},e.revalue=function(t){return r&&(ii(t,function(e){e.children&&(e.value=0)}),oi(t,function(t){var n;t.children||(t.value=+r.call(e,t,t.depth)||0),(n=t.parent)&&(n.value+=t.value)})),t},e},sa.layout.partition=function(){function e(t,n,r,i){var o=t.children;if(t.x=n,t.y=t.depth*i,t.dx=r,t.dy=i,o&&(a=o.length)){var a,s,l,u=-1;for(r=t.value?r/t.value:0;++u<a;)e(s=o[u],n,l=s.value*r,i),n+=l}}function t(e){var n=e.children,r=0;if(n&&(i=n.length))for(var i,o=-1;++o<i;)r=Math.max(r,t(n[o]));return 1+r}function n(n,o){var a=r.call(this,n,o);return e(a[0],0,i[0],i[1]/t(a[0])),a}var r=sa.layout.hierarchy(),i=[1,1];return n.size=function(e){return arguments.length?(i=e,n):i},ri(n,r)},sa.layout.pie=function(){function e(a){var s,l=a.length,u=a.map(function(n,r){return+t.call(e,n,r)}),c=+("function"==typeof r?r.apply(this,arguments):r),d=("function"==typeof i?i.apply(this,arguments):i)-c,f=Math.min(Math.abs(d)/l,+("function"==typeof o?o.apply(this,arguments):o)),p=f*(d<0?-1:1),h=sa.sum(u),g=h?(d-l*p)/h:0,m=sa.range(l),v=[];return null!=n&&m.sort(n===ml?function(e,t){return u[t]-u[e]}:function(e,t){return n(a[e],a[t])}),m.forEach(function(e){v[e]={data:a[e],value:s=u[e],startAngle:c,endAngle:c+=s*g+p,padAngle:f}}),v}var t=Number,n=ml,r=0,i=Na,o=0;return e.value=function(n){return arguments.length?(t=n,e):t},e.sort=function(t){return arguments.length?(n=t,e):n},e.startAngle=function(t){return arguments.length?(r=t,e):r},e.endAngle=function(t){return arguments.length?(i=t,e):i},e.padAngle=function(t){return arguments.length?(o=t,e):o},e};var ml={};sa.layout.stack=function(){function e(s,l){if(!(f=s.length))return s;var u=s.map(function(n,r){return t.call(e,n,r)}),c=u.map(function(t){return t.map(function(t,n){return[o.call(e,t,n),a.call(e,t,n)]})}),d=n.call(e,c,l);u=sa.permute(u,d),c=sa.permute(c,d);var f,p,h,g,m=r.call(e,c,l),v=u[0].length;for(h=0;h<v;++h)for(i.call(e,u[0][h],g=m[h],c[0][h][1]),p=1;p<f;++p)i.call(e,u[p][h],g+=c[p-1][h][1],c[p][h][1]);return s}var t=y,n=pi,r=hi,i=fi,o=ci,a=di;return e.values=function(n){return arguments.length?(t=n,e):t},e.order=function(t){return arguments.length?(n="function"==typeof t?t:vl.get(t)||pi,e):n},e.offset=function(t){return arguments.length?(r="function"==typeof t?t:yl.get(t)||hi,e):r},e.x=function(t){return arguments.length?(o=t,e):o},e.y=function(t){return arguments.length?(a=t,e):a},e.out=function(t){return arguments.length?(i=t,e):i},e};var vl=sa.map({"inside-out":function(e){var t,n,r=e.length,i=e.map(gi),o=e.map(mi),a=sa.range(r).sort(function(e,t){return i[e]-i[t]}),s=0,l=0,u=[],c=[];for(t=0;t<r;++t)n=a[t],s<l?(s+=o[n],u.push(n)):(l+=o[n],c.push(n));return c.reverse().concat(u)},reverse:function(e){return sa.range(e.length).reverse()},default:pi}),yl=sa.map({silhouette:function(e){var t,n,r,i=e.length,o=e[0].length,a=[],s=0,l=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];r>s&&(s=r),a.push(r)}for(n=0;n<o;++n)l[n]=(s-a[n])/2;return l},wiggle:function(e){var t,n,r,i,o,a,s,l,u,c=e.length,d=e[0],f=d.length,p=[];for(p[0]=l=u=0,n=1;n<f;++n){for(t=0,i=0;t<c;++t)i+=e[t][n][1];for(t=0,o=0,s=d[n][0]-d[n-1][0];t<c;++t){for(r=0,a=(e[t][n][1]-e[t][n-1][1])/(2*s);r<t;++r)a+=(e[r][n][1]-e[r][n-1][1])/s;o+=a*e[t][n][1]}p[n]=l-=i?o/i*s:0,l<u&&(u=l)}for(n=0;n<f;++n)p[n]-=u;return p},expand:function(e){var t,n,r,i=e.length,o=e[0].length,a=1/i,s=[];for(n=0;n<o;++n){for(t=0,r=0;t<i;t++)r+=e[t][n][1];if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=a}for(n=0;n<o;++n)s[n]=0;return s},zero:hi});sa.layout.histogram=function(){function e(e,o){for(var a,s,l=[],u=e.map(n,this),c=r.call(this,u,o),d=i.call(this,c,u,o),o=-1,f=u.length,p=d.length-1,h=t?1:1/f;++o<p;)(a=l[o]=[]).dx=d[o+1]-(a.x=d[o]),a.y=0;if(p>0)for(o=-1;++o<f;)(s=u[o])>=c[0]&&s<=c[1]&&((a=l[sa.bisect(d,s,1,p)-1]).y+=h,a.push(e[o]));return l}var t=!0,n=Number,r=xi,i=yi;return e.value=function(t){return arguments.length?(n=t,e):n},e.range=function(t){return arguments.length?(r=$e(t),e):r},e.bins=function(t){return arguments.length?(i="number"==typeof t?function(e){return bi(e,t)}:$e(t),e):i},e.frequency=function(n){return arguments.length?(t=!!n,e):t},e},sa.layout.pack=function(){function e(e,o){var a=n.call(this,e,o),s=a[0],l=i[0],u=i[1],c=null==t?Math.sqrt:"function"==typeof t?t:function(){return t};if(s.x=s.y=0,oi(s,function(e){e.r=+c(e.value)}),oi(s,Si),r){var d=r*(t?1:Math.max(2*s.r/l,2*s.r/u))/2;oi(s,function(e){e.r+=d}),oi(s,Si),oi(s,function(e){e.r-=d})}return Ti(s,l/2,u/2,t?1:1/Math.max(2*s.r/l,2*s.r/u)),a}var t,n=sa.layout.hierarchy().sort(wi),r=0,i=[1,1];return e.size=function(t){return arguments.length?(i=t,e):i},e.radius=function(n){return arguments.length?(t=null==n||"function"==typeof n?n:+n,e):t},e.padding=function(t){return arguments.length?(r=+t,e):r},ri(e,n)},sa.layout.tree=function(){function e(e,i){var c=a.call(this,e,i),d=c[0],f=t(d);if(oi(f,n),f.parent.m=-f.z,ii(f,r),u)ii(d,o);else{var p=d,h=d,g=d;ii(d,function(e){e.x<p.x&&(p=e),e.x>h.x&&(h=e),e.depth>g.depth&&(g=e)});var m=s(p,h)/2-p.x,v=l[0]/(h.x+s(h,p)/2+m),y=l[1]/(g.depth||1);ii(d,function(e){e.x=(e.x+m)*v,e.y=e.depth*y})}return c}function t(e){for(var t,n={A:null,children:[e]},r=[n];null!=(t=r.pop());)for(var i,o=t.children,a=0,s=o.length;a<s;++a)r.push((o[a]=i={_:o[a],parent:t,children:(i=o[a].children)&&i.slice()||[],A:null,a:null,z:0,m:0,c:0,s:0,t:null,i:a}).a=i);return n.children[0]}function n(e){var t=e.children,n=e.parent.children,r=e.i?n[e.i-1]:null;if(t.length){Pi(e);var o=(t[0].z+t[t.length-1].z)/2;r?(e.z=r.z+s(e._,r._),e.m=e.z-o):e.z=o}else r&&(e.z=r.z+s(e._,r._));e.parent.A=i(e,r,e.parent.A||n[0])}function r(e){e._.x=e.z+e.parent.m,e.m+=e.parent.m}function i(e,t,n){if(t){for(var r,i=e,o=e,a=t,l=i.parent.children[0],u=i.m,c=o.m,d=a.m,f=l.m;a=Ai(a),i=Li(i),a&&i;)l=Li(l),(o=Ai(o)).a=e,(r=a.z+d-i.z-u+s(a._,i._))>0&&(Ri(Fi(a,e,n),e,r),u+=r,c+=r),d+=a.m,u+=i.m,f+=l.m,c+=o.m;a&&!Ai(o)&&(o.t=a,o.m+=d-c),i&&!Li(l)&&(l.t=i,l.m+=u-f,n=e)}return n}function o(e){e.x*=l[0],e.y=e.depth*l[1]}var a=sa.layout.hierarchy().sort(null).value(null),s=Ei,l=[1,1],u=null;return e.separation=function(t){return arguments.length?(s=t,e):s},e.size=function(t){return arguments.length?(u=null==(l=t)?o:null,e):u?null:l},e.nodeSize=function(t){return arguments.length?(u=null==(l=t)?null:o,e):u?l:null},ri(e,a)},sa.layout.cluster=function(){function e(e,o){var a,s=t.call(this,e,o),l=s[0],u=0;oi(l,function(e){var t=e.children;t&&t.length?(e.x=Ni(t),e.y=Oi(t)):(e.x=a?u+=n(e,a):0,e.y=0,a=e)});var c=Ii(l),d=ji(l),f=c.x-n(c,d)/2,p=d.x+n(d,c)/2;return oi(l,i?function(e){e.x=(e.x-l.x)*r[0],e.y=(l.y-e.y)*r[1]}:function(e){e.x=(e.x-f)/(p-f)*r[0],e.y=(1-(l.y?e.y/l.y:1))*r[1]}),s}var t=sa.layout.hierarchy().sort(null).value(null),n=Ei,r=[1,1],i=!1;return e.separation=function(t){return arguments.length?(n=t,e):n},e.size=function(t){return arguments.length?(i=null==(r=t),e):i?null:r},e.nodeSize=function(t){return arguments.length?(i=null!=(r=t),e):i?r:null},ri(e,t)},sa.layout.treemap=function(){function e(e,t){for(var n,r,i=-1,o=e.length;++i<o;)r=(n=e[i]).value*(t<0?0:t),n.area=isNaN(r)||r<=0?0:r}function t(n){var o=n.children;if(o&&o.length){var a,s,l,u=d(n),c=[],f=o.slice(),h=1/0,g="slice"===p?u.dx:"dice"===p?u.dy:"slice-dice"===p?1&n.depth?u.dy:u.dx:Math.min(u.dx,u.dy);for(e(f,u.dx*u.dy/n.value),c.area=0;(l=f.length)>0;)c.push(a=f[l-1]),c.area+=a.area,"squarify"!==p||(s=r(c,g))<=h?(f.pop(),h=s):(c.area-=c.pop().area,i(c,g,u,!1),g=Math.min(u.dx,u.dy),c.length=c.area=0,h=1/0);c.length&&(i(c,g,u,!0),c.length=c.area=0),o.forEach(t)}}function n(t){var r=t.children;if(r&&r.length){var o,a=d(t),s=r.slice(),l=[];for(e(s,a.dx*a.dy/t.value),l.area=0;o=s.pop();)l.push(o),l.area+=o.area,null!=o.z&&(i(l,o.z?a.dx:a.dy,a,!s.length),l.length=l.area=0);r.forEach(n)}}function r(e,t){for(var n,r=e.area,i=0,o=1/0,a=-1,s=e.length;++a<s;)(n=e[a].area)&&(n<o&&(o=n),n>i&&(i=n));return r*=r,t*=t,r?Math.max(t*i*h/r,r/(t*o*h)):1/0}function i(e,t,n,r){var i,o=-1,a=e.length,s=n.x,u=n.y,c=t?l(e.area/t):0;if(t==n.dx){for((r||c>n.dy)&&(c=n.dy);++o<a;)(i=e[o]).x=s,i.y=u,i.dy=c,s+=i.dx=Math.min(n.x+n.dx-s,c?l(i.area/c):0);i.z=!0,i.dx+=n.x+n.dx-s,n.y+=c,n.dy-=c}else{for((r||c>n.dx)&&(c=n.dx);++o<a;)(i=e[o]).x=s,i.y=u,i.dx=c,u+=i.dy=Math.min(n.y+n.dy-u,c?l(i.area/c):0);i.z=!1,i.dy+=n.y+n.dy-u,n.x+=c,n.dx-=c}}function o(r){var i=a||s(r),o=i[0];return o.x=o.y=0,o.value?(o.dx=u[0],o.dy=u[1]):o.dx=o.dy=0,a&&s.revalue(o),e([o],o.dx*o.dy/o.value),(a?n:t)(o),f&&(a=i),i}var a,s=sa.layout.hierarchy(),l=Math.round,u=[1,1],c=null,d=Yi,f=!1,p="squarify",h=.5*(1+Math.sqrt(5));return o.size=function(e){return arguments.length?(u=e,o):u},o.padding=function(e){function t(t){var n=e.call(o,t,t.depth);return null==n?Yi(t):zi(t,"number"==typeof n?[n,n,n,n]:n)}function n(t){return zi(t,e)}if(!arguments.length)return c;var r;return d=null==(c=e)?Yi:"function"==(r=typeof e)?t:"number"===r?(e=[e,e,e,e],n):n,o},o.round=function(e){return arguments.length?(l=e?Math.round:Number,o):l!=Number},o.sticky=function(e){return arguments.length?(f=e,a=null,o):f},o.ratio=function(e){return arguments.length?(h=e,o):h},o.mode=function(e){return arguments.length?(p=e+"",o):p},ri(o,s)},sa.random={normal:function(e,t){var n=arguments.length;return n<2&&(t=1),n<1&&(e=0),function(){var n,r,i;do{i=(n=2*Math.random()-1)*n+(r=2*Math.random()-1)*r}while(!i||i>1);return e+t*n*Math.sqrt(-2*Math.log(i)/i)}},logNormal:function(){var e=sa.random.normal.apply(sa,arguments);return function(){return Math.exp(e())}},bates:function(e){var t=sa.random.irwinHall(e);return function(){return t()/e}},irwinHall:function(e){return function(){for(var t=0,n=0;n<e;n++)t+=Math.random();return t}}},sa.scale={};var bl={floor:y,ceil:y};sa.scale.linear=function(){return qi([0,1],[0,1],yr,!1)};var xl={s:1,g:1,p:1,r:1,e:1};sa.scale.log=function(){return no(sa.scale.linear().domain([0,1]),10,!0,[1,10])};var wl=sa.format(".0e"),_l={floor:function(e){return-Math.ceil(-e)},ceil:function(e){return-Math.floor(-e)}};sa.scale.pow=function(){return ro(sa.scale.linear(),1,[0,1])},sa.scale.sqrt=function(){return sa.scale.pow().exponent(.5)},sa.scale.ordinal=function(){return oo([],{t:"range",a:[[]]})},sa.scale.category10=function(){return sa.scale.ordinal().range(Cl)},sa.scale.category20=function(){return sa.scale.ordinal().range(kl)},sa.scale.category20b=function(){return sa.scale.ordinal().range(Sl)},sa.scale.category20c=function(){return sa.scale.ordinal().range($l)};var Cl=[2062260,16744206,2924588,14034728,9725885,9197131,14907330,8355711,12369186,1556175].map(be),kl=[2062260,11454440,16744206,16759672,2924588,10018698,14034728,16750742,9725885,12955861,9197131,12885140,14907330,16234194,8355711,13092807,12369186,14408589,1556175,10410725].map(be),Sl=[3750777,5395619,7040719,10264286,6519097,9216594,11915115,13556636,9202993,12426809,15186514,15190932,8666169,11356490,14049643,15177372,8077683,10834324,13528509,14589654].map(be),$l=[3244733,7057110,10406625,13032431,15095053,16616764,16625259,16634018,3253076,7652470,10607003,13101504,7695281,10394312,12369372,14342891,6513507,9868950,12434877,14277081].map(be);sa.scale.quantile=function(){return ao([],[])},sa.scale.quantize=function(){return so(0,1,[0,1])},sa.scale.threshold=function(){return lo([.5],[0,1])},sa.scale.identity=function(){return uo([0,1])},sa.svg={},sa.svg.arc=function(){function e(){var e=Math.max(0,+n.apply(this,arguments)),u=Math.max(0,+r.apply(this,arguments)),c=a.apply(this,arguments)-ja,d=s.apply(this,arguments)-ja,f=Math.abs(d-c),p=c>d?0:1;if(u<e&&(h=u,u=e,e=h),f>=Ia)return t(u,p)+(e?t(e,1-p):"")+"Z";var h,g,m,v,y,b,x,w,_,C,k,S,$=0,M=0,T=[];if((v=(+l.apply(this,arguments)||0)/2)&&(m=o===Ml?Math.sqrt(e*e+u*u):+o.apply(this,arguments),p||(M*=-1),u&&(M=te(m/u*Math.sin(v))),e&&($=te(m/e*Math.sin(v)))),u){y=u*Math.cos(c+M),b=u*Math.sin(c+M),x=u*Math.cos(d-M),w=u*Math.sin(d-M);var D=Math.abs(d-c-2*M)<=Oa?0:1;if(M&&vo(y,b,x,w)===p^D){var E=(c+d)/2;y=u*Math.cos(E),b=u*Math.sin(E),x=w=null}}else y=b=0;if(e){_=e*Math.cos(d-$),C=e*Math.sin(d-$),k=e*Math.cos(c+$),S=e*Math.sin(c+$);var L=Math.abs(c-d+2*$)<=Oa?0:1;if($&&vo(_,C,k,S)===1-p^L){var A=(c+d)/2;_=e*Math.cos(A),C=e*Math.sin(A),k=S=null}}else _=C=0;if(f>Pa&&(h=Math.min(Math.abs(u-e)/2,+i.apply(this,arguments)))>.001){g=e<u^p?0:1;var R=h,P=h;if(f<Oa){var F=null==k?[_,C]:null==x?[y,b]:Pn([y,b],[k,S],[x,w],[_,C]),O=y-F[0],N=b-F[1],I=x-F[0],j=w-F[1],Y=1/Math.sin(Math.acos((O*I+N*j)/(Math.sqrt(O*O+N*N)*Math.sqrt(I*I+j*j)))/2),z=Math.sqrt(F[0]*F[0]+F[1]*F[1]);P=Math.min(h,(e-z)/(Y-1)),R=Math.min(h,(u-z)/(Y+1))}if(null!=x){var H=yo(null==k?[_,C]:[k,S],[y,b],u,R,p),V=yo([x,w],[_,C],u,R,p);h===R?T.push("M",H[0],"A",R,",",R," 0 0,",g," ",H[1],"A",u,",",u," 0 ",1-p^vo(H[1][0],H[1][1],V[1][0],V[1][1]),",",p," ",V[1],"A",R,",",R," 0 0,",g," ",V[0]):T.push("M",H[0],"A",R,",",R," 0 1,",g," ",V[0])}else T.push("M",y,",",b);if(null!=k){var B=yo([y,b],[k,S],e,-P,p),W=yo([_,C],null==x?[y,b]:[x,w],e,-P,p);h===P?T.push("L",W[0],"A",P,",",P," 0 0,",g," ",W[1],"A",e,",",e," 0 ",p^vo(W[1][0],W[1][1],B[1][0],B[1][1]),",",1-p," ",B[1],"A",P,",",P," 0 0,",g," ",B[0]):T.push("L",W[0],"A",P,",",P," 0 0,",g," ",B[0])}else T.push("L",_,",",C)}else T.push("M",y,",",b),null!=x&&T.push("A",u,",",u," 0 ",D,",",p," ",x,",",w),T.push("L",_,",",C),null!=k&&T.push("A",e,",",e," 0 ",L,",",1-p," ",k,",",S);return T.push("Z"),T.join("")}function t(e,t){return"M0,"+e+"A"+e+","+e+" 0 1,"+t+" 0,"+-e+"A"+e+","+e+" 0 1,"+t+" 0,"+e}var n=fo,r=po,i=co,o=Ml,a=ho,s=go,l=mo;return e.innerRadius=function(t){return arguments.length?(n=$e(t),e):n},e.outerRadius=function(t){return arguments.length?(r=$e(t),e):r},e.cornerRadius=function(t){return arguments.length?(i=$e(t),e):i},e.padRadius=function(t){return arguments.length?(o=t==Ml?Ml:$e(t),e):o},e.startAngle=function(t){return arguments.length?(a=$e(t),e):a},e.endAngle=function(t){return arguments.length?(s=$e(t),e):s},e.padAngle=function(t){return arguments.length?(l=$e(t),e):l},e.centroid=function(){var e=(+n.apply(this,arguments)+ +r.apply(this,arguments))/2,t=(+a.apply(this,arguments)+ +s.apply(this,arguments))/2-ja;return[Math.cos(t)*e,Math.sin(t)*e]},e};var Ml="auto";sa.svg.line=function(){return bo(y)};var Tl=sa.map({linear:xo,"linear-closed":wo,step:_o,"step-before":Co,"step-after":ko,basis:Eo,"basis-open":Lo,"basis-closed":Ao,bundle:Ro,cardinal:Mo,"cardinal-open":So,"cardinal-closed":$o,monotone:jo});Tl.forEach(function(e,t){t.key=e,t.closed=/-closed$/.test(e)});var Dl=[0,2/3,1/3,0],El=[0,1/3,2/3,0],Ll=[0,1/6,2/3,1/6];sa.svg.line.radial=function(){var e=bo(Yo);return e.radius=e.x,delete e.x,e.angle=e.y,delete e.y,e},Co.reverse=ko,ko.reverse=Co,sa.svg.area=function(){return zo(y)},sa.svg.area.radial=function(){var e=zo(Yo);return e.radius=e.x,delete e.x,e.innerRadius=e.x0,delete e.x0,e.outerRadius=e.x1,delete e.x1,e.angle=e.y,delete e.y,e.startAngle=e.y0,delete e.y0,e.endAngle=e.y1,delete e.y1,e},sa.svg.chord=function(){function e(e,s){var l=t(this,o,e,s),u=t(this,a,e,s);return"M"+l.p0+r(l.r,l.p1,l.a1-l.a0)+(n(l,u)?i(l.r,l.p1,l.r,l.p0):i(l.r,l.p1,u.r,u.p0)+r(u.r,u.p1,u.a1-u.a0)+i(u.r,u.p1,l.r,l.p0))+"Z"}function t(e,t,n,r){var i=t.call(e,n,r),o=s.call(e,i,r),a=l.call(e,i,r)-ja,c=u.call(e,i,r)-ja;return{r:o,a0:a,a1:c,p0:[o*Math.cos(a),o*Math.sin(a)],p1:[o*Math.cos(c),o*Math.sin(c)]}}function n(e,t){return e.a0==t.a0&&e.a1==t.a1}function r(e,t,n){return"A"+e+","+e+" 0 "+ +(n>Oa)+",1 "+t}function i(e,t,n,r){return"Q 0,0 "+r}var o=bn,a=xn,s=Ho,l=ho,u=go;return e.radius=function(t){return arguments.length?(s=$e(t),e):s},e.source=function(t){return arguments.length?(o=$e(t),e):o},e.target=function(t){return arguments.length?(a=$e(t),e):a},e.startAngle=function(t){return arguments.length?(l=$e(t),e):l},e.endAngle=function(t){return arguments.length?(u=$e(t),e):u},e},sa.svg.diagonal=function(){function e(e,i){var o=t.call(this,e,i),a=n.call(this,e,i),s=(o.y+a.y)/2,l=[o,{x:o.x,y:s},{x:a.x,y:s},a];return"M"+(l=l.map(r))[0]+"C"+l[1]+" "+l[2]+" "+l[3]}var t=bn,n=xn,r=Vo;return e.source=function(n){return arguments.length?(t=$e(n),e):t},e.target=function(t){return arguments.length?(n=$e(t),e):n},e.projection=function(t){return arguments.length?(r=t,e):r},e},sa.svg.diagonal.radial=function(){var e=sa.svg.diagonal(),t=Vo,n=e.projection;return e.projection=function(e){return arguments.length?n(Bo(t=e)):t},e},sa.svg.symbol=function(){function e(e,r){return(Al.get(t.call(this,e,r))||Go)(n.call(this,e,r))}var t=Uo,n=Wo;return e.type=function(n){return arguments.length?(t=$e(n),e):t},e.size=function(t){return arguments.length?(n=$e(t),e):n},e};var Al=sa.map({circle:Go,cross:function(e){var t=Math.sqrt(e/5)/2;return"M"+-3*t+","+-t+"H"+-t+"V"+-3*t+"H"+t+"V"+-t+"H"+3*t+"V"+t+"H"+t+"V"+3*t+"H"+-t+"V"+t+"H"+-3*t+"Z"},diamond:function(e){var t=Math.sqrt(e/(2*Pl)),n=t*Pl;return"M0,"+-t+"L"+n+",0 0,"+t+" "+-n+",0Z"},square:function(e){var t=Math.sqrt(e)/2;return"M"+-t+","+-t+"L"+t+","+-t+" "+t+","+t+" "+-t+","+t+"Z"},"triangle-down":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+n+"L"+t+","+-n+" "+-t+","+-n+"Z"},"triangle-up":function(e){var t=Math.sqrt(e/Rl),n=t*Rl/2;return"M0,"+-n+"L"+t+","+n+" "+-t+","+n+"Z"}});sa.svg.symbolTypes=Al.keys();var Rl=Math.sqrt(3),Pl=Math.tan(30*Ya);$a.transition=function(e){for(var t,n,r=Fl||++jl,i=Zo(e),o=[],a=Ol||{time:Date.now(),ease:Sr,delay:0,duration:250},s=-1,l=this.length;++s<l;){o.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(n=u[c])&&Qo(n,c,i,r,a),t.push(n)}return Ko(o,i,r)},$a.interrupt=function(e){return this.each(null==e?Nl:qo(Zo(e)))};var Fl,Ol,Nl=qo(Zo()),Il=[],jl=0;Il.call=$a.call,Il.empty=$a.empty,Il.node=$a.node,Il.size=$a.size,sa.transition=function(e,t){return e&&e.transition?Fl?e.transition(t):e:sa.selection().transition(e)},sa.transition.prototype=Il,Il.select=function(e){var t,n,r,i=this.id,o=this.namespace,a=[];e=T(e);for(var s=-1,l=this.length;++s<l;){a.push(t=[]);for(var u=this[s],c=-1,d=u.length;++c<d;)(r=u[c])&&(n=e.call(r,r.__data__,c,s))?("__data__"in r&&(n.__data__=r.__data__),Qo(n,c,o,i,r[o][i]),t.push(n)):t.push(null)}return Ko(a,o,i)},Il.selectAll=function(e){var t,n,r,i,o,a=this.id,s=this.namespace,l=[];e=D(e);for(var u=-1,c=this.length;++u<c;)for(var d=this[u],f=-1,p=d.length;++f<p;)if(r=d[f]){o=r[s][a],n=e.call(r,r.__data__,f,u),l.push(t=[]);for(var h=-1,g=n.length;++h<g;)(i=n[h])&&Qo(i,h,s,a,o),t.push(i)}return Ko(l,s,a)},Il.filter=function(e){var t,n,r,i=[];"function"!=typeof e&&(e=z(e));for(var o=0,a=this.length;o<a;o++){i.push(t=[]);for(var s=0,l=(n=this[o]).length;s<l;s++)(r=n[s])&&e.call(r,r.__data__,s,o)&&t.push(r)}return Ko(i,this.namespace,this.id)},Il.tween=function(e,t){var n=this.id,r=this.namespace;return arguments.length<2?this.node()[r][n].tween.get(e):V(this,null==t?function(t){t[r][n].tween.remove(e)}:function(i){i[r][n].tween.set(e,t)})},Il.attr=function(e,t){function n(){this.removeAttribute(s)}function r(){this.removeAttributeNS(s.space,s.local)}function i(e){return null==e?n:(e+="",function(){var t,n=this.getAttribute(s);return n!==e&&(t=a(n,e),function(e){this.setAttribute(s,t(e))})})}function o(e){return null==e?r:(e+="",function(){var t,n=this.getAttributeNS(s.space,s.local);return n!==e&&(t=a(n,e),function(e){this.setAttributeNS(s.space,s.local,t(e))})})}if(arguments.length<2){for(t in e)this.attr(t,e[t]);return this}var a="transform"==e?Ur:yr,s=sa.ns.qualify(e);return Xo(this,"attr."+e,t,s.local?o:i)},Il.attrTween=function(e,t){function n(e,n){var r=t.call(this,e,n,this.getAttribute(i));return r&&function(e){this.setAttribute(i,r(e))}}function r(e,n){var r=t.call(this,e,n,this.getAttributeNS(i.space,i.local));return r&&function(e){this.setAttributeNS(i.space,i.local,r(e))}}var i=sa.ns.qualify(e);return this.tween("attr."+e,i.local?r:n)},Il.style=function(e,n,r){function i(){this.style.removeProperty(e)}function o(n){return null==n?i:(n+="",function(){var i,o=t(this).getComputedStyle(this,null).getPropertyValue(e);return o!==n&&(i=yr(o,n),function(t){this.style.setProperty(e,i(t),r)})})}var a=arguments.length;if(a<3){if("string"!=typeof e){a<2&&(n="");for(r in e)this.style(r,e[r],n);return this}r=""}return Xo(this,"style."+e,n,o)},Il.styleTween=function(e,n,r){function i(i,o){var a=n.call(this,i,o,t(this).getComputedStyle(this,null).getPropertyValue(e));return a&&function(t){this.style.setProperty(e,a(t),r)}}return arguments.length<3&&(r=""),this.tween("style."+e,i)},Il.text=function(e){return Xo(this,"text",e,Jo)},Il.remove=function(){var e=this.namespace;return this.each("end.transition",function(){var t;this[e].count<2&&(t=this.parentNode)&&t.removeChild(this)})},Il.ease=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].ease:("function"!=typeof e&&(e=sa.ease.apply(sa,arguments)),V(this,function(r){r[n][t].ease=e}))},Il.delay=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].delay:V(this,"function"==typeof e?function(r,i,o){r[n][t].delay=+e.call(r,r.__data__,i,o)}:(e=+e,function(r){r[n][t].delay=e}))},Il.duration=function(e){var t=this.id,n=this.namespace;return arguments.length<1?this.node()[n][t].duration:V(this,"function"==typeof e?function(r,i,o){r[n][t].duration=Math.max(1,e.call(r,r.__data__,i,o))}:(e=Math.max(1,e),function(r){r[n][t].duration=e}))},Il.each=function(e,t){var n=this.id,r=this.namespace;if(arguments.length<2){var i=Ol,o=Fl;try{Fl=n,V(this,function(t,i,o){Ol=t[r][n],e.call(t,t.__data__,i,o)})}finally{Ol=i,Fl=o}}else V(this,function(i){var o=i[r][n];(o.event||(o.event=sa.dispatch("start","end","interrupt"))).on(e,t)});return this},Il.transition=function(){for(var e,t,n,r,i=this.id,o=++jl,a=this.namespace,s=[],l=0,u=this.length;l<u;l++){s.push(e=[]);for(var c=0,d=(t=this[l]).length;c<d;c++)(n=t[c])&&Qo(n,c,a,o,{time:(r=n[a][i]).time,ease:r.ease,delay:r.delay+r.duration,duration:r.duration}),e.push(n)}return Ko(s,a,o)},sa.svg.axis=function(){function e(e){e.each(function(){var e,u=sa.select(this),c=this.__chart__||n,d=this.__chart__=n.copy(),f=null==l?d.ticks?d.ticks.apply(d,s):d.domain():l,p=null==t?d.tickFormat?d.tickFormat.apply(d,s):y:t,h=u.selectAll(".tick").data(f,d),g=h.enter().insert("g",".domain").attr("class","tick").style("opacity",Pa),m=sa.transition(h.exit()).style("opacity",Pa).remove(),v=sa.transition(h.order()).style("opacity",1),b=Math.max(i,0)+a,x=Vi(d),w=u.selectAll(".domain").data([0]),_=(w.enter().append("path").attr("class","domain"),sa.transition(w));g.append("line"),g.append("text");var C,k,S,$,M=g.select("line"),T=v.select("line"),D=h.select("text").text(p),E=g.select("text"),L=v.select("text"),A="top"===r||"left"===r?-1:1;if("bottom"===r||"top"===r?(e=ea,C="x",S="y",k="x2",$="y2",D.attr("dy",A<0?"0em":".71em").style("text-anchor","middle"),_.attr("d","M"+x[0]+","+A*o+"V0H"+x[1]+"V"+A*o)):(e=ta,C="y",S="x",k="y2",$="x2",D.attr("dy",".32em").style("text-anchor",A<0?"end":"start"),_.attr("d","M"+A*o+","+x[0]+"H0V"+x[1]+"H"+A*o)),M.attr($,A*i),E.attr(S,A*b),T.attr(k,0).attr($,A*i),L.attr(C,0).attr(S,A*b),d.rangeBand){var R=d,P=R.rangeBand()/2;c=d=function(e){return R(e)+P}}else c.rangeBand?c=d:m.call(e,d,c);g.call(e,c,d),v.call(e,d,d)})}var t,n=sa.scale.linear(),r=Yl,i=6,o=6,a=3,s=[10],l=null;return e.scale=function(t){return arguments.length?(n=t,e):n},e.orient=function(t){return arguments.length?(r=t in zl?t+"":Yl,e):r},e.ticks=function(){return arguments.length?(s=ua(arguments),e):s},e.tickValues=function(t){return arguments.length?(l=t,e):l},e.tickFormat=function(n){return arguments.length?(t=n,e):t},e.tickSize=function(t){var n=arguments.length;return n?(i=+t,o=+arguments[n-1],e):i},e.innerTickSize=function(t){return arguments.length?(i=+t,e):i},e.outerTickSize=function(t){return arguments.length?(o=+t,e):o},e.tickPadding=function(t){return arguments.length?(a=+t,e):a},e.tickSubdivide=function(){return arguments.length&&e},e};var Yl="bottom",zl={top:1,right:1,bottom:1,left:1};sa.svg.brush=function(){function e(t){t.each(function(){var t=sa.select(this).style("pointer-events","all").style("-webkit-tap-highlight-color","rgba(0,0,0,0)").on("mousedown.brush",o).on("touchstart.brush",o),a=t.selectAll(".background").data([0]);a.enter().append("rect").attr("class","background").style("visibility","hidden").style("cursor","crosshair"),t.selectAll(".extent").data([0]).enter().append("rect").attr("class","extent").style("cursor","move");var s=t.selectAll(".resize").data(g,y);s.exit().remove(),s.enter().append("g").attr("class",function(e){return"resize "+e}).style("cursor",function(e){return Hl[e]}).append("rect").attr("x",function(e){return/[ew]$/.test(e)?-3:null}).attr("y",function(e){return/^[ns]/.test(e)?-3:null}).attr("width",6).attr("height",6).style("visibility","hidden"),s.style("display",e.empty()?"none":null);var l,d=sa.transition(t),f=sa.transition(a);u&&(l=Vi(u),f.attr("x",l[0]).attr("width",l[1]-l[0]),r(d)),c&&(l=Vi(c),f.attr("y",l[0]).attr("height",l[1]-l[0]),i(d)),n(d)})}function n(e){e.selectAll(".resize").attr("transform",function(e){return"translate("+d[+/e$/.test(e)]+","+f[+/^s/.test(e)]+")"})}function r(e){e.select(".extent").attr("x",d[0]),e.selectAll(".extent,.n>rect,.s>rect").attr("width",d[1]-d[0])}function i(e){e.select(".extent").attr("y",f[0]),e.selectAll(".extent,.e>rect,.w>rect").attr("height",f[1]-f[0])}function o(){function o(){32==sa.event.keyCode&&(D||(b=null,L[0]-=d[1],L[1]-=f[1],D=2),k())}function g(){32==sa.event.keyCode&&2==D&&(L[0]+=d[1],L[1]+=f[1],D=0,k())}function m(){var e=sa.mouse(w),t=!1;x&&(e[0]+=x[0],e[1]+=x[1]),D||(sa.event.altKey?(b||(b=[(d[0]+d[1])/2,(f[0]+f[1])/2]),L[0]=d[+(e[0]<b[0])],L[1]=f[+(e[1]<b[1])]):b=null),M&&v(e,u,0)&&(r(S),t=!0),T&&v(e,c,1)&&(i(S),t=!0),t&&(n(S),C({type:"brush",mode:D?"move":"resize"}))}function v(e,t,n){var r,i,o=Vi(t),l=o[0],u=o[1],c=L[n],g=n?f:d,m=g[1]-g[0];if(D&&(l-=c,u-=m+c),r=(n?h:p)?Math.max(l,Math.min(u,e[n])):e[n],D?i=(r+=c)+m:(b&&(c=Math.max(l,Math.min(u,2*b[n]-r))),c<r?(i=r,r=c):i=c),g[0]!=r||g[1]!=i)return n?s=null:a=null,g[0]=r,g[1]=i,!0}function y(){m(),S.style("pointer-events","all").selectAll(".resize").style("display",e.empty()?"none":null),sa.select("body").style("cursor",null),A.on("mousemove.brush",null).on("mouseup.brush",null).on("touchmove.brush",null).on("touchend.brush",null).on("keydown.brush",null).on("keyup.brush",null),E(),C({type:"brushend"})}var b,x,w=this,_=sa.select(sa.event.target),C=l.of(w,arguments),S=sa.select(w),$=_.datum(),M=!/^(n|s)$/.test($)&&u,T=!/^(e|w)$/.test($)&&c,D=_.classed("extent"),E=K(w),L=sa.mouse(w),A=sa.select(t(w)).on("keydown.brush",o).on("keyup.brush",g);if(sa.event.changedTouches?A.on("touchmove.brush",m).on("touchend.brush",y):A.on("mousemove.brush",m).on("mouseup.brush",y),S.interrupt().selectAll("*").interrupt(),D)L[0]=d[0]-L[0],L[1]=f[0]-L[1];else if($){var R=+/w$/.test($),P=+/^n/.test($);x=[d[1-R]-L[0],f[1-P]-L[1]],L[0]=d[R],L[1]=f[P]}else sa.event.altKey&&(b=L.slice());S.style("pointer-events","none").selectAll(".resize").style("display",null),sa.select("body").style("cursor",_.style("cursor")),C({type:"brushstart"}),m()}var a,s,l=$(e,"brushstart","brush","brushend"),u=null,c=null,d=[0,0],f=[0,0],p=!0,h=!0,g=Vl[0];return e.event=function(e){e.each(function(){var e=l.of(this,arguments),t={x:d,y:f,i:a,j:s},n=this.__chart__||t;this.__chart__=t,Fl?sa.select(this).transition().each("start.brush",function(){a=n.i,s=n.j,d=n.x,f=n.y,e({type:"brushstart"})}).tween("brush:brush",function(){var n=br(d,t.x),r=br(f,t.y);return a=s=null,function(i){d=t.x=n(i),f=t.y=r(i),e({type:"brush",mode:"resize"})}}).each("end.brush",function(){a=t.i,s=t.j,e({type:"brush",mode:"resize"}),e({type:"brushend"})}):(e({type:"brushstart"}),e({type:"brush",mode:"resize"}),e({type:"brushend"}))})},e.x=function(t){return arguments.length?(u=t,g=Vl[!u<<1|!c],e):u},e.y=function(t){return arguments.length?(c=t,g=Vl[!u<<1|!c],e):c},e.clamp=function(t){return arguments.length?(u&&c?(p=!!t[0],h=!!t[1]):u?p=!!t:c&&(h=!!t),e):u&&c?[p,h]:u?p:c?h:null},e.extent=function(t){var n,r,i,o,l;return arguments.length?(u&&(n=t[0],r=t[1],c&&(n=n[0],r=r[0]),a=[n,r],u.invert&&(n=u(n),r=u(r)),r<n&&(l=n,n=r,r=l),n==d[0]&&r==d[1]||(d=[n,r])),c&&(i=t[0],o=t[1],u&&(i=i[1],o=o[1]),s=[i,o],c.invert&&(i=c(i),o=c(o)),o<i&&(l=i,i=o,o=l),i==f[0]&&o==f[1]||(f=[i,o])),e):(u&&(a?(n=a[0],r=a[1]):(n=d[0],r=d[1],u.invert&&(n=u.invert(n),r=u.invert(r)),r<n&&(l=n,n=r,r=l))),c&&(s?(i=s[0],o=s[1]):(i=f[0],o=f[1],c.invert&&(i=c.invert(i),o=c.invert(o)),o<i&&(l=i,i=o,o=l))),u&&c?[[n,i],[r,o]]:u?[n,r]:c&&[i,o])},e.clear=function(){return e.empty()||(d=[0,0],f=[0,0],a=s=null),e},e.empty=function(){return!!u&&d[0]==d[1]||!!c&&f[0]==f[1]},sa.rebind(e,l,"on")};var Hl={n:"ns-resize",e:"ew-resize",s:"ns-resize",w:"ew-resize",nw:"nwse-resize",ne:"nesw-resize",se:"nwse-resize",sw:"nesw-resize"},Vl=[["n","e","s","w","nw","ne","se","sw"],["e","w"],["n","s"],[]],Bl=us.format=gs.timeFormat,Wl=Bl.utc,Ul=Wl("%Y-%m-%dT%H:%M:%S.%LZ");Bl.iso=Date.prototype.toISOString&&+new Date("2000-01-01T00:00:00.000Z")?na:Ul,na.parse=function(e){var t=new Date(e);return isNaN(t)?null:t},na.toString=Ul.toString,us.second=Ye(function(e){return new cs(1e3*Math.floor(e/1e3))},function(e,t){e.setTime(e.getTime()+1e3*Math.floor(t))},function(e){return e.getSeconds()}),us.seconds=us.second.range,us.seconds.utc=us.second.utc.range,us.minute=Ye(function(e){return new cs(6e4*Math.floor(e/6e4))},function(e,t){e.setTime(e.getTime()+6e4*Math.floor(t))},function(e){return e.getMinutes()}),us.minutes=us.minute.range,us.minutes.utc=us.minute.utc.range,us.hour=Ye(function(e){var t=e.getTimezoneOffset()/60;return new cs(36e5*(Math.floor(e/36e5-t)+t))},function(e,t){e.setTime(e.getTime()+36e5*Math.floor(t))},function(e){return e.getHours()}),us.hours=us.hour.range,us.hours.utc=us.hour.utc.range,us.month=Ye(function(e){return(e=us.day(e)).setDate(1),e},function(e,t){e.setMonth(e.getMonth()+t)},function(e){return e.getMonth()}),us.months=us.month.range,us.months.utc=us.month.utc.range;var Gl=[1e3,5e3,15e3,3e4,6e4,3e5,9e5,18e5,36e5,108e5,216e5,432e5,864e5,1728e5,6048e5,2592e6,7776e6,31536e6],ql=[[us.second,1],[us.second,5],[us.second,15],[us.second,30],[us.minute,1],[us.minute,5],[us.minute,15],[us.minute,30],[us.hour,1],[us.hour,3],[us.hour,6],[us.hour,12],[us.day,1],[us.day,2],[us.week,1],[us.month,1],[us.month,3],[us.year,1]],Kl=Bl.multi([[".%L",function(e){return e.getMilliseconds()}],[":%S",function(e){return e.getSeconds()}],["%I:%M",function(e){return e.getMinutes()}],["%I %p",function(e){return e.getHours()}],["%a %d",function(e){return e.getDay()&&1!=e.getDate()}],["%b %d",function(e){return 1!=e.getDate()}],["%B",function(e){return e.getMonth()}],["%Y",Dt]]),Xl={range:function(e,t,n){return sa.range(Math.ceil(e/n)*n,+t,n).map(ia)},floor:y,ceil:y};ql.year=us.year,us.scale=function(){return ra(sa.scale.linear(),ql,Kl)};var Jl=ql.map(function(e){return[e[0].utc,e[1]]}),Zl=Wl.multi([[".%L",function(e){return e.getUTCMilliseconds()}],[":%S",function(e){return e.getUTCSeconds()}],["%I:%M",function(e){return e.getUTCMinutes()}],["%I %p",function(e){return e.getUTCHours()}],["%a %d",function(e){return e.getUTCDay()&&1!=e.getUTCDate()}],["%b %d",function(e){return 1!=e.getUTCDate()}],["%B",function(e){return e.getUTCMonth()}],["%Y",Dt]]);Jl.year=us.year.utc,us.scale.utc=function(){return ra(sa.scale.linear(),Jl,Zl)},sa.text=Me(function(e){return e.responseText}),sa.json=function(e,t){return Te(e,"application/json",oa,t)},sa.html=function(e,t){return Te(e,"text/html",aa,t)},sa.xml=Me(function(e){return e.responseXML}),"function"==typeof define&&define.amd?(this.d3=sa,define(sa)):"object"==typeof module&&module.exports?module.exports=sa:this.d3=sa}(),function(){var e={};e.dev=!1,e.tooltip=e.tooltip||{},e.utils=e.utils||{},e.models=e.models||{},e.charts={},e.logs={},e.dom={},"undefined"!=typeof module&&"undefined"!=typeof exports&&"undefined"==typeof d3&&(d3=require("d3")),e.dispatch=d3.dispatch("render_start","render_end"),Function.prototype.bind||(Function.prototype.bind=function(e){if("function"!=typeof this)throw new TypeError("Function.prototype.bind - what is trying to be bound is not callable");var t=Array.prototype.slice.call(arguments,1),n=this,r=function(){},i=function(){return n.apply(this instanceof r&&e?this:e,t.concat(Array.prototype.slice.call(arguments)))};return r.prototype=this.prototype,i.prototype=new r,i}),e.dev&&(e.dispatch.on("render_start",function(t){e.logs.startTime=+new Date}),e.dispatch.on("render_end",function(t){e.logs.endTime=+new Date,e.logs.totalTime=e.logs.endTime-e.logs.startTime,e.log("total",e.logs.totalTime)})),e.log=function(){return e.dev&&window.console&&console.log&&console.log.apply?console.log.apply(console,arguments):e.dev&&window.console&&"function"==typeof console.log&&Function.prototype.bind&&Function.prototype.bind.call(console.log,console).apply(console,arguments),arguments[arguments.length-1]},e.deprecated=function(e,t){console&&console.warn&&console.warn("nvd3 warning: `"+e+"` has been deprecated. ",t||"")},e.render=function(t){t=t||1,e.render.active=!0,e.dispatch.render_start();var n=function(){for(var r,i,o=0;o<t&&(i=e.render.queue[o]);o++)r=i.generate(),typeof i.callback==typeof Function&&i.callback(r);e.render.queue.splice(0,o),e.render.queue.length?setTimeout(n):(e.dispatch.render_end(),e.render.active=!1)};setTimeout(n)},e.render.active=!1,e.render.queue=[],e.addGraph=function(t){typeof arguments[0]==typeof Function&&(t={generate:arguments[0],callback:arguments[1]}),e.render.queue.push(t),e.render.active||e.render()},"undefined"!=typeof module&&"undefined"!=typeof exports&&(module.exports=e),"undefined"!=typeof window&&(window.nv=e),e.dom.write=function(e){return void 0!==window.fastdom?fastdom.mutate(e):e()},e.dom.read=function(e){return void 0!==window.fastdom?fastdom.measure(e):e()},e.interactiveGuideline=function(){"use strict";function t(d){d.each(function(d){function f(){var e=d3.mouse(this),r=e[0],i=e[1],s=!0,l=!1;if(c&&(r=d3.event.offsetX,i=d3.event.offsetY,"svg"!==d3.event.target.tagName&&(s=!1),d3.event.target.className.baseVal.match("nv-legend")&&(l=!0)),s&&(r-=n.left,i-=n.top),"mouseout"===d3.event.type||r<0||i<0||r>h||i>g||d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement||l){if(c&&d3.event.relatedTarget&&void 0===d3.event.relatedTarget.ownerSVGElement&&(void 0===d3.event.relatedTarget.className||d3.event.relatedTarget.className.match(u.nvPointerEventsClass)))return;return a.elementMouseout({mouseX:r,mouseY:i}),t.renderGuideLine(null),void u.hidden(!0)}u.hidden(!1);var d=void 0;if("function"==typeof o.rangeBands){var f=d3.bisect(o.range(),r)-1;if(!(o.range()[f]+o.rangeBand()>=r))return a.elementMouseout({mouseX:r,mouseY:i}),t.renderGuideLine(null),void u.hidden(!0);d=o.domain()[d3.bisect(o.range(),r)-1]}else d=o.invert(r);a.elementMousemove({mouseX:r,mouseY:i,pointXValue:d}),"dblclick"===d3.event.type&&a.elementDblclick({mouseX:r,mouseY:i,pointXValue:d}),"click"===d3.event.type&&a.elementClick({mouseX:r,mouseY:i,pointXValue:d}),"mousedown"===d3.event.type&&a.elementMouseDown({mouseX:r,mouseY:i,pointXValue:d}),"mouseup"===d3.event.type&&a.elementMouseUp({mouseX:r,mouseY:i,pointXValue:d})}var p=d3.select(this),h=r||960,g=i||400,m=p.selectAll("g.nv-wrap.nv-interactiveLineLayer").data([d]);m.enter().append("g").attr("class"," nv-wrap nv-interactiveLineLayer").append("g").attr("class","nv-interactiveGuideLine"),l&&(l.on("touchmove",f).on("mousemove",f,!0).on("mouseout",f,!0).on("mousedown",f,!0).on("mouseup",f,!0).on("dblclick",f).on("click",f),t.guideLine=null,t.renderGuideLine=function(n){s&&(t.guideLine&&t.guideLine.attr("x1")===n||e.dom.write(function(){var t=m.select(".nv-interactiveGuideLine").selectAll("line").data(null!=n?[e.utils.NaNtoZero(n)]:[],String);t.enter().append("line").attr("class","nv-guideline").attr("x1",function(e){return e}).attr("x2",function(e){return e}).attr("y1",g).attr("y2",0),t.exit().remove()}))})})}var n={left:0,top:0},r=null,i=null,o=d3.scale.linear(),a=d3.dispatch("elementMousemove","elementMouseout","elementClick","elementDblclick","elementMouseDown","elementMouseUp"),s=!0,l=null,u=e.models.tooltip(),c="ActiveXObject"in window;return u.duration(0).hideDelay(0).hidden(!1),t.dispatch=a,t.tooltip=u,t.margin=function(e){return arguments.length?(n.top=void 0!==e.top?e.top:n.top,n.left=void 0!==e.left?e.left:n.left,t):n},t.width=function(e){return arguments.length?(r=e,t):r},t.height=function(e){return arguments.length?(i=e,t):i},t.xScale=function(e){return arguments.length?(o=e,t):o},t.showGuideLine=function(e){return arguments.length?(s=e,t):s},t.svgContainer=function(e){return arguments.length?(l=e,t):l},t},e.interactiveBisect=function(e,t,n){"use strict";if(!(e instanceof Array))return null;var r;r="function"!=typeof n?function(e){return e.x}:n;var i=function(e,t){return r(e)-t},o=d3.bisector(i).left,a=d3.max([0,o(e,t)-1]),s=r(e[a]);if(void 0===s&&(s=a),s===t)return a;var l=d3.min([a+1,e.length-1]),u=r(e[l]);return void 0===u&&(u=l),Math.abs(u-t)>=Math.abs(s-t)?a:l},e.nearestValueIndex=function(e,t,n){"use strict";var r=1/0,i=null;return e.forEach(function(e,o){var a=Math.abs(t-e);null!=e&&a<=r&&a<n&&(r=a,i=o)}),i},e.models.tooltip=function(){"use strict";function t(){if(!f||!f.node()){var e=u||document.body,t=[1];(f=d3.select(e).selectAll(".nvtooltip").data(t)).enter().append("div").attr("class","nvtooltip "+(l||"xy-tooltip")).attr("id",r).style("top",0).style("left",0).style("opacity",0).style("position","fixed").selectAll("div, table, td, tr").classed(v,!0).classed(v,!0),f.exit().remove()}}function n(){if(h&&C(i))return e.dom.write(function(){t();var e=_(i);e&&(f.node().innerHTML=e),S()}),n}var r="nvtooltip-"+Math.floor(1e5*Math.random()),i=null,o="w",a=25,s=0,l=null,u=null,c=!0,d=200,f=null,p={left:null,top:null},h=!0,g=100,m=!0,v="nv-pointer-events-none",y=function(){return{left:null!==d3.event?d3.event.clientX:0,top:null!==d3.event?d3.event.clientY:0}},b=function(e,t){return e},x=function(e){return e},w=function(e,t){return e},_=function(e){if(null===e)return"";var t=d3.select(document.createElement("table"));m&&t.selectAll("thead").data([e]).enter().append("thead").append("tr").append("td").attr("colspan",3).append("strong").classed("x-value",!0).html(x(e.value));var n=t.selectAll("tbody").data([e]).enter().append("tbody").selectAll("tr").data(function(e){return e.series}).enter().append("tr").classed("highlight",function(e){return e.highlight});n.append("td").classed("legend-color-guide",!0).append("div").style("background-color",function(e){return e.color}),n.append("td").classed("key",!0).classed("total",function(e){return!!e.total}).html(function(e,t){return w(e.key,t)}),n.append("td").classed("value",!0).html(function(e,t){return b(e.value,t)}),n.filter(function(e,t){return void 0!==e.percent}).append("td").classed("percent",!0).html(function(e,t){return"("+d3.format("%")(e.percent)+")"}),n.selectAll("td").each(function(e){if(e.highlight){var t=d3.scale.linear().domain([0,1]).range(["#fff",e.color]);d3.select(this).style("border-bottom-color",t(.6)).style("border-top-color",t(.6))}});var r=t.node().outerHTML;return void 0!==e.footer&&(r+="<div class='footer'>"+e.footer+"</div>"),r},C=function(t){if(t&&t.series){if(e.utils.isArray(t.series))return!0;if(e.utils.isObject(t.series))return t.series=[t.series],!0}return!1},k=function(e){var t,n,r,i=f.node().offsetHeight,s=f.node().offsetWidth,l=document.documentElement.clientWidth,u=document.documentElement.clientHeight;switch(o){case"e":t=-s-a,n=-i/2,e.left+t<0&&(t=a),(r=e.top+n)<0&&(n-=r),(r=e.top+n+i)>u&&(n-=r-u);break;case"w":t=a,n=-i/2,e.left+t+s>l&&(t=-s-a),(r=e.top+n)<0&&(n-=r),(r=e.top+n+i)>u&&(n-=r-u);break;case"n":t=-s/2-5,n=a,e.top+n+i>u&&(n=-i-a),(r=e.left+t)<0&&(t-=r),(r=e.left+t+s)>l&&(t-=r-l);break;case"s":t=-s/2,n=-i-a,e.top+n<0&&(n=a),(r=e.left+t)<0&&(t-=r),(r=e.left+t+s)>l&&(t-=r-l);break;case"center":t=-s/2,n=-i/2;break;default:t=0,n=0}return{left:t,top:n}},S=function(){e.dom.read(function(){var e=y(),t=k(e),n=e.left+t.left,r=e.top+t.top;if(c)f.interrupt().transition().delay(d).duration(0).style("opacity",0);else{var i="translate("+p.left+"px, "+p.top+"px)",o="translate("+Math.round(n)+"px, "+Math.round(r)+"px)",a=d3.interpolateString(i,o),s=f.style("opacity")<.1;f.interrupt().transition().duration(s?0:g).styleTween("transform",function(e){return a},"important").styleTween("-webkit-transform",function(e){return a}).style("-ms-transform",o).style("opacity",1)}p.left=n,p.top=r})};return n.nvPointerEventsClass=v,n.options=e.utils.optionsFunc.bind(n),n._options=Object.create({},{duration:{get:function(){return g},set:function(e){g=e}},gravity:{get:function(){return o},set:function(e){o=e}},distance:{get:function(){return a},set:function(e){a=e}},snapDistance:{get:function(){return s},set:function(e){s=e}},classes:{get:function(){return l},set:function(e){l=e}},chartContainer:{get:function(){return u},set:function(e){u=e}},enabled:{get:function(){return h},set:function(e){h=e}},hideDelay:{get:function(){return d},set:function(e){d=e}},contentGenerator:{get:function(){return _},set:function(e){_=e}},valueFormatter:{get:function(){return b},set:function(e){b=e}},headerFormatter:{get:function(){return x},set:function(e){x=e}},keyFormatter:{get:function(){return w},set:function(e){w=e}},headerEnabled:{get:function(){return m},set:function(e){m=e}},position:{get:function(){return y},set:function(e){y=e}},fixedTop:{get:function(){return null},set:function(t){e.deprecated("fixedTop","feature removed after 1.8.1")}},offset:{get:function(){return{left:0,top:0}},set:function(t){e.deprecated("offset","use chart.tooltip.distance() instead")}},hidden:{get:function(){return c},set:function(e){c!=e&&(c=!!e,n())}},data:{get:function(){return i},set:function(e){e.point&&(e.value=e.point.x,e.series=e.series||{},e.series.value=e.point.y,e.series.color=e.point.color||e.series.color),i=e}},node:{get:function(){return f.node()},set:function(e){}},id:{get:function(){return r},set:function(e){}}}),e.utils.initOptions(n),n},e.utils.windowSize=function(){var e={width:640,height:480};return window.innerWidth&&window.innerHeight?(e.width=window.innerWidth,e.height=window.innerHeight,e):"CSS1Compat"==document.compatMode&&document.documentElement&&document.documentElement.offsetWidth?(e.width=document.documentElement.offsetWidth,e.height=document.documentElement.offsetHeight,e):document.body&&document.body.offsetWidth?(e.width=document.body.offsetWidth,e.height=document.body.offsetHeight,e):e},e.utils.isArray=Array.isArray,e.utils.isObject=function(e){return null!==e&&"object"==typeof e},e.utils.isFunction=function(e){return"function"==typeof e},e.utils.isDate=function(e){return"[object Date]"===toString.call(e)},e.utils.isNumber=function(e){return!isNaN(e)&&"number"==typeof e},e.utils.windowResize=function(t){return window.addEventListener?window.addEventListener("resize",t):e.log("ERROR: Failed to bind to window.resize with: ",t),{callback:t,clear:function(){window.removeEventListener("resize",t)}}},e.utils.getColor=function(t){if(void 0===t)return e.utils.defaultColor();if(e.utils.isArray(t)){var n=d3.scale.ordinal().range(t);return function(e,t){var r=void 0===t?e:t;return e.color||n(r)}}return t},e.utils.defaultColor=function(){return e.utils.getColor(d3.scale.category20().range())},e.utils.customTheme=function(t,n,r){n=n||function(e){return e.key};var i=(r=r||d3.scale.category20().range()).length;return function(o,a){var s=n(o);return e.utils.isFunction(t[s])?t[s]():void 0!==t[s]?t[s]:(i||(i=r.length),i-=1,r[i])}},e.utils.pjax=function(t,n){var r=function(r){d3.html(r,function(r){var i=d3.select(n).node();i.parentNode.replaceChild(d3.select(r).select(n).node(),i),e.utils.pjax(t,n)})};d3.selectAll(t).on("click",function(){history.pushState(this.href,this.textContent,this.href),r(this.href),d3.event.preventDefault()}),d3.select(window).on("popstate",function(){d3.event.state&&r(d3.event.state)})},e.utils.calcApproxTextWidth=function(t){if(e.utils.isFunction(t.style)&&e.utils.isFunction(t.text)){var n=parseInt(t.style("font-size").replace("px",""),10),r=t.text().length;return e.utils.NaNtoZero(r*n*.5)}return 0},e.utils.NaNtoZero=function(t){return!e.utils.isNumber(t)||isNaN(t)||null===t||t===1/0||t===-1/0?0:t},d3.selection.prototype.watchTransition=function(e){var t=[this].concat([].slice.call(arguments,1));return e.transition.apply(e,t)},e.utils.renderWatch=function(t,n){if(!(this instanceof e.utils.renderWatch))return new e.utils.renderWatch(t,n);var r=void 0!==n?n:250,i=[],o=this;this.models=function(e){return[].slice.call(arguments,0).forEach(function(e){e.__rendered=!1,function(e){e.dispatch.on("renderEnd",function(t){e.__rendered=!0,o.renderEnd("model")})}(e),i.indexOf(e)<0&&i.push(e)}),this},this.reset=function(e){void 0!==e&&(r=e),i=[]},this.transition=function(e,t,n){if(t=arguments.length>1?[].slice.call(arguments,1):[],n=t.length>1?t.pop():void 0!==r?r:250,e.__rendered=!1,i.indexOf(e)<0&&i.push(e),0===n)return e.__rendered=!0,e.delay=function(){return this},e.duration=function(){return this},e;0===e.length?e.__rendered=!0:e.every(function(e){return!e.length})?e.__rendered=!0:e.__rendered=!1;var a=0;return e.transition().duration(n).each(function(){++a}).each("end",function(n,r){0==--a&&(e.__rendered=!0,o.renderEnd.apply(this,t))})},this.renderEnd=function(){i.every(function(e){return e.__rendered})&&(i.forEach(function(e){e.__rendered=!1}),t.renderEnd.apply(this,arguments))}},e.utils.deepExtend=function(t){(arguments.length>1?[].slice.call(arguments,1):[]).forEach(function(n){for(var r in n){var i=e.utils.isArray(t[r]),o=e.utils.isObject(t[r]),a=e.utils.isObject(n[r]);o&&!i&&a?e.utils.deepExtend(t[r],n[r]):t[r]=n[r]}})},e.utils.state=function(){if(!(this instanceof e.utils.state))return new e.utils.state;var t={},n=function(){},r=function(){return{}},i=null,o=null;this.dispatch=d3.dispatch("change","set"),this.dispatch.on("set",function(e){n(e,!0)}),this.getter=function(e){return r=e,this},this.setter=function(e,t){return t||(t=function(){}),n=function(n,r){e(n),r&&t()},this},this.init=function(t){i=i||{},e.utils.deepExtend(i,t)};var a=function(){var e=r();if(JSON.stringify(e)===JSON.stringify(t))return!1;for(var n in e)void 0===t[n]&&(t[n]={}),t[n]=e[n],o=!0;return!0};this.update=function(){i&&(n(i,!1),i=null),a.call(this)&&this.dispatch.change(t)}},e.utils.optionsFunc=function(t){return t&&d3.map(t).forEach(function(t,n){e.utils.isFunction(this[t])&&this[t](n)}.bind(this)),this},e.utils.calcTicksX=function(t,n){var r=1,i=0;for(i;i<n.length;i+=1){var o=n[i]&&n[i].values?n[i].values.length:0;r=o>r?o:r}return e.log("Requested number of ticks: ",t),e.log("Calculated max values to be: ",r),t=t>r?t=r-1:t,t=t<1?1:t,t=Math.floor(t),e.log("Calculating tick count as: ",t),t},e.utils.calcTicksY=function(t,n){return e.utils.calcTicksX(t,n)},e.utils.initOption=function(e,t){e._calls&&e._calls[t]?e[t]=e._calls[t]:(e[t]=function(n){return arguments.length?(e._overrides[t]=!0,e._options[t]=n,e):e._options[t]},e["_"+t]=function(n){return arguments.length?(e._overrides[t]||(e._options[t]=n),e):e._options[t]})},e.utils.initOptions=function(t){t._overrides=t._overrides||{};var n=Object.getOwnPropertyNames(t._options||{}),r=Object.getOwnPropertyNames(t._calls||{});n=n.concat(r);for(var i in n)e.utils.initOption(t,n[i])},e.utils.inheritOptionsD3=function(e,t,n){e._d3options=n.concat(e._d3options||[]),n.unshift(t),n.unshift(e),d3.rebind.apply(this,n)},e.utils.arrayUnique=function(e){return e.sort().filter(function(t,n){return!n||t!=e[n-1]})},e.utils.symbolMap=d3.map(),e.utils.symbol=function(){function t(t,i){var o=n.call(this,t,i),a=r.call(this,t,i);return-1!==d3.svg.symbolTypes.indexOf(o)?d3.svg.symbol().type(o).size(a)():e.utils.symbolMap.get(o)(a)}var n,r=64;return t.type=function(e){return arguments.length?(n=d3.functor(e),t):n},t.size=function(e){return arguments.length?(r=d3.functor(e),t):r},t},e.utils.inheritOptions=function(t,n){var r=Object.getOwnPropertyNames(n._options||{}),i=Object.getOwnPropertyNames(n._calls||{}),o=n._inherited||[],a=n._d3options||[],s=r.concat(i).concat(o).concat(a);s.unshift(n),s.unshift(t),d3.rebind.apply(this,s),t._inherited=e.utils.arrayUnique(r.concat(i).concat(o).concat(r).concat(t._inherited||[])),t._d3options=e.utils.arrayUnique(a.concat(t._d3options||[]))},e.utils.initSVG=function(e){e.classed({"nvd3-svg":!0})},e.utils.sanitizeHeight=function(e,t){return e||parseInt(t.style("height"),10)||400},e.utils.sanitizeWidth=function(e,t){return e||parseInt(t.style("width"),10)||960},e.utils.availableHeight=function(t,n,r){return Math.max(0,e.utils.sanitizeHeight(t,n)-r.top-r.bottom)},e.utils.availableWidth=function(t,n,r){return Math.max(0,e.utils.sanitizeWidth(t,n)-r.left-r.right)},e.utils.noData=function(t,n){var r=t.options(),i=r.margin(),o=r.noData(),a=null==o?[""]:[o],s=e.utils.availableHeight(null,n,i),l=e.utils.availableWidth(null,n,i),u=i.left+l/2,c=i.top+s/2;n.selectAll("g").remove();var d=n.selectAll(".nv-noData").data(a);d.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),d.attr("x",u).attr("y",c).text(function(e){return e})},e.utils.wrapTicks=function(e,t){e.each(function(){for(var e,n=d3.select(this),r=n.text().split(/\s+/).reverse(),i=[],o=0,a=n.attr("y"),s=parseFloat(n.attr("dy")),l=n.text(null).append("tspan").attr("x",0).attr("y",a).attr("dy",s+"em");e=r.pop();)i.push(e),l.text(i.join(" ")),l.node().getComputedTextLength()>t&&(i.pop(),l.text(i.join(" ")),i=[e],l=n.append("tspan").attr("x",0).attr("y",a).attr("dy",1.1*++o+s+"em").text(e))})},e.utils.arrayEquals=function(t,n){if(t===n)return!0;if(!t||!n)return!1;if(t.length!=n.length)return!1;for(var r=0,i=t.length;r<i;r++)if(t[r]instanceof Array&&n[r]instanceof Array){if(!e.arrayEquals(t[r],n[r]))return!1}else if(t[r]!=n[r])return!1;return!0},e.models.axis=function(){"use strict";function t(a){return b.reset(),a.each(function(t){var a=d3.select(this);e.utils.initSVG(a);var m=a.selectAll("g.nv-wrap.nv-axis").data([t]),v=(m.enter().append("g").attr("class","nvd3 nv-wrap nv-axis").append("g"),m.select("g"));null!==p?n.ticks(p):"top"!=n.orient()&&"bottom"!=n.orient()||n.ticks(Math.abs(r.range()[1]-r.range()[0])/100),v.watchTransition(b,"axis").call(n),y=y||n.scale();var x=n.tickFormat();null==x&&(x=y.tickFormat());var w=v.selectAll("text.nv-axislabel").data([s||null]);w.exit().remove(),void 0!==g&&v.selectAll("g").select("text").style("font-size",g);var _,C,k;switch(n.orient()){case"top":w.enter().append("text").attr("class","nv-axislabel"),k=0,1===r.range().length?k=f?2*r.range()[0]+r.rangeBand():0:2===r.range().length?k=f?r.range()[0]+r.range()[1]+r.rangeBand():r.range()[1]:r.range().length>2&&(k=r.range()[r.range().length-1]+(r.range()[1]-r.range()[0])),w.attr("text-anchor","middle").attr("y",0).attr("x",k/2),l&&((C=m.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(e,t){return["nv-axisMaxMin","nv-axisMaxMin-x",0==t?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),C.exit().remove(),C.attr("transform",function(t,n){return"translate("+e.utils.NaNtoZero(r(t))+",0)"}).select("text").attr("dy","-0.5em").attr("y",-n.tickPadding()).attr("text-anchor","middle").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(b,"min-max top").attr("transform",function(t,n){return"translate("+e.utils.NaNtoZero(r.range()[n])+",0)"}));break;case"bottom":_=h+36;var S=30,$=0,M=v.selectAll("g").select("text"),T="";if(u%360){M.attr("transform",""),M.each(function(e,t){var n=this.getBoundingClientRect(),r=n.width;$=n.height,r>S&&(S=r)}),T="rotate("+u+" 0,"+($/2+n.tickPadding())+")";var D=Math.abs(Math.sin(u*Math.PI/180));_=(D?D*S:S)+30,M.attr("transform",T).style("text-anchor",u%360>0?"start":"end")}else d?M.attr("transform",function(e,t){return"translate(0,"+(t%2==0?"0":"12")+")"}):M.attr("transform","translate(0,0)");w.enter().append("text").attr("class","nv-axislabel"),k=0,1===r.range().length?k=f?2*r.range()[0]+r.rangeBand():0:2===r.range().length?k=f?r.range()[0]+r.range()[1]+r.rangeBand():r.range()[1]:r.range().length>2&&(k=r.range()[r.range().length-1]+(r.range()[1]-r.range()[0])),w.attr("text-anchor","middle").attr("y",_).attr("x",k/2),l&&((C=m.selectAll("g.nv-axisMaxMin").data([r.domain()[0],r.domain()[r.domain().length-1]])).enter().append("g").attr("class",function(e,t){return["nv-axisMaxMin","nv-axisMaxMin-x",0==t?"nv-axisMin-x":"nv-axisMax-x"].join(" ")}).append("text"),C.exit().remove(),C.attr("transform",function(t,n){return"translate("+e.utils.NaNtoZero(r(t)+(f?r.rangeBand()/2:0))+",0)"}).select("text").attr("dy",".71em").attr("y",n.tickPadding()).attr("transform",T).style("text-anchor",u?u%360>0?"start":"end":"middle").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(b,"min-max bottom").attr("transform",function(t,n){return"translate("+e.utils.NaNtoZero(r(t)+(f?r.rangeBand()/2:0))+",0)"}));break;case"right":w.enter().append("text").attr("class","nv-axislabel"),w.style("text-anchor",c?"middle":"begin").attr("transform",c?"rotate(90)":"").attr("y",c?12-Math.max(i.right,o)-(h||0):-10).attr("x",c?d3.max(r.range())/2:n.tickPadding()),l&&((C=m.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(e,t){return["nv-axisMaxMin","nv-axisMaxMin-y",0==t?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(t,n){return"translate(0,"+e.utils.NaNtoZero(r(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",n.tickPadding()).style("text-anchor","start").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(b,"min-max right").attr("transform",function(t,n){return"translate(0,"+e.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1));break;case"left":w.enter().append("text").attr("class","nv-axislabel"),w.style("text-anchor",c?"middle":"end").attr("transform",c?"rotate(-90)":"").attr("y",c?25-Math.max(i.left,o)-(h||0):-10).attr("x",c?-d3.max(r.range())/2:-n.tickPadding()),l&&((C=m.selectAll("g.nv-axisMaxMin").data(r.domain())).enter().append("g").attr("class",function(e,t){return["nv-axisMaxMin","nv-axisMaxMin-y",0==t?"nv-axisMin-y":"nv-axisMax-y"].join(" ")}).append("text").style("opacity",0),C.exit().remove(),C.attr("transform",function(t,n){return"translate(0,"+e.utils.NaNtoZero(y(t))+")"}).select("text").attr("dy",".32em").attr("y",0).attr("x",-n.tickPadding()).attr("text-anchor","end").text(function(e,t){var n=x(e);return(""+n).match("NaN")?"":n}),C.watchTransition(b,"min-max right").attr("transform",function(t,n){return"translate(0,"+e.utils.NaNtoZero(r.range()[n])+")"}).select("text").style("opacity",1))}if(w.text(function(e){return e}),!l||"left"!==n.orient()&&"right"!==n.orient()||(v.selectAll("g").each(function(e,t){d3.select(this).select("text").attr("opacity",1),(r(e)<r.range()[1]+10||r(e)>r.range()[0]-10)&&((e>1e-10||e<-1e-10)&&d3.select(this).attr("opacity",0),d3.select(this).select("text").attr("opacity",0))}),r.domain()[0]==r.domain()[1]&&0==r.domain()[0]&&m.selectAll("g.nv-axisMaxMin").style("opacity",function(e,t){return t?0:1})),l&&("top"===n.orient()||"bottom"===n.orient())){var E=[];m.selectAll("g.nv-axisMaxMin").each(function(e,t){try{t?E.push(r(e)-this.getBoundingClientRect().width-4):E.push(r(e)+this.getBoundingClientRect().width+4)}catch(n){t?E.push(r(e)-4):E.push(r(e)+4)}}),v.selectAll("g").each(function(e,t){(r(e)<E[0]||r(e)>E[1])&&(e>1e-10||e<-1e-10?d3.select(this).remove():d3.select(this).select("text").remove())})}v.selectAll(".tick").filter(function(e){return!parseFloat(Math.round(1e5*e)/1e6)&&void 0!==e}).classed("zero",!0),y=r.copy()}),b.renderEnd("axis immediate"),t}var n=d3.svg.axis(),r=d3.scale.linear(),i={top:0,right:0,bottom:0,left:0},o=75,a=60,s=null,l=!0,u=0,c=!0,d=!1,f=!1,p=null,h=0,g=void 0,m=250,v=d3.dispatch("renderEnd");n.scale(r).orient("bottom").tickFormat(function(e){return e});var y,b=e.utils.renderWatch(v,m);return t.axis=n,t.dispatch=v,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{axisLabelDistance:{get:function(){return h},set:function(e){h=e}},staggerLabels:{get:function(){return d},set:function(e){d=e}},rotateLabels:{get:function(){return u},set:function(e){u=e}},rotateYLabel:{get:function(){return c},set:function(e){c=e}},showMaxMin:{get:function(){return l},set:function(e){l=e}},axisLabel:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return a},set:function(e){a=e}},ticks:{get:function(){return p},set:function(e){p=e}},width:{get:function(){return o},set:function(e){o=e}},fontSize:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return i},set:function(e){i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left}},duration:{get:function(){return m},set:function(e){m=e,b.reset(m)}},scale:{get:function(){return r},set:function(i){r=i,n.scale(r),f="function"==typeof r.rangeBands,e.utils.inheritOptionsD3(t,r,["domain","range","rangeBand","rangeBands"])}}}),e.utils.initOptions(t),e.utils.inheritOptionsD3(t,n,["orient","tickValues","tickSubdivide","tickSize","tickPadding","tickFormat"]),e.utils.inheritOptionsD3(t,r,["domain","range","rangeBand","rangeBands"]),t},e.models.boxPlot=function(){"use strict";function t(d){return E.reset(),d.each(function(t){var d=u-l.left-l.right,L=c-l.top-l.bottom;$=d3.select(this),e.utils.initSVG($),f.domain(n||t.map(function(e,t){return h(e,t)})).rangeBands(r||[0,d],.1);var A=[];if(!i){var R=[];t.forEach(function(e,t){var n=g(e),r=v(e),i=y(e),o=b(e),a=w(e);a&&a.forEach(function(e,t){R.push(_(e,t,void 0))}),i&&R.push(i),n&&R.push(n),r&&R.push(r),o&&R.push(o)}),A=[d3.min(R),d3.max(R)]}p.domain(i||A),p.range(o||[L,0]),a=a||f,s=s||p.copy().range([p(0),p(0)]);var P=$.selectAll("g.nv-wrap").data([t]);P.enter().append("g").attr("class","nvd3 nv-wrap");P.attr("transform","translate("+l.left+","+l.top+")");var F=P.selectAll(".nv-boxplot").data(function(e){return e}),O=F.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);F.attr("class","nv-boxplot").attr("transform",function(e,t,n){return"translate("+(f(h(e,t))+.05*f.rangeBand())+", 0)"}).classed("hover",function(e){return e.hover}),F.watchTransition(E,"nv-boxplot: boxplots").style("stroke-opacity",1).style("fill-opacity",.75).delay(function(e,n){return n*T/t.length}).attr("transform",function(e,t){return"translate("+(f(h(e,t))+.05*f.rangeBand())+", 0)"}),F.exit().remove(),O.each(function(e,t){var n=d3.select(this);[y,b].forEach(function(r){if(r(e)){var i=r===y?"low":"high";n.append("line").style("stroke",x(e)||S(e,t)).attr("class","nv-boxplot-whisker nv-boxplot-"+i),n.append("line").style("stroke",x(e)||S(e,t)).attr("class","nv-boxplot-tick nv-boxplot-"+i)}})});var N=function(){return null===D?.9*f.rangeBand():Math.min(75,.9*f.rangeBand())},I=function(){return.45*f.rangeBand()-N()/2},j=function(){return.45*f.rangeBand()+N()/2};[y,b].forEach(function(e){var t=e===y?"low":"high",n=e===y?g:v;F.select("line.nv-boxplot-whisker.nv-boxplot-"+t).watchTransition(E,"nv-boxplot: boxplots").attr("x1",.45*f.rangeBand()).attr("y1",function(t,n){return p(e(t))}).attr("x2",.45*f.rangeBand()).attr("y2",function(e,t){return p(n(e))}),F.select("line.nv-boxplot-tick.nv-boxplot-"+t).watchTransition(E,"nv-boxplot: boxplots").attr("x1",I).attr("y1",function(t,n){return p(e(t))}).attr("x2",j).attr("y2",function(t,n){return p(e(t))})}),[y,b].forEach(function(e){var t=e===y?"low":"high";O.selectAll(".nv-boxplot-"+t).on("mouseover",function(t,n,r){d3.select(this).classed("hover",!0),M.elementMouseover({series:{key:e(t),color:x(t)||S(t,r)},e:d3.event})}).on("mouseout",function(t,n,r){d3.select(this).classed("hover",!1),M.elementMouseout({series:{key:e(t),color:x(t)||S(t,r)},e:d3.event})}).on("mousemove",function(e,t){M.elementMousemove({e:d3.event})})}),O.append("rect").attr("class","nv-boxplot-box").on("mouseover",function(e,t){d3.select(this).classed("hover",!0),M.elementMouseover({key:h(e),value:h(e),series:[{key:"Q3",value:v(e),color:x(e)||S(e,t)},{key:"Q2",value:m(e),color:x(e)||S(e,t)},{key:"Q1",value:g(e),color:x(e)||S(e,t)}],data:e,index:t,e:d3.event})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),M.elementMouseout({key:h(e),value:h(e),series:[{key:"Q3",value:v(e),color:x(e)||S(e,t)},{key:"Q2",value:m(e),color:x(e)||S(e,t)},{key:"Q1",value:g(e),color:x(e)||S(e,t)}],data:e,index:t,e:d3.event})}).on("mousemove",function(e,t){M.elementMousemove({e:d3.event})}),F.select("rect.nv-boxplot-box").watchTransition(E,"nv-boxplot: boxes").attr("y",function(e,t){return p(v(e))}).attr("width",N).attr("x",I).attr("height",function(e,t){return Math.abs(p(v(e))-p(g(e)))||1}).style("fill",function(e,t){return x(e)||S(e,t)}).style("stroke",function(e,t){return x(e)||S(e,t)}),O.append("line").attr("class","nv-boxplot-median"),F.select("line.nv-boxplot-median").watchTransition(E,"nv-boxplot: boxplots line").attr("x1",I).attr("y1",function(e,t){return p(m(e))}).attr("x2",j).attr("y2",function(e,t){return p(m(e))});var Y=F.selectAll(".nv-boxplot-outlier").data(function(e){return w(e)||[]});Y.enter().append("circle").style("fill",function(e,t,n){return k(e,t,n)||S(e,n)}).style("stroke",function(e,t,n){return k(e,t,n)||S(e,n)}).style("z-index",9e3).on("mouseover",function(e,t,n){d3.select(this).classed("hover",!0),M.elementMouseover({series:{key:C(e,t,n),color:k(e,t,n)||S(e,n)},e:d3.event})}).on("mouseout",function(e,t,n){d3.select(this).classed("hover",!1),M.elementMouseout({series:{key:C(e,t,n),color:k(e,t,n)||S(e,n)},e:d3.event})}).on("mousemove",function(e,t){M.elementMousemove({e:d3.event})}),Y.attr("class","nv-boxplot-outlier"),Y.watchTransition(E,"nv-boxplot: nv-boxplot-outlier").attr("cx",.45*f.rangeBand()).attr("cy",function(e,t,n){return p(_(e,t,n))}).attr("r","3"),Y.exit().remove(),a=f.copy(),s=p.copy()}),E.renderEnd("nv-boxplot immediate"),t}var n,r,i,o,a,s,l={top:0,right:0,bottom:0,left:0},u=960,c=500,d=Math.floor(1e4*Math.random()),f=d3.scale.ordinal(),p=d3.scale.linear(),h=function(e){return e.label},g=function(e){return e.values.Q1},m=function(e){return e.values.Q2},v=function(e){return e.values.Q3},y=function(e){return e.values.whisker_low},b=function(e){return e.values.whisker_high},x=function(e){return e.color},w=function(e){return e.values.outliers},_=function(e,t,n){return e},C=function(e,t,n){return e},k=function(e,t,n){},S=e.utils.defaultColor(),$=null,M=d3.dispatch("elementMouseover","elementMouseout","elementMousemove","renderEnd"),T=250,D=null,E=e.utils.renderWatch(M,T);return t.dispatch=M,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return u},set:function(e){u=e}},height:{get:function(){return c},set:function(e){c=e}},maxBoxWidth:{get:function(){return D},set:function(e){D=e}},x:{get:function(){return h},set:function(e){h=e}},q1:{get:function(){return g},set:function(e){g=e}},q2:{get:function(){return m},set:function(e){m=e}},q3:{get:function(){return v},set:function(e){v=e}},wl:{get:function(){return y},set:function(e){y=e}},wh:{get:function(){return b},set:function(e){b=e}},itemColor:{get:function(){return x},set:function(e){x=e}},outliers:{get:function(){return w},set:function(e){w=e}},outlierValue:{get:function(){return _},set:function(e){_=e}},outlierLabel:{get:function(){return C},set:function(e){C=e}},outlierColor:{get:function(){return k},set:function(e){k=e}},xScale:{get:function(){return f},set:function(e){f=e}},yScale:{get:function(){return p},set:function(e){p=e}},xDomain:{get:function(){return n},set:function(e){n=e}},yDomain:{get:function(){return i},set:function(e){i=e}},xRange:{get:function(){return r},set:function(e){r=e}},yRange:{get:function(){return o},set:function(e){o=e}},id:{get:function(){return d},set:function(e){d=e}},y:{get:function(){return console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead."),{}},set:function(e){console.warn("BoxPlot 'y' chart option is deprecated. Please use model overrides instead.")}},margin:{get:function(){return l},set:function(e){l.top=void 0!==e.top?e.top:l.top,l.right=void 0!==e.right?e.right:l.right,l.bottom=void 0!==e.bottom?e.bottom:l.bottom,l.left=void 0!==e.left?e.left:l.left}},color:{get:function(){return S},set:function(t){S=e.utils.getColor(t)}},duration:{get:function(){return T},set:function(e){T=e,E.reset(T)}}}),e.utils.initOptions(t),t},e.models.boxPlotChart=function(){"use strict";function t(c){return b.reset(),b.models(i),d&&b.models(o),f&&b.models(a),c.each(function(c){var g=d3.select(this);e.utils.initSVG(g);var b=(l||parseInt(g.style("width"))||960)-s.left-s.right,x=(u||parseInt(g.style("height"))||400)-s.top-s.bottom;if(t.update=function(){v.beforeUpdate(),g.transition().duration(y).call(t)},t.container=this,!c||!c.length){var w=g.selectAll(".nv-noData").data([m]);return w.enter().append("text").attr("class","nvd3 nv-noData").attr("dy","-.7em").style("text-anchor","middle"),w.attr("x",s.left+b/2).attr("y",s.top+x/2).text(function(e){return e}),t}g.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var _=g.selectAll("g.nv-wrap.nv-boxPlotWithAxes").data([c]),C=_.enter().append("g").attr("class","nvd3 nv-wrap nv-boxPlotWithAxes").append("g"),k=C.append("defs"),S=_.select("g");if(C.append("g").attr("class","nv-x nv-axis"),C.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),C.append("g").attr("class","nv-barsWrap"),S.attr("transform","translate("+s.left+","+s.top+")"),p&&S.select(".nv-y.nv-axis").attr("transform","translate("+b+",0)"),i.width(b).height(x),S.select(".nv-barsWrap").datum(c.filter(function(e){return!e.disabled})).transition().call(i),k.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),S.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(h?2:1)).attr("height",16).attr("x",-n.rangeBand()/(h?1:2)),d){o.scale(n).ticks(e.utils.calcTicksX(b/100,c)).tickSize(-x,0),S.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),S.select(".nv-x.nv-axis").call(o);var $=S.select(".nv-x.nv-axis").selectAll("g");h&&$.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"})}f&&(a.scale(r).ticks(Math.floor(x/36)).tickSize(-b,0),S.select(".nv-y.nv-axis").call(a)),S.select(".nv-zeroLine line").attr("x1",0).attr("x2",b).attr("y1",r(0)).attr("y2",r(0))}),b.renderEnd("nv-boxplot chart immediate"),t}var n,r,i=e.models.boxPlot(),o=e.models.axis(),a=e.models.axis(),s={top:15,right:10,bottom:50,left:60},l=null,u=null,c=e.utils.getColor(),d=!0,f=!0,p=!1,h=!1,g=e.models.tooltip(),m="",v=d3.dispatch("beforeUpdate","renderEnd"),y=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(e){return e}),a.orient(p?"right":"left").tickFormat(d3.format(",.1f")),g.duration(0);var b=e.utils.renderWatch(v,y);return i.dispatch.on("elementMouseover.tooltip",function(e){g.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){g.data(e).hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(e){g()}),t.dispatch=v,t.boxplot=i,t.xAxis=o,t.yAxis=a,t.tooltip=g,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(e){l=e}},height:{get:function(){return u},set:function(e){u=e}},staggerLabels:{get:function(){return h},set:function(e){h=e}},showXAxis:{get:function(){return d},set:function(e){d=e}},showYAxis:{get:function(){return f},set:function(e){f=e}},tooltipContent:{get:function(){return g},set:function(e){g=e}},noData:{get:function(){return m},set:function(e){m=e}},margin:{get:function(){return s},set:function(e){s.top=void 0!==e.top?e.top:s.top,s.right=void 0!==e.right?e.right:s.right,s.bottom=void 0!==e.bottom?e.bottom:s.bottom,s.left=void 0!==e.left?e.left:s.left}},duration:{get:function(){return y},set:function(e){y=e,b.reset(y),i.duration(y),o.duration(y),a.duration(y)}},color:{get:function(){return c},set:function(t){c=e.utils.getColor(t),i.color(c)}},rightAlignYAxis:{get:function(){return p},set:function(e){p=e,a.orient(e?"right":"left")}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.bullet=function(){"use strict";function t(e,t){var n=e.slice();e.sort(function(e,r){var i=n.indexOf(e),o=n.indexOf(r);return d3.descending(t[i],t[o])})}function n(i){return i.each(function(n,i){var m=p-r.left-r.right,w=h-r.top-r.bottom;g=d3.select(this),e.utils.initSVG(g);var _=a.call(this,n,i).slice(),C=s.call(this,n,i).slice(),k=l.call(this,n,i).slice(),S=u.call(this,n,i).slice(),$=c.call(this,n,i).slice(),M=d.call(this,n,i).slice();t(S,_),t($,C),t(M,k),_.sort(d3.descending),C.sort(d3.descending),k.sort(d3.descending);var T=d3.scale.linear().domain(d3.extent(d3.merge([f,_]))).range(o?[m,0]:[0,m]);this.__chart__||d3.scale.linear().domain([0,1/0]).range(T.range());this.__chart__=T;d3.min(_),d3.max(_),_[1];for(var D=g.selectAll("g.nv-wrap.nv-bullet").data([n]),E=D.enter().append("g").attr("class","nvd3 nv-wrap nv-bullet").append("g"),L=D.select("g"),i=0,A=_.length;i<A;i++){var R="nv-range nv-range"+i;i<=2&&(R=R+" nv-range"+x[i]),E.append("rect").attr("class",R)}E.append("rect").attr("class","nv-measure"),D.attr("transform","translate("+r.left+","+r.top+")");for(var P=function(e){return T(e<0?e:0)},i=0,A=_.length;i<A;i++){var F=_[i];L.select("rect.nv-range"+i).attr("height",w).attr("width",function(e){return Math.abs(T(e)-T(0))}(F)).attr("x",P(F)).datum(F)}L.select("rect.nv-measure").style("fill",v).attr("height",w/3).attr("y",w/3).attr("width",k<0?T(0)-T(k[0]):T(k[0])-T(0)).attr("x",P(k)).on("mouseover",function(){y.elementMouseover({value:k[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mousemove",function(){y.elementMousemove({value:k[0],label:M[0]||"Current",color:d3.select(this).style("fill")})}).on("mouseout",function(){y.elementMouseout({value:k[0],label:M[0]||"Current",color:d3.select(this).style("fill")})});var O=w/6,N=C.map(function(e,t){return{value:e,label:$[t]}});E.selectAll("path.nv-markerTriangle").data(N).enter().append("path").attr("class","nv-markerTriangle").attr("d","M0,"+O+"L"+O+","+-O+" "+-O+","+-O+"Z").on("mouseover",function(e){y.elementMouseover({value:e.value,label:e.label||"Previous",color:d3.select(this).style("fill"),pos:[T(e.value),w/2]})}).on("mousemove",function(e){y.elementMousemove({value:e.value,label:e.label||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){y.elementMouseout({value:e.value,label:e.label||"Previous",color:d3.select(this).style("fill")})}),L.selectAll("path.nv-markerTriangle").data(N).attr("transform",function(e){return"translate("+T(e.value)+","+w/2+")"}),D.selectAll(".nv-range").on("mouseover",function(e,t){var n=S[t]||b[t];y.elementMouseover({value:e,label:n,color:d3.select(this).style("fill")})}).on("mousemove",function(){y.elementMousemove({value:k[0],label:M[0]||"Previous",color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){var n=S[t]||b[t];y.elementMouseout({value:e,label:n,color:d3.select(this).style("fill")})})}),n}var r={top:0,right:0,bottom:0,left:0},i="left",o=!1,a=function(e){return e.ranges},s=function(e){return e.markers?e.markers:[]},l=function(e){return e.measures},u=function(e){return e.rangeLabels?e.rangeLabels:[]},c=function(e){return e.markerLabels?e.markerLabels:[]},d=function(e){return e.measureLabels?e.measureLabels:[]},f=[0],p=380,h=30,g=null,m=null,v=e.utils.getColor(["#1f77b4"]),y=d3.dispatch("elementMouseover","elementMouseout","elementMousemove"),b=["Maximum","Mean","Minimum"],x=["Max","Avg","Min"];return n.dispatch=y,n.options=e.utils.optionsFunc.bind(n),n._options=Object.create({},{ranges:{get:function(){return a},set:function(e){a=e}},markers:{get:function(){return s},set:function(e){s=e}},measures:{get:function(){return l},set:function(e){l=e}},forceX:{get:function(){return f},set:function(e){f=e}},width:{get:function(){return p},set:function(e){p=e}},height:{get:function(){return h},set:function(e){h=e}},tickFormat:{get:function(){return m},set:function(e){m=e}},margin:{get:function(){return r},set:function(e){r.top=void 0!==e.top?e.top:r.top,r.right=void 0!==e.right?e.right:r.right,r.bottom=void 0!==e.bottom?e.bottom:r.bottom,r.left=void 0!==e.left?e.left:r.left}},orient:{get:function(){return i},set:function(e){o="right"==(i=e)||"bottom"==i}},color:{get:function(){return v},set:function(t){v=e.utils.getColor(t)}}}),e.utils.initOptions(n),n},e.models.bulletChart=function(){"use strict";function t(r){return r.each(function(i,h){var g=d3.select(this);e.utils.initSVG(g);var m=e.utils.availableWidth(c,g,a),v=d-a.top-a.bottom;if(t.update=function(){t(r)},t.container=this,!i||!s.call(this,i,h))return e.utils.noData(t,g),t;g.selectAll(".nv-noData").remove();var y=s.call(this,i,h).slice().sort(d3.descending),b=l.call(this,i,h).slice().sort(d3.descending),x=u.call(this,i,h).slice().sort(d3.descending),w=g.selectAll("g.nv-wrap.nv-bulletChart").data([i]),_=w.enter().append("g").attr("class","nvd3 nv-wrap nv-bulletChart").append("g"),C=w.select("g");_.append("g").attr("class","nv-bulletWrap"),_.append("g").attr("class","nv-titles"),w.attr("transform","translate("+a.left+","+a.top+")");var k=d3.scale.linear().domain([0,Math.max(y[0],b[0]||0,x[0])]).range(o?[m,0]:[0,m]),S=this.__chart__||d3.scale.linear().domain([0,1/0]).range(k.range());this.__chart__=k;var $=_.select(".nv-titles").append("g").attr("text-anchor","end").attr("transform","translate(-6,"+(d-a.top-a.bottom)/2+")");$.append("text").attr("class","nv-title").text(function(e){return e.title}),$.append("text").attr("class","nv-subtitle").attr("dy","1em").text(function(e){return e.subtitle}),n.width(m).height(v);var M=C.select(".nv-bulletWrap");d3.transition(M).call(n);var T=f||k.tickFormat(m/100),D=C.selectAll("g.nv-tick").data(k.ticks(p||m/50),function(e){return this.textContent||T(e)}),E=D.enter().append("g").attr("class","nv-tick").attr("transform",function(e){return"translate("+S(e)+",0)"}).style("opacity",1e-6);E.append("line").attr("y1",v).attr("y2",7*v/6),E.append("text").attr("text-anchor","middle").attr("dy","1em").attr("y",7*v/6).text(T);var L=d3.transition(D).attr("transform",function(e){return"translate("+k(e)+",0)"}).style("opacity",1);L.select("line").attr("y1",v).attr("y2",7*v/6),L.select("text").attr("y",7*v/6),d3.transition(D.exit()).attr("transform",function(e){return"translate("+k(e)+",0)"}).style("opacity",1e-6).remove()}),d3.timer.flush(),t}var n=e.models.bullet(),r=e.models.tooltip(),i="left",o=!1,a={top:5,right:40,bottom:20,left:120},s=function(e){return e.ranges},l=function(e){return e.markers?e.markers:[]},u=function(e){return e.measures},c=null,d=55,f=null,p=null,h=null,g=d3.dispatch();return r.duration(0).headerEnabled(!1),n.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:e.label,value:e.value,color:e.color},r.data(e).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(e){r.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(e){r()}),t.bullet=n,t.dispatch=g,t.tooltip=r,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{ranges:{get:function(){return s},set:function(e){s=e}},markers:{get:function(){return l},set:function(e){l=e}},measures:{get:function(){return u},set:function(e){u=e}},width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},tickFormat:{get:function(){return f},set:function(e){f=e}},ticks:{get:function(){return p},set:function(e){p=e}},noData:{get:function(){return h},set:function(e){h=e}},margin:{get:function(){return a},set:function(e){a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left}},orient:{get:function(){return i},set:function(e){o="right"==(i=e)||"bottom"==i}}}),e.utils.inheritOptions(t,n),e.utils.initOptions(t),t},e.models.candlestickBar=function(){"use strict";function t(C){return C.each(function(t){n=d3.select(this);var C=e.utils.availableWidth(l,n,s),k=e.utils.availableHeight(u,n,s);e.utils.initSVG(n);var $=C/t[0].values.length*.45;d.domain(r||d3.extent(t[0].values.map(p).concat(b))),w?d.range(o||[.5*C/t[0].values.length,C*(t[0].values.length-.5)/t[0].values.length]):d.range(o||[5+$/2,C-$/2-5]),f.domain(i||[d3.min(t[0].values.map(y).concat(x)),d3.max(t[0].values.map(v).concat(x))]).range(a||[k,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var M=d3.select(this).selectAll("g.nv-wrap.nv-candlestickBar").data([t[0].values]),T=M.enter().append("g").attr("class","nvd3 nv-wrap nv-candlestickBar"),D=T.append("defs"),E=T.append("g"),L=M.select("g");E.append("g").attr("class","nv-ticks"),M.attr("transform","translate("+s.left+","+s.top+")"),n.on("click",function(e,t){S.chartClick({data:e,index:t,pos:d3.event,id:c})}),D.append("clipPath").attr("id","nv-chart-clip-path-"+c).append("rect"),M.select("#nv-chart-clip-path-"+c+" rect").attr("width",C).attr("height",k),L.attr("clip-path",_?"url(#nv-chart-clip-path-"+c+")":"");var A=M.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});A.exit().remove();var R=A.enter().append("g");A.attr("class",function(e,t,n){return(g(e,t)>m(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t});R.append("line").attr("class","nv-candlestick-lines").attr("transform",function(e,t){return"translate("+d(p(e,t))+",0)"}).attr("x1",0).attr("y1",function(e,t){return f(v(e,t))}).attr("x2",0).attr("y2",function(e,t){return f(y(e,t))}),R.append("rect").attr("class","nv-candlestick-rects nv-bars").attr("transform",function(e,t){return"translate("+(d(p(e,t))-$/2)+","+(f(h(e,t))-(g(e,t)>m(e,t)?f(m(e,t))-f(g(e,t)):0))+")"}).attr("x",0).attr("y",0).attr("width",$).attr("height",function(e,t){var n=g(e,t),r=m(e,t);return n>r?f(r)-f(n):f(n)-f(r)});A.select(".nv-candlestick-lines").transition().attr("transform",function(e,t){return"translate("+d(p(e,t))+",0)"}).attr("x1",0).attr("y1",function(e,t){return f(v(e,t))}).attr("x2",0).attr("y2",function(e,t){return f(y(e,t))}),A.select(".nv-candlestick-rects").transition().attr("transform",function(e,t){return"translate("+(d(p(e,t))-$/2)+","+(f(h(e,t))-(g(e,t)>m(e,t)?f(m(e,t))-f(g(e,t)):0))+")"}).attr("x",0).attr("y",0).attr("width",$).attr("height",function(e,t){var n=g(e,t),r=m(e,t);return n>r?f(r)-f(n):f(n)-f(r)})}),t}var n,r,i,o,a,s={top:0,right:0,bottom:0,left:0},l=null,u=null,c=Math.floor(1e4*Math.random()),d=d3.scale.linear(),f=d3.scale.linear(),p=function(e){return e.x},h=function(e){return e.y},g=function(e){return e.open},m=function(e){return e.close},v=function(e){return e.high},y=function(e){return e.low},b=[],x=[],w=!1,_=!0,C=e.utils.defaultColor(),k=!1,S=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return t.highlightPoint=function(e,r){t.clearHighlights(),n.select(".nv-candlestickBar .nv-tick-0-"+e).classed("hover",r)},t.clearHighlights=function(){n.select(".nv-candlestickBar .nv-tick.hover").classed("hover",!1)},t.dispatch=S,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return l},set:function(e){l=e}},height:{get:function(){return u},set:function(e){u=e}},xScale:{get:function(){return d},set:function(e){d=e}},yScale:{get:function(){return f},set:function(e){f=e}},xDomain:{get:function(){return r},set:function(e){r=e}},yDomain:{get:function(){return i},set:function(e){i=e}},xRange:{get:function(){return o},set:function(e){o=e}},yRange:{get:function(){return a},set:function(e){a=e}},forceX:{get:function(){return b},set:function(e){b=e}},forceY:{get:function(){return x},set:function(e){x=e}},padData:{get:function(){return w},set:function(e){w=e}},clipEdge:{get:function(){return _},set:function(e){_=e}},id:{get:function(){return c},set:function(e){c=e}},interactive:{get:function(){return k},set:function(e){k=e}},x:{get:function(){return p},set:function(e){p=e}},y:{get:function(){return h},set:function(e){h=e}},open:{get:function(){return g()},set:function(e){g=e}},close:{get:function(){return m()},set:function(e){m=e}},high:{get:function(){return v},set:function(e){v=e}},low:{get:function(){return y},set:function(e){y=e}},margin:{get:function(){return s},set:function(e){s.top=void 0!=e.top?e.top:s.top,s.right=void 0!=e.right?e.right:s.right,s.bottom=void 0!=e.bottom?e.bottom:s.bottom,s.left=void 0!=e.left?e.left:s.left}},color:{get:function(){return C},set:function(t){C=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.cumulativeLineChart=function(){"use strict";function t(d){return R.reset(),R.models(o),v&&R.models(a),y&&R.models(s),d.each(function(d){function $(e,n){d3.select(t.container).style("cursor","ew-resize")}function E(e,t){A.x=d3.event.x,A.i=Math.round(L.invert(A.x)),O()}function R(e,n){d3.select(t.container).style("cursor","auto"),k.index=A.i,T.stateChange(k)}function O(){te.data([A]);var e=t.duration();t.duration(0),t.update(),t.duration(e)}var N=d3.select(this);e.utils.initSVG(N),N.classed("nv-chart-"+C,!0);var I=this,j=e.utils.availableWidth(h,N,f),Y=e.utils.availableHeight(g,N,f);if(t.update=function(){0===D?N.call(t):N.transition().duration(D).call(t)},t.container=this,k.setter(F(d),t.update).getter(P(d)).update(),k.disabled=d.map(function(e){return!!e.disabled}),!S){var z;S={};for(z in k)k[z]instanceof Array?S[z]=k[z].slice(0):S[z]=k[z]}var H=d3.behavior.drag().on("dragstart",$).on("drag",E).on("dragend",R);if(!(d&&d.length&&d.filter(function(e){return e.values.length}).length))return e.utils.noData(t,N),t;if(N.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale(),_)o.yDomain(null);else{var V=d.filter(function(e){return!e.disabled}).map(function(e,t){var n=d3.extent(e.values,o.y());return n[0]<-.95&&(n[0]=-.95),[(n[0]-n[1])/(1+n[1]),(n[1]-n[0])/(1+n[0])]}),B=[d3.min(V,function(e){return e[0]}),d3.max(V,function(e){return e[1]})];o.yDomain(B)}L.domain([0,d[0].values.length-1]).range([0,j]).clamp(!0);var d=n(A.i,d),W=w?"none":"all",U=N.selectAll("g.nv-wrap.nv-cumulativeLine").data([d]),G=U.enter().append("g").attr("class","nvd3 nv-wrap nv-cumulativeLine").append("g"),q=U.select("g");if(G.append("g").attr("class","nv-interactive"),G.append("g").attr("class","nv-x nv-axis").style("pointer-events","none"),G.append("g").attr("class","nv-y nv-axis"),G.append("g").attr("class","nv-background"),G.append("g").attr("class","nv-linesWrap").style("pointer-events",W),G.append("g").attr("class","nv-avgLinesWrap").style("pointer-events","none"),G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap"),m?(l.width(j),q.select(".nv-legendWrap").datum(d).call(l),f.top!=l.height()&&(f.top=l.height(),Y=e.utils.availableHeight(g,N,f)),q.select(".nv-legendWrap").attr("transform","translate(0,"+-f.top+")")):q.select(".nv-legendWrap").selectAll("*").remove(),x){var K=[{key:"Re-scale y-axis",disabled:!_}];u.width(140).color(["#444","#444","#444"]).rightAlign(!1).margin({top:5,right:0,bottom:5,left:20}),q.select(".nv-controlsWrap").datum(K).attr("transform","translate(0,"+-f.top+")").call(u)}else q.select(".nv-controlsWrap").selectAll("*").remove();U.attr("transform","translate("+f.left+","+f.top+")"),b&&q.select(".nv-y.nv-axis").attr("transform","translate("+j+",0)");var X=d.filter(function(e){return e.tempDisabled});U.select(".tempDisabled").remove(),X.length&&U.append("text").attr("class","tempDisabled").attr("x",j/2).attr("y","-.71em").style("text-anchor","end").text(X.map(function(e){return e.key}).join(", ")+" values cannot be calculated for this time period."),w&&(c.width(j).height(Y).margin({left:f.left,top:f.top}).svgContainer(N).xScale(r),U.select(".nv-interactive").call(c)),G.select(".nv-background").append("rect"),q.select(".nv-background rect").attr("width",j).attr("height",Y),o.y(function(e){return e.display.y}).width(j).height(Y).color(d.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!d[t].disabled&&!d[t].tempDisabled}));var J=q.select(".nv-linesWrap").datum(d.filter(function(e){return!e.disabled&&!e.tempDisabled}));J.call(o),d.forEach(function(e,t){e.seriesIndex=t});var Z=d.filter(function(e){return!e.disabled&&!!M(e)}),Q=q.select(".nv-avgLinesWrap").selectAll("line").data(Z,function(e){return e.key}),ee=function(e){var t=i(M(e));return t<0?0:t>Y?Y:t};Q.enter().append("line").style("stroke-width",2).style("stroke-dasharray","10,10").style("stroke",function(e,t){return o.color()(e,e.seriesIndex)}).attr("x1",0).attr("x2",j).attr("y1",ee).attr("y2",ee),Q.style("stroke-opacity",function(e){var t=i(M(e));return t<0||t>Y?0:1}).attr("x1",0).attr("x2",j).attr("y1",ee).attr("y2",ee),Q.exit().remove();var te=J.selectAll(".nv-indexLine").data([A]);te.enter().append("rect").attr("class","nv-indexLine").attr("width",3).attr("x",-2).attr("fill","red").attr("fill-opacity",.5).style("pointer-events","all").call(H),te.attr("transform",function(e){return"translate("+L(e.i)+",0)"}).attr("height",Y),v&&(a.scale(r)._ticks(e.utils.calcTicksX(j/70,d)).tickSize(-Y,0),q.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),q.select(".nv-x.nv-axis").call(a)),y&&(s.scale(i)._ticks(e.utils.calcTicksY(Y/36,d)).tickSize(-j,0),q.select(".nv-y.nv-axis").call(s)),q.select(".nv-background rect").on("click",function(){A.x=d3.mouse(this)[0],A.i=Math.round(L.invert(A.x)),k.index=A.i,T.stateChange(k),O()}),o.dispatch.on("elementClick",function(e){A.i=e.pointIndex,A.x=L(A.i),k.index=A.i,T.stateChange(k),O()}),u.dispatch.on("legendClick",function(e,n){e.disabled=!e.disabled,_=!e.disabled,k.rescaleY=_,T.stateChange(k),t.update()}),l.dispatch.on("stateChange",function(e){for(var n in e)k[n]=e[n];T.stateChange(k),t.update()}),c.dispatch.on("elementMousemove",function(n){o.clearHighlights();var r,i,l,u=[];if(d.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(a,s){i=e.interactiveBisect(a.values,n.pointXValue,t.x()),o.highlightPoint(s,i,!0);var c=a.values[i];void 0!==c&&(void 0===r&&(r=c),void 0===l&&(l=t.xScale()(t.x()(c,i))),u.push({key:a.key,value:t.y()(c,i),color:p(a,a.seriesIndex)}))}),u.length>2){var f=t.yScale().invert(n.mouseY),h=.03*Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),g=e.nearestValueIndex(u.map(function(e){return e.value}),f,h);null!==g&&(u[g].highlight=!0)}var m=a.tickFormat()(t.x()(r,i),i);c.tooltip.chartContainer(I.parentNode).valueFormatter(function(e,t){return s.tickFormat()(e)}).data({value:m,series:u})(),c.renderGuideLine(l)}),c.dispatch.on("elementMouseout",function(e){o.clearHighlights()}),T.on("changeState",function(e){void 0!==e.disabled&&(d.forEach(function(t,n){t.disabled=e.disabled[n]}),k.disabled=e.disabled),void 0!==e.index&&(A.i=e.index,A.x=L(A.i),k.index=e.index,te.data([A])),void 0!==e.rescaleY&&(_=e.rescaleY),t.update()})}),R.renderEnd("cumulativeLineChart immediate"),t}function n(e,t){return O||(O=o.y()),t.map(function(t,n){if(!t.values)return t;var r=t.values[e];if(null==r)return t;var i=O(r,e);return i<-.95&&!E?(t.tempDisabled=!0,t):(t.tempDisabled=!1,t.values=t.values.map(function(e,t){return e.display={y:(O(e,t)-i)/(1+i)},e}),t)})}var r,i,o=e.models.line(),a=e.models.axis(),s=e.models.axis(),l=e.models.legend(),u=e.models.legend(),c=e.interactiveGuideline(),d=e.models.tooltip(),f={top:30,right:30,bottom:50,left:60},p=e.utils.defaultColor(),h=null,g=null,m=!0,v=!0,y=!0,b=!1,x=!0,w=!1,_=!0,C=o.id(),k=e.utils.state(),S=null,$=null,M=function(e){return e.average},T=d3.dispatch("stateChange","changeState","renderEnd"),D=250,E=!1;k.index=0,k.rescaleY=_,a.orient("bottom").tickPadding(7),s.orient(b?"right":"left"),d.valueFormatter(function(e,t){return s.tickFormat()(e,t)}).headerFormatter(function(e,t){return a.tickFormat()(e,t)}),u.updateState(!1);var L=d3.scale.linear(),A={i:0,x:0},R=e.utils.renderWatch(T,D),P=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),index:A.i,rescaleY:_}}},F=function(e){return function(t){void 0!==t.index&&(A.i=t.index),void 0!==t.rescaleY&&(_=t.rescaleY),void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};o.dispatch.on("elementMouseover.tooltip",function(e){var n={x:t.x()(e.point),y:t.y()(e.point),color:e.point.color};e.point=n,d.data(e).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(e){d.hidden(!0)});var O=null;return t.dispatch=T,t.lines=o,t.legend=l,t.controls=u,t.xAxis=a,t.yAxis=s,t.interactiveLayer=c,t.state=k,t.tooltip=d,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return h},set:function(e){h=e}},height:{get:function(){return g},set:function(e){g=e}},rescaleY:{get:function(){return _},set:function(e){_=e}},showControls:{get:function(){return x},set:function(e){x=e}},showLegend:{get:function(){return m},set:function(e){m=e}},average:{get:function(){return M},set:function(e){M=e}},defaultState:{get:function(){return S},set:function(e){S=e}},noData:{get:function(){return $},set:function(e){$=e}},showXAxis:{get:function(){return v},set:function(e){v=e}},showYAxis:{get:function(){return y},set:function(e){y=e}},noErrorCheck:{get:function(){return E},set:function(e){E=e}},margin:{get:function(){return f},set:function(e){f.top=void 0!==e.top?e.top:f.top,f.right=void 0!==e.right?e.right:f.right,f.bottom=void 0!==e.bottom?e.bottom:f.bottom,f.left=void 0!==e.left?e.left:f.left}},color:{get:function(){return p},set:function(t){p=e.utils.getColor(t),l.color(p)}},useInteractiveGuideline:{get:function(){return w},set:function(e){w=e,!0===e&&(t.interactive(!1),t.useVoronoi(!1))}},rightAlignYAxis:{get:function(){return b},set:function(e){b=e,s.orient(e?"right":"left")}},duration:{get:function(){return D},set:function(e){D=e,o.duration(D),a.duration(D),s.duration(D),R.reset(D)}}}),e.utils.inheritOptions(t,o),e.utils.initOptions(t),t},e.models.discreteBar=function(){"use strict";function t(f){return k.reset(),f.each(function(t){var f=c-u.left-u.right,C=d-u.top-u.bottom;n=d3.select(this),e.utils.initSVG(n),t.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var S=r&&i?[]:t.map(function(e){return e.values.map(function(e,t){return{x:g(e,t),y:m(e,t),y0:e.y0}})});p.domain(r||d3.merge(S).map(function(e){return e.x})).rangeBands(o||[0,f],.1),h.domain(i||d3.extent(d3.merge(S).map(function(e){return e.y}).concat(v))),b?h.range(a||[C-(h.domain()[0]<0?12:0),h.domain()[1]>0?12:0]):h.range(a||[C,0]),s=s||p,l=l||h.copy().range([h(0),h(0)]);var $=n.selectAll("g.nv-wrap.nv-discretebar").data([t]),M=$.enter().append("g").attr("class","nvd3 nv-wrap nv-discretebar").append("g");$.select("g");M.append("g").attr("class","nv-groups"),$.attr("transform","translate("+u.left+","+u.top+")");var T=$.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});T.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),T.exit().watchTransition(k,"discreteBar: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),T.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}),T.watchTransition(k,"discreteBar: groups").style("stroke-opacity",1).style("fill-opacity",.75);var D=T.selectAll("g.nv-bar").data(function(e){return e.values});D.exit().remove();var E=D.enter().append("g").attr("transform",function(e,t,n){return"translate("+(p(g(e,t))+.05*p.rangeBand())+", "+h(0)+")"}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),w.elementMouseover({data:e,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),w.elementMouseout({data:e,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(e,t){w.elementMousemove({data:e,index:t,color:d3.select(this).style("fill")})}).on("click",function(e,t){var n=this;w.elementClick({data:e,index:t,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(e,t){w.elementDblClick({data:e,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation()});E.append("rect").attr("height",0).attr("width",.9*p.rangeBand()/t.length),b?(E.append("text").attr("text-anchor","middle"),D.select("text").text(function(e,t){return x(m(e,t))}).watchTransition(k,"discreteBar: bars text").attr("x",.9*p.rangeBand()/2).attr("y",function(e,t){return m(e,t)<0?h(m(e,t))-h(0)+12:-4})):D.selectAll("text").remove(),D.attr("class",function(e,t){return m(e,t)<0?"nv-bar negative":"nv-bar positive"}).style("fill",function(e,t){return e.color||y(e,t)}).style("stroke",function(e,t){return e.color||y(e,t)}).select("rect").attr("class",_).watchTransition(k,"discreteBar: bars rect").attr("width",.9*p.rangeBand()/t.length),D.watchTransition(k,"discreteBar: bars").attr("transform",function(e,t){return"translate("+(p(g(e,t))+.05*p.rangeBand())+", "+(m(e,t)<0?h(0):h(0)-h(m(e,t))<1?h(0)-1:h(m(e,t)))+")"}).select("rect").attr("height",function(e,t){return Math.max(Math.abs(h(m(e,t))-h(0)),1)}),s=p.copy(),l=h.copy()}),k.renderEnd("discreteBar immediate"),t}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=Math.floor(1e4*Math.random()),p=d3.scale.ordinal(),h=d3.scale.linear(),g=function(e){return e.x},m=function(e){return e.y},v=[0],y=e.utils.defaultColor(),b=!1,x=d3.format(",.2f"),w=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),_="discreteBar",C=250,k=e.utils.renderWatch(w,C);return t.dispatch=w,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},forceY:{get:function(){return v},set:function(e){v=e}},showValues:{get:function(){return b},set:function(e){b=e}},x:{get:function(){return g},set:function(e){g=e}},y:{get:function(){return m},set:function(e){m=e}},xScale:{get:function(){return p},set:function(e){p=e}},yScale:{get:function(){return h},set:function(e){h=e}},xDomain:{get:function(){return r},set:function(e){r=e}},yDomain:{get:function(){return i},set:function(e){i=e}},xRange:{get:function(){return o},set:function(e){o=e}},yRange:{get:function(){return a},set:function(e){a=e}},valueFormat:{get:function(){return x},set:function(e){x=e}},id:{get:function(){return f},set:function(e){f=e}},rectClass:{get:function(){return _},set:function(e){_=e}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},color:{get:function(){return y},set:function(t){y=e.utils.getColor(t)}},duration:{get:function(){return C},set:function(e){C=e,k.reset(C)}}}),e.utils.initOptions(t),t},e.models.discreteBarChart=function(){"use strict";function t(l){return C.reset(),C.models(i),h&&C.models(o),g&&C.models(a),l.each(function(l){var f=d3.select(this);e.utils.initSVG(f);var x=e.utils.availableWidth(c,f,u),C=e.utils.availableHeight(d,f,u);if(t.update=function(){w.beforeUpdate(),f.transition().duration(_).call(t)},t.container=this,!(l&&l.length&&l.filter(function(e){return e.values.length}).length))return e.utils.noData(t,f),t;f.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var k=f.selectAll("g.nv-wrap.nv-discreteBarWithAxes").data([l]),S=k.enter().append("g").attr("class","nvd3 nv-wrap nv-discreteBarWithAxes").append("g"),$=S.append("defs"),M=k.select("g");if(S.append("g").attr("class","nv-x nv-axis"),S.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),S.append("g").attr("class","nv-barsWrap"),S.append("g").attr("class","nv-legendWrap"),M.attr("transform","translate("+u.left+","+u.top+")"),p?(s.width(x),M.select(".nv-legendWrap").datum(l).call(s),u.top!=s.height()&&(u.top=s.height(),C=e.utils.availableHeight(d,f,u)),k.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")):M.select(".nv-legendWrap").selectAll("*").remove(),m&&M.select(".nv-y.nv-axis").attr("transform","translate("+x+",0)"),i.width(x).height(C),M.select(".nv-barsWrap").datum(l.filter(function(e){return!e.disabled})).transition().call(i),$.append("clipPath").attr("id","nv-x-label-clip-"+i.id()).append("rect"),M.select("#nv-x-label-clip-"+i.id()+" rect").attr("width",n.rangeBand()*(v?2:1)).attr("height",16).attr("x",-n.rangeBand()/(v?1:2)),h){o.scale(n)._ticks(e.utils.calcTicksX(x/100,l)).tickSize(-C,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+(r.range()[0]+(i.showValues()&&r.domain()[0]<0?16:0))+")"),M.select(".nv-x.nv-axis").call(o);var T=M.select(".nv-x.nv-axis").selectAll("g");v&&T.selectAll("text").attr("transform",function(e,t,n){return"translate(0,"+(n%2==0?"5":"17")+")"}),b&&T.selectAll(".tick text").attr("transform","rotate("+b+" 0,0)").style("text-anchor",b>0?"start":"end"),y&&M.selectAll(".tick text").call(e.utils.wrapTicks,t.xAxis.rangeBand())}g&&(a.scale(r)._ticks(e.utils.calcTicksY(C/36,l)).tickSize(-x,0),M.select(".nv-y.nv-axis").call(a)),M.select(".nv-zeroLine line").attr("x1",0).attr("x2",m?-x:x).attr("y1",r(0)).attr("y2",r(0))}),C.renderEnd("discreteBar chart immediate"),t}var n,r,i=e.models.discreteBar(),o=e.models.axis(),a=e.models.axis(),s=e.models.legend(),l=e.models.tooltip(),u={top:15,right:10,bottom:50,left:60},c=null,d=null,f=e.utils.getColor(),p=!1,h=!0,g=!0,m=!1,v=!1,y=!1,b=0,x=null,w=d3.dispatch("beforeUpdate","renderEnd"),_=250;o.orient("bottom").showMaxMin(!1).tickFormat(function(e){return e}),a.orient(m?"right":"left").tickFormat(d3.format(",.1f")),l.duration(0).headerEnabled(!1).valueFormatter(function(e,t){return a.tickFormat()(e,t)}).keyFormatter(function(e,t){return o.tickFormat()(e,t)});var C=e.utils.renderWatch(w,_);return i.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color},l.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){l.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(e){l()}),t.dispatch=w,t.discretebar=i,t.legend=s,t.xAxis=o,t.yAxis=a,t.tooltip=l,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},showLegend:{get:function(){return p},set:function(e){p=e}},staggerLabels:{get:function(){return v},set:function(e){v=e}},rotateLabels:{get:function(){return b},set:function(e){b=e}},wrapLabels:{get:function(){return y},set:function(e){y=!!e}},showXAxis:{get:function(){return h},set:function(e){h=e}},showYAxis:{get:function(){return g},set:function(e){g=e}},noData:{get:function(){return x},set:function(e){x=e}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},duration:{get:function(){return _},set:function(e){_=e,C.reset(_),i.duration(_),o.duration(_),a.duration(_)}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t),i.color(f),s.color(f)}},rightAlignYAxis:{get:function(){return m},set:function(e){m=e,a.orient(e?"right":"left")}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.distribution=function(){"use strict";function t(i){return f.reset(),i.each(function(t){"x"===a?(r.left,r.right):(r.top,r.bottom);var i="x"==a?"y":"x",c=d3.select(this);e.utils.initSVG(c),n=n||u;var d=c.selectAll("g.nv-distribution").data([t]),p=(d.enter().append("g").attr("class","nvd3 nv-distribution").append("g"),d.select("g"));d.attr("transform","translate("+r.left+","+r.top+")");var h=p.selectAll("g.nv-dist").data(function(e){return e},function(e){return e.key});h.enter().append("g"),h.attr("class",function(e,t){return"nv-dist nv-series-"+t}).style("stroke",function(e,t){return l(e,t)});var g=h.selectAll("line.nv-dist"+a).data(function(e){return e.values});g.enter().append("line").attr(a+"1",function(e,t){return n(s(e,t))}).attr(a+"2",function(e,t){return n(s(e,t))}),f.transition(h.exit().selectAll("line.nv-dist"+a),"dist exit").attr(a+"1",function(e,t){return u(s(e,t))}).attr(a+"2",function(e,t){return u(s(e,t))}).style("stroke-opacity",0).remove(),g.attr("class",function(e,t){return"nv-dist"+a+" nv-dist"+a+"-"+t}).attr(i+"1",0).attr(i+"2",o),f.transition(g,"dist").attr(a+"1",function(e,t){return u(s(e,t))}).attr(a+"2",function(e,t){return u(s(e,t))}),n=u.copy()}),f.renderEnd("distribution immediate"),t}var n,r={top:0,right:0,bottom:0,left:0},i=400,o=8,a="x",s=function(e){return e[a]},l=e.utils.defaultColor(),u=d3.scale.linear(),c=250,d=d3.dispatch("renderEnd"),f=e.utils.renderWatch(d,c);return t.options=e.utils.optionsFunc.bind(t),t.dispatch=d,t.margin=function(e){return arguments.length?(r.top=void 0!==e.top?e.top:r.top,r.right=void 0!==e.right?e.right:r.right,r.bottom=void 0!==e.bottom?e.bottom:r.bottom,r.left=void 0!==e.left?e.left:r.left,t):r},t.width=function(e){return arguments.length?(i=e,t):i},t.axis=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(o=e,t):o},t.getData=function(e){return arguments.length?(s=d3.functor(e),t):s},t.scale=function(e){return arguments.length?(u=e,t):u},t.color=function(n){return arguments.length?(l=e.utils.getColor(n),t):l},t.duration=function(e){return arguments.length?(c=e,f.reset(c),t):c},t},e.models.focus=function(t){"use strict";function n(b){return y.reset(),y.models(t),f&&y.models(o),p&&y.models(a),b.each(function(y){function b(e){var t=+("e"==e),n=t?1:-1,r=k/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function x(){s.empty()||s.extent(g),D.data([s.empty()?r.domain():g]).each(function(e,t){var n=r(e[0])-r.range()[0],i=C-r(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",r(e[1])).attr("width",i<0?0:i)})}function w(){g=s.empty()?null:s.extent();var e=s.empty()?r.domain():s.extent();Math.abs(e[0]-e[1])<=1||(v.brush({extent:e,brush:s}),x(),v.onBrush(e))}var _=d3.select(this);e.utils.initSVG(_);var C=e.utils.availableWidth(c,_,l),k=d-l.top-l.bottom;n.update=function(){0===m?_.call(n):_.transition().duration(m).call(n)},n.container=this,r=t.xScale(),i=t.yScale();var S=_.selectAll("g.nv-focus").data([y]),$=S.enter().append("g").attr("class","nvd3 nv-focus").append("g"),M=S.select("g");S.attr("transform","translate("+l.left+","+l.top+")"),$.append("g").attr("class","nv-background").append("rect"),$.append("g").attr("class","nv-x nv-axis"),$.append("g").attr("class","nv-y nv-axis"),$.append("g").attr("class","nv-contentWrap"),$.append("g").attr("class","nv-brushBackground"),$.append("g").attr("class","nv-x nv-brush"),h&&M.select(".nv-y.nv-axis").attr("transform","translate("+C+",0)"),M.select(".nv-background rect").attr("width",C).attr("height",k),t.width(C).height(k).color(y.map(function(e,t){return e.color||u(e,t)}).filter(function(e,t){return!y[t].disabled}));var T=M.select(".nv-contentWrap").datum(y.filter(function(e){return!e.disabled}));d3.transition(T).call(t),s.x(r).on("brush",function(){w()}),g&&s.extent(g);var D=M.select(".nv-brushBackground").selectAll("g").data([g||s.extent()]),E=D.enter().append("g");E.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",k),E.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",k);var L=M.select(".nv-x.nv-brush").call(s);L.selectAll("rect").attr("height",k),L.selectAll(".resize").append("path").attr("d",b),w(),M.select(".nv-background rect").attr("width",C).attr("height",k),f&&(o.scale(r)._ticks(e.utils.calcTicksX(C/100,y)).tickSize(-k,0),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),d3.transition(M.select(".nv-x.nv-axis")).call(o)),p&&(a.scale(i)._ticks(e.utils.calcTicksY(k/36,y)).tickSize(-C,0),d3.transition(M.select(".nv-y.nv-axis")).call(a)),M.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")")}),y.renderEnd("focus immediate"),n}var r,i,t=t||e.models.line(),o=e.models.axis(),a=e.models.axis(),s=d3.svg.brush(),l={top:10,right:0,bottom:30,left:0},u=e.utils.defaultColor(),c=null,d=70,f=!0,p=!1,h=!1,g=null,m=250,v=d3.dispatch("brush","onBrush","renderEnd");t.interactive(!1),t.pointActive(function(e){return!1});var y=e.utils.renderWatch(v,m);return n.dispatch=v,n.content=t,n.brush=s,n.xAxis=o,n.yAxis=a,n.options=e.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},showXAxis:{get:function(){return f},set:function(e){f=e}},showYAxis:{get:function(){return p},set:function(e){p=e}},brushExtent:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return l},set:function(e){l.top=void 0!==e.top?e.top:l.top,l.right=void 0!==e.right?e.right:l.right,l.bottom=void 0!==e.bottom?e.bottom:l.bottom,l.left=void 0!==e.left?e.left:l.left}},duration:{get:function(){return m},set:function(e){m=e,y.reset(m),t.duration(m),o.duration(m),a.duration(m)}},color:{get:function(){return u},set:function(n){u=e.utils.getColor(n),t.color(u)}},interpolate:{get:function(){return t.interpolate()},set:function(e){t.interpolate(e)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(e){o.tickFormat(e)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(e){a.tickFormat(e)}},x:{get:function(){return t.x()},set:function(e){t.x(e)}},y:{get:function(){return t.y()},set:function(e){t.y(e)}},rightAlignYAxis:{get:function(){return h},set:function(e){h=e,a.orient(h?"right":"left")}}}),e.utils.inheritOptions(n,t),e.utils.initOptions(n),n},e.models.forceDirectedGraph=function(){"use strict";function t(a){return x.reset(),a.each(function(a){o=d3.select(this),e.utils.initSVG(o);var u=e.utils.availableWidth(r,o,n),x=e.utils.availableHeight(i,o,n);if(o.attr("width",u).attr("height",x),!(a&&a.links&&a.nodes))return e.utils.noData(t,o),t;o.selectAll(".nv-noData").remove(),o.selectAll("*").remove();var w=new Set;a.nodes.forEach(function(e){Object.keys(e).forEach(function(e){w.add(e)})});var _=d3.layout.force().nodes(a.nodes).links(a.links).size([u,x]).linkStrength(c).friction(d).linkDistance(f).charge(p).gravity(h).theta(g).alpha(m).start(),C=o.selectAll(".link").data(a.links).enter().append("line").attr("class","nv-force-link").style("stroke-width",function(e){return Math.sqrt(e.value)}),k=o.selectAll(".node").data(a.nodes).enter().append("g").attr("class","nv-force-node").call(_.drag);k.append("circle").attr("r",v).style("fill",function(e){return s(e)}).on("mouseover",function(e){o.select(".nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.py),o.select(".nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.px);var t=s(e);e.series=[],w.forEach(function(n){e.series.push({color:t,key:n,value:e[n]})}),l.data(e).hidden(!1)}).on("mouseout",function(e){l.hidden(!0)}),l.headerFormatter(function(e){return"Node"}),b(C),y(k),_.on("tick",function(){C.attr("x1",function(e){return e.source.x}).attr("y1",function(e){return e.source.y}).attr("x2",function(e){return e.target.x}).attr("y2",function(e){return e.target.y}),k.attr("transform",function(e){return"translate("+e.x+", "+e.y+")"})})}),t}var n={top:2,right:0,bottom:2,left:0},r=400,i=32,o=null,a=d3.dispatch("renderEnd"),s=e.utils.getColor(["#000"]),l=e.models.tooltip(),u=null,c=.1,d=.9,f=30,p=-120,h=.1,g=.8,m=.1,v=5,y=function(e){},b=function(e){},x=e.utils.renderWatch(a);return t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},linkStrength:{get:function(){return c},set:function(e){c=e}},friction:{get:function(){return d},set:function(e){d=e}},linkDist:{get:function(){return f},set:function(e){f=e}},charge:{get:function(){return p},set:function(e){p=e}},gravity:{get:function(){return h},set:function(e){h=e}},theta:{get:function(){return g},set:function(e){g=e}},alpha:{get:function(){return m},set:function(e){m=e}},radius:{get:function(){return v},set:function(e){v=e}},x:{get:function(){return getX},set:function(e){getX=d3.functor(e)}},y:{get:function(){return getY},set:function(e){getY=d3.functor(e)}},margin:{get:function(){return n},set:function(e){n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left}},color:{get:function(){return s},set:function(t){s=e.utils.getColor(t)}},noData:{get:function(){return u},set:function(e){u=e}},nodeExtras:{get:function(){return y},set:function(e){y=e}},linkExtras:{get:function(){return b},set:function(e){b=e}}}),t.dispatch=a,t.tooltip=l,e.utils.initOptions(t),t},e.models.furiousLegend=function(){"use strict";function t(m){function v(e,t){return"furious"!=g?"#000":p?e.disengaged?a(e,t):"#fff":p?void 0:e.disabled?a(e,t):"#fff"}function y(e,t){return p&&"furious"==g?e.disengaged?"#fff":a(e,t):e.disabled?"#fff":a(e,t)}return m.each(function(t){var m=r-n.left-n.right,b=d3.select(this);e.utils.initSVG(b);var x=b.selectAll("g.nv-legend").data([t]),w=(x.enter().append("g").attr("class","nvd3 nv-legend").append("g"),x.select("g"));x.attr("transform","translate("+n.left+","+n.top+")");var _,C=w.selectAll(".nv-series").data(function(e){return"furious"!=g?e:e.filter(function(e){return!!p||!e.disengaged})}),k=C.enter().append("g").attr("class","nv-series");"classic"==g?(k.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),_=C.select("circle")):"furious"==g&&(k.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),_=C.select("rect"),k.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),C.select(".nv-check-box").each(function(e,t){d3.select(this).selectAll("path").attr("stroke",v(e,t))})),k.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var S=C.select("text.nv-legend-text");C.on("mouseover",function(e,t){h.legendMouseover(e,t)}).on("mouseout",function(e,t){h.legendMouseout(e,t)}).on("click",function(e,t){h.legendClick(e,t);var n=C.data();d&&("classic"==g?f?(n.forEach(function(e){e.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,n.every(function(e){return e.disabled})&&n.forEach(function(e){e.disabled=!1})):"furious"==g&&(p?(e.disengaged=!e.disengaged,e.userDisabled=void 0==e.userDisabled?!!e.disabled:e.userDisabled,e.disabled=e.disengaged||e.userDisabled):p||(e.disabled=!e.disabled,e.userDisabled=e.disabled,n.filter(function(e){return!e.disengaged}).every(function(e){return e.userDisabled})&&n.forEach(function(e){e.disabled=e.userDisabled=!1}))),h.stateChange({disabled:n.map(function(e){return!!e.disabled}),disengaged:n.map(function(e){return!!e.disengaged})}))}).on("dblclick",function(e,t){if(("furious"!=g||!p)&&(h.legendDblclick(e,t),d)){var n=C.data();n.forEach(function(e){e.disabled=!0,"furious"==g&&(e.userDisabled=e.disabled)}),e.disabled=!1,"furious"==g&&(e.userDisabled=e.disabled),h.stateChange({disabled:n.map(function(e){return!!e.disabled})})}}),C.classed("nv-disabled",function(e){return e.userDisabled}),C.exit().remove(),S.attr("fill",v).text(o);var $;switch(g){case"furious":$=23;break;case"classic":$=20}if(l){var M=[];C.each(function(t,n){var r;if(o(t)&&o(t).length>s){var i=o(t).substring(0,s);r=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(o(t))}else r=d3.select(this).select("text");var a;try{if((a=r.node().getComputedTextLength())<=0)throw Error()}catch(t){a=e.utils.calcApproxTextWidth(r)}M.push(a+u)});for(var T=0,D=0,E=[];D<m&&T<M.length;)E[T]=M[T],D+=M[T++];for(0===T&&(T=1);D>m&&T>1;){E=[],T--;for(var L=0;L<M.length;L++)M[L]>(E[L%T]||0)&&(E[L%T]=M[L]);D=E.reduce(function(e,t,n,r){return e+t})}for(var A=[],R=0,P=0;R<T;R++)A[R]=P,P+=E[R];C.attr("transform",function(e,t){return"translate("+A[t%T]+","+(5+Math.floor(t/T)*$)+")"}),c?w.attr("transform","translate("+(r-n.right-D)+","+n.top+")"):w.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(M.length/T)*$}else{var F,O=5,N=5,I=0;C.attr("transform",function(e,t){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return F=N,r<n.left+n.right+F+i&&(N=F=5,O+=$),(N+=i)>I&&(I=N),"translate("+F+","+O+")"}),w.attr("transform","translate("+(r-n.right-I)+","+n.top+")"),i=n.top+n.bottom+O+15}"furious"==g&&_.attr("width",function(e,t){return S[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),_.style("fill",y).style("stroke",function(e,t){return e.color||a(e,t)})}),t}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(e){return e.key},a=e.utils.getColor(),s=20,l=!0,u=28,c=!0,d=!0,f=!1,p=!1,h=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),g="classic";return t.dispatch=h,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},key:{get:function(){return o},set:function(e){o=e}},align:{get:function(){return l},set:function(e){l=e}},rightAlign:{get:function(){return c},set:function(e){c=e}},maxKeyLength:{get:function(){return s},set:function(e){s=e}},padding:{get:function(){return u},set:function(e){u=e}},updateState:{get:function(){return d},set:function(e){d=e}},radioButtonMode:{get:function(){return f},set:function(e){f=e}},expanded:{get:function(){return p},set:function(e){p=e}},vers:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return n},set:function(e){n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left}},color:{get:function(){return a},set:function(t){a=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.historicalBar=function(){"use strict";function t(C){return C.each(function(t){_.reset(),c=d3.select(this);var C=e.utils.availableWidth(s,c,a),k=e.utils.availableHeight(l,c,a);e.utils.initSVG(c),d.domain(n||d3.extent(t[0].values.map(p).concat(g))),v?d.range(i||[.5*C/t[0].values.length,C*(t[0].values.length-.5)/t[0].values.length]):d.range(i||[0,C]),f.domain(r||d3.extent(t[0].values.map(h).concat(m))).range(o||[k,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var S=c.selectAll("g.nv-wrap.nv-historicalBar-"+u).data([t[0].values]),$=S.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBar-"+u),M=$.append("defs"),T=$.append("g"),D=S.select("g");T.append("g").attr("class","nv-bars"),S.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",function(e,t){x.chartClick({data:e,index:t,pos:d3.event,id:u})}),M.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),S.select("#nv-chart-clip-path-"+u+" rect").attr("width",C).attr("height",k),D.attr("clip-path",y?"url(#nv-chart-clip-path-"+u+")":"");var E=S.select(".nv-bars").selectAll(".nv-bar").data(function(e){return e},function(e,t){return p(e,t)});E.exit().remove(),E.enter().append("rect").attr("x",0).attr("y",function(t,n){return e.utils.NaNtoZero(f(Math.max(0,h(t,n))))}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.abs(f(h(t,n))-f(0)))}).attr("transform",function(e,n){return"translate("+(d(p(e,n))-C/t[0].values.length*.45)+",0)"}).on("mouseover",function(e,t){w&&(d3.select(this).classed("hover",!0),x.elementMouseover({data:e,index:t,color:d3.select(this).style("fill")}))}).on("mouseout",function(e,t){w&&(d3.select(this).classed("hover",!1),x.elementMouseout({data:e,index:t,color:d3.select(this).style("fill")}))}).on("mousemove",function(e,t){w&&x.elementMousemove({data:e,index:t,color:d3.select(this).style("fill")})}).on("click",function(e,t){w&&(x.elementClick({data:e,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}).on("dblclick",function(e,t){w&&(x.elementDblClick({data:e,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation())}),E.attr("fill",function(e,t){return b(e,t)}).attr("class",function(e,t,n){return(h(e,t)<0?"nv-bar negative":"nv-bar positive")+" nv-bar-"+n+"-"+t}).watchTransition(_,"bars").attr("transform",function(e,n){return"translate("+(d(p(e,n))-C/t[0].values.length*.45)+",0)"}).attr("width",C/t[0].values.length*.9),E.watchTransition(_,"bars").attr("y",function(t,n){var r=h(t,n)<0?f(0):f(0)-f(h(t,n))<1?f(0)-1:f(h(t,n));return e.utils.NaNtoZero(r)}).attr("height",function(t,n){return e.utils.NaNtoZero(Math.max(Math.abs(f(h(t,n))-f(0)),1))})}),_.renderEnd("historicalBar immediate"),t}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),f=d3.scale.linear(),p=function(e){return e.x},h=function(e){return e.y},g=[],m=[0],v=!1,y=!0,b=e.utils.defaultColor(),x=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),w=!0,_=e.utils.renderWatch(x,0);return t.highlightPoint=function(e,t){c.select(".nv-bars .nv-bar-0-"+e).classed("hover",t)},t.clearHighlights=function(){c.select(".nv-bars .nv-bar.hover").classed("hover",!1)},t.dispatch=x,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return l},set:function(e){l=e}},forceX:{get:function(){return g},set:function(e){g=e}},forceY:{get:function(){return m},set:function(e){m=e}},padData:{get:function(){return v},set:function(e){v=e}},x:{get:function(){return p},set:function(e){p=e}},y:{get:function(){return h},set:function(e){h=e}},xScale:{get:function(){return d},set:function(e){d=e}},yScale:{get:function(){return f},set:function(e){f=e}},xDomain:{get:function(){return n},set:function(e){n=e}},yDomain:{get:function(){return r},set:function(e){r=e}},xRange:{get:function(){return i},set:function(e){i=e}},yRange:{get:function(){return o},set:function(e){o=e}},clipEdge:{get:function(){return y},set:function(e){y=e}},id:{get:function(){return u},set:function(e){u=e}},interactive:{get:function(){return w},set:function(e){w=e}},margin:{get:function(){return a},set:function(e){a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left}},color:{get:function(){return b},set:function(t){b=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.historicalBarChart=function(t){"use strict";function n(t){return t.each(function(c){S.reset(),S.models(o),m&&S.models(a),v&&S.models(s);var _=d3.select(this),$=this;e.utils.initSVG(_);var M=e.utils.availableWidth(p,_,d),T=e.utils.availableHeight(h,_,d);if(n.update=function(){_.transition().duration(k).call(n)},n.container=this,x.disabled=c.map(function(e){return!!e.disabled}),!w){var D;w={};for(D in x)x[D]instanceof Array?w[D]=x[D].slice(0):w[D]=x[D]}if(!(c&&c.length&&c.filter(function(e){return e.values.length}).length))return e.utils.noData(n,_),n;_.selectAll(".nv-noData").remove(),r=o.xScale(),i=o.yScale();var E=_.selectAll("g.nv-wrap.nv-historicalBarChart").data([c]),L=E.enter().append("g").attr("class","nvd3 nv-wrap nv-historicalBarChart").append("g"),A=E.select("g");L.append("g").attr("class","nv-x nv-axis"),L.append("g").attr("class","nv-y nv-axis"),L.append("g").attr("class","nv-barsWrap"),L.append("g").attr("class","nv-legendWrap"),L.append("g").attr("class","nv-interactive"),g?(l.width(M),A.select(".nv-legendWrap").datum(c).call(l),d.top!=l.height()&&(d.top=l.height(),T=e.utils.availableHeight(h,_,d)),E.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")")):A.select(".nv-legendWrap").selectAll("*").remove(),E.attr("transform","translate("+d.left+","+d.top+")"),y&&A.select(".nv-y.nv-axis").attr("transform","translate("+M+",0)"),b&&(u.width(M).height(T).margin({left:d.left,top:d.top}).svgContainer(_).xScale(r),E.select(".nv-interactive").call(u)),o.width(M).height(T).color(c.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!c[t].disabled})),A.select(".nv-barsWrap").datum(c.filter(function(e){return!e.disabled})).transition().call(o),m&&(a.scale(r)._ticks(e.utils.calcTicksX(M/100,c)).tickSize(-T,0),A.select(".nv-x.nv-axis").attr("transform","translate(0,"+i.range()[0]+")"),A.select(".nv-x.nv-axis").transition().call(a)),v&&(s.scale(i)._ticks(e.utils.calcTicksY(T/36,c)).tickSize(-M,0),A.select(".nv-y.nv-axis").transition().call(s)),u.dispatch.on("elementMousemove",function(t){o.clearHighlights();var r,i,l,d=[];c.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(a,s){i=e.interactiveBisect(a.values,t.pointXValue,n.x()),o.highlightPoint(i,!0);var u=a.values[i];void 0!==u&&(void 0===r&&(r=u),void 0===l&&(l=n.xScale()(n.x()(u,i))),d.push({key:a.key,value:n.y()(u,i),color:f(a,a.seriesIndex),data:a.values[i]}))});var p=a.tickFormat()(n.x()(r,i));u.tooltip.chartContainer($.parentNode).valueFormatter(function(e,t){return s.tickFormat()(e)}).data({value:p,index:i,series:d})(),u.renderGuideLine(l)}),u.dispatch.on("elementMouseout",function(e){C.tooltipHide(),o.clearHighlights()}),l.dispatch.on("legendClick",function(e,r){e.disabled=!e.disabled,c.filter(function(e){return!e.disabled}).length||c.map(function(e){return e.disabled=!1,E.selectAll(".nv-series").classed("disabled",!1),e}),x.disabled=c.map(function(e){return!!e.disabled}),C.stateChange(x),t.transition().call(n)}),l.dispatch.on("legendDblclick",function(e){c.forEach(function(e){e.disabled=!0}),e.disabled=!1,x.disabled=c.map(function(e){return!!e.disabled}),C.stateChange(x),n.update()}),C.on("changeState",function(e){void 0!==e.disabled&&(c.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),n.update()})}),S.renderEnd("historicalBarChart immediate"),n}var r,i,o=t||e.models.historicalBar(),a=e.models.axis(),s=e.models.axis(),l=e.models.legend(),u=e.interactiveGuideline(),c=e.models.tooltip(),d={top:30,right:90,bottom:50,left:90},f=e.utils.defaultColor(),p=null,h=null,g=!1,m=!0,v=!0,y=!1,b=!1,x={},w=null,_=null,C=d3.dispatch("tooltipHide","stateChange","changeState","renderEnd"),k=250;a.orient("bottom").tickPadding(7),s.orient(y?"right":"left"),c.duration(0).headerEnabled(!1).valueFormatter(function(e,t){return s.tickFormat()(e,t)}).headerFormatter(function(e,t){return a.tickFormat()(e,t)});var S=e.utils.renderWatch(C,0);return o.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:n.x()(e.data),value:n.y()(e.data),color:e.color},c.data(e).hidden(!1)}),o.dispatch.on("elementMouseout.tooltip",function(e){c.hidden(!0)}),o.dispatch.on("elementMousemove.tooltip",function(e){c()}),n.dispatch=C,n.bars=o,n.legend=l,n.xAxis=a,n.yAxis=s,n.interactiveLayer=u,n.tooltip=c,n.options=e.utils.optionsFunc.bind(n),n._options=Object.create({},{width:{get:function(){return p},set:function(e){p=e}},height:{get:function(){return h},set:function(e){h=e}},showLegend:{get:function(){return g},set:function(e){g=e}},showXAxis:{get:function(){return m},set:function(e){m=e}},showYAxis:{get:function(){return v},set:function(e){v=e}},defaultState:{get:function(){return w},set:function(e){w=e}},noData:{get:function(){return _},set:function(e){_=e}},margin:{get:function(){return d},set:function(e){d.top=void 0!==e.top?e.top:d.top,d.right=void 0!==e.right?e.right:d.right,d.bottom=void 0!==e.bottom?e.bottom:d.bottom,d.left=void 0!==e.left?e.left:d.left}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t),l.color(f),o.color(f)}},duration:{get:function(){return k},set:function(e){k=e,S.reset(k),s.duration(k),a.duration(k)}},rightAlignYAxis:{get:function(){return y},set:function(e){y=e,s.orient(e?"right":"left")}},useInteractiveGuideline:{get:function(){return b},set:function(e){b=e,!0===e&&n.interactive(!1)}}}),e.utils.inheritOptions(n,o),e.utils.initOptions(n),n},e.models.ohlcBarChart=function(){var t=e.models.historicalBarChart(e.models.ohlcBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},e.models.candlestickBarChart=function(){var t=e.models.historicalBarChart(e.models.candlestickBar());return t.useInteractiveGuideline(!0),t.interactiveLayer.tooltip.contentGenerator(function(e){var n=e.series[0].data;return'<h3 style="color: #'+(n.open<n.close?"2ca02c":"d62728")+'">'+e.value+"</h3><table><tr><td>open:</td><td>"+t.yAxis.tickFormat()(n.open)+"</td></tr><tr><td>close:</td><td>"+t.yAxis.tickFormat()(n.close)+"</td></tr><tr><td>high</td><td>"+t.yAxis.tickFormat()(n.high)+"</td></tr><tr><td>low:</td><td>"+t.yAxis.tickFormat()(n.low)+"</td></tr></table>"}),t},e.models.legend=function(){"use strict";function t(m){function v(e,t){return"furious"!=g?"#000":p?e.disengaged?"#000":"#fff":p?void 0:(e.color||(e.color=a(e,t)),e.disabled?e.color:"#fff")}function y(e,t){return p&&"furious"==g&&e.disengaged?"#eee":e.color||a(e,t)}function b(e,t){return p&&"furious"==g?1:e.disabled?0:1}return m.each(function(t){var a=r-n.left-n.right,m=d3.select(this);e.utils.initSVG(m);var x=m.selectAll("g.nv-legend").data([t]),w=x.enter().append("g").attr("class","nvd3 nv-legend").append("g"),_=x.select("g");x.attr("transform","translate("+n.left+","+n.top+")");var C,k,S=_.selectAll(".nv-series").data(function(e){return"furious"!=g?e:e.filter(function(e){return!!p||!e.disengaged})}),$=S.enter().append("g").attr("class","nv-series");switch(g){case"furious":k=23;break;case"classic":k=20}"classic"==g?($.append("circle").style("stroke-width",2).attr("class","nv-legend-symbol").attr("r",5),C=S.select(".nv-legend-symbol")):"furious"==g&&($.append("rect").style("stroke-width",2).attr("class","nv-legend-symbol").attr("rx",3).attr("ry",3),C=S.select(".nv-legend-symbol"),$.append("g").attr("class","nv-check-box").property("innerHTML",'<path d="M0.5,5 L22.5,5 L22.5,26.5 L0.5,26.5 L0.5,5 Z" class="nv-box"></path><path d="M5.5,12.8618467 L11.9185089,19.2803556 L31,0.198864511" class="nv-check"></path>').attr("transform","translate(-10,-8)scale(0.5)"),S.select(".nv-check-box").each(function(e,t){d3.select(this).selectAll("path").attr("stroke",v(e,t))})),$.append("text").attr("text-anchor","start").attr("class","nv-legend-text").attr("dy",".32em").attr("dx","8");var M=S.select("text.nv-legend-text");S.on("mouseover",function(e,t){h.legendMouseover(e,t)}).on("mouseout",function(e,t){h.legendMouseout(e,t)}).on("click",function(e,t){h.legendClick(e,t);var n=S.data();d&&("classic"==g?f?(n.forEach(function(e){e.disabled=!0}),e.disabled=!1):(e.disabled=!e.disabled,n.every(function(e){return e.disabled})&&n.forEach(function(e){e.disabled=!1})):"furious"==g&&(p?(e.disengaged=!e.disengaged,e.userDisabled=void 0==e.userDisabled?!!e.disabled:e.userDisabled,e.disabled=e.disengaged||e.userDisabled):p||(e.disabled=!e.disabled,e.userDisabled=e.disabled,n.filter(function(e){return!e.disengaged}).every(function(e){return e.userDisabled})&&n.forEach(function(e){e.disabled=e.userDisabled=!1}))),h.stateChange({disabled:n.map(function(e){return!!e.disabled}),disengaged:n.map(function(e){return!!e.disengaged})}))}).on("dblclick",function(e,t){if(("furious"!=g||!p)&&(h.legendDblclick(e,t),d)){var n=S.data();n.forEach(function(e){e.disabled=!0,"furious"==g&&(e.userDisabled=e.disabled)}),e.disabled=!1,"furious"==g&&(e.userDisabled=e.disabled),h.stateChange({disabled:n.map(function(e){return!!e.disabled})})}}),S.classed("nv-disabled",function(e){return e.userDisabled}),S.exit().remove(),M.attr("fill",v).text(o);var T=0;if(l){var D=[];S.each(function(t,n){var r;if(o(t)&&o(t).length>s){var i=o(t).substring(0,s);r=d3.select(this).select("text").text(i+"..."),d3.select(this).append("svg:title").text(o(t))}else r=d3.select(this).select("text");var a;try{if((a=r.node().getComputedTextLength())<=0)throw Error()}catch(t){a=e.utils.calcApproxTextWidth(r)}D.push(a+u)});var E=0,L=[];for(T=0;T<a&&E<D.length;)L[E]=D[E],T+=D[E++];for(0===E&&(E=1);T>a&&E>1;){L=[],E--;for(var A=0;A<D.length;A++)D[A]>(L[A%E]||0)&&(L[A%E]=D[A]);T=L.reduce(function(e,t,n,r){return e+t})}for(var R=[],P=0,F=0;P<E;P++)R[P]=F,F+=L[P];S.attr("transform",function(e,t){return"translate("+R[t%E]+","+(5+Math.floor(t/E)*k)+")"}),c?_.attr("transform","translate("+(r-n.right-T)+","+n.top+")"):_.attr("transform","translate(0,"+n.top+")"),i=n.top+n.bottom+Math.ceil(D.length/E)*k}else{var O,N=5,I=5,j=0;S.attr("transform",function(e,t){var i=d3.select(this).select("text").node().getComputedTextLength()+u;return O=I,r<n.left+n.right+O+i&&(I=O=5,N+=k),(I+=i)>j&&(j=I),T<O+j&&(T=O+j),"translate("+O+","+N+")"}),_.attr("transform","translate("+(r-n.right-j)+","+n.top+")"),i=n.top+n.bottom+N+15}"furious"==g&&(C.attr("width",function(e,t){return M[0][t].getComputedTextLength()+27}).attr("height",18).attr("y",-9).attr("x",-15),w.insert("rect",":first-child").attr("class","nv-legend-bg").attr("fill","#eee").attr("opacity",0),_.select(".nv-legend-bg").transition().duration(300).attr("x",-k).attr("width",T+k-12).attr("height",i+10).attr("y",-n.top-10).attr("opacity",p?1:0)),C.style("fill",y).style("fill-opacity",b).style("stroke",y)}),t}var n={top:5,right:0,bottom:5,left:0},r=400,i=20,o=function(e){return e.key},a=e.utils.getColor(),s=20,l=!0,u=32,c=!0,d=!0,f=!1,p=!1,h=d3.dispatch("legendClick","legendDblclick","legendMouseover","legendMouseout","stateChange"),g="classic";return t.dispatch=h,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},key:{get:function(){return o},set:function(e){o=e}},align:{get:function(){return l},set:function(e){l=e}},maxKeyLength:{get:function(){return s},set:function(e){s=e}},rightAlign:{get:function(){return c},set:function(e){c=e}},padding:{get:function(){return u},set:function(e){u=e}},updateState:{get:function(){return d},set:function(e){d=e}},radioButtonMode:{get:function(){return f},set:function(e){f=e}},expanded:{get:function(){return p},set:function(e){p=e}},vers:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return n},set:function(e){n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left}},color:{get:function(){return a},set:function(t){a=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.line=function(){"use strict";function t(v){return w.reset(),w.models(i),v.each(function(t){l=d3.select(this);var v=e.utils.availableWidth(a,l,o),y=e.utils.availableHeight(s,l,o);e.utils.initSVG(l),n=i.xScale(),r=i.yScale(),b=b||n,x=x||r;var _=l.selectAll("g.nv-wrap.nv-line").data([t]),C=_.enter().append("g").attr("class","nvd3 nv-wrap nv-line"),k=C.append("defs"),S=C.append("g"),$=_.select("g");S.append("g").attr("class","nv-groups"),S.append("g").attr("class","nv-scatterWrap"),_.attr("transform","translate("+o.left+","+o.top+")"),i.width(v).height(y);var M=_.select(".nv-scatterWrap");M.call(i),k.append("clipPath").attr("id","nv-edge-clip-"+i.id()).append("rect"),_.select("#nv-edge-clip-"+i.id()+" rect").attr("width",v).attr("height",y>0?y:0),$.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":""),M.attr("clip-path",g?"url(#nv-edge-clip-"+i.id()+")":"");var T=_.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});T.enter().append("g").style("stroke-opacity",1e-6).style("stroke-width",function(e){return e.strokeWidth||u}).style("fill-opacity",1e-6),T.exit().remove(),T.attr("class",function(e,t){return(e.classed||"")+" nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return c(e,t)}).style("stroke",function(e,t){return c(e,t)}),T.watchTransition(w,"line: groups").style("stroke-opacity",1).style("fill-opacity",function(e){return e.fillOpacity||.5});var D=T.selectAll("path.nv-area").data(function(e){return h(e)?[e]:[]});D.enter().append("path").attr("class","nv-area").attr("d",function(t){return d3.svg.area().interpolate(m).defined(p).x(function(t,n){return e.utils.NaNtoZero(b(d(t,n)))}).y0(function(t,n){return e.utils.NaNtoZero(x(f(t,n)))}).y1(function(e,t){return x(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])}),T.exit().selectAll("path.nv-area").remove(),D.watchTransition(w,"line: areaPaths").attr("d",function(t){return d3.svg.area().interpolate(m).defined(p).x(function(t,r){return e.utils.NaNtoZero(n(d(t,r)))}).y0(function(t,n){return e.utils.NaNtoZero(r(f(t,n)))}).y1(function(e,t){return r(r.domain()[0]<=0?r.domain()[1]>=0?0:r.domain()[1]:r.domain()[0])}).apply(this,[t.values])});var E=T.selectAll("path.nv-line").data(function(e){return[e.values]});E.enter().append("path").attr("class","nv-line").attr("d",d3.svg.line().interpolate(m).defined(p).x(function(t,n){return e.utils.NaNtoZero(b(d(t,n)))}).y(function(t,n){return e.utils.NaNtoZero(x(f(t,n)))})),E.watchTransition(w,"line: linePaths").attr("d",d3.svg.line().interpolate(m).defined(p).x(function(t,r){return e.utils.NaNtoZero(n(d(t,r)))}).y(function(t,n){return e.utils.NaNtoZero(r(f(t,n)))})),b=n.copy(),x=r.copy()}),w.renderEnd("line immediate"),t}var n,r,i=e.models.scatter(),o={top:0,right:0,bottom:0,left:0},a=960,s=500,l=null,u=1.5,c=e.utils.defaultColor(),d=function(e){return e.x},f=function(e){return e.y},p=function(e,t){return!isNaN(f(e,t))&&null!==f(e,t)},h=function(e){return e.area},g=!1,m="linear",v=250,y=d3.dispatch("elementClick","elementMouseover","elementMouseout","renderEnd");i.pointSize(16).pointDomain([16,256]);var b,x,w=e.utils.renderWatch(y,v);return t.dispatch=y,t.scatter=i,i.dispatch.on("elementClick",function(){y.elementClick.apply(this,arguments)}),i.dispatch.on("elementMouseover",function(){y.elementMouseover.apply(this,arguments)}),i.dispatch.on("elementMouseout",function(){y.elementMouseout.apply(this,arguments)}),t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},defined:{get:function(){return p},set:function(e){p=e}},interpolate:{get:function(){return m},set:function(e){m=e}},clipEdge:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return o},set:function(e){o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left}},duration:{get:function(){return v},set:function(e){v=e,w.reset(v),i.duration(v)}},isArea:{get:function(){return h},set:function(e){h=d3.functor(e)}},x:{get:function(){return d},set:function(e){d=e,i.x(e)}},y:{get:function(){return f},set:function(e){f=e,i.y(e)}},color:{get:function(){return c},set:function(t){c=e.utils.getColor(t),i.color(c)}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.lineChart=function(){"use strict";function t(u){return M.reset(),M.models(i),v&&M.models(o),y&&M.models(a),u.each(function(u){function k(){v&&N.select(".nv-focus .nv-x.nv-axis").transition().duration($).call(o)}function M(){y&&N.select(".nv-focus .nv-y.nv-axis").transition().duration($).call(a)}function E(e){N.select(".nv-focus .nv-linesWrap").datum(u.filter(function(e){return!e.disabled}).map(function(t,n){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,n){return i.x()(t,n)>=e[0]&&i.x()(t,n)<=e[1]}),disableTooltip:t.disableTooltip}})).transition().duration($).call(i),k(),M()}var L=d3.select(this);e.utils.initSVG(L);var A=e.utils.availableWidth(p,L,d),R=e.utils.availableHeight(h,L,d)-(w?c.height():0);if(t.update=function(){0===$?L.call(t):L.transition().duration($).call(t)},t.container=this,_.setter(D(u),t.update).getter(T(u)).update(),_.disabled=u.map(function(e){return!!e.disabled}),!C){var P;C={};for(P in _)_[P]instanceof Array?C[P]=_[P].slice(0):C[P]=_[P]}if(!(u&&u.length&&u.filter(function(e){return e.values.length}).length))return e.utils.noData(t,L),t;L.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var F=L.selectAll("g.nv-wrap.nv-lineChart").data([u]),O=F.enter().append("g").attr("class","nvd3 nv-wrap nv-lineChart").append("g"),N=F.select("g");O.append("g").attr("class","nv-legendWrap");var I=O.append("g").attr("class","nv-focus");I.append("g").attr("class","nv-background").append("rect"),I.append("g").attr("class","nv-x nv-axis"),I.append("g").attr("class","nv-y nv-axis"),I.append("g").attr("class","nv-linesWrap"),I.append("g").attr("class","nv-interactive");O.append("g").attr("class","nv-focusWrap");g?(s.width(A),N.select(".nv-legendWrap").datum(u).call(s),"bottom"===m?F.select(".nv-legendWrap").attr("transform","translate(0,"+R+")"):"top"===m&&(d.top!=s.height()&&(d.top=s.height(),R=e.utils.availableHeight(h,L,d)-(w?c.height():0)),F.select(".nv-legendWrap").attr("transform","translate(0,"+-d.top+")"))):N.select(".nv-legendWrap").selectAll("*").remove(),F.attr("transform","translate("+d.left+","+d.top+")"),b&&N.select(".nv-y.nv-axis").attr("transform","translate("+A+",0)"),x&&(l.width(A).height(R).margin({left:d.left,top:d.top}).svgContainer(L).xScale(n),F.select(".nv-interactive").call(l)),N.select(".nv-focus .nv-background rect").attr("width",A).attr("height",R),i.width(A).height(R).color(u.map(function(e,t){return e.color||f(e,t)}).filter(function(e,t){return!u[t].disabled}));var j=N.select(".nv-linesWrap").datum(u.filter(function(e){return!e.disabled}));if(v&&o.scale(n)._ticks(e.utils.calcTicksX(A/100,u)).tickSize(-R,0),y&&a.scale(r)._ticks(e.utils.calcTicksY(R/36,u)).tickSize(-A,0),N.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+R+")"),w){c.width(A),N.select(".nv-focusWrap").attr("transform","translate(0,"+(R+d.bottom+c.margin().top)+")").datum(u.filter(function(e){return!e.disabled})).call(c);var Y=c.brush.empty()?c.xDomain():c.brush.extent();null!==Y&&E(Y)}else j.call(i),k(),M();s.dispatch.on("stateChange",function(e){for(var n in e)_[n]=e[n];S.stateChange(_),t.update()}),l.dispatch.on("elementMousemove",function(r){i.clearHighlights();var o,s,d,p=[];if(u.filter(function(e,t){return e.seriesIndex=t,!e.disabled&&!e.disableTooltip}).forEach(function(a,l){var u=w?c.brush.empty()?c.xScale().domain():c.brush.extent():n.domain(),h=a.values.filter(function(e,t){return i.x()(e,t)>=u[0]&&i.x()(e,t)<=u[1]}),g=h[s=e.interactiveBisect(h,r.pointXValue,i.x())],m=t.y()(g,s);null!==m&&i.highlightPoint(a.seriesIndex,s,!0),void 0!==g&&(void 0===o&&(o=g),void 0===d&&(d=t.xScale()(t.x()(g,s))),p.push({key:a.key,value:m,color:f(a,a.seriesIndex),data:g}))}),p.length>2){var h=t.yScale().invert(r.mouseY),g=.03*Math.abs(t.yScale().domain()[0]-t.yScale().domain()[1]),m=e.nearestValueIndex(p.map(function(e){return e.value}),h,g);null!==m&&(p[m].highlight=!0)}var v=function(e,t){return null==e?"N/A":a.tickFormat()(e)};l.tooltip.chartContainer(t.container.parentNode).valueFormatter(l.tooltip.valueFormatter()||v).data({value:t.x()(o,s),index:s,series:p})(),l.renderGuideLine(d)}),l.dispatch.on("elementClick",function(n){var r,o=[];u.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(i){var a=e.interactiveBisect(i.values,n.pointXValue,t.x()),s=i.values[a];if(void 0!==s){void 0===r&&(r=t.xScale()(t.x()(s,a)));var l=t.yScale()(t.y()(s,a));o.push({point:s,pointIndex:a,pos:[r,l],seriesIndex:i.seriesIndex,series:i})}}),i.dispatch.elementClick(o)}),l.dispatch.on("elementMouseout",function(e){i.clearHighlights()}),c.dispatch.on("onBrush",function(e){E(e)}),S.on("changeState",function(e){void 0!==e.disabled&&u.length===e.disabled.length&&(u.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()})}),M.renderEnd("lineChart immediate"),t}var n,r,i=e.models.line(),o=e.models.axis(),a=e.models.axis(),s=e.models.legend(),l=e.interactiveGuideline(),u=e.models.tooltip(),c=e.models.focus(e.models.line()),d={top:30,right:20,bottom:50,left:60},f=e.utils.defaultColor(),p=null,h=null,g=!0,m="top",v=!0,y=!0,b=!1,x=!1,w=!1,_=e.utils.state(),C=null,k=null,S=d3.dispatch("tooltipShow","tooltipHide","stateChange","changeState","renderEnd"),$=250;o.orient("bottom").tickPadding(7),a.orient(b?"right":"left"),i.clipEdge(!0).duration(0),u.valueFormatter(function(e,t){return a.tickFormat()(e,t)}).headerFormatter(function(e,t){return o.tickFormat()(e,t)}),l.tooltip.valueFormatter(function(e,t){return a.tickFormat()(e,t)}).headerFormatter(function(e,t){return o.tickFormat()(e,t)});var M=e.utils.renderWatch(S,$),T=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},D=function(e){return function(t){void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return i.dispatch.on("elementMouseover.tooltip",function(e){e.series.disableTooltip||u.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){u.hidden(!0)}),t.dispatch=S,t.lines=i,t.legend=s,t.focus=c,t.xAxis=o,t.x2Axis=c.xAxis,t.yAxis=a,t.y2Axis=c.yAxis,t.interactiveLayer=l,t.tooltip=u,t.state=_,t.dispatch=S,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return p},set:function(e){p=e}},height:{get:function(){return h},set:function(e){h=e}},showLegend:{get:function(){return g},set:function(e){g=e}},legendPosition:{get:function(){return m},set:function(e){m=e}},showXAxis:{get:function(){return v},set:function(e){v=e}},showYAxis:{get:function(){return y},set:function(e){y=e}},defaultState:{get:function(){return C},set:function(e){C=e}},noData:{get:function(){return k},set:function(e){k=e}},focusEnable:{get:function(){return w},set:function(e){w=e}},focusHeight:{get:function(){return c.height()},set:function(e){c.height(e)}},focusShowAxisX:{get:function(){return c.showXAxis()},set:function(e){c.showXAxis(e)}},focusShowAxisY:{get:function(){return c.showYAxis()},set:function(e){c.showYAxis(e)}},brushExtent:{get:function(){return c.brushExtent()},set:function(e){c.brushExtent(e)}},focusMargin:{get:function(){return c.margin},set:function(e){c.margin.top=void 0!==e.top?e.top:c.margin.top,c.margin.right=void 0!==e.right?e.right:c.margin.right,c.margin.bottom=void 0!==e.bottom?e.bottom:c.margin.bottom,c.margin.left=void 0!==e.left?e.left:c.margin.left}},margin:{get:function(){return d},set:function(e){d.top=void 0!==e.top?e.top:d.top,d.right=void 0!==e.right?e.right:d.right,d.bottom=void 0!==e.bottom?e.bottom:d.bottom,d.left=void 0!==e.left?e.left:d.left}},duration:{get:function(){return $},set:function(e){$=e,M.reset($),i.duration($),c.duration($),o.duration($),a.duration($)}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t),s.color(f),i.color(f),c.color(f)}},interpolate:{get:function(){return i.interpolate()},set:function(e){i.interpolate(e),c.interpolate(e)}},xTickFormat:{get:function(){return o.tickFormat()},set:function(e){o.tickFormat(e),c.xTickFormat(e)}},yTickFormat:{get:function(){return a.tickFormat()},set:function(e){a.tickFormat(e),c.yTickFormat(e)}},x:{get:function(){return i.x()},set:function(e){i.x(e),c.x(e)}},y:{get:function(){return i.y()},set:function(e){i.y(e),c.y(e)}},rightAlignYAxis:{get:function(){return b},set:function(e){b=e,a.orient(b?"right":"left")}},useInteractiveGuideline:{get:function(){return x},set:function(e){(x=e)&&(i.interactive(!1),i.useVoronoi(!1))}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.lineWithFocusChart=function(){return e.models.lineChart().margin({bottom:30}).focusEnable(!0)},e.models.linePlusBarChart=function(){"use strict";function t(w){return w.each(function(w){function F(e){var t=+("e"==e),n=t?1:-1,r=J/3;return"M"+.5*n+","+r+"A6,6 0 0 "+t+" "+6.5*n+","+(r+6)+"V"+(2*r-6)+"A6,6 0 0 "+t+" "+.5*n+","+2*r+"ZM"+2.5*n+","+(r+8)+"V"+(2*r-8)+"M"+4.5*n+","+(r+8)+"V"+(2*r-8)}function V(){x.empty()||x.extent(P),fe.data([x.empty()?i.domain():P]).each(function(e,t){var n=i(e[0])-i.range()[0],r=i.range()[1]-i(e[1]);d3.select(this).select(".left").attr("width",n<0?0:n),d3.select(this).select(".right").attr("x",i(e[1])).attr("width",r<0?0:r)})}function B(){P=x.empty()?null:x.extent(),n=x.empty()?i.domain():x.extent(),O.brush({extent:n,brush:x}),V(),d.width(K).height(X).color(w.map(function(e,t){return e.color||T(e,t)}).filter(function(e,t){return!w[t].disabled&&w[t].bar})),u.width(K).height(X).color(w.map(function(e,t){return e.color||T(e,t)}).filter(function(e,t){return!w[t].disabled&&!w[t].bar}));var t=oe.select(".nv-focus .nv-barsWrap").datum(Q.length?Q.map(function(e,t){return{key:e.key,values:e.values.filter(function(e,t){return d.x()(e,t)>=n[0]&&d.x()(e,t)<=n[1]})}}):[{values:[]}]),s=oe.select(".nv-focus .nv-linesWrap").datum(G(ee)?[{values:[]}]:ee.filter(function(e){return!e.disabled}).map(function(e,t){return{area:e.area,fillOpacity:e.fillOpacity,key:e.key,values:e.values.filter(function(e,t){return u.x()(e,t)>=n[0]&&u.x()(e,t)<=n[1]})}}));r=Q.length&&!H?d.xScale():u.xScale(),p.scale(r)._ticks(e.utils.calcTicksX(K/100,w)).tickSize(-X,0),p.domain([Math.ceil(n[0]),Math.floor(n[1])]),oe.select(".nv-x.nv-axis").transition().duration(N).call(p),t.transition().duration(N).call(d),s.transition().duration(N).call(u),oe.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+o.range()[0]+")"),g.scale(o)._ticks(e.utils.calcTicksY(X/36,w)).tickSize(-K,0),m.scale(a)._ticks(e.utils.calcTicksY(X/36,w)),H?m.tickSize(ee.length?0:-K,0):m.tickSize(Q.length?0:-K,0);var l=Q.length?1:0,c=ee.length&&!G(ee)?1:0,f=H?c:l,h=H?l:c;oe.select(".nv-focus .nv-y1.nv-axis").style("opacity",f),oe.select(".nv-focus .nv-y2.nv-axis").style("opacity",h).attr("transform","translate("+r.range()[1]+",0)"),oe.select(".nv-focus .nv-y1.nv-axis").transition().duration(N).call(g),oe.select(".nv-focus .nv-y2.nv-axis").transition().duration(N).call(m)}var q=d3.select(this);e.utils.initSVG(q);var K=e.utils.availableWidth(k,q,_),X=e.utils.availableHeight(S,q,_)-(E?R:0),J=R-C.top-C.bottom;if(t.update=function(){q.transition().duration(N).call(t)},t.container=this,I.setter(U(w),t.update).getter(W(w)).update(),I.disabled=w.map(function(e){return!!e.disabled}),!j){var Z;j={};for(Z in I)I[Z]instanceof Array?j[Z]=I[Z].slice(0):j[Z]=I[Z]}if(!(w&&w.length&&w.filter(function(e){return e.values.length}).length))return e.utils.noData(t,q),t;q.selectAll(".nv-noData").remove();var Q=w.filter(function(e){return!e.disabled&&e.bar}),ee=w.filter(function(e){return!e.bar});r=Q.length&&!H?d.xScale():u.xScale(),i=h.scale(),o=H?u.yScale():d.yScale(),a=H?d.yScale():u.yScale(),s=H?c.yScale():f.yScale(),l=H?f.yScale():c.yScale();var te=w.filter(function(e){return!e.disabled&&(H?!e.bar:e.bar)}).map(function(e){return e.values.map(function(e,t){return{x:$(e,t),y:M(e,t)}})}),ne=w.filter(function(e){return!e.disabled&&(H?e.bar:!e.bar)}).map(function(e){return e.values.map(function(e,t){return{x:$(e,t),y:M(e,t)}})});r.range([0,K]),i.domain(d3.extent(d3.merge(te.concat(ne)),function(e){return e.x})).range([0,K]);var re=q.selectAll("g.nv-wrap.nv-linePlusBar").data([w]),ie=re.enter().append("g").attr("class","nvd3 nv-wrap nv-linePlusBar").append("g"),oe=re.select("g");ie.append("g").attr("class","nv-legendWrap");var ae=ie.append("g").attr("class","nv-focus");ae.append("g").attr("class","nv-x nv-axis"),ae.append("g").attr("class","nv-y1 nv-axis"),ae.append("g").attr("class","nv-y2 nv-axis"),ae.append("g").attr("class","nv-barsWrap"),ae.append("g").attr("class","nv-linesWrap");var se=ie.append("g").attr("class","nv-context");if(se.append("g").attr("class","nv-x nv-axis"),se.append("g").attr("class","nv-y1 nv-axis"),se.append("g").attr("class","nv-y2 nv-axis"),se.append("g").attr("class","nv-barsWrap"),se.append("g").attr("class","nv-linesWrap"),se.append("g").attr("class","nv-brushBackground"),se.append("g").attr("class","nv-x nv-brush"),D){var le=b.align()?K/2:K,ue=b.align()?le:0;b.width(le),oe.select(".nv-legendWrap").datum(w.map(function(e){return e.originalKey=void 0===e.originalKey?e.key:e.originalKey,e.key=H?e.originalKey+(e.bar?z:Y):e.originalKey+(e.bar?Y:z),e})).call(b),_.top!=b.height()&&(_.top=b.height(),X=e.utils.availableHeight(S,q,_)-R),oe.select(".nv-legendWrap").attr("transform","translate("+ue+","+-_.top+")")}else oe.select(".nv-legendWrap").selectAll("*").remove();re.attr("transform","translate("+_.left+","+_.top+")"),oe.select(".nv-context").style("display",E?"initial":"none"),f.width(K).height(J).color(w.map(function(e,t){return e.color||T(e,t)}).filter(function(e,t){return!w[t].disabled&&w[t].bar})),c.width(K).height(J).color(w.map(function(e,t){return e.color||T(e,t)}).filter(function(e,t){return!w[t].disabled&&!w[t].bar}));var ce=oe.select(".nv-context .nv-barsWrap").datum(Q.length?Q:[{values:[]}]),de=oe.select(".nv-context .nv-linesWrap").datum(G(ee)?[{values:[]}]:ee.filter(function(e){return!e.disabled}));oe.select(".nv-context").attr("transform","translate(0,"+(X+_.bottom+C.top)+")"),ce.transition().call(f),de.transition().call(c),A&&(h._ticks(e.utils.calcTicksX(K/100,w)).tickSize(-J,0),oe.select(".nv-context .nv-x.nv-axis").attr("transform","translate(0,"+s.range()[0]+")"),oe.select(".nv-context .nv-x.nv-axis").transition().call(h)),L&&(v.scale(s)._ticks(J/36).tickSize(-K,0),y.scale(l)._ticks(J/36).tickSize(Q.length?0:-K,0),oe.select(".nv-context .nv-y3.nv-axis").style("opacity",Q.length?1:0).attr("transform","translate(0,"+i.range()[0]+")"),oe.select(".nv-context .nv-y2.nv-axis").style("opacity",ee.length?1:0).attr("transform","translate("+i.range()[1]+",0)"),oe.select(".nv-context .nv-y1.nv-axis").transition().call(v),oe.select(".nv-context .nv-y2.nv-axis").transition().call(y)),x.x(i).on("brush",B),P&&x.extent(P);var fe=oe.select(".nv-brushBackground").selectAll("g").data([P||x.extent()]),pe=fe.enter().append("g");pe.append("rect").attr("class","left").attr("x",0).attr("y",0).attr("height",J),pe.append("rect").attr("class","right").attr("x",0).attr("y",0).attr("height",J);var he=oe.select(".nv-x.nv-brush").call(x);he.selectAll("rect").attr("height",J),he.selectAll(".resize").append("path").attr("d",F),b.dispatch.on("stateChange",function(e){for(var n in e)I[n]=e[n];O.stateChange(I),t.update()}),O.on("changeState",function(e){void 0!==e.disabled&&(w.forEach(function(t,n){t.disabled=e.disabled[n]}),I.disabled=e.disabled),t.update()}),B()}),t}var n,r,i,o,a,s,l,u=e.models.line(),c=e.models.line(),d=e.models.historicalBar(),f=e.models.historicalBar(),p=e.models.axis(),h=e.models.axis(),g=e.models.axis(),m=e.models.axis(),v=e.models.axis(),y=e.models.axis(),b=e.models.legend(),x=d3.svg.brush(),w=e.models.tooltip(),_={top:30,right:30,bottom:30,left:60},C={top:0,right:30,bottom:20,left:60},k=null,S=null,$=function(e){return e.x},M=function(e){return e.y},T=e.utils.defaultColor(),D=!0,E=!0,L=!1,A=!0,R=50,P=null,F=null,O=d3.dispatch("brush","stateChange","changeState"),N=0,I=e.utils.state(),j=null,Y=" (left axis)",z=" (right axis)",H=!1;u.clipEdge(!0),c.interactive(!1),c.pointActive(function(e){return!1}),p.orient("bottom").tickPadding(5),g.orient("left"),m.orient("right"),h.orient("bottom").tickPadding(5),v.orient("left"),y.orient("right"),w.headerEnabled(!0).headerFormatter(function(e,t){return p.tickFormat()(e,t)});var V=function(){return H?{main:g,focus:v}:{main:m,focus:y}},B=function(){return H?{main:m,focus:y}:{main:g,focus:v}},W=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},U=function(e){return function(t){void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}},G=function(e){return e.every(function(e){return e.disabled})};return u.dispatch.on("elementMouseover.tooltip",function(e){w.duration(100).valueFormatter(function(e,t){return B().main.tickFormat()(e,t)}).data(e).hidden(!1)}),u.dispatch.on("elementMouseout.tooltip",function(e){w.hidden(!0)}),d.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={value:t.y()(e.data),color:e.color},w.duration(0).valueFormatter(function(e,t){return V().main.tickFormat()(e,t)}).data(e).hidden(!1)}),d.dispatch.on("elementMouseout.tooltip",function(e){w.hidden(!0)}),d.dispatch.on("elementMousemove.tooltip",function(e){w()}),t.dispatch=O,t.legend=b,t.lines=u,t.lines2=c,t.bars=d,t.bars2=f,t.xAxis=p,t.x2Axis=h,t.y1Axis=g,t.y2Axis=m,t.y3Axis=v,t.y4Axis=y,t.tooltip=w,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return k},set:function(e){k=e}},height:{get:function(){return S},set:function(e){S=e}},showLegend:{get:function(){return D},set:function(e){D=e}},brushExtent:{get:function(){return P},set:function(e){P=e}},noData:{get:function(){return F},set:function(e){F=e}},focusEnable:{get:function(){return E},set:function(e){E=e}},focusHeight:{get:function(){return R},set:function(e){R=e}},focusShowAxisX:{get:function(){return A},set:function(e){A=e}},focusShowAxisY:{get:function(){return L},set:function(e){L=e}},legendLeftAxisHint:{get:function(){return Y},set:function(e){Y=e}},legendRightAxisHint:{get:function(){return z},set:function(e){z=e}},margin:{get:function(){return _},set:function(e){_.top=void 0!==e.top?e.top:_.top,_.right=void 0!==e.right?e.right:_.right,_.bottom=void 0!==e.bottom?e.bottom:_.bottom,_.left=void 0!==e.left?e.left:_.left}},focusMargin:{get:function(){return C},set:function(e){C.top=void 0!==e.top?e.top:C.top,C.right=void 0!==e.right?e.right:C.right,C.bottom=void 0!==e.bottom?e.bottom:C.bottom,C.left=void 0!==e.left?e.left:C.left}},duration:{get:function(){return N},set:function(e){N=e}},color:{get:function(){return T},set:function(t){T=e.utils.getColor(t),b.color(T)}},x:{get:function(){return $},set:function(e){$=e,u.x(e),c.x(e),d.x(e),f.x(e)}},y:{get:function(){return M},set:function(e){M=e,u.y(e),c.y(e),d.y(e),f.y(e)}},switchYAxisOrder:{get:function(){return H},set:function(e){if(H!==e){var t=g;g=m,m=t;var n=v;v=y,y=n}H=e,g.orient("left"),m.orient("right"),v.orient("left"),y.orient("right")}}}),e.utils.inheritOptions(t,u),e.utils.initOptions(t),t},e.models.multiBar=function(){"use strict";function t(L){return D.reset(),L.each(function(t){var L=c-u.left-u.right,A=d-u.top-u.bottom;g=d3.select(this),e.utils.initSVG(g);var R=0;if(C&&t.length&&(C=[{values:t[0].values.map(function(e){return{x:e.x,y:0,series:e.series,size:.01}})}]),x){var P=d3.layout.stack().offset(w).values(function(e){return e.values}).y(v)(!t.length&&C?C:t);P.forEach(function(e,n){e.nonStackable?(t[n].nonStackableSeries=R++,P[n]=t[n]):n>0&&P[n-1].nonStackable&&P[n].values.map(function(e,t){e.y0-=P[n-1].values[t].y,e.y1=e.y0+e.y})}),t=P}t.forEach(function(e,t){e.values.forEach(function(n){n.series=t,n.key=e.key})}),x&&t.length>0&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(e,o){if(!t[o].nonStackable){var a=e.values[n];a.size=Math.abs(a.y),a.y<0?(a.y1=i,i-=a.size):(a.y1=a.size+r,r+=a.size)}})});var F=r&&i?[]:t.map(function(e,t){return e.values.map(function(e,n){return{x:m(e,n),y:v(e,n),y0:e.y0,y1:e.y1,idx:t}})});f.domain(r||d3.merge(F).map(function(e){return e.x})).rangeBands(o||[0,L],$),p.domain(i||d3.extent(d3.merge(F).map(function(e){var n=e.y;return x&&!t[e.idx].nonStackable&&(n=e.y>0?e.y1:e.y1+e.y),n}).concat(y))).range(a||[A,0]),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]-.01*f.domain()[0],f.domain()[1]+.01*f.domain()[1]]):f.domain([-1,1])),p.domain()[0]===p.domain()[1]&&(p.domain()[0]?p.domain([p.domain()[0]+.01*p.domain()[0],p.domain()[1]-.01*p.domain()[1]]):p.domain([-1,1])),s=s||f,l=l||p;var O=g.selectAll("g.nv-wrap.nv-multibar").data([t]),N=O.enter().append("g").attr("class","nvd3 nv-wrap nv-multibar"),I=N.append("defs"),j=N.append("g"),Y=O.select("g");j.append("g").attr("class","nv-groups"),O.attr("transform","translate("+u.left+","+u.top+")"),I.append("clipPath").attr("id","nv-edge-clip-"+h).append("rect"),O.select("#nv-edge-clip-"+h+" rect").attr("width",L).attr("height",A),Y.attr("clip-path",b?"url(#nv-edge-clip-"+h+")":"");var z=O.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});z.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6);var H=D.transition(z.exit().selectAll("rect.nv-bar"),"multibarExit",Math.min(100,S)).attr("y",function(e,n,r){var i=l(0)||0;return x&&t[e.series]&&!t[e.series].nonStackable&&(i=l(e.y0)),i}).attr("height",0).remove();H.delay&&H.delay(function(e,t){return t*(S/(E+1))-t}),z.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return _(e,t)}).style("stroke",function(e,t){return _(e,t)}),z.style("stroke-opacity",1).style("fill-opacity",M);var V=z.selectAll("rect.nv-bar").data(function(e){return C&&!t.length?C.values:e.values});V.exit().remove();V.enter().append("rect").attr("class",function(e,t){return v(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("x",function(e,n,r){return x&&!t[r].nonStackable?0:r*f.rangeBand()/t.length}).attr("y",function(e,n,r){return l(x&&!t[r].nonStackable?e.y0:0)||0}).attr("height",0).attr("width",function(e,n,r){return f.rangeBand()/(x&&!t[r].nonStackable?1:t.length)}).attr("transform",function(e,t){return"translate("+f(m(e,t))+",0)"});V.style("fill",function(e,t,n){return _(e,n,t)}).style("stroke",function(e,t,n){return _(e,n,t)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),T.elementMouseover({data:e,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),T.elementMouseout({data:e,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(e,t){T.elementMousemove({data:e,index:t,color:d3.select(this).style("fill")})}).on("click",function(e,t){var n=this;T.elementClick({data:e,index:t,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(e,t){T.elementDblClick({data:e,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),V.attr("class",function(e,t){return v(e,t)<0?"nv-bar negative":"nv-bar positive"}).attr("transform",function(e,t){return"translate("+f(m(e,t))+",0)"}),k&&(n||(n=t.map(function(){return!0})),V.style("fill",function(e,t,r){return d3.rgb(k(e,t)).darker(n.map(function(e,t){return t}).filter(function(e,t){return!n[t]})[r]).toString()}).style("stroke",function(e,t,r){return d3.rgb(k(e,t)).darker(n.map(function(e,t){return t}).filter(function(e,t){return!n[t]})[r]).toString()}));var B=V.watchTransition(D,"multibar",Math.min(250,S)).delay(function(e,n){return n*S/t[0].values.length});x?B.attr("y",function(e,n,r){return t[r].nonStackable?v(e,n)<0?p(0):p(0)-p(v(e,n))<-1?p(0)-1:p(v(e,n))||0:p(e.y1)}).attr("height",function(e,n,r){return t[r].nonStackable?Math.max(Math.abs(p(v(e,n))-p(0)),0)||0:Math.max(Math.abs(p(e.y+e.y0)-p(e.y0)),0)}).attr("x",function(e,n,r){var i=0;return t[r].nonStackable&&(i=e.series*f.rangeBand()/t.length,t.length!==R&&(i=t[r].nonStackableSeries*f.rangeBand()/(2*R))),i}).attr("width",function(e,n,r){if(t[r].nonStackable){var i=f.rangeBand()/R;return t.length!==R&&(i=f.rangeBand()/(2*R)),i}return f.rangeBand()}):B.attr("x",function(e,n){return e.series*f.rangeBand()/t.length}).attr("width",f.rangeBand()/t.length).attr("y",function(e,t){return v(e,t)<0?p(0):p(0)-p(v(e,t))<1?p(0)-1:p(v(e,t))||0}).attr("height",function(e,t){return Math.max(Math.abs(p(v(e,t))-p(0)),1)||0}),s=f.copy(),l=p.copy(),t[0]&&t[0].values&&(E=t[0].values.length)}),D.renderEnd("multibar immediate"),t}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=d3.scale.ordinal(),p=d3.scale.linear(),h=Math.floor(1e4*Math.random()),g=null,m=function(e){return e.x},v=function(e){return e.y},y=[0],b=!0,x=!1,w="zero",_=e.utils.defaultColor(),C=!1,k=null,S=500,$=.1,M=.75,T=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),D=e.utils.renderWatch(T,S),E=0;return t.dispatch=T,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},x:{get:function(){return m},set:function(e){m=e}},y:{get:function(){return v},set:function(e){v=e}},xScale:{get:function(){return f},set:function(e){f=e}},yScale:{get:function(){return p},set:function(e){p=e}},xDomain:{get:function(){return r},set:function(e){r=e}},yDomain:{get:function(){return i},set:function(e){i=e}},xRange:{get:function(){return o},set:function(e){o=e}},yRange:{get:function(){return a},set:function(e){a=e}},forceY:{get:function(){return y},set:function(e){y=e}},stacked:{get:function(){return x},set:function(e){x=e}},stackOffset:{get:function(){return w},set:function(e){w=e}},clipEdge:{get:function(){return b},set:function(e){b=e}},disabled:{get:function(){return n},set:function(e){n=e}},id:{get:function(){return h},set:function(e){h=e}},hideable:{get:function(){return C},set:function(e){C=e}},groupSpacing:{get:function(){return $},set:function(e){$=e}},fillOpacity:{get:function(){return M},set:function(e){M=e}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},duration:{get:function(){return S},set:function(e){S=e,D.reset(S)}},color:{get:function(){return _},set:function(t){_=e.utils.getColor(t)}},barColor:{get:function(){return k},set:function(t){k=t?e.utils.getColor(t):null}}}),e.utils.initOptions(t),t},e.models.multiBarChart=function(){"use strict";function t(M){return A.reset(),A.models(i),y&&A.models(o),b&&A.models(a),M.each(function(M){var A=d3.select(this),O=this;e.utils.initSVG(A);var N=e.utils.availableWidth(f,A,d),I=e.utils.availableHeight(p,A,d);if(t.update=function(){0===E?A.call(t):A.transition().duration(E).call(t)},t.container=this,S.setter(F(M),t.update).getter(P(M)).update(),S.disabled=M.map(function(e){return!!e.disabled}),!$){var j;$={};for(j in S)S[j]instanceof Array?$[j]=S[j].slice(0):$[j]=S[j]}if(!(M&&M.length&&M.filter(function(e){return e.values.length}).length))return e.utils.noData(t,A),t;A.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var Y=A.selectAll("g.nv-wrap.nv-multiBarWithLegend").data([M]),z=Y.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarWithLegend").append("g"),H=Y.select("g");if(z.append("g").attr("class","nv-x nv-axis"),z.append("g").attr("class","nv-y nv-axis"),z.append("g").attr("class","nv-barsWrap"),z.append("g").attr("class","nv-legendWrap"),z.append("g").attr("class","nv-controlsWrap"),z.append("g").attr("class","nv-interactive"),v?(l.width(N-D()),H.select(".nv-legendWrap").datum(M).call(l),d.top!=l.height()&&(d.top=l.height(),I=e.utils.availableHeight(p,A,d)),H.select(".nv-legendWrap").attr("transform","translate("+D()+","+-d.top+")")):H.select(".nv-legendWrap").selectAll("*").remove(),g){var V=[{key:m.grouped||"Grouped",disabled:i.stacked()},{key:m.stacked||"Stacked",disabled:!i.stacked()}];u.width(D()).color(["#444","#444","#444"]),H.select(".nv-controlsWrap").datum(V).attr("transform","translate(0,"+-d.top+")").call(u)}else H.select(".nv-controlsWrap").selectAll("*").remove();if(Y.attr("transform","translate("+d.left+","+d.top+")"),x&&H.select(".nv-y.nv-axis").attr("transform","translate("+N+",0)"),i.disabled(M.map(function(e){return e.disabled})).width(N).height(I).color(M.map(function(e,t){return e.color||h(e,t)}).filter(function(e,t){return!M[t].disabled})),H.select(".nv-barsWrap").datum(M.filter(function(e){return!e.disabled})).call(i),y){o.scale(n)._ticks(e.utils.calcTicksX(N/100,M)).tickSize(-I,0),H.select(".nv-x.nv-axis").attr("transform","translate(0,"+r.range()[0]+")"),H.select(".nv-x.nv-axis").call(o);var B=H.select(".nv-x.nv-axis > g").selectAll("g");if(B.selectAll("line, text").style("opacity",1),_){var W=function(e,t){return"translate("+e+","+t+")"};B.selectAll("text").attr("transform",function(e,t,n){return W(0,n%2==0?5:17)});var U=d3.selectAll(".nv-x.nv-axis .nv-wrap g g text")[0].length;H.selectAll(".nv-x.nv-axis .nv-axisMaxMin text").attr("transform",function(e,t){return W(0,0===t||U%2!=0?17:5)})}C&&H.selectAll(".tick text").call(e.utils.wrapTicks,t.xAxis.rangeBand()),w&&B.filter(function(e,t){return t%Math.ceil(M[0].values.length/(N/100))!=0}).selectAll("text, line").style("opacity",0),k&&B.selectAll(".tick text").attr("transform","rotate("+k+" 0,0)").style("text-anchor",k>0?"start":"end"),H.select(".nv-x.nv-axis").selectAll("g.nv-axisMaxMin text").style("opacity",1)}b&&(a.scale(r)._ticks(e.utils.calcTicksY(I/36,M)).tickSize(-N,0),H.select(".nv-y.nv-axis").call(a)),L&&(s.width(N).height(I).margin({left:d.left,top:d.top}).svgContainer(A).xScale(n),Y.select(".nv-interactive").call(s)),l.dispatch.on("stateChange",function(e){for(var n in e)S[n]=e[n];T.stateChange(S),t.update()}),u.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(V=V.map(function(e){return e.disabled=!0,e}),e.disabled=!1,e.key){case"Grouped":case m.grouped:i.stacked(!1);break;case"Stacked":case m.stacked:i.stacked(!0)}S.stacked=i.stacked(),T.stateChange(S),t.update()}}),T.on("changeState",function(e){void 0!==e.disabled&&(M.forEach(function(t,n){t.disabled=e.disabled[n]}),S.disabled=e.disabled),void 0!==e.stacked&&(i.stacked(e.stacked),S.stacked=e.stacked,R=e.stacked),t.update()}),L?(s.dispatch.on("elementMousemove",function(e){if(void 0!=e.pointXValue){var r,i,o,a,l=[];M.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(s,u){i=n.domain().indexOf(e.pointXValue);var c=s.values[i];void 0!==c&&(a=c.x,void 0===r&&(r=c),void 0===o&&(o=e.mouseX),l.push({key:s.key,value:t.y()(c,i),color:h(s,s.seriesIndex),data:s.values[i]}))}),s.tooltip.chartContainer(O.parentNode).data({value:a,index:i,series:l})(),s.renderGuideLine(o)}}),s.dispatch.on("elementMouseout",function(e){s.tooltip.hidden(!0)})):(i.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={key:e.data.key,value:t.y()(e.data),color:e.color},c.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){c.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(e){c()}))}),A.renderEnd("multibarchart immediate"),t}var n,r,i=e.models.multiBar(),o=e.models.axis(),a=e.models.axis(),s=e.interactiveGuideline(),l=e.models.legend(),u=e.models.legend(),c=e.models.tooltip(),d={top:30,right:20,bottom:50,left:60},f=null,p=null,h=e.utils.defaultColor(),g=!0,m={},v=!0,y=!0,b=!0,x=!1,w=!0,_=!1,C=!1,k=0,S=e.utils.state(),$=null,M=null,T=d3.dispatch("stateChange","changeState","renderEnd"),D=function(){return g?180:0},E=250,L=!1;S.stacked=!1,i.stacked(!1),o.orient("bottom").tickPadding(7).showMaxMin(!1).tickFormat(function(e){return e}),a.orient(x?"right":"left").tickFormat(d3.format(",.1f")),c.duration(0).valueFormatter(function(e,t){return a.tickFormat()(e,t)}).headerFormatter(function(e,t){return o.tickFormat()(e,t)}),u.updateState(!1);var A=e.utils.renderWatch(T),R=!1,P=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),stacked:R}}},F=function(e){return function(t){void 0!==t.stacked&&(R=t.stacked),void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch=T,t.multibar=i,t.legend=l,t.controls=u,t.xAxis=o,t.yAxis=a,t.state=S,t.tooltip=c,t.interactiveLayer=s,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return f},set:function(e){f=e}},height:{get:function(){return p},set:function(e){p=e}},showLegend:{get:function(){return v},set:function(e){v=e}},showControls:{get:function(){return g},set:function(e){g=e}},controlLabels:{get:function(){return m},set:function(e){m=e}},showXAxis:{get:function(){return y},set:function(e){y=e}},showYAxis:{get:function(){return b},set:function(e){b=e}},defaultState:{get:function(){return $},set:function(e){$=e}},noData:{get:function(){return M},set:function(e){M=e}},reduceXTicks:{get:function(){return w},set:function(e){w=e}},rotateLabels:{get:function(){return k},set:function(e){k=e}},staggerLabels:{get:function(){return _},set:function(e){_=e}},wrapLabels:{get:function(){return C},set:function(e){C=!!e}},margin:{get:function(){return d},set:function(e){d.top=void 0!==e.top?e.top:d.top,d.right=void 0!==e.right?e.right:d.right,d.bottom=void 0!==e.bottom?e.bottom:d.bottom,d.left=void 0!==e.left?e.left:d.left}},duration:{get:function(){return E},set:function(e){E=e,i.duration(E),o.duration(E),a.duration(E),A.reset(E)}},color:{get:function(){return h},set:function(t){h=e.utils.getColor(t),l.color(h)}},rightAlignYAxis:{get:function(){return x},set:function(e){x=e,a.orient(x?"right":"left")}},useInteractiveGuideline:{get:function(){return L},set:function(e){L=e}},barColor:{get:function(){return i.barColor},set:function(e){i.barColor(e),l.color(function(e,t){return d3.rgb("#ccc").darker(1.5*t).toString()})}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.multiBarHorizontal=function(){"use strict";function t(f){return L.reset(),f.each(function(t){var f=c-u.left-u.right,D=d-u.top-u.bottom;p=d3.select(this),e.utils.initSVG(p),_&&(t=d3.layout.stack().offset("zero").values(function(e){return e.values}).y(v)(t)),t.forEach(function(e,t){e.values.forEach(function(n){n.series=t,n.key=e.key})}),_&&t[0].values.map(function(e,n){var r=0,i=0;t.map(function(e){var t=e.values[n];t.size=Math.abs(t.y),t.y<0?(t.y1=i-t.size,i-=t.size):(t.y1=r,r+=t.size)})});var A=r&&i?[]:t.map(function(e){return e.values.map(function(e,t){return{x:m(e,t),y:v(e,t),y0:e.y0,y1:e.y1}})});h.domain(r||d3.merge(A).map(function(e){return e.x})).rangeBands(o||[0,D],$),g.domain(i||d3.extent(d3.merge(A).map(function(e){return _?e.y>0?e.y1+e.y:e.y1:e.y}).concat(b))),C&&!_?g.range(a||[g.domain()[0]<0?S:0,f-(g.domain()[1]>0?S:0)]):g.range(a||[0,f]),s=s||h,l=l||d3.scale.linear().domain(g.domain()).range([g(0),g(0)]);var R=d3.select(this).selectAll("g.nv-wrap.nv-multibarHorizontal").data([t]),P=R.enter().append("g").attr("class","nvd3 nv-wrap nv-multibarHorizontal"),F=(P.append("defs"),P.append("g"));R.select("g");F.append("g").attr("class","nv-groups"),R.attr("transform","translate("+u.left+","+u.top+")");var O=R.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e,t){return t});O.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),O.exit().watchTransition(L,"multibarhorizontal: exit groups").style("stroke-opacity",1e-6).style("fill-opacity",1e-6).remove(),O.attr("class",function(e,t){return"nv-group nv-series-"+t}).classed("hover",function(e){return e.hover}).style("fill",function(e,t){return x(e,t)}).style("stroke",function(e,t){return x(e,t)}),O.watchTransition(L,"multibarhorizontal: groups").style("stroke-opacity",1).style("fill-opacity",M);var N=O.selectAll("g.nv-bar").data(function(e){return e.values});N.exit().remove();var I=N.enter().append("g").attr("transform",function(e,n,r){return"translate("+l(_?e.y0:0)+","+(_?0:r*h.rangeBand()/t.length+h(m(e,n)))+")"});I.append("rect").attr("width",0).attr("height",h.rangeBand()/(_?1:t.length)),N.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),E.elementMouseover({data:e,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),E.elementMouseout({data:e,index:t,color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){E.elementMouseout({data:e,index:t,color:d3.select(this).style("fill")})}).on("mousemove",function(e,t){E.elementMousemove({data:e,index:t,color:d3.select(this).style("fill")})}).on("click",function(e,t){var n=this;E.elementClick({data:e,index:t,color:d3.select(this).style("fill"),event:d3.event,element:n}),d3.event.stopPropagation()}).on("dblclick",function(e,t){E.elementDblClick({data:e,index:t,color:d3.select(this).style("fill")}),d3.event.stopPropagation()}),y(t[0],0)&&(I.append("polyline"),N.select("polyline").attr("fill","none").attr("points",function(e,n){var r=y(e,n),i=.8*h.rangeBand()/(2*(_?1:t.length));return[[(r=(r=r.length?r:[-Math.abs(r),Math.abs(r)]).map(function(e){return g(e)-g(0)}))[0],-i],[r[0],i],[r[0],0],[r[1],0],[r[1],-i],[r[1],i]].map(function(e){return e.join(",")}).join(" ")}).attr("transform",function(e,n){var r=h.rangeBand()/(2*(_?1:t.length));return"translate("+(v(e,n)<0?0:g(v(e,n))-g(0))+", "+r+")"})),I.append("text"),C&&!_?(N.select("text").attr("text-anchor",function(e,t){return v(e,t)<0?"end":"start"}).attr("y",h.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(e,t){var n=T(v(e,t)),r=y(e,t);return void 0===r?n:r.length?n+"+"+T(Math.abs(r[1]))+"-"+T(Math.abs(r[0])):n+"±"+T(Math.abs(r))}),N.watchTransition(L,"multibarhorizontal: bars").select("text").attr("x",function(e,t){return v(e,t)<0?-4:g(v(e,t))-g(0)+4})):N.selectAll("text").text(""),k&&!_?(I.append("text").classed("nv-bar-label",!0),N.select("text.nv-bar-label").attr("text-anchor",function(e,t){return v(e,t)<0?"start":"end"}).attr("y",h.rangeBand()/(2*t.length)).attr("dy",".32em").text(function(e,t){return m(e,t)}),N.watchTransition(L,"multibarhorizontal: bars").select("text.nv-bar-label").attr("x",function(e,t){return v(e,t)<0?g(0)-g(v(e,t))+4:-4})):N.selectAll("text.nv-bar-label").text(""),N.attr("class",function(e,t){return v(e,t)<0?"nv-bar negative":"nv-bar positive"}),w&&(n||(n=t.map(function(){return!0})),N.style("fill",function(e,t,r){return d3.rgb(w(e,t)).darker(n.map(function(e,t){return t}).filter(function(e,t){return!n[t]})[r]).toString()}).style("stroke",function(e,t,r){return d3.rgb(w(e,t)).darker(n.map(function(e,t){return t}).filter(function(e,t){return!n[t]})[r]).toString()})),_?N.watchTransition(L,"multibarhorizontal: bars").attr("transform",function(e,t){return"translate("+g(e.y1)+","+h(m(e,t))+")"}).select("rect").attr("width",function(e,t){return Math.abs(g(v(e,t)+e.y0)-g(e.y0))||0}).attr("height",h.rangeBand()):N.watchTransition(L,"multibarhorizontal: bars").attr("transform",function(e,n){return"translate("+g(v(e,n)<0?v(e,n):0)+","+(e.series*h.rangeBand()/t.length+h(m(e,n)))+")"}).select("rect").attr("height",h.rangeBand()/t.length).attr("width",function(e,t){return Math.max(Math.abs(g(v(e,t))-g(0)),1)||0}),s=h.copy(),l=g.copy()}),L.renderEnd("multibarHorizontal immediate"),t}var n,r,i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=960,d=500,f=Math.floor(1e4*Math.random()),p=null,h=d3.scale.ordinal(),g=d3.scale.linear(),m=function(e){return e.x},v=function(e){return e.y},y=function(e){return e.yErr},b=[0],x=e.utils.defaultColor(),w=null,_=!1,C=!1,k=!1,S=60,$=.1,M=.75,T=d3.format(",.2f"),D=250,E=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),L=e.utils.renderWatch(E,D);return t.dispatch=E,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},x:{get:function(){return m},set:function(e){m=e}},y:{get:function(){return v},set:function(e){v=e}},yErr:{get:function(){return y},set:function(e){y=e}},xScale:{get:function(){return h},set:function(e){h=e}},yScale:{get:function(){return g},set:function(e){g=e}},xDomain:{get:function(){return r},set:function(e){r=e}},yDomain:{get:function(){return i},set:function(e){i=e}},xRange:{get:function(){return o},set:function(e){o=e}},yRange:{get:function(){return a},set:function(e){a=e}},forceY:{get:function(){return b},set:function(e){b=e}},stacked:{get:function(){return _},set:function(e){_=e}},showValues:{get:function(){return C},set:function(e){C=e}},disabled:{get:function(){return n},set:function(e){n=e}},id:{get:function(){return f},set:function(e){f=e}},valueFormat:{get:function(){return T},set:function(e){T=e}},valuePadding:{get:function(){return S},set:function(e){S=e}},groupSpacing:{get:function(){return $},set:function(e){$=e}},fillOpacity:{get:function(){return M},set:function(e){M=e}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},duration:{get:function(){return D},set:function(e){D=e,L.reset(D)}},color:{get:function(){return x},set:function(t){x=e.utils.getColor(t)}},barColor:{get:function(){return w},set:function(t){w=t?e.utils.getColor(t):null}}}),e.utils.initOptions(t),t},e.models.multiBarHorizontalChart=function(){"use strict";function t(u){return T.reset(),T.models(i),v&&T.models(o),y&&T.models(a),u.each(function(u){var _=d3.select(this);e.utils.initSVG(_);var T=e.utils.availableWidth(d,_,c),D=e.utils.availableHeight(f,_,c);if(t.update=function(){_.transition().duration(S).call(t)},t.container=this,b=i.stacked(),x.setter(M(u),t.update).getter($(u)).update(),x.disabled=u.map(function(e){return!!e.disabled}),!w){var E;w={};for(E in x)x[E]instanceof Array?w[E]=x[E].slice(0):w[E]=x[E]}if(!(u&&u.length&&u.filter(function(e){return e.values.length}).length))return e.utils.noData(t,_),t;_.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale().clamp(!0);var L=_.selectAll("g.nv-wrap.nv-multiBarHorizontalChart").data([u]),A=L.enter().append("g").attr("class","nvd3 nv-wrap nv-multiBarHorizontalChart").append("g"),R=L.select("g");if(A.append("g").attr("class","nv-x nv-axis"),A.append("g").attr("class","nv-y nv-axis").append("g").attr("class","nv-zeroLine").append("line"),A.append("g").attr("class","nv-barsWrap"),A.append("g").attr("class","nv-legendWrap"),A.append("g").attr("class","nv-controlsWrap"),m?(s.width(T-k()),R.select(".nv-legendWrap").datum(u).call(s),c.top!=s.height()&&(c.top=s.height(),D=e.utils.availableHeight(f,_,c)),R.select(".nv-legendWrap").attr("transform","translate("+k()+","+-c.top+")")):R.select(".nv-legendWrap").selectAll("*").remove(),h){var P=[{key:g.grouped||"Grouped",disabled:i.stacked()},{key:g.stacked||"Stacked",disabled:!i.stacked()}];l.width(k()).color(["#444","#444","#444"]),R.select(".nv-controlsWrap").datum(P).attr("transform","translate(0,"+-c.top+")").call(l)}else R.select(".nv-controlsWrap").selectAll("*").remove();L.attr("transform","translate("+c.left+","+c.top+")"),i.disabled(u.map(function(e){return e.disabled})).width(T).height(D).color(u.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!u[t].disabled})),R.select(".nv-barsWrap").datum(u.filter(function(e){return!e.disabled})).transition().call(i),v&&(o.scale(n)._ticks(e.utils.calcTicksY(D/24,u)).tickSize(-T,0),R.select(".nv-x.nv-axis").call(o),R.select(".nv-x.nv-axis").selectAll("g").selectAll("line, text")),y&&(a.scale(r)._ticks(e.utils.calcTicksX(T/100,u)).tickSize(-D,0),R.select(".nv-y.nv-axis").attr("transform","translate(0,"+D+")"),R.select(".nv-y.nv-axis").call(a)),R.select(".nv-zeroLine line").attr("x1",r(0)).attr("x2",r(0)).attr("y1",0).attr("y2",-D),s.dispatch.on("stateChange",function(e){for(var n in e)x[n]=e[n];C.stateChange(x),t.update()}),l.dispatch.on("legendClick",function(e,n){if(e.disabled){switch(P=P.map(function(e){return e.disabled=!0,e}),e.disabled=!1,e.key){case"Grouped":case g.grouped:i.stacked(!1);break;case"Stacked":case g.stacked:i.stacked(!0)}x.stacked=i.stacked(),C.stateChange(x),b=i.stacked(),t.update()}}),C.on("changeState",function(e){void 0!==e.disabled&&(u.forEach(function(t,n){t.disabled=e.disabled[n]}),x.disabled=e.disabled),void 0!==e.stacked&&(i.stacked(e.stacked),x.stacked=e.stacked,b=e.stacked),t.update()})}),T.renderEnd("multibar horizontal chart immediate"),t}var n,r,i=e.models.multiBarHorizontal(),o=e.models.axis(),a=e.models.axis(),s=e.models.legend().height(30),l=e.models.legend().height(30),u=e.models.tooltip(),c={top:30,right:20,bottom:50,left:60},d=null,f=null,p=e.utils.defaultColor(),h=!0,g={},m=!0,v=!0,y=!0,b=!1,x=e.utils.state(),w=null,_=null,C=d3.dispatch("stateChange","changeState","renderEnd"),k=function(){return h?180:0},S=250;x.stacked=!1,i.stacked(b),o.orient("left").tickPadding(5).showMaxMin(!1).tickFormat(function(e){return e}),a.orient("bottom").tickFormat(d3.format(",.1f")),u.duration(0).valueFormatter(function(e,t){return a.tickFormat()(e,t)}).headerFormatter(function(e,t){return o.tickFormat()(e,t)}),l.updateState(!1);var $=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),stacked:b}}},M=function(e){return function(t){void 0!==t.stacked&&(b=t.stacked),void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}},T=e.utils.renderWatch(C,S);return i.dispatch.on("elementMouseover.tooltip",function(e){e.value=t.x()(e.data),e.series={key:e.data.key,value:t.y()(e.data),color:e.color},u.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){u.hidden(!0)}),i.dispatch.on("elementMousemove.tooltip",function(e){u()}),t.dispatch=C,t.multibar=i,t.legend=s,t.controls=l,t.xAxis=o,t.yAxis=a,t.state=x,t.tooltip=u,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return d},set:function(e){d=e}},height:{get:function(){return f},set:function(e){f=e}},showLegend:{get:function(){return m},set:function(e){m=e}},showControls:{get:function(){return h},set:function(e){h=e}},controlLabels:{get:function(){return g},set:function(e){g=e}},showXAxis:{get:function(){return v},set:function(e){v=e}},showYAxis:{get:function(){return y},set:function(e){y=e}},defaultState:{get:function(){return w},set:function(e){w=e}},noData:{get:function(){return _},set:function(e){_=e}},margin:{get:function(){return c},set:function(e){c.top=void 0!==e.top?e.top:c.top,c.right=void 0!==e.right?e.right:c.right,c.bottom=void 0!==e.bottom?e.bottom:c.bottom,c.left=void 0!==e.left?e.left:c.left}},duration:{get:function(){return S},set:function(e){S=e,T.reset(S),i.duration(S),o.duration(S),a.duration(S)}},color:{get:function(){return p},set:function(t){p=e.utils.getColor(t),s.color(p)}},barColor:{get:function(){return i.barColor},set:function(e){i.barColor(e),s.color(function(e,t){return d3.rgb("#ccc").darker(1.5*t).toString()})}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.multiChart=function(){"use strict";function t(u){return u.each(function(u){function p(e){var t=2===u[e.seriesIndex].yAxis?E:D;e.value=e.point.x,e.series={value:e.point.y,color:e.point.color,key:e.series.key},A.duration(0).headerFormatter(function(e,t){return T.tickFormat()(e,t)}).valueFormatter(function(e,n){return t.tickFormat()(e,n)}).data(e).hidden(!1)}function R(e){var t=2===u[e.seriesIndex].yAxis?E:D;e.value=e.point.x,e.series={value:e.point.y,color:e.point.color,key:e.series.key},A.duration(100).headerFormatter(function(e,t){return T.tickFormat()(e,t)}).valueFormatter(function(e,n){return t.tickFormat()(e,n)}).data(e).hidden(!1)}function F(e){var t=2===u[e.seriesIndex].yAxis?E:D;e.point.x=$.x()(e.point),e.point.y=$.y()(e.point),A.duration(0).headerFormatter(function(e,t){return T.tickFormat()(e,t)}).valueFormatter(function(e,n){return t.tickFormat()(e,n)}).data(e).hidden(!1)}function O(e){var t=2===u[e.data.series].yAxis?E:D;e.value=k.x()(e.data),e.series={value:k.y()(e.data),color:e.color,key:e.data.key},A.duration(0).headerFormatter(function(e,t){return T.tickFormat()(e,t)}).valueFormatter(function(e,n){return t.tickFormat()(e,n)}).data(e).hidden(!1)}function N(){for(var e=0,t=P.length;e<t;e++){var n=P[e];try{n.clearHighlights()}catch(e){}}}function I(e,t,n){for(var r=0,i=P.length;r<i;r++){var o=P[r];try{o.highlightPoint(e,t,n)}catch(e){}}}var j=d3.select(this);e.utils.initSVG(j),t.update=function(){j.transition().call(t)},t.container=this;var Y=e.utils.availableWidth(a,j,i),z=e.utils.availableHeight(s,j,i),H=u.filter(function(e){return"line"==e.type&&1==e.yAxis}),V=u.filter(function(e){return"line"==e.type&&2==e.yAxis}),B=u.filter(function(e){return"scatter"==e.type&&1==e.yAxis}),W=u.filter(function(e){return"scatter"==e.type&&2==e.yAxis}),U=u.filter(function(e){return"bar"==e.type&&1==e.yAxis}),G=u.filter(function(e){return"bar"==e.type&&2==e.yAxis}),q=u.filter(function(e){return"area"==e.type&&1==e.yAxis}),K=u.filter(function(e){return"area"==e.type&&2==e.yAxis});if(!(u&&u.length&&u.filter(function(e){return e.values.length}).length))return e.utils.noData(t,j),t;j.selectAll(".nv-noData").remove();var X=u.filter(function(e){return!e.disabled&&1==e.yAxis}).map(function(e){return e.values.map(function(e,t){return{x:c(e),y:d(e)}})}),J=u.filter(function(e){return!e.disabled&&2==e.yAxis}).map(function(e){return e.values.map(function(e,t){return{x:c(e),y:d(e)}})});v.domain(d3.extent(d3.merge(X.concat(J)),function(e){return e.x})).range([0,Y]);var Z=j.selectAll("g.wrap.multiChart").data([u]),Q=Z.enter().append("g").attr("class","wrap nvd3 multiChart").append("g");Q.append("g").attr("class","nv-x nv-axis"),Q.append("g").attr("class","nv-y1 nv-axis"),Q.append("g").attr("class","nv-y2 nv-axis"),Q.append("g").attr("class","stack1Wrap"),Q.append("g").attr("class","stack2Wrap"),Q.append("g").attr("class","bars1Wrap"),Q.append("g").attr("class","bars2Wrap"),Q.append("g").attr("class","scatters1Wrap"),Q.append("g").attr("class","scatters2Wrap"),Q.append("g").attr("class","lines1Wrap"),Q.append("g").attr("class","lines2Wrap"),Q.append("g").attr("class","legendWrap"),Q.append("g").attr("class","nv-interactive");var ee=Z.select("g"),te=u.map(function(e,t){return u[t].color||o(e,t)});if(l){var ne=L.align()?Y/2:Y,re=L.align()?ne:0;L.width(ne),L.color(te),ee.select(".legendWrap").datum(u.map(function(e){return e.originalKey=void 0===e.originalKey?e.key:e.originalKey,e.key=e.originalKey+(1==e.yAxis?"":m),e})).call(L),i.top!=L.height()&&(i.top=L.height(),z=e.utils.availableHeight(s,j,i)),ee.select(".legendWrap").attr("transform","translate("+re+","+-i.top+")")}else ee.select(".legendWrap").selectAll("*").remove();x.width(Y).height(z).interpolate(f).color(te.filter(function(e,t){return!u[t].disabled&&1==u[t].yAxis&&"line"==u[t].type})),w.width(Y).height(z).interpolate(f).color(te.filter(function(e,t){return!u[t].disabled&&2==u[t].yAxis&&"line"==u[t].type})),_.width(Y).height(z).color(te.filter(function(e,t){return!u[t].disabled&&1==u[t].yAxis&&"scatter"==u[t].type})),C.width(Y).height(z).color(te.filter(function(e,t){return!u[t].disabled&&2==u[t].yAxis&&"scatter"==u[t].type})),k.width(Y).height(z).color(te.filter(function(e,t){return!u[t].disabled&&1==u[t].yAxis&&"bar"==u[t].type})),S.width(Y).height(z).color(te.filter(function(e,t){return!u[t].disabled&&2==u[t].yAxis&&"bar"==u[t].type})),$.width(Y).height(z).interpolate(f).color(te.filter(function(e,t){return!u[t].disabled&&1==u[t].yAxis&&"area"==u[t].type})),M.width(Y).height(z).interpolate(f).color(te.filter(function(e,t){return!u[t].disabled&&2==u[t].yAxis&&"area"==u[t].type})),ee.attr("transform","translate("+i.left+","+i.top+")");var ie=ee.select(".lines1Wrap").datum(H.filter(function(e){return!e.disabled})),oe=ee.select(".scatters1Wrap").datum(B.filter(function(e){return!e.disabled})),ae=ee.select(".bars1Wrap").datum(U.filter(function(e){return!e.disabled})),se=ee.select(".stack1Wrap").datum(q.filter(function(e){return!e.disabled})),le=ee.select(".lines2Wrap").datum(V.filter(function(e){return!e.disabled})),ue=ee.select(".scatters2Wrap").datum(W.filter(function(e){return!e.disabled})),ce=ee.select(".bars2Wrap").datum(G.filter(function(e){return!e.disabled})),de=ee.select(".stack2Wrap").datum(K.filter(function(e){return!e.disabled})),fe=q.length?q.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[],pe=K.length?K.map(function(e){return e.values}).reduce(function(e,t){return e.map(function(e,n){return{x:e.x,y:e.y+t[n].y}})}).concat([{x:0,y:0}]):[];y.domain(n||d3.extent(d3.merge(X).concat(fe),function(e){return e.y})).range([0,z]),b.domain(r||d3.extent(d3.merge(J).concat(pe),function(e){return e.y})).range([0,z]),x.yDomain(y.domain()),_.yDomain(y.domain()),k.yDomain(y.domain()),$.yDomain(y.domain()),w.yDomain(b.domain()),C.yDomain(b.domain()),S.yDomain(b.domain()),M.yDomain(b.domain()),q.length&&d3.transition(se).call($),K.length&&d3.transition(de).call(M),U.length&&d3.transition(ae).call(k),G.length&&d3.transition(ce).call(S),H.length&&d3.transition(ie).call(x),V.length&&d3.transition(le).call(w),B.length&&d3.transition(oe).call(_),W.length&&d3.transition(ue).call(C),T._ticks(e.utils.calcTicksX(Y/100,u)).tickSize(-z,0),ee.select(".nv-x.nv-axis").attr("transform","translate(0,"+z+")"),d3.transition(ee.select(".nv-x.nv-axis")).call(T),D._ticks(e.utils.calcTicksY(z/36,u)).tickSize(-Y,0),d3.transition(ee.select(".nv-y1.nv-axis")).call(D),E._ticks(e.utils.calcTicksY(z/36,u)).tickSize(-Y,0),d3.transition(ee.select(".nv-y2.nv-axis")).call(E),ee.select(".nv-y1.nv-axis").classed("nv-disabled",!X.length).attr("transform","translate("+v.range()[0]+",0)"),ee.select(".nv-y2.nv-axis").classed("nv-disabled",!J.length).attr("transform","translate("+v.range()[1]+",0)"),L.dispatch.on("stateChange",function(e){t.update()}),g&&(h.width(Y).height(z).margin({left:i.left,top:i.top}).svgContainer(j).xScale(v),Z.select(".nv-interactive").call(h)),g?(h.dispatch.on("elementMousemove",function(n){N();var r,i,a,s=[];u.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(l,u){var c=v.domain(),d=l.values.filter(function(e,n){return t.x()(e,n)>=c[0]&&t.x()(e,n)<=c[1]}),f=d[i=e.interactiveBisect(d,n.pointXValue,t.x())],p=t.y()(f,i);null!==p&&I(u,i,!0),void 0!==f&&(void 0===r&&(r=f),void 0===a&&(a=v(t.x()(f,i))),s.push({key:l.key,value:p,color:o(l,l.seriesIndex),data:f,yAxis:2==l.yAxis?E:D}))}),h.tooltip.chartContainer(t.container.parentNode).headerFormatter(function(e,t){return T.tickFormat()(e,t)}).valueFormatter(function(e,t){var n=s[t].yAxis;return null===e?"N/A":n.tickFormat()(e)}).data({value:t.x()(r,i),index:i,series:s})(),h.renderGuideLine(a)}),h.dispatch.on("elementMouseout",function(e){N()})):(x.dispatch.on("elementMouseover.tooltip",p),w.dispatch.on("elementMouseover.tooltip",p),x.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),w.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),_.dispatch.on("elementMouseover.tooltip",R),C.dispatch.on("elementMouseover.tooltip",R),_.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),C.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),$.dispatch.on("elementMouseover.tooltip",F),M.dispatch.on("elementMouseover.tooltip",F),$.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),M.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),k.dispatch.on("elementMouseover.tooltip",O),S.dispatch.on("elementMouseover.tooltip",O),k.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),S.dispatch.on("elementMouseout.tooltip",function(e){A.hidden(!0)}),k.dispatch.on("elementMousemove.tooltip",function(e){A()}),S.dispatch.on("elementMousemove.tooltip",function(e){A()}))}),t}var n,r,i={top:30,right:20,bottom:50,left:60},o=e.utils.defaultColor(),a=null,s=null,l=!0,u=null,c=function(e){return e.x},d=function(e){return e.y},f="linear",p=!0,h=e.interactiveGuideline(),g=!1,m=" (right axis)",v=d3.scale.linear(),y=d3.scale.linear(),b=d3.scale.linear(),x=e.models.line().yScale(y),w=e.models.line().yScale(b),_=e.models.scatter().yScale(y),C=e.models.scatter().yScale(b),k=e.models.multiBar().stacked(!1).yScale(y),S=e.models.multiBar().stacked(!1).yScale(b),$=e.models.stackedArea().yScale(y),M=e.models.stackedArea().yScale(b),T=e.models.axis().scale(v).orient("bottom").tickPadding(5),D=e.models.axis().scale(y).orient("left"),E=e.models.axis().scale(b).orient("right"),L=e.models.legend().height(30),A=e.models.tooltip(),R=d3.dispatch(),P=[x,w,_,C,k,S,$,M];return t.dispatch=R,t.legend=L,t.lines1=x,t.lines2=w,t.scatters1=_,t.scatters2=C,t.bars1=k,t.bars2=S,t.stack1=$,t.stack2=M,t.xAxis=T,t.yAxis1=D,t.yAxis2=E,t.tooltip=A,t.interactiveLayer=h,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},showLegend:{get:function(){return l},set:function(e){l=e}},yDomain1:{get:function(){return n},set:function(e){n=e}},yDomain2:{get:function(){return r},set:function(e){r=e}},noData:{get:function(){return u},set:function(e){u=e}},interpolate:{get:function(){return f},set:function(e){f=e}},legendRightAxisHint:{get:function(){return m},set:function(e){m=e}},margin:{get:function(){return i},set:function(e){i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left}},color:{get:function(){return o},set:function(t){o=e.utils.getColor(t)}},x:{get:function(){return c},set:function(e){c=e,x.x(e),w.x(e),_.x(e),C.x(e),k.x(e),S.x(e),$.x(e),M.x(e)}},y:{get:function(){return d},set:function(e){d=e,x.y(e),w.y(e),_.y(e),C.y(e),$.y(e),M.y(e),k.y(e),S.y(e)}},useVoronoi:{get:function(){return p},set:function(e){p=e,x.useVoronoi(e),w.useVoronoi(e),$.useVoronoi(e),M.useVoronoi(e)}},useInteractiveGuideline:{get:function(){return g},set:function(e){(g=e)&&(x.interactive(!1),x.useVoronoi(!1),w.interactive(!1),w.useVoronoi(!1),$.interactive(!1),$.useVoronoi(!1),M.interactive(!1),M.useVoronoi(!1),_.interactive(!1),C.interactive(!1))}}}),e.utils.initOptions(t),t},e.models.ohlcBar=function(){"use strict";function t(k){return k.each(function(t){c=d3.select(this);var k=e.utils.availableWidth(s,c,a),$=e.utils.availableHeight(l,c,a);e.utils.initSVG(c);var M=k/t[0].values.length*.9;d.domain(n||d3.extent(t[0].values.map(p).concat(b))),w?d.range(i||[.5*k/t[0].values.length,k*(t[0].values.length-.5)/t[0].values.length]):d.range(i||[5+M/2,k-M/2-5]),f.domain(r||[d3.min(t[0].values.map(y).concat(x)),d3.max(t[0].values.map(v).concat(x))]).range(o||[$,0]),d.domain()[0]===d.domain()[1]&&(d.domain()[0]?d.domain([d.domain()[0]-.01*d.domain()[0],d.domain()[1]+.01*d.domain()[1]]):d.domain([-1,1])),f.domain()[0]===f.domain()[1]&&(f.domain()[0]?f.domain([f.domain()[0]+.01*f.domain()[0],f.domain()[1]-.01*f.domain()[1]]):f.domain([-1,1]));var T=d3.select(this).selectAll("g.nv-wrap.nv-ohlcBar").data([t[0].values]),D=T.enter().append("g").attr("class","nvd3 nv-wrap nv-ohlcBar"),E=D.append("defs"),L=D.append("g"),A=T.select("g");L.append("g").attr("class","nv-ticks"),T.attr("transform","translate("+a.left+","+a.top+")"),c.on("click",function(e,t){S.chartClick({data:e,index:t,pos:d3.event,id:u})}),E.append("clipPath").attr("id","nv-chart-clip-path-"+u).append("rect"),T.select("#nv-chart-clip-path-"+u+" rect").attr("width",k).attr("height",$),A.attr("clip-path",_?"url(#nv-chart-clip-path-"+u+")":"");var R=T.select(".nv-ticks").selectAll(".nv-tick").data(function(e){return e});R.exit().remove(),R.enter().append("path").attr("class",function(e,t,n){return(g(e,t)>m(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}).attr("d",function(e,t){return"m0,0l0,"+(f(g(e,t))-f(v(e,t)))+"l"+-M/2+",0l"+M/2+",0l0,"+(f(y(e,t))-f(g(e,t)))+"l0,"+(f(m(e,t))-f(y(e,t)))+"l"+M/2+",0l"+-M/2+",0z"}).attr("transform",function(e,t){return"translate("+d(p(e,t))+","+f(v(e,t))+")"}).attr("fill",function(e,t){return C[0]}).attr("stroke",function(e,t){return C[0]}).attr("x",0).attr("y",function(e,t){return f(Math.max(0,h(e,t)))}).attr("height",function(e,t){return Math.abs(f(h(e,t))-f(0))}),R.attr("class",function(e,t,n){return(g(e,t)>m(e,t)?"nv-tick negative":"nv-tick positive")+" nv-tick-"+n+"-"+t}),d3.transition(R).attr("transform",function(e,t){return"translate("+d(p(e,t))+","+f(v(e,t))+")"}).attr("d",function(e,n){var r=k/t[0].values.length*.9;return"m0,0l0,"+(f(g(e,n))-f(v(e,n)))+"l"+-r/2+",0l"+r/2+",0l0,"+(f(y(e,n))-f(g(e,n)))+"l0,"+(f(m(e,n))-f(y(e,n)))+"l"+r/2+",0l"+-r/2+",0z"})}),t}var n,r,i,o,a={top:0,right:0,bottom:0,left:0},s=null,l=null,u=Math.floor(1e4*Math.random()),c=null,d=d3.scale.linear(),f=d3.scale.linear(),p=function(e){return e.x},h=function(e){return e.y},g=function(e){return e.open},m=function(e){return e.close},v=function(e){return e.high},y=function(e){return e.low},b=[],x=[],w=!1,_=!0,C=e.utils.defaultColor(),k=!1,S=d3.dispatch("stateChange","changeState","renderEnd","chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove");return t.highlightPoint=function(e,n){t.clearHighlights(),c.select(".nv-ohlcBar .nv-tick-0-"+e).classed("hover",n)},t.clearHighlights=function(){c.select(".nv-ohlcBar .nv-tick.hover").classed("hover",!1)},t.dispatch=S,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return l},set:function(e){l=e}},xScale:{get:function(){return d},set:function(e){d=e}},yScale:{get:function(){return f},set:function(e){f=e}},xDomain:{get:function(){return n},set:function(e){n=e}},yDomain:{get:function(){return r},set:function(e){r=e}},xRange:{get:function(){return i},set:function(e){i=e}},yRange:{get:function(){return o},set:function(e){o=e}},forceX:{get:function(){return b},set:function(e){b=e}},forceY:{get:function(){return x},set:function(e){x=e}},padData:{get:function(){return w},set:function(e){w=e}},clipEdge:{get:function(){return _},set:function(e){_=e}},id:{get:function(){return u},set:function(e){u=e}},interactive:{get:function(){return k},set:function(e){k=e}},x:{get:function(){return p},set:function(e){p=e}},y:{get:function(){return h},set:function(e){h=e}},open:{get:function(){return g()},set:function(e){g=e}},close:{get:function(){return m()},set:function(e){m=e}},high:{get:function(){return v},set:function(e){v=e}},low:{get:function(){return y},set:function(e){y=e}},margin:{get:function(){return a},set:function(e){a.top=void 0!=e.top?e.top:a.top,a.right=void 0!=e.right?e.right:a.right,a.bottom=void 0!=e.bottom?e.bottom:a.bottom,a.left=void 0!=e.left?e.left:a.left}},color:{get:function(){return C},set:function(t){C=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.parallelCoordinates=function(){"use strict";function t(M){return $.reset(),M.each(function(t){function $(e){return C(h.map(function(t){if(isNaN(e.values[t.key])||isNaN(parseFloat(e.values[t.key]))||Y){var n=d[t.key].domain(),r=d[t.key].range(),i=n[0]-(n[1]-n[0])/9;if(w.indexOf(t.key)<0){var o=d3.scale.linear().domain([i,n[1]]).range([u-12,r[1]]);d[t.key].brush.y(o),w.push(t.key)}if(isNaN(e.values[t.key])||isNaN(parseFloat(e.values[t.key])))return[c(t.key),d[t.key](i)]}return void 0!==W&&(w.length>0||Y?(W.style("display","inline"),U.style("display","inline")):(W.style("display","none"),U.style("display","none"))),[c(t.key),d[t.key](e.values[t.key])]}))}function M(e){y.forEach(function(t){var n=d[t.dimension].brush.y().domain();t.hasOnlyNaN&&(t.extent[1]=(d[t.dimension].domain()[1]-n[0])*(t.extent[1]-t.extent[0])/(j[t.dimension]-t.extent[0])+n[0]),t.hasNaN&&(t.extent[0]=n[0]),e&&d[t.dimension].brush.extent(t.extent)}),i.select(".nv-brushBackground").each(function(e){d3.select(this).call(d[e.key].brush)}).selectAll("rect").attr("x",-8).attr("width",16),L()}function T(){!1===m&&(m=!0,M(!0))}function D(){J=g.filter(function(e){return!d[e].brush.empty()}),Z=J.map(function(e){return d[e].brush.extent()}),y=[],J.forEach(function(e,t){y[t]={dimension:e,extent:Z[t],hasNaN:!1,hasOnlyNaN:!1}}),b=[],n.style("display",function(e){var t=J.every(function(t,n){return!(!isNaN(e.values[t])&&!isNaN(parseFloat(e.values[t]))||Z[n][0]!=d[t].brush.y().domain()[0])||Z[n][0]<=e.values[t]&&e.values[t]<=Z[n][1]&&!isNaN(parseFloat(e.values[t]))});return t&&b.push(e),t?null:"none"}),L(),S.brush({filters:y,active:b})}function E(){var e=J.length>0;y.forEach(function(e){e.extent[0]===d[e.dimension].brush.y().domain()[0]&&w.indexOf(e.dimension)>=0&&(e.hasNaN=!0),e.extent[1]<d[e.dimension].domain()[0]&&(e.hasOnlyNaN=!0)}),S.brushEnd(b,e)}function L(){i.select(".nv-axis").each(function(e,t){var n=y.filter(function(t){return t.dimension==e.key});z[e.key]=d[e.key].domain(),0!=n.length&&m&&(z[e.key]=[],n[0].extent[1]>d[e.key].domain()[0]&&(z[e.key]=[n[0].extent[1]]),n[0].extent[0]>=d[e.key].domain()[0]&&z[e.key].push(n[0].extent[0])),d3.select(this).call(k.scale(d[e.key]).tickFormat(e.format).tickValues(z[e.key]))})}function A(e){x[e.key]=this.parentNode.__origin__=c(e.key),r.attr("visibility","hidden")}function R(e){x[e.key]=Math.min(l,Math.max(0,this.parentNode.__origin__+=d3.event.x)),n.attr("d",$),h.sort(function(e,t){return F(e.key)-F(t.key)}),h.forEach(function(e,t){return e.currentPosition=t}),c.domain(h.map(function(e){return e.key})),i.attr("transform",function(e){return"translate("+F(e.key)+")"})}function P(e,t){delete this.parentNode.__origin__,delete x[e.key],d3.select(this.parentNode).attr("transform","translate("+c(e.key)+")"),n.attr("d",$),r.attr("d",$).attr("visibility",null),S.dimensionsOrder(h)}function F(e){var t=x[e];return null==t?c(e):t}var O=d3.select(this);if(l=e.utils.availableWidth(a,O,o),u=e.utils.availableHeight(s,O,o),e.utils.initSVG(O),void 0===t[0].values){var N=[];t.forEach(function(e){var t={};Object.keys(e).forEach(function(n){"name"!==n&&(t[n]=e[n])}),N.push({key:e.name,values:t})}),t=N}var I=t.map(function(e){return e.values});0===b.length&&(b=t),g=p.sort(function(e,t){return e.currentPosition-t.currentPosition}).map(function(e){return e.key}),h=p.filter(function(e){return!e.disabled}),c.rangePoints([0,l],1).domain(h.map(function(e){return e.key}));var j={},Y=!1,z=[];g.forEach(function(e){var t=d3.extent(I,function(t){return+t[e]}),n=t[0],r=t[1],i=!1;(isNaN(n)||isNaN(r))&&(i=!0,n=0,r=0),n===r&&(n-=1,r+=1);var o=y.filter(function(t){return t.dimension==e});0!==o.length&&(i?(n=d[e].domain()[0],r=d[e].domain()[1]):!o[0].hasOnlyNaN&&m?(n=n>o[0].extent[0]?o[0].extent[0]:n,r=r<o[0].extent[1]?o[0].extent[1]:r):o[0].hasNaN&&(r=r<o[0].extent[1]?o[0].extent[1]:r,j[e]=d[e].domain()[1],Y=!0)),d[e]=d3.scale.linear().domain([n,r]).range([.9*(u-12),0]),w=[],d[e].brush=d3.svg.brush().y(d[e]).on("brushstart",T).on("brush",D).on("brushend",E)});var H=O.selectAll("g.nv-wrap.nv-parallelCoordinates").data([t]),V=H.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinates").append("g"),B=H.select("g");V.append("g").attr("class","nv-parallelCoordinates background"),V.append("g").attr("class","nv-parallelCoordinates foreground"),V.append("g").attr("class","nv-parallelCoordinates missingValuesline"),H.attr("transform","translate("+o.left+","+o.top+")"),C.interpolate("cardinal").tension(_),k.orient("left");var W,U,G=d3.behavior.drag().on("dragstart",A).on("drag",R).on("dragend",P),q=c.range()[1]-c.range()[0];if(!isNaN(q)){var K=[0+q/2,u-12,l-q/2,u-12];(W=H.select(".missingValuesline").selectAll("line").data([K])).enter().append("line"),W.exit().remove(),W.attr("x1",function(e){return e[0]}).attr("y1",function(e){return e[1]}).attr("x2",function(e){return e[2]}).attr("y2",function(e){return e[3]}),(U=H.select(".missingValuesline").selectAll("text").data([f])).append("text").data([f]),U.enter().append("text"),U.exit().remove(),U.attr("y",u).attr("x",l-92-q/2).text(function(e){return e})}(r=H.select(".background").selectAll("path").data(t)).enter().append("path"),r.exit().remove(),r.attr("d",$),(n=H.select(".foreground").selectAll("path").data(t)).enter().append("path"),n.exit().remove(),n.attr("d",$).style("stroke-width",function(e,t){return isNaN(e.strokeWidth)&&(e.strokeWidth=1),e.strokeWidth}).attr("stroke",function(e,t){return e.color||v(e,t)}),n.on("mouseover",function(e,t){d3.select(this).classed("hover",!0).style("stroke-width",e.strokeWidth+2+"px").style("stroke-opacity",1),S.elementMouseover({label:e.name,color:e.color||v(e,t),values:e.values,dimensions:h})}),n.on("mouseout",function(e,t){d3.select(this).classed("hover",!1).style("stroke-width",e.strokeWidth+"px").style("stroke-opacity",.7),S.elementMouseout({label:e.name,index:t})}),n.on("mousemove",function(e,t){S.elementMousemove()}),n.on("click",function(e){S.elementClick({id:e.id})});var X=(i=B.selectAll(".dimension").data(h)).enter().append("g").attr("class","nv-parallelCoordinates dimension");i.attr("transform",function(e){return"translate("+c(e.key)+",0)"}),X.append("g").attr("class","nv-axis"),X.append("text").attr("class","nv-label").style("cursor","move").attr("dy","-1em").attr("text-anchor","middle").on("mouseover",function(e,t){S.elementMouseover({label:e.tooltip||e.key,color:e.color})}).on("mouseout",function(e,t){S.elementMouseout({label:e.tooltip})}).on("mousemove",function(e,t){S.elementMousemove()}).call(G),X.append("g").attr("class","nv-brushBackground"),i.exit().remove(),i.select(".nv-label").text(function(e){return e.key}),M(m);var J=g.filter(function(e){return!d[e].brush.empty()}),Z=J.map(function(e){return d[e].brush.extent()}),Q=b.slice(0);b=[],n.style("display",function(e){var t=J.every(function(t,n){return!(!isNaN(e.values[t])&&!isNaN(parseFloat(e.values[t]))||Z[n][0]!=d[t].brush.y().domain()[0])||Z[n][0]<=e.values[t]&&e.values[t]<=Z[n][1]&&!isNaN(parseFloat(e.values[t]))});return t&&b.push(e),t?null:"none"}),(y.length>0||!e.utils.arrayEquals(b,Q))&&S.activeChanged(b)}),t}var n,r,i,o={top:30,right:0,bottom:10,left:0},a=null,s=null,l=null,u=null,c=d3.scale.ordinal(),d={},f="undefined values",p=[],h=[],g=[],m=!0,v=e.utils.defaultColor(),y=[],b=[],x=[],w=[],_=1,C=d3.svg.line(),k=d3.svg.axis(),S=d3.dispatch("brushstart","brush","brushEnd","dimensionsOrder","stateChange","elementClick","elementMouseover","elementMouseout","elementMousemove","renderEnd","activeChanged"),$=e.utils.renderWatch(S);return t.dispatch=S,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},dimensionData:{get:function(){return p},set:function(e){p=e}},displayBrush:{get:function(){return m},set:function(e){m=e}},filters:{get:function(){return y},set:function(e){y=e}},active:{get:function(){return b},set:function(e){b=e}},lineTension:{get:function(){return _},set:function(e){_=e}},undefinedValuesLabel:{get:function(){return f},set:function(e){f=e}},dimensions:{get:function(){return p.map(function(e){return e.key})},set:function(t){e.deprecated("dimensions","use dimensionData instead"),0===p.length?t.forEach(function(e){p.push({key:e})}):t.forEach(function(e,t){p[t].key=e})}},dimensionNames:{get:function(){return p.map(function(e){return e.key})},set:function(t){e.deprecated("dimensionNames","use dimensionData instead"),g=[],0===p.length?t.forEach(function(e){p.push({key:e})}):t.forEach(function(e,t){p[t].key=e})}},dimensionFormats:{get:function(){return p.map(function(e){return e.format})},set:function(t){e.deprecated("dimensionFormats","use dimensionData instead"),0===p.length?t.forEach(function(e){p.push({format:e})}):t.forEach(function(e,t){p[t].format=e})}},margin:{get:function(){return o},set:function(e){o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left}},color:{get:function(){return v},set:function(t){v=e.utils.getColor(t)}}}),e.utils.initOptions(t),t},e.models.parallelCoordinatesChart=function(){"use strict";function t(i){return v.reset(),v.models(n),i.each(function(i){var u=d3.select(this);e.utils.initSVG(u);var h=e.utils.availableWidth(a,u,o),g=e.utils.availableHeight(s,u,o);if(t.update=function(){u.call(t)},t.container=this,c.setter(b(d),t.update).getter(y(d)).update(),c.disabled=d.map(function(e){return!!e.disabled}),(d=d.map(function(e){return e.disabled=!!e.disabled,e})).forEach(function(e,t){e.originalPosition=isNaN(e.originalPosition)?t:e.originalPosition,e.currentPosition=isNaN(e.currentPosition)?t:e.currentPosition}),!p){var v;p={};for(v in c)c[v]instanceof Array?p[v]=c[v].slice(0):p[v]=c[v]}if(!i||!i.length)return e.utils.noData(t,u),t;u.selectAll(".nv-noData").remove();var x=u.selectAll("g.nv-wrap.nv-parallelCoordinatesChart").data([i]),w=x.enter().append("g").attr("class","nvd3 nv-wrap nv-parallelCoordinatesChart").append("g"),_=x.select("g");w.append("g").attr("class","nv-parallelCoordinatesWrap"),w.append("g").attr("class","nv-legendWrap"),_.select("rect").attr("width",h).attr("height",g>0?g:0),l?(r.width(h).color(function(e){return"rgb(188,190,192)"}),_.select(".nv-legendWrap").datum(d.sort(function(e,t){return e.originalPosition-t.originalPosition})).call(r),o.top!=r.height()&&(o.top=r.height(),g=e.utils.availableHeight(s,u,o)),x.select(".nv-legendWrap").attr("transform","translate( 0 ,"+-o.top+")")):_.select(".nv-legendWrap").selectAll("*").remove(),x.attr("transform","translate("+o.left+","+o.top+")"),n.width(h).height(g).dimensionData(d).displayBrush(f),_.select(".nv-parallelCoordinatesWrap ").datum(i).transition().call(n),n.dispatch.on("brushEnd",function(e,t){t?(f=!0,m.brushEnd(e)):f=!1}),r.dispatch.on("stateChange",function(e){for(var n in e)c[n]=e[n];m.stateChange(c),t.update()}),n.dispatch.on("dimensionsOrder",function(e){d.sort(function(e,t){return e.currentPosition-t.currentPosition});var t=!1;d.forEach(function(e,n){e.currentPosition=n,e.currentPosition!==e.originalPosition&&(t=!0)}),m.dimensionsOrder(d,t)}),m.on("changeState",function(e){void 0!==e.disabled&&(d.forEach(function(t,n){t.disabled=e.disabled[n]}),c.disabled=e.disabled),t.update()})}),v.renderEnd("parraleleCoordinateChart immediate"),t}var n=e.models.parallelCoordinates(),r=e.models.legend(),i=e.models.tooltip(),o=(e.models.tooltip(),{top:0,right:0,bottom:0,left:0}),a=null,s=null,l=!0,u=e.utils.defaultColor(),c=e.utils.state(),d=[],f=!0,p=null,h=null,g="undefined",m=d3.dispatch("dimensionsOrder","brushEnd","stateChange","changeState","renderEnd"),v=e.utils.renderWatch(m),y=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},b=function(e){return function(t){void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return i.contentGenerator(function(e){var t='<table><thead><tr><td class="legend-color-guide"><div style="background-color:'+e.color+'"></div></td><td><strong>'+e.key+"</strong></td></tr></thead>";return 0!==e.series.length&&(t+='<tbody><tr><td height ="10px"></td></tr>',e.series.forEach(function(e){t=t+'<tr><td class="legend-color-guide"><div style="background-color:'+e.color+'"></div></td><td class="key">'+e.key+'</td><td class="value">'+e.value+"</td></tr>"}),t+="</tbody>"),t+="</table>"}),n.dispatch.on("elementMouseover.tooltip",function(e){var t={key:e.label,color:e.color,series:[]};e.values&&(Object.keys(e.values).forEach(function(n){var r=e.dimensions.filter(function(e){return e.key===n})[0];if(r){var i;i=isNaN(e.values[n])||isNaN(parseFloat(e.values[n]))?g:r.format(e.values[n]),t.series.push({idx:r.currentPosition,key:n,value:i,color:r.color})}}),t.series.sort(function(e,t){return e.idx-t.idx})),i.data(t).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(e){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(){i()}),t.dispatch=m,t.parallelCoordinates=n,t.legend=r,t.tooltip=i,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},showLegend:{get:function(){return l},set:function(e){l=e}},defaultState:{get:function(){return p},set:function(e){p=e}},dimensionData:{get:function(){return d},set:function(e){d=e}},displayBrush:{get:function(){return f},set:function(e){f=e}},noData:{get:function(){return h},set:function(e){h=e}},nanValue:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return o},set:function(e){o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left}},color:{get:function(){return u},set:function(t){u=e.utils.getColor(t),r.color(u),n.color(u)}}}),e.utils.inheritOptions(t,n),e.utils.initOptions(t),t},e.models.pie=function(){"use strict";function t(E){return D.reset(),E.each(function(t){function E(e,t){e.endAngle=isNaN(e.endAngle)?0:e.endAngle,e.startAngle=isNaN(e.startAngle)?0:e.startAngle,g||(e.innerRadius=0);var n=d3.interpolate(this._current,e);return this._current=n(0),function(e){return M[t](n(e))}}var L=r-n.left-n.right,A=i-n.top-n.bottom,R=Math.min(L,A)/2,P=[],F=[];if(l=d3.select(this),0===S.length)for(var O=R-R/5,N=k*R,I=0;I<t[0].length;I++)P.push(O),F.push(N);else v?(P=S.map(function(e){return(e.outer-e.outer/5)*R}),F=S.map(function(e){return(e.inner-e.inner/5)*R}),k=d3.min(S.map(function(e){return e.inner-e.inner/5}))):(P=S.map(function(e){return e.outer*R}),F=S.map(function(e){return e.inner*R}),k=d3.min(S.map(function(e){return e.inner})));e.utils.initSVG(l);var j=l.selectAll(".nv-wrap.nv-pie").data(t),Y=j.enter().append("g").attr("class","nvd3 nv-wrap nv-pie nv-chart-"+s).append("g"),z=j.select("g"),H=Y.append("g").attr("class","nv-pie");Y.append("g").attr("class","nv-pieLabels"),j.attr("transform","translate("+n.left+","+n.top+")"),z.select(".nv-pie").attr("transform","translate("+L/2+","+A/2+")"),z.select(".nv-pieLabels").attr("transform","translate("+L/2+","+A/2+")"),l.on("click",function(e,t){$.chartClick({data:e,index:t,pos:d3.event,id:s})}),M=[],T=[];for(I=0;I<t[0].length;I++){var V=d3.svg.arc().outerRadius(P[I]),B=d3.svg.arc().outerRadius(P[I]+5);!1!==x&&(V.startAngle(x),B.startAngle(x)),!1!==_&&(V.endAngle(_),B.endAngle(_)),g&&(V.innerRadius(F[I]),B.innerRadius(F[I])),V.cornerRadius&&C&&(V.cornerRadius(C),B.cornerRadius(C)),M.push(V),T.push(B)}var W=d3.layout.pie().sort(null).value(function(e){return e.disabled?0:a(e)});W.padAngle&&w&&W.padAngle(w),g&&m&&(H.append("text").attr("class","nv-pie-title"),j.select(".nv-pie-title").style("text-anchor","middle").text(function(e){return m}).style("font-size",Math.min(L,A)*k*2/(m.length+2)+"px").attr("dy","0.35em").attr("transform",function(e,t){return"translate(0, "+y+")"}));var U=j.select(".nv-pie").selectAll(".nv-slice").data(W),G=j.select(".nv-pieLabels").selectAll(".nv-label").data(W);U.exit().remove(),G.exit().remove();var q=U.enter().append("g");q.attr("class","nv-slice"),q.on("mouseover",function(e,t){d3.select(this).classed("hover",!0),v&&d3.select(this).select("path").transition().duration(70).attr("d",T[t]),$.elementMouseover({data:e.data,index:t,color:d3.select(this).style("fill"),percent:(e.endAngle-e.startAngle)/(2*Math.PI)})}),q.on("mouseout",function(e,t){d3.select(this).classed("hover",!1),v&&d3.select(this).select("path").transition().duration(50).attr("d",M[t]),$.elementMouseout({data:e.data,index:t})}),q.on("mousemove",function(e,t){$.elementMousemove({data:e.data,index:t})}),q.on("click",function(e,t){var n=this;$.elementClick({data:e.data,index:t,color:d3.select(this).style("fill"),event:d3.event,element:n})}),q.on("dblclick",function(e,t){$.elementDblClick({data:e.data,index:t,color:d3.select(this).style("fill")})}),U.attr("fill",function(e,t){return u(e.data,t)}),U.attr("stroke",function(e,t){return u(e.data,t)});q.append("path").each(function(e){this._current=e});if(U.select("path").transition().attr("d",function(e,t){return M[t](e)}).attrTween("d",E),d){for(var K=[],I=0;I<t[0].length;I++)K.push(M[I]),f?g&&(K[I]=d3.svg.arc().outerRadius(M[I].outerRadius()),!1!==x&&K[I].startAngle(x),!1!==_&&K[I].endAngle(_)):g||K[I].innerRadius(0);G.enter().append("g").classed("nv-label",!0).each(function(e,t){var n=d3.select(this);n.attr("transform",function(e,t){if(b){e.outerRadius=P[t]+10,e.innerRadius=P[t]+15;var n=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+K[t].centroid(e)+") rotate("+n+")"}return e.outerRadius=R+10,e.innerRadius=R+15,"translate("+K[t].centroid(e)+")"}),n.append("rect").style("stroke","#fff").style("fill","#fff").attr("rx",3).attr("ry",3),n.append("text").style("text-anchor",b?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle").style("fill","#000")});var X={},J=function(e){return 140*Math.floor(e[0]/140)+","+14*Math.floor(e[1]/14)},Z=function(e){return(e.endAngle-e.startAngle)/(2*Math.PI)};G.watchTransition(D,"pie labels").attr("transform",function(e,t){if(b){e.outerRadius=P[t]+10,e.innerRadius=P[t]+15;var n=(e.startAngle+e.endAngle)/2*(180/Math.PI);return(e.startAngle+e.endAngle)/2<Math.PI?n-=90:n+=90,"translate("+K[t].centroid(e)+") rotate("+n+")"}e.outerRadius=R+10,e.innerRadius=R+15;var r=K[t].centroid(e),i=Z(e);if(e.value&&i>=h){var o=J(r);X[o]&&(r[1]-=14),X[J(r)]=!0}return"translate("+r+")"}),G.select(".nv-label text").style("text-anchor",function(e,t){return b?(e.startAngle+e.endAngle)/2<Math.PI?"start":"end":"middle"}).text(function(e,t){var n=Z(e),r="";if(!e.value||n<h)return"";if("function"==typeof p)r=p(e,t,{key:o(e.data),value:a(e.data),percent:c(n)});else switch(p){case"key":r=o(e.data);break;case"value":r=c(a(e.data));break;case"percent":r=d3.format("%")(n)}return r})}}),D.renderEnd("pie immediate"),t}var n={top:0,right:0,bottom:0,left:0},r=500,i=500,o=function(e){return e.x},a=function(e){return e.y},s=Math.floor(1e4*Math.random()),l=null,u=e.utils.defaultColor(),c=d3.format(",.2f"),d=!0,f=!1,p="key",h=.02,g=!1,m=!1,v=!0,y=0,b=!1,x=!1,w=!1,_=!1,C=0,k=.5,S=[],$=d3.dispatch("chartClick","elementClick","elementDblClick","elementMouseover","elementMouseout","elementMousemove","renderEnd"),M=[],T=[],D=e.utils.renderWatch($);return t.dispatch=$,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{arcsRadius:{get:function(){return S},set:function(e){S=e}},width:{get:function(){return r},set:function(e){r=e}},height:{get:function(){return i},set:function(e){i=e}},showLabels:{get:function(){return d},set:function(e){d=e}},title:{get:function(){return m},set:function(e){m=e}},titleOffset:{get:function(){return y},set:function(e){y=e}},labelThreshold:{get:function(){return h},set:function(e){h=e}},valueFormat:{get:function(){return c},set:function(e){c=e}},x:{get:function(){return o},set:function(e){o=e}},id:{get:function(){return s},set:function(e){s=e}},endAngle:{get:function(){return _},set:function(e){_=e}},startAngle:{get:function(){return x},set:function(e){x=e}},padAngle:{get:function(){return w},set:function(e){w=e}},cornerRadius:{get:function(){return C},set:function(e){C=e}},donutRatio:{get:function(){return k},set:function(e){k=e}},labelsOutside:{get:function(){return f},set:function(e){f=e}},labelSunbeamLayout:{get:function(){return b},set:function(e){b=e}},donut:{get:function(){return g},set:function(e){g=e}},growOnHover:{get:function(){return v},set:function(e){v=e}},pieLabelsOutside:{get:function(){return f},set:function(t){f=t,e.deprecated("pieLabelsOutside","use labelsOutside instead")}},donutLabelsOutside:{get:function(){return f},set:function(t){f=t,e.deprecated("donutLabelsOutside","use labelsOutside instead")}},labelFormat:{get:function(){return c},set:function(t){c=t,e.deprecated("labelFormat","use valueFormat instead")}},margin:{get:function(){return n},set:function(e){n.top=void 0!==e.top?e.top:n.top,n.right=void 0!==e.right?e.right:n.right,n.bottom=void 0!==e.bottom?e.bottom:n.bottom,n.left=void 0!==e.left?e.left:n.left}},y:{get:function(){return a},set:function(e){a=d3.functor(e)}},color:{get:function(){return u},set:function(t){u=e.utils.getColor(t)}},labelType:{get:function(){return p},set:function(e){p=e||"key"}}}),e.utils.initOptions(t),t},e.models.pieChart=function(){"use strict";function t(i){return v.reset(),v.models(n),i.each(function(i){var l=d3.select(this);e.utils.initSVG(l);var d=e.utils.availableWidth(a,l,o),h=e.utils.availableHeight(s,l,o);if(t.update=function(){l.transition().call(t)},t.container=this,f.setter(b(i),t.update).getter(y(i)).update(),f.disabled=i.map(function(e){return!!e.disabled}),!p){var g;p={};for(g in f)f[g]instanceof Array?p[g]=f[g].slice(0):p[g]=f[g]}if(!i||!i.length)return e.utils.noData(t,l),t;l.selectAll(".nv-noData").remove();var v=l.selectAll("g.nv-wrap.nv-pieChart").data([i]),x=v.enter().append("g").attr("class","nvd3 nv-wrap nv-pieChart").append("g"),w=v.select("g");if(x.append("g").attr("class","nv-pieWrap"),x.append("g").attr("class","nv-legendWrap"),u){if("top"===c)r.width(d).key(n.x()),v.select(".nv-legendWrap").datum(i).call(r),o.top!=r.height()&&(o.top=r.height(),h=e.utils.availableHeight(s,l,o)),v.select(".nv-legendWrap").attr("transform","translate(0,"+-o.top+")");else if("right"===c){var _=e.models.legend().width();d/2<_&&(_=d/2),r.height(h).key(n.x()),r.width(_),d-=r.width(),v.select(".nv-legendWrap").datum(i).call(r).attr("transform","translate("+d+",0)")}}else w.select(".nv-legendWrap").selectAll("*").remove();v.attr("transform","translate("+o.left+","+o.top+")"),n.width(d).height(h);var C=w.select(".nv-pieWrap").datum([i]);d3.transition(C).call(n),r.dispatch.on("stateChange",function(e){for(var n in e)f[n]=e[n];m.stateChange(f),t.update()}),m.on("changeState",function(e){void 0!==e.disabled&&(i.forEach(function(t,n){t.disabled=e.disabled[n]}),f.disabled=e.disabled),t.update()})}),v.renderEnd("pieChart immediate"),t}var n=e.models.pie(),r=e.models.legend(),i=e.models.tooltip(),o={top:30,right:20,bottom:20,left:20},a=null,s=null,l=!1,u=!0,c="top",d=e.utils.defaultColor(),f=e.utils.state(),p=null,h=null,g=250,m=d3.dispatch("stateChange","changeState","renderEnd");i.duration(0).headerEnabled(!1).valueFormatter(function(e,t){return n.valueFormat()(e,t)});var v=e.utils.renderWatch(m),y=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},b=function(e){return function(t){void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return n.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:t.x()(e.data),value:t.y()(e.data),color:e.color,percent:e.percent},l||(delete e.percent,delete e.series.percent),i.data(e).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(e){i.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(e){i()}),t.legend=r,t.dispatch=m,t.pie=n,t.tooltip=i,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},noData:{get:function(){return h},set:function(e){h=e}},showTooltipPercent:{get:function(){return l},set:function(e){l=e}},showLegend:{get:function(){return u},set:function(e){u=e}},legendPosition:{get:function(){return c},set:function(e){c=e}},defaultState:{get:function(){return p},set:function(e){p=e}},color:{get:function(){return d},set:function(e){d=e,r.color(d),n.color(d)}},duration:{get:function(){return g},set:function(e){g=e,v.reset(g)}},margin:{get:function(){return o},set:function(e){o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left}}}),e.utils.inheritOptions(t,n),e.utils.initOptions(t),t},e.models.scatter=function(){"use strict";function t(e){var t,n;return t=l=l||{},n=e[0].series,t=t[n]=t[n]||{},n=e[1],t=t[n]=t[n]||{}}function n(e){var n,r,i=e[0],o=t(e),a=!1;for(n=1;n<arguments.length;n++)o[r=arguments[n]]===i[r]&&o.hasOwnProperty(r)||(o[r]=i[r],a=!0);return a}function r(t){return U.reset(),t.each(function(t){function l(){if(W=!1,!S)return!1;if(!0===z){var n=d3.merge(t.map(function(t,n){return t.values.map(function(t,r){var i=y(t,r),o=b(t,r);return[e.utils.NaNtoZero(g(i))+1e-4*Math.random(),e.utils.NaNtoZero(m(o))+1e-4*Math.random(),n,r,t]}).filter(function(e,t){return $(e[4],t)})}));if(0==n.length)return!1;n.length<3&&(n.push([g.range()[0]-20,m.range()[0]-20,null,null]),n.push([g.range()[1]+20,m.range()[1]+20,null,null]),n.push([g.range()[0]-20,m.range()[0]+20,null,null]),n.push([g.range()[1]+20,m.range()[1]-20,null,null]));var r=d3.geom.polygon([[-10,-10],[-10,d+10],[c+10,d+10],[c+10,-10]]),i=d3.geom.voronoi(n).map(function(e,t){return{data:r.clip(e),series:n[t][2],point:n[t][3]}});Q.select(".nv-point-paths").selectAll("path").remove();var o=Q.select(".nv-point-paths").selectAll("path").data(i),a=o.enter().append("svg:path").attr("d",function(e){return e&&e.data&&0!==e.data.length?"M"+e.data.join(",")+"Z":"M 0 0"}).attr("id",function(e,t){return"nv-path-"+t}).attr("clip-path",function(e,t){return"url(#nv-clip-"+p+"-"+t+")"});if(L&&a.style("fill",d3.rgb(230,230,230)).style("fill-opacity",.4).style("stroke-opacity",1).style("stroke",d3.rgb(200,200,200)),E){Q.select(".nv-point-clips").selectAll("*").remove();Q.select(".nv-point-clips").selectAll("clipPath").data(n).enter().append("svg:clipPath").attr("id",function(e,t){return"nv-clip-"+p+"-"+t}).append("svg:circle").attr("cx",function(e){return e[0]}).attr("cy",function(e){return e[1]}).attr("r",A)}var s=function(e,n){if(W)return 0;var r=t[e.series];if(void 0!==r){var i=r.values[e.point];i.color=f(r,e.series),i.x=y(i),i.y=b(i);var o=h.node().getBoundingClientRect(),a=window.pageYOffset||document.documentElement.scrollTop,s=window.pageXOffset||document.documentElement.scrollLeft;n({point:i,series:r,pos:{left:g(y(i,e.point))+o.left+s+u.left+10,top:m(b(i,e.point))+o.top+a+u.top+10},relativePos:[g(y(i,e.point))+u.left,m(b(i,e.point))+u.top],seriesIndex:e.series,pointIndex:e.point})}};o.on("click",function(e){s(e,Y.elementClick)}).on("dblclick",function(e){s(e,Y.elementDblClick)}).on("mouseover",function(e){s(e,Y.elementMouseover)}).on("mouseout",function(e,t){s(e,Y.elementMouseout)})}else Q.select(".nv-groups").selectAll(".nv-group").selectAll(".nv-point").on("click",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];Y.elementClick({point:i,series:r,pos:[g(y(i,n))+u.left,m(b(i,n))+u.top],relativePos:[g(y(i,n))+u.left,m(b(i,n))+u.top],seriesIndex:e.series,pointIndex:n})}).on("dblclick",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];Y.elementDblClick({point:i,series:r,pos:[g(y(i,n))+u.left,m(b(i,n))+u.top],relativePos:[g(y(i,n))+u.left,m(b(i,n))+u.top],seriesIndex:e.series,pointIndex:n})}).on("mouseover",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];Y.elementMouseover({point:i,series:r,pos:[g(y(i,n))+u.left,m(b(i,n))+u.top],relativePos:[g(y(i,n))+u.left,m(b(i,n))+u.top],seriesIndex:e.series,pointIndex:n,color:f(e,n)})}).on("mouseout",function(e,n){if(W||!t[e.series])return 0;var r=t[e.series],i=r.values[n];Y.elementMouseout({point:i,series:r,pos:[g(y(i,n))+u.left,m(b(i,n))+u.top],relativePos:[g(y(i,n))+u.left,m(b(i,n))+u.top],seriesIndex:e.series,pointIndex:n,color:f(e,n)})})}h=d3.select(this);var H=e.utils.availableWidth(c,h,u),q=e.utils.availableHeight(d,h,u);e.utils.initSVG(h),t.forEach(function(e,t){e.values.forEach(function(e){e.series=t})});var K=r.yScale().name===d3.scale.log().name,X=R&&P&&N?[]:d3.merge(t.map(function(e){return e.values.map(function(e,t){return{x:y(e,t),y:b(e,t),size:x(e,t)}})}));if(g.domain(R||d3.extent(X.map(function(e){return e.x}).concat(_))),M&&t[0]?g.range(F||[(H*T+H)/(2*t[0].values.length),H-H*(1+T)/(2*t[0].values.length)]):g.range(F||[0,H]),K){var J=d3.min(X.map(function(e){if(0!==e.y)return e.y}));m.clamp(!0).domain(P||d3.extent(X.map(function(e){return 0!==e.y?e.y:.1*J}).concat(C))).range(O||[q,0])}else m.domain(P||d3.extent(X.map(function(e){return e.y}).concat(C))).range(O||[q,0]);v.domain(N||d3.extent(X.map(function(e){return e.size}).concat(k))).range(I||G),j=g.domain()[0]===g.domain()[1]||m.domain()[0]===m.domain()[1],g.domain()[0]===g.domain()[1]&&(g.domain()[0]?g.domain([g.domain()[0]-.01*g.domain()[0],g.domain()[1]+.01*g.domain()[1]]):g.domain([-1,1])),m.domain()[0]===m.domain()[1]&&(m.domain()[0]?m.domain([m.domain()[0]-.01*m.domain()[0],m.domain()[1]+.01*m.domain()[1]]):m.domain([-1,1])),isNaN(g.domain()[0])&&g.domain([-1,1]),isNaN(m.domain()[0])&&m.domain([-1,1]),i=i||g,o=o||m,a=a||v;var Z=g(1)!==i(1)||m(1)!==o(1)||v(1)!==a(1),Q=h.selectAll("g.nv-wrap.nv-scatter").data([t]),ee=Q.enter().append("g").attr("class","nvd3 nv-wrap nv-scatter nv-chart-"+p),te=ee.append("defs"),ne=ee.append("g"),re=Q.select("g");Q.classed("nv-single-point",j),ne.append("g").attr("class","nv-groups"),ne.append("g").attr("class","nv-point-paths"),ee.append("g").attr("class","nv-point-clips"),Q.attr("transform","translate("+u.left+","+u.top+")"),te.append("clipPath").attr("id","nv-edge-clip-"+p).append("rect"),Q.select("#nv-edge-clip-"+p+" rect").attr("width",H).attr("height",q>0?q:0),re.attr("clip-path",D?"url(#nv-edge-clip-"+p+")":""),W=!0;var ie=Q.select(".nv-groups").selectAll(".nv-group").data(function(e){return e},function(e){return e.key});ie.enter().append("g").style("stroke-opacity",1e-6).style("fill-opacity",1e-6),ie.exit().remove(),ie.attr("class",function(e,t){return(e.classed||"")+" nv-group nv-series-"+t}).classed("nv-noninteractive",!S).classed("hover",function(e){return e.hover}),ie.watchTransition(U,"scatter: groups").style("fill",function(e,t){return f(e,t)}).style("stroke",function(e,t){return f(e,t)}).style("stroke-opacity",1).style("fill-opacity",.5);var oe=ie.selectAll("path.nv-point").data(function(e){return e.values.map(function(e,t){return[e,t]}).filter(function(e,t){return $(e[0],t)})});if(oe.enter().append("path").attr("class",function(e){return"nv-point nv-point-"+e[1]}).style("fill",function(e){return e.color}).style("stroke",function(e){return e.color}).attr("transform",function(t){return"translate("+e.utils.NaNtoZero(i(y(t[0],t[1])))+","+e.utils.NaNtoZero(o(b(t[0],t[1])))+")"}).attr("d",e.utils.symbol().type(function(e){return w(e[0])}).size(function(e){return v(x(e[0],e[1]))})),oe.exit().remove(),ie.exit().selectAll("path.nv-point").watchTransition(U,"scatter exit").attr("transform",function(t){return"translate("+e.utils.NaNtoZero(g(y(t[0],t[1])))+","+e.utils.NaNtoZero(m(b(t[0],t[1])))+")"}).remove(),oe.filter(function(e){return Z||n(e,"x","y")}).watchTransition(U,"scatter points").attr("transform",function(t){return"translate("+e.utils.NaNtoZero(g(y(t[0],t[1])))+","+e.utils.NaNtoZero(m(b(t[0],t[1])))+")"}),oe.filter(function(e){return Z||n(e,"shape","size")}).watchTransition(U,"scatter points").attr("d",e.utils.symbol().type(function(e){return w(e[0])}).size(function(e){return v(x(e[0],e[1]))})),B){var ae=ie.selectAll(".nv-label").data(function(e){return e.values.map(function(e,t){return[e,t]}).filter(function(e,t){return $(e[0],t)})});ae.enter().append("text").style("fill",function(e,t){return e.color}).style("stroke-opacity",0).style("fill-opacity",1).attr("transform",function(t){return"translate("+(e.utils.NaNtoZero(i(y(t[0],t[1])))+Math.sqrt(v(x(t[0],t[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(o(b(t[0],t[1])))+")"}).text(function(e,t){return e[0].label}),ae.exit().remove(),ie.exit().selectAll("path.nv-label").watchTransition(U,"scatter exit").attr("transform",function(t){return"translate("+(e.utils.NaNtoZero(g(y(t[0],t[1])))+Math.sqrt(v(x(t[0],t[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(m(b(t[0],t[1])))+")"}).remove(),ae.each(function(e){d3.select(this).classed("nv-label",!0).classed("nv-label-"+e[1],!1).classed("hover",!1)}),ae.watchTransition(U,"scatter labels").attr("transform",function(t){return"translate("+(e.utils.NaNtoZero(g(y(t[0],t[1])))+Math.sqrt(v(x(t[0],t[1]))/Math.PI)+2)+","+e.utils.NaNtoZero(m(b(t[0],t[1])))+")"})}V?(clearTimeout(s),s=setTimeout(l,V)):l(),i=g.copy(),o=m.copy(),a=v.copy()}),U.renderEnd("scatter immediate"),r}var i,o,a,s,l,u={top:0,right:0,bottom:0,left:0},c=null,d=null,f=e.utils.defaultColor(),p=Math.floor(1e5*Math.random()),h=null,g=d3.scale.linear(),m=d3.scale.linear(),v=d3.scale.linear(),y=function(e){return e.x},b=function(e){return e.y},x=function(e){return e.size||1},w=function(e){return e.shape||"circle"},_=[],C=[],k=[],S=!0,$=function(e){return!e.notActive},M=!1,T=.1,D=!1,E=!0,L=!1,A=function(){return 25},R=null,P=null,F=null,O=null,N=null,I=null,j=!1,Y=d3.dispatch("elementClick","elementDblClick","elementMouseover","elementMouseout","renderEnd"),z=!0,H=250,V=300,B=!1,W=!1,U=e.utils.renderWatch(Y,H),G=[16,256];return r.dispatch=Y,r.options=e.utils.optionsFunc.bind(r),r._calls=new function(){this.clearHighlights=function(){return e.dom.write(function(){h.selectAll(".nv-point.hover").classed("hover",!1)}),null},this.highlightPoint=function(t,n,r){e.dom.write(function(){h.select(".nv-groups").selectAll(".nv-series-"+t).selectAll(".nv-point-"+n).classed("hover",r)})}},Y.on("elementMouseover.point",function(e){S&&r._calls.highlightPoint(e.seriesIndex,e.pointIndex,!0)}),Y.on("elementMouseout.point",function(e){S&&r._calls.highlightPoint(e.seriesIndex,e.pointIndex,!1)}),r._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},xScale:{get:function(){return g},set:function(e){g=e}},yScale:{get:function(){return m},set:function(e){m=e}},pointScale:{get:function(){return v},set:function(e){v=e}},xDomain:{get:function(){return R},set:function(e){R=e}},yDomain:{get:function(){return P},set:function(e){P=e}},pointDomain:{get:function(){return N},set:function(e){N=e}},xRange:{get:function(){return F},set:function(e){F=e}},yRange:{get:function(){return O},set:function(e){O=e}},pointRange:{get:function(){return I},set:function(e){I=e}},forceX:{get:function(){return _},set:function(e){_=e}},forceY:{get:function(){return C},set:function(e){C=e}},forcePoint:{get:function(){return k},set:function(e){k=e}},interactive:{get:function(){return S},set:function(e){S=e}},pointActive:{get:function(){return $},set:function(e){$=e}},padDataOuter:{get:function(){return T},set:function(e){T=e}},padData:{get:function(){return M},set:function(e){M=e}},clipEdge:{get:function(){return D},set:function(e){D=e}},clipVoronoi:{get:function(){return E},set:function(e){E=e}},clipRadius:{get:function(){return A},set:function(e){A=e}},showVoronoi:{get:function(){return L},set:function(e){L=e}},id:{get:function(){return p},set:function(e){p=e}},interactiveUpdateDelay:{get:function(){return V},set:function(e){V=e}},showLabels:{get:function(){return B},set:function(e){B=e}},x:{get:function(){return y},set:function(e){y=d3.functor(e)}},y:{get:function(){return b},set:function(e){b=d3.functor(e)}},pointSize:{get:function(){return x},set:function(e){x=d3.functor(e)}},pointShape:{get:function(){return w},set:function(e){w=d3.functor(e)}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},duration:{get:function(){return H},set:function(e){H=e,U.reset(H)}},color:{get:function(){return f},set:function(t){f=e.utils.getColor(t)}},useVoronoi:{get:function(){return z},set:function(e){!1===(z=e)&&(E=!1)}}}),e.utils.initOptions(r),r},e.models.scatterChart=function(){"use strict";function t(S){return E.reset(),E.models(n),b&&E.models(r),x&&E.models(i),m&&E.models(a),v&&E.models(s),S.each(function(S){f=d3.select(this),e.utils.initSVG(f);var R=e.utils.availableWidth(c,f,u),P=e.utils.availableHeight(d,f,u);if(t.update=function(){0===$?f.call(t):f.transition().duration($).call(t)},t.container=this,_.setter(A(S),t.update).getter(L(S)).update(),_.disabled=S.map(function(e){return!!e.disabled}),!C){var F;C={};for(F in _)_[F]instanceof Array?C[F]=_[F].slice(0):C[F]=_[F]}if(!(S&&S.length&&S.filter(function(e){return e.values.length}).length))return e.utils.noData(t,f),E.renderEnd("scatter immediate"),t;f.selectAll(".nv-noData").remove(),h=n.xScale(),g=n.yScale();var O=f.selectAll("g.nv-wrap.nv-scatterChart").data([S]),N=O.enter().append("g").attr("class","nvd3 nv-wrap nv-scatterChart nv-chart-"+n.id()).append("g"),I=O.select("g");if(N.append("rect").attr("class","nvd3 nv-background").style("pointer-events","none"),N.append("g").attr("class","nv-x nv-axis"),N.append("g").attr("class","nv-y nv-axis"),N.append("g").attr("class","nv-scatterWrap"),N.append("g").attr("class","nv-regressionLinesWrap"),N.append("g").attr("class","nv-distWrap"),N.append("g").attr("class","nv-legendWrap"),w&&I.select(".nv-y.nv-axis").attr("transform","translate("+R+",0)"),y){var j=R;o.width(j),O.select(".nv-legendWrap").datum(S).call(o),u.top!=o.height()&&(u.top=o.height(),P=e.utils.availableHeight(d,f,u)),O.select(".nv-legendWrap").attr("transform","translate(0,"+-u.top+")")}else I.select(".nv-legendWrap").selectAll("*").remove();O.attr("transform","translate("+u.left+","+u.top+")"),n.width(R).height(P).color(S.map(function(e,t){return e.color=e.color||p(e,t),e.color}).filter(function(e,t){return!S[t].disabled})).showLabels(M),O.select(".nv-scatterWrap").datum(S.filter(function(e){return!e.disabled})).call(n),O.select(".nv-regressionLinesWrap").attr("clip-path","url(#nv-edge-clip-"+n.id()+")");var Y=O.select(".nv-regressionLinesWrap").selectAll(".nv-regLines").data(function(e){return e});Y.enter().append("g").attr("class","nv-regLines");var z=Y.selectAll(".nv-regLine").data(function(e){return[e]});z.enter().append("line").attr("class","nv-regLine").style("stroke-opacity",0),z.filter(function(e){return e.intercept&&e.slope}).watchTransition(E,"scatterPlusLineChart: regline").attr("x1",h.range()[0]).attr("x2",h.range()[1]).attr("y1",function(e,t){return g(h.domain()[0]*e.slope+e.intercept)}).attr("y2",function(e,t){return g(h.domain()[1]*e.slope+e.intercept)}).style("stroke",function(e,t,n){return p(e,n)}).style("stroke-opacity",function(e,t){return e.disabled||void 0===e.slope||void 0===e.intercept?0:1}),b&&(r.scale(h)._ticks(e.utils.calcTicksX(R/100,S)).tickSize(-P,0),I.select(".nv-x.nv-axis").attr("transform","translate(0,"+g.range()[0]+")").call(r)),x&&(i.scale(g)._ticks(e.utils.calcTicksY(P/36,S)).tickSize(-R,0),I.select(".nv-y.nv-axis").call(i)),m&&(a.getData(n.x()).scale(h).width(R).color(S.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!S[t].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionX"),I.select(".nv-distributionX").attr("transform","translate(0,"+g.range()[0]+")").datum(S.filter(function(e){return!e.disabled})).call(a)),v&&(s.getData(n.y()).scale(g).width(P).color(S.map(function(e,t){return e.color||p(e,t)}).filter(function(e,t){return!S[t].disabled})),N.select(".nv-distWrap").append("g").attr("class","nv-distributionY"),I.select(".nv-distributionY").attr("transform","translate("+(w?R:-s.size())+",0)").datum(S.filter(function(e){return!e.disabled})).call(s)),o.dispatch.on("stateChange",function(e){for(var n in e)_[n]=e[n];k.stateChange(_),t.update()}),k.on("changeState",function(e){void 0!==e.disabled&&(S.forEach(function(t,n){t.disabled=e.disabled[n]}),_.disabled=e.disabled),t.update()}),n.dispatch.on("elementMouseout.tooltip",function(e){l.hidden(!0),f.select(".nv-chart-"+n.id()+" .nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",0),f.select(".nv-chart-"+n.id()+" .nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",s.size())}),n.dispatch.on("elementMouseover.tooltip",function(e){f.select(".nv-series-"+e.seriesIndex+" .nv-distx-"+e.pointIndex).attr("y1",e.relativePos[1]-P),f.select(".nv-series-"+e.seriesIndex+" .nv-disty-"+e.pointIndex).attr("x2",e.relativePos[0]+a.size()),l.data(e).hidden(!1)}),T=h.copy(),D=g.copy()}),E.renderEnd("scatter with line immediate"),t}var n=e.models.scatter(),r=e.models.axis(),i=e.models.axis(),o=e.models.legend(),a=e.models.distribution(),s=e.models.distribution(),l=e.models.tooltip(),u={top:30,right:20,bottom:50,left:75},c=null,d=null,f=null,p=e.utils.defaultColor(),h=n.xScale(),g=n.yScale(),m=!1,v=!1,y=!0,b=!0,x=!0,w=!1,_=e.utils.state(),C=null,k=d3.dispatch("stateChange","changeState","renderEnd"),S=null,$=250,M=!1;n.xScale(h).yScale(g),r.orient("bottom").tickPadding(10),i.orient(w?"right":"left").tickPadding(10),a.axis("x"),s.axis("y"),l.headerFormatter(function(e,t){return r.tickFormat()(e,t)}).valueFormatter(function(e,t){return i.tickFormat()(e,t)});var T,D,E=e.utils.renderWatch(k,$),L=function(e){return function(){return{active:e.map(function(e){return!e.disabled})}}},A=function(e){return function(t){void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}};return t.dispatch=k,t.scatter=n,t.legend=o,t.xAxis=r,t.yAxis=i,t.distX=a,t.distY=s,t.tooltip=l,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return c},set:function(e){c=e}},height:{get:function(){return d},set:function(e){d=e}},container:{get:function(){return f},set:function(e){f=e}},showDistX:{get:function(){return m},set:function(e){m=e}},showDistY:{get:function(){return v},set:function(e){v=e}},showLegend:{get:function(){return y},set:function(e){y=e}},showXAxis:{get:function(){return b},set:function(e){b=e}},showYAxis:{get:function(){return x},set:function(e){x=e}},defaultState:{get:function(){return C},set:function(e){C=e}},noData:{get:function(){return S},set:function(e){S=e}},duration:{get:function(){return $},set:function(e){$=e}},showLabels:{get:function(){return M},set:function(e){M=e}},margin:{get:function(){return u},set:function(e){u.top=void 0!==e.top?e.top:u.top,u.right=void 0!==e.right?e.right:u.right,u.bottom=void 0!==e.bottom?e.bottom:u.bottom,u.left=void 0!==e.left?e.left:u.left}},rightAlignYAxis:{get:function(){return w},set:function(e){w=e,i.orient(e?"right":"left")}},color:{get:function(){return p},set:function(t){p=e.utils.getColor(t),o.color(p),a.color(p),s.color(p)}}}),e.utils.inheritOptions(t,n),e.utils.initOptions(t),t},e.models.sparkline=function(){"use strict";function t(c){return b.reset(),c.each(function(t){var c=s-a.left-a.right,y=l-a.top-a.bottom;u=d3.select(this),e.utils.initSVG(u),d.domain(n||d3.extent(t,p)).range(i||[0,c]),f.domain(r||d3.extent(t,h)).range(o||[y,0]);var b=u.selectAll("g.nv-wrap.nv-sparkline").data([t]);b.enter().append("g").attr("class","nvd3 nv-wrap nv-sparkline").append("g"),b.select("g");b.attr("transform","translate("+a.left+","+a.top+")");var x=b.selectAll("path").data(function(e){return[e]});x.enter().append("path"),x.exit().remove(),x.style("stroke",function(e,t){return e.color||g(e,t)}).attr("d",d3.svg.line().x(function(e,t){return d(p(e,t))}).y(function(e,t){return f(h(e,t))}));var w=b.selectAll("circle.nv-point").data(function(e){function t(t){if(-1!=t){var n=e[t];return n.pointIndex=t,n}return null}var n=e.map(function(e,t){return h(e,t)}),r=t(n.lastIndexOf(f.domain()[1])),i=t(n.indexOf(f.domain()[0])),o=t(n.length-1);return[m?i:null,m?r:null,v?o:null].filter(function(e){return null!=e})});w.enter().append("circle"),w.exit().remove(),w.attr("cx",function(e,t){return d(p(e,e.pointIndex))}).attr("cy",function(e,t){return f(h(e,e.pointIndex))}).attr("r",2).attr("class",function(e,t){return p(e,e.pointIndex)==d.domain()[1]?"nv-point nv-currentValue":h(e,e.pointIndex)==f.domain()[0]?"nv-point nv-minValue":"nv-point nv-maxValue"})}),b.renderEnd("sparkline immediate"),t}var n,r,i,o,a={top:2,right:0,bottom:2,left:0},s=400,l=32,u=null,c=!0,d=d3.scale.linear(),f=d3.scale.linear(),p=function(e){return e.x},h=function(e){return e.y},g=e.utils.getColor(["#000"]),m=!0,v=!0,y=d3.dispatch("renderEnd"),b=e.utils.renderWatch(y);return t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return s},set:function(e){s=e}},height:{get:function(){return l},set:function(e){l=e}},xDomain:{get:function(){return n},set:function(e){n=e}},yDomain:{get:function(){return r},set:function(e){r=e}},xRange:{get:function(){return i},set:function(e){i=e}},yRange:{get:function(){return o},set:function(e){o=e}},xScale:{get:function(){return d},set:function(e){d=e}},yScale:{get:function(){return f},set:function(e){f=e}},animate:{get:function(){return c},set:function(e){c=e}},showMinMaxPoints:{get:function(){return m},set:function(e){m=e}},showCurrentPoint:{get:function(){return v},set:function(e){v=e}},x:{get:function(){return p},set:function(e){p=d3.functor(e)}},y:{get:function(){return h},set:function(e){h=d3.functor(e)}},margin:{get:function(){return a},set:function(e){a.top=void 0!==e.top?e.top:a.top,a.right=void 0!==e.right?e.right:a.right,a.bottom=void 0!==e.bottom?e.bottom:a.bottom,a.left=void 0!==e.left?e.left:a.left}},color:{get:function(){return g},set:function(t){g=e.utils.getColor(t)}}}),t.dispatch=y,e.utils.initOptions(t),t},e.models.sparklinePlus=function(){"use strict";function t(g){return v.reset(),v.models(i),g.each(function(g){function m(){if(!u){var e=k.selectAll(".nv-hoverValue").data(l),t=e.enter().append("g").attr("class","nv-hoverValue").style("stroke-opacity",0).style("fill-opacity",0);e.exit().transition().duration(250).style("stroke-opacity",0).style("fill-opacity",0).remove(),e.attr("transform",function(e){return"translate("+n(i.x()(g[e],e))+",0)"}).transition().duration(250).style("stroke-opacity",1).style("fill-opacity",1),l.length&&(t.append("line").attr("x1",0).attr("y1",-o.top).attr("x2",0).attr("y2",x),t.append("text").attr("class","nv-xValue").attr("x",-6).attr("y",-o.top).attr("text-anchor","end").attr("dy",".9em"),k.select(".nv-hoverValue .nv-xValue").text(c(i.x()(g[l[0]],l[0]))),t.append("text").attr("class","nv-yValue").attr("x",6).attr("y",-o.top).attr("text-anchor","start").attr("dy",".9em"),k.select(".nv-hoverValue .nv-yValue").text(d(i.y()(g[l[0]],l[0]))))}}function v(){if(!u){var e=d3.mouse(this)[0]-o.left;l=[function(e,t){for(var n=Math.abs(i.x()(e[0],0)-t),r=0,o=0;o<e.length;o++)Math.abs(i.x()(e[o],o)-t)<n&&(n=Math.abs(i.x()(e[o],o)-t),r=o);return r}(g,Math.round(n.invert(e)))],m()}}var y=d3.select(this);e.utils.initSVG(y);var b=e.utils.availableWidth(a,y,o),x=e.utils.availableHeight(s,y,o);if(t.update=function(){y.call(t)},t.container=this,!g||!g.length)return e.utils.noData(t,y),t;y.selectAll(".nv-noData").remove();var w=i.y()(g[g.length-1],g.length-1);n=i.xScale(),r=i.yScale();var _=y.selectAll("g.nv-wrap.nv-sparklineplus").data([g]),C=_.enter().append("g").attr("class","nvd3 nv-wrap nv-sparklineplus").append("g"),k=_.select("g");C.append("g").attr("class","nv-sparklineWrap"),C.append("g").attr("class","nv-valueWrap"),C.append("g").attr("class","nv-hoverArea"),_.attr("transform","translate("+o.left+","+o.top+")");var S=k.select(".nv-sparklineWrap");if(i.width(b).height(x),S.call(i),f){var $=k.select(".nv-valueWrap").selectAll(".nv-currentValue").data([w]);$.enter().append("text").attr("class","nv-currentValue").attr("dx",h?-8:8).attr("dy",".9em").style("text-anchor",h?"end":"start"),$.attr("x",b+(h?o.right:0)).attr("y",p?function(e){return r(e)}:0).style("fill",i.color()(g[g.length-1],g.length-1)).text(d(w))}C.select(".nv-hoverArea").append("rect").on("mousemove",v).on("click",function(){u=!u}).on("mouseout",function(){l=[],m()}),k.select(".nv-hoverArea rect").attr("transform",function(e){return"translate("+-o.left+","+-o.top+")"}).attr("width",b+o.left+o.right).attr("height",x+o.top)}),v.renderEnd("sparklinePlus immediate"),t}var n,r,i=e.models.sparkline(),o={top:15,right:100,bottom:10,left:50},a=null,s=null,l=[],u=!1,c=d3.format(",r"),d=d3.format(",.2f"),f=!0,p=!0,h=!1,g=null,m=d3.dispatch("renderEnd"),v=e.utils.renderWatch(m);return t.dispatch=m,t.sparkline=i,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return a},set:function(e){a=e}},height:{get:function(){return s},set:function(e){s=e}},xTickFormat:{get:function(){return c},set:function(e){c=e}},yTickFormat:{get:function(){return d},set:function(e){d=e}},showLastValue:{get:function(){return f},set:function(e){f=e}},alignValue:{get:function(){return p},set:function(e){p=e}},rightAlignValue:{get:function(){return h},set:function(e){h=e}},noData:{get:function(){return g},set:function(e){g=e}},margin:{get:function(){return o},set:function(e){o.top=void 0!==e.top?e.top:o.top,o.right=void 0!==e.right?e.right:o.right,o.bottom=void 0!==e.bottom?e.bottom:o.bottom,o.left=void 0!==e.left?e.left:o.left}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.stackedArea=function(){"use strict";function t(p){return w.reset(),w.models(y),p.each(function(p){var b=o-i.left-i.right,_=a-i.top-i.bottom;u=d3.select(this),e.utils.initSVG(u),n=y.xScale(),r=y.yScale();var C=p;p.forEach(function(e,t){e.seriesIndex=t,e.values=e.values.map(function(e,n){return e.index=n,e.seriesIndex=t,e})});var k=p.filter(function(e){return!e.disabled});p=d3.layout.stack().order(g).offset(h).values(function(e){return e.values}).x(c).y(d).out(function(e,t,n){e.display={y:n,y0:t}})(k);var S=u.selectAll("g.nv-wrap.nv-stackedarea").data([p]),$=S.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedarea"),M=$.append("defs"),T=$.append("g"),D=S.select("g");T.append("g").attr("class","nv-areaWrap"),T.append("g").attr("class","nv-scatterWrap"),S.attr("transform","translate("+i.left+","+i.top+")"),0==y.forceY().length&&y.forceY().push(0),y.width(b).height(_).x(c).y(function(e){if(void 0!==e.display)return e.display.y+e.display.y0}).color(p.map(function(e,t){return e.color=e.color||s(e,e.seriesIndex),e.color})),D.select(".nv-scatterWrap").datum(p).call(y),M.append("clipPath").attr("id","nv-edge-clip-"+l).append("rect"),S.select("#nv-edge-clip-"+l+" rect").attr("width",b).attr("height",_),D.attr("clip-path",v?"url(#nv-edge-clip-"+l+")":"");var E=d3.svg.area().defined(f).x(function(e,t){return n(c(e,t))}).y0(function(e){return r(e.display.y0)}).y1(function(e){return r(e.display.y+e.display.y0)}).interpolate(m),L=d3.svg.area().defined(f).x(function(e,t){return n(c(e,t))}).y0(function(e){return r(e.display.y0)}).y1(function(e){return r(e.display.y0)}),A=D.select(".nv-areaWrap").selectAll("path.nv-area").data(function(e){return e});A.enter().append("path").attr("class",function(e,t){return"nv-area nv-area-"+t}).attr("d",function(e,t){return L(e.values,e.seriesIndex)}).on("mouseover",function(e,t){d3.select(this).classed("hover",!0),x.areaMouseover({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1),x.areaMouseout({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}).on("click",function(e,t){d3.select(this).classed("hover",!1),x.areaClick({point:e,series:e.key,pos:[d3.event.pageX,d3.event.pageY],seriesIndex:e.seriesIndex})}),A.exit().remove(),A.style("fill",function(e,t){return e.color||s(e,e.seriesIndex)}).style("stroke",function(e,t){return e.color||s(e,e.seriesIndex)}),A.watchTransition(w,"stackedArea path").attr("d",function(e,t){return E(e.values,t)}),y.dispatch.on("elementMouseover.area",function(e){D.select(".nv-chart-"+l+" .nv-area-"+e.seriesIndex).classed("hover",!0)}),y.dispatch.on("elementMouseout.area",function(e){D.select(".nv-chart-"+l+" .nv-area-"+e.seriesIndex).classed("hover",!1)}),t.d3_stackedOffset_stackPercent=function(e){var t,n,r,i=e.length,o=e[0].length,a=[];for(n=0;n<o;++n){for(t=0,r=0;t<C.length;t++)r+=d(C[t].values[n]);if(r)for(t=0;t<i;t++)e[t][n][1]/=r;else for(t=0;t<i;t++)e[t][n][1]=0}for(n=0;n<o;++n)a[n]=0;return a}}),w.renderEnd("stackedArea immediate"),t}var n,r,i={top:0,right:0,bottom:0,left:0},o=960,a=500,s=e.utils.defaultColor(),l=Math.floor(1e5*Math.random()),u=null,c=function(e){return e.x},d=function(e){return e.y},f=function(e,t){return!isNaN(d(e,t))&&null!==d(e,t)},p="stack",h="zero",g="default",m="linear",v=!1,y=e.models.scatter(),b=250,x=d3.dispatch("areaClick","areaMouseover","areaMouseout","renderEnd","elementClick","elementMouseover","elementMouseout");y.pointSize(2.2).pointDomain([2.2,2.2]);var w=e.utils.renderWatch(x,b);return t.dispatch=x,t.scatter=y,y.dispatch.on("elementClick",function(){x.elementClick.apply(this,arguments)}),y.dispatch.on("elementMouseover",function(){x.elementMouseover.apply(this,arguments)}),y.dispatch.on("elementMouseout",function(){x.elementMouseout.apply(this,arguments)}),t.interpolate=function(e){return arguments.length?(m=e,t):m},t.duration=function(e){return arguments.length?(b=e,w.reset(b),y.duration(b),t):b},t.dispatch=x,t.scatter=y,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return o},set:function(e){o=e}},height:{get:function(){return a},set:function(e){a=e}},defined:{get:function(){return f},set:function(e){f=e}},clipEdge:{get:function(){return v},set:function(e){v=e}},offset:{get:function(){return h},set:function(e){h=e}},order:{get:function(){return g},set:function(e){g=e}},interpolate:{get:function(){return m},set:function(e){m=e}},x:{get:function(){return c},set:function(e){c=d3.functor(e)}},y:{get:function(){return d},set:function(e){d=d3.functor(e)}},margin:{get:function(){return i},set:function(e){i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left}},color:{get:function(){return s},set:function(t){s=e.utils.getColor(t)}},style:{get:function(){return p},set:function(e){switch(p=e){case"stack":t.offset("zero"),t.order("default");break;case"stream":t.offset("wiggle"),t.order("inside-out");break;case"stream-center":t.offset("silhouette"),t.order("inside-out");break;case"expand":t.offset("expand"),t.order("default");break;case"stack_percent":t.offset(t.d3_stackedOffset_stackPercent),t.order("default")}}},duration:{get:function(){return b},set:function(e){b=e,w.reset(b),y.duration(b)}}}),e.utils.inheritOptions(t,y),e.utils.initOptions(t),t},e.models.stackedAreaChart=function(){"use strict";function t(c){return F.reset(),F.models(i),y&&F.models(o),b&&F.models(a),c.each(function(c){function M(){y&&q.select(".nv-focus .nv-x.nv-axis").attr("transform","translate(0,"+B+")").transition().duration(A).call(o)}function F(){if(b){if("expand"===i.style()||"stack_percent"===i.style()){var e=a.tickFormat();R&&e===j||(R=e),a.tickFormat(j)}else R&&(a.tickFormat(R),R=null);q.select(".nv-focus .nv-y.nv-axis").transition().duration(0).call(a)}}function Y(e){q.select(".nv-focus .nv-stackedWrap").datum(c.filter(function(e){return!e.disabled}).map(function(t,n){return{key:t.key,area:t.area,classed:t.classed,values:t.values.filter(function(t,n){return i.x()(t,n)>=e[0]&&i.x()(t,n)<=e[1]}),disableTooltip:t.disableTooltip}})).transition().duration(A).call(i),M(),F()}var z=d3.select(this),H=this;e.utils.initSVG(z);var V=e.utils.availableWidth(p,z,f),B=e.utils.availableHeight(h,z,f)-(w?d.height():0);if(t.update=function(){z.transition().duration(A).call(t)},t.container=this,S.setter(I(c),t.update).getter(N(c)).update(),S.disabled=c.map(function(e){return!!e.disabled}),!$){var W;$={};for(W in S)S[W]instanceof Array?$[W]=S[W].slice(0):$[W]=S[W]}if(!(c&&c.length&&c.filter(function(e){return e.values.length}).length))return e.utils.noData(t,z),t;z.selectAll(".nv-noData").remove(),n=i.xScale(),r=i.yScale();var U=z.selectAll("g.nv-wrap.nv-stackedAreaChart").data([c]),G=U.enter().append("g").attr("class","nvd3 nv-wrap nv-stackedAreaChart").append("g"),q=U.select("g");G.append("g").attr("class","nv-legendWrap"),G.append("g").attr("class","nv-controlsWrap");var K=G.append("g").attr("class","nv-focus");K.append("g").attr("class","nv-background").append("rect"),K.append("g").attr("class","nv-x nv-axis"),K.append("g").attr("class","nv-y nv-axis"),K.append("g").attr("class","nv-stackedWrap"),K.append("g").attr("class","nv-interactive");G.append("g").attr("class","nv-focusWrap");if(v){var X=m?V-D:V;s.width(X),q.select(".nv-legendWrap").datum(c).call(s),f.top!=s.height()&&(f.top=s.height(),B=e.utils.availableHeight(h,z,f)-(w?d.height():0)),q.select(".nv-legendWrap").attr("transform","translate("+(V-X)+","+-f.top+")")}else q.select(".nv-legendWrap").selectAll("*").remove();if(m){var J=[{key:L.stacked||"Stacked",metaKey:"Stacked",disabled:"stack"!=i.style(),style:"stack"},{key:L.stream||"Stream",metaKey:"Stream",disabled:"stream"!=i.style(),style:"stream"},{key:L.expanded||"Expanded",metaKey:"Expanded",disabled:"expand"!=i.style(),style:"expand"},{key:L.stack_percent||"Stack %",metaKey:"Stack_Percent",disabled:"stack_percent"!=i.style(),style:"stack_percent"}];D=E.length/3*260,J=J.filter(function(e){return-1!==E.indexOf(e.metaKey)}),l.width(D).color(["#444","#444","#444"]),q.select(".nv-controlsWrap").datum(J).call(l),f.top!=Math.max(l.height(),s.height())&&(f.top=Math.max(l.height(),s.height()),B=e.utils.availableHeight(h,z,f)),q.select(".nv-controlsWrap").attr("transform","translate(0,"+-f.top+")")}else q.select(".nv-controlsWrap").selectAll("*").remove();U.attr("transform","translate("+f.left+","+f.top+")"),x&&q.select(".nv-y.nv-axis").attr("transform","translate("+V+",0)"),_&&(u.width(V).height(B).margin({left:f.left,top:f.top}).svgContainer(z).xScale(n),U.select(".nv-interactive").call(u)),q.select(".nv-focus .nv-background rect").attr("width",V).attr("height",B),i.width(V).height(B).color(c.map(function(e,t){return e.color||g(e,t)}).filter(function(e,t){return!c[t].disabled}));var Z=q.select(".nv-focus .nv-stackedWrap").datum(c.filter(function(e){return!e.disabled}));if(y&&o.scale(n)._ticks(e.utils.calcTicksX(V/100,c)).tickSize(-B,0),b){var Q;Q="wiggle"===i.offset()?0:e.utils.calcTicksY(B/36,c),a.scale(r)._ticks(Q).tickSize(-V,0)}if(w){d.width(V),q.select(".nv-focusWrap").attr("transform","translate(0,"+(B+f.bottom+d.margin().top)+")").datum(c.filter(function(e){return!e.disabled})).call(d);var ee=d.brush.empty()?d.xDomain():d.brush.extent();null!==ee&&Y(ee)}else Z.transition().call(i),M(),F();i.dispatch.on("areaClick.toggle",function(e){1===c.filter(function(e){return!e.disabled}).length?c.forEach(function(e){e.disabled=!1}):c.forEach(function(t,n){t.disabled=n!=e.seriesIndex}),S.disabled=c.map(function(e){return!!e.disabled}),T.stateChange(S),t.update()}),s.dispatch.on("stateChange",function(e){for(var n in e)S[n]=e[n];T.stateChange(S),t.update()}),l.dispatch.on("legendClick",function(e,n){e.disabled&&(J=J.map(function(e){return e.disabled=!0,e}),e.disabled=!1,i.style(e.style),S.style=i.style(),T.stateChange(S),t.update())}),u.dispatch.on("elementMousemove",function(n){i.clearHighlights();var r,o,a,s=[],l=0,d=!0;if(c.filter(function(e,t){return e.seriesIndex=t,!e.disabled}).forEach(function(u,c){o=e.interactiveBisect(u.values,n.pointXValue,t.x());var f=u.values[o];if(null!=t.y()(f,o)&&i.highlightPoint(c,o,!0),void 0!==f){void 0===r&&(r=f),void 0===a&&(a=t.xScale()(t.x()(f,o)));var p="expand"==i.style()?f.display.y:t.y()(f,o);s.push({key:u.key,value:p,color:g(u,u.seriesIndex),point:f}),C&&"expand"!=i.style()&&null!=p&&(l+=p,d=!1)}}),s.reverse(),s.length>2){var f=t.yScale().invert(n.mouseY),p=null;s.forEach(function(e,t){f=Math.abs(f);var n=Math.abs(e.point.display.y0),r=Math.abs(e.point.display.y);f>=n&&f<=r+n&&(p=t)}),null!=p&&(s[p].highlight=!0)}C&&"expand"!=i.style()&&s.length>=2&&!d&&s.push({key:k,value:l,total:!0});var h=t.x()(r,o),m=u.tooltip.valueFormatter();"expand"===i.style()||"stack_percent"===i.style()?(P||(P=m),m=d3.format(".1%")):P&&(m=P,P=null),u.tooltip.chartContainer(H.parentNode).valueFormatter(m).data({value:h,series:s})(),u.renderGuideLine(a)}),u.dispatch.on("elementMouseout",function(e){i.clearHighlights()}),d.dispatch.on("onBrush",function(e){Y(e)}),T.on("changeState",function(e){void 0!==e.disabled&&c.length===e.disabled.length&&(c.forEach(function(t,n){t.disabled=e.disabled[n]}),S.disabled=e.disabled),void 0!==e.style&&(i.style(e.style),O=e.style),t.update()})}),F.renderEnd("stacked Area chart immediate"),t}var n,r,i=e.models.stackedArea(),o=e.models.axis(),a=e.models.axis(),s=e.models.legend(),l=e.models.legend(),u=e.interactiveGuideline(),c=e.models.tooltip(),d=e.models.focus(e.models.stackedArea()),f={top:30,right:25,bottom:50,left:60},p=null,h=null,g=e.utils.defaultColor(),m=!0,v=!0,y=!0,b=!0,x=!1,w=!1,_=!1,C=!0,k="TOTAL",S=e.utils.state(),$=null,M=null,T=d3.dispatch("stateChange","changeState","renderEnd"),D=250,E=["Stacked","Stream","Expanded"],L={},A=250;S.style=i.style(),o.orient("bottom").tickPadding(7),a.orient(x?"right":"left"),c.headerFormatter(function(e,t){return o.tickFormat()(e,t)}).valueFormatter(function(e,t){return a.tickFormat()(e,t)}),u.tooltip.headerFormatter(function(e,t){return o.tickFormat()(e,t)}).valueFormatter(function(e,t){return null==e?"N/A":a.tickFormat()(e,t)});var R=null,P=null;l.updateState(!1);var F=e.utils.renderWatch(T),O=i.style(),N=function(e){return function(){return{active:e.map(function(e){return!e.disabled}),style:i.style()}}},I=function(e){return function(t){void 0!==t.style&&(O=t.style),void 0!==t.active&&e.forEach(function(e,n){e.disabled=!t.active[n]})}},j=d3.format("%");return i.dispatch.on("elementMouseover.tooltip",function(e){e.point.x=i.x()(e.point),e.point.y=i.y()(e.point),c.data(e).hidden(!1)}),i.dispatch.on("elementMouseout.tooltip",function(e){c.hidden(!0)}),t.dispatch=T,t.stacked=i,t.legend=s,t.controls=l,t.xAxis=o,t.x2Axis=d.xAxis,t.yAxis=a,t.y2Axis=d.yAxis,t.interactiveLayer=u,t.tooltip=c,t.focus=d,t.dispatch=T,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{width:{get:function(){return p},set:function(e){p=e}},height:{get:function(){return h},set:function(e){h=e}},showLegend:{get:function(){return v},set:function(e){v=e}},showXAxis:{get:function(){return y},set:function(e){y=e}},showYAxis:{get:function(){return b},set:function(e){b=e}},defaultState:{get:function(){return $},set:function(e){$=e}},noData:{get:function(){return M},set:function(e){M=e}},showControls:{get:function(){return m},set:function(e){m=e}},controlLabels:{get:function(){return L},set:function(e){L=e}},controlOptions:{get:function(){return E},set:function(e){E=e}},showTotalInTooltip:{get:function(){return C},set:function(e){C=e}},totalLabel:{get:function(){return k},set:function(e){k=e}},focusEnable:{get:function(){return w},set:function(e){w=e}},focusHeight:{get:function(){return d.height()},set:function(e){d.height(e)}},brushExtent:{get:function(){return d.brushExtent()},set:function(e){d.brushExtent(e)}},margin:{get:function(){return f},set:function(e){f.top=void 0!==e.top?e.top:f.top,f.right=void 0!==e.right?e.right:f.right,f.bottom=void 0!==e.bottom?e.bottom:f.bottom,f.left=void 0!==e.left?e.left:f.left}},focusMargin:{get:function(){return d.margin},set:function(e){d.margin.top=void 0!==e.top?e.top:d.margin.top,d.margin.right=void 0!==e.right?e.right:d.margin.right,d.margin.bottom=void 0!==e.bottom?e.bottom:d.margin.bottom,d.margin.left=void 0!==e.left?e.left:d.margin.left}},duration:{get:function(){return A},set:function(e){A=e,F.reset(A),i.duration(A),o.duration(A),a.duration(A)}},color:{get:function(){return g},set:function(t){g=e.utils.getColor(t),s.color(g),i.color(g),d.color(g)}},x:{get:function(){return i.x()},set:function(e){i.x(e),d.x(e)}},y:{get:function(){return i.y()},set:function(e){i.y(e),d.y(e)}},rightAlignYAxis:{get:function(){return x},set:function(e){x=e,a.orient(x?"right":"left")}},useInteractiveGuideline:{get:function(){return _},set:function(e){_=!!e,t.interactive(!e),t.useVoronoi(!e),i.scatter.interactive(!e)}}}),e.utils.inheritOptions(t,i),e.utils.initOptions(t),t},e.models.stackedAreaWithFocusChart=function(){return e.models.stackedAreaChart().margin({bottom:30}).focusEnable(!0)},e.models.sunburst=function(){"use strict";function t(e){return n(e)>90?180:0}function n(e){return(Math.max(0,Math.min(2*Math.PI,E(e.x)))+Math.max(0,Math.min(2*Math.PI,E(e.x+e.dx))))/2*(180/Math.PI)-90}function r(e){var t=Math.max(0,Math.min(2*Math.PI,E(e.x)));return Math.max(0,Math.min(2*Math.PI,E(e.x+e.dx)))-t>k}function i(e,t){var n=d3.interpolate(E.domain(),[c.x,c.x+c.dx]),r=d3.interpolate(L.domain(),[c.y,1]),i=d3.interpolate(L.range(),[c.y?20:0,p]);return 0===t?function(){return P(e)}:function(t){return E.domain(n(t)),L.domain(r(t)).range(i(t)),P(e)}}function o(e){var t=d3.interpolate({x:e.x0,dx:e.dx0,y:e.y0,dy:e.dy0},e);return function(n){var r=t(n);return e.x0=r.x,e.dx0=r.dx,e.y0=r.y,e.dy0=r.dy,P(r)}}function a(e){var t=$(e);R[t]||(R[t]={});var n=R[t];n.dx=e.dx,n.x=e.x,n.dy=e.dy,n.y=e.y}function s(e){e.forEach(function(e){var t=$(e),n=R[t];n?(e.dx0=n.dx,e.x0=n.x,e.dy0=n.dy,e.y0=n.y):(e.dx0=e.dx,e.x0=e.x,e.dy0=e.dy,e.y0=e.y),a(e)})}function l(e){var o=x.selectAll("text"),a=x.selectAll("path");o.transition().attr("opacity",0),c=e,a.transition().duration(T).attrTween("d",i).each("end",function(i){i.x>=e.x&&i.x<e.x+e.dx&&i.depth>=e.depth&&d3.select(this.parentNode).select("text").transition().duration(T).text(function(e){return C(e)}).attr("opacity",function(e){return r(e)?1:0}).attr("transform",function(){var r=this.getBBox().width;if(0===i.depth)return"translate("+r/2*-1+",0)";if(i.depth===e.depth)return"translate("+(L(i.y)+5)+",0)";var o=n(i),a=t(i);return 0===a?"rotate("+o+")translate("+(L(i.y)+5)+",0)":"rotate("+o+")translate("+(L(i.y)+r+5)+",0)rotate("+a+")"})})}function u(i){return F.reset(),i.each(function(i){x=d3.select(this),d=e.utils.availableWidth(g,x,h),f=e.utils.availableHeight(m,x,h),p=Math.min(d,f)/2,L.range([0,p]);var a=x.select("g.nvd3.nv-wrap.nv-sunburst");a[0][0]||(a=x.append("g").attr("class","nvd3 nv-wrap nv-sunburst nv-chart-"+b).attr("transform","translate("+d/2+","+f/2+")")),x.on("click",function(e,t){D.chartClick({data:e,index:t,pos:d3.event,id:b})}),A.value(y[v]||y.count);var u=A.nodes(i[0]).reverse();s(u);var c=a.selectAll(".arc-container").data(u,$);c.enter().append("g").attr("class","arc-container").append("path").attr("d",P).style("fill",function(e){return e.color?e.color:w(M?(e.children?e:e.parent).name:e.name)}).style("stroke","#FFF").on("click",l).on("mouseover",function(e,t){d3.select(this).classed("hover",!0).style("opacity",.8),D.elementMouseover({data:e,color:d3.select(this).style("fill")})}).on("mouseout",function(e,t){d3.select(this).classed("hover",!1).style("opacity",1),D.elementMouseout({data:e})}).on("mousemove",function(e,t){D.elementMousemove({data:e})}),c.each(function(e){d3.select(this).select("path").transition().duration(T).attrTween("d",o)}),_&&(c.selectAll("text").remove(),c.append("text").text(function(e){return C(e)}).transition().duration(T).attr("opacity",function(e){return r(e)?1:0}).attr("transform",function(e){var r=this.getBBox().width;if(0===e.depth)return"rotate(0)translate("+r/2*-1+",0)";var i=n(e),o=t(e);return 0===o?"rotate("+i+")translate("+(L(e.y)+5)+",0)":"rotate("+i+")translate("+(L(e.y)+r+5)+",0)rotate("+o+")"})),l(u[u.length-1]),c.exit().transition().duration(T).attr("opacity",0).each("end",function(e){var t=$(e);R[t]=void 0}).remove()}),F.renderEnd("sunburst immediate"),u}var c,d,f,p,h={top:0,right:0,bottom:0,left:0},g=600,m=600,v="count",y={count:function(e){return 1},value:function(e){return e.value||e.size},size:function(e){return e.value||e.size}},b=Math.floor(1e4*Math.random()),x=null,w=e.utils.defaultColor(),_=!1,C=function(e){return"count"===v?e.name+" #"+e.value:e.name+" "+(e.value||e.size)},k=.02,S=function(e,t){return e.name>t.name},$=function(e,t){return e.name},M=!0,T=500,D=d3.dispatch("chartClick","elementClick","elementDblClick","elementMousemove","elementMouseover","elementMouseout","renderEnd"),E=d3.scale.linear().range([0,2*Math.PI]),L=d3.scale.sqrt(),A=d3.layout.partition().sort(S),R={},P=d3.svg.arc().startAngle(function(e){return Math.max(0,Math.min(2*Math.PI,E(e.x)))}).endAngle(function(e){return Math.max(0,Math.min(2*Math.PI,E(e.x+e.dx)))}).innerRadius(function(e){return Math.max(0,L(e.y))}).outerRadius(function(e){return Math.max(0,L(e.y+e.dy))}),F=e.utils.renderWatch(D);return u.dispatch=D,u.options=e.utils.optionsFunc.bind(u),u._options=Object.create({},{width:{get:function(){return g},set:function(e){g=e}},height:{get:function(){return m},set:function(e){m=e}},mode:{get:function(){return v},set:function(e){v=e}},id:{get:function(){return b},set:function(e){b=e}},duration:{get:function(){return T},set:function(e){T=e}},groupColorByParent:{get:function(){return M},set:function(e){M=!!e}},showLabels:{get:function(){return _},set:function(e){_=!!e}},labelFormat:{get:function(){return C},set:function(e){C=e}},labelThreshold:{get:function(){return k},set:function(e){k=e}},sort:{get:function(){return S},set:function(e){S=e}},key:{get:function(){return $},set:function(e){$=e}},margin:{get:function(){return h},set:function(e){h.top=void 0!=e.top?e.top:h.top,h.right=void 0!=e.right?e.right:h.right,h.bottom=void 0!=e.bottom?e.bottom:h.bottom,h.left=void 0!=e.left?e.left:h.left}},color:{get:function(){return w},set:function(t){w=e.utils.getColor(t)}}}),e.utils.initOptions(u),u},e.models.sunburstChart=function(){"use strict";function t(r){return f.reset(),f.models(n),r.each(function(r){var s=d3.select(this);e.utils.initSVG(s);var l=e.utils.availableWidth(o,s,i),u=e.utils.availableHeight(a,s,i);if(t.update=function(){0===c?s.call(t):s.transition().duration(c).call(t)},t.container=s,!r||!r.length)return e.utils.noData(t,s),t;s.selectAll(".nv-noData").remove(),n.width(l).height(u),s.call(n)}),f.renderEnd("sunburstChart immediate"),t}var n=e.models.sunburst(),r=e.models.tooltip(),i={top:30,right:20,bottom:20,left:20},o=null,a=null,s=e.utils.defaultColor(),l=(Math.round(1e5*Math.random()),null),u=null,c=250,d=d3.dispatch("stateChange","changeState","renderEnd"),f=e.utils.renderWatch(d);return r.duration(0).headerEnabled(!1).valueFormatter(function(e){return e}),n.dispatch.on("elementMouseover.tooltip",function(e){e.series={key:e.data.name,value:e.data.value||e.data.size,color:e.color},r.data(e).hidden(!1)}),n.dispatch.on("elementMouseout.tooltip",function(e){r.hidden(!0)}),n.dispatch.on("elementMousemove.tooltip",function(e){r()}),t.dispatch=d,t.sunburst=n,t.tooltip=r,t.options=e.utils.optionsFunc.bind(t),t._options=Object.create({},{noData:{get:function(){return u},set:function(e){u=e}},defaultState:{get:function(){return l},set:function(e){l=e}},color:{get:function(){return s},set:function(e){s=e,n.color(s)}},duration:{get:function(){return c},set:function(e){c=e,f.reset(c),n.duration(c)}},margin:{get:function(){return i},set:function(e){i.top=void 0!==e.top?e.top:i.top,i.right=void 0!==e.right?e.right:i.right,i.bottom=void 0!==e.bottom?e.bottom:i.bottom,i.left=void 0!==e.left?e.left:i.left}}}),e.utils.inheritOptions(t,n),e.utils.initOptions(t),t},e.version="1.8.3-dev"}(),function(e,t){"use strict";if("object"==typeof exports)module.exports=t(require("d3"));else if("function"==typeof define&&define.amd)define(["d3"],function(n){return e.dimple=t(n),e.dimple});else if(e.d3)e.dimple=t(e.d3);else{if(!console||!console.warn)throw"dimple requires d3 to run.  Are you missing a reference to the d3 library?";console.warn("dimple requires d3 to run.  Are you missing a reference to the d3 library?")}}(this,function(e){"use strict";var t={version:"2.2.0",plot:{},aggregateMethod:{}};return t.axis=function(n,r,i,o,a,s){this.chart=n,this.position=r,this.categoryFields=null===a||void 0===a?i:[].concat(a),this.measure=o,this.timeField=a,this.floatingBarWidth=5,this.hidden=!1,this.showPercent=!1,this.colors=null,this.overrideMin=null,this.overrideMax=null,this.shapes=null,this.showGridlines=null,this.gridlineShapes=null,this.titleShape=null,this.dateParseFormat=null,this.tickFormat=null,this.timePeriod=null,this.timeInterval=1,this.useLog=!1,this.logBase=10,this.title=void 0,this.clamp=!0,this.ticks=null,this.fontSize="10px",this.fontFamily="sans-serif",this.autoRotateLabel=null===s||void 0===s||s,this._slaves=[],this._scale=null,this._min=0,this._max=0,this._previousOrigin=null,this._origin=null,this._orderRules=[],this._groupOrderRules=[],this._draw=null,this._getAxisData=function(){var e,t,n=[],r=!1;if(this.chart&&this.chart.series){for(e=0;e<this.chart.series.length;e+=1)(t=this.chart.series[e])[this.position]===this&&(t.data&&t.data.length>0?n=n.concat(t.data):r=!0);r&&this.chart.data&&(n=n.concat(this.chart.data))}return n},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getFormat=function(){var t,n,r,i,o,a,s;return null!==this.tickFormat&&void 0!==this.tickFormat?t=this._hasTimeField()?e.timeFormat(this.tickFormat):e.format(this.tickFormat):this.showPercent?t=e.format(".0%"):this.useLog&&null!==this.measure?t=function(t){var n=Math.floor(Math.abs(t),0).toString().length,r=Math.min(Math.floor((n-1)/3),4),i="kmBT".substring(r-1,r),o="0"===Math.round(t/Math.pow(1e3,r)*10).toString().slice(-1)?0:1;return 0===t?0:e.format(",."+o+"f")(t/Math.pow(1e3,r))+i}:null!==this.measure?(n=Math.floor(Math.abs(this._max),0).toString(),r=Math.floor(Math.abs(this._min),0).toString(),(i=Math.max(r.length,n.length))>3?(o=Math.min(Math.floor((i-1)/3),4),a="kmBT".substring(o-1,o),s=i-3*o<=1?1:0,t=function(t){return 0===t?0:e.format(",."+s+"f")(t/Math.pow(1e3,o))+a}):(s=Math.max(-(this._tick_step?Math.floor(Math.log(this._tick_step)/Math.LN10):0),0),t=e.format(",."+s+"f"))):t=function(e){return e},t},this._getTimePeriod=function(){var t=this.timePeriod,n=this._max-this._min;return this._hasTimeField()&&!this.timePeriod&&(t=n/1e3<=30?e.timeSecond:n/6e4<=30?e.timeMinute:n/36e5<=30?e.timeHour:n/864e5<=30?e.timeHay:n/6048e5<=30?e.timeWeek:n/26298e5<=30?e.timeMonth:e.timeYear),t},this._getTooltipText=function(t,n){if(this._hasTimeField())n[this.position+"Field"][0]&&t.push(this.timeField+": "+this._getFormat()(n[this.position+"Field"][0]));else if(this._hasCategories())this.categoryFields.forEach(function(e,r){null!==e&&void 0!==e&&n[this.position+"Field"][r]&&t.push(e+(n[this.position+"Field"][r]!==e?": "+n[this.position+"Field"][r]:""))},this);else if(this._hasMeasure())switch(this.position){case"x":t.push(this.measure+": "+this._getFormat()(n.width));break;case"y":t.push(this.measure+": "+this._getFormat()(n.height));break;case"p":t.push(this.measure+": "+this._getFormat()(n.angle)+" ("+e.format(".0%")(n.piePct)+")");break;default:t.push(this.measure+": "+this._getFormat()(n[this.position+"Value"]))}},this._getTopMaster=function(){var e=this;return null!==this.master&&void 0!==this.master&&(e=this.master._getTopMaster()),e},this._hasCategories=function(){return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0},this._hasMeasure=function(){return null!==this.measure&&void 0!==this.measure},this._hasTimeField=function(){return null!==this.timeField&&void 0!==this.timeField},this._parseDate=function(t){return null===this.dateParseFormat||void 0===this.dateParseFormat?isNaN(t)?Date.parse(t):new Date(t):e.timeParse(this.dateParseFormat)(t)},this._update=function(n){var r,i,o,a,s=[],l=this.ticks||10,u=function(e,n,r){var i,o,a=e.categoryFields[0],s=e._getAxisData(),l=a,u=!1,c=!0,d=null;for(i=0;i<s.length;i+=1)if(null!==(d=e._parseDate(s[i][a]))&&void 0!==d&&isNaN(d)){c=!1;break}return c||e.chart.series.forEach(function(t){t[n]===e&&t[r]._hasMeasure()&&(l=t[r].measure,u=!0)},this),o=e._orderRules.concat({ordering:l,desc:u}),t._getOrderedList(s,a,o)};if(this._min=this.showPercent&&this._min<-1?-1:this._min,this._max=this.showPercent&&this._max>1?1:this._max,this._min=null!==this.overrideMin?this.overrideMin:this._min,this._max=null!==this.overrideMax?this.overrideMax:this._max,"x"!==this.position||null!==this._scale&&!n){if("y"!==this.position||null!==this._scale&&!n)this.position.length>0&&"z"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scaleLog().range([this.chart._heightPixels()/300,this.chart._heightPixels()/10]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scaleLinear().range([1,this.chart._heightPixels()/10]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"p"===this.position[0]&&null===this._scale?this.useLog?this._scale=e.scaleLog().range([0,360]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase):this._scale=e.scaleLinear().range([0,360]).domain([this._min,this._max]).clamp(this.clamp):this.position.length>0&&"c"===this.position[0]&&null===this._scale&&(this._scale=e.scaleLinear().range([0,null===this.colors||1===this.colors.length?1:this.colors.length-1]).domain([this._min,this._max]).clamp(this.clamp));else if(this._hasTimeField()?this._scale=e.scaleTime().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scaleLog().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(s=u(this,"y","x"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){s=s.concat(u(e,"y","x"))},this),this._scale=e.scalePoint().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain(s.concat([""]))):this._scale=e.scaleLinear().range([this.chart._yPixels()+this.chart._heightPixels(),this.chart._yPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"y")){case 0:this._draw=e.axisLeft().scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=e.axisRight().scale(this._scale),this.ticks&&this._draw.ticks(l)}}else if(this._hasTimeField()?this._scale=e.scaleTime().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp):this.useLog?this._scale=e.scaleLog().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([0===this._min?Math.pow(this.logBase,-1):this._min,0===this._max?-1*Math.pow(this.logBase,-1):this._max]).clamp(this.clamp).base(this.logBase).nice():null===this.measure||void 0===this.measure?(s=u(this,"x","y"),null!==this._slaves&&void 0!==this._slaves&&this._slaves.forEach(function(e){s=s.concat(u(e,"x","y"))},this),this._scale=e.scalePoint().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain(s.concat([""]))):this._scale=e.scaleLinear().range([this.chart._xPixels(),this.chart._xPixels()+this.chart._widthPixels()]).domain([this._min,this._max]).clamp(this.clamp).nice(),!this.hidden)switch(this.chart._axisIndex(this,"x")){case 0:this._draw=e.axisBottom().scale(this._scale),this.ticks&&this._draw.ticks(l);break;case 1:this._draw=e.axisTop().scale(this._scale),this.ticks&&this._draw.ticks(l)}return null!==this._slaves&&void 0!==this._slaves&&this._slaves.length>0&&this._slaves.forEach(function(e){e._scale=this._scale},this),null!==n&&void 0!==n&&!1!==n||this._hasTimeField()||null===this._scale||null===this._scale.ticks||void 0===this._scale.ticks||!(this._scale.ticks(l).length>0)||"x"!==this.position&&"y"!==this.position||(i=(r=this._scale.ticks(l))[1]-r[0],o=((this._max-this._min)%i).toFixed(0),this._tick_step=i,0!==o&&(this._max=Math.ceil(this._max/i)*i,this._min=Math.floor(this._min/i)*i,this._update(!0))),a=null!==s&&void 0!==s&&s.length>0?this._scale.copy()(s[0]):this._min>0?this._scale.copy()(this._min):this._max<0?this._scale.copy()(this._max):this._scale.copy()(0),this._origin!==a&&(this._previousOrigin=null===this._origin?a:this._origin,this._origin=a),this},this.addGroupOrderRule=function(e,t){this._groupOrderRules.push({ordering:e,desc:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})}},t.chart=function(n,r){this.svg=n,this.x="10%",this.y="10%",this.width="80%",this.height="80%",this.data=r,this.noFormats=!1,this.axes=[],this.series=[],this.legends=[],this.storyboard=null,this.titleShape=null,this.shapes=null,this.ease=e.easeCubicInOut,this.staggerDraw=!1,this.transition={},this._group=n.append("g"),this._group.attr("class","dimple-chart"),this._gridlines_group=this._group.insert("g"),this._gridlines_group.attr("class","dimple-gridlines-group"),this._axis_group=this._group.insert("g"),this._axis_group.attr("class","dimple-axis-group"),this._tooltipGroup=null,this._assignedColors={},this._assignedClasses={},this._nextColor=0,this._nextClass=0,this._axisIndex=function(e,t){var n=0,r=0,i=-1;for(n=0;n<this.axes.length;n+=1){if(this.axes[n]===e){i=r;break}null!==t&&void 0!==t&&t[0]!==this.axes[n].position[0]||(r+=1)}return i},this._getAllData=function(){var e=[];return null!==this.data&&void 0!==this.data&&this.data.length>0&&(e=e.concat(this.data)),null!==this.series&&void 0!==this.series&&this.series.length>0&&this.series.forEach(function(t){null!==t.data&&void 0!==t.data&&t.data.length>0&&(e=e.concat(t.data))}),e},this._getData=function(n,r,i,o,a,s,l,u,c,d){var f,p,h=[],g=function(e,t){var n=[];return null!==e&&(e._hasTimeField()?n.push(e._parseDate(t[e.timeField])):e._hasCategories()&&e.categoryFields.forEach(function(e){n.push(t[e])},this)),n},m={x:!1,y:!1,z:!1,p:!1,c:!1},v={x:[],y:[]},y={x:[],y:[],z:[],p:[]},b={min:null,max:null},x={x:[],y:[],z:[],p:[]},w=[],_={},C={x:0,y:0,z:0,p:0},k="",S=[],$=[],M=[],T="",D=[],E="",L=[],A="",R=[],P=[],F=n,O=[];this.storyboard&&this.storyboard.categoryFields.length>0&&(k=this.storyboard.categoryFields[0],S=t._getOrderedList(F,k,this.storyboard._orderRules)),s&&s._hasCategories()&&s._hasMeasure()&&(T=s.categoryFields[0],D=t._getOrderedList(F,T,s._orderRules.concat([{ordering:s.measure,desc:!0}]))),l&&l._hasCategories()&&l._hasMeasure()&&(E=l.categoryFields[0],L=t._getOrderedList(F,E,l._orderRules.concat([{ordering:l.measure,desc:!0}]))),c&&c._hasCategories()&&c._hasMeasure()&&(A=c.categoryFields[0],R=t._getOrderedList(F,A,c._orderRules.concat([{ordering:c.measure,desc:!0}]))),F.length>0&&r&&r.length>0&&(P=[].concat(o),$=[],r.forEach(function(e){void 0!==F[0][e]&&$.push(e)},this),c&&c._hasMeasure()?P.push({ordering:c.measure,desc:!0}):d&&d._hasMeasure()?P.push({ordering:d.measure,desc:!0}):u&&u._hasMeasure()?P.push({ordering:u.measure,desc:!0}):s&&s._hasMeasure()?P.push({ordering:s.measure,desc:!0}):l&&l._hasMeasure()&&P.push({ordering:l.measure,desc:!0}),M=t._getOrderedList(F,$,P)),F.sort(function(e,t){var n,r,i,o,a,s,l=0;if(""!==k&&(l=S.indexOf(e[k])-S.indexOf(t[k])),""!==T&&0===l&&(l=D.indexOf(e[T])-D.indexOf(t[T])),""!==E&&0===l&&(l=L.indexOf(e[E])-L.indexOf(t[E])),""!==A&&0===l&&(l=R.indexOf(e[A])-L.indexOf(t[A])),$&&$.length>0&&0===l)for(n=[].concat($),l=0,i=0;i<M.length;i+=1){for(r=[].concat(M[i]),a=!0,s=!0,o=0;o<n.length;o+=1)a=a&&e[n[o]]===r[o],s=s&&t[n[o]]===r[o];if(a||s){l=a&&s?0:a?-1:1;break}}return l}),F.forEach(function(e){var t,n,o,a,f,p=-1,v=g(s,e),y=g(l,e),b=g(u,e),x=g(c,e),w=[];if(r&&0!==r.length)for(o=0;o<r.length;o+=1)void 0===e[r[o]]?w.push(r[o]):w.push(e[r[o]]);else w=["All"];for(t=w.join("/")+"_"+v.join("/")+"_"+y.join("/")+"_"+x.join("/")+"_"+b.join("/"),n=0;n<h.length;n+=1)if(h[n].key===t){p=n;break}-1===p&&(a={key:t,aggField:w,xField:v,xValue:null,xCount:0,yField:y,yValue:null,yCount:0,pField:x,pValue:null,pCount:0,zField:b,zValue:null,zCount:0,cValue:0,cCount:0,x:0,y:0,xOffset:0,yOffset:0,width:0,height:0,cx:0,cy:0,xBound:0,yBound:0,xValueList:[],yValueList:[],zValueList:[],pValueList:[],cValueList:[],fill:{},stroke:{}},h.push(a),p=h.length-1),(f=function(t,n){var r,o,a=!0,s={value:0,count:1},l={value:0,count:1},u="";null!==n&&(r=n.getFrameValue(),n.categoryFields.forEach(function(t,n){n>0&&(u+="/"),u+=e[t],a=u===r},this)),null!==t&&void 0!==t&&a&&(o=h[p],t._hasMeasure()&&null!==e[t.measure]&&void 0!==e[t.measure]&&(-1===o[t.position+"ValueList"].indexOf(e[t.measure])&&o[t.position+"ValueList"].push(e[t.measure]),isNaN(parseFloat(e[t.measure]))&&(m[t.position]=!0),s.value=o[t.position+"Value"],s.count=o[t.position+"Count"],l.value=e[t.measure],o[t.position+"Value"]=i(s,l),o[t.position+"Count"]+=1))})(s,this.storyboard),f(l,this.storyboard),f(u,this.storyboard),f(c,this.storyboard),f(d,this.storyboard)},this),s&&s._hasCategories()&&s.categoryFields.length>1&&void 0!==v.x&&(O=[],l._hasMeasure()&&O.push({ordering:l.measure,desc:!0}),v.x=t._getOrderedList(F,s.categoryFields[1],s._groupOrderRules.concat(O))),l&&l._hasCategories()&&l.categoryFields.length>1&&void 0!==v.y&&(O=[],s._hasMeasure()&&O.push({ordering:s.measure,desc:!0}),v.y=t._getOrderedList(F,l.categoryFields[1],l._groupOrderRules.concat(O)),v.y.reverse()),h.forEach(function(e){null!==s&&(!0===m.x&&(e.xValue=e.xValueList.length),f=s._hasMeasure()&&s._hasCategories()?(y.x[e.xField.join("/")]||0)+(s._hasMeasure()?Math.abs(e.xValue):0):(y.x[e.xField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.yValue):0),y.x[e.xField.join("/")]=f),null!==l&&(!0===m.y&&(e.yValue=e.yValueList.length),f=l._hasMeasure()&&l._hasCategories()?(y.y[e.yField.join("/")]||0)+(l._hasMeasure()?Math.abs(e.yValue):0):(y.y[e.yField.join("/")]||0)+(s._hasMeasure()?Math.abs(e.xValue):0),y.y[e.yField.join("/")]=f),null!==c&&(!0===m.p&&(e.pValue=e.pValueList.length),f=(y.p[e.pField.join("/")]||0)+(c._hasMeasure()?Math.abs(e.pValue):0),y.p[e.pField.join("/")]=f),null!==u&&(!0===m.z&&(e.zValue=e.zValueList.length),f=(y.z[e.zField.join("/")]||0)+(u._hasMeasure()?Math.abs(e.zValue):0),y.z[e.zField.join("/")]=f),null!==d&&((null===b.min||e.cValue<b.min)&&(b.min=e.cValue),(null===b.max||e.cValue>b.max)&&(b.max=e.cValue))},this);for(p in y.x)y.x.hasOwnProperty(p)&&(C.x+=y.x[p]);for(p in y.y)y.y.hasOwnProperty(p)&&(C.y+=y.y[p]);for(p in y.p)y.p.hasOwnProperty(p)&&(C.p+=y.p[p]);for(p in y.z)y.z.hasOwnProperty(p)&&(C.z+=y.z[p]);return h.forEach(function(t){var n,r,i,o,f=function(e,n,r){var i,o,s,l,u;null!==e&&void 0!==e&&(l=e.position,e._hasCategories()?e._hasMeasure()?(i=t[e.position+"Field"].join("/"),o=e.showPercent?y[e.position][i]/C[e.position]:y[e.position][i],-1===w.indexOf(i)&&(_[i]=o+(w.length>0?_[w[w.length-1]]:0),w.push(i)),s=t[l+"Bound"]=t["c"+l]="x"!==l&&"y"!==l||!a?o:_[i],t[r]=o,t[l]=s-("x"===l&&o>=0||"y"===l&&o<=0?o:0)):(t[l]=t["c"+l]=t[l+"Field"][0],t[r]=1,void 0!==v[l]&&null!==v[l]&&v[l].length>=2&&(t[l+"Offset"]=v[l].indexOf(t[l+"Field"][1]),t[r]=1/v[l].length)):(o=e.showPercent?t[l+"Value"]/y[n][t[n+"Field"].join("/")]:t[l+"Value"],i=t[n+"Field"].join("/")+(t[l+"Value"]>=0),u=x[l][i]=(null===x[l][i]||void 0===x[l][i]||"z"===l||"p"===l?0:x[l][i])+o,s=t[l+"Bound"]=t["c"+l]="x"!==l&&"y"!==l||!a?o:u,t[r]=o,t[l]=s-("x"===l&&o>=0||"y"===l&&o<=0?o:0)))};f(s,"y","width"),f(l,"x","height"),f(u,"z","r"),f(c,"p","angle"),null!==d&&null!==b.min&&null!==b.max&&(b.min===b.max&&(b.min-=.5,b.max+=.5),b.min=d.overrideMin||b.min,b.max=d.overrideMax||b.max,t.cValue=t.cValue>b.max?b.max:t.cValue<b.min?b.min:t.cValue,o=(i=e.scaleLinear().range([0,null===d.colors||1===d.colors.length?1:d.colors.length-1]).domain([b.min,b.max])(t.cValue))-Math.floor(i),t.cValue===b.max&&(o=1),d.colors&&1===d.colors.length?(n=e.rgb(d.colors[0]),r=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)):d.colors&&d.colors.length>1?(n=e.rgb(d.colors[Math.floor(i)]),r=e.rgb(d.colors[Math.ceil(i)])):(n=e.rgb("white"),r=e.rgb(this.getColor(t.aggField.slice(-1)[0]).fill)),n.r=Math.floor(n.r+(r.r-n.r)*o),n.g=Math.floor(n.g+(r.g-n.g)*o),n.b=Math.floor(n.b+(r.b-n.b)*o),t.fill=n.toString(),t.stroke=n.darker(.5).toString())},this),h},this._getDelay=function(e,n,r){return function(i){var o=0;return r&&n.staggerDraw&&(r.x._hasCategories()?o=t._helpers.cx(i,n,r)/n._widthPixels()*e:r.y._hasCategories()&&(o=(1-t._helpers.cy(i,n,r)/n._heightPixels())*e)),o}},this._getSeriesData=function(){null!==this.series&&void 0!==this.series&&this.series.forEach(function(e){var t,n,r,i,o,a,s=e.data||this.data||[],l=[].concat(e.categoryFields||"All"),u=this._getData(s,l,e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),c=[],d={},f=e.startAngle*(Math.PI/180)||0,p=(e.endAngle||360)*(Math.PI/180);if(f>p&&(f-=2*Math.PI),e.p&&l.length>0){if(e.x&&e.y){for(l.pop(),c=this._getData(s,["__dimple_placeholder__"].concat(l),e.aggregate,e._orderRules,e._isStacked(),e.x,e.y,e.z,e.p,e.c),t=0;t<u.length;t+=1)for((r=["__dimple_placeholder__"].concat(u[t].aggField)).pop(),e.x&&e.x._hasCategories()&&(r=r.concat(u[t].xField)),e.y&&e.y._hasCategories()&&(r=r.concat(u[t].yField)),i=r.join("|"),n=0;n<c.length;n+=1)if(o=[].concat(c[n].aggField),e.x&&e.x._hasCategories()&&(o=o.concat(c[n].xField)),e.y&&e.y._hasCategories()&&(o=o.concat(c[n].yField)),a=o.join("|"),i===a){u[t].xField=c[n].xField,u[t].xValue=c[n].xValue,u[t].xCount=c[n].xCount,u[t].yField=c[n].yField,u[t].yValue=c[n].yValue,u[t].yCount=c[n].yCount,u[t].zField=c[n].zField,u[t].zValue=c[n].zValue,u[t].zCount=c[n].zCount,u[t].x=c[n].x,u[t].y=c[n].y,u[t].r=c[n].r,u[t].xOffset=c[n].xOffset,u[t].yOffset=c[n].yOffset,u[t].width=c[n].width,u[t].height=c[n].height,u[t].cx=c[n].cx,u[t].cy=c[n].cy,u[t].xBound=c[n].xBound,u[t].yBound=c[n].yBound,u[t].xValueList=c[n].xValueList,u[t].yValueList=c[n].yValueList,u[t].zValueList=c[n].zValueList,u[t].cValueList=c[n].cValueList,u[t].pieKey=c[n].key,u[t].value=u.pValue,d[c[n].key]||(d[c[n].key]={total:0,angle:f}),d[c[n].key].total+=u[t].pValue;break}}else for(t=0;t<u.length;t+=1)u[t].pieKey="All",u[t].value=u.pValue,d[u[t].pieKey]||(d[u[t].pieKey]={total:0,angle:f}),d[u[t].pieKey].total+=u[t].pValue;for(t=0;t<u.length;t+=1)0===d[u[t].pieKey].total?u[t].piePct=0:u[t].piePct=u[t].pValue/d[u[t].pieKey].total,u[t].startAngle=d[u[t].pieKey].angle,u[t].endAngle=u[t].startAngle+u[t].piePct*(p-f),d[u[t].pieKey].angle=u[t].endAngle}e._positionData=u},this)},this._handleTransition=function(e,n,r,i){var o=null;return 0===n?o=e:(o=e.transition().duration(n).delay(r._getDelay(n,r,i)),t._ease(o,r.ease)),o},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this._registerEventHandlers=function(n){null!==n._eventHandlers&&n._eventHandlers.length>0&&n._eventHandlers.forEach(function(r){var i,o=function(i){var o=new t.eventArgs;null!==n.chart.storyboard&&(o.frameValue=n.chart.storyboard.getFrameValue()),o.seriesValue=i.aggField,o.xValue=i.x,o.yValue=i.y,o.zValue=i.z,o.pValue=i.p,o.colorValue=i.cValue,o.seriesShapes=n.shapes,o.selectedShape=e.select(this),r.handler(o)};if(null!==r.handler&&"function"==typeof r.handler)if(null!==n._markers&&void 0!==n._markers)for(i in n._markers)n._markers.hasOwnProperty(i)&&n._markers[i].on(r.event,o);else n.shapes.on(r.event,o)},this)},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this.addAxis=function(e,n,r,i){var o,a=null,s=null;if(null!==n&&void 0!==n&&(n=[].concat(n)),"string"==typeof e||e instanceof String)a=new t.axis(this,e,n,r,i),this.axes.push(a);else{if(s=e,a=new t.axis(this,s.position,n,r,i),a._hasMeasure()!==s._hasMeasure()?o="You have specified a composite axis where some but not all axes have a measure - this is not supported, all axes must be of the same type.":a._hasTimeField()!==s._hasTimeField()?o="You have specified a composite axis where some but not all axes have a time field - this is not supported, all axes must be of the same type.":(null===a.categoryFields||void 0===a.categoryFields?0:a.categoryFields.length)!==(null===s.categoryFields||void 0===s.categoryFields?0:s.categoryFields.length)&&(o="You have specified a composite axis where axes have differing numbers of category fields - this is not supported, all axes must be of the same type."),o)throw o;s._slaves.push(a)}return a},this.addCategoryAxis=function(e,t){return this.addAxis(e,t,null)},this.addColorAxis=function(e,t){var n=this.addAxis("c",null,e);return n.colors=null===t||void 0===t?null:[].concat(t),n},this.addLegend=function(e,n,r,i,o,a){a=null===a||void 0===a?this.series:[].concat(a),o=null===o||void 0===o?"left":o;var s=new t.legend(this,e,n,r,i,o,a);return this.legends.push(s),s},this.addLogAxis=function(e,t,n){var r=this.addAxis(e,null,t,null);return null!==n&&void 0!==n&&(r.logBase=n),r.useLog=!0,r},this.addMeasureAxis=function(e,t){return this.addAxis(e,null,t)},this.addPctAxis=function(e,t,n){var r=null;return r=null!==n&&void 0!==n?this.addAxis(e,n,t):this.addMeasureAxis(e,t),r.showPercent=!0,r},this.addSeries=function(e,n,r){null!==r&&void 0!==r||(r=this.axes),null!==n&&void 0!==n||(n=t.plot.bubble);var i,o=null,a=null,s=null,l=null,u=null;return r.forEach(function(e){null!==e&&n.supportedAxes.indexOf(e.position)>-1&&(null===o&&"x"===e.position[0]?o=e:null===a&&"y"===e.position[0]?a=e:null===s&&"z"===e.position[0]?s=e:null===l&&"c"===e.position[0]?l=e:null===l&&"p"===e.position[0]&&(u=e))},this),e&&(e=[].concat(e)),i=new t.series(this,e,o,a,s,l,u,n,t.aggregateMethod.sum,n.stacked),this.series.push(i),i},this.addTimeAxis=function(e,t,n,r){var i=this.addAxis(e,null,null,t);return i.tickFormat=r,i.dateParseFormat=n,i},this.assignClass=function(e,t){return this._assignedClasses[e]=t,this._assignedClasses[e]},this.assignColor=function(e,n,r,i){return this._assignedColors[e]=new t.color(n,r,i),this._assignedColors[e]},this.customClassList={axisLine:"dimple-custom-axis-line",axisLabel:"dimple-custom-axis-label",axisTitle:"dimple-custom-axis-title",tooltipBox:"dimple-custom-tooltip-box",tooltipLabel:"dimple-custom-tooltip-label",tooltipDropLine:"dimple-custom-tooltip-dropline",lineMarker:"dimple-custom-line-marker",lineMarkerCircle:"dimple-custom-line-marker-circle",legendLabel:"dimple-custom-legend-label",legendKey:"dimple-custom-legend-key",areaSeries:"dimple-custom-series-area",barSeries:"dimple-custom-series-bar",bubbleSeries:"dimple-custom-series-bubble",lineSeries:"dimple-custom-series-line",pieSeries:"dimple-custom-series-pie",gridline:"dimple-custom-gridline",colorClasses:["dimple-custom-format-1","dimple-custom-format-2","dimple-custom-format-3","dimple-custom-format-4","dimple-custom-format-5","dimple-custom-format-6","dimple-custom-format-7","dimple-custom-format-8","dimple-custom-format-9","dimple-custom-format-10"]},this.defaultColors=[new t.color("#80B1D3"),new t.color("#FB8072"),new t.color("#FDB462"),new t.color("#B3DE69"),new t.color("#FFED6F"),new t.color("#BC80BD"),new t.color("#8DD3C7"),new t.color("#CCEBC5"),new t.color("#FFFFB3"),new t.color("#BEBADA"),new t.color("#FCCDE5"),new t.color("#D9D9D9")],this.draw=function(t,n){t=t||0;var r,i,o=null,a=null,s=!1,l=!1,u=this._xPixels(),c=this._yPixels(),d=this._widthPixels(),f=this._heightPixels();return void 0!==n&&null!==n&&!1!==n||this._getSeriesData(),this.axes.forEach(function(e){e._scale=null},this),this.axes.forEach(function(e){if(e._min=0,e._max=0,i=[],e._hasMeasure()){var t=!1;this.series.forEach(function(n){if(n._deepMatch(e)){var r=n._axisBounds(e.position);e._min>r.min&&(e._min=r.min),e._max<r.max&&(e._max=r.max),t=!0}},this),t||this._getAllData().forEach(function(t){e._min>t[e.measure]&&(e._min=t[e.measure]),e._max<t[e.measure]&&(e._max=t[e.measure])},this)}else e._hasTimeField()?(e._min=null,e._max=null,this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].timeField&&void 0!==t[e.position].timeField&&-1===i.indexOf(t[e.position].timeField)&&i.push(t[e.position].timeField)},this),e._getAxisData().forEach(function(t){i.forEach(function(n){var r=e._parseDate(t[n]);(null===e._min||r<e._min)&&(e._min=r),(null===e._max||r>e._max)&&(e._max=r)},this)},this)):e._hasCategories()&&(e._min=0,r=[],this.series.forEach(function(t){t._deepMatch(e)&&null!==t[e.position].categoryFields[0]&&void 0!==t[e.position].categoryFields[0]&&-1===i.indexOf(t[e.position].categoryFields[0])&&i.push(t[e.position].categoryFields[0])},this),e._getAxisData().forEach(function(e){i.forEach(function(t){-1===r.indexOf(e[t])&&r.push(e[t])},this)},this),e._max=r.length);null!==e._slaves&&void 0!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(t){t._min=e._min,t._max=e._max},this),e._update(),null===o&&"x"===e.position?o=e:null===a&&"y"===e.position&&(a=e)},this),this.axes.forEach(function(n){var r=!1,i=null,p=0,h=null,g=!1,m=0,v={l:null,t:null,r:null,b:null},y=0,b=0,x="",w=this,_=function(e){return null===i||0===t||r?e:w._handleTransition(e,t,w)},C=function(){var t=e.select(this).selectAll("text");return!n.measure&&n._max>0&&("x"===n.position?t.attr("x",d/n._max/2):"y"===n.position&&t.attr("y",f/n._max*-1/2)),n.categoryFields&&n.categoryFields.length>0&&(n!==o||null!==a.categoryFields&&0!==a.categoryFields.length||t.attr("y",c+f-a._scale(0)+9),n!==a||null!==o.categoryFields&&0!==o.categoryFields.length||t.attr("x",-1*(o._scale(0)-u)-9)),this},k=function(t){return function(){var n=e.select(this).attr("class")||"";return-1===n.indexOf(t)&&(n+=" "+t),n.trim()}};null===n.gridlineShapes?(n.showGridlines||null===n.showGridlines&&!n._hasCategories()&&(!s&&"x"===n.position||!l&&"y"===n.position))&&(n.gridlineShapes=this._gridlines_group.append("g").attr("class","dimple-gridline"),"x"===n.position?s=!0:l=!0):"x"===n.position?s=!0:l=!0,null===n.shapes&&(n.shapes=this._axis_group.append("g").attr("class","dimple-axis dimple-axis-"+n.position).each(function(){w.noFormats||e.select(this).style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),r=!0),n===o&&null!==a?(i="translate(0, "+(null===a.categoryFields||0===a.categoryFields.length?a._scale(0):c+f)+")",h="translate(0, "+(n===o?c+f:c)+")",p=-f):n===a&&null!==o?(i="translate("+(null===o.categoryFields||0===o.categoryFields.length?o._scale(0):u)+", 0)",h="translate("+(n===a?u:u+d)+", 0)",p=-d):"x"===n.position?(h=i="translate(0, "+(n===o?c+f:c)+")",p=-f):"y"===n.position&&(h=i="translate("+(n===a?u:u+d)+", 0)",p=-d),null!==i&&null!==n._draw&&(n._hasTimeField()?_(n.shapes).call(n._draw.ticks(n._getTimePeriod(),n.timeInterval).tickFormat(n._getFormat())).attr("transform",i).each(C):n.useLog?_(n.shapes).call(n._draw.ticks(4,n._getFormat())).attr("transform",i).each(C):_(n.shapes).call(n._draw.tickFormat(n._getFormat())).attr("transform",i).each(C),null!==n.gridlineShapes&&_(n.gridlineShapes).call(n._draw.tickSize(p,0,0).tickFormat("")).attr("transform",h)),_(n.shapes.selectAll("text")).attr("class",k(w.customClassList.axisLabel)).call(function(e){w.noFormats||e.style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),_(n.shapes.selectAll("path, line")).attr("class",k(w.customClassList.axisLine)).call(function(e){w.noFormats||e.style("fill","none").style("stroke","black").style("shape-rendering","crispEdges")}),null!==n.gridlineShapes&&(n.gridlineShapes.selectAll("path").remove(),_(n.gridlineShapes.selectAll("line")).attr("class",k(w.customClassList.gridline)).call(function(e){w.noFormats||e.style("fill","none").style("stroke","lightgray").style("opacity",.8)})),null!==n.measure&&void 0!==n.measure||(n.autoRotateLabel?n===o?(m=0,n.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();m=e>m?e:m}),m>d/n.shapes.selectAll("text").nodes().length?(g=!0,n.shapes.selectAll("text").style("text-anchor","start").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+t.x+","+(t.y+t.height/2)+") translate(-5, 0)")})):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):"x"===n.position&&(m=0,n.shapes.selectAll("text").each(function(){var e=this.getComputedTextLength();m=e>m?e:m}),m>d/n.shapes.selectAll("text").nodes().length?(g=!0,n.shapes.selectAll("text").style("text-anchor","end").each(function(){var t=this.getBBox();e.select(this).attr("transform","rotate(90,"+(t.x+t.width)+","+(t.y+t.height/2)+") translate(5, 0)")})):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))):(g=!1,n.shapes.selectAll("text").style("text-anchor","middle").attr("transform",""))),null!==n.titleShape&&void 0!==n.titleShape&&n.titleShape.remove(),n.shapes.selectAll("text").each(function(){var e=this.getBBox();(null===v.l||-9-e.width<v.l)&&(v.l=-9-e.width),(null===v.r||e.x+e.width>v.r)&&(v.r=e.x+e.width),g?((null===v.t||e.y+e.height-e.width<v.t)&&(v.t=e.y+e.height-e.width),(null===v.b||e.height+e.width>v.b)&&(v.b=e.height+e.width)):((null===v.t||e.y<v.t)&&(v.t=e.y),(null===v.b||9+e.height>v.b)&&(v.b=9+e.height))}),"x"===n.position?(b=n===o?c+f+v.b+5:c+v.t-10,y=u+d/2):"y"===n.position&&(x="rotate(270, "+(y=n===a?u+v.l-10:u+d+v.r+20)+", "+(b=c+f/2)+")"),n.hidden||"x"!==n.position&&"y"!==n.position||null===n.title||(n.titleShape=this._axis_group.append("text").attr("class","dimple-axis dimple-title "+w.customClassList.axisTitle+" dimple-axis-"+n.position),n.titleShape.attr("x",y).attr("y",b).attr("text-anchor","middle").attr("transform",x).text(void 0!==n.title?n.title:null===n.categoryFields||void 0===n.categoryFields||0===n.categoryFields.length?n.measure:n.categoryFields.join("/")).each(function(){w.noFormats||e.select(this).style("font-family",n.fontFamily).style("font-size",n._getFontSize())}),n===o?n.titleShape.each(function(){e.select(this).attr("y",b+this.getBBox().height/1.65)}):n===a&&n.titleShape.each(function(){e.select(this).attr("x",y+this.getBBox().height/1.65)}))},this),this.series.forEach(function(e){e.plot.draw(this,e,t),this._registerEventHandlers(e)},this),this.legends.forEach(function(e){e._draw()},this),this.storyboard&&(this.storyboard._drawText(),this.storyboard.autoplay&&this.storyboard.startAnimation()),this},this.getClass=function(e){return this._assignedClasses[e]||(this._assignedClasses[e]=this.customClassList.colorClasses[this._nextClass],this._nextClass=(this._nextClass+1)%this.customClassList.colorClasses.length),this._assignedClasses[e]},this.getColor=function(e){return null!==this._assignedColors[e]&&void 0!==this._assignedColors[e]||(this._assignedColors[e]=this.defaultColors[this._nextColor],this._nextColor=(this._nextColor+1)%this.defaultColors.length),this._assignedColors[e]},this.setBounds=function(e,n,r,i){return this.x=e,this.y=n,this.width=r,this.height=i,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this.draw(0,!0),this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.svg.node())},this._heightPixels=function(){return t._parseYPosition(this.height,this.svg.node())},this},this.setMargins=function(e,n,r,i){return this.x=e,this.y=n,this.width=0,this.height=0,this._xPixels=function(){return t._parseXPosition(this.x,this.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.svg.node())},this._widthPixels=function(){return t._parentWidth(this.svg.node())-this._xPixels()-t._parseXPosition(r,this.svg.node())},this._heightPixels=function(){return t._parentHeight(this.svg.node())-this._yPixels()-t._parseYPosition(i,this.svg.node())},this},this.setStoryboard=function(e,n){return this.storyboard=new t.storyboard(this,e),null!==n&&void 0!==n&&(this.storyboard.onTick=n),this.storyboard}},t.color=function(t,n,r){this.fill=t,this.stroke=null===n||void 0===n?e.rgb(t).darker(.5).toString():n,this.opacity=null===r||void 0===r?.8:r},t.eventArgs=function(){this.seriesValue=null,this.xValue=null,this.yValue=null,this.zValue=null,this.pValue=null,this.colorValue=null,this.frameValue=null,this.seriesShapes=null,this.selectedShape=null},t.legend=function(n,r,i,o,a,s,l){this.chart=n,this.series=l,this.x=r,this.y=i,this.width=o,this.height=a,this.horizontalAlign=s,this.shapes=null,this.fontSize="10px",this.fontFamily="sans-serif",this._draw=function(){var n,r=this._getEntries(),i=0,o=0,a=0,s=0,l=this;this.shapes&&this.shapes.remove(),(n=this.chart._group.selectAll(".dimple-dont-select-any").data(r).enter().append("g").attr("class",function(e){return"dimple-legend "+t._createClass(e.aggField)}).attr("opacity",1)).append("text").attr("class",function(e){return"dimple-legend dimple-legend-text "+t._createClass(e.aggField)+" "+l.chart.customClassList.legendLabel}).text(function(e){return e.key}).call(function(e){l.chart.noFormats||e.style("font-family",l.fontFamily).style("font-size",l._getFontSize()).style("shape-rendering","crispEdges")}).each(function(){var e=this.getBBox();e.width>i&&(i=e.width),e.height>o&&(o=e.height)}),n.append("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)}).attr("height",9).attr("width",15),o=(o<9?9:o)+l._getVerticalPadding(),i+=15+l._getHorizontalPadding(),n.each(function(n){a+i>l._widthPixels()&&(a=0,s+=o),s>l._heightPixels()?e.select(this).remove():(e.select(this).select("text").attr("x","left"===l.horizontalAlign?l._xPixels()+15+5+a:l._xPixels()+(l._widthPixels()-a-i)+15+5).attr("y",function(){return l._yPixels()+s+this.getBBox().height/1.65}).attr("width",l._widthPixels()).attr("height",l._heightPixels()),e.select(this).select("rect").attr("class",function(e){return"dimple-legend dimple-legend-key "+t._createClass(e.aggField)+" "+l.chart.customClassList.legendKey+" "+e.css}).attr("x","left"===l.horizontalAlign?l._xPixels()+a:l._xPixels()+(l._widthPixels()-a-i)).attr("y",l._yPixels()+s).attr("height",9).attr("width",15).call(function(e){l.chart.noFormats||e.style("fill",n.fill).style("stroke",n.stroke).style("opacity",n.opacity).style("shape-rendering","crispEdges")}),a+=i)}),this.shapes=n},this._getEntries=function(){var e=[];return this.series&&this.series.forEach(function(t){t._positionData.forEach(function(n){var r,i=-1,o=t.plot.grouped&&!t.x._hasCategories()&&!t.y._hasCategories()&&n.aggField.length<2?"All":n.aggField.slice(-1)[0];for(r=0;r<e.length;r+=1)if(e[r].key===o){i=r;break}-1===i&&t.chart._assignedColors[o]&&(e.push({key:o,fill:t.chart._assignedColors[o].fill,stroke:t.chart._assignedColors[o].stroke,opacity:t.chart._assignedColors[o].opacity,css:t.chart._assignedClasses[o],series:t,aggField:n.aggField}),i=e.length-1)})},this),e},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._getHorizontalPadding=function(){return isNaN(this.horizontalPadding)?20:this.horizontalPadding},this._getVerticalPadding=function(){return isNaN(this.verticalPadding)?2:this.verticalPadding},this._heightPixels=function(){return t._parseYPosition(this.height,this.chart.svg.node())},this._widthPixels=function(){return t._parseXPosition(this.width,this.chart.svg.node())},this._xPixels=function(){return t._parseXPosition(this.x,this.chart.svg.node())},this._yPixels=function(){return t._parseYPosition(this.y,this.chart.svg.node())}},t.series=function(e,t,n,r,i,o,a,s,l,u){this.chart=e,this.x=n,this.y=r,this.z=i,this.c=o,this.p=a,this.plot=s,this.categoryFields=t,this.aggregate=l,this.stacked=u,this.barGap=.2,this.clusterBarGap=.1,this.lineWeight=2,this.lineMarkers=!1,this.afterDraw=null,this.interpolation="linear",this.tooltipFontSize="10px",this.tooltipFontFamily="sans-serif",this.radius="auto",this._group=e._group.append("g"),this._group.attr("class","dimple-series-group-"+e.series.length),this._eventHandlers=[],this._positionData=[],this._orderRules=[],this._axisBounds=function(e){var t,n,r,i={min:0,max:0},o=null,a=null,s=[],l=0,u=this._positionData;return"x"===e?(o=this.x,a=this.y):"y"===e?(o=this.y,a=this.x):"z"===e?o=this.z:"p"===e?o=this.p:"c"===e&&(o=this.c),o.showPercent?u.forEach(function(e){e[o.position+"Bound"]<i.min&&(i.min=e[o.position+"Bound"]),e[o.position+"Bound"]>i.max&&(i.max=e[o.position+"Bound"])},this):null===a||null===a.categoryFields||0===a.categoryFields.length?u.forEach(function(e){!this._isStacked()||"x"!==o.position&&"y"!==o.position?(e[o.position+"Value"]<i.min&&(i.min=e[o.position+"Value"]),e[o.position+"Value"]>i.max&&(i.max=e[o.position+"Value"])):e[o.position+"Value"]<0?i.min=i.min+e[o.position+"Value"]:i.max=i.max+e[o.position+"Value"]},this):(t=o.position+"Value",n=a.position+"Field",r=[],u.forEach(function(e){var i=e[n].join("/"),o=r.indexOf(i);-1===o&&(r.push(i),o=r.length-1),void 0===s[o]&&(s[o]={min:0,max:0},o>=l&&(l=o+1)),this.stacked?e[t]<0?s[o].min=s[o].min+e[t]:s[o].max=s[o].max+e[t]:(e[t]<s[o].min&&(s[o].min=e[t]),e[t]>s[o].max&&(s[o].max=e[t]))},this),s.forEach(function(e){void 0!==e&&(e.min<i.min&&(i.min=e.min),e.max>i.max&&(i.max=e.max))},this)),i},this._deepMatch=function(e){var t=!1;return this[e.position]===e?t=!0:void 0!==e._slaves&&null!==e._slaves&&e._slaves.length>0&&e._slaves.forEach(function(e){t=t||this._deepMatch(e)},this),t},this._dropLineOrigin=function(){var e=0,t=0,n={x:null,y:null},r={x:null,y:null};return this.chart.axes.forEach(function(e){"x"===e.position&&null===r.x?e._hasTimeField()?r.x=this.chart._xPixels():r.x=e._origin:"y"===e.position&&null===r.y&&(e._hasTimeField()?r.y=this.chart._yPixels()+this.chart._heightPixels():r.y=e._origin)},this),this.chart.axes.forEach(function(i){"x"!==i.position||this.x.hidden?"y"!==i.position||this.y.hidden||(this._deepMatch(i)&&(0===t?n.x=r.x:1===t&&(n.x=this.chart._xPixels()+this.chart._widthPixels())),t+=1):(this._deepMatch(i)&&(0===e?n.y=r.y:1===e&&(n.y=this.chart._yPixels())),e+=1)},this),n},this._getTooltipFontSize=function(){return this.tooltipFontSize&&"auto"!==this.tooltipFontSize.toString().toLowerCase()?isNaN(this.tooltipFontSize)?this.tooltipFontSize:this.tooltipFontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._isStacked=function(){return this.stacked&&(this.x._hasCategories()||this.y._hasCategories())},this.addEventHandler=function(e,t){this._eventHandlers.push({event:e,handler:t})},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getTooltipText=function(e){var t=[];return null!==this.categoryFields&&void 0!==this.categoryFields&&this.categoryFields.length>0&&this.categoryFields.forEach(function(n,r){null!==n&&void 0!==n&&null!==e.aggField[r]&&void 0!==e.aggField[r]&&t.push(n+(e.aggField[r]!==n?": "+e.aggField[r]:""))},this),this.p?(this.x&&this.x._hasCategories()&&this.x._getTooltipText(t,e),this.y&&this.y._hasCategories()&&this.y._getTooltipText(t,e),this.z&&this.z._hasCategories()&&this.z._getTooltipText(t,e),this.p._getTooltipText(t,e)):(this.x&&this.x._getTooltipText(t,e),this.y&&this.y._getTooltipText(t,e),this.z&&this.z._getTooltipText(t,e)),this.c&&this.c._getTooltipText(t,e),t.filter(function(e,n){return t.indexOf(e)===n})}},t.storyboard=function(e,t){null!==t&&void 0!==t&&(t=[].concat(t)),this.chart=e,this.categoryFields=t,this.autoplay=!0,this.frameDuration=3e3,this.storyLabel=null,this.onTick=null,this.fontSize="10px",this.fontFamily="sans-serif",this._frame=0,this._animationTimer=null,this._categories=[],this._cachedCategoryFields=[],this._orderRules=[],this._drawText=function(){var t=this,n=0;t.storyLabel||(t.chart.axes.forEach(function(e){"x"===e.position&&(n+=1)},t),t.storyLabel=t.chart._group.append("text").attr("class","dimple-storyboard-label").attr("opacity",1).attr("x",t.chart._xPixels()+.01*t.chart._widthPixels()).attr("y",t.chart._yPixels()+(t.chart._heightPixels()/35>10?t.chart._heightPixels()/35:10)*(n>1?1.25:-1)).call(function(n){e.noFormats||n.style("font-family",t.fontFamily).style("font-size",t._getFontSize())})),t.storyLabel.text(t.categoryFields.join("\\")+": "+t.getFrameValue())},this._getCategories=function(){return this._categoryFields!==this._cachedCategoryFields&&(this._categories=[],this.chart._getAllData().forEach(function(e){var t="";null!==this.categoryFields&&(this.categoryFields.forEach(function(n,r){r>0&&(t+="/"),t+=e[n]},this),-1===this._categories.indexOf(t)&&(this._categories.push(t),this._categories.length))},this),this._cachedCategoryFields=this._categoryFields),this._categories},this._getFontSize=function(){return this.fontSize&&"auto"!==this.fontSize.toString().toLowerCase()?isNaN(this.fontSize)?this.fontSize:this.fontSize+"px":(this.chart._heightPixels()/35>10?this.chart._heightPixels()/35:10)+"px"},this._goToFrameIndex=function(e){this._frame=e%this._getCategories().length,this.chart.draw(this.frameDuration/2)},this.addOrderRule=function(e,t){this._orderRules.push({ordering:e,desc:t})},this.getFrameValue=function(){var e=null;return this._frame>=0&&this._getCategories().length>this._frame&&(e=this._getCategories()[this._frame]),e},this.goToFrame=function(e){if(this._getCategories().length>0){var t=this._getCategories().indexOf(e);this._goToFrameIndex(t)}},this.pauseAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null)},this.startAnimation=function(){null===this._animationTimer&&(null!==this.onTick&&this.onTick(this.getFrameValue()),this._animationTimer=window.setInterval(function(e){return function(){e._goToFrameIndex(e._frame+1),null!==e.onTick&&e.onTick(e.getFrameValue()),e._drawText(e.frameDuration/2)}}(this),this.frameDuration))},this.stopAnimation=function(){null!==this._animationTimer&&(window.clearInterval(this._animationTimer),this._animationTimer=null,this._frame=0)}},t.aggregateMethod.avg=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),e.count=null===e.count||void 0===e.count?1:parseFloat(e.count),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),t.count=null===t.count||void 0===t.count?1:parseFloat(t.count),(e.value*e.count+t.value*t.count)/(e.count+t.count)},t.aggregateMethod.count=function(e,t){return e.count=null===e.count||void 0===e.count?0:parseFloat(e.count),t.count=null===t.count||void 0===t.count?0:parseFloat(t.count),e.count+t.count},t.aggregateMethod.max=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value>t.value?e.value:t.value},t.aggregateMethod.min=function(e,t){return null===e.value?parseFloat(t.value):parseFloat(e.value)<parseFloat(t.value)?parseFloat(e.value):parseFloat(t.value)},t.aggregateMethod.sum=function(e,t){return e.value=null===e.value||void 0===e.value?0:parseFloat(e.value),t.value=null===t.value||void 0===t.value?0:parseFloat(t.value),e.value+t.value},t.plot.area={stacked:!0,grouped:!0,supportedAxes:["x","y","c"],draw:function(n,r,i){var o,a,s,l,u,c,d,f,p,h,g,m,v,y,b,x,w,_,C,k,S,$,M,T,D=r._positionData,E=[],L=null,A="dimple-series-"+n.series.indexOf(r),R=r.x._hasCategories()||r.y._hasCategories()?0:1,P=!1,F={},O=[],N=[],I=function(){return function(n,r,i,o){e.select(r).style("opacity",1),t._showPointTooltip(n,r,i,o)}},j=function(n){return function(r,i,o,a){e.select(i).style("opacity",a.lineMarkers||n.data.length<2?t._helpers.opacity(r,o,a):0),t._removeTooltip(r,i,o,a)}},Y=function(e,o){t._drawMarkers(e,n,r,i,A,P,I(),j(e),o)},z=function(e,i){var o;return"step"===r.interpolation&&r[e]._hasCategories()?(o=t._helpers[e](i,n,r)+("y"===e?t._helpers.height(i,n,r):0),r[e].categoryFields.length<2&&(o+=("y"===e?1:-1)*t._helpers[e+"Gap"](n,r))):o=t._helpers["c"+e](i,n,r),parseFloat(o)},H=function(n,i){var o=e.line().x(function(e){return r.x._hasCategories()||!i?e.x:r.x[i]}).y(function(e){return r.y._hasCategories()||!i?e.y:r.y[i]});return t._interpolate(o,n),o},V=function(e,t){return parseFloat(e)-parseFloat(t)},B=function(e,t){return parseFloat(e.x)-parseFloat(t.x)};for(o="step"===r.interpolation?"step-after":r.interpolation,g=t._getSeriesOrder(r.data||n.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(P=!0),r.x._hasCategories()?(M="x",T="y"):r.y._hasCategories()&&(M="y",T="x"),a=0;a<D.length;a+=1){for(u=[],d=-1,l=R;l<D[a].aggField.length;l+=1)u.push(D[a].aggField[l]);for(c=t._createClass(u),l=0;l<E.length;l+=1)if(E[l].keyString===c){d=l;break}-1===d&&(d=E.length,E.push({key:u,keyString:c,color:"white",data:[],points:[],area:{},entry:{},exit:{},group:M&&D[a][M+"Field"]&&D[a][M+"Field"].length>=2?D[a][M+"Field"][0]:"All"})),E[d].data.push(D[a])}for(g&&E.sort(function(e,n){return t._arrayIndexCompare(g,e.key,n.key)}),a=0;a<E.length;a+=1){for(E[a].data.sort(t._getSeriesSortPredicate(n,r,g)),s=0;s<E[a].data.length;s+=1)E[a].points.push({x:z("x",E[a].data[s]),y:z("y",E[a].data[s])}),M&&(F[E[a].group]||(F[E[a].group]={}),F[E[a].group][E[a].points[E[a].points.length-1][M]]=r[T]._origin);m=E[a].points,"step"===r.interpolation&&m.length>1&&M&&(r.x._hasCategories()?(m.push({x:2*m[m.length-1].x-m[m.length-2].x,y:m[m.length-1].y}),F[E[a].group][m[m.length-1][M]]=r[T]._origin):r.y._hasCategories()&&(m=[{x:m[0].x,y:2*m[0].y-m[1].y}].concat(m),F[E[a].group][m[0][M]]=r[T]._origin,E[a].points=m))}for(b in F)if(F.hasOwnProperty(b)){O[b]=[];for(x in F[b])F[b].hasOwnProperty(x)&&O[b].push(parseFloat(x));O[b].sort(V)}for(a=0;a<E.length;a+=1){if(m=E[a].points,w=E[a].group,v=[],N=[],P&&t._addGradient(E[a].key,"fill-area-gradient-"+E[a].keyString,r.x._hasCategories()?r.x:r.y,D,n,i,"fill"),O[w]&&O[w].length>0)for(s=0,l=0;s<O[w].length;s+=1)O[w][s]>=m[0][M]&&O[w][s]<=m[m.length-1][M]&&((y={})[M]=O[w][s],y[T]=F[w][O[w][s]],v.push(y),m[l][M]>O[w][s]?N.push(y):(N.push(m[l]),F[E[a].group][O[w][s]]=m[l][T],l+=1));else if(r._orderRules&&r._orderRules.length>0)N=m.concat(m[0]);else{m=m.sort(B),N.push(m[0]),$=0;do{$=function(e,t,n){var r,i,o=t[t.length-1],a=9999,s=o;for(r=0;r<e.length;r+=1)e[r].x===o.x&&e[r].y===o.y||(i=180-Math.atan2(e[r].x-o.x,e[r].y-o.y)*(180/Math.PI))>n&&i<a&&(s=e[r],a=i);return t.push(s),a}(m,N,$)}while(N.length<=m.length&&(N[0].x!==N[N.length-1].x||N[0].y!==N[N.length-1].y))}v=v.reverse(),_=H(o,"_previousOrigin")(N),C=H("step-after"===o?"step-before":"step-before"===o?"step-after":o,"_previousOrigin")(v),S=-1===(k=H("linear","_previousOrigin")(N)).indexOf("L")?void 0:k.indexOf("L"),E[a].entry=_+(C&&C.length>0?"L"+C.substring(1):"")+(k&&k.length>0?"L"+k.substring(1,S):0),_=H(o)(N),C=H("step-after"===o?"step-before":"step-before"===o?"step-after":o)(v),S=-1===(k=H("linear")(N)).indexOf("L")?void 0:k.indexOf("L"),E[a].update=_+(C&&C.length>0?"L"+C.substring(1):"")+(k&&k.length>0?"L"+k.substring(1,S):0),_=H(o,"_origin")(N),C=H("step-after"===o?"step-before":"step-before"===o?"step-after":o,"_origin")(v),S=-1===(k=H("linear","_origin")(N)).indexOf("L")?void 0:k.indexOf("L"),E[a].exit=_+(C&&C.length>0?"L"+C.substring(1):"")+(k&&k.length>0?"L"+k.substring(1,S):0),E[a].color=n.getColor(E[a].key.length>0?E[a].key[E[a].key.length-1]:"All"),E[a].css=n.getClass(E[a].key.length>0?E[a].key[E[a].key.length-1]:"All")}n._tooltipGroup&&n._tooltipGroup.remove(),f=(L=r.shapes?r.shapes.data(E,function(e){return e.key}):r._group.selectAll("."+A).data(E,function(e){return e.key})).enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return A+" dimple-line "+e.keyString+" "+n.customClassList.areaSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(e){n.noFormats||e.attr("opacity",function(e){return P?1:e.color.opacity}).style("fill",function(e){return P?"url(#"+t._createClass(["fill-area-gradient-"+e.keyString])+")":e.color.fill}).style("stroke",function(e){return P?"url(#"+t._createClass(["stroke-area-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",r.lineWeight)}).each(function(e){e.markerData=e.data,Y(e,this)}),p=n._handleTransition(L.merge(f),i,n).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,Y(e,this)}),h=n._handleTransition(L.exit(),i,n).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],Y(e,this)}),t._postDrawHandling(r,p,h,i),r.shapes=r._group.selectAll("."+A)}},t.plot.bar={stacked:!0,grouped:!1,supportedAxes:["x","y","c"],draw:function(e,n,r){var i,o,a,s=n._positionData,l=null,u=["dimple-series-"+e.series.indexOf(n),"dimple-bar"],c=!n._isStacked()&&n.x._hasMeasure(),d=!n._isStacked()&&n.y._hasMeasure(),f="none";n.x._hasCategories()&&n.y._hasCategories()?f="both":n.x._hasCategories()?f="x":n.y._hasCategories()&&(f="y"),e._tooltipGroup&&e._tooltipGroup.remove(),i=(l=n.shapes?n.shapes.data(s,function(e){return e.key}):n._group.selectAll("."+u.join(".")).data(s,function(e){return e.key})).enter().append("rect").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(n){var r=[];return r=r.concat(n.aggField),r=r.concat(n.xField),r=r.concat(n.yField),u.join(" ")+" "+t._createClass(r)+" "+e.customClassList.barSeries+" "+t._helpers.css(n,e)}).attr("x",function(r){var i=n.x._previousOrigin;return"x"===f?i=t._helpers.x(r,e,n):"both"===f&&(i=t._helpers.cx(r,e,n)),i}).attr("y",function(r){var i=n.y._previousOrigin;return"y"===f?i=t._helpers.y(r,e,n):"both"===f&&(i=t._helpers.cy(r,e,n)),i}).attr("width",function(r){return"x"===f?t._helpers.width(r,e,n):0}).attr("height",function(r){return"y"===f?t._helpers.height(r,e,n):0}).on("mouseover",function(r){t._showBarTooltip(r,this,e,n)}).on("mouseleave",function(r){t._removeTooltip(r,this,e,n)}).call(function(r){e.noFormats||r.attr("opacity",function(r){return t._helpers.opacity(r,e,n)}).style("fill",function(r){return t._helpers.fill(r,e,n)}).style("stroke",function(r){return t._helpers.stroke(r,e,n)})}),o=e._handleTransition(l.merge(i),r,e,n).attr("x",function(r){return c?t._helpers.cx(r,e,n)-n.x.floatingBarWidth/2:t._helpers.x(r,e,n)}).attr("y",function(r){return d?t._helpers.cy(r,e,n)-n.y.floatingBarWidth/2:t._helpers.y(r,e,n)}).attr("width",function(r){return c?n.x.floatingBarWidth:t._helpers.width(r,e,n)}).attr("height",function(r){return d?n.y.floatingBarWidth:t._helpers.height(r,e,n)}).call(function(r){e.noFormats||r.attr("fill",function(r){return t._helpers.fill(r,e,n)}).attr("stroke",function(r){return t._helpers.stroke(r,e,n)})}),a=e._handleTransition(l.exit(),r,e,n).attr("x",function(r){var i=n.x._origin;return"x"===f?i=t._helpers.x(r,e,n):"both"===f&&(i=t._helpers.cx(r,e,n)),i}).attr("y",function(r){var i=n.y._origin;return"y"===f?i=t._helpers.y(r,e,n):"both"===f&&(i=t._helpers.cy(r,e,n)),i}).attr("width",function(r){return"x"===f?t._helpers.width(r,e,n):0}).attr("height",function(r){return"y"===f?t._helpers.height(r,e,n):0}),t._postDrawHandling(n,o,a,r),n.shapes=n._group.selectAll("."+u.join("."))}},t.plot.bubble={stacked:!1,grouped:!1,supportedAxes:["x","y","z","c"],draw:function(e,n,r){var i,o,a,s=n._positionData,l=null,u=["dimple-series-"+e.series.indexOf(n),"dimple-bubble"];e._tooltipGroup&&e._tooltipGroup.remove(),i=(l=n.shapes?n.shapes.data(s,function(e){return e.key}):n._group.selectAll("."+u.join(".")).data(s,function(e){return e.key})).enter().append("circle").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(n){var r=[];return r=r.concat(n.aggField),r=r.concat(n.xField),r=r.concat(n.yField),r=r.concat(n.zField),u.join(" ")+" "+t._createClass(r)+" "+e.customClassList.bubbleSeries+" "+t._helpers.css(n,e)}).attr("cx",function(r){return n.x._hasCategories()?t._helpers.cx(r,e,n):n.x._previousOrigin}).attr("cy",function(r){return n.y._hasCategories()?t._helpers.cy(r,e,n):n.y._previousOrigin}).attr("r",0).on("mouseover",function(r){t._showPointTooltip(r,this,e,n)}).on("mouseleave",function(r){t._removeTooltip(r,this,e,n)}).call(function(r){e.noFormats||r.attr("opacity",function(r){return t._helpers.opacity(r,e,n)}).style("fill",function(r){return t._helpers.fill(r,e,n)}).style("stroke",function(r){return t._helpers.stroke(r,e,n)})}),o=e._handleTransition(l.merge(i),r,e,n).attr("cx",function(r){return t._helpers.cx(r,e,n)}).attr("cy",function(r){return t._helpers.cy(r,e,n)}).attr("r",function(r){return t._helpers.r(r,e,n)}).call(function(r){e.noFormats||r.attr("fill",function(r){return t._helpers.fill(r,e,n)}).attr("stroke",function(r){return t._helpers.stroke(r,e,n)})}),a=e._handleTransition(l.exit(),r,e,n).attr("r",0).attr("cx",function(r){return n.x._hasCategories()?t._helpers.cx(r,e,n):n.x._origin}).attr("cy",function(r){return n.y._hasCategories()?t._helpers.cy(r,e,n):n.y._origin}),t._postDrawHandling(n,o,a,r),n.shapes=n._group.selectAll("."+u.join("."))}},t.plot.line={stacked:!1,grouped:!0,supportedAxes:["x","y","c"],draw:function(n,r,i){var o,a,s,l,u,c,d,f,p,h,g,m=r._positionData,v=[],y=null,b="dimple-series-"+n.series.indexOf(r),x=r.x._hasCategories()||r.y._hasCategories()?0:1,w=!1,_=function(){return function(n,r,i,o){e.select(r).style("opacity",1),t._showPointTooltip(n,r,i,o)}},C=function(n){return function(r,i,o,a){e.select(i).style("opacity",a.lineMarkers||n.data.length<2?t._helpers.opacity(r,o,a):0),t._removeTooltip(r,i,o,a)}},k=function(e,o){t._drawMarkers(e,n,r,i,b,w,_(),C(e),o)},S=function(e,i){var o;return"step"===r.interpolation&&r[e]._hasCategories()?(r.barGap=0,r.clusterBarGap=0,o=t._helpers[e](i,n,r)+("y"===e?t._helpers.height(i,n,r):0)):o=t._helpers["c"+e](i,n,r),parseFloat(o.toFixed(1))},$=function(n,i){var o=e.line().x(function(e){return r.x._hasCategories()||!i?e.x:r.x[i]}).y(function(e){return r.y._hasCategories()||!i?e.y:r.y[i]});return t._interpolate(o,n),o};for(o="step"===r.interpolation?"step-after":r.interpolation,g=t._getSeriesOrder(r.data||n.data,r),r.c&&(r.x._hasCategories()&&r.y._hasMeasure()||r.y._hasCategories()&&r.x._hasMeasure())&&(w=!0),a=0;a<m.length;a+=1){for(u=[],d=-1,l=x;l<m[a].aggField.length;l+=1)u.push(m[a].aggField[l]);for(c=t._createClass(u),l=0;l<v.length;l+=1)if(v[l].keyString===c){d=l;break}-1===d&&(d=v.length,v.push({key:u,keyString:c,color:"white",data:[],markerData:[],points:[],line:{},entry:{},exit:{}})),v[d].data.push(m[a])}for(g&&v.sort(function(e,n){return t._arrayIndexCompare(g,e.key,n.key)}),a=0;a<v.length;a+=1){for(v[a].data.sort(t._getSeriesSortPredicate(n,r,g)),w&&t._addGradient(v[a].key,"fill-line-gradient-"+v[a].keyString,r.x._hasCategories()?r.x:r.y,m,n,i,"fill"),s=0;s<v[a].data.length;s+=1)v[a].points.push({x:S("x",v[a].data[s]),y:S("y",v[a].data[s])});"step"===r.interpolation&&v[a].points.length>1&&(r.x._hasCategories()?v[a].points.push({x:2*v[a].points[v[a].points.length-1].x-v[a].points[v[a].points.length-2].x,y:v[a].points[v[a].points.length-1].y}):r.y._hasCategories()&&(v[a].points=[{x:v[a].points[0].x,y:2*v[a].points[0].y-v[a].points[1].y}].concat(v[a].points))),v&&v[a]&&v[a].points&&1===v[a].points.length&&v[a].points.push({x:v[a].points[0].x,y:v[a].points[0].y}),v[a].entry=$(o,"_previousOrigin")(v[a].points),v[a].update=$(o)(v[a].points),v[a].exit=$(o,"_origin")(v[a].points),v[a].color=n.getColor(v[a].key.length>0?v[a].key[v[a].key.length-1]:"All"),v[a].css=n.getClass(v[a].key.length>0?v[a].key[v[a].key.length-1]:"All")}n._tooltipGroup&&n._tooltipGroup.remove(),f=(y=r.shapes?r.shapes.data(v,function(e){return e.key}):r._group.selectAll("."+b).data(v,function(e){return e.key})).enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){return b+" dimple-line "+e.keyString+" "+n.customClassList.lineSeries+" "+e.css}).attr("d",function(e){return e.entry}).call(function(e){n.noFormats||e.attr("opacity",function(e){return w?1:e.color.opacity}).style("fill","none").style("stroke",function(e){return w?"url(#"+t._createClass(["fill-line-gradient-"+e.keyString])+")":e.color.stroke}).style("stroke-width",r.lineWeight)}).each(function(e){e.markerData=e.data,k(e,this)}),p=n._handleTransition(y.merge(f),i,n).attr("d",function(e){return e.update}).each(function(e){e.markerData=e.data,k(e,this)}),h=n._handleTransition(y.exit(),i,n).attr("d",function(e){return e.exit}).each(function(e){e.markerData=[],k(e,this)}),t._postDrawHandling(r,p,h,i),r.shapes=r._group.selectAll("."+b)}},t.plot.pie={stacked:!1,grouped:!1,supportedAxes:["x","y","c","z","p"],draw:function(n,r,i){var o,a,s,l=r._positionData,u=null,c=["dimple-series-"+n.series.indexOf(r),"dimple-pie"],d=function(e){return r.x&&r.y?t._helpers.r(e,n,r):n._widthPixels()<n._heightPixels()?n._widthPixels()/2:n._heightPixels()/2},f=function(e){var n=d(e);return r.outerRadius&&(n=t._parsePosition(r.outerRadius,n)),Math.max(n,0)},p=function(e){var n=0;return r.innerRadius&&(n=t._parsePosition(r.innerRadius,d(e))),Math.max(n,0)},h=function(t){return e.arc().innerRadius(p(t)).outerRadius(f(t))(t)},g=function(t){t.innerRadius=p(t),t.outerRadius=f(t);var n,r=e.interpolate(this._current,t);return n=e.arc().innerRadius(function(e){return e.innerRadius}).outerRadius(function(e){return e.outerRadius}),this._current=r(0),function(e){return n(r(e))}},m=function(e){return function(i){var o,a;return r.x&&r.y?(o=!e||r.x._hasCategories()?t._helpers.cx(i,n,r):r.x._previousOrigin,a=!e||r.y._hasCategories()?t._helpers.cy(i,n,r):r.y._previousOrigin):(o=n._xPixels()+n._widthPixels()/2,a=n._yPixels()+n._heightPixels()/2),"translate("+o+","+a+")"}};n._tooltipGroup&&n._tooltipGroup.remove(),o=(u=r.shapes?r.shapes.data(l,function(e){return e.key}):r._group.selectAll("."+c.join(".")).data(l,function(e){return e.key})).enter().append("path").attr("id",function(e){return t._createClass([e.key])}).attr("class",function(e){var r=[];return r=r.concat(e.aggField),r=r.concat(e.pField),c.join(" ")+" "+t._createClass(r)+" "+n.customClassList.pieSeries+" "+t._helpers.css(e,n)}).attr("d",h).on("mouseover",function(e){t._showBarTooltip(e,this,n,r)}).on("mouseleave",function(e){t._removeTooltip(e,this,n,r)}).call(function(e){n.noFormats||e.attr("opacity",function(e){return t._helpers.opacity(e,n,r)}).style("fill",function(e){return t._helpers.fill(e,n,r)}).style("stroke",function(e){return t._helpers.stroke(e,n,r)})}).attr("transform",m(!0)).each(function(e){this._current=e,e.innerRadius=p(e),e.outerRadius=f(e)}),a=n._handleTransition(u.merge(o),i,n,r).call(function(e){i&&i>0?e.attrTween("d",g):e.attr("d",h),n.noFormats||e.attr("fill",function(e){return t._helpers.fill(e,n,r)}).attr("stroke",function(e){return t._helpers.stroke(e,n,r)})}).attr("transform",m(!1)),s=n._handleTransition(u.exit(),i,n,r).attr("transform",m(!0)).attr("d",h),t._postDrawHandling(r,a,s,i),r.shapes=r._group.selectAll("."+c.join("."))}},t._addGradient=function(e,n,r,i,o,a,s){var l=[].concat(e),u=o.svg.select("#"+t._createClass([n])),c=[],d=r.position+"Field",f=!0,p=[];i.forEach(function(e){-1===c.indexOf(e[d])&&e.aggField.join("_")===l.join("_")&&c.push(e[d])},this),c=c.sort(function(e,t){return r._scale(e)-r._scale(t)}),null===u.node()&&(f=!1,u=o.svg.append("defs").append("linearGradient").attr("id",t._createClass([n])).attr("gradientUnits","userSpaceOnUse").attr("x1","x"===r.position?r._scale(c[0])+o._widthPixels()/c.length/2:0).attr("y1","y"===r.position?r._scale(c[0])-o._heightPixels()/c.length/2:0).attr("x2","x"===r.position?r._scale(c[c.length-1])+o._widthPixels()/c.length/2:0).attr("y2","y"===r.position?r._scale(c[c.length-1])-o._heightPixels()/c.length/2:0)),c.forEach(function(e,t){var n={},r=0;for(r=0;r<i.length;r+=1)if(i[r].aggField.join("_")===l.join("_")&&i[r][d].join("_")===e.join("_")){n=i[r];break}p.push({offset:Math.round(t/(c.length-1)*100)+"%",color:n[s]})},this),f?o._handleTransition(u.selectAll("stop").data(p),a,o).attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color}):u.selectAll("stop").data(p).enter().append("stop").attr("offset",function(e){return e.offset}).attr("stop-color",function(e){return e.color})},t._arrayIndexCompare=function(e,t,n){var r,i,o,a,s,l;for(i=0;i<e.length;i+=1){for(a=!0,s=!0,l=[].concat(e[i]),o=0;o<t.length;o+=1)a=a&&t[o]===l[o];for(o=0;o<n.length;o+=1)s=s&&n[o]===l[o];if(a||s){r=a&&s?0:a?-1:1;break}}return r},t._createClass=function(e){var t,n,r=[];if(n=function(e){var t=e.charCodeAt(0),n="-";return t>=65&&t<=90&&(n=e.toLowerCase()),n},e.length>0)for(t=0;t<e.length;t+=1)e[t]&&r.push("dimple-"+e[t].toString().replace(/[^a-z0-9]/g,n));else r=["dimple-all"];return r.join(" ")},t._drawMarkerBacks=function(n,r,i,o,a,s){var l,u,c,d=["dimple-marker-back",a,n.keyString];i.lineMarkers&&(l=null===i._markerBacks||void 0===i._markerBacks||void 0===i._markerBacks[n.keyString]?i._group.selectAll("."+d.join(".")).data(n.markerData):i._markerBacks[n.keyString].data(n.markerData,function(e){return e.key}),(c=s.nextSibling&&s.nextSibling.id?l.enter().insert("circle","#"+s.nextSibling.id):l.enter().append("circle")).attr("id",function(e){return t._createClass([e.key+" Marker Back"])}).attr("class",function(e){var n=[];return i.x._hasCategories()&&(n=n.concat(e.xField)),i.y._hasCategories()&&(n=n.concat(e.yField)),t._createClass(n)+" "+d.join(" ")}).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._previousOrigin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._previousOrigin}).attr("r",0).attr("fill","white").attr("stroke","none"),r._handleTransition(l.merge(c),o,r).attr("cx",function(e){return t._helpers.cx(e,r,i)}).attr("cy",function(e){return t._helpers.cy(e,r,i)}).attr("r",2+i.lineWeight),u=r._handleTransition(l.exit(),o,r).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._origin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._origin}).attr("r",0),0===o?u.remove():u.each("end",function(){e.select(this).remove()}),void 0!==i._markerBacks&&null!==i._markerBacks||(i._markerBacks={}),i._markerBacks[n.keyString]=l)},t._drawMarkers=function(n,r,i,o,a,s,l,u,c){var d,f,p,h=["dimple-marker",a,n.keyString];d=null===i._markers||void 0===i._markers||void 0===i._markers[n.keyString]?i._group.selectAll("."+h.join(".")).data(n.markerData):i._markers[n.keyString].data(n.markerData,function(e){return e.key}),(p=c.nextSibling&&c.nextSibling.id?d.enter().insert("circle","#"+c.nextSibling.id):d.enter().append("circle")).attr("id",function(e){return t._createClass([e.key+" Marker"])}).attr("class",function(e){var n=[],o=r.getClass(e.aggField.length>0?e.aggField[e.aggField.length-1]:"All");return i.x._hasCategories()&&(n=n.concat(e.xField)),i.y._hasCategories()&&(n=n.concat(e.yField)),t._createClass(n)+" "+h.join(" ")+" "+r.customClassList.lineMarker+" "+o}).on("mouseover",function(e){l(e,this,r,i)}).on("mouseleave",function(e){u(e,this,r,i)}).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._previousOrigin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._previousOrigin}).attr("r",0).attr("opacity",i.lineMarkers||n.data.length<2?n.color.opacity:0).call(function(e){r.noFormats||e.attr("fill","white").style("stroke-width",i.lineWeight).attr("stroke",function(e){return s?t._helpers.fill(e,r,i):n.color.stroke})}),r._handleTransition(d.merge(p),o,r).attr("cx",function(e){return t._helpers.cx(e,r,i)}).attr("cy",function(e){return t._helpers.cy(e,r,i)}).attr("r",2+i.lineWeight).attr("opacity",i.lineMarkers||n.data.length<2?n.color.opacity:0).call(function(e){r.noFormats||e.attr("fill","white").style("stroke-width",i.lineWeight).attr("stroke",function(e){return s?t._helpers.fill(e,r,i):n.color.stroke})}),f=r._handleTransition(d.exit(),o,r).attr("cx",function(e){return i.x._hasCategories()?t._helpers.cx(e,r,i):i.x._origin}).attr("cy",function(e){return i.y._hasCategories()?t._helpers.cy(e,r,i):i.y._origin}).attr("r",0),0===o?f.remove():f.each("end",function(){e.select(this).remove()}),void 0!==i._markers&&null!==i._markers||(i._markers={}),i._markers[n.keyString]=d,t._drawMarkerBacks(n,r,i,o,a,c)},t._ease=function(t,n){if(t&&n&&"[object String]"===Object.prototype.toString.call(n)){switch(n){case"linear":n=e.easeLinear;break;case"poly":n=e.easePoly;break;case"quad":n=e.easeQuad;break;case"cubic":n=e.easeCubic;break;case"sin":n=e.easeSin;break;case"exp":n=e.easeExp;break;case"circle":n=e.easeCircle;break;case"elastic":n=e.easeElastic;break;case"back":n=e.easeBack;break;case"bounce":n=e.easeBounce}t.ease(n)}},t._getOrderedList=function(e,n,r){var i,o=[],a=[],s=[].concat(n),l=[].concat(n),u=[];return null!==r&&void 0!==r&&(u=u.concat(r)),(u=u.concat({ordering:s,desc:!1})).forEach(function(t){var n,r=[],i=[];if("function"==typeof t.ordering){if(e&&e.length>0)for(n in e[0])e[0].hasOwnProperty(n)&&-1===l.indexOf(n)&&l.push(n)}else if(t.ordering instanceof Array){for(n=0;n<t.ordering.length;n+=1)e&&e.length>0&&e[0].hasOwnProperty(t.ordering[n])&&i.push(t.ordering[n]),r.push(t.ordering[n]);i.length>r.length/2?l.concat(i):t.values=r}else l.push(t.ordering)},this),i=t._rollUp(e,s,l),u.length>=1&&(u.forEach(function(e){var t=null!==e.desc&&void 0!==e.desc&&e.desc,n=e.ordering,r=[],i=function(e){var t,n=0;for(t=0;t<e.length;t+=1){if(isNaN(e[t])){n=void 0;break}n+=parseFloat(e[t])}return n},a=function(e,t){var n=0,r=i(e),o=i(t);return isNaN(r)||isNaN(o)?isNaN(Date.parse(e[0]))||isNaN(Date.parse(t[0]))?e[0]<t[0]?n=-1:e[0]>t[0]&&(n=1):n=Date.parse(e[0])-Date.parse(t[0]):n=parseFloat(r)-parseFloat(o),n};"function"==typeof n?o.push(function(e,r){return(t?-1:1)*n(e,r)}):e.values&&e.values.length>0?(e.values.forEach(function(e){r.push([].concat(e).join("|"))},this),o.push(function(e,n){var i,o,a,l="",u="";for(a=0;a<s.length;a+=1)a>0&&(l+="|",u+="|"),l+=e[s[a]],u+=n[s[a]];return i=r.indexOf(l),o=r.indexOf(u),i=i<0?t?-1:r.length:i,o=o<0?t?-1:r.length:o,(t?-1:1)*(i-o)})):[].concat(e.ordering).forEach(function(e){o.push(function(n,r){var i=0;return void 0!==n[e]&&void 0!==r[e]&&(i=a([].concat(n[e]),[].concat(r[e]))),(t?-1:1)*i})})}),i.sort(function(e,t){for(var n=0,r=0;n<o.length&&0===r;)r=o[n](e,t),n+=1;return r}),i.forEach(function(e){var t,n=[];if(1===s.length)a.push(e[s[0]]);else{for(t=0;t<s.length;t+=1)n.push(e[s[t]]);a.push(n)}},this)),a},t._getSeriesOrder=function(e,n){var r=[].concat(n._orderRules),i=n.categoryFields,o=[];return null!==i&&void 0!==i&&i.length>0&&(null!==n.c&&void 0!==n.c&&n.c._hasMeasure()&&r.push({ordering:n.c.measure,desc:!0}),n.x._hasMeasure()&&r.push({ordering:n.x.measure,desc:!0}),n.y._hasMeasure()&&r.push({ordering:n.y.measure,desc:!0}),o=t._getOrderedList(e,i,r)),o},t._getSeriesSortPredicate=function(e,n,r){return function(i,o){var a=0;return n.x._hasCategories()&&(a=t._helpers.cx(i,e,n)-t._helpers.cx(o,e,n)),0===a&&n.y._hasCategories()&&(a=t._helpers.cy(i,e,n)-t._helpers.cy(o,e,n)),0===a&&r&&(a=t._arrayIndexCompare(r,i.aggField,o.aggField)),a}},t._helpers={cx:function(e,n,r){return null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(e.cx):r.x._hasCategories()&&r.x.categoryFields.length>=2?r.x._scale(e.cx)+t._helpers.xGap(n,r)+(e.xOffset+.5)*((n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))*e.width):r.x._scale(e.cx)+n._widthPixels()/r.x._max/2},cy:function(e,n,r){return null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(e.cy):null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2?r.y._scale(e.cy)-n._heightPixels()/r.y._max+t._helpers.yGap(n,r)+(e.yOffset+.5)*((n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))*e.height):r.y._scale(e.cy)-n._heightPixels()/r.y._max/2},r:function(e,t,n){var r=0,i=1;return null===n.z||void 0===n.z?r=n.radius&&"auto"!==n.radius?n.radius:5:(n.radius&&"auto"!==n.radius&&n.radius>1&&(i=n.radius/n.z._scale(n.z._max)),r=n.z._hasMeasure()?n.z._scale(e.r)*i:n.z._scale(t._heightPixels()/100)*i),r},xGap:function(e,t){var n=0;return(null===t.x.measure||void 0===t.x.measure)&&t.barGap>0&&(n=e._widthPixels()/t.x._max*(t.barGap>.99?.99:t.barGap)/2),n},xClusterGap:function(e,n,r){var i=0;return null!==r.x.categoryFields&&void 0!==r.x.categoryFields&&r.x.categoryFields.length>=2&&r.clusterBarGap>0&&!r.x._hasMeasure()&&(i=e.width*(n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),i},yGap:function(e,t){var n=0;return(null===t.y.measure||void 0===t.y.measure)&&t.barGap>0&&(n=e._heightPixels()/t.y._max*(t.barGap>.99?.99:t.barGap)/2),n},yClusterGap:function(e,n,r){var i=0;return null!==r.y.categoryFields&&void 0!==r.y.categoryFields&&r.y.categoryFields.length>=2&&r.clusterBarGap>0&&!r.y._hasMeasure()&&(i=e.height*(n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))*(r.clusterBarGap>.99?.99:r.clusterBarGap)/2),i},x:function(e,n,r){return r.x._hasTimeField()?r.x._scale(e.x)-t._helpers.width(e,n,r)/2:null!==r.x.measure&&void 0!==r.x.measure?r.x._scale(e.x):r.x._scale(e.x)+t._helpers.xGap(n,r)+e.xOffset*(t._helpers.width(e,n,r)+2*t._helpers.xClusterGap(e,n,r))+t._helpers.xClusterGap(e,n,r)},y:function(e,n,r){return r.y._hasTimeField()?r.y._scale(e.y)-t._helpers.height(e,n,r)/2:null!==r.y.measure&&void 0!==r.y.measure?r.y._scale(e.y):r.y._scale(e.y)-n._heightPixels()/r.y._max+t._helpers.yGap(n,r)+e.yOffset*(t._helpers.height(e,n,r)+2*t._helpers.yClusterGap(e,n,r))+t._helpers.yClusterGap(e,n,r)},width:function(e,n,r){return null!==r.x.measure&&void 0!==r.x.measure?Math.abs(r.x._scale(e.x<0?e.x-e.width:e.x+e.width)-r.x._scale(e.x)):r.x._hasTimeField()?r.x.floatingBarWidth:e.width*(n._widthPixels()/r.x._max-2*t._helpers.xGap(n,r))-2*t._helpers.xClusterGap(e,n,r)},height:function(e,n,r){return r.y._hasTimeField()?r.y.floatingBarWidth:null!==r.y.measure&&void 0!==r.y.measure?Math.abs(r.y._scale(e.y)-r.y._scale(e.y<=0?e.y+e.height:e.y-e.height)):e.height*(n._heightPixels()/r.y._max-2*t._helpers.yGap(n,r))-2*t._helpers.yClusterGap(e,n,r)},opacity:function(e,t,n){return null!==n.c&&void 0!==n.c?e.opacity:t.getColor(e.aggField.slice(-1)[0]).opacity},fill:function(e,t,n){return null!==n.c&&void 0!==n.c?e.fill:t.getColor(e.aggField.slice(-1)[0]).fill},stroke:function(e,t,n){return null!==n.c&&void 0!==n.c?e.stroke:t.getColor(e.aggField.slice(-1)[0]).stroke},css:function(e,t){return t.getClass(e.aggField.slice(-1)[0])}},t._interpolate=function(t,n){if(t&&n){if("[object String]"===Object.prototype.toString.call(n))switch(n){case"linear":n=e.curveLinear;break;case"linear-closed":n=e.curveLinearClosed;break;case"step":n=e.curveStep;break;case"step-before":n=e.curveStepBefore;break;case"step-after":n=e.curveStepAfter;break;case"basis":n=e.curveBasis;break;case"basis-open":n=e.curveBasisOpen;break;case"basis-closed":n=e.curveBasisClosed;break;case"bundle":n=e.curveBundle;break;case"cardinal":n=e.curveCardinal;break;case"cardinal-open":n=e.curveCardinalOpen;break;case"cardinal-closed":n=e.curveCardinalClosed;break;case"monotone":n=e.curveMonotoneX}t.curve(n)}},t._parentHeight=function(e){var t=e.getBoundingClientRect().height;return(!t||t<0)&&(t=e.clientHeight),t},t._parentWidth=function(e){var t=e.getBoundingClientRect().width;return(!t||t<0)&&(t=e.clientWidth),t},t._parsePosition=function(e,t){var n=0;return e&&e.toString().split(",").forEach(function(r){r&&(isNaN(r)?"%"===r.slice(-1)?n+=t*(parseFloat(r.slice(0,r.length-1))/100):"px"===r.slice(-2)?n+=parseFloat(r.slice(0,r.length-2)):n=e:n+=parseFloat(r))},this),n<0&&(n=t+n),n},t._parseXPosition=function(e,n){return t._parsePosition(e,t._parentWidth(n))},t._parseYPosition=function(e,n){return t._parsePosition(e,t._parentHeight(n))},t._postDrawHandling=function(e,t,n,r){0===r?(t.each(function(t,n){e.afterDraw&&e.afterDraw(this,t,n)}),n.remove()):(t.on("end",function(t,n){e.afterDraw&&e.afterDraw(this,t,n)}),n.call(function(){e.shapes&&e.shapes.exit().remove()}))},t._removeTooltip=function(e,t,n,r){n._tooltipGroup&&n._tooltipGroup.remove()},t._rollUp=function(e,t,n){var r=[];return t=null!==t&&void 0!==t?[].concat(t):[],e.forEach(function(e){var i=-1,o={},a=!0;r.forEach(function(n,r){-1===i&&(a=!0,t.forEach(function(t){a=a&&e[t]===n[t]},this),a&&(i=r))},this),-1!==i?o=r[i]:(t.forEach(function(t){o[t]=e[t]},this),r.push(o),i=r.length-1),n.forEach(function(n){-1===t.indexOf(n)&&(void 0===o[n]&&(o[n]=[]),o[n]=o[n].concat(e[n]))},this),r[i]=o},this),r},t._showBarTooltip=function(t,n,r,i){var o,a,s,l,u,c,d=e.select(n),f=d.node().getBBox().x,p=d.node().getBBox().y,h=d.node().getBBox().width,g=d.node().getBBox().height,m=d.attr("opacity"),v=d.attr("fill"),y=i._dropLineOrigin(),b=e.rgb(e.rgb(v).r+.6*(255-e.rgb(v).r),e.rgb(v).g+.6*(255-e.rgb(v).g),e.rgb(v).b+.6*(255-e.rgb(v).b)),x=e.rgb(e.rgb(v).r+.8*(255-e.rgb(v).r),e.rgb(v).g+.8*(255-e.rgb(v).g),e.rgb(v).b+.8*(255-e.rgb(v).b)),w=i.getTooltipText(t),_=0,C=0,k=0,S=function(e,t){var n=d.node().getCTM(),i=r.svg.node().createSVGPoint();return i.x=e||0,i.y=t||0,i.matrixTransform(n)};null!==r._tooltipGroup&&void 0!==r._tooltipGroup&&r._tooltipGroup.remove(),r._tooltipGroup=r.svg.append("g"),i.p||(c=i._isStacked()?1:h/2,i.x._hasCategories()||null===y.y||r._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+r.customClassList.tooltipDropLine).attr("x1",f<i.x._origin?f+c:f+h-c).attr("y1",p<y.y?p+g:p).attr("x2",f<i.x._origin?f+c:f+h-c).attr("y2",p<y.y?p+g:p).call(function(e){r.noFormats||e.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",m)}).transition().delay(375).duration(375).ease(e.easeLinear).attr("y2",p<y.y?y.y-1:y.y+1),c=i._isStacked()?1:g/2,i.y._hasCategories()||null===y.x||r._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+r.customClassList.tooltipDropLine).attr("x1",f<y.x?f+h:f).attr("y1",p<i.y._origin?p+c:p+g-c).attr("x2",f<y.x?f+h:f).attr("y2",p<i.y._origin?p+c:p+g-c).call(function(e){r.noFormats||e.style("fill","none").style("stroke",v).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",m)}).transition().delay(375).duration(375).ease(e.easeLinear).attr("x2",f<y.x?y.x-1:y.x+1)),a=(o=r._tooltipGroup.append("g")).append("rect").attr("class","dimple-tooltip "+r.customClassList.tooltipBox),o.selectAll(".dimple-dont-select-any").data(w).enter().append("text").attr("class","dimple-tooltip "+r.customClassList.tooltipLabel).text(function(e){return e}).call(function(e){r.noFormats||e.style("font-family",i.tooltipFontFamily).style("font-size",i._getTooltipFontSize())}),o.each(function(){C=this.getBBox().width>C?this.getBBox().width:C,k=this.getBBox().width>k?this.getBBox().height:k}),o.selectAll("text").attr("x",0).attr("y",function(){return(_+=this.getBBox().height)-this.getBBox().height/2}),a.attr("x",-5).attr("y",-5).attr("height",Math.floor(_+5)-.5).attr("width",C+10).attr("rx",5).attr("ry",5).call(function(e){r.noFormats||e.style("fill",x).style("stroke",b).style("stroke-width",2).style("opacity",.95)}),S(f+h+5+10+C).x<parseFloat(r.svg.node().getBBox().width)?(s=f+h+5+10,l=p+g/2-(_-(k-5))/2):S(f-(15+C)).x>0?(s=f-(15+C),l=p+g/2-(_-(k-5))/2):S(0,p+g+_+10+5).y<parseFloat(r.svg.node().getBBox().height)?(s=(s=(s=f+h/2-(10+C)/2)>0?s:10)+C<parseFloat(r.svg.node().getBBox().width)?s:parseFloat(r.svg.node().getBBox().width)-C-10,l=p+g+10):(s=(s=(s=f+h/2-(10+C)/2)>0?s:10)+C<parseFloat(r.svg.node().getBBox().width)?s:parseFloat(r.svg.node().getBBox().width)-C-10,l=p-_-(k-5)),u=S(s,l),o.attr("transform","translate("+u.x+" , "+u.y+")")},t._showPointTooltip=function(n,r,i,o){var a,s,l,u,c=e.select(r),d=parseFloat(c.attr("cx")),f=parseFloat(c.attr("cy")),p=parseFloat(c.attr("r")),h=t._helpers.opacity(n,i,o),g=c.attr("stroke"),m=o._dropLineOrigin(),v=e.rgb(e.rgb(g).r+.6*(255-e.rgb(g).r),e.rgb(g).g+.6*(255-e.rgb(g).g),e.rgb(g).b+.6*(255-e.rgb(g).b)),y=e.rgb(e.rgb(g).r+.8*(255-e.rgb(g).r),e.rgb(g).g+.8*(255-e.rgb(g).g),e.rgb(g).b+.8*(255-e.rgb(g).b)),b=0,x=0,w=0,_=o.getTooltipText(n);null!==i._tooltipGroup&&void 0!==i._tooltipGroup&&i._tooltipGroup.remove(),i._tooltipGroup=i.svg.append("g"),i._tooltipGroup.append("circle").attr("class","dimple-line-marker-circle "+i.customClassList.lineMarkerCircle).attr("cx",d).attr("cy",f).attr("r",p).call(function(e){i.noFormats||e.attr("opacity",0).style("fill","none").style("stroke",g).style("stroke-width",1)}).transition().duration(375).ease(e.easeLinear).attr("r",p+o.lineWeight+2).call(function(e){i.noFormats||e.attr("opacity",1).style("stroke-width",2)}),null!==m.y&&i._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+i.customClassList.tooltipDropLine).attr("x1",d).attr("y1",f<m.y?f+p+o.lineWeight+2:f-p-o.lineWeight-2).attr("x2",d).attr("y2",f<m.y?f+p+o.lineWeight+2:f-p-o.lineWeight-2).call(function(e){i.noFormats||e.style("fill","none").style("stroke",g).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",h)}).transition().delay(375).duration(375).ease(e.easeLinear).attr("y2",f<m.y?m.y-1:m.y+1),null!==m.x&&i._tooltipGroup.append("line").attr("class","dimple-tooltip-dropline "+i.customClassList.tooltipDropLine).attr("x1",d<m.x?d+p+o.lineWeight+2:d-p-o.lineWeight-2).attr("y1",f).attr("x2",d<m.x?d+p+o.lineWeight+2:d-p-o.lineWeight-2).attr("y2",f).call(function(e){i.noFormats||e.style("fill","none").style("stroke",g).style("stroke-width",2).style("stroke-dasharray","3, 3").style("opacity",h)}).transition().delay(375).duration(375).ease(e.easeLinear).attr("x2",d<m.x?m.x-1:m.x+1),s=(a=i._tooltipGroup.append("g")).append("rect").attr("class","dimple-tooltip "+i.customClassList.tooltipBox),a.selectAll(".dont-select-any").data(_).enter().append("text").attr("class","dimple-tooltip "+i.customClassList.tooltipLabel).text(function(e){return e}).call(function(e){i.noFormats||e.style("font-family",o.tooltipFontFamily).style("font-size",o._getTooltipFontSize())}),a.each(function(){x=this.getBBox().width>x?this.getBBox().width:x,w=this.getBBox().width>w?this.getBBox().height:w}),a.selectAll("text").attr("x",0).attr("y",function(){return(b+=this.getBBox().height)-this.getBBox().height/2}),s.attr("x",-5).attr("y",-5).attr("height",Math.floor(b+5)-.5).attr("width",x+10).attr("rx",5).attr("ry",5).call(function(e){i.noFormats||e.style("fill",y).style("stroke",v).style("stroke-width",2).style("opacity",.95)}),d+p+5+10+x<parseFloat(i.svg.node().getBBox().width)?(l=d+p+5+10,u=f-(b-(w-5))/2):d-p-(15+x)>0?(l=d-p-(15+x),u=f-(b-(w-5))/2):f+p+b+10+5<parseFloat(i.svg.node().getBBox().height)?(l=(l=(l=d-(10+x)/2)>0?l:10)+x<parseFloat(i.svg.node().getBBox().width)?l:parseFloat(i.svg.node().getBBox().width)-x-10,u=f+p+10):(l=(l=(l=d-(10+x)/2)>0?l:10)+x<parseFloat(i.svg.node().getBBox().width)?l:parseFloat(i.svg.node().getBBox().width)-x-10,u=f-b-(w-5)),a.attr("transform","translate("+l+" , "+u+")")},t.filterData=function(e,t,n){var r=e;return null!==t&&null!==n&&(null!==n&&void 0!==n&&(n=[].concat(n)),r=[],e.forEach(function(e){null===e[t]?r.push(e):n.indexOf([].concat(e[t]).join("/"))>-1&&r.push(e)},this)),r},t.getUniqueValues=function(e,t){var n=[];return null!==t&&void 0!==t&&(t=[].concat(t),e.forEach(function(e){var r="";t.forEach(function(t,n){n>0&&(r+="/"),r+=e[t]},this),-1===n.indexOf(r)&&n.push(r)},this)),n},t.newSvg=function(t,n,r){var i=null;if(null!==t&&void 0!==t||(t="body"),(i=e.select(t)).empty())throw"The '"+t+"' selector did not match any elements.  Please prefix with '#' to select by id or '.' to select by class";return i.append("svg").attr("width",n).attr("height",r)},t}),function(e,t){"undefined"!=typeof module&&module.exports?(t("undefined"==typeof angular?require("angular"):angular),module.exports="ngDialog"):"function"==typeof define&&define.amd?define(["angular"],t):t(e.angular)}(this,function(e){"use strict";var t=e.module("ngDialog",[]),n=e.element,r=e.isDefined,i=(document.body||document.documentElement).style,o=r(i.animation)||r(i.WebkitAnimation)||r(i.MozAnimation)||r(i.MsAnimation)||r(i.OAnimation),a="animationend webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend",s={html:!1,body:!1},l={},u=[],c=!1;return t.provider("ngDialog",function(){var t=this.defaults={className:"ngdialog-theme-default",disableAnimation:!1,plain:!1,showClose:!0,closeByDocument:!0,closeByEscape:!0,closeByNavigation:!1,appendTo:!1,preCloseCallback:!1,overlay:!0,cache:!0,trapFocus:!0,preserveFocus:!0,ariaAuto:!0,ariaRole:null,ariaLabelledById:null,ariaLabelledBySelector:null,ariaDescribedById:null,ariaDescribedBySelector:null};this.setForceHtmlReload=function(e){s.html=e||!1},this.setForceBodyReload=function(e){s.body=e||!1},this.setDefaults=function(n){e.extend(t,n)};var r,i=0,d=0,f={};this.$get=["$document","$templateCache","$compile","$q","$http","$rootScope","$timeout","$window","$controller","$injector",function(p,h,g,m,v,y,b,x,w,_){var C=[],k={onDocumentKeydown:function(e){27===e.keyCode&&S.close("$escape")},activate:function(e){e.data("$ngDialogOptions").trapFocus&&(e.on("keydown",k.onTrapFocusKeydown),C.body.on("keydown",k.onTrapFocusKeydown))},deactivate:function(e){e.off("keydown",k.onTrapFocusKeydown),C.body.off("keydown",k.onTrapFocusKeydown)},deactivateAll:function(t){e.forEach(t,function(t){var n=e.element(t);k.deactivate(n)})},setBodyPadding:function(e){var t=parseInt(C.body.css("padding-right")||0,10);C.body.css("padding-right",t+e+"px"),C.body.data("ng-dialog-original-padding",t),y.$broadcast("ngDialog.setPadding",e)},resetBodyPadding:function(){var e=C.body.data("ng-dialog-original-padding");e?C.body.css("padding-right",e+"px"):C.body.css("padding-right",""),y.$broadcast("ngDialog.setPadding",0)},performCloseDialog:function(e,t){var n=e.data("$ngDialogOptions"),i=e.attr("id"),s=l[i];if(s){if(void 0!==x.Hammer){var p=s.hammerTime;p.off("tap",r),p.destroy&&p.destroy(),delete s.hammerTime}else e.unbind("click");1===d&&C.body.unbind("keydown",k.onDocumentKeydown),e.hasClass("ngdialog-closing")||(d-=1);var h=e.data("$ngDialogPreviousFocus");h&&h.focus&&h.focus(),y.$broadcast("ngDialog.closing",e,t),d=d<0?0:d,o&&!n.disableAnimation?(s.$destroy(),e.unbind(a).bind(a,function(){k.closeDialogElement(e,t)}).addClass("ngdialog-closing")):(s.$destroy(),k.closeDialogElement(e,t)),f[i]&&(f[i].resolve({id:i,value:t,$dialog:e,remainingDialogs:d}),delete f[i]),l[i]&&delete l[i],u.splice(u.indexOf(i),1),u.length||(C.body.unbind("keydown",k.onDocumentKeydown),c=!1)}},closeDialogElement:function(e,t){e.remove(),0===d&&(C.html.removeClass("ngdialog-open"),C.body.removeClass("ngdialog-open"),k.resetBodyPadding()),y.$broadcast("ngDialog.closed",e,t)},closeDialog:function(t,n){var r=t.data("$ngDialogPreCloseCallback");if(r&&e.isFunction(r)){var i=r.call(t,n);e.isObject(i)?i.closePromise?i.closePromise.then(function(){k.performCloseDialog(t,n)}):i.then(function(){k.performCloseDialog(t,n)},function(){}):!1!==i&&k.performCloseDialog(t,n)}else k.performCloseDialog(t,n)},onTrapFocusKeydown:function(t){var n,r=e.element(t.currentTarget);if(r.hasClass("ngdialog"))n=r;else if(null===(n=k.getActiveDialog()))return;var i=9===t.keyCode,o=!0===t.shiftKey;i&&k.handleTab(n,t,o)},handleTab:function(e,t,n){var r=k.getFocusableElements(e);if(0!==r.length){var i=document.activeElement,o=Array.prototype.indexOf.call(r,i),a=-1===o,s=0===o,l=o===r.length-1,u=!1;n?(a||s)&&(r[r.length-1].focus(),u=!0):(a||l)&&(r[0].focus(),u=!0),u&&(t.preventDefault(),t.stopPropagation())}else document.activeElement&&document.activeElement.blur()},autoFocus:function(e){var t=e[0],r=t.querySelector("*[autofocus]");if(null===r||(r.focus(),document.activeElement!==r)){var i=k.getFocusableElements(e);if(i.length>0)i[0].focus();else{var o=k.filterVisibleElements(t.querySelectorAll("h1,h2,h3,h4,h5,h6,p,span"));if(o.length>0){var a=o[0];n(a).attr("tabindex","-1").css("outline","0"),a.focus()}}}},getFocusableElements:function(e){var t=e[0].querySelectorAll("a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), iframe, object, embed, *[tabindex], *[contenteditable]"),n=k.filterTabbableElements(t);return k.filterVisibleElements(n)},filterTabbableElements:function(e){for(var t=[],r=0;r<e.length;r++){var i=e[r];"-1"!==n(i).attr("tabindex")&&t.push(i)}return t},filterVisibleElements:function(e){for(var t=[],n=0;n<e.length;n++){var r=e[n];(r.offsetWidth>0||r.offsetHeight>0)&&t.push(r)}return t},getActiveDialog:function(){var e=document.querySelectorAll(".ngdialog");return 0===e.length?null:n(e[e.length-1])},applyAriaAttributes:function(e,t){if(t.ariaAuto){if(!t.ariaRole){var n=k.getFocusableElements(e).length>0?"dialog":"alertdialog";t.ariaRole=n}t.ariaLabelledBySelector||(t.ariaLabelledBySelector="h1,h2,h3,h4,h5,h6"),t.ariaDescribedBySelector||(t.ariaDescribedBySelector="article,section,p")}t.ariaRole&&e.attr("role",t.ariaRole),k.applyAriaAttribute(e,"aria-labelledby",t.ariaLabelledById,t.ariaLabelledBySelector),k.applyAriaAttribute(e,"aria-describedby",t.ariaDescribedById,t.ariaDescribedBySelector)},applyAriaAttribute:function(e,t,r,i){if(r&&e.attr(t,r),i){var o=e.attr("id"),a=e[0].querySelector(i);if(!a)return;var s=o+"-"+t;return n(a).attr("id",s),e.attr(t,s),s}},detectUIRouter:function(){try{return e.module("ui.router"),!0}catch(e){return!1}},getRouterLocationEventName:function(){return k.detectUIRouter()?"$stateChangeSuccess":"$locationChangeSuccess"}},S={__PRIVATE__:k,open:function(o){function a(e,t){return y.$broadcast("ngDialog.templateLoading",e),v.get(e,t||{}).then(function(t){return y.$broadcast("ngDialog.templateLoaded",e),t.data||""})}var s=e.copy(t),p=++i,$="ngdialog"+p;u.push($),o=o||{},e.extend(s,o);var M;f[$]=M=m.defer();var T;l[$]=T=e.isObject(s.scope)?s.scope.$new():y.$new();var D,E,L=e.extend({},s.resolve);return e.forEach(L,function(t,n){L[n]=e.isString(t)?_.get(t):_.invoke(t,null,null,n)}),m.all({template:function(t){return t?e.isString(t)&&s.plain?t:"boolean"!=typeof s.cache||s.cache?a(t,{cache:h}):a(t,{cache:!1}):"Empty template"}(s.template||s.templateUrl),locals:m.all(L)}).then(function(t){var i=t.template,o=t.locals;s.showClose&&(i+='<div class="ngdialog-close"></div>');var a=s.overlay?"":" ngdialog-no-overlay";if((D=n('<div id="ngdialog'+p+'" class="ngdialog'+a+'"></div>')).html(s.overlay?'<div class="ngdialog-overlay"></div><div class="ngdialog-content" role="document">'+i+"</div>":'<div class="ngdialog-content" role="document">'+i+"</div>"),D.data("$ngDialogOptions",s),T.ngDialogId=$,s.data&&e.isString(s.data)){var l=s.data.replace(/^\s*/,"")[0];T.ngDialogData="{"===l||"["===l?e.fromJson(s.data):s.data,T.ngDialogData.ngDialogId=$}else s.data&&e.isObject(s.data)&&(T.ngDialogData=s.data,T.ngDialogData.ngDialogId=$);if(s.className&&D.addClass(s.className),s.disableAnimation&&D.addClass("ngdialog-disabled-animation"),E=s.appendTo&&e.isString(s.appendTo)?e.element(document.querySelector(s.appendTo)):C.body,k.applyAriaAttributes(D,s),s.preCloseCallback){var u;e.isFunction(s.preCloseCallback)?u=s.preCloseCallback:e.isString(s.preCloseCallback)&&T&&(e.isFunction(T[s.preCloseCallback])?u=T[s.preCloseCallback]:T.$parent&&e.isFunction(T.$parent[s.preCloseCallback])?u=T.$parent[s.preCloseCallback]:y&&e.isFunction(y[s.preCloseCallback])&&(u=y[s.preCloseCallback])),u&&D.data("$ngDialogPreCloseCallback",u)}if(T.closeThisDialog=function(e){k.closeDialog(D,e)},s.controller&&(e.isString(s.controller)||e.isArray(s.controller)||e.isFunction(s.controller))){var f;s.controllerAs&&e.isString(s.controllerAs)&&(f=s.controllerAs);var h=w(s.controller,e.extend(o,{$scope:T,$element:D}),!0,f);s.bindToController&&e.extend(h.instance,{ngDialogId:T.ngDialogId,ngDialogData:T.ngDialogData,closeThisDialog:T.closeThisDialog}),D.data("$ngDialogControllerController",h())}if(b(function(){var e=document.querySelectorAll(".ngdialog");k.deactivateAll(e),g(D)(T);var t=x.innerWidth-C.body.prop("clientWidth");C.html.addClass("ngdialog-open"),C.body.addClass("ngdialog-open");var n=t-(x.innerWidth-C.body.prop("clientWidth"));n>0&&k.setBodyPadding(n),E.append(D),k.activate(D),s.trapFocus&&k.autoFocus(D),s.name?y.$broadcast("ngDialog.opened",{dialog:D,name:s.name}):y.$broadcast("ngDialog.opened",D)}),c||(C.body.bind("keydown",k.onDocumentKeydown),c=!0),s.closeByNavigation){var m=k.getRouterLocationEventName();y.$on(m,function(){k.closeDialog(D)})}return s.preserveFocus&&D.data("$ngDialogPreviousFocus",document.activeElement),r=function(e){var t=!!s.closeByDocument&&n(e.target).hasClass("ngdialog-overlay"),r=n(e.target).hasClass("ngdialog-close");(t||r)&&S.close(D.attr("id"),r?"$closeButton":"$document")},void 0!==x.Hammer?(T.hammerTime=x.Hammer(D[0])).on("tap",r):D.bind("click",r),d+=1,S}),{id:$,closePromise:M.promise,close:function(e){k.closeDialog(D,e)}}},openConfirm:function(r){var i=m.defer(),o=e.copy(t);r=r||{},e.extend(o,r),o.scope=e.isObject(o.scope)?o.scope.$new():y.$new(),o.scope.confirm=function(e){i.resolve(e);var t=n(document.getElementById(a.id));k.performCloseDialog(t,e)};var a=S.open(o);return a.closePromise.then(function(e){return e?i.reject(e.value):i.reject()}),i.promise},isOpen:function(e){return n(document.getElementById(e)).length>0},close:function(e,t){var r=n(document.getElementById(e));if(r.length)k.closeDialog(r,t);else if("$escape"===e){var i=u[u.length-1];(r=n(document.getElementById(i))).data("$ngDialogOptions").closeByEscape&&k.closeDialog(r,"$escape")}else S.closeAll(t);return S},closeAll:function(e){for(var t=document.querySelectorAll(".ngdialog"),r=t.length-1;r>=0;r--){var i=t[r];k.closeDialog(n(i),e)}},getOpenDialogs:function(){return u},getDefaults:function(){return t}};return e.forEach(["html","body"],function(e){if(C[e]=p.find(e),s[e]){var t=k.getRouterLocationEventName();y.$on(t,function(){C[e]=p.find(e)})}}),S}]}),t.directive("ngDialog",["ngDialog",function(t){return{restrict:"A",scope:{ngDialogScope:"="},link:function(n,r,i){r.on("click",function(r){r.preventDefault();var o=e.isDefined(n.ngDialogScope)?n.ngDialogScope:"noScope";e.isDefined(i.ngDialogClosePrevious)&&t.close(i.ngDialogClosePrevious);var a=t.getDefaults();t.open({template:i.ngDialog,className:i.ngDialogClass||a.className,controller:i.ngDialogController,controllerAs:i.ngDialogControllerAs,bindToController:i.ngDialogBindToController,scope:o,data:i.ngDialogData,showClose:"false"!==i.ngDialogShowClose&&("true"===i.ngDialogShowClose||a.showClose),closeByDocument:"false"!==i.ngDialogCloseByDocument&&("true"===i.ngDialogCloseByDocument||a.closeByDocument),closeByEscape:"false"!==i.ngDialogCloseByEscape&&("true"===i.ngDialogCloseByEscape||a.closeByEscape),overlay:"false"!==i.ngDialogOverlay&&("true"===i.ngDialogOverlay||a.overlay),preCloseCallback:i.ngDialogPreCloseCallback||a.preCloseCallback})})}}}]),t}),function(e,t){t.true=e,function(t,n){"function"==typeof define&&define.amd?define(t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t():n.rangy=t()}(function(){function e(e,t){var n=typeof e[t];return n==x||!(n!=b||!e[t])||"unknown"==n}function t(e,t){return!(typeof e[t]!=b||!e[t])}function n(e,t){return typeof e[t]!=w}function r(e){return function(t,n){for(var r=n.length;r--;)if(!e(t,n[r]))return!1;return!0}}function i(e){return e&&$(e,S)&&T(e,k)}function o(e){return t(e,"body")?e.body:e.getElementsByTagName("body")[0]}function a(t){typeof console!=w&&e(console,"log")&&console.log(t)}function s(e,t){L&&t?alert(e):a(e)}function l(e){R.initialized=!0,R.supported=!1,s("Rangy is not supported in this environment. Reason: "+e,R.config.alertOnFail)}function u(e){s("Rangy warning: "+e,R.config.alertOnWarn)}function c(e){return e.message||e.description||String(e)}function d(){if(L&&!R.initialized){var t,n=!1,r=!1;e(document,"createRange")&&(t=document.createRange(),$(t,C)&&T(t,_)&&(n=!0));var s=o(document);if(!s||"body"!=s.nodeName.toLowerCase())return void l("No body element found");if(s&&e(s,"createTextRange")&&(t=s.createTextRange(),i(t)&&(r=!0)),!n&&!r)return void l("Neither Range nor TextRange are available");R.initialized=!0,R.features={implementsDomRange:n,implementsTextRange:r};var u;for(var d in E)(u=E[d])instanceof g&&u.init(u,R);for(var f=0,p=O.length;p>f;++f)try{O[f](R)}catch(e){a("Rangy init listener threw an exception. Continuing. Detail: "+c(e))}}}function f(e,t,n){n&&(e+=" in module "+n.name),R.warn("DEPRECATED: "+e+" is deprecated. Please use "+t+" instead.")}function p(e,t,n,r){e[t]=function(){return f(t,n,r),e[n].apply(e,A.toArray(arguments))}}function h(e){e=e||window,d();for(var t=0,n=N.length;n>t;++t)N[t](e)}function g(e,t,n){this.name=e,this.dependencies=t,this.initialized=!1,this.supported=!1,this.initializer=n}function m(e,t,n){var r=new g(e,t,function(t){if(!t.initialized){t.initialized=!0;try{n(R,t),t.supported=!0}catch(t){a("Module '"+e+"' failed to load: "+c(t)),t.stack&&a(t.stack)}}});return E[e]=r,r}function v(){}function y(){}var b="object",x="function",w="undefined",_=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],C=["setStart","setStartBefore","setStartAfter","setEnd","setEndBefore","setEndAfter","collapse","selectNode","selectNodeContents","compareBoundaryPoints","deleteContents","extractContents","cloneContents","insertNode","surroundContents","cloneRange","toString","detach"],k=["boundingHeight","boundingLeft","boundingTop","boundingWidth","htmlText","text"],S=["collapse","compareEndPoints","duplicate","moveToElementText","parentElement","select","setEndPoint","getBoundingClientRect"],$=r(e),M=r(t),T=r(n),D=[].forEach?function(e,t){e.forEach(t)}:function(e,t){for(var n=0,r=e.length;r>n;++n)t(e[n],n)},E={},L=typeof window!=w&&typeof document!=w,A={isHostMethod:e,isHostObject:t,isHostProperty:n,areHostMethods:$,areHostObjects:M,areHostProperties:T,isTextRange:i,getBody:o,forEach:D},R={version:"1.3.0",initialized:!1,isBrowser:L,supported:!0,util:A,features:{},modules:E,config:{alertOnFail:!1,alertOnWarn:!1,preferTextRange:!1,autoInitialize:typeof rangyAutoInitialize==w||rangyAutoInitialize}};R.fail=l,R.warn=u;var P;!{}.hasOwnProperty?l("hasOwnProperty not supported"):(A.extend=P=function(e,t,n){var r,i;for(var o in t)t.hasOwnProperty(o)&&(r=e[o],i=t[o],n&&null!==r&&"object"==typeof r&&null!==i&&"object"==typeof i&&P(r,i,!0),e[o]=i);return t.hasOwnProperty("toString")&&(e.toString=t.toString),e},A.createOptions=function(e,t){var n={};return P(n,t),e&&P(n,e),n}),L||l("Rangy can only run in a browser"),function(){var e;if(L){var t=document.createElement("div");t.appendChild(document.createElement("span"));var n=[].slice;try{1==n.call(t.childNodes,0)[0].nodeType&&(e=function(e){return n.call(e,0)})}catch(e){}}e||(e=function(e){for(var t=[],n=0,r=e.length;r>n;++n)t[n]=e[n];return t}),A.toArray=e}();var F;L&&(e(document,"addEventListener")?F=function(e,t,n){e.addEventListener(t,n,!1)}:e(document,"attachEvent")?F=function(e,t,n){e.attachEvent("on"+t,n)}:l("Document does not have required addEventListener or attachEvent method"),A.addListener=F);var O=[];A.deprecationNotice=f,A.createAliasForDeprecatedMethod=p,R.init=d,R.addInitListener=function(e){R.initialized?e(R):O.push(e)};var N=[];R.addShimListener=function(e){N.push(e)},L&&(R.shim=R.createMissingNativeApi=h,p(R,"createMissingNativeApi","shim")),g.prototype={init:function(){for(var e,t,n=this.dependencies||[],r=0,i=n.length;i>r;++r){if(t=n[r],!((e=E[t])&&e instanceof g))throw new Error("required module '"+t+"' not found");if(e.init(),!e.supported)throw new Error("required module '"+t+"' not supported")}this.initializer(this)},fail:function(e){throw this.initialized=!0,this.supported=!1,new Error(e)},warn:function(e){R.warn("Module "+this.name+": "+e)},deprecationNotice:function(e,t){R.warn("DEPRECATED: "+e+" in module "+this.name+" is deprecated. Please use "+t+" instead")},createError:function(e){return new Error("Error in Rangy "+this.name+" module: "+e)}},R.createModule=function(e){var t,n;2==arguments.length?(t=arguments[1],n=[]):(t=arguments[2],n=arguments[1]);var r=m(e,n,t);R.initialized&&R.supported&&r.init()},R.createCoreModule=function(e,t,n){m(e,t,n)},R.RangePrototype=v,R.rangePrototype=new v,R.selectionPrototype=new y,R.createCoreModule("DomUtil",[],function(e,t){function n(e){var t;return typeof e.namespaceURI==L||null===(t=e.namespaceURI)||"http://www.w3.org/1999/xhtml"==t}function r(e){var t=e.parentNode;return 1==t.nodeType?t:null}function i(e){for(var t=0;e=e.previousSibling;)++t;return t}function o(e){switch(e.nodeType){case 7:case 10:return 0;case 3:case 8:return e.length;default:return e.childNodes.length}}function a(e,t){var n,r=[];for(n=e;n;n=n.parentNode)r.push(n);for(n=t;n;n=n.parentNode)if(O(r,n))return n;return null}function s(e,t,n){for(var r=n?t:t.parentNode;r;){if(r===e)return!0;r=r.parentNode}return!1}function l(e,t){return s(e,t,!0)}function u(e,t,n){for(var r,i=n?e:e.parentNode;i;){if((r=i.parentNode)===t)return i;i=r}return null}function c(e){var t=e.nodeType;return 3==t||4==t||8==t}function d(e){if(!e)return!1;var t=e.nodeType;return 3==t||8==t}function f(e,t){var n=t.nextSibling,r=t.parentNode;return n?r.insertBefore(e,n):r.appendChild(e),e}function p(e,t,n){var r=e.cloneNode(!1);if(r.deleteData(0,t),e.deleteData(t,e.length-t),f(r,e),n)for(var o,a=0;o=n[a++];)o.node==e&&o.offset>t?(o.node=r,o.offset-=t):o.node==e.parentNode&&o.offset>i(e)&&++o.offset;return r}function h(e){if(9==e.nodeType)return e;if(typeof e.ownerDocument!=L)return e.ownerDocument;if(typeof e.document!=L)return e.document;if(e.parentNode)return h(e.parentNode);throw t.createError("getDocument: no document found for node")}function g(e){var n=h(e);if(typeof n.defaultView!=L)return n.defaultView;if(typeof n.parentWindow!=L)return n.parentWindow;throw t.createError("Cannot get a window object for node")}function m(e){if(typeof e.contentDocument!=L)return e.contentDocument;if(typeof e.contentWindow!=L)return e.contentWindow.document;throw t.createError("getIframeDocument: No Document object found for iframe element")}function v(e){if(typeof e.contentWindow!=L)return e.contentWindow;if(typeof e.contentDocument!=L)return e.contentDocument.defaultView;throw t.createError("getIframeWindow: No Window object found for iframe element")}function y(e){return e&&A.isHostMethod(e,"setTimeout")&&A.isHostObject(e,"document")}function b(e,t,n){var r;if(e?A.isHostProperty(e,"nodeType")?r=1==e.nodeType&&"iframe"==e.tagName.toLowerCase()?m(e):h(e):y(e)&&(r=e.document):r=document,!r)throw t.createError(n+"(): Parameter must be a Window object or DOM node");return r}function x(e){for(var t;t=e.parentNode;)e=t;return e}function w(e,n,r,o){var s,l,c,d,f;if(e==r)return n===o?0:o>n?-1:1;if(s=u(r,e,!0))return n<=i(s)?-1:1;if(s=u(e,r,!0))return i(s)<o?-1:1;if(!(l=a(e,r)))throw new Error("comparePoints error: nodes have no common ancestor");if(c=e===l?l:u(e,l,!0),d=r===l?l:u(r,l,!0),c===d)throw t.createError("comparePoints got to case 4 and childA and childB are the same!");for(f=l.firstChild;f;){if(f===c)return-1;if(f===d)return 1;f=f.nextSibling}}function _(e){try{return e.parentNode,!1}catch(e){return!0}}function C(e){if(!e)return"[No node]";if(N&&_(e))return"[Broken node]";if(c(e))return'"'+e.data+'"';if(1==e.nodeType){var t=e.id?' id="'+e.id+'"':"";return"<"+e.nodeName+t+">[index:"+i(e)+",length:"+e.childNodes.length+"]["+(e.innerHTML||"[innerHTML not supported]").slice(0,25)+"]"}return e.nodeName}function k(e){for(var t,n=h(e).createDocumentFragment();t=e.firstChild;)n.appendChild(t);return n}function S(e,t,n){var r=R(e),i=e.createElement("div");i.contentEditable=""+!!n,t&&(i.innerHTML=t);var o=r.firstChild;return o?r.insertBefore(i,o):r.appendChild(i),i}function $(e){return e.parentNode.removeChild(e)}function M(e){this.root=e,this._next=e}function T(e){return new M(e)}function D(e,t){this.node=e,this.offset=t}function E(e){this.code=this[e],this.codeName=e,this.message="DOMException: "+this.codeName}var L="undefined",A=e.util,R=A.getBody;A.areHostMethods(document,["createDocumentFragment","createElement","createTextNode"])||t.fail("document missing a Node creation method"),A.isHostMethod(document,"getElementsByTagName")||t.fail("document missing getElementsByTagName method");var P=document.createElement("div");A.areHostMethods(P,["insertBefore","appendChild","cloneNode"]||!A.areHostObjects(P,["previousSibling","nextSibling","childNodes","parentNode"]))||t.fail("Incomplete Element implementation"),A.isHostProperty(P,"innerHTML")||t.fail("Element is missing innerHTML property");var F=document.createTextNode("test");A.areHostMethods(F,["splitText","deleteData","insertData","appendData","cloneNode"]||!A.areHostObjects(P,["previousSibling","nextSibling","childNodes","parentNode"])||!A.areHostProperties(F,["data"]))||t.fail("Incomplete Text Node implementation");var O=function(e,t){for(var n=e.length;n--;)if(e[n]===t)return!0;return!1},N=!1;!function(){var t=document.createElement("b");t.innerHTML="1";var n=t.firstChild;t.innerHTML="<br />",N=_(n),e.features.crashyTextNodes=N}();var I;typeof window.getComputedStyle!=L?I=function(e,t){return g(e).getComputedStyle(e,null)[t]}:typeof document.documentElement.currentStyle!=L?I=function(e,t){return e.currentStyle?e.currentStyle[t]:""}:t.fail("No means of obtaining computed style properties found"),M.prototype={_current:null,hasNext:function(){return!!this._next},next:function(){var e,t,n=this._current=this._next;if(this._current)if(e=n.firstChild)this._next=e;else{for(t=null;n!==this.root&&!(t=n.nextSibling);)n=n.parentNode;this._next=t}return this._current},detach:function(){this._current=this._next=this.root=null}},D.prototype={equals:function(e){return!!e&&this.node===e.node&&this.offset==e.offset},inspect:function(){return"[DomPosition("+C(this.node)+":"+this.offset+")]"},toString:function(){return this.inspect()}},E.prototype={INDEX_SIZE_ERR:1,HIERARCHY_REQUEST_ERR:3,WRONG_DOCUMENT_ERR:4,NO_MODIFICATION_ALLOWED_ERR:7,NOT_FOUND_ERR:8,NOT_SUPPORTED_ERR:9,INVALID_STATE_ERR:11,INVALID_NODE_TYPE_ERR:24},E.prototype.toString=function(){return this.message},e.dom={arrayContains:O,isHtmlNamespace:n,parentElement:r,getNodeIndex:i,getNodeLength:o,getCommonAncestor:a,isAncestorOf:s,isOrIsAncestorOf:l,getClosestAncestorIn:u,isCharacterDataNode:c,isTextOrCommentNode:d,insertAfter:f,splitDataNode:p,getDocument:h,getWindow:g,getIframeWindow:v,getIframeDocument:m,getBody:R,isWindow:y,getContentDocument:b,getRootContainer:x,comparePoints:w,isBrokenNode:_,inspectNode:C,getComputedStyleProperty:I,createTestElement:S,removeNode:$,fragmentFromNodeChildren:k,createIterator:T,DomPosition:D},e.DOMException=E}),R.createCoreModule("DomRange",["DomUtil"],function(e,t){function n(e,t){return 3!=e.nodeType&&(z(e,t.startContainer)||z(e,t.endContainer))}function r(e){return e.document||H(e.startContainer)}function i(e){return q(e.startContainer)}function o(e){return new N(e.parentNode,Y(e))}function a(e){return new N(e.parentNode,Y(e)+1)}function s(e,t,n){var r=11==e.nodeType?e.firstChild:e;return j(t)?n==t.length?F.insertAfter(e,t):t.parentNode.insertBefore(e,0==n?t:B(t,n)):n>=t.childNodes.length?t.appendChild(e):t.insertBefore(e,t.childNodes[n]),r}function l(e,t,n){if(S(e),S(t),r(t)!=r(e))throw new I("WRONG_DOCUMENT_ERR");var i=V(e.startContainer,e.startOffset,t.endContainer,t.endOffset),o=V(e.endContainer,e.endOffset,t.startContainer,t.startOffset);return n?0>=i&&o>=0:0>i&&o>0}function u(e){for(var t,n,i,o=r(e.range).createDocumentFragment();n=e.next();){if(t=e.isPartiallySelectedSubtree(),n=n.cloneNode(!t),t&&(i=e.getSubtreeIterator(),n.appendChild(u(i)),i.detach()),10==n.nodeType)throw new I("HIERARCHY_REQUEST_ERR");o.appendChild(n)}return o}function c(e,t,n){var r,i;n=n||{stop:!1};for(var o,a;o=e.next();)if(e.isPartiallySelectedSubtree()){if(!1===t(o))return void(n.stop=!0);if(a=e.getSubtreeIterator(),c(a,t,n),a.detach(),n.stop)return}else for(r=F.createIterator(o);i=r.next();)if(!1===t(i))return void(n.stop=!0)}function d(e){for(var t;e.next();)e.isPartiallySelectedSubtree()?(t=e.getSubtreeIterator(),d(t),t.detach()):e.remove()}function f(e){for(var t,n,i=r(e.range).createDocumentFragment();t=e.next();){if(e.isPartiallySelectedSubtree()?(t=t.cloneNode(!1),n=e.getSubtreeIterator(),t.appendChild(f(n)),n.detach()):e.remove(),10==t.nodeType)throw new I("HIERARCHY_REQUEST_ERR");i.appendChild(t)}return i}function p(e,t,n){var r,i=!(!t||!t.length),o=!!n;i&&(r=new RegExp("^("+t.join("|")+")$"));var a=[];return c(new g(e,!1),function(t){if((!i||r.test(t.nodeType))&&(!o||n(t))){var s=e.startContainer;if(t!=s||!j(s)||e.startOffset!=s.length){var l=e.endContainer;t==l&&j(l)&&0==e.endOffset||a.push(t)}}}),a}function h(e){return"["+(void 0===e.getName?"Range":e.getName())+"("+F.inspectNode(e.startContainer)+":"+e.startOffset+", "+F.inspectNode(e.endContainer)+":"+e.endOffset+")]"}function g(e,t){if(this.range=e,this.clonePartiallySelectedTextNodes=t,!e.collapsed){this.sc=e.startContainer,this.so=e.startOffset,this.ec=e.endContainer,this.eo=e.endOffset;var n=e.commonAncestorContainer;this.sc===this.ec&&j(this.sc)?(this.isSingleCharacterDataNode=!0,this._first=this._last=this._next=this.sc):(this._first=this._next=this.sc!==n||j(this.sc)?W(this.sc,n,!0):this.sc.childNodes[this.so],this._last=this.ec!==n||j(this.ec)?W(this.ec,n,!0):this.ec.childNodes[this.eo-1])}}function m(e){return function(t,n){for(var r,i=n?t:t.parentNode;i;){if(r=i.nodeType,G(e,r))return i;i=i.parentNode}return null}}function v(e,t){if(ie(e,t))throw new I("INVALID_NODE_TYPE_ERR")}function y(e,t){if(!G(t,e.nodeType))throw new I("INVALID_NODE_TYPE_ERR")}function b(e,t){if(0>t||t>(j(e)?e.length:e.childNodes.length))throw new I("INDEX_SIZE_ERR")}function x(e,t){if(ne(e,!0)!==ne(t,!0))throw new I("WRONG_DOCUMENT_ERR")}function w(e){if(re(e,!0))throw new I("NO_MODIFICATION_ALLOWED_ERR")}function _(e,t){if(!e)throw new I(t)}function C(e,t){return t<=(j(e)?e.length:e.childNodes.length)}function k(e){return!!e.startContainer&&!!e.endContainer&&!(K&&(F.isBrokenNode(e.startContainer)||F.isBrokenNode(e.endContainer)))&&q(e.startContainer)==q(e.endContainer)&&C(e.startContainer,e.startOffset)&&C(e.endContainer,e.endOffset)}function S(e){if(!k(e))throw new Error("Range error: Range is not valid. This usually happens after DOM mutation. Range: ("+e.inspect()+")")}function $(e,t){S(e);var n=e.startContainer,r=e.startOffset,i=e.endContainer,o=e.endOffset,a=n===i;j(i)&&o>0&&o<i.length&&B(i,o,t),j(n)&&r>0&&r<n.length&&(n=B(n,r,t),a?(o-=r,i=n):i==n.parentNode&&o>=Y(n)&&o++,r=0),e.setStartAndEnd(n,r,i,o)}function M(e){S(e);var t=e.commonAncestorContainer.parentNode.cloneNode(!1);return t.appendChild(e.cloneContents()),t.innerHTML}function T(e){e.START_TO_START=ue,e.START_TO_END=ce,e.END_TO_END=de,e.END_TO_START=fe,e.NODE_BEFORE=pe,e.NODE_AFTER=he,e.NODE_BEFORE_AND_AFTER=ge,e.NODE_INSIDE=me}function D(e){T(e),T(e.prototype)}function E(e,t){return function(){S(this);var n,r,i=this.startContainer,o=this.startOffset,s=this.commonAncestorContainer,l=new g(this,!0);i!==s&&(n=W(i,s,!0),r=a(n),i=r.node,o=r.offset),c(l,w),l.reset();var u=e(l);return l.detach(),t(this,i,o,i,o),u}}function L(t,r){function i(e,t){return function(n){y(n,J),y(q(n),Z);var r=(e?o:a)(n);(t?s:l)(this,r.node,r.offset)}}function s(e,t,n){var i=e.endContainer,o=e.endOffset;(t!==e.startContainer||n!==e.startOffset)&&((q(t)!=q(i)||1==V(t,n,i,o))&&(i=t,o=n),r(e,t,n,i,o))}function l(e,t,n){var i=e.startContainer,o=e.startOffset;(t!==e.endContainer||n!==e.endOffset)&&((q(t)!=q(i)||-1==V(t,n,i,o))&&(i=t,o=n),r(e,i,o,t,n))}var u=function(){};u.prototype=e.rangePrototype,t.prototype=new u,O.extend(t.prototype,{setStart:function(e,t){v(e,!0),b(e,t),s(this,e,t)},setEnd:function(e,t){v(e,!0),b(e,t),l(this,e,t)},setStartAndEnd:function(){var e=arguments,t=e[0],n=e[1],i=t,o=n;switch(e.length){case 3:o=e[2];break;case 4:i=e[2],o=e[3]}r(this,t,n,i,o)},setBoundary:function(e,t,n){this["set"+(n?"Start":"End")](e,t)},setStartBefore:i(!0,!0),setStartAfter:i(!1,!0),setEndBefore:i(!0,!1),setEndAfter:i(!1,!1),collapse:function(e){S(this),e?r(this,this.startContainer,this.startOffset,this.startContainer,this.startOffset):r(this,this.endContainer,this.endOffset,this.endContainer,this.endOffset)},selectNodeContents:function(e){v(e,!0),r(this,e,0,e,U(e))},selectNode:function(e){v(e,!1),y(e,J);var t=o(e),n=a(e);r(this,t.node,t.offset,n.node,n.offset)},extractContents:E(f,r),deleteContents:E(d,r),canSurroundContents:function(){S(this),w(this.startContainer),w(this.endContainer);var e=new g(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},splitBoundaries:function(){$(this)},splitBoundariesPreservingPositions:function(e){$(this,e)},normalizeBoundaries:function(){S(this);var e,t=this.startContainer,n=this.startOffset,i=this.endContainer,o=this.endOffset,a=function(e){var t=e.nextSibling;t&&t.nodeType==e.nodeType&&(i=e,o=e.length,e.appendData(t.data),X(t))},s=function(e){var r=e.previousSibling;if(r&&r.nodeType==e.nodeType){t=e;var a=e.length;if(n=r.length,e.insertData(0,r.data),X(r),t==i)o+=n,i=t;else if(i==e.parentNode){var s=Y(e);o==s?(i=e,o=a):o>s&&o--}}},l=!0;if(j(i))o==i.length?a(i):0==o&&(e=i.previousSibling)&&e.nodeType==i.nodeType&&(o=e.length,t==i&&(l=!1),e.appendData(i.data),X(i),i=e);else{if(o>0){var u=i.childNodes[o-1];u&&j(u)&&a(u)}l=!this.collapsed}if(l){if(j(t))0==n?s(t):n==t.length&&(e=t.nextSibling)&&e.nodeType==t.nodeType&&(i==e&&(i=t,o+=t.length),t.appendData(e.data),X(e));else if(n<t.childNodes.length){var c=t.childNodes[n];c&&j(c)&&s(c)}}else t=i,n=o;r(this,t,n,i,o)},collapseToPoint:function(e,t){v(e,!0),b(e,t),this.setStartAndEnd(e,t)}}),D(t)}function A(e){e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset,e.commonAncestorContainer=e.collapsed?e.startContainer:F.getCommonAncestor(e.startContainer,e.endContainer)}function R(e,t,n,r,i){e.startContainer=t,e.startOffset=n,e.endContainer=r,e.endOffset=i,e.document=F.getDocument(t),A(e)}function P(e){this.startContainer=e,this.startOffset=0,this.endContainer=e,this.endOffset=0,this.document=e,A(this)}var F=e.dom,O=e.util,N=F.DomPosition,I=e.DOMException,j=F.isCharacterDataNode,Y=F.getNodeIndex,z=F.isOrIsAncestorOf,H=F.getDocument,V=F.comparePoints,B=F.splitDataNode,W=F.getClosestAncestorIn,U=F.getNodeLength,G=F.arrayContains,q=F.getRootContainer,K=e.features.crashyTextNodes,X=F.removeNode;g.prototype={_current:null,_next:null,_first:null,_last:null,isSingleCharacterDataNode:!1,reset:function(){this._current=null,this._next=this._first},hasNext:function(){return!!this._next},next:function(){var e=this._current=this._next;return e&&(this._next=e!==this._last?e.nextSibling:null,j(e)&&this.clonePartiallySelectedTextNodes&&(e===this.ec&&(e=e.cloneNode(!0)).deleteData(this.eo,e.length-this.eo),this._current===this.sc&&(e=e.cloneNode(!0)).deleteData(0,this.so))),e},remove:function(){var e,t,n=this._current;!j(n)||n!==this.sc&&n!==this.ec?n.parentNode&&X(n):(e=n===this.sc?this.so:0,t=n===this.ec?this.eo:n.length,e!=t&&n.deleteData(e,t-e))},isPartiallySelectedSubtree:function(){return n(this._current,this.range)},getSubtreeIterator:function(){var e;if(this.isSingleCharacterDataNode)(e=this.range.cloneRange()).collapse(!1);else{e=new P(r(this.range));var t=this._current,n=t,i=0,o=t,a=U(t);z(t,this.sc)&&(n=this.sc,i=this.so),z(t,this.ec)&&(o=this.ec,a=this.eo),R(e,n,i,o,a)}return new g(e,this.clonePartiallySelectedTextNodes)},detach:function(){this.range=this._current=this._next=this._first=this._last=this.sc=this.so=this.ec=this.eo=null}};var J=[1,3,4,5,7,8,10],Z=[2,9,11],Q=[5,6,10,12],ee=[1,3,4,5,7,8,10,11],te=[1,3,4,5,7,8],ne=m([9,11]),re=m(Q),ie=m([6,10,12]),oe=document.createElement("style"),ae=!1;try{oe.innerHTML="<b>x</b>",ae=3==oe.firstChild.nodeType}catch(e){}e.features.htmlParsingConforms=ae;var se=ae?function(e){var t=this.startContainer,n=H(t);if(!t)throw new I("INVALID_STATE_ERR");var r=null;return 1==t.nodeType?r=t:j(t)&&(r=F.parentElement(t)),r=null===r||"HTML"==r.nodeName&&F.isHtmlNamespace(H(r).documentElement)&&F.isHtmlNamespace(r)?n.createElement("body"):r.cloneNode(!1),r.innerHTML=e,F.fragmentFromNodeChildren(r)}:function(e){var t=r(this).createElement("body");return t.innerHTML=e,F.fragmentFromNodeChildren(t)},le=["startContainer","startOffset","endContainer","endOffset","collapsed","commonAncestorContainer"],ue=0,ce=1,de=2,fe=3,pe=0,he=1,ge=2,me=3;O.extend(e.rangePrototype,{compareBoundaryPoints:function(e,t){S(this),x(this.startContainer,t.startContainer);var n,r,i,o,a=e==fe||e==ue?"start":"end",s=e==ce||e==ue?"start":"end";return n=this[a+"Container"],r=this[a+"Offset"],i=t[s+"Container"],o=t[s+"Offset"],V(n,r,i,o)},insertNode:function(e){if(S(this),y(e,ee),w(this.startContainer),z(e,this.startContainer))throw new I("HIERARCHY_REQUEST_ERR");var t=s(e,this.startContainer,this.startOffset);this.setStartBefore(t)},cloneContents:function(){S(this);var e,t;if(this.collapsed)return r(this).createDocumentFragment();if(this.startContainer===this.endContainer&&j(this.startContainer))return e=this.startContainer.cloneNode(!0),e.data=e.data.slice(this.startOffset,this.endOffset),(t=r(this).createDocumentFragment()).appendChild(e),t;var n=new g(this,!0);return e=u(n),n.detach(),e},canSurroundContents:function(){S(this),w(this.startContainer),w(this.endContainer);var e=new g(this,!0),t=e._first&&n(e._first,this)||e._last&&n(e._last,this);return e.detach(),!t},surroundContents:function(e){if(y(e,te),!this.canSurroundContents())throw new I("INVALID_STATE_ERR");var t=this.extractContents();if(e.hasChildNodes())for(;e.lastChild;)e.removeChild(e.lastChild);s(e,this.startContainer,this.startOffset),e.appendChild(t),this.selectNode(e)},cloneRange:function(){S(this);for(var e,t=new P(r(this)),n=le.length;n--;)e=le[n],t[e]=this[e];return t},toString:function(){S(this);var e=this.startContainer;if(e===this.endContainer&&j(e))return 3==e.nodeType||4==e.nodeType?e.data.slice(this.startOffset,this.endOffset):"";var t=[],n=new g(this,!0);return c(n,function(e){(3==e.nodeType||4==e.nodeType)&&t.push(e.data)}),n.detach(),t.join("")},compareNode:function(e){S(this);var t=e.parentNode,n=Y(e);if(!t)throw new I("NOT_FOUND_ERR");var r=this.comparePoint(t,n),i=this.comparePoint(t,n+1);return 0>r?i>0?ge:pe:i>0?he:me},comparePoint:function(e,t){return S(this),_(e,"HIERARCHY_REQUEST_ERR"),x(e,this.startContainer),V(e,t,this.startContainer,this.startOffset)<0?-1:V(e,t,this.endContainer,this.endOffset)>0?1:0},createContextualFragment:se,toHtml:function(){return M(this)},intersectsNode:function(e,t){if(S(this),q(e)!=i(this))return!1;var n=e.parentNode,r=Y(e);if(!n)return!0;var o=V(n,r,this.endContainer,this.endOffset),a=V(n,r+1,this.startContainer,this.startOffset);return t?0>=o&&a>=0:0>o&&a>0},isPointInRange:function(e,t){return S(this),_(e,"HIERARCHY_REQUEST_ERR"),x(e,this.startContainer),V(e,t,this.startContainer,this.startOffset)>=0&&V(e,t,this.endContainer,this.endOffset)<=0},intersectsRange:function(e){return l(this,e,!1)},intersectsOrTouchesRange:function(e){return l(this,e,!0)},intersection:function(e){if(this.intersectsRange(e)){var t=V(this.startContainer,this.startOffset,e.startContainer,e.startOffset),n=V(this.endContainer,this.endOffset,e.endContainer,e.endOffset),r=this.cloneRange();return-1==t&&r.setStart(e.startContainer,e.startOffset),1==n&&r.setEnd(e.endContainer,e.endOffset),r}return null},union:function(e){if(this.intersectsOrTouchesRange(e)){var t=this.cloneRange();return-1==V(e.startContainer,e.startOffset,this.startContainer,this.startOffset)&&t.setStart(e.startContainer,e.startOffset),1==V(e.endContainer,e.endOffset,this.endContainer,this.endOffset)&&t.setEnd(e.endContainer,e.endOffset),t}throw new I("Ranges do not intersect")},containsNode:function(e,t){return t?this.intersectsNode(e,!1):this.compareNode(e)==me},containsNodeContents:function(e){return this.comparePoint(e,0)>=0&&this.comparePoint(e,U(e))<=0},containsRange:function(e){var t=this.intersection(e);return null!==t&&e.equals(t)},containsNodeText:function(e){var t=this.cloneRange();t.selectNode(e);var n=t.getNodes([3]);if(n.length>0){t.setStart(n[0],0);var r=n.pop();return t.setEnd(r,r.length),this.containsRange(t)}return this.containsNodeContents(e)},getNodes:function(e,t){return S(this),p(this,e,t)},getDocument:function(){return r(this)},collapseBefore:function(e){this.setEndBefore(e),this.collapse(!1)},collapseAfter:function(e){this.setStartAfter(e),this.collapse(!0)},getBookmark:function(t){var n=r(this),i=e.createRange(n);t=t||F.getBody(n),i.selectNodeContents(t);var o=this.intersection(i),a=0,s=0;return o&&(i.setEnd(o.startContainer,o.startOffset),a=i.toString().length,s=a+o.toString().length),{start:a,end:s,containerNode:t}},moveToBookmark:function(e){var t=e.containerNode,n=0;this.setStart(t,0),this.collapse(!0);for(var r,i,o,a,s=[t],l=!1,u=!1;!u&&(r=s.pop());)if(3==r.nodeType)i=n+r.length,!l&&e.start>=n&&e.start<=i&&(this.setStart(r,e.start-n),l=!0),l&&e.end>=n&&e.end<=i&&(this.setEnd(r,e.end-n),u=!0),n=i;else for(a=r.childNodes,o=a.length;o--;)s.push(a[o])},getName:function(){return"DomRange"},equals:function(e){return P.rangesEqual(this,e)},isValid:function(){return k(this)},inspect:function(){return h(this)},detach:function(){}}),L(P,R),O.extend(P,{rangeProperties:le,RangeIterator:g,copyComparisonConstants:D,createPrototypeRange:L,inspect:h,toHtml:M,getRangeDocument:r,rangesEqual:function(e,t){return e.startContainer===t.startContainer&&e.startOffset===t.startOffset&&e.endContainer===t.endContainer&&e.endOffset===t.endOffset}}),e.DomRange=P}),R.createCoreModule("WrappedRange",["DomRange"],function(e,t){var n,r,i=e.dom,o=e.util,a=i.DomPosition,s=e.DomRange,l=i.getBody,u=i.getContentDocument,c=i.isCharacterDataNode;if(e.features.implementsDomRange&&function(){function r(e){for(var t,n=f.length;n--;)t=f[n],e[t]=e.nativeRange[t];e.collapsed=e.startContainer===e.endContainer&&e.startOffset===e.endOffset}function a(e,t,n,r,i){var o=e.startContainer!==t||e.startOffset!=n,a=e.endContainer!==r||e.endOffset!=i,s=!e.equals(e.nativeRange);(o||a||s)&&(e.setEnd(r,i),e.setStart(t,n))}var c,d,f=s.rangeProperties;n=function(e){if(!e)throw t.createError("WrappedRange: Range must be specified");this.nativeRange=e,r(this)},s.createPrototypeRange(n,a),(c=n.prototype).selectNode=function(e){this.nativeRange.selectNode(e),r(this)},c.cloneContents=function(){return this.nativeRange.cloneContents()},c.surroundContents=function(e){this.nativeRange.surroundContents(e),r(this)},c.collapse=function(e){this.nativeRange.collapse(e),r(this)},c.cloneRange=function(){return new n(this.nativeRange.cloneRange())},c.refresh=function(){r(this)},c.toString=function(){return this.nativeRange.toString()};var p=document.createTextNode("test");l(document).appendChild(p);var h=document.createRange();h.setStart(p,0),h.setEnd(p,0);try{h.setStart(p,1),c.setStart=function(e,t){this.nativeRange.setStart(e,t),r(this)},c.setEnd=function(e,t){this.nativeRange.setEnd(e,t),r(this)},d=function(e){return function(t){this.nativeRange[e](t),r(this)}}}catch(e){c.setStart=function(e,t){try{this.nativeRange.setStart(e,t)}catch(n){this.nativeRange.setEnd(e,t),this.nativeRange.setStart(e,t)}r(this)},c.setEnd=function(e,t){try{this.nativeRange.setEnd(e,t)}catch(n){this.nativeRange.setStart(e,t),this.nativeRange.setEnd(e,t)}r(this)},d=function(e,t){return function(n){try{this.nativeRange[e](n)}catch(r){this.nativeRange[t](n),this.nativeRange[e](n)}r(this)}}}c.setStartBefore=d("setStartBefore","setEndBefore"),c.setStartAfter=d("setStartAfter","setEndAfter"),c.setEndBefore=d("setEndBefore","setStartBefore"),c.setEndAfter=d("setEndAfter","setStartAfter"),c.selectNodeContents=function(e){this.setStartAndEnd(e,0,i.getNodeLength(e))},h.selectNodeContents(p),h.setEnd(p,3);var g=document.createRange();g.selectNodeContents(p),g.setEnd(p,4),g.setStart(p,2),-1==h.compareBoundaryPoints(h.START_TO_END,g)&&1==h.compareBoundaryPoints(h.END_TO_START,g)?c.compareBoundaryPoints=function(e,t){return t=t.nativeRange||t,e==t.START_TO_END?e=t.END_TO_START:e==t.END_TO_START&&(e=t.START_TO_END),this.nativeRange.compareBoundaryPoints(e,t)}:c.compareBoundaryPoints=function(e,t){return this.nativeRange.compareBoundaryPoints(e,t.nativeRange||t)};var m=document.createElement("div");m.innerHTML="123";var v=m.firstChild,y=l(document);y.appendChild(m),h.setStart(v,1),h.setEnd(v,2),h.deleteContents(),"13"==v.data&&(c.deleteContents=function(){this.nativeRange.deleteContents(),r(this)},c.extractContents=function(){var e=this.nativeRange.extractContents();return r(this),e}),y.removeChild(m),y=null,o.isHostMethod(h,"createContextualFragment")&&(c.createContextualFragment=function(e){return this.nativeRange.createContextualFragment(e)}),l(document).removeChild(p),c.getName=function(){return"WrappedRange"},e.WrappedRange=n,e.createNativeRange=function(e){return(e=u(e,t,"createNativeRange")).createRange()}}(),e.features.implementsTextRange){var d=function(e){var t=e.parentElement(),n=e.duplicate();n.collapse(!0);var r=n.parentElement();(n=e.duplicate()).collapse(!1);var o=n.parentElement(),a=r==o?r:i.getCommonAncestor(r,o);return a==t?a:i.getCommonAncestor(t,a)},f=function(e){return 0==e.compareEndPoints("StartToEnd",e)},p=function(e,t,n,r,o){var s=e.duplicate();s.collapse(n);var l=s.parentElement();if(i.isOrIsAncestorOf(t,l)||(l=t),!l.canHaveHTML){var u=new a(l.parentNode,i.getNodeIndex(l));return{boundaryPosition:u,nodeInfo:{nodeIndex:u.offset,containerElement:u.node}}}var d=i.getDocument(l).createElement("span");d.parentNode&&i.removeNode(d);for(var f,p,h,g,m,v=n?"StartToStart":"StartToEnd",y=o&&o.containerElement==l?o.nodeIndex:0,b=l.childNodes.length,x=b,w=x;w==b?l.appendChild(d):l.insertBefore(d,l.childNodes[w]),s.moveToElementText(d),0!=(f=s.compareEndPoints(v,e))&&y!=x;){if(-1==f){if(x==y+1)break;y=w}else x=x==y+1?y:w;w=Math.floor((y+x)/2),l.removeChild(d)}if(m=d.nextSibling,-1==f&&m&&c(m)){s.setEndPoint(n?"EndToStart":"EndToEnd",e);var _;if(/[\r\n]/.test(m.data)){var C=s.duplicate(),k=C.text.replace(/\r\n/g,"\r").length;for(_=C.moveStart("character",k);-1==(f=C.compareEndPoints("StartToEnd",C));)_++,C.moveStart("character",1)}else _=s.text.length;g=new a(m,_)}else p=(r||!n)&&d.previousSibling,h=(r||n)&&d.nextSibling,g=h&&c(h)?new a(h,0):p&&c(p)?new a(p,p.data.length):new a(l,i.getNodeIndex(d));return i.removeNode(d),{boundaryPosition:g,nodeInfo:{nodeIndex:w,containerElement:l}}},h=function(e,t){var n,r,o,a,s=e.offset,u=i.getDocument(e.node),d=l(u).createTextRange(),f=c(e.node);return f?(n=e.node,r=n.parentNode):(a=e.node.childNodes,n=s<a.length?a[s]:null,r=e.node),o=u.createElement("span"),o.innerHTML="&#feff;",n?r.insertBefore(o,n):r.appendChild(o),d.moveToElementText(o),d.collapse(!t),r.removeChild(o),f&&d[t?"moveStart":"moveEnd"]("character",s),d};(r=function(e){this.textRange=e,this.refresh()}).prototype=new s(document),r.prototype.refresh=function(){var e,t,n,r=d(this.textRange);f(this.textRange)?t=e=p(this.textRange,r,!0,!0).boundaryPosition:(n=p(this.textRange,r,!0,!1),e=n.boundaryPosition,t=p(this.textRange,r,!1,!1,n.nodeInfo).boundaryPosition),this.setStart(e.node,e.offset),this.setEnd(t.node,t.offset)},r.prototype.getName=function(){return"WrappedTextRange"},s.copyComparisonConstants(r);var g=function(e){if(e.collapsed)return h(new a(e.startContainer,e.startOffset),!0);var t=h(new a(e.startContainer,e.startOffset),!0),n=h(new a(e.endContainer,e.endOffset),!1),r=l(s.getRangeDocument(e)).createTextRange();return r.setEndPoint("StartToStart",t),r.setEndPoint("EndToEnd",n),r};if(r.rangeToTextRange=g,r.prototype.toTextRange=function(){return g(this)},e.WrappedTextRange=r,!e.features.implementsDomRange||e.config.preferTextRange){var m=function(e){return e("return this;")()}(Function);void 0===m.Range&&(m.Range=r),e.createNativeRange=function(e){return e=u(e,t,"createNativeRange"),l(e).createTextRange()},e.WrappedRange=r}}e.createRange=function(n){return n=u(n,t,"createRange"),new e.WrappedRange(e.createNativeRange(n))},e.createRangyRange=function(e){return e=u(e,t,"createRangyRange"),new s(e)},o.createAliasForDeprecatedMethod(e,"createIframeRange","createRange"),o.createAliasForDeprecatedMethod(e,"createIframeRangyRange","createRangyRange"),e.addShimListener(function(t){var n=t.document;void 0===n.createRange&&(n.createRange=function(){return e.createRange(n)}),n=t=null})}),R.createCoreModule("WrappedSelection",["DomRange","WrappedRange"],function(e,t){function n(e){return"string"==typeof e?/^backward(s)?$/i.test(e):!!e}function r(e,n){if(e){if(T.isWindow(e))return e;if(e instanceof v)return e.win;var r=T.getContentDocument(e,t,n);return T.getWindow(r)}return window}function i(e){return r(e,"getWinSelection").getSelection()}function o(e){return r(e,"getDocSelection").document.selection}function a(e){var t=!1;return e.anchorNode&&(t=1==T.comparePoints(e.anchorNode,e.anchorOffset,e.focusNode,e.focusOffset)),t}function s(e,t,n){var r=n?"end":"start",i=n?"start":"end";e.anchorNode=t[r+"Container"],e.anchorOffset=t[r+"Offset"],e.focusNode=t[i+"Container"],e.focusOffset=t[i+"Offset"]}function l(e){var t=e.nativeSelection;e.anchorNode=t.anchorNode,e.anchorOffset=t.anchorOffset,e.focusNode=t.focusNode,e.focusOffset=t.focusOffset}function u(e){e.anchorNode=e.focusNode=null,e.anchorOffset=e.focusOffset=0,e.rangeCount=0,e.isCollapsed=!0,e._ranges.length=0}function c(t){var n;return t instanceof L?((n=e.createNativeRange(t.getDocument())).setEnd(t.endContainer,t.endOffset),n.setStart(t.startContainer,t.startOffset)):t instanceof A?n=t.nativeRange:F.implementsDomRange&&t instanceof T.getWindow(t.startContainer).Range&&(n=t),n}function d(e){if(!e.length||1!=e[0].nodeType)return!1;for(var t=1,n=e.length;n>t;++t)if(!T.isAncestorOf(e[0],e[t]))return!1;return!0}function f(e){var n=e.getNodes();if(!d(n))throw t.createError("getSingleElementFromRange: range "+e.inspect()+" did not consist of a single element");return n[0]}function p(e){return!!e&&void 0!==e.text}function h(e,t){var n=new A(t);e._ranges=[n],s(e,n,!1),e.rangeCount=1,e.isCollapsed=n.collapsed}function g(t){if(t._ranges.length=0,"None"==t.docSelection.type)u(t);else{var n=t.docSelection.createRange();if(p(n))h(t,n);else{t.rangeCount=n.length;for(var r,i=N(n.item(0)),o=0;o<t.rangeCount;++o)(r=e.createRange(i)).selectNode(n.item(o)),t._ranges.push(r);t.isCollapsed=1==t.rangeCount&&t._ranges[0].collapsed,s(t,t._ranges[t.rangeCount-1],!1)}}}function m(e,n){for(var r=e.docSelection.createRange(),i=f(n),o=N(r.item(0)),a=I(o).createControlRange(),s=0,l=r.length;l>s;++s)a.add(r.item(s));try{a.add(i)}catch(e){throw t.createError("addRange(): Element within the specified Range could not be added to control selection (does it have layout?)")}a.select(),g(e)}function v(e,t,n){this.nativeSelection=e,this.docSelection=t,this._ranges=[],this.win=n,this.refresh()}function y(e){e.win=e.anchorNode=e.focusNode=e._ranges=null,e.rangeCount=e.anchorOffset=e.focusOffset=0,e.detached=!0}function b(e,t){for(var n,r,i=te.length;i--;)if(n=te[i],r=n.selection,"deleteAll"==t)y(r);else if(n.win==e)return"delete"==t?(te.splice(i,1),!0):r;return"deleteAll"==t&&(te.length=0),null}function x(e,n){for(var r,i=N(n[0].startContainer),o=I(i).createControlRange(),a=0,s=n.length;s>a;++a){r=f(n[a]);try{o.add(r)}catch(e){throw t.createError("setRanges(): Element within one of the specified Ranges could not be added to control selection (does it have layout?)")}}o.select(),g(e)}function w(e,t){if(e.win.document!=N(t))throw new R("WRONG_DOCUMENT_ERR")}function _(t){return function(n,r){var i;this.rangeCount?(i=this.getRangeAt(0))["set"+(t?"Start":"End")](n,r):(i=e.createRange(this.win.document)).setStartAndEnd(n,r),this.setSingleRange(i,this.isBackward())}}function C(e){var t=[],n=new P(e.anchorNode,e.anchorOffset),r=new P(e.focusNode,e.focusOffset),i="function"==typeof e.getName?e.getName():"Selection";if(void 0!==e.rangeCount)for(var o=0,a=e.rangeCount;a>o;++o)t[o]=L.inspect(e.getRangeAt(o));return"["+i+"(Ranges: "+t.join(", ")+")(anchor: "+n.inspect()+", focus: "+r.inspect()+"]"}e.config.checkSelectionRanges=!0;var k,S,$="boolean",M="number",T=e.dom,D=e.util,E=D.isHostMethod,L=e.DomRange,A=e.WrappedRange,R=e.DOMException,P=T.DomPosition,F=e.features,O="Control",N=T.getDocument,I=T.getBody,j=L.rangesEqual,Y=E(window,"getSelection"),z=D.isHostObject(document,"selection");F.implementsWinGetSelection=Y,F.implementsDocSelection=z;var H=z&&(!Y||e.config.preferTextRange);if(H)k=o,e.isSelectionValid=function(e){var t=r(e,"isSelectionValid").document,n=t.selection;return"None"!=n.type||N(n.createRange().parentElement())==t};else{if(!Y)return t.fail("Neither document.selection or window.getSelection() detected."),!1;k=i,e.isSelectionValid=function(){return!0}}e.getNativeSelection=k;var V=k();if(!V)return t.fail("Native selection was null (possibly issue 138?)"),!1;var B=e.createNativeRange(document),W=I(document),U=D.areHostProperties(V,["anchorNode","focusNode","anchorOffset","focusOffset"]);F.selectionHasAnchorAndFocus=U;var G=E(V,"extend");F.selectionHasExtend=G;var q=typeof V.rangeCount==M;F.selectionHasRangeCount=q;var K=!1,X=!0,J=G?function(t,n){var r=L.getRangeDocument(n),i=e.createRange(r);i.collapseToPoint(n.endContainer,n.endOffset),t.addRange(c(i)),t.extend(n.startContainer,n.startOffset)}:null;D.areHostMethods(V,["addRange","getRangeAt","removeAllRanges"])&&typeof V.rangeCount==M&&F.implementsDomRange&&function(){var t=window.getSelection();if(t){for(var n=t.rangeCount,r=n>1,i=[],o=a(t),s=0;n>s;++s)i[s]=t.getRangeAt(s);var l=T.createTestElement(document,"",!1),u=l.appendChild(document.createTextNode("   ")),c=document.createRange();if(c.setStart(u,1),c.collapse(!0),t.removeAllRanges(),t.addRange(c),X=1==t.rangeCount,t.removeAllRanges(),!r){var d=window.navigator.appVersion.match(/Chrome\/(.*?) /);if(d&&parseInt(d[1])>=36)K=!1;else{var f=c.cloneRange();c.setStart(u,0),f.setEnd(u,3),f.setStart(u,2),t.addRange(c),t.addRange(f),K=2==t.rangeCount}}for(T.removeNode(l),t.removeAllRanges(),s=0;n>s;++s)0==s&&o?J?J(t,i[s]):(e.warn("Rangy initialization: original selection was backwards but selection has been restored forwards because the browser does not support Selection.extend"),t.addRange(i[s])):t.addRange(i[s])}}(),F.selectionSupportsMultipleRanges=K,F.collapsedNonEditableSelectionsSupported=X;var Z,Q=!1;W&&E(W,"createControlRange")&&(Z=W.createControlRange(),D.areHostProperties(Z,["item","add"])&&(Q=!0)),F.implementsControlRange=Q,S=U?function(e){return e.anchorNode===e.focusNode&&e.anchorOffset===e.focusOffset}:function(e){return!!e.rangeCount&&e.getRangeAt(e.rangeCount-1).collapsed};var ee;E(V,"getRangeAt")?ee=function(e,t){try{return e.getRangeAt(t)}catch(e){return null}}:U&&(ee=function(t){var n=N(t.anchorNode),r=e.createRange(n);return r.setStartAndEnd(t.anchorNode,t.anchorOffset,t.focusNode,t.focusOffset),r.collapsed!==this.isCollapsed&&r.setStartAndEnd(t.focusNode,t.focusOffset,t.anchorNode,t.anchorOffset),r}),v.prototype=e.selectionPrototype;var te=[],ne=function(e){if(e&&e instanceof v)return e.refresh(),e;var t=b(e=r(e,"getNativeSelection")),n=k(e),i=z?o(e):null;return t?(t.nativeSelection=n,t.docSelection=i,t.refresh()):(t=new v(n,i,e),te.push({win:e,selection:t})),t};e.getSelection=ne,D.createAliasForDeprecatedMethod(e,"getIframeSelection","getSelection");var re=v.prototype;if(!H&&U&&D.areHostMethods(V,["removeAllRanges","addRange"])){re.removeAllRanges=function(){this.nativeSelection.removeAllRanges(),u(this)};var ie=function(e,t){J(e.nativeSelection,t),e.refresh()};re.addRange=q?function(t,r){if(Q&&z&&this.docSelection.type==O)m(this,t);else if(n(r)&&G)ie(this,t);else{var i;K?i=this.rangeCount:(this.removeAllRanges(),i=0);var o=c(t).cloneRange();try{this.nativeSelection.addRange(o)}catch(e){}if(this.rangeCount=this.nativeSelection.rangeCount,this.rangeCount==i+1){if(e.config.checkSelectionRanges){var a=ee(this.nativeSelection,this.rangeCount-1);a&&!j(a,t)&&(t=new A(a))}this._ranges[this.rangeCount-1]=t,s(this,t,se(this.nativeSelection)),this.isCollapsed=S(this)}else this.refresh()}}:function(e,t){n(t)&&G?ie(this,e):(this.nativeSelection.addRange(c(e)),this.refresh())},re.setRanges=function(e){if(Q&&z&&e.length>1)x(this,e);else{this.removeAllRanges();for(var t=0,n=e.length;n>t;++t)this.addRange(e[t])}}}else{if(!(E(V,"empty")&&E(B,"select")&&Q&&H))return t.fail("No means of selecting a Range or TextRange was found"),!1;re.removeAllRanges=function(){try{if(this.docSelection.empty(),"None"!=this.docSelection.type){var e;if(this.anchorNode)e=N(this.anchorNode);else if(this.docSelection.type==O){var t=this.docSelection.createRange();t.length&&(e=N(t.item(0)))}e&&(I(e).createTextRange().select(),this.docSelection.empty())}}catch(e){}u(this)},re.addRange=function(t){this.docSelection.type==O?m(this,t):(e.WrappedTextRange.rangeToTextRange(t).select(),this._ranges[0]=t,this.rangeCount=1,this.isCollapsed=this._ranges[0].collapsed,s(this,t,!1))},re.setRanges=function(e){this.removeAllRanges();var t=e.length;t>1?x(this,e):t&&this.addRange(e[0])}}re.getRangeAt=function(e){if(0>e||e>=this.rangeCount)throw new R("INDEX_SIZE_ERR");return this._ranges[e].cloneRange()};var oe;if(H)oe=function(t){var n;e.isSelectionValid(t.win)?n=t.docSelection.createRange():(n=I(t.win.document).createTextRange()).collapse(!0),t.docSelection.type==O?g(t):p(n)?h(t,n):u(t)};else if(E(V,"getRangeAt")&&typeof V.rangeCount==M)oe=function(t){if(Q&&z&&t.docSelection.type==O)g(t);else if(t._ranges.length=t.rangeCount=t.nativeSelection.rangeCount,t.rangeCount){for(var n=0,r=t.rangeCount;r>n;++n)t._ranges[n]=new e.WrappedRange(t.nativeSelection.getRangeAt(n));s(t,t._ranges[t.rangeCount-1],se(t.nativeSelection)),t.isCollapsed=S(t)}else u(t)};else{if(!U||typeof V.isCollapsed!=$||typeof B.collapsed!=$||!F.implementsDomRange)return t.fail("No means of obtaining a Range or TextRange from the user's selection was found"),!1;oe=function(e){var t,n=e.nativeSelection;n.anchorNode?(t=ee(n,0),e._ranges=[t],e.rangeCount=1,l(e),e.isCollapsed=S(e)):u(e)}}re.refresh=function(e){var t=e?this._ranges.slice(0):null,n=this.anchorNode,r=this.anchorOffset;if(oe(this),e){var i=t.length;if(i!=this._ranges.length)return!0;if(this.anchorNode!=n||this.anchorOffset!=r)return!0;for(;i--;)if(!j(t[i],this._ranges[i]))return!0;return!1}};var ae=function(e,t){var n=e.getAllRanges();e.removeAllRanges();for(var r=0,i=n.length;i>r;++r)j(t,n[r])||e.addRange(n[r]);e.rangeCount||u(e)};re.removeRange=Q&&z?function(e){if(this.docSelection.type==O){for(var t,n=this.docSelection.createRange(),r=f(e),i=N(n.item(0)),o=I(i).createControlRange(),a=!1,s=0,l=n.length;l>s;++s)t=n.item(s),t!==r||a?o.add(n.item(s)):a=!0;o.select(),g(this)}else ae(this,e)}:function(e){ae(this,e)};var se;!H&&U&&F.implementsDomRange?(se=a,re.isBackward=function(){return se(this)}):se=re.isBackward=function(){return!1},re.isBackwards=re.isBackward,re.toString=function(){for(var e=[],t=0,n=this.rangeCount;n>t;++t)e[t]=""+this._ranges[t];return e.join("")},re.collapse=function(t,n){w(this,t);var r=e.createRange(t);r.collapseToPoint(t,n),this.setSingleRange(r),this.isCollapsed=!0},re.collapseToStart=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[0];this.collapse(e.startContainer,e.startOffset)},re.collapseToEnd=function(){if(!this.rangeCount)throw new R("INVALID_STATE_ERR");var e=this._ranges[this.rangeCount-1];this.collapse(e.endContainer,e.endOffset)},re.selectAllChildren=function(t){w(this,t);var n=e.createRange(t);n.selectNodeContents(t),this.setSingleRange(n)},re.deleteFromDocument=function(){if(Q&&z&&this.docSelection.type==O){for(var e,t=this.docSelection.createRange();t.length;)e=t.item(0),t.remove(e),T.removeNode(e);this.refresh()}else if(this.rangeCount){var n=this.getAllRanges();if(n.length){this.removeAllRanges();for(var r=0,i=n.length;i>r;++r)n[r].deleteContents();this.addRange(n[i-1])}}},re.eachRange=function(e,t){for(var n=0,r=this._ranges.length;r>n;++n)if(e(this.getRangeAt(n)))return t},re.getAllRanges=function(){var e=[];return this.eachRange(function(t){e.push(t)}),e},re.setSingleRange=function(e,t){this.removeAllRanges(),this.addRange(e,t)},re.callMethodOnEachRange=function(e,t){var n=[];return this.eachRange(function(r){n.push(r[e].apply(r,t||[]))}),n},re.setStart=_(!0),re.setEnd=_(!1),e.rangePrototype.select=function(e){ne(this.getDocument()).setSingleRange(this,e)},re.changeEachRange=function(e){var t=[],n=this.isBackward();this.eachRange(function(n){e(n),t.push(n)}),this.removeAllRanges(),n&&1==t.length?this.addRange(t[0],"backward"):this.setRanges(t)},re.containsNode=function(e,t){return this.eachRange(function(n){return n.containsNode(e,t)},!0)||!1},re.getBookmark=function(e){return{backward:this.isBackward(),rangeBookmarks:this.callMethodOnEachRange("getBookmark",[e])}},re.moveToBookmark=function(t){for(var n,r,i=[],o=0;n=t.rangeBookmarks[o++];)(r=e.createRange(this.win)).moveToBookmark(n),i.push(r);t.backward?this.setSingleRange(i[0],"backward"):this.setRanges(i)},re.saveRanges=function(){return{backward:this.isBackward(),ranges:this.callMethodOnEachRange("cloneRange")}},re.restoreRanges=function(e){this.removeAllRanges();for(var t,n=0;t=e.ranges[n];++n)this.addRange(t,e.backward&&0==n)},re.toHtml=function(){var e=[];return this.eachRange(function(t){e.push(L.toHtml(t))}),e.join("")},F.implementsTextRange&&(re.getNativeTextRange=function(){var n;if(n=this.docSelection){var r=n.createRange();if(p(r))return r;throw t.createError("getNativeTextRange: selection is a control selection")}if(this.rangeCount>0)return e.WrappedTextRange.rangeToTextRange(this.getRangeAt(0));throw t.createError("getNativeTextRange: selection contains no range")}),re.getName=function(){return"WrappedSelection"},re.inspect=function(){return C(this)},re.detach=function(){b(this.win,"delete"),y(this)},v.detachAll=function(){b(null,"deleteAll")},v.inspect=C,v.isDirectionBackward=n,e.Selection=v,e.selectionPrototype=re,e.addShimListener(function(e){void 0===e.getSelection&&(e.getSelection=function(){return ne(e)}),e=null})});var I=!1,j=function(e){I||(I=!0,!R.initialized&&R.config.autoInitialize&&d())};return L&&("complete"==document.readyState?j():(e(document,"addEventListener")&&document.addEventListener("DOMContentLoaded",j,!1),F(window,"load",j))),R},this),function(t,n){"function"==typeof define&&define.amd?define(["./rangy-core"],t):"undefined"!=typeof module&&"object"==typeof e?module.exports=t(require("rangy")):t(n.rangy)}(function(e){return e.createModule("SaveRestore",["WrappedRange"],function(e,t){function n(e,t){return(t||document).getElementById(e)}function r(e,t){var n,r="selectionBoundary_"+ +new Date+"_"+(""+Math.random()).slice(2),i=h.getDocument(e.startContainer),o=e.cloneRange();return o.collapse(t),n=i.createElement("span"),n.id=r,n.style.lineHeight="0",n.style.display="none",n.className="rangySelectionBoundary",n.appendChild(i.createTextNode(v)),o.insertNode(n),n}function i(e,r,i,o){var a=n(i,e);a?(r[o?"setStartBefore":"setEndBefore"](a),g(a)):t.warn("Marker element has been removed. Cannot restore selection.")}function o(e,t){return t.compareBoundaryPoints(e.START_TO_START,e)}function a(t,n){var i,o,a=e.DomRange.getRangeDocument(t),s=t.toString(),l=m(n);return t.collapsed?(o=r(t,!1),{document:a,markerId:o.id,collapsed:!0}):(o=r(t,!1),i=r(t,!0),{document:a,startMarkerId:i.id,endMarkerId:o.id,collapsed:!1,backward:l,toString:function(){return"original text: '"+s+"', new text: '"+t.toString()+"'"}})}function s(r,o){var a=r.document;void 0===o&&(o=!0);var s=e.createRange(a);if(r.collapsed){var l=n(r.markerId,a);if(l){l.style.display="inline";var u=l.previousSibling;u&&3==u.nodeType?(g(l),s.collapseToPoint(u,u.length)):(s.collapseBefore(l),g(l))}else t.warn("Marker element has been removed. Cannot restore selection.")}else i(a,s,r.startMarkerId,!0),i(a,s,r.endMarkerId,!1);return o&&s.normalizeBoundaries(),s}function l(t,r){var i,s,l=[],u=m(r);(t=t.slice(0)).sort(o);for(var c=0,d=t.length;d>c;++c)l[c]=a(t[c],u);for(c=d-1;c>=0;--c)i=t[c],s=e.DomRange.getRangeDocument(i),i.collapsed?i.collapseAfter(n(l[c].markerId,s)):(i.setEndBefore(n(l[c].endMarkerId,s)),i.setStartAfter(n(l[c].startMarkerId,s)));return l}function u(n){if(!e.isSelectionValid(n))return t.warn("Cannot save selection. This usually happens when the selection is collapsed and the selection document has lost focus."),null;var r=e.getSelection(n),i=r.getAllRanges(),o=1==i.length&&r.isBackward(),a=l(i,o);return o?r.setSingleRange(i[0],o):r.setRanges(i),{win:n,rangeInfos:a,restored:!1}}function c(e){for(var t=[],n=e.length-1;n>=0;n--)t[n]=s(e[n],!0);return t}function d(t,n){if(!t.restored){var r=t.rangeInfos,i=e.getSelection(t.win),o=c(r);1==r.length&&n&&e.features.selectionHasExtend&&r[0].backward?(i.removeAllRanges(),i.addRange(o[0],!0)):i.setRanges(o),t.restored=!0}}function f(e,t){var r=n(t,e);r&&g(r)}function p(e){for(var t,n=e.rangeInfos,r=0,i=n.length;i>r;++r)t=n[r],t.collapsed?f(e.doc,t.markerId):(f(e.doc,t.startMarkerId),f(e.doc,t.endMarkerId))}var h=e.dom,g=h.removeNode,m=e.Selection.isDirectionBackward,v="\ufeff";e.util.extend(e,{saveRange:a,restoreRange:s,saveRanges:l,restoreRanges:c,saveSelection:u,restoreSelection:d,removeMarkerElement:f,removeMarkers:p})}),e},this)}({},function(){return this}()),function(e,t,n){"use strict";function r(){this.$get=["$$sanitizeUri",function(e){return function(t){void 0!==arguments[1]&&(arguments[1].version="taSanitize");var n=[];return a(t,d(n,function(t,n){return!/^unsafe/.test(e(t,n))})),n.join("")}}]}function i(e){var n=[];return d(n,t.noop).chars(e),n.join("")}function o(e){var t,n={},r=e.split(",");for(t=0;t<r.length;t++)n[r[t]]=!0;return n}function a(e,n){function r(e,r,o,a){if(r=t.lowercase(r),D[r])for(;c.last()&&E[c.last()];)i("",c.last());T[r]&&c.last()==r&&i("",r),(a=S[r]||!!a)||c.push(r);var l={};o.replace(g,function(e,t,n,r,i){var o=n||r||i||"";l[t]=s(o)}),n.start&&n.start(r,l,a)}function i(e,r){var i,o=0;if(r=t.lowercase(r))for(o=c.length-1;o>=0&&c[o]!=r;o--);if(o>=0){for(i=c.length-1;i>=o;i--)n.end&&n.end(c[i]);c.length=o}}"string"!=typeof e&&(e=null===e||void 0===e?"":""+e);var o,a,l,u,c=[],d=e;for(c.last=function(){return c[c.length-1]};e;){if(u="",a=!0,c.last()&&A[c.last()])e=e.replace(new RegExp("([^]*)<\\s*\\/\\s*"+c.last()+"[^>]*>","i"),function(e,t){return t=t.replace(y,"$1").replace(w,"$1"),n.chars&&n.chars(s(t)),""}),i("",c.last());else{if(k.test(e)){if(l=e.match(k)){l[0];n.whitespace&&n.whitespace(l[0]),e=e.replace(l[0],""),a=!1}}else b.test(e)?(l=e.match(b))&&(n.comment&&n.comment(l[1]),e=e.replace(l[0],""),a=!1):x.test(e)?(l=e.match(x))&&(e=e.replace(l[0],""),a=!1):v.test(e)?(l=e.match(h))&&(e=e.substring(l[0].length),l[0].replace(h,i),a=!1):m.test(e)&&((l=e.match(p))?(l[4]&&(e=e.substring(l[0].length),l[0].replace(p,r)),a=!1):(u+="<",e=e.substring(1)));a&&(u+=(o=e.indexOf("<"))<0?e:e.substring(0,o),e=o<0?"":e.substring(o),n.chars&&n.chars(s(u)))}if(e==d)throw f("badparse","The sanitizer was unable to parse the following block of html: {0}",e);d=e}i()}function s(e){if(!e)return"";var t=j.exec(e),n=t[1],r=t[3],i=t[2];return i&&(I.innerHTML=i.replace(/</g,"&lt;"),i="textContent"in I?I.textContent:I.innerText),n+i+r}function l(e){return e.replace(/&/g,"&amp;").replace(_,function(e){return"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";"}).replace(C,function(e){var t=e.charCodeAt(0);return t<=159||173==t||t>=1536&&t<=1540||1807==t||6068==t||6069==t||t>=8204&&t<=8207||t>=8232&&t<=8239||t>=8288&&t<=8303||65279==t||t>=65520&&t<=65535?"&#"+t+";":e}).replace(/</g,"&lt;").replace(/>/g,"&gt;")}function u(e){var n="",r=e.split(";");return t.forEach(r,function(e){var r=e.split(":");if(2==r.length){var i=Y(t.lowercase(r[0])),e=Y(t.lowercase(r[1]));(("color"===i||"background-color"===i)&&(e.match(/^rgb\([0-9%,\. ]*\)$/i)||e.match(/^rgba\([0-9%,\. ]*\)$/i)||e.match(/^hsl\([0-9%,\. ]*\)$/i)||e.match(/^hsla\([0-9%,\. ]*\)$/i)||e.match(/^#[0-9a-f]{3,6}$/i)||e.match(/^[a-z]*$/i))||"text-align"===i&&("left"===e||"right"===e||"center"===e||"justify"===e)||"text-decoration"===i&&("underline"===e||"line-through"===e)||"font-weight"===i&&"bold"===e||"float"===i&&("left"===e||"right"===e||"none"===e)||("width"===i||"height"===i)&&e.match(/[0-9\.]*(px|em|rem|%)/)||"direction"===i&&e.match(/^ltr|rtl|initial|inherit$/))&&(n+=i+": "+e+";")}}),n}function c(e,t,n,r){return!("img"!==e||!t["ta-insert-video"]||"ta-insert-video"!==n&&"allowfullscreen"!==n&&"frameborder"!==n&&("contenteditable"!==n||"false"!==r))}function d(e,n){var r=!1,i=t.bind(e,e.push);return{start:function(e,o,a){e=t.lowercase(e),!r&&A[e]&&(r=e),r||!0!==R[e]||(i("<"),i(e),t.forEach(o,function(r,a){var s=t.lowercase(a),d="img"===e&&"src"===s||"background"===s;("style"===s&&""!==(r=u(r))||c(e,o,s,r)||!0===N[s]&&(!0!==P[s]||n(r,d)))&&(i(" "),i(a),i('="'),i(l(r)),i('"'))}),i(a?"/>":">"))},comment:function(e){i(e)},whitespace:function(e){i(l(e))},end:function(e){e=t.lowercase(e),r||!0!==R[e]||(i("</"),i(e),i(">")),e==r&&(r=!1)},chars:function(e){r||i(l(e))}}}var f=t.$$minErr("$sanitize"),p=/^<((?:[a-zA-Z])[\w:-]*)((?:\s+[\w:-]+(?:\s*=\s*(?:(?:"[^"]*")|(?:'[^']*')|[^>\s]+))?)*)\s*(\/?)\s*(>?)/,h=/^<\/\s*([\w:-]+)[^>]*>/,g=/([\w:-]+)(?:\s*=\s*(?:(?:"((?:[^"])*)")|(?:'((?:[^'])*)')|([^>\s]+)))?/g,m=/^</,v=/^<\//,y=/<!--(.*?)-->/g,b=/(^<!--.*?-->)/,x=/<!DOCTYPE([^>]*?)>/i,w=/<!\[CDATA\[(.*?)]]>/g,_=/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,C=/([^\#-~| |!])/g,k=/^(\s+)/,S=o("area,br,col,hr,img,wbr,input"),$=o("colgroup,dd,dt,li,p,tbody,td,tfoot,th,thead,tr"),M=o("rp,rt"),T=t.extend({},M,$),D=t.extend({},$,o("address,article,aside,blockquote,caption,center,del,dir,div,dl,figure,figcaption,footer,h1,h2,h3,h4,h5,h6,header,hgroup,hr,ins,map,menu,nav,ol,pre,script,section,table,ul")),E=t.extend({},M,o("a,abbr,acronym,b,bdi,bdo,big,br,cite,code,del,dfn,em,font,i,img,ins,kbd,label,map,mark,q,ruby,rp,rt,s,samp,small,span,strike,strong,sub,sup,time,tt,u,var")),L=o("animate,animateColor,animateMotion,animateTransform,circle,defs,desc,ellipse,font-face,font-face-name,font-face-src,g,glyph,hkern,image,linearGradient,line,marker,metadata,missing-glyph,mpath,path,polygon,polyline,radialGradient,rect,set,stop,svg,switch,text,title,tspan,use"),A=o("script,style"),R=t.extend({},S,D,E,T,L),P=o("background,cite,href,longdesc,src,usemap,xlink:href"),F=o("abbr,align,alt,axis,bgcolor,border,cellpadding,cellspacing,class,clear,color,cols,colspan,compact,coords,dir,face,headers,height,hreflang,hspace,id,ismap,lang,language,nohref,nowrap,rel,rev,rows,rowspan,rules,scope,scrolling,shape,size,span,start,summary,target,title,type,valign,value,vspace,width"),O=o("accent-height,accumulate,additive,alphabetic,arabic-form,ascent,attributeName,attributeType,baseProfile,bbox,begin,by,calcMode,cap-height,class,color,color-rendering,content,cx,cy,d,dx,dy,descent,display,dur,end,fill,fill-rule,font-family,font-size,font-stretch,font-style,font-variant,font-weight,from,fx,fy,g1,g2,glyph-name,gradientUnits,hanging,height,horiz-adv-x,horiz-origin-x,ideographic,k,keyPoints,keySplines,keyTimes,lang,marker-end,marker-mid,marker-start,markerHeight,markerUnits,markerWidth,mathematical,max,min,offset,opacity,orient,origin,overline-position,overline-thickness,panose-1,path,pathLength,points,preserveAspectRatio,r,refX,refY,repeatCount,repeatDur,requiredExtensions,requiredFeatures,restart,rotate,rx,ry,slope,stemh,stemv,stop-color,stop-opacity,strikethrough-position,strikethrough-thickness,stroke,stroke-dasharray,stroke-dashoffset,stroke-linecap,stroke-linejoin,stroke-miterlimit,stroke-opacity,stroke-width,systemLanguage,target,text-anchor,to,transform,type,u1,u2,underline-position,underline-thickness,unicode,unicode-range,units-per-em,values,version,viewBox,visibility,width,widths,x,x-height,x1,x2,xlink:actuate,xlink:arcrole,xlink:role,xlink:show,xlink:title,xlink:type,xml:base,xml:lang,xml:space,xmlns,xmlns:xlink,y,y1,y2,zoomAndPan"),N=t.extend({},P,O,F),I=document.createElement("pre"),j=/^(\s*)([\s\S]*?)(\s*)$/,Y=function(){return String.prototype.trim?function(e){return t.isString(e)?e.trim():e}:function(e){return t.isString(e)?e.replace(/^\s\s*/,"").replace(/\s\s*$/,""):e}}();t.module("ngSanitize",[]).provider("$sanitize",r),t.module("ngSanitize").filter("linky",["$sanitize",function(e){var n=/((ftp|https?):\/\/|(www\.)|(mailto:)?[A-Za-z0-9._%+-]+@)\S*[^\s.;,(){}<>"”’]/,r=/^mailto:/;return function(o,a){function s(e){e&&f.push(i(e))}if(!o)return o;for(var l,u,c,d=o,f=[];l=d.match(n);)u=l[0],l[2]||l[4]||(u=(l[3]?"http://":"mailto:")+u),c=l.index,s(d.substr(0,c)),function(e,n){f.push("<a "),t.isDefined(a)&&f.push('target="',a,'" '),f.push('href="',e.replace(/"/g,"&quot;"),'">'),s(n),f.push("</a>")}(u,l[0].replace(r,"")),d=d.substring(c+l[0].length);return s(d),e(f.join(""))}}])}(window,window.angular),"undefined"!=typeof module&&"undefined"!=typeof exports&&module.exports===exports&&(module.exports="textAngular"),function(){"use strict";var e={ie:function(){for(var e=3,t=document.createElement("div"),n=t.getElementsByTagName("i");t.innerHTML="\x3c!--[if gt IE "+ ++e+"]><i></i><![endif]--\x3e",n[0];);return e>4?e:void 0}(),webkit:/AppleWebKit\/([\d.]+)/i.test(navigator.userAgent)},t=!1;e.webkit&&(document.addEventListener("mousedown",function(e){var n=(e||window.event).target;if(t&&null!==n){for(var r=!1,i=n;null!==i&&"html"!==i.tagName.toLowerCase()&&!r;)r="true"===i.contentEditable,i=i.parentNode;r||(document.getElementById("textAngular-editableFix-010203040506070809").setSelectionRange(0,0),n.focus(),n.select&&n.select())}t=!1},!1),angular.element(document).ready(function(){angular.element(document.body).append(angular.element('<input id="textAngular-editableFix-010203040506070809" class="ta-hidden-input" aria-hidden="true" unselectable="on" tabIndex="-1">'))}));var n=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video)$/i,r=/^(ul|li|ol)$/i,i=/^(address|article|aside|audio|blockquote|canvas|dd|div|dl|fieldset|figcaption|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|noscript|ol|output|p|pre|section|table|tfoot|ul|video|li)$/i;String.prototype.trim||(String.prototype.trim=function(){return this.replace(/^\s+|\s+$/g,"")});var o,a,s,l,u,c;if(e.ie>8||void 0===e.ie){for(var d=document.styleSheets,f=0;f<d.length;f++)if((0===d[f].media.length||d[f].media.mediaText.match(/(all|screen)/gi))&&d[f].href&&d[f].href.match(/textangular\.(min\.|)css/gi)){o=d[f];break}o||(o=function(){var t=document.createElement("style");return e.webkit&&t.appendChild(document.createTextNode("")),document.getElementsByTagName("head")[0].appendChild(t),t.sheet}()),a=function(e,t){return l(o,e,t)},l=function(e,t,n){var r,i;return e.cssRules?r=Math.max(e.cssRules.length-1,0):e.rules&&(r=Math.max(e.rules.length-1,0)),e.insertRule?e.insertRule(t+"{"+n+"}",r):e.addRule(t,n,r),o.rules?i=o.rules[r]:o.cssRules&&(i=o.cssRules[r]),i},c=function(e,t){var n,r;for(n=0;n<t.length;n++)if(t[n].cssText===e.cssText){r=n;break}return r},s=function(e){u(o,e)},u=function(e,t){var n=e.cssRules||e.rules;if(n&&0!==n.length){var r=c(t,n);e.removeRule?e.removeRule(r):e.deleteRule(r)}}}angular.module("textAngular.factories",[]).factory("taBrowserTag",[function(){return function(t){return t?""===t?void 0===e.ie?"div":e.ie<=8?"P":"p":e.ie<=8?t.toUpperCase():t:e.ie<=8?"P":"p"}}]).factory("taApplyCustomRenderers",["taCustomRenderers","taDOM",function(e,t){return function(n){var r=angular.element("<div></div>");return r[0].innerHTML=n,angular.forEach(e,function(e){var n=[];e.selector&&""!==e.selector?n=r.find(e.selector):e.customAttribute&&""!==e.customAttribute&&(n=t.getByAttribute(r,e.customAttribute)),angular.forEach(n,function(t){t=angular.element(t),e.selector&&""!==e.selector&&e.customAttribute&&""!==e.customAttribute?void 0!==t.attr(e.customAttribute)&&e.renderLogic(t):e.renderLogic(t)})}),r[0].innerHTML}}]).factory("taFixChrome",function(){return function(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n,r,i=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,o="",a=0;t=i.exec(e);)(n=t[3]||t[4])&&n.match(/line-height: 1.[0-9]{3,12};|color: inherit; line-height: 1.1;/i)&&(n=n.replace(/( |)font-family: inherit;|( |)line-height: 1.[0-9]{3,12};|( |)color: inherit;/gi,""),r="<"+t[1].trim(),n.trim().length>0&&(r+=" style="+t[2].substring(0,1)+n+t[2].substring(0,1)),r+=t[5].trim()+">",o+=e.substring(a,t.index)+r,a=t.index+t[0].length);return o+=e.substring(a),a>0?o.replace(/<span\s?>(.*?)<\/span>(<br(\/|)>|)/gi,"$1"):e}}).factory("taSanitize",["$sanitize",function(e){function t(e,t){for(var n,r=0,i=0,o=/<[^>]*>/gi;n=o.exec(e);)if(i=n.index,"/"===n[0].substr(1,1)){if(0===r)break;r--}else r++;return t+e.substring(0,i)+angular.element(t)[0].outerHTML.substring(t.length)+e.substring(i)}function n(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var r,o,a,s,l,c,d=/<([^>\/]+?)style=("([^"]+)"|'([^']+)')([^>]*)>/gi,f="",p="",h=0;o=d.exec(e);){s=o[3]||o[4];var g=new RegExp(u,"i");if(angular.isString(s)&&g.test(s)){l="";for(var m=new RegExp(u,"ig");a=m.exec(s);)for(r=0;r<i.length;r++)a[2*r+2]&&(l+="<"+i[r].tag+">");c=n(e.substring(h,o.index)),f.length>0?p+=t(c,f):p+=c,s=s.replace(new RegExp(u,"ig"),""),p+="<"+o[1].trim(),s.length>0&&(p+=' style="'+s+'"'),p+=o[5]+">",h=o.index+o[0].length,f=l}}return f.length>0?p+=t(e.substring(h),f):p+=e.substring(h),p}function r(e){if(!e||!angular.isString(e)||e.length<=0)return e;for(var t,n=/<([^>\/]+?)align=("([^"]+)"|'([^']+)')([^>]*)>/gi,r="",i=0;t=n.exec(e);){r+=e.substring(i,t.index),i=t.index+t[0].length;var o="<"+t[1]+t[5];/style=("([^"]+)"|'([^']+)')/gi.test(o)?o=o.replace(/style=("([^"]+)"|'([^']+)')/i,'style="$2$3 text-align:'+(t[3]||t[4])+';"'):o+=' style="text-align:'+(t[3]||t[4])+';"',r+=o+=">"}return r+e.substring(i)}for(var i=[{property:"font-weight",values:["bold"],tag:"b"},{property:"font-style",values:["italic"],tag:"i"}],o=[],a=0;a<i.length;a++){for(var s="("+i[a].property+":\\s*(",l=0;l<i[a].values.length;l++)l>0&&(s+="|"),s+=i[a].values[l];s+=");)",o.push(s)}var u="("+o.join("|")+")";return function(t,i,o){if(!o)try{t=n(t)}catch(e){}t=r(t);var a;try{a=e(t),o&&(a=t)}catch(e){a=i||""}var s,l=a.match(/(<pre[^>]*>.*?<\/pre[^>]*>)/gi),u=a.replace(/(&#(9|10);)*/gi,""),c=/<pre[^>]*>.*?<\/pre[^>]*>/gi,d=0,f=0;for(a="";null!==(s=c.exec(u))&&d<l.length;)a+=u.substring(f,s.index)+l[d],f=s.index+s[0].length,d++;return a+u.substring(f)}}]).factory("taToolExecuteAction",["$q","$log",function(e,t){return function(n){void 0!==n&&(this.$editor=function(){return n});var r,i=e.defer(),o=i.promise,a=this.$editor();try{r=this.action(i,a.startAction()),o.finally(function(){a.endAction.call(a)})}catch(e){t.error(e)}(r||void 0===r)&&i.resolve()}}]),angular.module("textAngular.DOM",["textAngular.factories"]).factory("taExecCommand",["taSelection","taBrowserTag","$document",function(e,t,i){var o=function(t,n){var r,i,o=t.find("li");for(i=o.length-1;i>=0;i--)r=angular.element("<"+n+">"+o[i].innerHTML+"</"+n+">"),t.after(r);t.remove(),e.setSelectionToElementEnd(r[0])},a=function(t){/(<br(|\/)>)$/i.test(t.innerHTML.trim())?e.setSelectionBeforeElement(angular.element(t).find("br")[0]):e.setSelectionToElementEnd(t)},s=function(e,t){var n=angular.element("<"+t+">"+e[0].innerHTML+"</"+t+">");e.after(n),e.remove(),a(n.find("li")[0])},l=function(e,n,r){for(var i="",o=0;o<e.length;o++)i+="<"+t("li")+">"+e[o].innerHTML+"</"+t("li")+">";var s=angular.element("<"+r+">"+i+"</"+r+">");n.after(s),n.remove(),a(s.find("li")[0])};return function(a,u){return a=t(a),function(c,d,f,p){var h,g,m,v,y,b,x,w=angular.element("<"+a+">");try{x=e.getSelectionElement()}catch(e){}var _=angular.element(x);if(void 0!==x){var C=x.tagName.toLowerCase();if("insertorderedlist"===c.toLowerCase()||"insertunorderedlist"===c.toLowerCase()){var k=t("insertorderedlist"===c.toLowerCase()?"ol":"ul");if(C===k)return o(_,a);if("li"===C&&_.parent()[0].tagName.toLowerCase()===k&&1===_.parent().children().length)return o(_.parent(),a);if("li"===C&&_.parent()[0].tagName.toLowerCase()!==k&&1===_.parent().children().length)return s(_.parent(),k);if(C.match(n)&&!_.hasClass("ta-bind")){if("ol"===C||"ul"===C)return s(_,k);var S=!1;return angular.forEach(_.children(),function(e){e.tagName.match(n)&&(S=!0)}),S?l(_.children(),_,k):l([angular.element("<div>"+x.innerHTML+"</div>")[0]],_,k)}if(C.match(n)){if(0===(v=e.getOnlySelectedElements()).length)g=angular.element("<"+k+"><li>"+x.innerHTML+"</li></"+k+">"),_.html(""),_.append(g);else{if(1===v.length&&("ol"===v[0].tagName.toLowerCase()||"ul"===v[0].tagName.toLowerCase()))return v[0].tagName.toLowerCase()===k?o(angular.element(v[0]),a):s(angular.element(v[0]),k);m="";var $=[];for(h=0;h<v.length;h++)if(3!==v[h].nodeType){var M=angular.element(v[h]);if("li"===v[h].tagName.toLowerCase())continue;"ol"===v[h].tagName.toLowerCase()||"ul"===v[h].tagName.toLowerCase()?m+=M[0].innerHTML:"span"!==v[h].tagName.toLowerCase()||"ol"!==v[h].childNodes[0].tagName.toLowerCase()&&"ul"!==v[h].childNodes[0].tagName.toLowerCase()?m+="<"+t("li")+">"+M[0].innerHTML+"</"+t("li")+">":m+=M[0].childNodes[0].innerHTML,$.unshift(M)}g=angular.element("<"+k+">"+m+"</"+k+">"),$.pop().replaceWith(g),angular.forEach($,function(e){e.remove()})}return void e.setSelectionToElementEnd(g[0])}}else{if("formatblock"===c.toLowerCase()){for("default"===(b=f.toLowerCase().replace(/[<>]/gi,"")).trim()&&(b=a,f="<"+a+">"),g="li"===C?_.parent():_;!g[0].tagName||!g[0].tagName.match(n)&&!g.parent().attr("contenteditable");)C=((g=g.parent())[0].tagName||"").toLowerCase();if(C===b){v=g.children();var T=!1;for(h=0;h<v.length;h++)T=T||v[h].tagName.match(n);T?(g.after(v),y=g.next(),g.remove(),g=y):(w.append(g[0].childNodes),g.after(w),g.remove(),g=w)}else if(g.parent()[0].tagName.toLowerCase()!==b||g.parent().hasClass("ta-bind"))if(C.match(r))g.wrap(f);else{for(0===(v=e.getOnlySelectedElements()).length&&(v=[g[0]]),h=0;h<v.length;h++)if(3===v[h].nodeType||!v[h].tagName.match(n))for(;3===v[h].nodeType||!v[h].tagName||!v[h].tagName.match(n);)v[h]=v[h].parentNode;if(angular.element(v[0]).hasClass("ta-bind"))(g=angular.element(f))[0].innerHTML=v[0].innerHTML,v[0].innerHTML=g[0].outerHTML;else if("blockquote"===b){for(m="",h=0;h<v.length;h++)m+=v[h].outerHTML;for((g=angular.element(f))[0].innerHTML=m,v[0].parentNode.insertBefore(g[0],v[0]),h=v.length-1;h>=0;h--)v[h].parentNode&&v[h].parentNode.removeChild(v[h])}else for(h=0;h<v.length;h++)(g=angular.element(f))[0].innerHTML=v[h].innerHTML,v[h].parentNode.insertBefore(g[0],v[h]),v[h].parentNode.removeChild(v[h])}else{var D=g.parent(),E=D.contents();for(h=0;h<E.length;h++)D.parent().hasClass("ta-bind")&&3===E[h].nodeType&&((w=angular.element("<"+a+">"))[0].innerHTML=E[h].outerHTML,E[h]=w[0]),D.parent()[0].insertBefore(E[h],D[0]);D.remove()}return void e.setSelectionToElementEnd(g[0])}if("createlink"===c.toLowerCase()){var L='<a href="'+f+'" target="'+(p.a.target?p.a.target:"")+'">';if(e.getSelection().collapsed)e.insertHtml(L+f+"</a>",u);else if(rangy.getSelection().getRangeAt(0).canSurroundContents()){var A=angular.element(L+"</a>")[0];rangy.getSelection().getRangeAt(0).surroundContents(A)}return}if("inserthtml"===c.toLowerCase())return void e.insertHtml(f,u)}}try{i[0].execCommand(c,d,f)}catch(e){}}}}]).service("taSelection",["$window","$document","taDOM",function(e,t,r){var o=t[0],a=e.rangy,s=function(e,t){return e.tagName&&e.tagName.match(/^br$/i)&&0===t&&!e.previousSibling?{element:e.parentNode,offset:0}:{element:e,offset:t}},l={getSelection:function(){var e=a.getSelection().getRangeAt(0),t=e.commonAncestorContainer,n={start:s(e.startContainer,e.startOffset),end:s(e.endContainer,e.endOffset),collapsed:e.collapsed};return t=3===t.nodeType?t.parentNode:t,t.parentNode===n.start.element||t.parentNode===n.end.element?n.container=t.parentNode:n.container=t,n},getOnlySelectedElements:function(){var e=a.getSelection().getRangeAt(0),t=e.commonAncestorContainer;return t=3===t.nodeType?t.parentNode:t,e.getNodes([1],function(e){return e.parentNode===t})},getSelectionElement:function(){return l.getSelection().container},setSelection:function(e,t,n){var r=a.createRange();r.setStart(e,t),r.setEnd(e,n),a.getSelection().setSingleRange(r)},setSelectionBeforeElement:function(e){var t=a.createRange();t.selectNode(e),t.collapse(!0),a.getSelection().setSingleRange(t)},setSelectionAfterElement:function(e){var t=a.createRange();t.selectNode(e),t.collapse(!1),a.getSelection().setSingleRange(t)},setSelectionToElementStart:function(e){var t=a.createRange();t.selectNodeContents(e),t.collapse(!0),a.getSelection().setSingleRange(t)},setSelectionToElementEnd:function(e){var t=a.createRange();t.selectNodeContents(e),t.collapse(!1),e.childNodes&&e.childNodes[e.childNodes.length-1]&&"br"===e.childNodes[e.childNodes.length-1].nodeName&&(t.startOffset=t.endOffset=t.startOffset-1),a.getSelection().setSingleRange(t)},insertHtml:function(e,t){var s,u,c,d,f,p,h,g=angular.element("<div>"+e+"</div>"),m=a.getSelection().getRangeAt(0),v=o.createDocumentFragment(),y=g[0].childNodes,b=!0;if(y.length>0){for(d=[],c=0;c<y.length;c++)"p"===y[c].nodeName.toLowerCase()&&""===y[c].innerHTML.trim()||3===y[c].nodeType&&""===y[c].nodeValue.trim()||(b=b&&!n.test(y[c].nodeName),d.push(y[c]));for(var x=0;x<d.length;x++)p=v.appendChild(d[x]);!b&&m.collapsed&&/^(|<br(|\/)>)$/i.test(m.startContainer.innerHTML)&&m.selectNode(m.startContainer)}else b=!0,p=v=o.createTextNode(e);if(b)m.deleteContents();else if(m.collapsed&&m.startContainer!==t)if(m.startContainer.innerHTML&&m.startContainer.innerHTML.match(/^<[^>]*>$/i))s=m.startContainer,1===m.startOffset?(m.setStartAfter(s),m.setEndAfter(s)):(m.setStartBefore(s),m.setEndBefore(s));else{if(3===m.startContainer.nodeType&&m.startContainer.parentNode!==t)for(u=(s=m.startContainer.parentNode).cloneNode(),r.splitNodes(s.childNodes,s,u,m.startContainer,m.startOffset);!i.test(s.nodeName);){angular.element(s).after(u);var w=u;u=(s=s.parentNode).cloneNode(),r.splitNodes(s.childNodes,s,u,w)}else u=(s=m.startContainer).cloneNode(),r.splitNodes(s.childNodes,s,u,void 0,void 0,m.startOffset);if(angular.element(s).after(u),m.setStartAfter(s),m.setEndAfter(s),/^(|<br(|\/)>)$/i.test(s.innerHTML.trim())&&(m.setStartBefore(s),m.setEndBefore(s),angular.element(s).remove()),/^(|<br(|\/)>)$/i.test(u.innerHTML.trim())&&angular.element(u).remove(),"li"===s.nodeName.toLowerCase()){for(h=o.createDocumentFragment(),f=0;f<v.childNodes.length;f++)g=angular.element("<li>"),r.transferChildNodes(v.childNodes[f],g[0]),r.transferNodeAttributes(v.childNodes[f],g[0]),h.appendChild(g[0]);v=h,p&&(p=(p=v.childNodes[v.childNodes.length-1]).childNodes[p.childNodes.length-1])}}else m.deleteContents();m.insertNode(v),p&&l.setSelectionToElementEnd(p)}};return l}]).service("taDOM",function(){var e={getByAttribute:function(t,n){var r=[],i=t.children();return i.length&&angular.forEach(i,function(t){r=r.concat(e.getByAttribute(angular.element(t),n))}),void 0!==t.attr(n)&&r.push(t),r},transferChildNodes:function(e,t){for(t.innerHTML="";e.childNodes.length>0;)t.appendChild(e.childNodes[0]);return t},splitNodes:function(t,n,r,i,o,a){if(!i&&isNaN(a))throw new Error("taDOM.splitNodes requires a splitNode or splitIndex");for(var s=document.createDocumentFragment(),l=document.createDocumentFragment(),u=0;t.length>0&&(isNaN(a)||a!==u)&&t[0]!==i;)s.appendChild(t[0]),u++;for(!isNaN(o)&&o>=0&&t[0]&&(s.appendChild(document.createTextNode(t[0].nodeValue.substring(0,o))),t[0].nodeValue=t[0].nodeValue.substring(o));t.length>0;)l.appendChild(t[0]);e.transferChildNodes(s,n),e.transferChildNodes(l,r)},transferNodeAttributes:function(e,t){for(var n=0;n<e.attributes.length;n++)t.setAttribute(e.attributes[n].name,e.attributes[n].value);return t}};return e}),angular.module("textAngular.validators",[]).directive("taMaxText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMaxText));if(isNaN(i))throw"Max text must be an integer";n.$observe("taMaxText",function(e){if(i=parseInt(e),isNaN(i))throw"Max text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMaxText=function(e){var t=angular.element("<div/>");return t.html(e),t.text().length<=i}}}}).directive("taMinText",function(){return{restrict:"A",require:"ngModel",link:function(e,t,n,r){var i=parseInt(e.$eval(n.taMinText));if(isNaN(i))throw"Min text must be an integer";n.$observe("taMinText",function(e){if(i=parseInt(e),isNaN(i))throw"Min text must be an integer";r.$dirty&&r.$validate()}),r.$validators.taMinText=function(e){var t=angular.element("<div/>");return t.html(e),!t.text().length||t.text().length>=i}}}}),angular.module("textAngular.taBind",["textAngular.factories","textAngular.DOM"]).service("_taBlankTest",[function(){var e=/<(a|abbr|acronym|bdi|bdo|big|cite|code|del|dfn|img|ins|kbd|label|map|mark|q|ruby|rp|rt|s|samp|time|tt|var)[^>]*(>|$)/i;return function(t){return function(n){if(!n)return!0;var r,i=/(^[^<]|>)[^<]/i.exec(n);return r=i?i.index:(n=n.toString().replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"").replace(/="[^"]*"/i,"")).indexOf(">"),n=n.trim().substring(r,r+100),!/^[^<>]+$/i.test(n)&&(!(0!==n.length&&n!==t&&!/^>(\s|&nbsp;)*<\/[^>]+>$/gi.test(n))||!/>\s*[^\s<]/i.test(n)&&!e.test(n))}}}]).directive("taButton",[function(){return{link:function(e,t,n){t.attr("unselectable","on"),t.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1})}}}]).directive("taBind",["taSanitize","$timeout","$window","$document","taFixChrome","taBrowserTag","taSelection","taSelectableElements","taApplyCustomRenderers","taOptions","_taBlankTest","$parse","taDOM","textAngularManager",function(r,o,l,u,c,d,f,h,g,m,v,y,b,x){return{priority:2,require:["ngModel","?ngModelOptions"],link:function(d,w,_,C){function k(e){var t;return V.forEach(function(n){if(n.keyCode===e.keyCode){var r=(e.metaKey?Y:0)+(e.ctrlKey?j:0)+(e.shiftKey?H:0)+(e.altKey?z:0);if(n.forbiddenModifiers&r)return;n.mustHaveModifiers.every(function(e){return r&e})&&(t=n.specialKey)}}),t}var S,$,M,T,D=C[0],E=C[1]||{},L=void 0!==w.attr("contenteditable")&&w.attr("contenteditable"),A=L||"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase(),R=!1,P=!1,F=!1,O=_.taUnsafeSanitizer||m.disableSanitizer,N=/^(9|19|20|27|33|34|35|36|37|38|39|40|45|112|113|114|115|116|117|118|119|120|121|122|123|144|145)$/i,I=/^(8|13|32|46|59|61|107|109|173|186|187|188|189|190|191|192|219|220|221|222)$/i,j=1,Y=2,z=4,H=8,V=[{specialKey:"UndoKey",forbiddenModifiers:z+H,mustHaveModifiers:[Y+j],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:z,mustHaveModifiers:[Y+j,H],keyCode:90},{specialKey:"RedoKey",forbiddenModifiers:z+H,mustHaveModifiers:[Y+j],keyCode:89},{specialKey:"TabKey",forbiddenModifiers:Y+H+z+j,mustHaveModifiers:[],keyCode:9},{specialKey:"ShiftTabKey",forbiddenModifiers:Y+z+j,mustHaveModifiers:[H],keyCode:9}];void 0===_.taDefaultWrap&&(_.taDefaultWrap="p"),""===_.taDefaultWrap?(M="",T=void 0===e.ie?"<div><br></div>":e.ie>=11?"<p><br></p>":e.ie<=8?"<P>&nbsp;</P>":"<p>&nbsp;</p>"):(M=void 0===e.ie||e.ie>=11?"<"+_.taDefaultWrap+"><br></"+_.taDefaultWrap+">":e.ie<=8?"<"+_.taDefaultWrap.toUpperCase()+"></"+_.taDefaultWrap.toUpperCase()+">":"<"+_.taDefaultWrap+"></"+_.taDefaultWrap+">",T=void 0===e.ie||e.ie>=11?"<"+_.taDefaultWrap+"><br></"+_.taDefaultWrap+">":e.ie<=8?"<"+_.taDefaultWrap.toUpperCase()+">&nbsp;</"+_.taDefaultWrap.toUpperCase()+">":"<"+_.taDefaultWrap+">&nbsp;</"+_.taDefaultWrap+">"),E.$options||(E.$options={});var B=v(T),W=function(e){if(B(e))return e;var t=angular.element("<div>"+e+"</div>");if(0===t.children().length)e="<"+_.taDefaultWrap+">"+e+"</"+_.taDefaultWrap+">";else{var r,i=t[0].childNodes,o=!1;for(r=0;r<i.length&&!(o=i[r].nodeName.toLowerCase().match(n));r++);if(o)for(e="",r=0;r<i.length;r++){var a=i[r],s=a.nodeName.toLowerCase();if("#comment"===s)e+="\x3c!--"+a.nodeValue+"--\x3e";else if("#text"===s){var l=a.textContent;l.trim()?e+="<"+_.taDefaultWrap+">"+l+"</"+_.taDefaultWrap+">":e+=l}else if(s.match(n))e+=a.outerHTML;else{var u=a.outerHTML||a.nodeValue;""!==u.trim()?e+="<"+_.taDefaultWrap+">"+u+"</"+_.taDefaultWrap+">":e+=u}}else e="<"+_.taDefaultWrap+">"+e+"</"+_.taDefaultWrap+">"}return e};_.taPaste&&($=y(_.taPaste)),w.addClass("ta-bind");var U;d["$undoManager"+(_.id||"")]=D.$undoManager={_stack:[],_index:0,_max:1e3,push:function(e){return void 0===e||null===e||void 0!==this.current()&&null!==this.current()&&e===this.current()?e:(this._index<this._stack.length-1&&(this._stack=this._stack.slice(0,this._index+1)),this._stack.push(e),U&&o.cancel(U),this._stack.length>this._max&&this._stack.shift(),this._index=this._stack.length-1,e)},undo:function(){return this.setToIndex(this._index-1)},redo:function(){return this.setToIndex(this._index+1)},setToIndex:function(e){if(!(e<0||e>this._stack.length-1))return this._index=e,this.current()},current:function(){return this._stack[this._index]}};var G,q=d["$undoTaBind"+(_.id||"")]=function(){if(!R&&L){var e=D.$undoManager.undo();void 0!==e&&null!==e&&(ce(e),J(e,!1),G&&o.cancel(G),G=o(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},K=d["$redoTaBind"+(_.id||"")]=function(){if(!R&&L){var e=D.$undoManager.redo();void 0!==e&&null!==e&&(ce(e),J(e,!1),G&&o.cancel(G),G=o(function(){w[0].focus(),f.setSelectionToElementEnd(w[0])},1))}},X=function(){if(L)return w[0].innerHTML;if(A)return w.val();throw"textAngular Error: attempting to update non-editable taBind"},J=function(e,t,n){F=n||!1,void 0!==t&&null!==t||(t=L),void 0!==e&&null!==e||(e=X()),B(e)?(""!==D.$viewValue&&D.$setViewValue(""),t&&""!==D.$undoManager.current()&&D.$undoManager.push("")):(ue(),D.$viewValue!==e&&(D.$setViewValue(e),t&&D.$undoManager.push(e))),D.$render()};d["updateTaBind"+(_.id||"")]=function(){R||J(void 0,void 0,!0)};var Z=function(e){return D.$oldViewValue=r(c(e),D.$oldViewValue,O)};if(w.attr("required")&&(D.$validators.required=function(e,t){return!B(e||t)}),D.$parsers.push(Z),D.$parsers.unshift(W),D.$formatters.push(Z),D.$formatters.unshift(W),D.$formatters.unshift(function(e){return D.$undoManager.push(e||"")}),A)if(d.events={},L){var Q=!1,ee=function(e){if(e&&e.trim().length){if(e.match(/class=["']*Mso(Normal|List)/i)||e.match(/content=["']*Word.Document/i)){var t=e.match(/<!--StartFragment-->([\s\S]*?)<!--EndFragment-->/i);t=(t=t?t[1]:e).replace(/<o:p>[\s\S]*?<\/o:p>/gi,"").replace(/class=(["']|)MsoNormal(["']|)/gi,"");var n=angular.element("<div>"+t+"</div>"),i=angular.element("<div></div>"),a={element:null,lastIndent:[],lastLi:null,isUl:!1};a.lastIndent.peek=function(){var e=this.length;if(e>0)return this[e-1]};for(var s=function(e){a.isUl=e,a.element=angular.element(e?"<ul>":"<ol>"),a.lastIndent=[],a.lastIndent.peek=function(){var e=this.length;if(e>0)return this[e-1]},a.lastLevelMatch=null},l=0;l<=n[0].childNodes.length;l++)if(n[0].childNodes[l]&&"#text"!==n[0].childNodes[l].nodeName){var u=n[0].childNodes[l].tagName.toLowerCase();if("p"===u||"h1"===u||"h2"===u||"h3"===u||"h4"===u||"h5"===u||"h6"===u){var c=angular.element(n[0].childNodes[l]),p=(c.attr("class")||"").match(/MsoList(Bullet|Number|Paragraph)(CxSp(First|Middle|Last)|)/i);if(p){if(c[0].childNodes.length<2||c[0].childNodes[1].childNodes.length<1)continue;var h="bullet"===p[1].toLowerCase()||"number"!==p[1].toLowerCase()&&!(/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].innerHTML)||/^[^0-9a-z<]*[0-9a-z]+[^0-9a-z<>]</i.test(c[0].childNodes[1].childNodes[0].innerHTML)),g=(c.attr("style")||"").match(/margin-left:([\-\.0-9]*)/i),m=parseFloat(g?g[1]:0),v=(c.attr("style")||"").match(/mso-list:l([0-9]+) level([0-9]+) lfo[0-9+]($|;)/i);if(v&&v[2]&&(m=parseInt(v[2])),v&&(!a.lastLevelMatch||v[1]!==a.lastLevelMatch[1])||!p[3]||"first"===p[3].toLowerCase()||null===a.lastIndent.peek()||a.isUl!==h&&a.lastIndent.peek()===m)s(h),i.append(a.element);else if(null!=a.lastIndent.peek()&&a.lastIndent.peek()<m)a.element=angular.element(h?"<ul>":"<ol>"),a.lastLi.append(a.element);else if(null!=a.lastIndent.peek()&&a.lastIndent.peek()>m){for(;null!=a.lastIndent.peek()&&a.lastIndent.peek()>m;)if("li"!==a.element.parent()[0].tagName.toLowerCase()){if(!/[uo]l/i.test(a.element.parent()[0].tagName.toLowerCase()))break;a.element=a.element.parent(),a.lastIndent.pop()}else a.element=a.element.parent();a.isUl="ul"===a.element[0].tagName.toLowerCase(),h!==a.isUl&&(s(h),i.append(a.element))}a.lastLevelMatch=v,m!==a.lastIndent.peek()&&a.lastIndent.push(m),a.lastLi=angular.element("<li>"),a.element.append(a.lastLi),a.lastLi.html(c.html().replace(/<!(--|)\[if !supportLists\](--|)>[\s\S]*?<!(--|)\[endif\](--|)>/gi,"")),c.remove()}else s(!1),i.append(c)}}var y=function(e){for(var t=(e=angular.element(e))[0].childNodes.length-1;t>=0;t--)e.after(e[0].childNodes[t]);e.remove()};angular.forEach(i.find("span"),function(e){e.removeAttribute("lang"),e.attributes.length<=0&&y(e)}),angular.forEach(i.find("font"),y),e=i.html()}else{if((e=e.replace(/<(|\/)meta[^>]*?>/gi,"")).match(/<[^>]*?(ta-bind)[^>]*?>/)){if(e.match(/<[^>]*?(text-angular)[^>]*?>/)){var x=angular.element("<div>"+e+"</div>");x.find("textarea").remove();for(var _=b.getByAttribute(x,"ta-bind"),C=0;C<_.length;C++){for(var k=_[C][0].parentNode.parentNode,S=0;S<_[C][0].childNodes.length;S++)k.parentNode.insertBefore(_[C][0].childNodes[S],k);k.parentNode.removeChild(k)}e=x.html().replace('<br class="Apple-interchange-newline">',"")}}else e.match(/^<span/)&&(e.match(/<span class=(\"Apple-converted-space\"|\'Apple-converted-space\')>.<\/span>/gi)||(e=e.replace(/<(|\/)span[^>]*?>/gi,"")));e=e.replace(/<br class="Apple-interchange-newline"[^>]*?>/gi,"").replace(/<span class="Apple-converted-space">( |&nbsp;)<\/span>/gi,"&nbsp;")}/<li(\s.*)?>/i.test(e)&&!1===/(<ul(\s.*)?>|<ol(\s.*)?>).*<li(\s.*)?>/i.test(e)&&(e=e.replace(/<li(\s.*)?>.*<\/li(\s.*)?>/i,"<ul>$&</ul>")),e=e.replace(/^[ |\u00A0]+/gm,function(e){for(var t="",n=0;n<e.length;n++)t+="&nbsp;";return t}).replace(/\n|\r\n|\r/g,"<br />").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;"),$&&(e=$(d,{$html:e})||e),e=r(e,"",O),f.insertHtml(e,w[0]),o(function(){D.$setViewValue(X()),Q=!1,w.removeClass("processing-paste")},0)}else Q=!1,w.removeClass("processing-paste")};w.on("paste",d.events.paste=function(e,t){if(t&&angular.extend(e,t),R||Q)return e.stopPropagation(),e.preventDefault(),!1;Q=!0,w.addClass("processing-paste");var n,r=(e.originalEvent||e).clipboardData;if(r&&r.getData&&r.types.length>0){for(var i="",a=0;a<r.types.length;a++)i+=" "+r.types[a];return/text\/html/i.test(i)?n=r.getData("text/html"):/text\/plain/i.test(i)&&(n=r.getData("text/plain")),ee(n),e.stopPropagation(),e.preventDefault(),!1}var s=l.rangy.saveSelection(),c=angular.element('<div class="ta-hidden-input" contenteditable="true"></div>');u.find("body").append(c),c[0].focus(),o(function(){l.rangy.restoreSelection(s),ee(c[0].innerHTML),w[0].focus(),c.remove()},0)}),w.on("cut",d.events.cut=function(e){R?e.preventDefault():o(function(){D.$setViewValue(X())},0)}),w.on("keydown",d.events.keydown=function(e,t){t&&angular.extend(e,t),e.specialKey=k(e);var n;if(m.keyMappings.forEach(function(t){e.specialKey===t.commandKeyCode&&(e.specialKey=void 0),t.testForKey(e)&&(n=t.commandKeyCode),"UndoKey"!==t.commandKeyCode&&"RedoKey"!==t.commandKeyCode||t.enablePropagation||e.preventDefault()}),void 0!==n&&(e.specialKey=n),void 0===e.specialKey||"UndoKey"===e.specialKey&&"RedoKey"===e.specialKey||(e.preventDefault(),x.sendKeyCommand(d,e)),!R&&("UndoKey"===e.specialKey&&(q(),e.preventDefault()),"RedoKey"===e.specialKey&&(K(),e.preventDefault()),13===e.keyCode&&!e.shiftKey)){var r,o=f.getSelectionElement();if(!o.tagName.match(i))return;var a=angular.element(M);if(function(e,t){for(var n=0;n<e.length;n++)if(e[n]===t)return!0;return!1}(["blockquote","ul","ol"],o.parentNode.tagName.toLowerCase())){if(/^<br(|\/)>$/i.test(o.innerHTML.trim())&&!o.nextSibling){var s=(r=angular.element(o)).parent();s.after(a),r.remove(),0===s.children().length&&s.remove(),f.setSelectionToElementStart(a[0]),e.preventDefault()}/^<[^>]+><br(|\/)><\/[^>]+>$/i.test(o.innerHTML.trim())&&((r=angular.element(o)).after(a),r.remove(),f.setSelectionToElementStart(a[0]),e.preventDefault())}}});var te;if(w.on("keyup",d.events.keyup=function(e,t){if(t&&angular.extend(e,t),9!==e.keyCode){if(U&&o.cancel(U),!R&&!N.test(e.keyCode)){if(""!==M&&13===e.keyCode&&!e.shiftKey){for(var n=f.getSelectionElement();!n.tagName.match(i)&&n!==w[0];)n=n.parentNode;if(n.tagName.toLowerCase()!==_.taDefaultWrap&&"li"!==n.tagName.toLowerCase()&&(""===n.innerHTML.trim()||"<br>"===n.innerHTML.trim())){var r=angular.element(M);angular.element(n).replaceWith(r),f.setSelectionToElementStart(r[0])}}var a=X();""!==M&&""===a.trim()?(ce(M),f.setSelectionToElementStart(w.children()[0])):"<"!==a.substring(0,1)&&_.taDefaultWrap;var s=S!==e.keyCode&&I.test(e.keyCode);te&&o.cancel(te),te=o(function(){J(a,s,!0)},E.$options.debounce||400),s||(U=o(function(){D.$undoManager.push(a)},250)),S=e.keyCode}}else f.getSelection().start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0])}),w.on("blur",d.events.blur=function(){P=!1,R?(F=!0,D.$render()):J(void 0,void 0,!0)}),_.placeholder&&(e.ie>8||void 0===e.ie)){var ne;if(!_.id)throw"textAngular Error: An unique ID is required for placeholders to work";ne=a("#"+_.id+".placeholder-text:before",'content: "'+_.placeholder+'"'),d.$on("$destroy",function(){s(ne)})}w.on("focus",d.events.focus=function(){P=!0,w.removeClass("placeholder-text"),ue()}),w.on("mouseup",d.events.mouseup=function(){f.getSelection().start.element===w[0]&&w.children().length&&f.setSelectionToElementStart(w.children()[0])}),w.on("mousedown",d.events.mousedown=function(e,t){t&&angular.extend(e,t),e.stopPropagation()})}else{w.on("change blur",d.events.change=d.events.blur=function(){R||D.$setViewValue(X())}),w.on("keydown",d.events.keydown=function(e,t){if(t&&angular.extend(e,t),9===e.keyCode){var n=this.selectionStart,r=this.selectionEnd,i=w.val();if(e.shiftKey){var o=i.lastIndexOf("\n",n),a=i.lastIndexOf("\t",n);-1!==a&&a>=o&&(w.val(i.substring(0,a)+i.substring(a+1)),this.selectionStart=this.selectionEnd=n-1)}else w.val(i.substring(0,n)+"\t"+i.substring(r)),this.selectionStart=this.selectionEnd=n+1;e.preventDefault()}});var re=function(e,t){for(var n="",r=0;r<t;r++)n+=e;return n},ie=function(e,t,n){for(var r=0;r<e.length;r++)t.call(n,r,e[r])},oe=function(e,t){var n="",r=e.childNodes;return t++,n+=re("\t",t-1)+e.outerHTML.substring(0,4),ie(r,function(e,r){var i=r.nodeName.toLowerCase();"#comment"!==i?"#text"!==i?r.outerHTML&&(n+="ul"===i||"ol"===i?"\n"+oe(r,t):"\n"+re("\t",t)+r.outerHTML):n+=r.textContent:n+="\x3c!--"+r.nodeValue+"--\x3e"}),n+="\n"+re("\t",t-1)+e.outerHTML.substring(e.outerHTML.lastIndexOf("<"))};D.$formatters.unshift(function(e){var t=angular.element("<div>"+e+"</div>")[0].childNodes;return t.length>0&&(e="",ie(t,function(t,n){var r=n.nodeName.toLowerCase();"#comment"!==r?"#text"!==r?n.outerHTML&&(e.length>0&&(e+="\n"),e+="ul"===r||"ol"===r?""+oe(n,0):""+n.outerHTML):e+=n.textContent:e+="\x3c!--"+n.nodeValue+"--\x3e"})),e})}var ae,se=function(e){return d.$emit("ta-element-select",this),e.preventDefault(),!1},le=function(e,t){if(t&&angular.extend(e,t),!p&&!R){p=!0;var n;n=e.originalEvent?e.originalEvent.dataTransfer:e.dataTransfer,d.$emit("ta-drop-event",this,e,n),o(function(){p=!1,J(void 0,void 0,!0)},100)}},ue=d["reApplyOnSelectorHandlers"+(_.id||"")]=function(){R||angular.forEach(h,function(e){w.find(e).off("click",se).on("click",se)})},ce=function(e){w[0].innerHTML=e},de=!1;D.$render=function(){if(!de){de=!0;var e=D.$viewValue||"";F||(L&&P&&(w.removeClass("placeholder-text"),ae&&o.cancel(ae),ae=o(function(){P||(w[0].focus(),f.setSelectionToElementEnd(w.children()[w.children().length-1])),ae=void 0},1)),L?(ce(_.placeholder?""===e?M:e:""===e?M:e),R?w.off("drop",le):(ue(),w.on("drop",le))):"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()?ce(g(e)):w.val(e)),L&&_.placeholder&&(""===e?P?w.removeClass("placeholder-text"):w.addClass("placeholder-text"):w.removeClass("placeholder-text")),de=F=!1}},_.taReadonly&&((R=d.$eval(_.taReadonly))?(w.addClass("ta-readonly"),"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()||w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable")):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):L&&w.attr("contenteditable","true")),d.$watch(_.taReadonly,function(e,t){t!==e&&(e?(w.addClass("ta-readonly"),"textarea"!==w[0].tagName.toLowerCase()&&"input"!==w[0].tagName.toLowerCase()||w.attr("disabled","disabled"),void 0!==w.attr("contenteditable")&&w.attr("contenteditable")&&w.removeAttr("contenteditable"),angular.forEach(h,function(e){w.find(e).on("click",se)}),w.off("drop",le)):(w.removeClass("ta-readonly"),"textarea"===w[0].tagName.toLowerCase()||"input"===w[0].tagName.toLowerCase()?w.removeAttr("disabled"):L&&w.attr("contenteditable","true"),angular.forEach(h,function(e){w.find(e).off("click",se)}),w.on("drop",le)),R=e)})),L&&!R&&(angular.forEach(h,function(e){w.find(e).on("click",se)}),w.on("drop",le),w.on("blur",function(){e.webkit&&(t=!0)}))}}}]);var p=!1,h=angular.module("textAngular",["ngSanitize","textAngularSetup","textAngular.factories","textAngular.DOM","textAngular.validators","textAngular.taBind"]);h.config([function(){angular.forEach(taTools,function(e,t){delete taTools[t]})}]),h.run([function(){if("function"==typeof define&&define.amd)define(function(e){window.rangy=e("rangy"),window.rangy.saveSelection=e("rangy/lib/rangy-selectionsaverestore")});else if("function"==typeof require&&"undefined"!=typeof module&&"object"==typeof exports)window.rangy=require("rangy"),window.rangy.saveSelection=require("rangy/lib/rangy-selectionsaverestore");else{if(!window.rangy)throw"rangy-core.js and rangy-selectionsaverestore.js are required for textAngular to work correctly, rangy-core is not yet loaded.";if(window.rangy.init(),!window.rangy.saveSelection)throw"rangy-selectionsaverestore.js is required for textAngular to work correctly."}}]),h.directive("textAngular",["$compile","$timeout","taOptions","taSelection","taExecCommand","textAngularManager","$window","$document","$animate","$log","$q","$parse",function(e,t,n,r,i,o,a,s,l,u,c,d){return{require:"?ngModel",scope:{},restrict:"EA",priority:2,link:function(f,p,h,g){var m,v,y,b,x,w,_,C,k,S,$,M=h.serial?h.serial:Math.floor(1e16*Math.random());f._name=h.name?h.name:"textAngularEditor"+M;var T=function(e,n,r){t(function(){var t=function(){e.off(n,t),r.apply(this,arguments)};e.on(n,t)},100)};if(k=i(h.taDefaultWrap),angular.extend(f,angular.copy(n),{wrapSelection:function(e,t,n){"undo"===e.toLowerCase()?f["$undoTaBindtaTextElement"+M]():"redo"===e.toLowerCase()?f["$redoTaBindtaTextElement"+M]():(k(e,!1,t,f.defaultTagAttributes),n&&f["reApplyOnSelectorHandlerstaTextElement"+M](),f.displayElements.text[0].focus())},showHtml:f.$eval(h.taShowHtml)||!1}),h.taFocussedClass&&(f.classes.focussed=h.taFocussedClass),h.taTextEditorClass&&(f.classes.textEditor=h.taTextEditorClass),h.taHtmlEditorClass&&(f.classes.htmlEditor=h.taHtmlEditorClass),h.taDefaultTagAttributes)try{angular.extend(f.defaultTagAttributes,angular.fromJson(h.taDefaultTagAttributes))}catch(e){u.error(e)}h.taTextEditorSetup&&(f.setup.textEditorSetup=f.$parent.$eval(h.taTextEditorSetup)),h.taHtmlEditorSetup&&(f.setup.htmlEditorSetup=f.$parent.$eval(h.taHtmlEditorSetup)),h.taFileDrop?f.fileDropHandler=f.$parent.$eval(h.taFileDrop):f.fileDropHandler=f.defaultFileDropHandler,_=p[0].innerHTML,p[0].innerHTML="",f.displayElements={forminput:angular.element("<input type='hidden' tabindex='-1' style='display: none;'>"),html:angular.element("<textarea></textarea>"),text:angular.element("<div></div>"),scrollWindow:angular.element("<div class='ta-scroll-window'></div>"),popover:angular.element('<div class="popover fade bottom" style="max-width: none; width: 305px;"></div>'),popoverArrow:angular.element('<div class="arrow"></div>'),popoverContainer:angular.element('<div class="popover-content"></div>'),resize:{overlay:angular.element('<div class="ta-resizer-handle-overlay"></div>'),background:angular.element('<div class="ta-resizer-handle-background"></div>'),anchors:[angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-tr"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-bl"></div>'),angular.element('<div class="ta-resizer-handle-corner ta-resizer-handle-corner-br"></div>')],info:angular.element('<div class="ta-resizer-handle-info"></div>')}},f.displayElements.popover.append(f.displayElements.popoverArrow),f.displayElements.popover.append(f.displayElements.popoverContainer),f.displayElements.scrollWindow.append(f.displayElements.popover),f.displayElements.popover.on("mousedown",function(e,t){return t&&angular.extend(e,t),e.preventDefault(),!1}),f.showPopover=function(e){f.displayElements.popover.css("display","block"),f.reflowPopover(e),l.addClass(f.displayElements.popover,"in"),T(s.find("body"),"click keyup",function(){f.hidePopover()})},f.reflowPopover=function(e){f.displayElements.text[0].offsetHeight-51>e[0].offsetTop?(f.displayElements.popover.css("top",e[0].offsetTop+e[0].offsetHeight+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("top").addClass("bottom")):(f.displayElements.popover.css("top",e[0].offsetTop-54+f.displayElements.scrollWindow[0].scrollTop+"px"),f.displayElements.popover.removeClass("bottom").addClass("top"));var t=f.displayElements.text[0].offsetWidth-f.displayElements.popover[0].offsetWidth,n=e[0].offsetLeft+e[0].offsetWidth/2-f.displayElements.popover[0].offsetWidth/2;f.displayElements.popover.css("left",Math.max(0,Math.min(t,n))+"px"),f.displayElements.popoverArrow.css("margin-left",Math.min(n,Math.max(0,n-t))-11+"px")},f.hidePopover=function(){f.displayElements.popover.css("display",""),f.displayElements.popoverContainer.attr("style",""),f.displayElements.popoverContainer.attr("class","popover-content"),f.displayElements.popover.removeClass("in")},f.displayElements.resize.overlay.append(f.displayElements.resize.background),angular.forEach(f.displayElements.resize.anchors,function(e){f.displayElements.resize.overlay.append(e)}),f.displayElements.resize.overlay.append(f.displayElements.resize.info),f.displayElements.scrollWindow.append(f.displayElements.resize.overlay),f.reflowResizeOverlay=function(e){e=angular.element(e)[0],f.displayElements.resize.overlay.css({display:"block",left:e.offsetLeft-5+"px",top:e.offsetTop-5+"px",width:e.offsetWidth+10+"px",height:e.offsetHeight+10+"px"}),f.displayElements.resize.info.text(e.offsetWidth+" x "+e.offsetHeight)},f.showResizeOverlay=function(e){var t=s.find("body");S=function(n){var r={width:parseInt(e.attr("width")),height:parseInt(e.attr("height")),x:n.clientX,y:n.clientY};(void 0===r.width||isNaN(r.width))&&(r.width=e[0].offsetWidth),(void 0===r.height||isNaN(r.height))&&(r.height=e[0].offsetHeight),f.hidePopover();var i=r.height/r.width,o=function(t){function n(e){return Math.round(Math.max(0,e))}var o={x:Math.max(0,r.width+(t.clientX-r.x)),y:Math.max(0,r.height+(t.clientY-r.y))},a=void 0!==h.taResizeForceAspectRatio,s=h.taResizeMaintainAspectRatio;if(a||s&&!t.shiftKey){var l=o.y/o.x;o.x=i>l?o.x:o.y/i,o.y=i>l?o.x*i:o.y}var u=angular.element(e);u.css("height",n(o.y)+"px"),u.css("width",n(o.x)+"px"),f.reflowResizeOverlay(e)};t.on("mousemove",o),T(t,"mouseup",function(e){e.preventDefault(),e.stopPropagation(),t.off("mousemove",o),f.$apply(function(){f.hidePopover(),f.updateTaBindtaTextElement()},100)}),n.stopPropagation(),n.preventDefault()},f.displayElements.resize.anchors[3].off("mousedown"),f.displayElements.resize.anchors[3].on("mousedown",S),f.reflowResizeOverlay(e),T(t,"click",function(){f.hideResizeOverlay()})},f.hideResizeOverlay=function(){f.displayElements.resize.anchors[3].off("mousedown",S),f.displayElements.resize.overlay.css("display","")},f.setup.htmlEditorSetup(f.displayElements.html),f.setup.textEditorSetup(f.displayElements.text),f.displayElements.html.attr({id:"taHtmlElement"+M,"ng-show":"showHtml","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.text.attr({id:"taTextElement"+M,contentEditable:"true","ta-bind":"ta-bind","ng-model":"html","ng-model-options":p.attr("ng-model-options")}),f.displayElements.scrollWindow.attr({"ng-hide":"showHtml"}),h.taDefaultWrap&&f.displayElements.text.attr("ta-default-wrap",h.taDefaultWrap),h.taUnsafeSanitizer&&(f.displayElements.text.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer),f.displayElements.html.attr("ta-unsafe-sanitizer",h.taUnsafeSanitizer)),f.displayElements.scrollWindow.append(f.displayElements.text),p.append(f.displayElements.scrollWindow),p.append(f.displayElements.html),f.displayElements.forminput.attr("name",f._name),p.append(f.displayElements.forminput),h.tabindex&&(p.removeAttr("tabindex"),f.displayElements.text.attr("tabindex",h.tabindex),f.displayElements.html.attr("tabindex",h.tabindex)),h.placeholder&&(f.displayElements.text.attr("placeholder",h.placeholder),f.displayElements.html.attr("placeholder",h.placeholder)),h.taDisabled&&(f.displayElements.text.attr("ta-readonly","disabled"),f.displayElements.html.attr("ta-readonly","disabled"),f.disabled=f.$parent.$eval(h.taDisabled),f.$parent.$watch(h.taDisabled,function(e){f.disabled=e,f.disabled?p.addClass(f.classes.disabled):p.removeClass(f.classes.disabled)})),h.taPaste&&(f._pasteHandler=function(e){return d(h.taPaste)(f.$parent,{$html:e})},f.displayElements.text.attr("ta-paste","_pasteHandler($html)")),e(f.displayElements.scrollWindow)(f),e(f.displayElements.html)(f),f.updateTaBindtaTextElement=f["updateTaBindtaTextElement"+M],f.updateTaBindtaHtmlElement=f["updateTaBindtaHtmlElement"+M],p.addClass("ta-root"),f.displayElements.scrollWindow.addClass("ta-text ta-editor "+f.classes.textEditor),f.displayElements.html.addClass("ta-html ta-editor "+f.classes.htmlEditor),f._actionRunning=!1;var D=!1;if(f.startAction=function(){return f._actionRunning=!0,D=a.rangy.saveSelection(),function(){D&&a.rangy.restoreSelection(D)}},f.endAction=function(){f._actionRunning=!1,D&&(f.showHtml?f.displayElements.html[0].focus():f.displayElements.text[0].focus(),a.rangy.removeMarkers(D)),D=!1,f.updateSelectedStyles(),f.showHtml||f["updateTaBindtaTextElement"+M]()},x=function(){f.focussed=!0,p.addClass(f.classes.focussed),C.focus(),p.triggerHandler("focus")},f.displayElements.html.on("focus",x),f.displayElements.text.on("focus",x),w=function(e){return f._actionRunning||s[0].activeElement===f.displayElements.html[0]||s[0].activeElement===f.displayElements.text[0]||(p.removeClass(f.classes.focussed),C.unfocus(),t(function(){f._bUpdateSelectedStyles=!1,p.triggerHandler("blur"),f.focussed=!1},0)),e.preventDefault(),!1},f.displayElements.html.on("blur",w),f.displayElements.text.on("blur",w),f.displayElements.text.on("paste",function(e){p.triggerHandler("paste",e)}),f.queryFormatBlockState=function(e){return!f.showHtml&&e.toLowerCase()===s[0].queryCommandValue("formatBlock").toLowerCase()},f.queryCommandState=function(e){return f.showHtml?"":s[0].queryCommandState(e)},f.switchView=function(){f.showHtml=!f.showHtml,l.enabled(!1,f.displayElements.html),l.enabled(!1,f.displayElements.text),f.showHtml?t(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.html[0].focus()},100):t(function(){return l.enabled(!0,f.displayElements.html),l.enabled(!0,f.displayElements.text),f.displayElements.text[0].focus()},100)},h.ngModel){var E=!0;g.$render=function(){if(E){E=!1;var e=f.$parent.$eval(h.ngModel);void 0!==e&&null!==e||!_||""===_||g.$setViewValue(_)}f.displayElements.forminput.val(g.$viewValue),f.html=g.$viewValue||""},p.attr("required")&&(g.$validators.required=function(e,t){var n=e||t;return!(!n||""===n.trim())})}else f.displayElements.forminput.val(_),f.html=_;if(f.$watch("html",function(e,t){e!==t&&(h.ngModel&&g.$viewValue!==e&&g.$setViewValue(e),f.displayElements.forminput.val(e))}),h.taTargetToolbars)C=o.registerEditor(f._name,f,h.taTargetToolbars.split(","));else{var L=angular.element('<div text-angular-toolbar name="textAngularToolbar'+M+'">');h.taToolbar&&L.attr("ta-toolbar",h.taToolbar),h.taToolbarClass&&L.attr("ta-toolbar-class",h.taToolbarClass),h.taToolbarGroupClass&&L.attr("ta-toolbar-group-class",h.taToolbarGroupClass),h.taToolbarButtonClass&&L.attr("ta-toolbar-button-class",h.taToolbarButtonClass),h.taToolbarActiveButtonClass&&L.attr("ta-toolbar-active-button-class",h.taToolbarActiveButtonClass),h.taFocussedClass&&L.attr("ta-focussed-class",h.taFocussedClass),p.prepend(L),e(L)(f.$parent),C=o.registerEditor(f._name,f,["textAngularToolbar"+M])}f.$on("$destroy",function(){o.unregisterEditor(f._name),angular.element(window).off("blur")}),f.$on("ta-element-select",function(e,t){C.triggerElementSelect(e,t)&&f["reApplyOnSelectorHandlerstaTextElement"+M]()}),f.$on("ta-drop-event",function(e,n,r,i){f.displayElements.text[0].focus(),i&&i.files&&i.files.length>0?(angular.forEach(i.files,function(e){try{c.when(f.fileDropHandler(e,f.wrapSelection)||f.fileDropHandler!==f.defaultFileDropHandler&&c.when(f.defaultFileDropHandler(e,f.wrapSelection))).then(function(){f["updateTaBindtaTextElement"+M]()})}catch(e){u.error(e)}}),r.preventDefault(),r.stopPropagation()):t(function(){f["updateTaBindtaTextElement"+M]()},0)}),f._bUpdateSelectedStyles=!1,angular.element(window).on("blur",function(){f._bUpdateSelectedStyles=!1,f.focussed=!1}),f.updateSelectedStyles=function(){var e;$&&t.cancel($),void 0!==(e=r.getSelectionElement())&&e.parentNode!==f.displayElements.text[0]?C.updateSelectedStyles(angular.element(e)):C.updateSelectedStyles(),f._bUpdateSelectedStyles&&($=t(f.updateSelectedStyles,200))},m=function(){f.focussed?f._bUpdateSelectedStyles||(f._bUpdateSelectedStyles=!0,f.$apply(function(){f.updateSelectedStyles()})):f._bUpdateSelectedStyles=!1},f.displayElements.html.on("keydown",m),f.displayElements.text.on("keydown",m),v=function(){f._bUpdateSelectedStyles=!1},f.displayElements.html.on("keyup",v),f.displayElements.text.on("keyup",v),y=function(e,t){t&&angular.extend(e,t),f.$apply(function(){if(C.sendKeyCommand(e))return f._bUpdateSelectedStyles||f.updateSelectedStyles(),e.preventDefault(),!1})},f.displayElements.html.on("keypress",y),f.displayElements.text.on("keypress",y),b=function(){f._bUpdateSelectedStyles=!1,f.$apply(function(){f.updateSelectedStyles()})},f.displayElements.html.on("mouseup",b),f.displayElements.text.on("mouseup",b)}}}]),h.service("textAngularManager",["taToolExecuteAction","taTools","taRegisterTool",function(e,t,n){var r={},i={};return{registerEditor:function(n,o,a){if(!n||""===n)throw"textAngular Error: An editor requires a name";if(!o)throw"textAngular Error: An editor requires a scope";if(i[n])throw'textAngular Error: An Editor with name "'+n+'" already exists';var s=[];return angular.forEach(a,function(e){r[e]&&s.push(r[e])}),i[n]={scope:o,toolbars:a,_registerToolbar:function(e){this.toolbars.indexOf(e.name)>=0&&s.push(e)},editorFunctions:{disable:function(){angular.forEach(s,function(e){e.disabled=!0})},enable:function(){angular.forEach(s,function(e){e.disabled=!1})},focus:function(){angular.forEach(s,function(e){e._parent=o,e.disabled=!1,e.focussed=!0,o.focussed=!0})},unfocus:function(){angular.forEach(s,function(e){e.disabled=!0,e.focussed=!1}),o.focussed=!1},updateSelectedStyles:function(e){angular.forEach(s,function(t){angular.forEach(t.tools,function(n){n.activeState&&(t._parent=o,n.active=n.activeState(e))})})},sendKeyCommand:function(n){var r=!1;return(n.ctrlKey||n.metaKey||n.specialKey)&&angular.forEach(t,function(t,i){if(t.commandKeyCode&&(t.commandKeyCode===n.which||t.commandKeyCode===n.specialKey))for(var a=0;a<s.length;a++)if(void 0!==s[a].tools[i]){e.call(s[a].tools[i],o),r=!0;break}}),r},triggerElementSelect:function(e,n){var r=function(e,t){for(var n=!0,r=0;r<t.length;r++)n=n&&e.attr(t[r]);return n},i=[],a={},l=!1;n=angular.element(n);var u=!1;if(angular.forEach(t,function(e,t){e.onElementSelect&&e.onElementSelect.element&&e.onElementSelect.element.toLowerCase()===n[0].tagName.toLowerCase()&&(!e.onElementSelect.filter||e.onElementSelect.filter(n))&&(u=u||angular.isArray(e.onElementSelect.onlyWithAttrs)&&r(n,e.onElementSelect.onlyWithAttrs),e.onElementSelect.onlyWithAttrs&&!r(n,e.onElementSelect.onlyWithAttrs)||(a[t]=e))}),u?(angular.forEach(a,function(e,t){e.onElementSelect.onlyWithAttrs&&r(n,e.onElementSelect.onlyWithAttrs)&&i.push({name:t,tool:e})}),i.sort(function(e,t){return t.tool.onElementSelect.onlyWithAttrs.length-e.tool.onElementSelect.onlyWithAttrs.length})):angular.forEach(a,function(e,t){i.push({name:t,tool:e})}),i.length>0)for(var c=0;c<i.length;c++){for(var d=i[c].tool,f=i[c].name,p=0;p<s.length;p++)if(void 0!==s[p].tools[f]){d.onElementSelect.action.call(s[p].tools[f],e,n,o),l=!0;break}if(l)break}return l}}},i[n].editorFunctions},retrieveEditor:function(e){return i[e]},unregisterEditor:function(e){delete i[e]},registerToolbar:function(e){if(!e)throw"textAngular Error: A toolbar requires a scope";if(!e.name||""===e.name)throw"textAngular Error: A toolbar requires a name";if(r[e.name])throw'textAngular Error: A toolbar with name "'+e.name+'" already exists';r[e.name]=e,angular.forEach(i,function(t){t._registerToolbar(e)})},retrieveToolbar:function(e){return r[e]},retrieveToolbarsViaEditor:function(e){var t=[],n=this;return angular.forEach(this.retrieveEditor(e).toolbars,function(e){t.push(n.retrieveToolbar(e))}),t},unregisterToolbar:function(e){delete r[e]},updateToolsDisplay:function(e){var t=this;angular.forEach(e,function(e,n){t.updateToolDisplay(n,e)})},resetToolsDisplay:function(){var e=this;angular.forEach(t,function(t,n){e.resetToolDisplay(n)})},updateToolDisplay:function(e,t){var n=this;angular.forEach(r,function(r,i){n.updateToolbarToolDisplay(i,e,t)})},resetToolDisplay:function(e){var t=this;angular.forEach(r,function(n,r){t.resetToolbarToolDisplay(r,e)})},updateToolbarToolDisplay:function(e,t,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(t,n)},resetToolbarToolDisplay:function(e,n){if(!r[e])throw'textAngular Error: No Toolbar with name "'+e+'" exists';r[e].updateToolDisplay(n,t[n],!0)},removeTool:function(e){delete t[e],angular.forEach(r,function(t){delete t.tools[e];for(var n=0;n<t.toolbar.length;n++){for(var r,i=0;i<t.toolbar[n].length;i++){if(t.toolbar[n][i]===e){r={group:n,index:i};break}if(void 0!==r)break}void 0!==r&&(t.toolbar[r.group].slice(r.index,1),t._$element.children().eq(r.group).children().eq(r.index).remove())}})},addTool:function(e,t,i,o){n(e,t),angular.forEach(r,function(n){n.addTool(e,t,i,o)})},addToolToToolbar:function(e,t,i,o,a){n(e,t),r[i].addTool(e,t,o,a)},refreshEditor:function(e){if(!i[e])throw'textAngular Error: No Editor with name "'+e+'" exists';i[e].scope.updateTaBindtaTextElement(),i[e].scope.$$phase||i[e].scope.$digest()},sendKeyCommand:function(e,t){var n=i[e._name];if(n&&n.editorFunctions.sendKeyCommand(t))return e._bUpdateSelectedStyles||e.updateSelectedStyles(),t.preventDefault(),!1}}}]),h.directive("textAngularToolbar",["$compile","textAngularManager","taOptions","taTools","taToolExecuteAction","$window",function(e,t,n,r,i,o){return{scope:{name:"@"},restrict:"EA",link:function(a,s,l){if(!a.name||""===a.name)throw"textAngular Error: A toolbar requires a name";angular.extend(a,angular.copy(n)),l.taToolbar&&(a.toolbar=a.$parent.$eval(l.taToolbar)),l.taToolbarClass&&(a.classes.toolbar=l.taToolbarClass),l.taToolbarGroupClass&&(a.classes.toolbarGroup=l.taToolbarGroupClass),l.taToolbarButtonClass&&(a.classes.toolbarButton=l.taToolbarButtonClass),l.taToolbarActiveButtonClass&&(a.classes.toolbarButtonActive=l.taToolbarActiveButtonClass),l.taFocussedClass&&(a.classes.focussed=l.taFocussedClass),a.disabled=!0,a.focussed=!1,a._$element=s,s[0].innerHTML="",s.addClass("ta-toolbar "+a.classes.toolbar),a.$watch("focussed",function(){a.focussed?s.addClass(a.classes.focussed):s.removeClass(a.classes.focussed)});var u=function(t,n){var r;if(r=t&&t.display?angular.element(t.display):angular.element("<button type='button'>"),t&&t.class?r.addClass(t.class):r.addClass(a.classes.toolbarButton),r.attr("name",n.name),r.attr("ta-button","ta-button"),r.attr("ng-disabled","isDisabled()"),r.attr("tabindex","-1"),r.attr("ng-click","executeAction()"),r.attr("ng-class","displayActiveToolClass(active)"),t&&t.tooltiptext&&r.attr("title",t.tooltiptext),t&&!t.display&&!n._display&&(r[0].innerHTML="",t.buttontext&&(r[0].innerHTML=t.buttontext),t.iconclass)){var i=angular.element("<i>"),o=r[0].innerHTML;i.addClass(t.iconclass),r[0].innerHTML="",r.append(i),o&&""!==o&&r.append("&nbsp;"+o)}return n._lastToolDefinition=angular.copy(t),e(r)(n)};a.tools={},a._parent={disabled:!0,showHtml:!1,queryFormatBlockState:function(){return!1},queryCommandState:function(){return!1}};var c={$window:o,$editor:function(){return a._parent},isDisabled:function(){return"function"!=typeof this.$eval("disabled")&&this.$eval("disabled")||this.$eval("disabled()")||"html"!==this.name&&this.$editor().showHtml||this.$parent.disabled||this.$editor().disabled},displayActiveToolClass:function(e){return e?a.classes.toolbarButtonActive:""},executeAction:i};angular.forEach(a.toolbar,function(e){var t=angular.element("<div>");t.addClass(a.classes.toolbarGroup),angular.forEach(e,function(e){a.tools[e]=angular.extend(a.$new(!0),r[e],c,{name:e}),a.tools[e].$element=u(r[e],a.tools[e]),t.append(a.tools[e].$element)}),s.append(t)}),a.updateToolDisplay=function(e,t,n){var r=a.tools[e];if(r){if(r._lastToolDefinition&&!n&&(t=angular.extend({},r._lastToolDefinition,t)),null===t.buttontext&&null===t.iconclass&&null===t.display)throw'textAngular Error: Tool Definition for updating "'+e+'" does not have a valid display/iconclass/buttontext value';null===t.buttontext&&delete t.buttontext,null===t.iconclass&&delete t.iconclass,null===t.display&&delete t.display;var i=u(t,r);r.$element.replaceWith(i),r.$element=i}},a.addTool=function(e,t,n,i){a.tools[e]=angular.extend(a.$new(!0),r[e],c,{name:e}),a.tools[e].$element=u(r[e],a.tools[e]);var o;void 0===n&&(n=a.toolbar.length-1),o=angular.element(s.children()[n]),void 0===i?(o.append(a.tools[e].$element),a.toolbar[n][a.toolbar[n].length-1]=e):(o.children().eq(i).after(a.tools[e].$element),a.toolbar[n][i]=e)},t.registerToolbar(a),a.$on("$destroy",function(){t.unregisterToolbar(a.name)})}}}])}();var taTools={};angular.module("textAngularSetup",[]).constant("taRegisterTool",registerTextAngularTool).value("taTools",taTools).value("taOptions",{forceTextAngularSanitize:!0,keyMappings:[],toolbar:[["h1","h2","h3","h4","h5","h6","p","pre","quote"],["bold","italics","underline","strikeThrough","ul","ol","redo","undo","clear"],["justifyLeft","justifyCenter","justifyRight","justifyFull","indent","outdent"],["html","insertImage","insertLink","insertVideo","wordcount","charcount"]],classes:{focussed:"focussed",toolbar:"btn-toolbar",toolbarGroup:"btn-group",toolbarButton:"btn btn-default",toolbarButtonActive:"active",disabled:"disabled",textEditor:"form-control",htmlEditor:"form-control"},defaultTagAttributes:{a:{target:""}},setup:{textEditorSetup:function(e){},htmlEditorSetup:function(e){}},defaultFileDropHandler:function(e,t){var n=new FileReader;return"image"===e.type.substring(0,5)&&(n.onload=function(){""!==n.result&&t("insertImage",n.result,!0)},n.readAsDataURL(e),!0)}}).value("taSelectableElements",["a","img"]).value("taCustomRenderers",[{selector:"img",customAttribute:"ta-insert-video",renderLogic:function(e){var t=angular.element("<iframe></iframe>"),n=e.prop("attributes");angular.forEach(n,function(e){t.attr(e.name,e.value)}),t.attr("src",t.attr("ta-insert-video")),e.replaceWith(t)}}]).value("taTranslations",{html:{tooltip:"Toggle html / Rich Text"},heading:{tooltip:"Heading "},p:{tooltip:"Paragraph"},pre:{tooltip:"Preformatted text"},ul:{tooltip:"Unordered List"},ol:{tooltip:"Ordered List"},quote:{tooltip:"Quote/unquote selection or paragraph"},undo:{tooltip:"Undo"},redo:{tooltip:"Redo"},bold:{tooltip:"Bold"},italic:{tooltip:"Italic"},underline:{tooltip:"Underline"},strikeThrough:{tooltip:"Strikethrough"},justifyLeft:{tooltip:"Align text left"},justifyRight:{tooltip:"Align text right"},justifyFull:{tooltip:"Justify text"},justifyCenter:{tooltip:"Center"},indent:{tooltip:"Increase indent"},outdent:{tooltip:"Decrease indent"},clear:{tooltip:"Clear formatting"},insertImage:{dialogPrompt:"Please enter an image URL to insert",tooltip:"Insert image",hotkey:"the - possibly language dependent hotkey ... for some future implementation"},insertVideo:{tooltip:"Insert video",dialogPrompt:"Please enter a youtube URL to embed"},insertLink:{tooltip:"Insert / edit link",dialogPrompt:"Please enter a URL to insert"},editLink:{reLinkButton:{tooltip:"Relink"},unLinkButton:{tooltip:"Unlink"},targetToggle:{buttontext:"Open in New Window"}},wordcount:{tooltip:"Display words Count"},charcount:{tooltip:"Display characters Count"}}).factory("taToolFunctions",["$window","taTranslations",function(e,t){return{imgOnSelectAction:function(e,t,n){var r=function(){n.updateTaBindtaTextElement(),n.hidePopover()};e.preventDefault(),n.displayElements.popover.css("width","375px");var i=n.displayElements.popoverContainer;i.empty();var o=angular.element('<div class="btn-group" style="padding-right: 6px;">'),a=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">100% </button>');a.on("click",function(e){e.preventDefault(),t.css({width:"100%",height:""}),r()});var s=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">50% </button>');s.on("click",function(e){e.preventDefault(),t.css({width:"50%",height:""}),r()});var l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">25% </button>');l.on("click",function(e){e.preventDefault(),t.css({width:"25%",height:""}),r()});var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1">Reset</button>');u.on("click",function(e){e.preventDefault(),t.css({width:"",height:""}),r()}),o.append(a),o.append(s),o.append(l),o.append(u),i.append(o),o=angular.element('<div class="btn-group" style="padding-right: 6px;">');var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-left"></i></button>');c.on("click",function(e){e.preventDefault(),t.css("float","left"),t.css("cssFloat","left"),t.css("styleFloat","left"),r()});var d=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-right"></i></button>');d.on("click",function(e){e.preventDefault(),t.css("float","right"),t.css("cssFloat","right"),t.css("styleFloat","right"),r()});var f=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-align-justify"></i></button>');f.on("click",function(e){e.preventDefault(),t.css("float",""),t.css("cssFloat",""),t.css("styleFloat",""),r()}),o.append(c),o.append(f),o.append(d),i.append(o),o=angular.element('<div class="btn-group">');var p=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" unselectable="on" tabindex="-1"><i class="fa fa-trash-o"></i></button>');p.on("click",function(e){e.preventDefault(),t.remove(),r()}),o.append(p),i.append(o),n.showPopover(t),n.showResizeOverlay(t)},aOnSelectAction:function(n,r,i){n.preventDefault(),i.displayElements.popover.css("width","436px");var o=i.displayElements.popoverContainer;o.empty(),o.css("line-height","28px");var a=angular.element('<a href="'+r.attr("href")+'" target="_blank">'+r.attr("href")+"</a>");a.css({display:"inline-block","max-width":"200px",overflow:"hidden","text-overflow":"ellipsis","white-space":"nowrap","vertical-align":"middle"}),o.append(a);var s=angular.element('<div class="btn-group pull-right">'),l=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.reLinkButton.tooltip+'"><i class="fa fa-edit icon-edit"></i></button>');l.on("click",function(n){n.preventDefault();var o=e.prompt(t.insertLink.dialogPrompt,r.attr("href"));o&&""!==o&&"http://"!==o&&(r.attr("href",o),i.updateTaBindtaTextElement()),i.hidePopover()}),s.append(l);var u=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on" title="'+t.editLink.unLinkButton.tooltip+'"><i class="fa fa-unlink icon-unlink"></i></button>');u.on("click",function(e){e.preventDefault(),r.replaceWith(r.contents()),i.updateTaBindtaTextElement(),i.hidePopover()}),s.append(u);var c=angular.element('<button type="button" class="btn btn-default btn-sm btn-small" tabindex="-1" unselectable="on">'+t.editLink.targetToggle.buttontext+"</button>");"_blank"===r.attr("target")&&c.addClass("active"),c.on("click",function(e){e.preventDefault(),r.attr("target","_blank"===r.attr("target")?"":"_blank"),c.toggleClass("active"),i.updateTaBindtaTextElement()}),s.append(c),o.append(s),i.showPopover(r)},extractYoutubeVideoId:function(e){var t=/(?:youtube(?:-nocookie)?\.com\/(?:[^\/\n\s]+\/\S+\/|(?:v|e(?:mbed)?)\/|\S*?[?&]v=)|youtu\.be\/)([a-zA-Z0-9_-]{11})/i,n=e.match(t);return n&&n[1]||null}}}]).run(["taRegisterTool","$window","taTranslations","taSelection","taToolFunctions","$sanitize","taOptions",function(e,t,n,r,i,o,a){var s={};if(o("",s),!0===a.forceTextAngularSanitize&&"taSanitize"!==s.version)throw angular.$$minErr("textAngular")("textAngularSetup","The textAngular-sanitize provider has been replaced by another -- have you included angular-sanitize by mistake?");e("html",{iconclass:"fa fa-code",tooltiptext:n.html.tooltip,action:function(){this.$editor().switchView()},activeState:function(){return this.$editor().showHtml}});var l=function(e){return function(){return this.$editor().queryFormatBlockState(e)}},u=function(){return this.$editor().wrapSelection("formatBlock","<"+this.name.toUpperCase()+">")};angular.forEach(["h1","h2","h3","h4","h5","h6"],function(t){e(t.toLowerCase(),{buttontext:t.toUpperCase(),tooltiptext:n.heading.tooltip+t.charAt(1),action:u,activeState:l(t.toLowerCase())})}),e("p",{buttontext:"P",tooltiptext:n.p.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<P>")},activeState:function(){return this.$editor().queryFormatBlockState("p")}}),e("pre",{buttontext:"pre",tooltiptext:n.pre.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<PRE>")},activeState:function(){return this.$editor().queryFormatBlockState("pre")}}),e("ul",{iconclass:"fa fa-list-ul",tooltiptext:n.ul.tooltip,action:function(){return this.$editor().wrapSelection("insertUnorderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertUnorderedList")}}),e("ol",{iconclass:"fa fa-list-ol",tooltiptext:n.ol.tooltip,action:function(){return this.$editor().wrapSelection("insertOrderedList",null)},activeState:function(){return this.$editor().queryCommandState("insertOrderedList")}}),e("quote",{iconclass:"fa fa-quote-right",tooltiptext:n.quote.tooltip,action:function(){return this.$editor().wrapSelection("formatBlock","<BLOCKQUOTE>")},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")}}),e("undo",{iconclass:"fa fa-undo",tooltiptext:n.undo.tooltip,action:function(){return this.$editor().wrapSelection("undo",null)}}),e("redo",{iconclass:"fa fa-repeat",tooltiptext:n.redo.tooltip,action:function(){return this.$editor().wrapSelection("redo",null)}}),e("bold",{iconclass:"fa fa-bold",tooltiptext:n.bold.tooltip,action:function(){return this.$editor().wrapSelection("bold",null)},activeState:function(){return this.$editor().queryCommandState("bold")},commandKeyCode:98}),e("justifyLeft",{iconclass:"fa fa-align-left",tooltiptext:n.justifyLeft.tooltip,action:function(){return this.$editor().wrapSelection("justifyLeft",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="left"===e.css("text-align")||"left"===e.attr("align")||"right"!==e.css("text-align")&&"center"!==e.css("text-align")&&"justify"!==e.css("text-align")&&!this.$editor().queryCommandState("justifyRight")&&!this.$editor().queryCommandState("justifyCenter")&&!this.$editor().queryCommandState("justifyFull")),t=t||this.$editor().queryCommandState("justifyLeft")}}),e("justifyRight",{iconclass:"fa fa-align-right",tooltiptext:n.justifyRight.tooltip,action:function(){return this.$editor().wrapSelection("justifyRight",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="right"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyRight")}}),e("justifyFull",{iconclass:"fa fa-align-justify",tooltiptext:n.justifyFull.tooltip,action:function(){return this.$editor().wrapSelection("justifyFull",null)},activeState:function(e){var t=!1;return e&&(t="justify"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyFull")}}),e("justifyCenter",{iconclass:"fa fa-align-center",tooltiptext:n.justifyCenter.tooltip,action:function(){return this.$editor().wrapSelection("justifyCenter",null)},activeState:function(e){if(e&&"#document"===e.nodeName)return!1;var t=!1;return e&&(t="center"===e.css("text-align")),t=t||this.$editor().queryCommandState("justifyCenter")}}),e("indent",{iconclass:"fa fa-indent",tooltiptext:n.indent.tooltip,action:function(){return this.$editor().wrapSelection("indent",null)},activeState:function(){return this.$editor().queryFormatBlockState("blockquote")},commandKeyCode:"TabKey"}),e("outdent",{iconclass:"fa fa-outdent",tooltiptext:n.outdent.tooltip,action:function(){return this.$editor().wrapSelection("outdent",null)},activeState:function(){return!1},commandKeyCode:"ShiftTabKey"}),e("italics",{iconclass:"fa fa-italic",tooltiptext:n.italic.tooltip,action:function(){return this.$editor().wrapSelection("italic",null)},activeState:function(){return this.$editor().queryCommandState("italic")},commandKeyCode:105}),e("underline",{iconclass:"fa fa-underline",tooltiptext:n.underline.tooltip,action:function(){return this.$editor().wrapSelection("underline",null)},activeState:function(){return this.$editor().queryCommandState("underline")},commandKeyCode:117}),e("strikeThrough",{iconclass:"fa fa-strikethrough",tooltiptext:n.strikeThrough.tooltip,action:function(){return this.$editor().wrapSelection("strikeThrough",null)},activeState:function(){return document.queryCommandState("strikeThrough")}}),e("clear",{iconclass:"fa fa-ban",tooltiptext:n.clear.tooltip,action:function(e,t){var n;this.$editor().wrapSelection("removeFormat",null);var i=angular.element(r.getSelectionElement()),o=function(e){var t=e=angular.element(e);angular.forEach(e.children(),function(e){var n=angular.element("<p></p>");n.html(angular.element(e).html()),t.after(n),t=n}),e.remove()};if(angular.forEach(i.find("ul"),o),angular.forEach(i.find("ol"),o),"li"===i[0].tagName.toLowerCase()){var a=i[0].parentNode.childNodes,s=[],l=[],u=!1;for(n=0;n<a.length;n++)a[n]===i[0]?u=!0:u?l.push(a[n]):s.push(a[n]);var c=angular.element(i[0].parentNode),d=angular.element("<p></p>");if(d.html(angular.element(i[0]).html()),0===s.length||0===l.length)0===l.length?c.after(d):c[0].parentNode.insertBefore(d[0],c[0]),0===s.length&&0===l.length?c.remove():angular.element(i[0]).remove();else{var f=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">"),p=angular.element("<"+c[0].tagName+"></"+c[0].tagName+">");for(n=0;n<s.length;n++)f.append(angular.element(s[n]));for(n=0;n<l.length;n++)p.append(angular.element(l[n]));c.after(p),c.after(d),c.after(f),c.remove()}r.setSelectionToElementEnd(d[0])}var h=this.$editor(),g=function(e){(e=angular.element(e))[0]!==h.displayElements.text[0]&&e.removeAttr("class"),angular.forEach(e.children(),g)};angular.forEach(i,g),"li"!==i[0].tagName.toLowerCase()&&"ol"!==i[0].tagName.toLowerCase()&&"ul"!==i[0].tagName.toLowerCase()&&this.$editor().wrapSelection("formatBlock","default"),t()}}),e("insertImage",{iconclass:"fa fa-picture-o",tooltiptext:n.insertImage.tooltip,action:function(){var e;if((e=t.prompt(n.insertImage.dialogPrompt,"http://"))&&""!==e&&"http://"!==e)return this.$editor().wrapSelection("insertImage",e,!0)},onElementSelect:{element:"img",action:i.imgOnSelectAction}}),e("insertVideo",{iconclass:"fa fa-youtube-play",tooltiptext:n.insertVideo.tooltip,action:function(){var e;if((e=t.prompt(n.insertVideo.dialogPrompt,"https://"))&&""!==e&&"https://"!==e&&(videoId=i.extractYoutubeVideoId(e),videoId)){var r="https://www.youtube.com/embed/"+videoId,o='<img class="ta-insert-video" src="https://img.youtube.com/vi/'+videoId+'/hqdefault.jpg" ta-insert-video="'+r+'" contenteditable="false" allowfullscreen="true" frameborder="0" />';return this.$editor().wrapSelection("insertHTML",o,!0)}},onElementSelect:{element:"img",onlyWithAttrs:["ta-insert-video"],action:i.imgOnSelectAction}}),e("insertLink",{tooltiptext:n.insertLink.tooltip,iconclass:"fa fa-link",action:function(){var e;if((e=t.prompt(n.insertLink.dialogPrompt,"http://"))&&""!==e&&"http://"!==e)return this.$editor().wrapSelection("createLink",e,!0)},activeState:function(e){return!!e&&"A"===e[0].tagName},onElementSelect:{element:"a",action:i.aOnSelectAction}}),e("wordcount",{display:'<div id="toolbarWC" style="display:block; min-width:100px;">Words: <span ng-bind="wordcount"></span></div>',disabled:!0,wordcount:0,activeState:function(){var e=this.$editor().displayElements.text[0].innerHTML||"",t=0;return""!==e.replace(/\s*<[^>]*?>\s*/g,"")&&(t=e.replace(/<\/?(b|i|em|strong|span|u|strikethrough|a|img|small|sub|sup|label)( [^>*?])?>/gi,"").replace(/(<[^>]*?>\s*<[^>]*?>)/gi," ").replace(/(<[^>]*?>)/gi,"").replace(/\s+/gi," ").match(/\S+/g).length),this.wordcount=t,this.$editor().wordcount=t,!1}}),e("charcount",{display:'<div id="toolbarCC" style="display:block; min-width:120px;">Characters: <span ng-bind="charcount"></span></div>',disabled:!0,charcount:0,activeState:function(){var e=this.$editor().displayElements.text,t=(e[0].innerText||e[0].textContent).replace(/(\r\n|\n|\r)/gm,"").replace(/^\s+/g," ").replace(/\s+$/g," ").length;return this.charcount=t,this.$editor().charcount=t,!1}})}]),angular.module("acute.select",["angularUUID2"]).factory("AcuteSelectService",function(){function e(e,n){t.hasOwnProperty(e)&&(t[e]=n)}var t={templatePath:"/acute.select/template",noItemsText:"No items found.",placeholderText:"Please select...",itemHeight:24,itemsInView:10,pageSize:null,minWidth:"100px",maxWidth:"",showSearchBox:!0,comboMode:!1,comboSelectOnFocus:!0,loadOnCreate:!0,loadOnOpen:!1,allowCustomText:!1,minSearchLength:0,filterType:"contains",showFilterOptions:!1,allowClear:!0,debug:!1,positionAbsolute:!1};return{getSettings:function(){var e=t.templatePath.length;return e>0&&"/"!==t.templatePath.substr(e-1,1)&&(t.templatePath+="/"),angular.copy(t)},updateSetting:function(t,n){e(t,n)},updateSettings:function(t){for(name in t)e(name,t[name])}}}).directive("acSelect",["$parse","AcuteSelectService","uuid2",function(e,t,n){return{restrict:"EAC",scope:{acSettings:"@",acOptions:"@",model:"=acModel",acChange:"&",keyField:"@acKey",acRefresh:"=",acFocusWhen:"=",id:"@"},replace:!0,templateUrl:t.getSettings().templatePath+"acute.select.htm",link:function(e,t,r){e.directiveID=n.newuuid(),e.initialise()},controller:"AcSelectController"}}]).controller("AcSelectController",["$scope","$element","$window","$rootScope","$timeout","$filter","navKey","safeApply","AcuteSelectService",function(e,t,n,r,i,o,a,s,l){function u(){e.settings.comboMode?e.comboFocus=!0:e.searchBoxFocus=!0}function c(){if(e.acSettings){var t=e.$eval(e.acSettings);"object"==typeof t&&angular.extend(e.settings,t)}if(e.longestText=e.settings.placeholderText,e.maxTextWidth="",e.settings.maxWidth){var n=parseInt(e.settings.maxWidth);e.maxCharacters=Math.round(n/6),e.maxTextWidth=n-100+"px"}var r=e.settings.positionAbsolute?"static":"absolute";if(e.popupStyles={minWidth:e.settings.minWidth,position:r},e.settings.showFilterOptions){var i=parseInt(e.settings.minWidth);(isNaN(i)||i<220)&&(e.settings.minWidth="220px")}}function d(){if(e.noItemsFound=0===e.items.length,e.showAddMessage=!1,e.noItemsFound&&(e.selectedItem=null),e.settings.comboMode&&e.comboText&&e.settings.allowCustomText){var t=e.selectedItem?e.selectedItem.text:"";e.comboText!=t&&(e.showAddMessage=!0)}}function f(t){var n,r,i;if(t.keyCode)for(n=String.fromCharCode(t.keyCode),r=0;r<e.items.length;r++)(i=e.items[r]).text.length>0&&i.text.substr(0,1).toUpperCase()===n&&(e.selectedItem=i)}function p(t,n){e.selectedItem=t;e.confirmedItem;var r=!1;e.selectedItem?(e.confirmedItem=angular.copy(e.selectedItem),e.modelUpdating=!0,e.model=e.selectedItem.value,e.comboText=e.selectedItem.text,r=!0):g()&&(r=!0),e.popupVisible&&h(),e.initialSelection=null,e.initialItem,e.popupVisible&&(r||n)&&(e.popupVisible=!1,e.wrapperFocus=!0,E&&!e.allDataLoaded||e.settings.comboMode||(e.searchText="",T()))}function h(){"function"==typeof e.acChange&&e.acChange({value:e.selectedItem?e.selectedItem.value:null})}function g(){var t,n,r,i=!1;return e.settings.allowCustomText&&e.showAddMessage&&(t=e.settings.comboMode?e.comboText:e.searchText,r=e.selectedItem?e.selectedItem.text:"",t.length>0&&t!==r&&((n={})[e.textField]=t,e.keyField&&(n[e.keyField]=t),e.modelUpdating=!0,e.model=n,e.confirmedItem=e.selectedItem={text:t,value:n,index:-1},e.items.push(e.selectedItem),e.allItems.push(e.selectedItem),i=!0)),i}function m(){e.popupVisible&&p(e.selectedItem)}function v(){if(e.items.length>0){if(e.selectedItem){var t=e.selectedItem.index+1;if(t<e.items.length){var n=e.items[t];e.selectedItem=n,$(e.selectedItem),!0}else e.settings.pageSize&&e.items.length>=e.settings.pageSize&&(e.requestedItemIndex=t,e.scrollTo+=e.settings.itemHeight,e.loadMore())}else e.selectedItem=e.items[0],!0}}function y(){if(e.items.length>0)if(e.selectedItem){var t=e.items[e.selectedItem.index-1];t&&(e.selectedItem=t,$(e.selectedItem))}else e.settings.comboMode?e.comboFocus=!0:e.searchBoxFocus=!0}function b(){if(e.items.length>0&&e.selectedItem){var t=e.selectedItem.index-e.settings.itemsInView;t<0&&(t=0);var n=e.items[t];n&&(e.selectedItem=n,$(e.selectedItem))}}function x(){var t;if(e.items.length>0){(t=e.selectedItem?e.selectedItem.index+e.settings.itemsInView:e.settings.itemsInView-1)>=e.items.length&&e.allDataLoaded&&(t=e.items.length-1);var n=e.items[t];n&&(e.selectedItem=n,$(e.selectedItem))}}function w(){if(e.items.length>0){e.selectedItem=e.items[e.items.length-1];var t=e.settings.itemHeight*e.items.length;e.scrollTo=t-e.listHeight}}function _(){e.items.length>0&&(e.selectedItem=e.items[0],e.scrollTo=0)}function C(){e.selectedItem=e.confirmedItem,p(e.selectedItem,!0)}function k(t){e.settings.allowClear&&(angular.element(t.target).hasClass("ac-select-text")?t.stopPropagation():S())}function S(){var t=e.confirmedItem;e.selectedItem=null,e.confirmedItem=null,e.modelUpdating=!0,e.model=null,e.initialSelection=null,e.scrollTo=0,e.comboText="",null!==t&&h()}function $(t){var n=e.settings.itemHeight,r=n*t.index;r+n>e.listHeight+e.scrollPosition?e.scrollTo=r+n-e.listHeight:r<e.scrollPosition&&(e.scrollTo=r)}function M(){var t,n=!1;if(e.searchText.length>0)for(t=0;t<e.items.length;t++)if(e.searchText.toLowerCase()===e.items[t].text.toLowerCase()){e.selectedItem=e.items[t],e.searchText=e.comboText=e.selectedItem.text,n=!0;break}return n}function T(){(null===e.dataFunction||e.allDataLoaded)&&(e.items=e.allItems,e.setListHeight())}function D(e,t){var n=e.target;if(n){for(var r=!1,i=0;i<10&&n&&!r;i++)angular.element(n).hasClass("ac-select-wrapper")?r=!0:n=n.parentElement;r||t()}}var E=!1;e.$on("acute.select.event.refresh",function(t,n){e.initialise()}),e.initialise=function(){if(e.settings=l.getSettings(),e.previousSearchText="",e.searchText="",e.longestText="",e.comboText="",e.items=[],e.allItems=[],e.selectedItem=null,e.allDataLoaded=!1,e.scrollTo=0,e.scrollPosition=0,e.listHeight=0,e.matchFound=!1,!e.acOptions||void 0===e.model)throw"ac-options and ac-model attributes must be set";c();var t=e.acOptions.split(" "),n=t.length;if(e.textField=null,e.dataFunction=null,e.setInitialSelection(),n>3){if(n>4){var r=t[n-5];e.textField=r.split(".")[1]}var i=t[n-1];if(i.indexOf("()")===i.length-2){i=i.substr(0,i.length-2);var o=e.$parent.$eval(i);if("function"!=typeof o)throw"Invalid data function: "+i;e.dataFunction=o,E=e.dataFunction.length>=2,e.settings.loadOnCreate&&e.dataFunction(e.dataCallback,"",0,e.settings.filterType)}else{var a=e.$parent.$eval(i);e.loadItems(a,e.model),e.confirmedItem=angular.copy(e.selectedItem),e.allDataLoaded=!0}}},e.filterTypeChange=function(){E&&(e.allDataLoaded=!1),e.filterData(),u()},void 0!==e.acRefresh&&e.$watch("acRefresh",function(t,n){!0===t&&t!==n&&e.initialise()}),void 0!==e.acFocusWhen&&e.$watch("acFocusWhen",function(t,n){!0===t&&t!==n&&(e.acFocusWhen=!1,u())}),e.setInitialSelection=function(){e.model&&(e.initialSelection=angular.copy(e.model),e.initialItem=e.getItemFromDataItem(e.model,0),e.confirmedItem=e.selectedItem=e.initialItem,e.comboText=e.confirmedItem?e.confirmedItem.text:"")},e.loadItems=function(t,n){var r,i,o,a=e.keyField;if(angular.isArray(t)){var s=!1;r=e.items.length,angular.forEach(t,function(t,l){i=r+l,(o=e.getItemFromDataItem(t,i))&&(e.items.push(o),e.searchText?e.searchText.toLowerCase()===o.text.toLowerCase()&&(e.selectedItem=o):(t===n||a&&n&&t[a]==n[a])&&(p(o),s=!0),o.text.length>e.longestText.length&&(e.maxCharacters&&o.text.length>e.maxCharacters?e.longestText=o.text.substr(0,e.maxCharacters):e.longestText=o.text))}),e.searchText||!e.initialSelection||s||(o=e.getItemFromDataItem(e.initialSelection,0))&&(e.items.unshift(o),angular.forEach(e.items,function(e,t){e.index=t}),p(o)),e.searchText||angular.copy(e.items,e.allItems),e.setListHeight(),d(e.items)}},e.getItemFromDataItem=function(t,n){var r=null;return null!==t&&(null===e.textField&&"string"==typeof t?r={text:t,value:t,index:n}:t[e.textField]&&(r={text:t[e.textField],value:t,index:n})),r},e.setListHeight=function(){var t=e.items.length;t>e.settings.itemsInView&&(t=e.settings.itemsInView),e.listHeight=e.settings.itemHeight*t},e.$watch("model",function(t,n){t!=n&&(e.modelUpdating?e.modelUpdating=!1:(t||n)&&(t&&!n?e.setInitialSelection():n&&!t?e.setInitialSelection():e.textField&&t[e.textField]===n[e.textField]||e.setInitialSelection()))}),e.selectedItem&&(e.comboText=e.selectedItem.text),n.onclick=function(t){D(t,function(){e.sentBroadcast=!1,r.$broadcast("ac-select-close-all")})},e.keyHandler=function(t){e.settings.showSearchBox||f(t);var n=t.which||t.keyCode;if(n===a.downArrow&&(e.popupVisible=!0),n===a.leftArrow||n===a.rightArrow)t.stopPropagation();else if(e.popupVisible||n===a.del){var r=!0;switch(n){case a.downArrow:v();break;case a.upArrow:y();break;case a.enter:m();break;case a.end:w();break;case a.home:_();break;case a.escape:C();break;case a.del:k(t);break;case a.pageUp:b();break;case a.pageDown:x();break;default:r=!1}r&&t.stopPropagation()}},e.comboKeyHandler=function(e){(e.which||e.keyCode)===a.enter&&g()&&p(null)},e.dataCallback=function(t,n,r){if(void 0===n||n===e.searchText){var i=null;e.dataItems=t,i=null!==e.selectedItem?e.selectedItem.value:e.model,r&&0!=r||(e.items=[]),e.loadItems(t,i),e.settings.pageSize?(e.allDataLoaded=t.length<e.settings.pageSize,e.requestedItemIndex&&(e.requestedItemIndex<e.items.length&&(e.selectedItem=e.items[e.requestedItemIndex],$(e.selectedItem)),e.requestedItemIndex=null)):(e.allDataLoaded=!0,e.settings.loadOnOpen=!1),e.allDataLoaded&&(e.previousSearchText=e.searchText),e.loading=!1,e.loadMessage="Load more..."}},e.comboTextChange=function(){r.$broadcast("acute.select.event.text.changed",{text:e.comboText}),e.popupVisible=!0,e.ensureDataLoaded(),e.searchText=e.comboText,""==e.comboText&&e.settings.allowClear&&S(),e.filterData()},e.togglePopup=function(){e.popupVisible=!e.popupVisible,e.popupVisible&&(i(e.settings.comboMode?function(){e.comboFocus=!0}:function(){e.searchBoxFocus=!0}),e.ensureDataLoaded(),T())},e.ensureDataLoaded=function(){!e.allDataLoaded&&e.dataFunction&&e.settings.loadOnOpen&&e.dataFunction(e.dataCallback,"",0,e.settings.filterType)},e.mainClick=function(){e.sentBroadcast=!0,r.$broadcast("ac-select-close-all")},e.$on("ac-select-close-all",function(){!e.sentBroadcast&&e.popupVisible?(e.popupVisible=!1,s(e),!e.settings.allowClear&&e.settings.comboMode&&e.selectedItem&&(e.comboText=e.confirmedItem.text)):e.sentBroadcast=!1}),e.itemClick=function(t){p(e.items[t])},e.getItemClass=function(t){return e.selectedItem&&e.items[t].value===e.selectedItem.value?"ac-select-highlight":""},e.addButtonClick=function(){g()&&p(null)},e.listScrolled=function(t){e.scrollPosition=t,e.settings.pageSize&&t>e.items.length*e.settings.itemHeight-e.listHeight&&e.loadMore()},e.loadMore=function(){if(!e.loading){e.loading=!0,e.loadMessage="Loading...";var t=e.items.length;e.dataFunction(e.dataCallback,e.searchText,t,e.settings.filterType)}},e.filterData=function(){var t=e.allItems.length;if(E&&(""===e.searchText||e.settings.pageSize&&(t>=e.settings.pageSize||0===t))&&(e.allDataLoaded=!1),e.allDataLoaded){var n=e.allItems;e.previousSearchText&&-1!=e.searchText.indexOf(e.previousSearchText)&&(n=e.items),"contains"==e.settings.filterType?e.items=o("filter")(n,function(t){return t.text.toLowerCase().indexOf(e.searchText.toLowerCase())>-1}):e.items=o("filter")(n,function(t){return t.text.substr(0,e.searchText.length).toLowerCase()===e.searchText.toLowerCase()}),angular.forEach(e.items,function(e,t){e.index=t}),d()}else E?(e.searchText.length>=e.settings.minSearchLength||""==e.searchText)&&e.dataFunction(e.dataCallback,e.searchText,0,e.settings.filterType):""===e.searchText&&T();1===e.items.length&&-1===e.previousSearchText.indexOf(e.searchText)?(e.matchFound=!0,e.selectedItem=e.items[0]):(e.matchFound=M(),e.matchFound&&(e.showAddMessage=!1)),e.previousSearchText=e.searchText,e.setListHeight()}}]).directive("acFocus",["$timeout","$parse","safeApply",function(e,t,n){return{restrict:"A",link:function(r,i,o){var a=t(o.acFocus);r.$watch(a,function(t,n){!0===t&&t!=n&&e(function(){i[0].focus()},100)}),i.bind("blur",function(){n(r,function(){a.assign(r,!1)})})}}}]).directive("acSelectOnFocus",function(){return{restrict:"A",scope:{acSelectOnFocus:"="},link:function(e,t,n){t.bind("focus",function(){!1!==e.acSelectOnFocus&&"false"!==e.acSelectOnFocus&&t[0].select()})}}}).directive("acScrollTo",function(){return{restrict:"A",scope:!1,controller:"AcScrollToController"}}).controller("AcScrollToController",["$scope","$element","$attrs",function(e,t,n){var r=n.acScrollTo;e.$watch(r,function(n,i){if(n!=i){var o=e.$eval(r);angular.element(t)[0].scrollTop=o}})}]).directive("acOnScroll",function(){return{restrict:"A",link:function(e,t,n){var r=n.acOnScroll;r.indexOf("()")===r.length-2&&(r=r.substr(0,r.length-2));var i=e[r];"function"==typeof i&&t.bind("scroll",function(){i(t[0].scrollTop)})}}}).factory("navKey",function(){return{backspace:8,tab:9,enter:13,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,del:46}}).factory("safeApply",[function(e){return function(e,t){var n=e.$root.$$phase;"$apply"==n||"$digest"==n?t&&e.$eval(t):t?e.$apply(t):e.$apply()}}]),angular.module("xeditable",[]).value("editableOptions",{theme:"default",buttons:"right",blurElem:"cancel",blurForm:"ignore",activate:"focus"}),angular.module("xeditable").directive("editableBsdate",["editableDirectiveFactory",function(e){return e({directiveName:"editableBsdate",inputTpl:'<input type="text">'})}]),angular.module("xeditable").directive("editableBstime",["editableDirectiveFactory",function(e){return e({directiveName:"editableBstime",inputTpl:"<timepicker></timepicker>",render:function(){this.parent.render.call(this);var e=angular.element('<div class="well well-small" style="display:inline-block;"></div>');e.attr("ng-model",this.inputEl.attr("ng-model")),this.inputEl.removeAttr("ng-model"),this.attrs.eNgChange&&(e.attr("ng-change",this.inputEl.attr("ng-change")),this.inputEl.removeAttr("ng-change")),this.inputEl.wrap(e)}})}]),angular.module("xeditable").directive("editableCheckbox",["editableDirectiveFactory",function(e){return e({directiveName:"editableCheckbox",inputTpl:'<input type="checkbox">',render:function(){this.parent.render.call(this),this.attrs.eTitle&&(this.inputEl.wrap("<label></label>"),this.inputEl.after(angular.element("<span></span>").text(this.attrs.eTitle)))},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableChecklist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableChecklist",inputTpl:"<span></span>",useCopy:!0,render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="checkbox" checklist-model="$parent.$data" checklist-value="'+e.locals.valueFn+'"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)}})}]),function(){var e="text|email|tel|number|url|search|color|date|datetime|time|month|week".split("|");angular.forEach(e,function(e){var t="editable"+e.charAt(0).toUpperCase()+e.slice(1);angular.module("xeditable").directive(t,["editableDirectiveFactory",function(n){return n({directiveName:t,inputTpl:'<input type="'+e+'">'})}])}),angular.module("xeditable").directive("editableRange",["editableDirectiveFactory",function(e){return e({directiveName:"editableRange",inputTpl:'<input type="range" id="range" name="range">',render:function(){this.parent.render.call(this),this.inputEl.after("<output>{{$data}}</output>")}})}])}(),angular.module("xeditable").directive("editableRadiolist",["editableDirectiveFactory","editableNgOptionsParser",function(e,t){return e({directiveName:"editableRadiolist",inputTpl:"<span></span>",render:function(){this.parent.render.call(this);var e=t(this.attrs.eNgOptions),n='<label ng-repeat="'+e.ngRepeat+'"><input type="radio" ng-model="$parent.$data" value="{{'+e.locals.valueFn+'}}"><span ng-bind="'+e.locals.displayFn+'"></span></label>';this.inputEl.removeAttr("ng-model"),this.inputEl.removeAttr("ng-options"),this.inputEl.html(n)},autosubmit:function(){var e=this;e.inputEl.bind("change",function(){setTimeout(function(){e.scope.$apply(function(){e.scope.$form.$submit()})},500)})}})}]),angular.module("xeditable").directive("editableSelect",["editableDirectiveFactory",function(e){return e({directiveName:"editableSelect",inputTpl:"<select></select>",autosubmit:function(){var e=this;e.inputEl.bind("change",function(){e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").directive("editableTextarea",["editableDirectiveFactory",function(e){return e({directiveName:"editableTextarea",inputTpl:"<textarea></textarea>",addListeners:function(){var e=this;e.parent.addListeners.call(e),e.single&&"no"!==e.buttons&&e.autosubmit()},autosubmit:function(){var e=this;e.inputEl.bind("keydown",function(t){(t.ctrlKey||t.metaKey)&&13===t.keyCode&&e.scope.$apply(function(){e.scope.$form.$submit()})})}})}]),angular.module("xeditable").factory("editableController",["$q","editableUtils",function(e,t){function n(e,n,r,i,o,a,s,l,u){var c,d,f=this;f.scope=e,f.elem=r,f.attrs=n,f.inputEl=null,f.editorEl=null,f.single=!0,f.error="",f.theme=o[a.theme]||o.default,f.parent={},f.inputTpl="",f.directiveName="",f.useCopy=!1,f.single=null,f.buttons="right",f.init=function(t){if(f.single=t,f.name=n.eName||n[f.directiveName],!n[f.directiveName])throw"You should provide value for `"+f.directiveName+"` in editable element!";c=i(n[f.directiveName]),f.buttons=f.single?f.attrs.buttons||a.buttons:"no",n.eName&&f.scope.$watch("$data",function(e){f.scope.$form.$data[n.eName]=e}),n.onshow&&(f.onshow=function(){return f.catchError(i(n.onshow)(e))}),n.onhide&&(f.onhide=function(){return i(n.onhide)(e)}),n.oncancel&&(f.oncancel=function(){return i(n.oncancel)(e)}),n.onbeforesave&&(f.onbeforesave=function(){return f.catchError(i(n.onbeforesave)(e))}),n.onaftersave&&(f.onaftersave=function(){return f.catchError(i(n.onaftersave)(e))}),e.$parent.$watch(n[f.directiveName],function(){f.handleEmpty()})},f.render=function(){var e=f.theme;f.inputEl=angular.element(f.inputTpl),f.controlsEl=angular.element(e.controlsTpl),f.controlsEl.append(f.inputEl),"no"!==f.buttons&&(f.buttonsEl=angular.element(e.buttonsTpl),f.submitEl=angular.element(e.submitTpl),f.cancelEl=angular.element(e.cancelTpl),f.buttonsEl.append(f.submitEl).append(f.cancelEl),f.controlsEl.append(f.buttonsEl),f.inputEl.addClass("editable-has-buttons")),f.errorEl=angular.element(e.errorTpl),f.controlsEl.append(f.errorEl),f.editorEl=angular.element(f.single?e.formTpl:e.noformTpl),f.editorEl.append(f.controlsEl);for(var r in n.$attr)if(!(r.length<=1)){var i=!1,o=r.substring(1,2);if("e"===r.substring(0,1)&&o===o.toUpperCase()&&"Form"!==(i=r.substring(1))&&"NgSubmit"!==i){i=i.substring(0,1).toLowerCase()+t.camelToDash(i.substring(1));var s=""===n[r]?i:n[r];f.inputEl.attr(i,s)}}f.inputEl.addClass("editable-input"),f.inputEl.attr("ng-model","$data"),f.editorEl.addClass(t.camelToDash(f.directiveName)),f.single&&(f.editorEl.attr("editable-form","$form"),f.editorEl.attr("blur",f.attrs.blur||("no"===f.buttons?"cancel":a.blurElem))),angular.isFunction(e.postrender)&&e.postrender.call(f)},f.setLocalValue=function(){f.scope.$data=f.useCopy?angular.copy(c(e.$parent)):c(e.$parent)},f.show=function(){return f.setLocalValue(),f.render(),r.after(f.editorEl),l(f.editorEl)(e),f.addListeners(),r.addClass("editable-hide"),f.onshow()},f.hide=function(){return f.editorEl.remove(),r.removeClass("editable-hide"),f.onhide()},f.cancel=function(){f.oncancel()},f.addListeners=function(){f.inputEl.bind("keyup",function(e){if(f.single)switch(e.keyCode){case 27:f.scope.$apply(function(){f.scope.$form.$cancel()})}}),f.single&&"no"===f.buttons&&f.autosubmit(),f.editorEl.bind("click",function(e){1===e.which&&f.scope.$form.$visible&&(f.scope.$form._clicked=!0)})},f.setWaiting=function(e){e?(d=!f.inputEl.attr("disabled")&&!f.inputEl.attr("ng-disabled")&&!f.inputEl.attr("ng-enabled"))&&(f.inputEl.attr("disabled","disabled"),f.buttonsEl&&f.buttonsEl.find("button").attr("disabled","disabled")):d&&(f.inputEl.removeAttr("disabled"),f.buttonsEl&&f.buttonsEl.find("button").removeAttr("disabled"))},f.activate=function(){setTimeout(function(){var e=f.inputEl[0];"focus"===a.activate&&e.focus&&e.focus(),"select"===a.activate&&e.select&&e.select()},0)},f.setError=function(t){angular.isObject(t)||(e.$error=t,f.error=t)},f.catchError=function(e,t){return angular.isObject(e)&&!0!==t?u.when(e).then(angular.bind(this,function(e){this.catchError(e,!0)}),angular.bind(this,function(e){this.catchError(e,!0)})):t&&angular.isObject(e)&&e.status&&200!==e.status&&e.data&&angular.isString(e.data)?(this.setError(e.data),e=e.data):angular.isString(e)&&this.setError(e),e},f.save=function(){c.assign(e.$parent,angular.copy(f.scope.$data))},f.handleEmpty=function(){var t=c(e.$parent),n=null===t||void 0===t||""===t||angular.isArray(t)&&0===t.length;r.toggleClass("editable-empty",n)},f.autosubmit=angular.noop,f.onshow=angular.noop,f.onhide=angular.noop,f.oncancel=angular.noop,f.onbeforesave=angular.noop,f.onaftersave=angular.noop}return n.$inject=["$scope","$attrs","$element","$parse","editableThemes","editableOptions","$rootScope","$compile","$q"],n}]),angular.module("xeditable").factory("editableDirectiveFactory",["$parse","$compile","editableThemes","$rootScope","$document","editableController","editableFormController",function(e,t,n,r,i,o,a){return function(t){return{restrict:"A",scope:!0,require:[t.directiveName,"?^form"],controller:o,link:function(n,o,s,l){var u,c=l[0],d=!1;if(l[1])u=l[1],d=!0;else if(s.eForm){var f=e(s.eForm)(n);if(f)u=f,d=!0;else for(var p=0;p<i[0].forms.length;p++)if(i[0].forms[p].name===s.eForm){u=null,d=!0;break}}if(angular.forEach(t,function(e,t){void 0!==c[t]&&(c.parent[t]=c[t])}),angular.extend(c,t),c.init(!d),n.$editable=c,o.addClass("editable"),d)if(u){if(n.$form=u,!n.$form.$addEditable)throw"Form with editable elements should have `editable-form` attribute.";n.$form.$addEditable(c)}else r.$$editableBuffer=r.$$editableBuffer||{},r.$$editableBuffer[s.eForm]=r.$$editableBuffer[s.eForm]||[],r.$$editableBuffer[s.eForm].push(c),n.$form=null;else n.$form=a(),n.$form.$addEditable(c),s.eForm&&(n.$parent[s.eForm]=n.$form),s.eForm||(o.addClass("editable-click"),o.bind("click",function(e){e.preventDefault(),e.editable=c,n.$apply(function(){n.$form.$show()})}))}}}}]),angular.module("xeditable").factory("editableFormController",["$parse","$document","$rootScope","editablePromiseCollection","editableUtils",function(e,t,n,r,i){var o=[];t.bind("click",function(e){if(1===e.which){for(var t=[],r=[],i=0;i<o.length;i++)o[i]._clicked?o[i]._clicked=!1:o[i].$waiting||("cancel"===o[i]._blur&&t.push(o[i]),"submit"===o[i]._blur&&r.push(o[i]));(t.length||r.length)&&n.$apply(function(){angular.forEach(t,function(e){e.$cancel()}),angular.forEach(r,function(e){e.$submit()})})}});var a={$addEditable:function(e){this.$editables.push(e),e.elem.bind("$destroy",angular.bind(this,this.$removeEditable,e)),e.scope.$form||(e.scope.$form=this),this.$visible&&e.catchError(e.show())},$removeEditable:function(e){for(var t=0;t<this.$editables.length;t++)if(this.$editables[t]===e)return void this.$editables.splice(t,1)},$show:function(){if(!this.$visible){this.$visible=!0;var e=r();e.when(this.$onshow()),this.$setError(null,""),angular.forEach(this.$editables,function(t){e.when(t.show())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$activate),onFalse:angular.bind(this,this.$activate),onString:angular.bind(this,this.$activate)}),setTimeout(angular.bind(this,function(){this._clicked=!1,-1===i.indexOf(o,this)&&o.push(this)}),0)}},$activate:function(e){var t;if(this.$editables.length){if(angular.isString(e))for(t=0;t<this.$editables.length;t++)if(this.$editables[t].name===e)return void this.$editables[t].activate();for(t=0;t<this.$editables.length;t++)if(this.$editables[t].error)return void this.$editables[t].activate();this.$editables[0].activate()}},$hide:function(){this.$visible&&(this.$visible=!1,this.$onhide(),angular.forEach(this.$editables,function(e){e.hide()}),i.arrayRemove(o,this))},$cancel:function(){this.$visible&&(this.$oncancel(),angular.forEach(this.$editables,function(e){e.cancel()}),this.$hide())},$setWaiting:function(e){this.$waiting=!!e,angular.forEach(this.$editables,function(t){t.setWaiting(!!e)})},$setError:function(e,t){angular.forEach(this.$editables,function(n){e&&n.name!==e||n.setError(t)})},$submit:function(){function e(e){var t=r();t.when(this.$onbeforesave()),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:e?angular.bind(this,this.$save):angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})}if(!this.$waiting){this.$setError(null,"");var t=r();angular.forEach(this.$editables,function(e){t.when(e.onbeforesave())}),t.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,e,!0),onFalse:angular.bind(this,e,!1),onString:angular.bind(this,this.$activate)})}},$save:function(){angular.forEach(this.$editables,function(e){e.save()});var e=r();e.when(this.$onaftersave()),angular.forEach(this.$editables,function(t){e.when(t.onaftersave())}),e.then({onWait:angular.bind(this,this.$setWaiting),onTrue:angular.bind(this,this.$hide),onFalse:angular.bind(this,this.$hide),onString:angular.bind(this,this.$activate)})},$onshow:angular.noop,$oncancel:angular.noop,$onhide:angular.noop,$onbeforesave:angular.noop,$onaftersave:angular.noop};return function(){return angular.extend({$editables:[],$visible:!1,$waiting:!1,$data:{},_clicked:!1,_blur:null},a)}}]),angular.module("xeditable").directive("editableForm",["$rootScope","$parse","editableFormController","editableOptions",function(e,t,n,r){return{restrict:"A",require:["form"],compile:function(){return{pre:function(t,r,i,o){var a,s=o[0];i.editableForm?t[i.editableForm]&&t[i.editableForm].$show?(a=t[i.editableForm],angular.extend(s,a)):(a=n(),t[i.editableForm]=a,angular.extend(a,s)):(a=n(),angular.extend(s,a));var l=e.$$editableBuffer,u=s.$name;u&&l&&l[u]&&(angular.forEach(l[u],function(e){a.$addEditable(e)}),delete l[u])},post:function(e,n,i,o){var a;a=i.editableForm&&e[i.editableForm]&&e[i.editableForm].$show?e[i.editableForm]:o[0],i.onshow&&(a.$onshow=angular.bind(a,t(i.onshow),e)),i.onhide&&(a.$onhide=angular.bind(a,t(i.onhide),e)),i.oncancel&&(a.$oncancel=angular.bind(a,t(i.oncancel),e)),i.shown&&t(i.shown)(e)&&a.$show(),a._blur=i.blur||r.blurForm,i.ngSubmit||i.submit||(i.onbeforesave&&(a.$onbeforesave=function(){return t(i.onbeforesave)(e,{$data:a.$data})}),i.onaftersave&&(a.$onaftersave=function(){return t(i.onaftersave)(e,{$data:a.$data})}),n.bind("submit",function(t){t.preventDefault(),e.$apply(function(){a.$submit()})})),n.bind("click",function(e){1===e.which&&a.$visible&&(a._clicked=!0)})}}}}}]),angular.module("xeditable").factory("editablePromiseCollection",["$q",function(e){function t(){return{promises:[],hasFalse:!1,hasString:!1,when:function(t,n){if(!1===t)this.hasFalse=!0;else if(!n&&angular.isObject(t))this.promises.push(e.when(t));else{if(!angular.isString(t))return;this.hasString=!0}},then:function(t){function n(){s.hasString||s.hasFalse?!s.hasString&&s.hasFalse?i():o():r()}var r=(t=t||{}).onTrue||angular.noop,i=t.onFalse||angular.noop,o=t.onString||angular.noop,a=t.onWait||angular.noop,s=this;this.promises.length?(a(!0),e.all(this.promises).then(function(e){a(!1),angular.forEach(e,function(e){s.when(e,!0)}),n()},function(){a(!1),o()})):n()}}}return t}]),angular.module("xeditable").factory("editableUtils",[function(){return{indexOf:function(e,t){if(e.indexOf)return e.indexOf(t);for(var n=0;n<e.length;n++)if(t===e[n])return n;return-1},arrayRemove:function(e,t){var n=this.indexOf(e,t);return n>=0&&e.splice(n,1),t},camelToDash:function(e){var t=/[A-Z]/g;return e.replace(t,function(e,t){return(t?"-":"")+e.toLowerCase()})},dashToCamel:function(e){var t=/([\:\-\_]+(.))/g,n=/^moz([A-Z])/;return e.replace(t,function(e,t,n,r){return r?n.toUpperCase():n}).replace(n,"Moz$1")}}}]),angular.module("xeditable").factory("editableNgOptionsParser",[function(){function e(e){var n;if(!(n=e.match(t)))throw"ng-options parse error";var r,i=n[2]||n[1],o=n[4]||n[6],a=n[5],s=(n[3],n[2]?n[1]:o),l=n[7],u=n[8],c=u?n[8]:null;return void 0===a?(r=o+" in "+l,void 0!==u&&(r+=" track by "+c)):r="("+a+", "+o+") in "+l,{ngRepeat:r,locals:{valueName:o,keyName:a,valueFn:s,displayFn:i}}}var t=/^\s*(.*?)(?:\s+as\s+(.*?))?(?:\s+group\s+by\s+(.*))?\s+for\s+(?:([\$\w][\$\w]*)|(?:\(\s*([\$\w][\$\w]*)\s*,\s*([\$\w][\$\w]*)\s*\)))\s+in\s+(.*?)(?:\s+track\s+by\s+(.*?))?$/;return e}]),angular.module("xeditable").factory("editableThemes",function(){return{default:{formTpl:'<form class="editable-wrap"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<span class="editable-controls"></span>',inputTpl:"",errorTpl:'<div class="editable-error" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit">save</button>',cancelTpl:'<button type="button" ng-click="$form.$cancel()">cancel</button>'},bs2:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls controls control-group" ng-class="{\'error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span class="icon-ok icon-white"></span></button>',cancelTpl:'<button type="button" class="btn" ng-click="$form.$cancel()"><span class="icon-remove"></span></button>'},bs3:{formTpl:'<form class="form-inline editable-wrap" role="form"></form>',noformTpl:'<span class="editable-wrap"></span>',controlsTpl:'<div class="editable-controls form-group" ng-class="{\'has-error\': $error}"></div>',inputTpl:"",errorTpl:'<div class="editable-error help-block" ng-show="$error" ng-bind="$error"></div>',buttonsTpl:'<span class="editable-buttons"></span>',submitTpl:'<button type="submit" class="btn btn-primary"><span class="glyphicon glyphicon-ok"></span></button>',cancelTpl:'<button type="button" class="btn btn-default" ng-click="$form.$cancel()"><span class="glyphicon glyphicon-remove"></span></button>',buttonsClass:"",inputClass:"",postrender:function(){switch(this.directiveName){case"editableText":case"editableSelect":case"editableTextarea":case"editableEmail":case"editableTel":case"editableNumber":case"editableUrl":case"editableSearch":case"editableDate":case"editableDatetime":case"editableTime":case"editableMonth":case"editableWeek":if(this.inputEl.addClass("form-control"),this.theme.inputClass){if(this.inputEl.attr("multiple")&&("input-sm"===this.theme.inputClass||"input-lg"===this.theme.inputClass))break;this.inputEl.addClass(this.theme.inputClass)}}this.buttonsEl&&this.theme.buttonsClass&&this.buttonsEl.find("button").addClass(this.theme.buttonsClass)}}}}),function(e){var t="object"==typeof window&&window||"object"==typeof self&&self;"undefined"!=typeof exports?e(exports):t&&(t.hljs=e({}),"function"==typeof define&&define.amd&&define([],function(){return t.hljs}))}(function(e){function t(e){return e.replace(/</gm,"&lt;").replace(/>/gm,"&gt;")}function n(e){return e.nodeName.toLowerCase()}function r(e,t){var n=e&&e.exec(t);return n&&0==n.index}function i(e){return/^(no-?highlight|plain|text)$/i.test(e)}function o(e){var t,n,r,o=e.className+" ";if(o+=e.parentNode?e.parentNode.className:"",n=/\blang(?:uage)?-([\w-]+)\b/i.exec(o))return x(n[1])?n[1]:"no-highlight";for(t=0,r=(o=o.split(/\s+/)).length;r>t;t++)if(x(o[t])||i(o[t]))return o[t]}function a(e,t){var n,r={};for(n in e)r[n]=e[n];if(t)for(n in t)r[n]=t[n];return r}function s(e){var t=[];return function e(r,i){for(var o=r.firstChild;o;o=o.nextSibling)3==o.nodeType?i+=o.nodeValue.length:1==o.nodeType&&(t.push({event:"start",offset:i,node:o}),i=e(o,i),n(o).match(/br|hr|img|input/)||t.push({event:"stop",offset:i,node:o}));return i}(e,0),t}function l(e,r,i){function o(){return e.length&&r.length?e[0].offset!=r[0].offset?e[0].offset<r[0].offset?e:r:"start"==r[0].event?e:r:e.length?e:r}function a(e){function r(e){return" "+e.nodeName+'="'+t(e.value)+'"'}c+="<"+n(e)+Array.prototype.map.call(e.attributes,r).join("")+">"}function s(e){c+="</"+n(e)+">"}function l(e){("start"==e.event?a:s)(e.node)}for(var u=0,c="",d=[];e.length||r.length;){var f=o();if(c+=t(i.substr(u,f[0].offset-u)),u=f[0].offset,f==e){d.reverse().forEach(s);do{l(f.splice(0,1)[0]),f=o()}while(f==e&&f.length&&f[0].offset==u);d.reverse().forEach(a)}else"start"==f[0].event?d.push(f[0].node):d.pop(),l(f.splice(0,1)[0])}return c+t(i.substr(u))}function u(e){function t(e){return e&&e.source||e}function n(n,r){return new RegExp(t(n),"m"+(e.cI?"i":"")+(r?"g":""))}function r(i,o){if(!i.compiled){if(i.compiled=!0,i.k=i.k||i.bK,i.k){var s={},l=function(t,n){e.cI&&(n=n.toLowerCase()),n.split(" ").forEach(function(e){var n=e.split("|");s[n[0]]=[t,n[1]?Number(n[1]):1]})};"string"==typeof i.k?l("keyword",i.k):Object.keys(i.k).forEach(function(e){l(e,i.k[e])}),i.k=s}i.lR=n(i.l||/\w+/,!0),o&&(i.bK&&(i.b="\\b("+i.bK.split(" ").join("|")+")\\b"),i.b||(i.b=/\B|\b/),i.bR=n(i.b),i.e||i.eW||(i.e=/\B|\b/),i.e&&(i.eR=n(i.e)),i.tE=t(i.e)||"",i.eW&&o.tE&&(i.tE+=(i.e?"|":"")+o.tE)),i.i&&(i.iR=n(i.i)),void 0===i.r&&(i.r=1),i.c||(i.c=[]);var u=[];i.c.forEach(function(e){e.v?e.v.forEach(function(t){u.push(a(e,t))}):u.push("self"==e?i:e)}),i.c=u,i.c.forEach(function(e){r(e,i)}),i.starts&&r(i.starts,o);var c=i.c.map(function(e){return e.bK?"\\.?("+e.b+")\\.?":e.b}).concat([i.tE,i.i]).map(t).filter(Boolean);i.t=c.length?n(c.join("|"),!0):{exec:function(){return null}}}}r(e)}function c(e,n,i,o){function a(e,t){for(var n=0;n<t.c.length;n++)if(r(t.c[n].bR,e))return t.c[n]}function s(e,t){if(r(e.eR,t)){for(;e.endsParent&&e.parent;)e=e.parent;return e}return e.eW?s(e.parent,t):void 0}function l(e,t){return!i&&r(t.iR,e)}function f(e,t){var n=b.cI?t[0].toLowerCase():t[0];return e.k.hasOwnProperty(n)&&e.k[n]}function p(e,t,n,r){var i='<span class="'+(r?"":w.classPrefix);return(i+=e+'">')+t+(n?"":"</span>")}function h(){if(!k.k)return t(M);var e="",n=0;k.lR.lastIndex=0;for(var r=k.lR.exec(M);r;){e+=t(M.substr(n,r.index-n));var i=f(k,r);i?(T+=i[1],e+=p(i[0],t(r[0]))):e+=t(r[0]),n=k.lR.lastIndex,r=k.lR.exec(M)}return e+t(M.substr(n))}function g(){var e="string"==typeof k.sL;if(e&&!_[k.sL])return t(M);var n=e?c(k.sL,M,!0,S[k.sL]):d(M,k.sL.length?k.sL:void 0);return k.r>0&&(T+=n.r),e&&(S[k.sL]=n.top),p(n.language,n.value,!1,!0)}function m(){$+=void 0!==k.sL?g():h(),M=""}function v(e,t){$+=e.cN?p(e.cN,"",!0):"",k=Object.create(e,{parent:{value:k}})}function y(e,t){if(M+=e,void 0===t)return m(),0;var n=a(t,k);if(n)return n.skip?M+=t:(n.eB&&(M+=t),m(),n.rB||n.eB||(M=t)),v(n,t),n.rB?0:t.length;var r=s(k,t);if(r){var i=k;i.skip?M+=t:(i.rE||i.eE||(M+=t),m(),i.eE&&(M=t));do{k.cN&&($+="</span>"),k.skip||(T+=k.r),k=k.parent}while(k!=r.parent);return r.starts&&v(r.starts,""),i.rE?0:t.length}if(l(t,k))throw new Error('Illegal lexeme "'+t+'" for mode "'+(k.cN||"<unnamed>")+'"');return M+=t,t.length||1}var b=x(e);if(!b)throw new Error('Unknown language: "'+e+'"');u(b);var C,k=o||b,S={},$="";for(C=k;C!=b;C=C.parent)C.cN&&($=p(C.cN,"",!0)+$);var M="",T=0;try{for(var D,E,L=0;k.t.lastIndex=L,D=k.t.exec(n);)E=y(n.substr(L,D.index-L),D[0]),L=D.index+E;for(y(n.substr(L)),C=k;C.parent;C=C.parent)C.cN&&($+="</span>");return{r:T,value:$,language:e,top:k}}catch(e){if(-1!=e.message.indexOf("Illegal"))return{r:0,value:t(n)};throw e}}function d(e,n){n=n||w.languages||Object.keys(_);var r={r:0,value:t(e)},i=r;return n.filter(x).forEach(function(t){var n=c(t,e,!1);n.language=t,n.r>i.r&&(i=n),n.r>r.r&&(i=r,r=n)}),i.language&&(r.second_best=i),r}function f(e){return w.tabReplace&&(e=e.replace(/^((<[^>]+>|\t)+)/gm,function(e,t){return t.replace(/\t/g,w.tabReplace)})),w.useBR&&(e=e.replace(/\n/g,"<br>")),e}function p(e,t,n){var r=t?C[t]:n,i=[e.trim()];return e.match(/\bhljs\b/)||i.push("hljs"),-1===e.indexOf(r)&&i.push(r),i.join(" ").trim()}function h(e){var t=o(e);if(!i(t)){var n;w.useBR?(n=document.createElementNS("http://www.w3.org/1999/xhtml","div"),n.innerHTML=e.innerHTML.replace(/\n/g,"").replace(/<br[ \/]*>/g,"\n")):n=e;var r=n.textContent,a=t?c(t,r,!0):d(r),u=s(n);if(u.length){var h=document.createElementNS("http://www.w3.org/1999/xhtml","div");h.innerHTML=a.value,a.value=l(u,s(h),r)}a.value=f(a.value),e.innerHTML=a.value,e.className=p(e.className,t,a.language),e.result={language:a.language,re:a.r},a.second_best&&(e.second_best={language:a.second_best.language,re:a.second_best.r})}}function g(e){w=a(w,e)}function m(){if(!m.called){m.called=!0;var e=document.querySelectorAll("pre code");Array.prototype.forEach.call(e,h)}}function v(){addEventListener("DOMContentLoaded",m,!1),addEventListener("load",m,!1)}function y(t,n){var r=_[t]=n(e);r.aliases&&r.aliases.forEach(function(e){C[e]=t})}function b(){return Object.keys(_)}function x(e){return e=(e||"").toLowerCase(),_[e]||_[C[e]]}var w={classPrefix:"hljs-",tabReplace:null,useBR:!1,languages:void 0},_={},C={};return e.highlight=c,e.highlightAuto=d,e.fixMarkup=f,e.highlightBlock=h,e.configure=g,e.initHighlighting=m,e.initHighlightingOnLoad=v,e.registerLanguage=y,e.listLanguages=b,e.getLanguage=x,e.inherit=a,e.IR="[a-zA-Z]\\w*",e.UIR="[a-zA-Z_]\\w*",e.NR="\\b\\d+(\\.\\d+)?",e.CNR="(-?)(\\b0[xX][a-fA-F0-9]+|(\\b\\d+(\\.\\d*)?|\\.\\d+)([eE][-+]?\\d+)?)",e.BNR="\\b(0b[01]+)",e.RSR="!|!=|!==|%|%=|&|&&|&=|\\*|\\*=|\\+|\\+=|,|-|-=|/=|/|:|;|<<|<<=|<=|<|===|==|=|>>>=|>>=|>=|>>>|>>|>|\\?|\\[|\\{|\\(|\\^|\\^=|\\||\\|=|\\|\\||~",e.BE={b:"\\\\[\\s\\S]",r:0},e.ASM={cN:"string",b:"'",e:"'",i:"\\n",c:[e.BE]},e.QSM={cN:"string",b:'"',e:'"',i:"\\n",c:[e.BE]},e.PWM={b:/\b(a|an|the|are|I'm|isn't|don't|doesn't|won't|but|just|should|pretty|simply|enough|gonna|going|wtf|so|such|will|you|your|like)\b/},e.C=function(t,n,r){var i=e.inherit({cN:"comment",b:t,e:n,c:[]},r||{});return i.c.push(e.PWM),i.c.push({cN:"doctag",b:"(?:TODO|FIXME|NOTE|BUG|XXX):",r:0}),i},e.CLCM=e.C("//","$"),e.CBCM=e.C("/\\*","\\*/"),e.HCM=e.C("#","$"),e.NM={cN:"number",b:e.NR,r:0},e.CNM={cN:"number",b:e.CNR,r:0},e.BNM={cN:"number",b:e.BNR,r:0},e.CSSNM={cN:"number",b:e.NR+"(%|em|ex|ch|rem|vw|vh|vmin|vmax|cm|mm|in|pt|pc|px|deg|grad|rad|turn|s|ms|Hz|kHz|dpi|dpcm|dppx)?",r:0},e.RM={cN:"regexp",b:/\//,e:/\/[gimuy]*/,i:/\n/,c:[e.BE,{b:/\[/,e:/\]/,r:0,c:[e.BE]}]},e.TM={cN:"title",b:e.IR,r:0},e.UTM={cN:"title",b:e.UIR,r:0},e.METHOD_GUARD={b:"\\.\\s*"+e.UIR,r:0},e}),hljs.registerLanguage("xml",function(e){var t={eW:!0,i:/</,r:0,c:[{cN:"attr",b:"[A-Za-z0-9\\._:-]+",r:0},{b:/=\s*/,r:0,c:[{cN:"string",endsParent:!0,v:[{b:/"/,e:/"/},{b:/'/,e:/'/},{b:/[^\s"'=<>`]+/}]}]}]};return{aliases:["html","xhtml","rss","atom","xjb","xsd","xsl","plist"],cI:!0,c:[{cN:"meta",b:"<!DOCTYPE",e:">",r:10,c:[{b:"\\[",e:"\\]"}]},e.C("\x3c!--","--\x3e",{r:10}),{b:"<\\!\\[CDATA\\[",e:"\\]\\]>",r:10},{b:/<\?(php)?/,e:/\?>/,sL:"php",c:[{b:"/\\*",e:"\\*/",skip:!0}]},{cN:"tag",b:"<style(?=\\s|>|$)",e:">",k:{name:"style"},c:[t],starts:{e:"</style>",rE:!0,sL:["css","xml"]}},{cN:"tag",b:"<script(?=\\s|>|$)",e:">",k:{name:"script"},c:[t],starts:{e:"<\/script>",rE:!0,sL:["actionscript","javascript","handlebars","xml"]}},{cN:"meta",v:[{b:/<\?xml/,e:/\?>/,r:10},{b:/<\?\w+/,e:/\?>/}]},{cN:"tag",b:"</?",e:"/?>",c:[{cN:"name",b:/[^\/><\s]+/,r:0},t]}]}}),hljs.registerLanguage("css",function(e){var t={b:/[A-Z\_\.\-]+\s*:/,rB:!0,e:";",eW:!0,c:[{cN:"attribute",b:/\S/,e:":",eE:!0,starts:{eW:!0,eE:!0,c:[{b:/[\w-]+\(/,rB:!0,c:[{cN:"built_in",b:/[\w-]+/},{b:/\(/,e:/\)/,c:[e.ASM,e.QSM]}]},e.CSSNM,e.QSM,e.ASM,e.CBCM,{cN:"number",b:"#[0-9A-Fa-f]+"},{cN:"meta",b:"!important"}]}}]};return{cI:!0,i:/[=\/|'\$]/,c:[e.CBCM,{cN:"selector-id",b:/#[A-Za-z0-9_-]+/},{cN:"selector-class",b:/\.[A-Za-z0-9_-]+/},{cN:"selector-attr",b:/\[/,e:/\]/,i:"$"},{cN:"selector-pseudo",b:/:(:)?[a-zA-Z0-9\_\-\+\(\)"'.]+/},{b:"@(font-face|page)",l:"[a-z-]+",k:"font-face page"},{b:"@",e:"[{;]",i:/:/,c:[{cN:"keyword",b:/\w+/},{b:/\s/,eW:!0,eE:!0,r:0,c:[e.ASM,e.QSM,e.CSSNM]}]},{cN:"selector-tag",b:"[a-zA-Z-][a-zA-Z0-9_-]*",r:0},{b:"{",e:"}",i:/\S/,c:[e.CBCM,t]}]}}),hljs.registerLanguage("javascript",function(e){return{aliases:["js","jsx"],k:{keyword:"in of if for while finally var new function do return void else break catch instanceof with throw case default try this switch continue typeof delete let yield const export super debugger as async await static import from as",literal:"true false null undefined NaN Infinity",built_in:"eval isFinite isNaN parseFloat parseInt decodeURI decodeURIComponent encodeURI encodeURIComponent escape unescape Object Function Boolean Error EvalError InternalError RangeError ReferenceError StopIteration SyntaxError TypeError URIError Number Math Date String RegExp Array Float32Array Float64Array Int16Array Int32Array Int8Array Uint16Array Uint32Array Uint8Array Uint8ClampedArray ArrayBuffer DataView JSON Intl arguments require module console window document Symbol Set Map WeakSet WeakMap Proxy Reflect Promise"},c:[{cN:"meta",r:10,b:/^\s*['"]use (strict|asm)['"]/},{cN:"meta",b:/^#!/,e:/$/},e.ASM,e.QSM,{cN:"string",b:"`",e:"`",c:[e.BE,{cN:"subst",b:"\\$\\{",e:"\\}"}]},e.CLCM,e.CBCM,{cN:"number",v:[{b:"\\b(0[bB][01]+)"},{b:"\\b(0[oO][0-7]+)"},{b:e.CNR}],r:0},{b:"("+e.RSR+"|\\b(case|return|throw)\\b)\\s*",k:"return throw case",c:[e.CLCM,e.CBCM,e.RM,{b:/</,e:/(\/\w+|\w+\/)>/,sL:"xml",c:[{b:/<\w+\s*\/>/,skip:!0},{b:/<\w+/,e:/(\/\w+|\w+\/)>/,skip:!0,c:["self"]}]}],r:0},{cN:"function",bK:"function",e:/\{/,eE:!0,c:[e.inherit(e.TM,{b:/[A-Za-z$_][0-9A-Za-z$_]*/}),{cN:"params",b:/\(/,e:/\)/,eB:!0,eE:!0,c:[e.CLCM,e.CBCM]}],i:/\[|%/},{b:/\$[(.]/},e.METHOD_GUARD,{cN:"class",bK:"class",e:/[{;=]/,eE:!0,i:/[:"\[\]]/,c:[{bK:"extends"},e.UTM]},{bK:"constructor",e:/\{/,eE:!0}],i:/#(?!!)/}}),function(e,t){"object"==typeof exports||"object"==typeof module&&module.exports?module.exports=t(require("angular"),require("highlight.js")):"function"==typeof define&&define.amd?define(["angular","hljs"],t):e.returnExports=t(e.angular,e.hljs)}(this,function(e,t){function n(t){return function(n){switch(n){case"escape":return e.isDefined(t.hljsEscape)?t.hljsEscape:t.escape;case"no-escape":return e.isDefined(t.hljsNoEscape)?t.hljsNoEscape:t.noEscape;case"onhighlight":return e.isDefined(t.hljsOnhighlight)?t.hljsOnhighlight:t.onhighlight}}}function r(t){var n=!0;return e.forEach(["source","include"],function(e){t[e]&&(n=!1)}),n}var i=e.module("hljs",[]);i.provider("hljsService",function(){var n={};return{setOptions:function(t){e.extend(n,t)},getOptions:function(){return e.copy(n)},$get:function(){return(t.configure||e.noop)(n),t}}}),i.factory("hljsCache",["$cacheFactory",function(e){return e("hljsCache")}]),i.controller("HljsCtrl",["hljsCache","hljsService","$interpolate","$window",function(t,n,r,i){function o(e,t){var n=t?"\\\\$&":"\\$&";return e.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,n)}function a(e){for(var t,n=[],r=new RegExp(g,"g"),i="",o=0;null!==(t=r.exec(e));)i+=e.substring(o,t.index)+m,o=t.index+t[0].length,n.push(t[0]);return i+=e.substr(o),{code:i,tokens:n}}function s(e,t){for(var n,r=new RegExp(m,"g"),i="",o=0;null!==(n=r.exec(e));)i+=e.substring(o,n.index)+t.shift(),o=n.index+n[0].length;return i+=e.substr(o)}var l=this,u=null,c=null,d=null,f=!1,p=null,h=null,g=o(r.startSymbol())+"((.|\\s)+?)"+o(r.endSymbol()),m="∫";l.init=function(e){u=e},l.setInterpolateScope=function(e){f=e,d&&l.highlight(d)},l.setLanguage=function(e){c=e,d&&l.highlight(d)},l.highlightCallback=function(e){h=e},l._highlight=function(i){if(u){var o,g,m;if(d=i,f&&(m=a(i),i=m.code),c?(g=l._cacheKey(c,!!f,i),(o=t.get(g))||(o=n.highlight(c,n.fixMarkup(i),!0),t.put(g,o))):(g=l._cacheKey(!!f,i),(o=t.get(g))||(o=n.highlightAuto(n.fixMarkup(i)),t.put(g,o))),i=o.value,f){(p||e.noop)(),m&&(i=s(i,m.tokens));var v=r(i);p=f.$watch(v,function(e,t){e!==t&&u.html(e)}),f.$apply(),u.html(v(f))}else u.html(i);u.addClass(o.language),null!==h&&e.isFunction(h)&&h()}},l.highlight=function(e,t,n){var r;return function(){var o=this,a=arguments,s=function(){r=null,n||e.apply(o,a)},l=n&&!r;i.clearTimeout(r),r=i.setTimeout(s,t),l&&e.apply(o,a)}}(l._highlight,17),l.clear=function(){u&&(d=null,u.text(""))},l.release=function(){u=null,f=null,(p||e.noop)(),p=null},l._cacheKey=function(){return Array.prototype.slice.call(arguments).join("!angular-highlightjs!")}}]);var o,a,s,l,u;return o=["$parse",function(t){return{restrict:"EA",controller:"HljsCtrl",compile:function(i,o,a){var s=i[0].innerHTML.replace(/^(\r\n|\r|\n)/,""),l=i[0].textContent.replace(/^(\r\n|\r|\n)/,"");return i.html('<pre><code class="hljs"></code></pre>'),function(i,o,a,u){var c,d=n(a);if(e.isDefined(d("escape"))?c=t(d("escape")):e.isDefined(d("no-escape"))&&(c=t("false")),u.init(o.find("code")),d("onhighlight")&&u.highlightCallback(function(){i.$eval(d("onhighlight"))}),(s||l)&&r(a)){var f;f=c&&!c(i)?l:s,u.highlight(f)}i.$on("$destroy",function(){u.release()})}}}}],s=function(t){return function(){return{require:"?hljs",restrict:"A",link:function(n,r,i,o){o&&i.$observe(t,function(t){e.isDefined(t)&&o.setLanguage(t)})}}}},a=function(e){return function(){return{require:"?hljs",restrict:"A",link:function(t,n,r,i){i&&t.$watch(r[e],function(e,n){(e||e!==n)&&i.setInterpolateScope(e?t:null)})}}}},l=function(e){return function(){return{require:"?hljs",restrict:"A",link:function(t,n,r,i){i&&t.$watch(r[e],function(e,t){e?i.highlight(e):i.clear()})}}}},u=function(t){return["$http","$templateCache","$q",function(n,r,i){return{require:"?hljs",restrict:"A",compile:function(o,a,s){var l=a[t];return function(t,o,a,s){var u=0;s&&t.$watch(l,function(t){var o=++u;if(t&&e.isString(t)){var a,l;(a=r.get(t))||(l=i.defer(),n.get(t,{cache:r,transformResponse:function(e,t){return e}}).then(function(e){o===u&&l.resolve(e)}).catch(function(){o===u&&s.clear(),l.resolve()}),a=l.promise),i.when(a).then(function(t){t&&(e.isArray(t)?t=t[1]:e.isObject(t)&&(t=t.data),t=t.replace(/^(\r\n|\r|\n)/,""),s.highlight(t))})}else s.clear()})}}}}]},function(t){t.directive("hljs",o),e.forEach(["interpolate","hljsInterpolate","compile","hljsCompile"],function(e){t.directive(e,a(e))}),e.forEach(["language","hljsLanguage"],function(e){t.directive(e,s(e))}),e.forEach(["source","hljsSource"],function(e){t.directive(e,l(e))}),e.forEach(["include","hljsInclude"],function(e){t.directive(e,u(e))})}(i),"hljs"}),function(e,t){"object"==typeof exports&&"object"==typeof module?module.exports=t(require("angular")):"function"==typeof define&&define.amd?define(["angular"],t):"object"==typeof exports?exports["ng-table"]=t(require("angular")):e["ng-table"]=t(e.angular)}(this,function(e){return function(e){function t(r){if(n[r])return n[r].exports;var i=n[r]={i:r,l:!1,exports:{}};return e[r].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var n={};return t.m=e,t.c=n,t.i=function(e){return e},t.d=function(e,n,r){t.o(e,n)||Object.defineProperty(e,n,{configurable:!1,enumerable:!0,get:r})},t.n=function(e){var n=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(n,"a",n),n},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=51)}([function(t,n){t.exports=e},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var i=n(0),o=n(3),a=n(37),s=n(7),l=n(10),u=n(9),c=n(8),d=i.module("ngTable-core",[]).provider("ngTableDefaultGetData",o.NgTableDefaultGetDataProvider).factory("ngTableDefaultGetGroups",a.ngTableDefaultGetGroups).value("ngTableDefaults",s.ngTableDefaults).service("ngTableEventsChannel",c.NgTableEventsChannel).service("ngTableSettings",l.NgTableSettings).run(u.NgTableParams.init);t.ngTableCoreModule=d,d.value("NgTableParams",u.NgTableParams);var f=n(7);t.IDefaults=f.IDefaults,r(n(8));var p=n(10);t.ISettings=p.ISettings,r(n(9)),r(n(3)),r(n(36)),r(n(39)),r(n(40)),r(n(41))},function(e,t,n){"use strict";var r=n(0),i=n(13),o=n(14),a=n(15),s=n(16);t.NgTableController=s.NgTableController;var l=n(17),u=n(18);t.NgTableFilterConfigProvider=u.NgTableFilterConfigProvider,t.NgTableFilterConfig=u.NgTableFilterConfig;var c=n(19),d=n(20),f=n(21),p=n(22),h=n(23),g=n(24),m=n(25),v=n(26);n(43),n(45),n(44),n(46),n(49),n(48);var y=r.module("ngTable-browser",[]).directive("ngTable",i.ngTable).service("ngTableColumn",o.NgTableColumn).directive("ngTableColumnsBinding",a.ngTableColumnsBinding).controller("ngTableController",s.NgTableController).directive("ngTableDynamic",l.ngTableDynamic).provider("ngTableFilterConfig",u.NgTableFilterConfigProvider).directive("ngTableFilterRow",c.ngTableFilterRow).controller("ngTableFilterRowController",d.NgTableFilterRowController).directive("ngTableGroupRow",f.ngTableGroupRow).controller("ngTableGroupRowController",p.NgTableGroupRowController).directive("ngTablePagination",h.ngTablePagination).directive("ngTableSelectFilterDs",g.ngTableSelectFilterDs).directive("ngTableSorterRow",m.ngTableSorterRow).controller("ngTableSorterRowController",v.NgTableSorterRowController);t.ngTableBrowserModule=y,function(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}(n(27))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(28)),r(n(29)),r(n(30)),r(n(31)),r(n(32))},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict";t.ngTableDefaults={params:{},settings:{}}},function(e,t,n){"use strict";var r=n(0),i=function(){function e(e){this.$rootScope=e;var t=this;t=this.addTableParamsEvent("afterCreated",t),t=this.addTableParamsEvent("afterReloadData",t),t=this.addTableParamsEvent("datasetChanged",t),t=this.addTableParamsEvent("pagesChanged",t),t=this.addTableParamsEvent("afterDataFiltered",t),t=this.addTableParamsEvent("afterDataSorted",t)}return e.prototype.addTableParamsEvent=function(e,t){var n=e.charAt(0).toUpperCase()+e.substring(1),i=(o={},o["on"+n]=this.createEventSubscriptionFn(e),o["publish"+n]=this.createPublishEventFn(e),o);return r.extend(t,i);var o},e.prototype.createPublishEventFn=function(e){var t=this;return function(){for(var n=[],r=0;r<arguments.length;r++)n[r-0]=arguments[r];(i=t.$rootScope).$broadcast.apply(i,["ngTable:"+e].concat(n));var i}},e.prototype.createEventSubscriptionFn=function(e){function t(e){return e?n(e)?e:function(t){return t===e}:function(e){return!0}}function n(e){return"function"==typeof e}function r(e){return e&&"function"==typeof e.$new}var i=this;return function(n,o,a){var s,l=i.$rootScope;return r(o)?(l=o,s=t(a)):s=t(o),l.$on("ngTable:"+e,function(e,t){for(var r=[],i=2;i<arguments.length;i++)r[i-2]=arguments[i];if(!t.isNullInstance){var o=[t].concat(r);s.apply(this,o)&&n.apply(this,o)}})}},e.$inject=["$rootScope"],e}();t.NgTableEventsChannel=i},function(e,t,n){"use strict";function r(e){return!isNaN(parseFloat(e))&&isFinite(e)}var i=n(0),o=n(11),a=function(){function e(t,n){var r=this;this.data=[],this.defaultSettings=e.ngTableSettings.createDefaults(),this.isCommittedDataset=!1,this.initialEvents=[],this._params={page:1,count:10,filter:{},sorting:{},group:{}},this._settings=this.defaultSettings,"boolean"==typeof t&&(this.isNullInstance=!0),this.reloadPages=function(){var t;return function(){var n=t,o=r.generatePagesArray(r.page(),r.total(),r.count());i.equals(n,o)||(t=o,e.ngTableEventsChannel.publishPagesChanged(r,o,n))}}(),i.extend(this._params,e.ngTableDefaults.params),this.settings(n),this.parameters(t,!0),e.ngTableEventsChannel.publishAfterCreated(this),i.forEach(this.initialEvents,function(e){e()}),this.initialEvents=null}return e.prototype.count=function(e){return void 0!==e?this.parameters({count:e,page:1}):this._params.count},e.prototype.filter=function(e){if(null!=e&&"object"==typeof e)return this.parameters({filter:e,page:1});if(!0===e){for(var t=Object.keys(this._params.filter),n={},r=0;r<t.length;r++){var i=this._params.filter[t[r]];null!=i&&""!==i&&(n[t[r]]=i)}return n}return this._params.filter},e.prototype.generatePagesArray=function(e,t,n,r){arguments.length||(e=this.page(),t=this.total(),n=this.count());var i,o,a,s;r=r&&r<6?6:r;var l=[];if((s=Math.ceil(t/n))>1){l.push({type:"prev",number:Math.max(1,e-1),active:e>1}),l.push({type:"first",number:1,active:e>1,current:1===e}),o=Math.round((this._settings.paginationMaxBlocks-this._settings.paginationMinBlocks)/2),a=Math.max(2,e-o),i=Math.min(s-1,e+2*o-(e-a));for(var u=a=Math.max(2,a-(2*o-(i-a)));u<=i;)u===a&&2!==u||u===i&&u!==s-1?l.push({type:"more",active:!1}):l.push({type:"page",number:u,active:e!==u,current:e===u}),u++;l.push({type:"last",number:s,active:e!==s,current:e===s}),l.push({type:"next",number:Math.min(s,e+1),active:e<s})}return l},e.prototype.group=function(e,t){if(void 0===e)return this._params.group;var n={page:1};return o.isGroupingFun(e)&&void 0!==t?(e.sortDirection=t,n.group=e):n.group="string"==typeof e&&void 0!==t?(r={},r[e]=t,r):e,this.parameters(n),this;var r},e.prototype.hasErrorState=function(){return!(!this.errParamsMemento||!i.equals(this.errParamsMemento,this.createComparableParams()))},e.prototype.hasFilter=function(){return Object.keys(this.filter(!0)).length>0},e.prototype.hasFilterChanges=function(){var e=this.prevParamsMemento&&this.prevParamsMemento.params.filter;return!i.equals(this._params.filter,e)||this.hasGlobalSearchFieldChanges()},e.prototype.hasGroup=function(e,t){return null==e?o.isGroupingFun(this._params.group)||Object.keys(this._params.group).length>0:o.isGroupingFun(e)?null==t?this._params.group===e:this._params.group===e&&e.sortDirection===t:null==t?-1!==Object.keys(this._params.group).indexOf(e):this._params.group[e]===t},e.prototype.isDataReloadRequired=function(){return!this.isCommittedDataset||!i.equals(this.createComparableParams(),this.prevParamsMemento)||this.hasGlobalSearchFieldChanges()},e.prototype.isSortBy=function(e,t){return void 0!==t?void 0!==this._params.sorting[e]&&this._params.sorting[e]==t:void 0!==this._params.sorting[e]},e.prototype.orderBy=function(){return o.convertSortToOrderBy(this._params.sorting)},e.prototype.page=function(e){return void 0!==e?this.parameters({page:e}):this._params.page},e.prototype.parameters=function(e,t){if(t=t||!1,void 0!==typeof e){for(var n in e){var o=e[n];if(t&&n.indexOf("[")>=0){for(var a=n.split(/\[(.*)\]/).reverse(),s="",l=0,u=a.length;l<u;l++){var c=a[l];if(""!==c){var d=o;(o={})[s=c]=r(d)?parseFloat(d):d}}"sorting"===s&&(this._params[s]={}),this._params[s]=i.extend(this._params[s]||{},o[s])}else this._params[n]="group"===n?this.parseGroup(e[n]):r(e[n])?parseFloat(e[n]):e[n]}return this.log("ngTable: set parameters",this._params),this}return this._params},e.prototype.reload=function(){var t=this,n=null;if(this._settings.$loading=!0,this.prevParamsMemento=i.copy(this.createComparableParams()),this.isCommittedDataset=!0,this.hasGroup())n=this.runInterceptorPipeline(e.$q.when(this._settings.getGroups(this)));else{var r=this._settings.getData;n=this.runInterceptorPipeline(e.$q.when(r(this)))}this.log("ngTable: reload data");var o=this.data;return n.then(function(n){return t._settings.$loading=!1,t.errParamsMemento=null,t.data=n,e.ngTableEventsChannel.publishAfterReloadData(t,n,o),t.reloadPages(),n}).catch(function(n){return t.errParamsMemento=t.prevParamsMemento,e.$q.reject(n)})},e.prototype.settings=function(t){var n=this;if(i.isDefined(t)){var r=e.ngTableSettings.merge(this._settings,t),o=this._settings.dataset;if(this._settings=r,t.hasOwnProperty("dataset")&&t.dataset!=o){this.isCommittedDataset&&this.page(1),this.isCommittedDataset=!1;var a=function(){e.ngTableEventsChannel.publishDatasetChanged(n,t.dataset,o)};this.initialEvents?this.initialEvents.push(a):a()}return this.log("ngTable: set settings",this._settings),this}return this._settings},e.prototype.sorting=function(e,t){return"string"==typeof e?(this.parameters({sorting:(n={},n[e]=t,n)}),this):void 0!==e?this.parameters({sorting:e}):this._params.sorting;var n},e.prototype.total=function(e){return void 0!==e?this.settings({total:e}):this._settings.total},e.prototype.url=function(e){function t(e,t){n(o)?o.push(t+"="+encodeURIComponent(e)):o[t]=encodeURIComponent(e)}function n(t){return e}function r(e,t){return"group"===t||void 0!==typeof e&&""!==e}var o=(e=e||!1)?[]:{};for(var a in this._params)if(this._params.hasOwnProperty(a)){var s=this._params[a],l=encodeURIComponent(a);if("object"==typeof s){for(var u in s)if(r(s[u],a)){var c=l+"["+encodeURIComponent(u)+"]";t(s[u],c)}}else!i.isFunction(s)&&r(s,a)&&t(s,l)}return o},e.prototype.createComparableParams=function(){var e=this._params.group;return{params:this._params,groupSortDirection:o.isGroupingFun(e)?e.sortDirection:void 0}},e.prototype.hasGlobalSearchFieldChanges=function(){var e=this._params.filter&&this._params.filter.$,t=this.prevParamsMemento&&this.prevParamsMemento.params.filter&&this.prevParamsMemento.params.filter.$;return!i.equals(e,t)},e.prototype.log=function(){for(var t=[],n=0;n<arguments.length;n++)t[n-0]=arguments[n];this._settings.debugMode&&e.$log.debug&&(r=e.$log).debug.apply(r,t);var r},e.prototype.parseGroup=function(e){var t=this._settings.groupOptions&&this._settings.groupOptions.defaultSort;if(e){if(o.isGroupingFun(e))return null==e.sortDirection&&(e.sortDirection=t),e;if("object"==typeof e){for(var n in e)null==e[n]&&(e[n]=t);return e}return r={},r[e]=t,r}return e;var r},e.prototype.runInterceptorPipeline=function(t){var n=this;return(this._settings.interceptors||[]).reduce(function(t,r){var i=r.response&&r.response.bind(r)||e.$q.when,o=r.responseError&&r.responseError.bind(r)||e.$q.reject;return t.then(function(e){return i(e,n)},function(e){return o(e,n)})},t)},e.init=function(t,n,r,i,o){e.$q=t,e.$log=n,e.ngTableDefaults=r,e.ngTableEventsChannel=i,e.ngTableSettings=o},e}();t.NgTableParams=a,a.init.$inject=["$q","$log","ngTableDefaults","ngTableEventsChannel","ngTableSettings"]},function(e,t,n){"use strict";var r=n(0),i=function(){function e(e,t,n){var r=this;this.ngTableDefaults=e,this.ngTableDefaultGetData=t,this.ngTableDefaultGetGroups=n,this.defaults={$loading:!1,dataset:null,total:0,defaultSort:"desc",counts:[10,25,50,100],filterOptions:{filterComparator:void 0,filterDelay:500,filterDelayThreshold:1e4,filterFilterName:void 0,filterFn:void 0,filterLayout:"stack"},getData:function(e){return r.ngTableDefaultGetData(e.settings().dataset,e)},getGroups:this.ngTableDefaultGetGroups,groupOptions:{defaultSort:"asc",isExpanded:!0},interceptors:[],paginationMaxBlocks:11,paginationMinBlocks:5,sortingIndicator:"span"}}return e.prototype.createDefaults=function(){return this.merge(this.defaults,this.ngTableDefaults.settings)},e.prototype.merge=function(e,t){(t=r.extend({},t)).filterOptions&&(t.filterOptions=r.extend({},e.filterOptions||{},t.filterOptions)),t.groupOptions&&(t.groupOptions=r.extend({},e.groupOptions||{},t.groupOptions)),r.isArray(t.dataset)&&(t.total=t.dataset.length);var n=r.extend({},e,t);return r.isArray(t.dataset)&&this.optimizeFilterDelay(n),r.extend({},e,t)},e.prototype.optimizeFilterDelay=function(e){e.filterOptions.filterDelay===this.defaults.filterOptions.filterDelay&&e.total<=e.filterOptions.filterDelayThreshold&&e.getData===this.defaults.getData&&(e.filterOptions.filterDelay=0)},e.$inject=["ngTableDefaults","ngTableDefaultGetData","ngTableDefaultGetGroups"],e}();t.NgTableSettings=i},function(e,t){"use strict";function n(e){var t=[];for(var n in e)t.push(("asc"===e[n]?"+":"-")+n);return t}function r(e){return"function"==typeof e}t.convertSortToOrderBy=n,t.isGroupingFun=r},,function(e,t,n){"use strict";function r(e,t){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var n,r,o=[],a=0,s=[];if(i.forEach(e.find("tr"),function(e){s.push(i.element(e))}),n=s.filter(function(e){return!e.hasClass("ng-table-group")})[0],r=s.filter(function(e){return e.hasClass("ng-table-group")})[0],n)return i.forEach(n.find("td"),function(e){var n=i.element(e);if(!n.attr("ignore-cell")||"true"!==n.attr("ignore-cell")){var s=function(e){return n.attr("x-data-"+e)||n.attr("data-"+e)||n.attr(e)},l=function(e){var n=s(e);if(n){var r,i=function(e){return void 0!==r?r:t(n)(e)};return i.assign=function(e,i){var o=t(n);o.assign?o.assign(e.$parent,i):r=i},i}},u=s("title-alt")||s("title");u&&n.attr("data-title-text","{{"+u+"}}"),o.push({id:a++,title:l("title"),titleAlt:l("title-alt"),headerTitle:l("header-title"),sortable:l("sortable"),class:l("header-class"),filter:l("filter"),groupable:l("groupable"),headerTemplateURL:l("header"),filterData:l("filter-data"),show:n.attr("ng-if")?l("ng-if"):void 0}),(r||n.attr("ng-if"))&&function(e,t){n.attr("x-data-"+e)?n.attr("x-data-"+e,t):n.attr("data"+e)?n.attr("data"+e,t):n.attr(e,t)}("ng-if","$columns["+(o.length-1)+"].show(this)")}}),function(e,t,n,r){e.$columns=o=r.buildColumns(o),r.setupBindingsToInternalScope(n.ngTable),r.loadFilterData(o),r.compileDirectiveTemplates()}}}}var i=n(0);r.$inject=["$q","$parse"],t.ngTable=r},function(e,t,n){"use strict";function r(e){return null!=e&&i.isFunction(e.$new)}var i=n(0),o=function(){function e(){}return e.prototype.buildColumn=function(e,t,n){var o=Object.create(e),a=this.createDefaults();for(var s in a)!function(s){void 0===o[s]&&(o[s]=a[s]),i.isFunction(o[s])||((d=function t(){return 1!==arguments.length||r(arguments[0])?e[s]:void t.assign(null,arguments[0])}).assign=function(t,n){e[s]=n},o[s]=d);var l=o[s];if(o[s]=function(){if(1!==arguments.length||r(arguments[0])){var a=arguments[0]||t,s=Object.create(a);return i.extend(s,{$column:o,$columns:n}),l.call(e,s)}l.assign(t,arguments[0])},l.assign)o[s].assign=l.assign;else{var u,c=o[s],d=function e(){return 1!==arguments.length||r(arguments[0])?void 0!=u?u:c.apply(o,arguments):void e.assign(null,arguments[0])};d.assign=function(e,t){u=t},o[s]=d}}(s);return o},e.prototype.createDefaults=function(){return{class:this.createGetterSetter(""),filter:this.createGetterSetter(!1),groupable:this.createGetterSetter(!1),filterData:i.noop,headerTemplateURL:this.createGetterSetter(!1),headerTitle:this.createGetterSetter(""),sortable:this.createGetterSetter(!1),show:this.createGetterSetter(!0),title:this.createGetterSetter(""),titleAlt:this.createGetterSetter("")}},e.prototype.createGetterSetter=function(e){var t=e,n=function e(){return 1!==arguments.length||r(arguments[0])?t:void e.assign(null,arguments[0])};return n.assign=function(e,n){t=n},n},e.$inject=[],e}();t.NgTableColumn=o},function(e,t){"use strict";function n(e){function t(t,n,r){var i=e(r.ngTableColumnsBinding).assign;i&&t.$watch("$columns",function(e){var n=(e||[]).slice(0);i(t,n)})}return{restrict:"A",link:t}}n.$inject=["$parse"],t.ngTableColumnsBinding=n},function(e,t,n){"use strict";var r=n(0),i=n(1),o=function(){function e(e,t,n,r,o,a,s,l,u){this.$scope=e,this.$parse=n,this.$compile=r,this.$attrs=o,this.$element=a,this.$document=s,this.ngTableColumn=l,this.ngTableEventsChannel=u,e.$filterRow={disabled:!1},e.$loading=!1,e.hasOwnProperty("params")||(e.params=new i.NgTableParams(!0)),this.delayFilter=function(){var e;return function(n,r){t.cancel(e),e=t(n,r)}}(),this.$scope.$watch("params",function(e,t){e!==t&&e&&e.reload()},!1),this.subscribeToTableEvents()}return Object.defineProperty(e.prototype,"hasVisibleFilterColumn",{get:function(){var e=this;return!!this.$scope.$columns&&this.some(this.$scope.$columns,function(t){return t.show(e.$scope)&&!!t.filter(e.$scope)})},enumerable:!0,configurable:!0}),e.prototype.onDataReloadStatusChange=function(e){if(e&&!this.$scope.params.hasErrorState()){var t=this.$scope.params,n=t.settings().filterOptions;if(t.hasFilterChanges()){var r=function(){t.page(1),t.reload()};n.filterDelay?this.delayFilter(r,n.filterDelay):r()}else t.reload()}},e.prototype.compileDirectiveTemplates=function(){if(!this.$element.hasClass("ng-table")){this.$scope.templates={header:this.$attrs.templateHeader?this.$attrs.templateHeader:"ng-table/header.html",pagination:this.$attrs.templatePagination?this.$attrs.templatePagination:"ng-table/pager.html"},this.$element.addClass("ng-table");var e=null,t=!1;r.forEach(this.$element.children(),function(e){"THEAD"===e.tagName&&(t=!0)}),t||(e=r.element('<thead ng-include="templates.header"></thead>',this.$document),this.$element.prepend(e));var n=r.element('<div ng-table-pagination="params" template-url="templates.pagination"></div>',this.$document);this.$element.after(n),e&&this.$compile(e)(this.$scope),this.$compile(n)(this.$scope)}},e.prototype.loadFilterData=function(e){function t(e){return e&&"object"==typeof e&&"function"==typeof e.then}var n=this;r.forEach(e,function(e){var i=e.filterData(n.$scope);return i?t(i)?(delete e.filterData,i.then(function(t){r.isArray(t)||r.isFunction(t)||r.isObject(t)||(t=[]),e.data=t})):e.data=i:void delete e.filterData})},e.prototype.buildColumns=function(e){var t=this,n=[];return(e||[]).forEach(function(e){n.push(t.ngTableColumn.buildColumn(e,t.$scope,n))}),n},e.prototype.parseNgTableDynamicExpr=function(e){if(!e||e.indexOf(" with ")>-1){var t=e.split(/\s+with\s+/);return{tableParams:t[0],columns:t[1]}}throw new Error("Parse error (expected example: ng-table-dynamic='tableParams with cols')")},e.prototype.setupBindingsToInternalScope=function(e){var t=this;this.$scope.$watch(e,function(e){void 0!==e&&(t.$scope.params=e)},!1),this.setupFilterRowBindingsToInternalScope(),this.setupGroupRowBindingsToInternalScope()},e.prototype.setupFilterRowBindingsToInternalScope=function(){var e=this;this.$attrs.showFilter?this.$scope.$parent.$watch(this.$attrs.showFilter,function(t){e.$scope.show_filter=t}):this.$scope.$watch(function(){return e.hasVisibleFilterColumn},function(t){e.$scope.show_filter=t}),this.$attrs.disableFilter&&this.$scope.$parent.$watch(this.$attrs.disableFilter,function(t){e.$scope.$filterRow.disabled=t})},e.prototype.setupGroupRowBindingsToInternalScope=function(){var e=this;if(this.$scope.$groupRow={show:!1},this.$attrs.showGroup){var t=this.$parse(this.$attrs.showGroup);this.$scope.$parent.$watch(t,function(t){e.$scope.$groupRow.show=t}),t.assign&&this.$scope.$watch("$groupRow.show",function(n){t.assign(e.$scope.$parent,n)})}else this.$scope.$watch("params.hasGroup()",function(t){e.$scope.$groupRow.show=t})},e.prototype.getVisibleColumns=function(){var e=this;return(this.$scope.$columns||[]).filter(function(t){return t.show(e.$scope)})},e.prototype.subscribeToTableEvents=function(){var e=this;this.$scope.$watch("params.isDataReloadRequired()",function(t){e.onDataReloadStatusChange(t)}),this.ngTableEventsChannel.onAfterReloadData(function(t,n){var r=e.getVisibleColumns();t.hasGroup()?(e.$scope.$groups=n||[],e.$scope.$groups.visibleColumnCount=r.length):(e.$scope.$data=n||[],e.$scope.$data.visibleColumnCount=r.length)},this.$scope,function(t){return e.$scope.params===t}),this.ngTableEventsChannel.onPagesChanged(function(t,n){e.$scope.pages=n},this.$scope,function(t){return e.$scope.params===t})},e.prototype.some=function(e,t){for(var n=!1,r=0;r<e.length;r++)if(t(e[r])){n=!0;break}return n},e.$inject=["$scope","$timeout","$parse","$compile","$attrs","$element","$document","ngTableColumn","ngTableEventsChannel"],e}();t.NgTableController=o},function(e,t,n){"use strict";function r(){return{restrict:"A",priority:1001,scope:!0,controller:"ngTableController",compile:function(e){var t;if(i.forEach(e.find("tr"),function(e){(e=i.element(e)).hasClass("ng-table-group")||t||(t=e)}),t)return i.forEach(t.find("td"),function(e){var t=i.element(e);(function(e){return t.attr("x-data-"+e)||t.attr("data-"+e)||t.attr(e)})("title")||t.attr("data-title-text","{{$columns[$index].titleAlt(this) || $columns[$index].title(this)}}"),t.attr("ng-if")||t.attr("ng-if","$columns[$index].show(this)")}),function(e,t,n,r){var i=r.parseNgTableDynamicExpr(n.ngTableDynamic);r.setupBindingsToInternalScope(i.tableParams),r.compileDirectiveTemplates(),e.$watchCollection(i.columns,function(t){e.$columns=r.buildColumns(t),r.loadFilterData(e.$columns)})}}}}var i=n(0);r.$inject=[],t.ngTableDynamic=r},function(e,t,n){"use strict";var r=n(0),i=function(){function e(e){var t=this;this.defaultConfig={defaultBaseUrl:"ng-table/filters/",defaultExt:".html",aliasUrls:{}},this.$get=function(){return e.instantiate(o,{config:r.copy(t.config)})},this.$get.$inject=[],this.resetConfigs()}return e.prototype.resetConfigs=function(){this.config=this.defaultConfig},e.prototype.setConfig=function(e){var t=r.extend({},this.config,e);t.aliasUrls=r.extend({},this.config.aliasUrls,e.aliasUrls),this.config=t},e.$inject=["$injector"],e}();t.NgTableFilterConfigProvider=i;var o=function(){function e(e){this.config=e}return e.prototype.getUrlForAlias=function(e,t){return this.config.aliasUrls[e]||this.config.defaultBaseUrl+e+this.config.defaultExt},e.prototype.getTemplateUrl=function(e,t){var n;return n="string"!=typeof e?e.id:e,-1!==n.indexOf("/")?n:this.getUrlForAlias(n,t)},e.$inject=["config"],e}();t.NgTableFilterConfig=o},function(e,t,n){"use strict";function r(){return{restrict:"E",replace:!0,templateUrl:i,scope:!0,controller:"ngTableFilterRowController",controllerAs:"$ctrl"}}var i=n(42);r.$inject=[],t.ngTableFilterRow=r},function(e,t){"use strict";var n=function(){function e(e,t){this.config=t,e.getFilterPlaceholderValue=this.getFilterPlaceholderValue.bind(this)}return e.prototype.getFilterCellCss=function(e,t){if("horizontal"!==t)return"s12";var n=Object.keys(e).length;return"s"+parseInt((12/n).toString(),10)},e.prototype.getFilterPlaceholderValue=function(e,t){return"string"==typeof e?"":e.placeholder},e.$inject=["$scope","ngTableFilterConfig"],e}();t.NgTableFilterRowController=n},function(e,t,n){"use strict";function r(){return{restrict:"E",replace:!0,templateUrl:i,scope:!0,controller:"ngTableGroupRowController",controllerAs:"$ctrl"}}var i=n(47);r.$inject=[],t.ngTableGroupRow=r},function(e,t){"use strict";var n=function(){function e(e){var t=this;this.$scope=e,this.groupFns=[],e.$watch("params.group()",function(e){t.setGroup(e)},!0)}return e.prototype.getGroupables=function(){var e=this,t=this.$scope.$columns.filter(function(t){return!!t.groupable(e.$scope)});return this.groupFns.concat(t)},e.prototype.getGroupTitle=function(e){return this.isGroupingFunc(e)?e.title:e.title(this.$scope)},e.prototype.getVisibleColumns=function(){var e=this;return this.$scope.$columns.filter(function(t){return t.show(e.$scope)})},e.prototype.groupBy=function(e){this.isSelectedGroup(e)?this.changeSortDirection():this.isGroupingFunc(e)?this.$scope.params.group(e):this.$scope.params.group(e.groupable(this.$scope))},e.prototype.isSelectedGroup=function(e){return this.isGroupingFunc(e)?e===this.$scope.$selGroup:e.groupable(this.$scope)===this.$scope.$selGroup},e.prototype.toggleDetail=function(){return this.$scope.params.settings().groupOptions.isExpanded=!this.$scope.params.settings().groupOptions.isExpanded,this.$scope.params.reload()},e.prototype.changeSortDirection=function(){var e;e=this.$scope.params.hasGroup(this.$scope.$selGroup,"asc")?"desc":this.$scope.params.hasGroup(this.$scope.$selGroup,"desc")?"":"asc",this.$scope.params.group(this.$scope.$selGroup,e)},e.prototype.findGroupColumn=function(e){var t=this;return this.$scope.$columns.filter(function(n){return n.groupable(t.$scope)===e})[0]},e.prototype.isGroupingFunc=function(e){return"function"==typeof e},e.prototype.setGroup=function(e){var t=this.findGroupColumn(this.$scope.$selGroup);if(t&&t.show.assign&&t.show.assign(this.$scope,!0),this.isGroupingFunc(e))this.groupFns=[e],this.$scope.$selGroup=e,this.$scope.$selGroupTitle=e.title;else{var n=Object.keys(e||{})[0],r=this.findGroupColumn(n);r&&(this.$scope.$selGroupTitle=r.title(this.$scope),this.$scope.$selGroup=n,r.show.assign&&r.show.assign(this.$scope,!1))}},e.$inject=["$scope"],e}();t.NgTableGroupRowController=n},function(e,t,n){"use strict";function r(e,t,n){return{restrict:"A",scope:{params:"=ngTablePagination",templateUrl:"="},replace:!1,link:function(r,o){n.onAfterReloadData(function(e){r.pages=e.generatePagesArray()},r,function(e){return e===r.params}),r.$watch("templateUrl",function(n){if(void 0!==n){var a=i.element('<div ng-include="templateUrl"></div>',t);o.append(a),e(a)(r)}})}}}var i=n(0);r.$inject=["$compile","$document","ngTableEventsChannel"],t.ngTablePagination=r},function(e,t){"use strict";function n(){return{restrict:"A",controller:r}}n.$inject=[],t.ngTableSelectFilterDs=n;var r=function(){function e(e,t,n,r){var i=this;this.$scope=e,this.$attrs=n,this.$q=r,this.$column=t(n.ngTableSelectFilterDs)(e),e.$watch(function(){return i.$column&&i.$column.data},function(){i.bindDataSource()})}return e.prototype.bindDataSource=function(){var e=this;this.getSelectListData(this.$column).then(function(t){t&&!e.hasEmptyOption(t)&&t.unshift({id:"",title:""}),t=t||[],e.$scope.$selectData=t})},e.prototype.hasEmptyOption=function(e){for(var t,n=0;n<e.length;n++){var r=e[n];if(r&&""===r.id){t=!0;break}}return t},e.prototype.getSelectListData=function(e){var t=e.data;return t instanceof Array?this.$q.when(t):this.$q.when(t&&t())},e.$inject=["$scope","$parse","$attrs","$q"],e}();t.NgTableSelectFilterDsController=r},function(e,t,n){"use strict";function r(){return{restrict:"E",replace:!0,templateUrl:i,scope:!0,controller:"ngTableSorterRowController",controllerAs:"$ctrl"}}var i=n(50);r.$inject=[],t.ngTableSorterRow=r},function(e,t){"use strict";var n=function(){function e(e){this.$scope=e}return e.prototype.sortBy=function(e,t){var n=e.sortable&&e.sortable();if(n&&"string"==typeof n){var r=this.$scope.params.settings().defaultSort,i="asc"===r?"desc":"asc",o=this.$scope.params.sorting()&&this.$scope.params.sorting()[n]&&this.$scope.params.sorting()[n]===r,a=t.ctrlKey||t.metaKey?this.$scope.params.sorting():{};a[n]=o?i:r,this.$scope.params.parameters({sorting:a})}},e.$inject=["$scope"],e}();t.NgTableSorterRowController=n},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t,n){"use strict";var r=n(0),i=function(){function e(){function e(e,n){function i(n){var i=n.settings().filterOptions;return r.isFunction(i.filterFn)?i.filterFn:e(i.filterFilterName||t.filterFilterName)}function o(n){return e(t.sortingFilterName)}function a(e,t){if(!t.hasFilter())return e;var n=t.filter(!0),r=Object.keys(n).reduce(function(e,t){return e=c(e,n[t],t)},{});return i(t).call(t,e,r,t.settings().filterOptions.filterComparator)}function s(e,t){var n=e.slice((t.page()-1)*t.count(),t.page()*t.count());return t.total(e.length),n}function l(e,t){var n=t.orderBy(),r=o(t);return n.length?r(e,n):e}function u(e,t){if(null==e)return[];var i=r.extend({},d,t.settings().dataOptions),o=i.applyFilter?a(e,t):e;n.publishAfterDataFiltered(t,o);var u=i.applySort?l(o,t):o;return n.publishAfterDataSorted(t,u),i.applyPaging?s(u,t):u}function c(e,t,n){var r=n.split("."),i=e,o=r[r.length-1],a=i;return r.slice(0,r.length-1).forEach(function(e){a.hasOwnProperty(e)||(a[e]={}),a=a[e]}),a[o]=t,i}var d={applyFilter:!0,applySort:!0,applyPaging:!0};return u.applyPaging=s,u.getFilterFn=i,u.getOrderByFn=o,u}this.filterFilterName="filter",this.sortingFilterName="orderBy";var t=this;this.$get=e,e.$inject=["$filter","ngTableEventsChannel"]}return e}();t.NgTableDefaultGetDataProvider=i},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(33)),r(n(34)),r(n(35))},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(4)),r(n(6)),r(n(5)),r(n(38))},function(e,t,n){"use strict";function r(e,t){function n(n){var r,s=n.group(),l=void 0;if(a.isGroupingFun(s))r=s,l=s.sortDirection;else{var u=Object.keys(s)[0];l=s[u],r=function(e){return i(e,u)}}var c=n.settings(),d=c.dataOptions;c.dataOptions={applyPaging:!1};var f=c.getData;return e.when(f(n)).then(function(e){var i={};o.forEach(e,function(e){var t=r(e);i[t]=i[t]||{data:[],$hideRows:!c.groupOptions.isExpanded,value:t},i[t].data.push(e)});var s=[];for(var u in i)s.push(i[u]);return l&&(s=t.getOrderByFn()(s,a.convertSortToOrderBy({value:l}))),t.applyPaging(s,n)}).finally(function(){c.dataOptions=d})}return n}function i(e,t){var n;if(n="string"==typeof t?t.split("."):t,void 0!==e){if(0===n.length)return e;if(null!==e)return i(e[n[0]],n.slice(1))}}var o=n(0),a=n(11);r.$inject=["$q","ngTableDefaultGetData"],t.ngTableDefaultGetGroups=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}r(n(4)),r(n(6)),r(n(5))},function(e,t){"use strict"},function(e,t){"use strict"},function(e,t,n){var r="ng-table/filterRow.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<tr ng-show=show_filter class=ng-table-filters> <th data-title-text="{{$column.titleAlt(this) || $column.title(this)}}" ng-repeat="$column in $columns" ng-if=$column.show(this) class="filter {{$column.class(this)}}" ng-class="params.settings().filterOptions.filterLayout === \'horizontal\' ? \'filter-horizontal\' : \'\'"> <div ng-repeat="(name, filter) in $column.filter(this)" ng-include=$ctrl.config.getTemplateUrl(filter) class=filter-cell ng-class="[$ctrl.getFilterCellCss($column.filter(this), params.settings().filterOptions.filterLayout), $last ? \'last\' : \'\']"> </div> </th> </tr> ')}]),e.exports=r},function(e,t,n){var r="ng-table/filters/number.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<input type=number name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ')}]),e.exports=r},function(e,t,n){var r="ng-table/filters/select-multiple.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<select ng-options="data.id as data.title for data in $column.data" ng-disabled=$filterRow.disabled multiple=multiple ng-multiple=true ng-model=params.filter()[name] class="filter filter-select-multiple form-control" name={{name}}> </select> ')}]),e.exports=r},function(e,t,n){var r="ng-table/filters/select.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<select ng-options="data.id as data.title for data in $selectData" ng-table-select-filter-ds=$column ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="filter filter-select form-control" name={{name}}> <option style=display:none value=""></option> </select> ')}]),e.exports=r},function(e,t,n){var r="ng-table/filters/text.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<input type=text name={{name}} ng-disabled=$filterRow.disabled ng-model=params.filter()[name] class="input-filter form-control" placeholder="{{getFilterPlaceholderValue(filter, name)}}"/> ')}]),e.exports=r},function(e,t,n){var r="ng-table/groupRow.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<tr ng-if=params.hasGroup() ng-show=$groupRow.show class=ng-table-group-header> <th colspan={{$ctrl.getVisibleColumns().length}} class=sortable ng-class="{\n                    \'sort-asc\': params.hasGroup($selGroup, \'asc\'),\n                    \'sort-desc\':params.hasGroup($selGroup, \'desc\')\n                  }"> <a href="" ng-click="isSelectorOpen = !isSelectorOpen" class=ng-table-group-selector> <strong class=sort-indicator>{{$selGroupTitle}}</strong> <button class="btn btn-default btn-xs ng-table-group-close" ng-click="$groupRow.show = false; $event.preventDefault(); $event.stopPropagation();"> <span class="glyphicon glyphicon-remove"></span> </button> <button class="btn btn-default btn-xs ng-table-group-toggle" ng-click="$ctrl.toggleDetail(); $event.preventDefault(); $event.stopPropagation();"> <span class=glyphicon ng-class="{\n                    \'glyphicon-resize-small\': params.settings().groupOptions.isExpanded,\n                    \'glyphicon-resize-full\': !params.settings().groupOptions.isExpanded\n                }"></span> </button> </a> <div class=list-group ng-if=isSelectorOpen> <a href="" class=list-group-item ng-repeat="group in $ctrl.getGroupables()" ng-click=$ctrl.groupBy(group)> <strong>{{ $ctrl.getGroupTitle(group)}}</strong> <strong ng-class="$ctrl.isSelectedGroup(group) && \'sort-indicator\'"></strong> </a> </div> </th> </tr> ')}]),e.exports=r},function(e,t,n){var r="ng-table/header.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,"<ng-table-group-row></ng-table-group-row> <ng-table-sorter-row></ng-table-sorter-row> <ng-table-filter-row></ng-table-filter-row> ")}]),e.exports=r},function(e,t,n){var r="ng-table/pager.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,'<div class="ng-cloak ng-table-pager" ng-if=params.data.length> <div ng-if=params.settings().counts.length class="ng-table-counts btn-group pull-right"> <button ng-repeat="count in params.settings().counts" type=button ng-class="{\'active\':params.count() == count}" ng-click=params.count(count) class="btn btn-default"> <span ng-bind=count></span> </button> </div> <ul ng-if=pages.length class="pagination ng-table-pagination"> <li class=page-item ng-class="{\'disabled\': !page.active && !page.current, \'active\': page.current}" ng-repeat="page in pages" ng-switch=page.type> <a class=page-link ng-switch-when=prev ng-click=params.page(page.number) href="">&laquo;</a> <a class=page-link ng-switch-when=first ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=page ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=more ng-click=params.page(page.number) href="">&#8230;</a> <a class=page-link ng-switch-when=last ng-click=params.page(page.number) href=""><span ng-bind=page.number></span></a> <a class=page-link ng-switch-when=next ng-click=params.page(page.number) href="">&raquo;</a> </li> </ul> </div> ')}]),e.exports=r},function(e,t,n){var r="ng-table/sorterRow.html";n(0).module("ng").run(["$templateCache",function(e){e.put(r,"<tr class=ng-table-sort-header> <th title={{$column.headerTitle(this)}} ng-repeat=\"$column in $columns\" ng-class=\"{\n                    'sortable': $column.sortable(this),\n                    'sort-asc': params.sorting()[$column.sortable(this)]=='asc',\n                    'sort-desc': params.sorting()[$column.sortable(this)]=='desc'\n                  }\" ng-click=\"$ctrl.sortBy($column, $event)\" ng-if=$column.show(this) ng-init=\"template = $column.headerTemplateURL(this)\" class=\"header {{$column.class(this)}}\"> <div ng-if=!template class=ng-table-header ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'div'}\"> <span ng-bind=$column.title(this) ng-class=\"{'sort-indicator': params.settings().sortingIndicator == 'span'}\"></span> </div> <div ng-if=template ng-include=template></div> </th> </tr> ")}]),e.exports=r},function(e,t,n){"use strict";function r(e){for(var n in e)t.hasOwnProperty(n)||(t[n]=e[n])}var i=n(0),o=n(1),a=n(2),s=i.module("ngTable",[o.ngTableCoreModule.name,a.ngTableBrowserModule.name]);t.ngTableModule=s,r(n(1)),r(n(2))}])}),function(e){function t(t,n,r,i){var o=t.text(),a=o.split(n),s="";a.length&&(e(a).each(function(e,t){s+='<span class="'+r+(e+1)+'" aria-hidden="true">'+t+"</span>"+i}),t.attr("aria-label",o).empty().append(s))}var n={init:function(){return this.each(function(){t(e(this),"","char","")})},words:function(){return this.each(function(){t(e(this)," ","word"," ")})},lines:function(){return this.each(function(){var n="eefec303079ad17405c889e092e105b0";t(e(this).children("br").replaceWith(n).end(),n,"line","")})}};e.fn.lettering=function(t){return t&&n[t]?n[t].apply(this,[].slice.call(arguments,1)):"letters"!==t&&t?(e.error("Method "+t+" does not exist on jQuery.lettering"),this):n.init.apply(this,[].slice.call(arguments,0))}}(jQuery),function(e){"use strict";function t(t){return/In/.test(t)||e.inArray(t,e.fn.textillate.defaults.inEffects)>=0}function n(t){return/Out/.test(t)||e.inArray(t,e.fn.textillate.defaults.outEffects)>=0}function r(e){return"true"!==e&&"false"!==e?e:"true"===e}function i(t){var n=t.attributes||[],i={};return n.length?(e.each(n,function(e,t){var n=t.nodeName.replace(/delayscale/,"delayScale");/^data-in-*/.test(n)?(i.in=i.in||{},i.in[n.replace(/data-in-/,"")]=r(t.nodeValue)):/^data-out-*/.test(n)?(i.out=i.out||{},i.out[n.replace(/data-out-/,"")]=r(t.nodeValue)):/^data-*/.test(n)&&(i[n.replace(/data-/,"")]=r(t.nodeValue))}),i):i}function o(e){for(var t,n,r=e.length;r;t=parseInt(Math.random()*r),n=e[--r],e[r]=e[t],e[t]=n);return e}function a(e,t,n){e.addClass("animated "+t).css("visibility","visible").show(),e.one("webkitAnimationEnd mozAnimationEnd MSAnimationEnd oanimationend animationend",function(){e.removeClass("animated "+t),n&&n()})}function s(r,i,s){var l=r.length;l?(i.shuffle&&(r=o(r)),i.reverse&&(r=r.toArray().reverse()),e.each(r,function(r,o){function u(){t(i.effect)?c.css("visibility","visible"):n(i.effect)&&c.css("visibility","hidden"),!(l-=1)&&s&&s()}var c=e(o),d=i.sync?i.delay:i.delay*r*i.delayScale;c.text()?setTimeout(function(){a(c,i.effect,u)},d):u()})):s&&s()}var l=function(r,o){var a=this,l=e(r);a.init=function(){a.$texts=l.find(o.selector),a.$texts.length||(a.$texts=e('<ul class="texts"><li>'+l.html()+"</li></ul>"),l.html(a.$texts)),a.$texts.hide(),a.$current=e("<span>").html(a.$texts.find(":first-child").html()).prependTo(l),t(o.in.effect)?a.$current.css("visibility","hidden"):n(o.out.effect)&&a.$current.css("visibility","visible"),a.setOptions(o),a.timeoutRun=null,setTimeout(function(){a.options.autoStart&&a.start()},a.options.initialDelay)},a.setOptions=function(e){a.options=e},a.triggerEvent=function(t){var n=e.Event(t+".tlt");return l.trigger(n,a),n},a.in=function(r,o){r=r||0;var l,u=a.$texts.find(":nth-child("+((r||0)+1)+")"),c=e.extend(!0,{},a.options,u.length?i(u[0]):{});u.addClass("current"),a.triggerEvent("inAnimationBegin"),a.$current.html(u.html()).lettering("words"),"char"==a.options.type&&a.$current.find('[class^="word"]').css({display:"inline-block","-webkit-transform":"translate3d(0,0,0)","-moz-transform":"translate3d(0,0,0)","-o-transform":"translate3d(0,0,0)",transform:"translate3d(0,0,0)"}).each(function(){e(this).lettering()}),l=a.$current.find('[class^="'+a.options.type+'"]').css("display","inline-block"),t(c.in.effect)?l.css("visibility","hidden"):n(c.in.effect)&&l.css("visibility","visible"),a.currentIndex=r,s(l,c.in,function(){a.triggerEvent("inAnimationEnd"),c.in.callback&&c.in.callback(),o&&o(a)})},a.out=function(t){var n=a.$texts.find(":nth-child("+((a.currentIndex||0)+1)+")"),r=a.$current.find('[class^="'+a.options.type+'"]'),o=e.extend(!0,{},a.options,n.length?i(n[0]):{});a.triggerEvent("outAnimationBegin"),s(r,o.out,function(){n.removeClass("current"),a.triggerEvent("outAnimationEnd"),o.out.callback&&o.out.callback(),t&&t(a)})},a.start=function(e){setTimeout(function(){a.triggerEvent("start"),function e(t){a.in(t,function(){var n=a.$texts.children().length;t+=1,!a.options.loop&&t>=n?(a.options.callback&&a.options.callback(),a.triggerEvent("end")):(t%=n,a.timeoutRun=setTimeout(function(){a.out(function(){e(t)})},a.options.minDisplayTime))})}(e||0)},a.options.initialDelay)},a.stop=function(){a.timeoutRun&&(clearInterval(a.timeoutRun),a.timeoutRun=null)},a.init()};e.fn.textillate=function(t,n){return this.each(function(){var r=e(this),o=r.data("textillate"),a=e.extend(!0,{},e.fn.textillate.defaults,i(this),"object"==typeof t&&t);o?"string"==typeof t?o[t].apply(o,[].concat(n)):o.setOptions.call(o,a):r.data("textillate",o=new l(this,a))})},e.fn.textillate.defaults={selector:".texts",loop:!1,minDisplayTime:2e3,initialDelay:0,in:{effect:"fadeInLeftBig",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},out:{effect:"hinge",delayScale:1.5,delay:50,sync:!1,reverse:!1,shuffle:!1,callback:function(){}},autoStart:!0,inEffects:[],outEffects:["hinge"],callback:function(){},type:"char"}}(jQuery),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Chart=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){},{}],2:[function(e,t,n){function r(e){if(e){var t=/^#([a-fA-F0-9]{3})$/i,n=/^#([a-fA-F0-9]{6})$/i,r=/^rgba?\(\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*,\s*([+-]?\d+)\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,i=/^rgba?\(\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*,\s*([+-]?[\d\.]+)\%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)$/i,o=/(\w+)/,a=[0,0,0],s=1,l=e.match(t);if(l){l=l[1];for(u=0;u<a.length;u++)a[u]=parseInt(l[u]+l[u],16)}else if(l=e.match(n)){l=l[1];for(u=0;u<a.length;u++)a[u]=parseInt(l.slice(2*u,2*u+2),16)}else if(l=e.match(r)){for(u=0;u<a.length;u++)a[u]=parseInt(l[u+1]);s=parseFloat(l[4])}else if(l=e.match(i)){for(u=0;u<a.length;u++)a[u]=Math.round(2.55*parseFloat(l[u+1]));s=parseFloat(l[4])}else if(l=e.match(o)){if("transparent"==l[1])return[0,0,0,0];if(!(a=x[l[1]]))return}for(var u=0;u<a.length;u++)a[u]=y(a[u],0,255);return s=s||0==s?y(s,0,1):1,a[3]=s,a}}function i(e){if(e){var t=/^hsla?\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]);return[y(parseInt(n[1]),0,360),y(parseFloat(n[2]),0,100),y(parseFloat(n[3]),0,100),y(isNaN(r)?1:r,0,1)]}}}function o(e){if(e){var t=/^hwb\(\s*([+-]?\d+)(?:deg)?\s*,\s*([+-]?[\d\.]+)%\s*,\s*([+-]?[\d\.]+)%\s*(?:,\s*([+-]?[\d\.]+)\s*)?\)/,n=e.match(t);if(n){var r=parseFloat(n[4]);return[y(parseInt(n[1]),0,360),y(parseFloat(n[2]),0,100),y(parseFloat(n[3]),0,100),y(isNaN(r)?1:r,0,1)]}}}function a(e){var t=r(e);return t&&t.slice(0,3)}function s(e){var t=i(e);return t&&t.slice(0,3)}function l(e){var t=r(e);return t?t[3]:(t=i(e))?t[3]:(t=o(e))?t[3]:void 0}function u(e){return"#"+b(e[0])+b(e[1])+b(e[2])}function c(e,t){return t<1||e[3]&&e[3]<1?d(e,t):"rgb("+e[0]+", "+e[1]+", "+e[2]+")"}function d(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"rgba("+e[0]+", "+e[1]+", "+e[2]+", "+t+")"}function f(e,t){return t<1||e[3]&&e[3]<1?p(e,t):"rgb("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%)"}function p(e,t){return"rgba("+Math.round(e[0]/255*100)+"%, "+Math.round(e[1]/255*100)+"%, "+Math.round(e[2]/255*100)+"%, "+(t||e[3]||1)+")"}function h(e,t){return t<1||e[3]&&e[3]<1?g(e,t):"hsl("+e[0]+", "+e[1]+"%, "+e[2]+"%)"}function g(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hsla("+e[0]+", "+e[1]+"%, "+e[2]+"%, "+t+")"}function m(e,t){return void 0===t&&(t=void 0!==e[3]?e[3]:1),"hwb("+e[0]+", "+e[1]+"%, "+e[2]+"%"+(void 0!==t&&1!==t?", "+t:"")+")"}function v(e){return w[e.slice(0,3)]}function y(e,t,n){return Math.min(Math.max(t,e),n)}function b(e){var t=e.toString(16).toUpperCase();return t.length<2?"0"+t:t}var x=e(6);t.exports={getRgba:r,getHsla:i,getRgb:a,getHsl:s,getHwb:o,getAlpha:l,hexString:u,rgbString:c,rgbaString:d,percentString:f,percentaString:p,hslString:h,hslaString:g,hwbString:m,keyword:v};var w={};for(var _ in x)w[x[_]]=_},{6:6}],3:[function(e,t,n){var r=e(5),i=e(2),o=function(e){if(e instanceof o)return e;if(!(this instanceof o))return new o(e);this.valid=!1,this.values={rgb:[0,0,0],hsl:[0,0,0],hsv:[0,0,0],hwb:[0,0,0],cmyk:[0,0,0,0],alpha:1};var t;"string"==typeof e?(t=i.getRgba(e))?this.setValues("rgb",t):(t=i.getHsla(e))?this.setValues("hsl",t):(t=i.getHwb(e))&&this.setValues("hwb",t):"object"==typeof e&&(void 0!==(t=e).r||void 0!==t.red?this.setValues("rgb",t):void 0!==t.l||void 0!==t.lightness?this.setValues("hsl",t):void 0!==t.v||void 0!==t.value?this.setValues("hsv",t):void 0!==t.w||void 0!==t.whiteness?this.setValues("hwb",t):void 0===t.c&&void 0===t.cyan||this.setValues("cmyk",t))};o.prototype={isValid:function(){return this.valid},rgb:function(){return this.setSpace("rgb",arguments)},hsl:function(){return this.setSpace("hsl",arguments)},hsv:function(){return this.setSpace("hsv",arguments)},hwb:function(){return this.setSpace("hwb",arguments)},cmyk:function(){return this.setSpace("cmyk",arguments)},rgbArray:function(){return this.values.rgb},hslArray:function(){return this.values.hsl},hsvArray:function(){return this.values.hsv},hwbArray:function(){var e=this.values;return 1!==e.alpha?e.hwb.concat([e.alpha]):e.hwb},cmykArray:function(){return this.values.cmyk},rgbaArray:function(){var e=this.values;return e.rgb.concat([e.alpha])},hslaArray:function(){var e=this.values;return e.hsl.concat([e.alpha])},alpha:function(e){return void 0===e?this.values.alpha:(this.setValues("alpha",e),this)},red:function(e){return this.setChannel("rgb",0,e)},green:function(e){return this.setChannel("rgb",1,e)},blue:function(e){return this.setChannel("rgb",2,e)},hue:function(e){return e&&(e=(e%=360)<0?360+e:e),this.setChannel("hsl",0,e)},saturation:function(e){return this.setChannel("hsl",1,e)},lightness:function(e){return this.setChannel("hsl",2,e)},saturationv:function(e){return this.setChannel("hsv",1,e)},whiteness:function(e){return this.setChannel("hwb",1,e)},blackness:function(e){return this.setChannel("hwb",2,e)},value:function(e){return this.setChannel("hsv",2,e)},cyan:function(e){return this.setChannel("cmyk",0,e)},magenta:function(e){return this.setChannel("cmyk",1,e)},yellow:function(e){return this.setChannel("cmyk",2,e)},black:function(e){return this.setChannel("cmyk",3,e)},hexString:function(){return i.hexString(this.values.rgb)},rgbString:function(){return i.rgbString(this.values.rgb,this.values.alpha)},rgbaString:function(){return i.rgbaString(this.values.rgb,this.values.alpha)},percentString:function(){return i.percentString(this.values.rgb,this.values.alpha)},hslString:function(){return i.hslString(this.values.hsl,this.values.alpha)},hslaString:function(){return i.hslaString(this.values.hsl,this.values.alpha)},hwbString:function(){return i.hwbString(this.values.hwb,this.values.alpha)},keyword:function(){return i.keyword(this.values.rgb,this.values.alpha)},rgbNumber:function(){var e=this.values.rgb;return e[0]<<16|e[1]<<8|e[2]},luminosity:function(){for(var e=this.values.rgb,t=[],n=0;n<e.length;n++){var r=e[n]/255;t[n]=r<=.03928?r/12.92:Math.pow((r+.055)/1.055,2.4)}return.2126*t[0]+.7152*t[1]+.0722*t[2]},contrast:function(e){var t=this.luminosity(),n=e.luminosity();return t>n?(t+.05)/(n+.05):(n+.05)/(t+.05)},level:function(e){var t=this.contrast(e);return t>=7.1?"AAA":t>=4.5?"AA":""},dark:function(){var e=this.values.rgb;return(299*e[0]+587*e[1]+114*e[2])/1e3<128},light:function(){return!this.dark()},negate:function(){for(var e=[],t=0;t<3;t++)e[t]=255-this.values.rgb[t];return this.setValues("rgb",e),this},lighten:function(e){var t=this.values.hsl;return t[2]+=t[2]*e,this.setValues("hsl",t),this},darken:function(e){var t=this.values.hsl;return t[2]-=t[2]*e,this.setValues("hsl",t),this},saturate:function(e){var t=this.values.hsl;return t[1]+=t[1]*e,this.setValues("hsl",t),this},desaturate:function(e){var t=this.values.hsl;return t[1]-=t[1]*e,this.setValues("hsl",t),this},whiten:function(e){var t=this.values.hwb;return t[1]+=t[1]*e,this.setValues("hwb",t),this},blacken:function(e){var t=this.values.hwb;return t[2]+=t[2]*e,this.setValues("hwb",t),this},greyscale:function(){var e=this.values.rgb,t=.3*e[0]+.59*e[1]+.11*e[2];return this.setValues("rgb",[t,t,t]),this},clearer:function(e){var t=this.values.alpha;return this.setValues("alpha",t-t*e),this},opaquer:function(e){var t=this.values.alpha;return this.setValues("alpha",t+t*e),this},rotate:function(e){var t=this.values.hsl,n=(t[0]+e)%360;return t[0]=n<0?360+n:n,this.setValues("hsl",t),this},mix:function(e,t){var n=this,r=e,i=void 0===t?.5:t,o=2*i-1,a=n.alpha()-r.alpha(),s=((o*a==-1?o:(o+a)/(1+o*a))+1)/2,l=1-s;return this.rgb(s*n.red()+l*r.red(),s*n.green()+l*r.green(),s*n.blue()+l*r.blue()).alpha(n.alpha()*i+r.alpha()*(1-i))},toJSON:function(){return this.rgb()},clone:function(){var e,t,n=new o,r=this.values,i=n.values;for(var a in r)r.hasOwnProperty(a)&&(e=r[a],"[object Array]"===(t={}.toString.call(e))?i[a]=e.slice(0):"[object Number]"===t?i[a]=e:console.error("unexpected color value:",e));return n}},o.prototype.spaces={rgb:["red","green","blue"],hsl:["hue","saturation","lightness"],hsv:["hue","saturation","value"],hwb:["hue","whiteness","blackness"],cmyk:["cyan","magenta","yellow","black"]},o.prototype.maxes={rgb:[255,255,255],hsl:[360,100,100],hsv:[360,100,100],hwb:[360,100,100],cmyk:[100,100,100,100]},o.prototype.getValues=function(e){for(var t=this.values,n={},r=0;r<e.length;r++)n[e.charAt(r)]=t[e][r];return 1!==t.alpha&&(n.a=t.alpha),n},o.prototype.setValues=function(e,t){var n,i=this.values,o=this.spaces,a=this.maxes,s=1;if(this.valid=!0,"alpha"===e)s=t;else if(t.length)i[e]=t.slice(0,e.length),s=t[e.length];else if(void 0!==t[e.charAt(0)]){for(n=0;n<e.length;n++)i[e][n]=t[e.charAt(n)];s=t.a}else if(void 0!==t[o[e][0]]){var l=o[e];for(n=0;n<e.length;n++)i[e][n]=t[l[n]];s=t.alpha}if(i.alpha=Math.max(0,Math.min(1,void 0===s?i.alpha:s)),"alpha"===e)return!1;var u;for(n=0;n<e.length;n++)u=Math.max(0,Math.min(a[e][n],i[e][n])),i[e][n]=Math.round(u);for(var c in o)c!==e&&(i[c]=r[e][c](i[e]));return!0},o.prototype.setSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n),this)},o.prototype.setChannel=function(e,t,n){var r=this.values[e];return void 0===n?r[t]:n===r[t]?this:(r[t]=n,this.setValues(e,r),this)},"undefined"!=typeof window&&(window.Color=o),t.exports=o},{2:2,5:5}],4:[function(e,t,n){function i(e){var t,n,r,i=e[0]/255,o=e[1]/255,a=e[2]/255,s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return l==s?t=0:i==l?t=(o-a)/u:o==l?t=2+(a-i)/u:a==l&&(t=4+(i-o)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=(s+l)/2,n=l==s?0:r<=.5?u/(l+s):u/(2-l-s),[t,100*n,100*r]}function o(e){var t,n,r,i=e[0],o=e[1],a=e[2],s=Math.min(i,o,a),l=Math.max(i,o,a),u=l-s;return n=0==l?0:u/l*1e3/10,l==s?t=0:i==l?t=(o-a)/u:o==l?t=2+(a-i)/u:a==l&&(t=4+(i-o)/u),(t=Math.min(60*t,360))<0&&(t+=360),r=l/255*1e3/10,[t,n,r]}function a(e){var t=e[0],n=e[1],r=e[2];return[i(e)[0],100*(1/255*Math.min(t,Math.min(n,r))),100*(r=1-1/255*Math.max(t,Math.max(n,r)))]}function s(e){var t,n,r,i,o=e[0]/255,a=e[1]/255,s=e[2]/255;return i=Math.min(1-o,1-a,1-s),t=(1-o-i)/(1-i)||0,n=(1-a-i)/(1-i)||0,r=(1-s-i)/(1-i)||0,[100*t,100*n,100*r,100*i]}function l(e){return J[JSON.stringify(e)]}function u(e){var t=e[0]/255,n=e[1]/255,r=e[2]/255;return[100*(.4124*(t=t>.04045?Math.pow((t+.055)/1.055,2.4):t/12.92)+.3576*(n=n>.04045?Math.pow((n+.055)/1.055,2.4):n/12.92)+.1805*(r=r>.04045?Math.pow((r+.055)/1.055,2.4):r/12.92)),100*(.2126*t+.7152*n+.0722*r),100*(.0193*t+.1192*n+.9505*r)]}function c(e){var t,n,r,i=u(e),o=i[0],a=i[1],s=i[2];return o/=95.047,a/=100,s/=108.883,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,s=s>.008856?Math.pow(s,1/3):7.787*s+16/116,t=116*a-16,n=500*(o-a),r=200*(a-s),[t,n,r]}function d(e){return I(c(e))}function f(e){var t,n,r,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100;if(0==s)return o=255*l,[o,o,o];t=2*l-(n=l<.5?l*(1+s):l+s-l*s),i=[0,0,0];for(var u=0;u<3;u++)(r=a+1/3*-(u-1))<0&&r++,r>1&&r--,o=6*r<1?t+6*(n-t)*r:2*r<1?n:3*r<2?t+(n-t)*(2/3-r)*6:t,i[u]=255*o;return i}function p(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;return 0===o?[0,0,0]:(o*=2,i*=o<=1?o:2-o,n=(o+i)/2,t=2*i/(o+i),[r,100*t,100*n])}function h(e){return a(f(e))}function m(e){return s(f(e))}function v(e){return l(f(e))}function y(e){var t=e[0]/60,n=e[1]/100,r=e[2]/100,i=Math.floor(t)%6,o=t-Math.floor(t),a=255*r*(1-n),s=255*r*(1-n*o),l=255*r*(1-n*(1-o)),r=255*r;switch(i){case 0:return[r,l,a];case 1:return[s,r,a];case 2:return[a,r,l];case 3:return[a,s,r];case 4:return[l,a,r];case 5:return[r,a,s]}}function x(e){var t,n,r=e[0],i=e[1]/100,o=e[2]/100;return n=(2-i)*o,t=i*o,t/=n<=1?n:2-n,t=t||0,n/=2,[r,100*t,100*n]}function w(e){return a(y(e))}function _(e){return s(y(e))}function C(e){return l(y(e))}function k(e){var t,n,i,o,a=e[0]/360,s=e[1]/100,l=e[2]/100,u=s+l;switch(u>1&&(s/=u,l/=u),t=Math.floor(6*a),n=1-l,i=6*a-t,0!=(1&t)&&(i=1-i),o=s+i*(n-s),t){default:case 6:case 0:r=n,g=o,b=s;break;case 1:r=o,g=n,b=s;break;case 2:r=s,g=n,b=o;break;case 3:r=s,g=o,b=n;break;case 4:r=o,g=s,b=n;break;case 5:r=n,g=s,b=o}return[255*r,255*g,255*b]}function S(e){return i(k(e))}function $(e){return o(k(e))}function M(e){return s(k(e))}function T(e){return l(k(e))}function D(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100,s=e[3]/100;return t=1-Math.min(1,i*(1-s)+s),n=1-Math.min(1,o*(1-s)+s),r=1-Math.min(1,a*(1-s)+s),[255*t,255*n,255*r]}function E(e){return i(D(e))}function L(e){return o(D(e))}function A(e){return a(D(e))}function R(e){return l(D(e))}function P(e){var t,n,r,i=e[0]/100,o=e[1]/100,a=e[2]/100;return t=3.2406*i+-1.5372*o+-.4986*a,n=-.9689*i+1.8758*o+.0415*a,r=.0557*i+-.204*o+1.057*a,t=t>.0031308?1.055*Math.pow(t,1/2.4)-.055:t*=12.92,n=n>.0031308?1.055*Math.pow(n,1/2.4)-.055:n*=12.92,r=r>.0031308?1.055*Math.pow(r,1/2.4)-.055:r*=12.92,t=Math.min(Math.max(0,t),1),n=Math.min(Math.max(0,n),1),r=Math.min(Math.max(0,r),1),[255*t,255*n,255*r]}function F(e){var t,n,r,i=e[0],o=e[1],a=e[2];return i/=95.047,o/=100,a/=108.883,i=i>.008856?Math.pow(i,1/3):7.787*i+16/116,o=o>.008856?Math.pow(o,1/3):7.787*o+16/116,a=a>.008856?Math.pow(a,1/3):7.787*a+16/116,t=116*o-16,n=500*(i-o),r=200*(o-a),[t,n,r]}function O(e){return I(F(e))}function N(e){var t,n,r,i,o=e[0],a=e[1],s=e[2];return o<=8?i=(n=100*o/903.3)/100*7.787+16/116:(n=100*Math.pow((o+16)/116,3),i=Math.pow(n/100,1/3)),t=t/95.047<=.008856?t=95.047*(a/500+i-16/116)/7.787:95.047*Math.pow(a/500+i,3),r=r/108.883<=.008859?r=108.883*(i-s/200-16/116)/7.787:108.883*Math.pow(i-s/200,3),[t,n,r]}function I(e){var t,n,r,i=e[0],o=e[1],a=e[2];return t=Math.atan2(a,o),(n=360*t/2/Math.PI)<0&&(n+=360),r=Math.sqrt(o*o+a*a),[i,r,n]}function j(e){return P(N(e))}function Y(e){var t,n,r,i=e[0],o=e[1];return r=e[2]/360*2*Math.PI,t=o*Math.cos(r),n=o*Math.sin(r),[i,t,n]}function z(e){return N(Y(e))}function H(e){return j(Y(e))}function V(e){return X[e]}function B(e){return i(V(e))}function W(e){return o(V(e))}function U(e){return a(V(e))}function G(e){return s(V(e))}function q(e){return c(V(e))}function K(e){return u(V(e))}t.exports={rgb2hsl:i,rgb2hsv:o,rgb2hwb:a,rgb2cmyk:s,rgb2keyword:l,rgb2xyz:u,rgb2lab:c,rgb2lch:d,hsl2rgb:f,hsl2hsv:p,hsl2hwb:h,hsl2cmyk:m,hsl2keyword:v,hsv2rgb:y,hsv2hsl:x,hsv2hwb:w,hsv2cmyk:_,hsv2keyword:C,hwb2rgb:k,hwb2hsl:S,hwb2hsv:$,hwb2cmyk:M,hwb2keyword:T,cmyk2rgb:D,cmyk2hsl:E,cmyk2hsv:L,cmyk2hwb:A,cmyk2keyword:R,keyword2rgb:V,keyword2hsl:B,keyword2hsv:W,keyword2hwb:U,keyword2cmyk:G,keyword2lab:q,keyword2xyz:K,xyz2rgb:P,xyz2lab:F,xyz2lch:O,lab2xyz:N,lab2rgb:j,lab2lch:I,lch2lab:Y,lch2xyz:z,lch2rgb:H};var X={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]},J={};for(var Z in X)J[JSON.stringify(X[Z])]=Z},{}],5:[function(e,t,n){var r=e(4),i=function(){return new u};for(var o in r){i[o+"Raw"]=function(e){return function(t){return"number"==typeof t&&(t=Array.prototype.slice.call(arguments)),r[e](t)}}(o);var a=/(\w+)2(\w+)/.exec(o),s=a[1],l=a[2];(i[s]=i[s]||{})[l]=i[o]=function(e){return function(t){"number"==typeof t&&(t=Array.prototype.slice.call(arguments));var n=r[e](t);if("string"==typeof n||void 0===n)return n;for(var i=0;i<n.length;i++)n[i]=Math.round(n[i]);return n}}(o)}var u=function(){this.convs={}};u.prototype.routeSpace=function(e,t){var n=t[0];return void 0===n?this.getValues(e):("number"==typeof n&&(n=Array.prototype.slice.call(t)),this.setValues(e,n))},u.prototype.setValues=function(e,t){return this.space=e,this.convs={},this.convs[e]=t,this},u.prototype.getValues=function(e){var t=this.convs[e];if(!t){var n=this.space,r=this.convs[n];t=i[n][e](r),this.convs[e]=t}return t},["rgb","hsl","hsv","cmyk","keyword"].forEach(function(e){u.prototype[e]=function(t){return this.routeSpace(e,arguments)}}),t.exports=i},{4:4}],6:[function(e,t,n){"use strict";t.exports={aliceblue:[240,248,255],antiquewhite:[250,235,215],aqua:[0,255,255],aquamarine:[127,255,212],azure:[240,255,255],beige:[245,245,220],bisque:[255,228,196],black:[0,0,0],blanchedalmond:[255,235,205],blue:[0,0,255],blueviolet:[138,43,226],brown:[165,42,42],burlywood:[222,184,135],cadetblue:[95,158,160],chartreuse:[127,255,0],chocolate:[210,105,30],coral:[255,127,80],cornflowerblue:[100,149,237],cornsilk:[255,248,220],crimson:[220,20,60],cyan:[0,255,255],darkblue:[0,0,139],darkcyan:[0,139,139],darkgoldenrod:[184,134,11],darkgray:[169,169,169],darkgreen:[0,100,0],darkgrey:[169,169,169],darkkhaki:[189,183,107],darkmagenta:[139,0,139],darkolivegreen:[85,107,47],darkorange:[255,140,0],darkorchid:[153,50,204],darkred:[139,0,0],darksalmon:[233,150,122],darkseagreen:[143,188,143],darkslateblue:[72,61,139],darkslategray:[47,79,79],darkslategrey:[47,79,79],darkturquoise:[0,206,209],darkviolet:[148,0,211],deeppink:[255,20,147],deepskyblue:[0,191,255],dimgray:[105,105,105],dimgrey:[105,105,105],dodgerblue:[30,144,255],firebrick:[178,34,34],floralwhite:[255,250,240],forestgreen:[34,139,34],fuchsia:[255,0,255],gainsboro:[220,220,220],ghostwhite:[248,248,255],gold:[255,215,0],goldenrod:[218,165,32],gray:[128,128,128],green:[0,128,0],greenyellow:[173,255,47],grey:[128,128,128],honeydew:[240,255,240],hotpink:[255,105,180],indianred:[205,92,92],indigo:[75,0,130],ivory:[255,255,240],khaki:[240,230,140],lavender:[230,230,250],lavenderblush:[255,240,245],lawngreen:[124,252,0],lemonchiffon:[255,250,205],lightblue:[173,216,230],lightcoral:[240,128,128],lightcyan:[224,255,255],lightgoldenrodyellow:[250,250,210],lightgray:[211,211,211],lightgreen:[144,238,144],lightgrey:[211,211,211],lightpink:[255,182,193],lightsalmon:[255,160,122],lightseagreen:[32,178,170],lightskyblue:[135,206,250],lightslategray:[119,136,153],lightslategrey:[119,136,153],lightsteelblue:[176,196,222],lightyellow:[255,255,224],lime:[0,255,0],limegreen:[50,205,50],linen:[250,240,230],magenta:[255,0,255],maroon:[128,0,0],mediumaquamarine:[102,205,170],mediumblue:[0,0,205],mediumorchid:[186,85,211],mediumpurple:[147,112,219],mediumseagreen:[60,179,113],mediumslateblue:[123,104,238],mediumspringgreen:[0,250,154],mediumturquoise:[72,209,204],mediumvioletred:[199,21,133],midnightblue:[25,25,112],mintcream:[245,255,250],mistyrose:[255,228,225],moccasin:[255,228,181],navajowhite:[255,222,173],navy:[0,0,128],oldlace:[253,245,230],olive:[128,128,0],olivedrab:[107,142,35],orange:[255,165,0],orangered:[255,69,0],orchid:[218,112,214],palegoldenrod:[238,232,170],palegreen:[152,251,152],paleturquoise:[175,238,238],palevioletred:[219,112,147],papayawhip:[255,239,213],peachpuff:[255,218,185],peru:[205,133,63],pink:[255,192,203],plum:[221,160,221],powderblue:[176,224,230],purple:[128,0,128],rebeccapurple:[102,51,153],red:[255,0,0],rosybrown:[188,143,143],royalblue:[65,105,225],saddlebrown:[139,69,19],salmon:[250,128,114],sandybrown:[244,164,96],seagreen:[46,139,87],seashell:[255,245,238],sienna:[160,82,45],silver:[192,192,192],skyblue:[135,206,235],slateblue:[106,90,205],slategray:[112,128,144],slategrey:[112,128,144],snow:[255,250,250],springgreen:[0,255,127],steelblue:[70,130,180],tan:[210,180,140],teal:[0,128,128],thistle:[216,191,216],tomato:[255,99,71],turquoise:[64,224,208],violet:[238,130,238],wheat:[245,222,179],white:[255,255,255],whitesmoke:[245,245,245],yellow:[255,255,0],yellowgreen:[154,205,50]}},{}],7:[function(e,t,n){var r=e(29)();r.helpers=e(45),e(27)(r),r.defaults=e(25),r.Element=e(26),r.elements=e(40),r.Interaction=e(28),r.platform=e(48),e(31)(r),e(22)(r),e(23)(r),e(24)(r),e(30)(r),e(33)(r),e(32)(r),e(35)(r),e(54)(r),e(52)(r),e(53)(r),e(55)(r),e(56)(r),e(57)(r),e(15)(r),e(16)(r),e(17)(r),e(18)(r),e(19)(r),e(20)(r),e(21)(r),e(8)(r),e(9)(r),e(10)(r),e(11)(r),e(12)(r),e(13)(r),e(14)(r);var i=[];i.push(e(49)(r),e(50)(r),e(51)(r)),r.plugins.register(i),r.platform.initialize(),t.exports=r,"undefined"!=typeof window&&(window.Chart=r),r.canvasHelpers=r.helpers.canvas},{10:10,11:11,12:12,13:13,14:14,15:15,16:16,17:17,18:18,19:19,20:20,21:21,22:22,23:23,24:24,25:25,26:26,27:27,28:28,29:29,30:30,31:31,32:32,33:33,35:35,40:40,45:45,48:48,49:49,50:50,51:51,52:52,53:53,54:54,55:55,56:56,57:57,8:8,9:9}],8:[function(e,t,n){"use strict";t.exports=function(e){e.Bar=function(t,n){return n.type="bar",new e(t,n)}}},{}],9:[function(e,t,n){"use strict";t.exports=function(e){e.Bubble=function(t,n){return n.type="bubble",new e(t,n)}}},{}],10:[function(e,t,n){"use strict";t.exports=function(e){e.Doughnut=function(t,n){return n.type="doughnut",new e(t,n)}}},{}],11:[function(e,t,n){"use strict";t.exports=function(e){e.Line=function(t,n){return n.type="line",new e(t,n)}}},{}],12:[function(e,t,n){"use strict";t.exports=function(e){e.PolarArea=function(t,n){return n.type="polarArea",new e(t,n)}}},{}],13:[function(e,t,n){"use strict";t.exports=function(e){e.Radar=function(t,n){return n.type="radar",new e(t,n)}}},{}],14:[function(e,t,n){"use strict";t.exports=function(e){e.Scatter=function(t,n){return n.type="scatter",new e(t,n)}}},{}],15:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("bar",{hover:{mode:"label"},scales:{xAxes:[{type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}],yAxes:[{type:"linear"}]}}),r._set("horizontalBar",{hover:{mode:"index",axis:"y"},scales:{xAxes:[{type:"linear",position:"bottom"}],yAxes:[{position:"left",type:"category",categoryPercentage:.8,barPercentage:.9,offset:!0,gridLines:{offsetGridLines:!0}}]},elements:{rectangle:{borderSkipped:"left"}},tooltips:{callbacks:{title:function(e,t){var n="";return e.length>0&&(e[0].yLabel?n=e[0].yLabel:t.labels.length>0&&e[0].index<t.labels.length&&(n=t.labels[e[0].index])),n},label:function(e,t){return(t.datasets[e.datasetIndex].label||"")+": "+e.xLabel}},mode:"index",axis:"y"}}),t.exports=function(e){e.controllers.bar=e.DatasetController.extend({dataElementType:i.Rectangle,initialize:function(){var t,n=this;e.DatasetController.prototype.initialize.apply(n,arguments),(t=n.getMeta()).stack=n.getDataset().stack,t.bar=!0},update:function(e){var t,n,r=this,i=r.getMeta().data;for(r._ruler=r.getRuler(),t=0,n=i.length;t<n;++t)r.updateElement(i[t],t,e)},updateElement:function(e,t,n){var r=this,i=r.chart,a=r.getMeta(),s=r.getDataset(),l=e.custom||{},u=i.options.elements.rectangle;e._xScale=r.getScaleForId(a.xAxisID),e._yScale=r.getScaleForId(a.yAxisID),e._datasetIndex=r.index,e._index=t,e._model={datasetLabel:s.label,label:i.data.labels[t],borderSkipped:l.borderSkipped?l.borderSkipped:u.borderSkipped,backgroundColor:l.backgroundColor?l.backgroundColor:o.valueAtIndexOrDefault(s.backgroundColor,t,u.backgroundColor),borderColor:l.borderColor?l.borderColor:o.valueAtIndexOrDefault(s.borderColor,t,u.borderColor),borderWidth:l.borderWidth?l.borderWidth:o.valueAtIndexOrDefault(s.borderWidth,t,u.borderWidth)},r.updateElementGeometry(e,t,n),e.pivot()},updateElementGeometry:function(e,t,n){var r=this,i=e._model,o=r.getValueScale(),a=o.getBasePixel(),s=o.isHorizontal(),l=r._ruler||r.getRuler(),u=r.calculateBarValuePixels(r.index,t),c=r.calculateBarIndexPixels(r.index,t,l);i.horizontal=s,i.base=n?a:u.base,i.x=s?n?a:u.head:c.center,i.y=s?c.center:n?a:u.head,i.height=s?c.size:void 0,i.width=s?void 0:c.size},getValueScaleId:function(){return this.getMeta().yAxisID},getIndexScaleId:function(){return this.getMeta().xAxisID},getValueScale:function(){return this.getScaleForId(this.getValueScaleId())},getIndexScale:function(){return this.getScaleForId(this.getIndexScaleId())},getStackCount:function(e){var t,n,r=this,i=r.chart,o=r.getIndexScale().options.stacked,a=void 0===e?i.data.datasets.length:e+1,s=[];for(t=0;t<a;++t)(n=i.getDatasetMeta(t)).bar&&i.isDatasetVisible(t)&&(!1===o||!0===o&&-1===s.indexOf(n.stack)||void 0===o&&(void 0===n.stack||-1===s.indexOf(n.stack)))&&s.push(n.stack);return s.length},getStackIndex:function(e){return this.getStackCount(e)-1},getRuler:function(){var e,t,n=this,r=n.getIndexScale(),i=n.getStackCount(),o=n.index,a=[],s=r.isHorizontal(),l=s?r.left:r.top,u=l+(s?r.width:r.height);for(e=0,t=n.getMeta().data.length;e<t;++e)a.push(r.getPixelForValue(null,e,o));return{pixels:a,start:l,end:u,stackCount:i,scale:r}},calculateBarValuePixels:function(e,t){var n,r,i,o,a,s,l=this,u=l.chart,c=l.getMeta(),d=l.getValueScale(),f=u.data.datasets,p=d.getRightValue(f[e].data[t]),h=d.options.stacked,g=c.stack,m=0;if(h||void 0===h&&void 0!==g)for(n=0;n<e;++n)(r=u.getDatasetMeta(n)).bar&&r.stack===g&&r.controller.getValueScaleId()===d.id&&u.isDatasetVisible(n)&&(i=d.getRightValue(f[n].data[t]),(p<0&&i<0||p>=0&&i>0)&&(m+=i));return o=d.getPixelForValue(m),a=d.getPixelForValue(m+p),s=(a-o)/2,{size:s,base:o,head:a,center:a+s/2}},calculateBarIndexPixels:function(e,t,n){var r,i,a,s,l,u,c=this,d=n.scale.options,f=c.getStackIndex(e),p=n.pixels,h=p[t],g=p.length,m=n.start,v=n.end;return 1===g?(r=h>m?h-m:v-h,i=h<v?v-h:h-m):(t>0&&(r=(h-p[t-1])/2,t===g-1&&(i=r)),t<g-1&&(i=(p[t+1]-h)/2,0===t&&(r=i))),a=r*d.categoryPercentage,s=i*d.categoryPercentage,l=(a+s)/n.stackCount,u=l*d.barPercentage,u=Math.min(o.valueOrDefault(d.barThickness,u),o.valueOrDefault(d.maxBarThickness,1/0)),h-=a,h+=l*f,h+=(l-u)/2,{size:u,base:h,head:h+u,center:h+u/2}},draw:function(){var e=this,t=e.chart,n=e.getValueScale(),r=e.getMeta().data,i=e.getDataset(),a=r.length,s=0;for(o.canvas.clipArea(t.ctx,t.chartArea);s<a;++s)isNaN(n.getRightValue(i.data[s]))||r[s].draw();o.canvas.unclipArea(t.ctx)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model;i.backgroundColor=r.hoverBackgroundColor?r.hoverBackgroundColor:o.valueAtIndexOrDefault(t.hoverBackgroundColor,n,o.getHoverColor(i.backgroundColor)),i.borderColor=r.hoverBorderColor?r.hoverBorderColor:o.valueAtIndexOrDefault(t.hoverBorderColor,n,o.getHoverColor(i.borderColor)),i.borderWidth=r.hoverBorderWidth?r.hoverBorderWidth:o.valueAtIndexOrDefault(t.hoverBorderWidth,n,i.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model,a=this.chart.options.elements.rectangle;i.backgroundColor=r.backgroundColor?r.backgroundColor:o.valueAtIndexOrDefault(t.backgroundColor,n,a.backgroundColor),i.borderColor=r.borderColor?r.borderColor:o.valueAtIndexOrDefault(t.borderColor,n,a.borderColor),i.borderWidth=r.borderWidth?r.borderWidth:o.valueAtIndexOrDefault(t.borderWidth,n,a.borderWidth)}}),e.controllers.horizontalBar=e.controllers.bar.extend({getValueScaleId:function(){return this.getMeta().xAxisID},getIndexScaleId:function(){return this.getMeta().yAxisID}})}},{25:25,40:40,45:45}],16:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("bubble",{hover:{mode:"single"},scales:{xAxes:[{type:"linear",position:"bottom",id:"x-axis-0"}],yAxes:[{type:"linear",position:"left",id:"y-axis-0"}]},tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.datasets[e.datasetIndex].label||"",r=t.datasets[e.datasetIndex].data[e.index];return n+": ("+e.xLabel+", "+e.yLabel+", "+r.r+")"}}}}),t.exports=function(e){e.controllers.bubble=e.DatasetController.extend({dataElementType:i.Point,update:function(e){var t=this,n=t.getMeta().data;o.each(n,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,i=r.getMeta(),o=e.custom||{},a=r.getScaleForId(i.xAxisID),s=r.getScaleForId(i.yAxisID),l=r._resolveElementOptions(e,t),u=r.getDataset().data[t],c=r.index,d=n?a.getPixelForDecimal(.5):a.getPixelForValue("object"==typeof u?u:NaN,t,c),f=n?s.getBasePixel():s.getPixelForValue(u,t,c);e._xScale=a,e._yScale=s,e._options=l,e._datasetIndex=c,e._index=t,e._model={backgroundColor:l.backgroundColor,borderColor:l.borderColor,borderWidth:l.borderWidth,hitRadius:l.hitRadius,pointStyle:l.pointStyle,radius:n?0:l.radius,skip:o.skip||isNaN(d)||isNaN(f),x:d,y:f},e.pivot()},setHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=o.valueOrDefault(n.hoverBackgroundColor,o.getHoverColor(n.backgroundColor)),t.borderColor=o.valueOrDefault(n.hoverBorderColor,o.getHoverColor(n.borderColor)),t.borderWidth=o.valueOrDefault(n.hoverBorderWidth,n.borderWidth),t.radius=n.radius+n.hoverRadius},removeHoverStyle:function(e){var t=e._model,n=e._options;t.backgroundColor=n.backgroundColor,t.borderColor=n.borderColor,t.borderWidth=n.borderWidth,t.radius=n.radius},_resolveElementOptions:function(e,t){var n,r,i,a=this,s=a.chart,l=s.data.datasets[a.index],u=e.custom||{},c=s.options.elements.point,d=o.options.resolve,f=l.data[t],p={},h={chart:s,dataIndex:t,dataset:l,datasetIndex:a.index},g=["backgroundColor","borderColor","borderWidth","hoverBackgroundColor","hoverBorderColor","hoverBorderWidth","hoverRadius","hitRadius","pointStyle"];for(n=0,r=g.length;n<r;++n)p[i=g[n]]=d([u[i],l[i],c[i]],h,t);return p.radius=d([u.radius,f?f.r:void 0,l.radius,c.radius],h,t),p}})}},{25:25,40:40,45:45}],17:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("doughnut",{animation:{animateRotate:!0,animateScale:!1},hover:{mode:"single"},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,i=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),i[o]&&t.push(i[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var i=e.getDatasetMeta(0),a=t.datasets[0],s=i.data[r],l=s&&s.custom||{},u=o.valueAtIndexOrDefault,c=e.options.elements.arc;return{text:n,fillStyle:l.backgroundColor?l.backgroundColor:u(a.backgroundColor,r,c.backgroundColor),strokeStyle:l.borderColor?l.borderColor:u(a.borderColor,r,c.borderColor),lineWidth:l.borderWidth?l.borderWidth:u(a.borderWidth,r,c.borderWidth),hidden:isNaN(a.data[r])||i.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o]&&(i.data[o].hidden=!i.data[o].hidden);a.update()}},cutoutPercentage:50,rotation:-.5*Math.PI,circumference:2*Math.PI,tooltips:{callbacks:{title:function(){return""},label:function(e,t){var n=t.labels[e.index],r=": "+t.datasets[e.datasetIndex].data[e.index];return o.isArray(n)?(n=n.slice())[0]+=r:n+=r,n}}}}),r._set("pie",o.clone(r.doughnut)),r._set("pie",{cutoutPercentage:0}),t.exports=function(e){e.controllers.doughnut=e.controllers.pie=e.DatasetController.extend({dataElementType:i.Arc,linkScales:o.noop,getRingIndex:function(e){for(var t=0,n=0;n<e;++n)this.chart.isDatasetVisible(n)&&++t;return t},update:function(e){var t=this,n=t.chart,r=n.chartArea,i=n.options,a=i.elements.arc,s=r.right-r.left-a.borderWidth,l=r.bottom-r.top-a.borderWidth,u=Math.min(s,l),c={x:0,y:0},d=t.getMeta(),f=i.cutoutPercentage,p=i.circumference;if(p<2*Math.PI){var h=i.rotation%(2*Math.PI),g=(h+=2*Math.PI*(h>=Math.PI?-1:h<-Math.PI?1:0))+p,m={x:Math.cos(h),y:Math.sin(h)},v={x:Math.cos(g),y:Math.sin(g)},y=h<=0&&g>=0||h<=2*Math.PI&&2*Math.PI<=g,b=h<=.5*Math.PI&&.5*Math.PI<=g||h<=2.5*Math.PI&&2.5*Math.PI<=g,x=h<=-Math.PI&&-Math.PI<=g||h<=Math.PI&&Math.PI<=g,w=h<=.5*-Math.PI&&.5*-Math.PI<=g||h<=1.5*Math.PI&&1.5*Math.PI<=g,_=f/100,C={x:x?-1:Math.min(m.x*(m.x<0?1:_),v.x*(v.x<0?1:_)),y:w?-1:Math.min(m.y*(m.y<0?1:_),v.y*(v.y<0?1:_))},k={x:y?1:Math.max(m.x*(m.x>0?1:_),v.x*(v.x>0?1:_)),y:b?1:Math.max(m.y*(m.y>0?1:_),v.y*(v.y>0?1:_))},S={width:.5*(k.x-C.x),height:.5*(k.y-C.y)};u=Math.min(s/S.width,l/S.height),c={x:-.5*(k.x+C.x),y:-.5*(k.y+C.y)}}n.borderWidth=t.getMaxBorderWidth(d.data),n.outerRadius=Math.max((u-n.borderWidth)/2,0),n.innerRadius=Math.max(f?n.outerRadius/100*f:0,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),n.offsetX=c.x*n.outerRadius,n.offsetY=c.y*n.outerRadius,d.total=t.calculateTotal(),t.outerRadius=n.outerRadius-n.radiusLength*t.getRingIndex(t.index),t.innerRadius=Math.max(t.outerRadius-n.radiusLength,0),o.each(d.data,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){var r=this,i=r.chart,a=i.chartArea,s=i.options,l=s.animation,u=(a.left+a.right)/2,c=(a.top+a.bottom)/2,d=s.rotation,f=s.rotation,p=r.getDataset(),h=n&&l.animateRotate?0:e.hidden?0:r.calculateCircumference(p.data[t])*(s.circumference/(2*Math.PI)),g=n&&l.animateScale?0:r.innerRadius,m=n&&l.animateScale?0:r.outerRadius,v=o.valueAtIndexOrDefault;o.extend(e,{_datasetIndex:r.index,_index:t,_model:{x:u+i.offsetX,y:c+i.offsetY,startAngle:d,endAngle:f,circumference:h,outerRadius:m,innerRadius:g,label:v(p.label,t,i.data.labels[t])}});var y=e._model;this.removeHoverStyle(e),n&&l.animateRotate||(y.startAngle=0===t?s.rotation:r.getMeta().data[t-1]._model.endAngle,y.endAngle=y.startAngle+y.circumference),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},calculateTotal:function(){var e,t=this.getDataset(),n=this.getMeta(),r=0;return o.each(n.data,function(n,i){e=t.data[i],isNaN(e)||n.hidden||(r+=Math.abs(e))}),r},calculateCircumference:function(e){var t=this.getMeta().total;return t>0&&!isNaN(e)?2*Math.PI*(e/t):0},getMaxBorderWidth:function(e){for(var t,n,r=0,i=this.index,o=e.length,a=0;a<o;a++)t=e[a]._model?e[a]._model.borderWidth:0,r=(n=e[a]._chart?e[a]._chart.config.data.datasets[i].hoverBorderWidth:0)>(r=t>r?t:r)?n:r;return r}})}},{25:25,40:40,45:45}],18:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("line",{showLines:!0,spanGaps:!1,hover:{mode:"label"},scales:{xAxes:[{type:"category",id:"x-axis-0"}],yAxes:[{type:"linear",id:"y-axis-0"}]}}),t.exports=function(e){function t(e,t){return o.valueOrDefault(e.showLine,t.showLines)}e.controllers.line=e.DatasetController.extend({datasetElementType:i.Line,dataElementType:i.Point,update:function(e){var n,r,i,a=this,s=a.getMeta(),l=s.dataset,u=s.data||[],c=a.chart.options,d=c.elements.line,f=a.getScaleForId(s.yAxisID),p=a.getDataset(),h=t(p,c);for(h&&(i=l.custom||{},void 0!==p.tension&&void 0===p.lineTension&&(p.lineTension=p.tension),l._scale=f,l._datasetIndex=a.index,l._children=u,l._model={spanGaps:p.spanGaps?p.spanGaps:c.spanGaps,tension:i.tension?i.tension:o.valueOrDefault(p.lineTension,d.tension),backgroundColor:i.backgroundColor?i.backgroundColor:p.backgroundColor||d.backgroundColor,borderWidth:i.borderWidth?i.borderWidth:p.borderWidth||d.borderWidth,borderColor:i.borderColor?i.borderColor:p.borderColor||d.borderColor,borderCapStyle:i.borderCapStyle?i.borderCapStyle:p.borderCapStyle||d.borderCapStyle,borderDash:i.borderDash?i.borderDash:p.borderDash||d.borderDash,borderDashOffset:i.borderDashOffset?i.borderDashOffset:p.borderDashOffset||d.borderDashOffset,borderJoinStyle:i.borderJoinStyle?i.borderJoinStyle:p.borderJoinStyle||d.borderJoinStyle,fill:i.fill?i.fill:void 0!==p.fill?p.fill:d.fill,steppedLine:i.steppedLine?i.steppedLine:o.valueOrDefault(p.steppedLine,d.stepped),cubicInterpolationMode:i.cubicInterpolationMode?i.cubicInterpolationMode:o.valueOrDefault(p.cubicInterpolationMode,d.cubicInterpolationMode)},l.pivot()),n=0,r=u.length;n<r;++n)a.updateElement(u[n],n,e);for(h&&0!==l._model.tension&&a.updateBezierControlPoints(),n=0,r=u.length;n<r;++n)u[n].pivot()},getPointBackgroundColor:function(e,t){var n=this.chart.options.elements.point.backgroundColor,r=this.getDataset(),i=e.custom||{};return i.backgroundColor?n=i.backgroundColor:r.pointBackgroundColor?n=o.valueAtIndexOrDefault(r.pointBackgroundColor,t,n):r.backgroundColor&&(n=r.backgroundColor),n},getPointBorderColor:function(e,t){var n=this.chart.options.elements.point.borderColor,r=this.getDataset(),i=e.custom||{};return i.borderColor?n=i.borderColor:r.pointBorderColor?n=o.valueAtIndexOrDefault(r.pointBorderColor,t,n):r.borderColor&&(n=r.borderColor),n},getPointBorderWidth:function(e,t){var n=this.chart.options.elements.point.borderWidth,r=this.getDataset(),i=e.custom||{};return isNaN(i.borderWidth)?!isNaN(r.pointBorderWidth)||o.isArray(r.pointBorderWidth)?n=o.valueAtIndexOrDefault(r.pointBorderWidth,t,n):isNaN(r.borderWidth)||(n=r.borderWidth):n=i.borderWidth,n},updateElement:function(e,t,n){var r,i,a=this,s=a.getMeta(),l=e.custom||{},u=a.getDataset(),c=a.index,d=u.data[t],f=a.getScaleForId(s.yAxisID),p=a.getScaleForId(s.xAxisID),h=a.chart.options.elements.point;void 0!==u.radius&&void 0===u.pointRadius&&(u.pointRadius=u.radius),void 0!==u.hitRadius&&void 0===u.pointHitRadius&&(u.pointHitRadius=u.hitRadius),r=p.getPixelForValue("object"==typeof d?d:NaN,t,c),i=n?f.getBasePixel():a.calculatePointY(d,t,c),e._xScale=p,e._yScale=f,e._datasetIndex=c,e._index=t,e._model={x:r,y:i,skip:l.skip||isNaN(r)||isNaN(i),radius:l.radius||o.valueAtIndexOrDefault(u.pointRadius,t,h.radius),pointStyle:l.pointStyle||o.valueAtIndexOrDefault(u.pointStyle,t,h.pointStyle),backgroundColor:a.getPointBackgroundColor(e,t),borderColor:a.getPointBorderColor(e,t),borderWidth:a.getPointBorderWidth(e,t),tension:s.dataset._model?s.dataset._model.tension:0,steppedLine:!!s.dataset._model&&s.dataset._model.steppedLine,hitRadius:l.hitRadius||o.valueAtIndexOrDefault(u.pointHitRadius,t,h.hitRadius)}},calculatePointY:function(e,t,n){var r,i,o,a=this,s=a.chart,l=a.getMeta(),u=a.getScaleForId(l.yAxisID),c=0,d=0;if(u.options.stacked){for(r=0;r<n;r++)if(i=s.data.datasets[r],"line"===(o=s.getDatasetMeta(r)).type&&o.yAxisID===u.id&&s.isDatasetVisible(r)){var f=Number(u.getRightValue(i.data[t]));f<0?d+=f||0:c+=f||0}var p=Number(u.getRightValue(e));return p<0?u.getPixelForValue(d+p):u.getPixelForValue(c+p)}return u.getPixelForValue(e)},updateBezierControlPoints:function(){function e(e,t,n){return Math.max(Math.min(e,n),t)}var t,n,r,i,a=this,s=a.getMeta(),l=a.chart.chartArea,u=s.data||[];if(s.dataset._model.spanGaps&&(u=u.filter(function(e){return!e._model.skip})),"monotone"===s.dataset._model.cubicInterpolationMode)o.splineCurveMonotone(u);else for(t=0,n=u.length;t<n;++t)r=u[t]._model,i=o.splineCurve(o.previousItem(u,t)._model,r,o.nextItem(u,t)._model,s.dataset._model.tension),r.controlPointPreviousX=i.previous.x,r.controlPointPreviousY=i.previous.y,r.controlPointNextX=i.next.x,r.controlPointNextY=i.next.y;if(a.chart.options.elements.line.capBezierPoints)for(t=0,n=u.length;t<n;++t)(r=u[t]._model).controlPointPreviousX=e(r.controlPointPreviousX,l.left,l.right),r.controlPointPreviousY=e(r.controlPointPreviousY,l.top,l.bottom),r.controlPointNextX=e(r.controlPointNextX,l.left,l.right),r.controlPointNextY=e(r.controlPointNextY,l.top,l.bottom)},draw:function(){var e=this,n=e.chart,r=e.getMeta(),i=r.data||[],a=n.chartArea,s=i.length,l=0;for(o.canvas.clipArea(n.ctx,a),t(e.getDataset(),n.options)&&r.dataset.draw(),o.canvas.unclipArea(n.ctx);l<s;++l)i[l].draw(a)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,r=e.custom||{},i=e._model;i.radius=r.hoverRadius||o.valueAtIndexOrDefault(t.pointHoverRadius,n,this.chart.options.elements.point.hoverRadius),i.backgroundColor=r.hoverBackgroundColor||o.valueAtIndexOrDefault(t.pointHoverBackgroundColor,n,o.getHoverColor(i.backgroundColor)),i.borderColor=r.hoverBorderColor||o.valueAtIndexOrDefault(t.pointHoverBorderColor,n,o.getHoverColor(i.borderColor)),i.borderWidth=r.hoverBorderWidth||o.valueAtIndexOrDefault(t.pointHoverBorderWidth,n,i.borderWidth)},removeHoverStyle:function(e){var t=this,n=t.chart.data.datasets[e._datasetIndex],r=e._index,i=e.custom||{},a=e._model;void 0!==n.radius&&void 0===n.pointRadius&&(n.pointRadius=n.radius),a.radius=i.radius||o.valueAtIndexOrDefault(n.pointRadius,r,t.chart.options.elements.point.radius),a.backgroundColor=t.getPointBackgroundColor(e,r),a.borderColor=t.getPointBorderColor(e,r),a.borderWidth=t.getPointBorderWidth(e,r)}})}},{25:25,40:40,45:45}],19:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("polarArea",{scale:{type:"radialLinear",angleLines:{display:!1},gridLines:{circular:!0},pointLabels:{display:!1},ticks:{beginAtZero:!0}},animation:{animateRotate:!0,animateScale:!0},startAngle:-.5*Math.PI,legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');var n=e.data,r=n.datasets,i=n.labels;if(r.length)for(var o=0;o<r[0].data.length;++o)t.push('<li><span style="background-color:'+r[0].backgroundColor[o]+'"></span>'),i[o]&&t.push(i[o]),t.push("</li>");return t.push("</ul>"),t.join("")},legend:{labels:{generateLabels:function(e){var t=e.data;return t.labels.length&&t.datasets.length?t.labels.map(function(n,r){var i=e.getDatasetMeta(0),a=t.datasets[0],s=i.data[r].custom||{},l=o.valueAtIndexOrDefault,u=e.options.elements.arc;return{text:n,fillStyle:s.backgroundColor?s.backgroundColor:l(a.backgroundColor,r,u.backgroundColor),strokeStyle:s.borderColor?s.borderColor:l(a.borderColor,r,u.borderColor),lineWidth:s.borderWidth?s.borderWidth:l(a.borderWidth,r,u.borderWidth),hidden:isNaN(a.data[r])||i.data[r].hidden,index:r}}):[]}},onClick:function(e,t){var n,r,i,o=t.index,a=this.chart;for(n=0,r=(a.data.datasets||[]).length;n<r;++n)(i=a.getDatasetMeta(n)).data[o].hidden=!i.data[o].hidden;a.update()}},tooltips:{callbacks:{title:function(){return""},label:function(e,t){return t.labels[e.index]+": "+e.yLabel}}}}),t.exports=function(e){e.controllers.polarArea=e.DatasetController.extend({dataElementType:i.Arc,linkScales:o.noop,update:function(e){var t=this,n=t.chart,r=n.chartArea,i=t.getMeta(),a=n.options,s=a.elements.arc,l=Math.min(r.right-r.left,r.bottom-r.top);n.outerRadius=Math.max((l-s.borderWidth/2)/2,0),n.innerRadius=Math.max(a.cutoutPercentage?n.outerRadius/100*a.cutoutPercentage:1,0),n.radiusLength=(n.outerRadius-n.innerRadius)/n.getVisibleDatasetCount(),t.outerRadius=n.outerRadius-n.radiusLength*t.index,t.innerRadius=t.outerRadius-n.radiusLength,i.count=t.countVisibleElements(),o.each(i.data,function(n,r){t.updateElement(n,r,e)})},updateElement:function(e,t,n){for(var r=this,i=r.chart,a=r.getDataset(),s=i.options,l=s.animation,u=i.scale,c=i.data.labels,d=r.calculateCircumference(a.data[t]),f=u.xCenter,p=u.yCenter,h=0,g=r.getMeta(),m=0;m<t;++m)isNaN(a.data[m])||g.data[m].hidden||++h;var v=s.startAngle,y=e.hidden?0:u.getDistanceFromCenterForValue(a.data[t]),b=v+d*h,x=b+(e.hidden?0:d),w=l.animateScale?0:u.getDistanceFromCenterForValue(a.data[t]);o.extend(e,{_datasetIndex:r.index,_index:t,_scale:u,_model:{x:f,y:p,innerRadius:0,outerRadius:n?w:y,startAngle:n&&l.animateRotate?v:b,endAngle:n&&l.animateRotate?v:x,label:o.valueAtIndexOrDefault(c,t,c[t])}}),r.removeHoverStyle(e),e.pivot()},removeHoverStyle:function(t){e.DatasetController.prototype.removeHoverStyle.call(this,t,this.chart.options.elements.arc)},countVisibleElements:function(){var e=this.getDataset(),t=this.getMeta(),n=0;return o.each(t.data,function(t,r){isNaN(e.data[r])||t.hidden||n++}),n},calculateCircumference:function(e){var t=this.getMeta().count;return t>0&&!isNaN(e)?2*Math.PI/t:0}})}},{25:25,40:40,45:45}],20:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("radar",{scale:{type:"radialLinear"},elements:{line:{tension:0}}}),t.exports=function(e){e.controllers.radar=e.DatasetController.extend({datasetElementType:i.Line,dataElementType:i.Point,linkScales:o.noop,update:function(e){var t=this,n=t.getMeta(),r=n.dataset,i=n.data,a=r.custom||{},s=t.getDataset(),l=t.chart.options.elements.line,u=t.chart.scale;void 0!==s.tension&&void 0===s.lineTension&&(s.lineTension=s.tension),o.extend(n.dataset,{_datasetIndex:t.index,_scale:u,_children:i,_loop:!0,_model:{tension:a.tension?a.tension:o.valueOrDefault(s.lineTension,l.tension),backgroundColor:a.backgroundColor?a.backgroundColor:s.backgroundColor||l.backgroundColor,borderWidth:a.borderWidth?a.borderWidth:s.borderWidth||l.borderWidth,borderColor:a.borderColor?a.borderColor:s.borderColor||l.borderColor,fill:a.fill?a.fill:void 0!==s.fill?s.fill:l.fill,borderCapStyle:a.borderCapStyle?a.borderCapStyle:s.borderCapStyle||l.borderCapStyle,borderDash:a.borderDash?a.borderDash:s.borderDash||l.borderDash,borderDashOffset:a.borderDashOffset?a.borderDashOffset:s.borderDashOffset||l.borderDashOffset,borderJoinStyle:a.borderJoinStyle?a.borderJoinStyle:s.borderJoinStyle||l.borderJoinStyle}}),n.dataset.pivot(),o.each(i,function(n,r){t.updateElement(n,r,e)},t),t.updateBezierControlPoints()},updateElement:function(e,t,n){var r=this,i=e.custom||{},a=r.getDataset(),s=r.chart.scale,l=r.chart.options.elements.point,u=s.getPointPositionForValue(t,a.data[t]);void 0!==a.radius&&void 0===a.pointRadius&&(a.pointRadius=a.radius),void 0!==a.hitRadius&&void 0===a.pointHitRadius&&(a.pointHitRadius=a.hitRadius),o.extend(e,{_datasetIndex:r.index,_index:t,_scale:s,_model:{x:n?s.xCenter:u.x,y:n?s.yCenter:u.y,tension:i.tension?i.tension:o.valueOrDefault(a.lineTension,r.chart.options.elements.line.tension),radius:i.radius?i.radius:o.valueAtIndexOrDefault(a.pointRadius,t,l.radius),backgroundColor:i.backgroundColor?i.backgroundColor:o.valueAtIndexOrDefault(a.pointBackgroundColor,t,l.backgroundColor),borderColor:i.borderColor?i.borderColor:o.valueAtIndexOrDefault(a.pointBorderColor,t,l.borderColor),borderWidth:i.borderWidth?i.borderWidth:o.valueAtIndexOrDefault(a.pointBorderWidth,t,l.borderWidth),pointStyle:i.pointStyle?i.pointStyle:o.valueAtIndexOrDefault(a.pointStyle,t,l.pointStyle),hitRadius:i.hitRadius?i.hitRadius:o.valueAtIndexOrDefault(a.pointHitRadius,t,l.hitRadius)}}),e._model.skip=i.skip?i.skip:isNaN(e._model.x)||isNaN(e._model.y)},updateBezierControlPoints:function(){var e=this.chart.chartArea,t=this.getMeta();o.each(t.data,function(n,r){var i=n._model,a=o.splineCurve(o.previousItem(t.data,r,!0)._model,i,o.nextItem(t.data,r,!0)._model,i.tension);i.controlPointPreviousX=Math.max(Math.min(a.previous.x,e.right),e.left),i.controlPointPreviousY=Math.max(Math.min(a.previous.y,e.bottom),e.top),i.controlPointNextX=Math.max(Math.min(a.next.x,e.right),e.left),i.controlPointNextY=Math.max(Math.min(a.next.y,e.bottom),e.top),n.pivot()})},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,i=e._model;i.radius=n.hoverRadius?n.hoverRadius:o.valueAtIndexOrDefault(t.pointHoverRadius,r,this.chart.options.elements.point.hoverRadius),i.backgroundColor=n.hoverBackgroundColor?n.hoverBackgroundColor:o.valueAtIndexOrDefault(t.pointHoverBackgroundColor,r,o.getHoverColor(i.backgroundColor)),i.borderColor=n.hoverBorderColor?n.hoverBorderColor:o.valueAtIndexOrDefault(t.pointHoverBorderColor,r,o.getHoverColor(i.borderColor)),i.borderWidth=n.hoverBorderWidth?n.hoverBorderWidth:o.valueAtIndexOrDefault(t.pointHoverBorderWidth,r,i.borderWidth)},removeHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e.custom||{},r=e._index,i=e._model,a=this.chart.options.elements.point;i.radius=n.radius?n.radius:o.valueAtIndexOrDefault(t.pointRadius,r,a.radius),i.backgroundColor=n.backgroundColor?n.backgroundColor:o.valueAtIndexOrDefault(t.pointBackgroundColor,r,a.backgroundColor),i.borderColor=n.borderColor?n.borderColor:o.valueAtIndexOrDefault(t.pointBorderColor,r,a.borderColor),i.borderWidth=n.borderWidth?n.borderWidth:o.valueAtIndexOrDefault(t.pointBorderWidth,r,a.borderWidth)}})}},{25:25,40:40,45:45}],21:[function(e,t,n){"use strict";e(25)._set("scatter",{hover:{mode:"single"},scales:{xAxes:[{id:"x-axis-1",type:"linear",position:"bottom"}],yAxes:[{id:"y-axis-1",type:"linear",position:"left"}]},showLines:!1,tooltips:{callbacks:{title:function(){return""},label:function(e){return"("+e.xLabel+", "+e.yLabel+")"}}}}),t.exports=function(e){e.controllers.scatter=e.controllers.line}},{25:25}],22:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{animation:{duration:1e3,easing:"easeOutQuart",onProgress:o.noop,onComplete:o.noop}}),t.exports=function(e){e.Animation=i.extend({chart:null,currentStep:0,numSteps:60,easing:"",render:null,onAnimationProgress:null,onAnimationComplete:null}),e.animationService={frameDuration:17,animations:[],dropFrames:0,request:null,addAnimation:function(e,t,n,r){var i,o,a=this.animations;for(t.chart=e,r||(e.animating=!0),i=0,o=a.length;i<o;++i)if(a[i].chart===e)return void(a[i]=t);a.push(t),1===a.length&&this.requestAnimationFrame()},cancelAnimation:function(e){var t=o.findIndex(this.animations,function(t){return t.chart===e});-1!==t&&(this.animations.splice(t,1),e.animating=!1)},requestAnimationFrame:function(){var e=this;null===e.request&&(e.request=o.requestAnimFrame.call(window,function(){e.request=null,e.startDigest()}))},startDigest:function(){var e=this,t=Date.now(),n=0;e.dropFrames>1&&(n=Math.floor(e.dropFrames),e.dropFrames=e.dropFrames%1),e.advance(1+n);var r=Date.now();e.dropFrames+=(r-t)/e.frameDuration,e.animations.length>0&&e.requestAnimationFrame()},advance:function(e){for(var t,n,r=this.animations,i=0;i<r.length;)n=(t=r[i]).chart,t.currentStep=(t.currentStep||0)+e,t.currentStep=Math.min(t.currentStep,t.numSteps),o.callback(t.render,[n,t],n),o.callback(t.onAnimationProgress,[t],n),t.currentStep>=t.numSteps?(o.callback(t.onAnimationComplete,[t],n),n.animating=!1,r.splice(i,1)):++i}},Object.defineProperty(e.Animation.prototype,"animationObject",{get:function(){return this}}),Object.defineProperty(e.Animation.prototype,"chartInstance",{get:function(){return this.chart},set:function(e){this.chart=e}})}},{25:25,26:26,45:45}],23:[function(e,t,n){"use strict";var r=e(25),i=e(45),o=e(28),a=e(48);t.exports=function(e){function t(e){var t=(e=e||{}).data=e.data||{};return t.datasets=t.datasets||[],t.labels=t.labels||[],e.options=i.configMerge(r.global,r[e.type],e.options||{}),e}function n(e){var t=e.options;t.scale?e.scale.options=t.scale:t.scales&&t.scales.xAxes.concat(t.scales.yAxes).forEach(function(t){e.scales[t.id].options=t}),e.tooltip._options=t.tooltips}function s(e){return"top"===e||"bottom"===e}var l=e.plugins;e.types={},e.instances={},e.controllers={},i.extend(e.prototype,{construct:function(n,r){var o=this;r=t(r);var s=a.acquireContext(n,r),l=s&&s.canvas,u=l&&l.height,c=l&&l.width;o.id=i.uid(),o.ctx=s,o.canvas=l,o.config=r,o.width=c,o.height=u,o.aspectRatio=u?c/u:null,o.options=r.options,o._bufferedRender=!1,o.chart=o,o.controller=o,e.instances[o.id]=o,Object.defineProperty(o,"data",{get:function(){return o.config.data},set:function(e){o.config.data=e}}),s&&l?(o.initialize(),o.update()):console.error("Failed to create chart: can't acquire context from the given item")},initialize:function(){var e=this;return l.notify(e,"beforeInit"),i.retinaScale(e,e.options.devicePixelRatio),e.bindEvents(),e.options.responsive&&e.resize(!0),e.ensureScalesHaveIDs(),e.buildScales(),e.initToolTip(),l.notify(e,"afterInit"),e},clear:function(){return i.canvas.clear(this),this},stop:function(){return e.animationService.cancelAnimation(this),this},resize:function(e){var t=this,n=t.options,r=t.canvas,o=n.maintainAspectRatio&&t.aspectRatio||null,a=Math.max(0,Math.floor(i.getMaximumWidth(r))),s=Math.max(0,Math.floor(o?a/o:i.getMaximumHeight(r)));if((t.width!==a||t.height!==s)&&(r.width=t.width=a,r.height=t.height=s,r.style.width=a+"px",r.style.height=s+"px",i.retinaScale(t,n.devicePixelRatio),!e)){var u={width:a,height:s};l.notify(t,"resize",[u]),t.options.onResize&&t.options.onResize(t,u),t.stop(),t.update(t.options.responsiveAnimationDuration)}},ensureScalesHaveIDs:function(){var e=this.options,t=e.scales||{},n=e.scale;i.each(t.xAxes,function(e,t){e.id=e.id||"x-axis-"+t}),i.each(t.yAxes,function(e,t){e.id=e.id||"y-axis-"+t}),n&&(n.id=n.id||"scale")},buildScales:function(){var t=this,n=t.options,r=t.scales={},o=[];n.scales&&(o=o.concat((n.scales.xAxes||[]).map(function(e){return{options:e,dtype:"category",dposition:"bottom"}}),(n.scales.yAxes||[]).map(function(e){return{options:e,dtype:"linear",dposition:"left"}}))),n.scale&&o.push({options:n.scale,dtype:"radialLinear",isDefault:!0,dposition:"chartArea"}),i.each(o,function(n){var o=n.options,a=i.valueOrDefault(o.type,n.dtype),l=e.scaleService.getScaleConstructor(a);if(l){s(o.position)!==s(n.dposition)&&(o.position=n.dposition);var u=new l({id:o.id,options:o,ctx:t.ctx,chart:t});r[u.id]=u,u.mergeTicksOptions(),n.isDefault&&(t.scale=u)}}),e.scaleService.addScalesToLayout(this)},buildOrUpdateControllers:function(){var t=this,n=[],r=[];return i.each(t.data.datasets,function(i,o){var a=t.getDatasetMeta(o),s=i.type||t.config.type;if(a.type&&a.type!==s&&(t.destroyDatasetMeta(o),a=t.getDatasetMeta(o)),a.type=s,n.push(a.type),a.controller)a.controller.updateIndex(o);else{var l=e.controllers[a.type];if(void 0===l)throw new Error('"'+a.type+'" is not a chart type.');a.controller=new l(t,o),r.push(a.controller)}},t),r},resetElements:function(){var e=this;i.each(e.data.datasets,function(t,n){e.getDatasetMeta(n).controller.reset()},e)},reset:function(){this.resetElements(),this.tooltip.initialize()},update:function(e){var t=this;if(e&&"object"==typeof e||(e={duration:e,lazy:arguments[1]}),n(t),!1!==l.notify(t,"beforeUpdate")){t.tooltip._data=t.data;var r=t.buildOrUpdateControllers();i.each(t.data.datasets,function(e,n){t.getDatasetMeta(n).controller.buildOrUpdateElements()},t),t.updateLayout(),i.each(r,function(e){e.reset()}),t.updateDatasets(),t.tooltip.initialize(),t.lastActive=[],l.notify(t,"afterUpdate"),t._bufferedRender?t._bufferedRequest={duration:e.duration,easing:e.easing,lazy:e.lazy}:t.render(e)}},updateLayout:function(){var t=this;!1!==l.notify(t,"beforeLayout")&&(e.layoutService.update(this,this.width,this.height),l.notify(t,"afterScaleUpdate"),l.notify(t,"afterLayout"))},updateDatasets:function(){var e=this;if(!1!==l.notify(e,"beforeDatasetsUpdate")){for(var t=0,n=e.data.datasets.length;t<n;++t)e.updateDataset(t);l.notify(e,"afterDatasetsUpdate")}},updateDataset:function(e){var t=this,n=t.getDatasetMeta(e),r={meta:n,index:e};!1!==l.notify(t,"beforeDatasetUpdate",[r])&&(n.controller.update(),l.notify(t,"afterDatasetUpdate",[r]))},render:function(t){var n=this;t&&"object"==typeof t||(t={duration:t,lazy:arguments[1]});var r=t.duration,o=t.lazy;if(!1!==l.notify(n,"beforeRender")){var a=n.options.animation,s=function(e){l.notify(n,"afterRender"),i.callback(a&&a.onComplete,[e],n)};if(a&&(void 0!==r&&0!==r||void 0===r&&0!==a.duration)){var u=new e.Animation({numSteps:(r||a.duration)/16.66,easing:t.easing||a.easing,render:function(e,t){var n=i.easing.effects[t.easing],r=t.currentStep,o=r/t.numSteps;e.draw(n(o),o,r)},onAnimationProgress:a.onProgress,onAnimationComplete:s});e.animationService.addAnimation(n,u,r,o)}else n.draw(),s(new e.Animation({numSteps:0,chart:n}));return n}},draw:function(e){var t=this;t.clear(),i.isNullOrUndef(e)&&(e=1),t.transition(e),!1!==l.notify(t,"beforeDraw",[e])&&(i.each(t.boxes,function(e){e.draw(t.chartArea)},t),t.scale&&t.scale.draw(),t.drawDatasets(e),t._drawTooltip(e),l.notify(t,"afterDraw",[e]))},transition:function(e){for(var t=this,n=0,r=(t.data.datasets||[]).length;n<r;++n)t.isDatasetVisible(n)&&t.getDatasetMeta(n).controller.transition(e);t.tooltip.transition(e)},drawDatasets:function(e){var t=this;if(!1!==l.notify(t,"beforeDatasetsDraw",[e])){for(var n=(t.data.datasets||[]).length-1;n>=0;--n)t.isDatasetVisible(n)&&t.drawDataset(n,e);l.notify(t,"afterDatasetsDraw",[e])}},drawDataset:function(e,t){var n=this,r=n.getDatasetMeta(e),i={meta:r,index:e,easingValue:t};!1!==l.notify(n,"beforeDatasetDraw",[i])&&(r.controller.draw(t),l.notify(n,"afterDatasetDraw",[i]))},_drawTooltip:function(e){var t=this,n=t.tooltip,r={tooltip:n,easingValue:e};!1!==l.notify(t,"beforeTooltipDraw",[r])&&(n.draw(),l.notify(t,"afterTooltipDraw",[r]))},getElementAtEvent:function(e){return o.modes.single(this,e)},getElementsAtEvent:function(e){return o.modes.label(this,e,{intersect:!0})},getElementsAtXAxis:function(e){return o.modes["x-axis"](this,e,{intersect:!0})},getElementsAtEventForMode:function(e,t,n){var r=o.modes[t];return"function"==typeof r?r(this,e,n):[]},getDatasetAtEvent:function(e){return o.modes.dataset(this,e,{intersect:!0})},getDatasetMeta:function(e){var t=this,n=t.data.datasets[e];n._meta||(n._meta={});var r=n._meta[t.id];return r||(r=n._meta[t.id]={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null}),r},getVisibleDatasetCount:function(){for(var e=0,t=0,n=this.data.datasets.length;t<n;++t)this.isDatasetVisible(t)&&e++;return e},isDatasetVisible:function(e){var t=this.getDatasetMeta(e);return"boolean"==typeof t.hidden?!t.hidden:!this.data.datasets[e].hidden},generateLegend:function(){return this.options.legendCallback(this)},destroyDatasetMeta:function(e){var t=this.id,n=this.data.datasets[e],r=n._meta&&n._meta[t];r&&(r.controller.destroy(),delete n._meta[t])},destroy:function(){var t,n,r=this,o=r.canvas;for(r.stop(),t=0,n=r.data.datasets.length;t<n;++t)r.destroyDatasetMeta(t);o&&(r.unbindEvents(),i.canvas.clear(r),a.releaseContext(r.ctx),r.canvas=null,r.ctx=null),l.notify(r,"destroy"),delete e.instances[r.id]},toBase64Image:function(){return this.canvas.toDataURL.apply(this.canvas,arguments)},initToolTip:function(){var t=this;t.tooltip=new e.Tooltip({_chart:t,_chartInstance:t,_data:t.data,_options:t.options.tooltips},t)},bindEvents:function(){var e=this,t=e._listeners={},n=function(){e.eventHandler.apply(e,arguments)};i.each(e.options.events,function(r){a.addEventListener(e,r,n),t[r]=n}),e.options.responsive&&(n=function(){e.resize()},a.addEventListener(e,"resize",n),t.resize=n)},unbindEvents:function(){var e=this,t=e._listeners;t&&(delete e._listeners,i.each(t,function(t,n){a.removeEventListener(e,n,t)}))},updateHoverStyle:function(e,t,n){var r,i,o,a=n?"setHoverStyle":"removeHoverStyle";for(i=0,o=e.length;i<o;++i)(r=e[i])&&this.getDatasetMeta(r._datasetIndex).controller[a](r)},eventHandler:function(e){var t=this,n=t.tooltip;if(!1!==l.notify(t,"beforeEvent",[e])){t._bufferedRender=!0,t._bufferedRequest=null;var r=t.handleEvent(e);r|=n&&n.handleEvent(e),l.notify(t,"afterEvent",[e]);var i=t._bufferedRequest;return i?t.render(i):r&&!t.animating&&(t.stop(),t.render(t.options.hover.animationDuration,!0)),t._bufferedRender=!1,t._bufferedRequest=null,t}},handleEvent:function(e){var t=this,n=t.options||{},r=n.hover,o=!1;return t.lastActive=t.lastActive||[],"mouseout"===e.type?t.active=[]:t.active=t.getElementsAtEventForMode(e,r.mode,r),i.callback(n.onHover||n.hover.onHover,[e.native,t.active],t),"mouseup"!==e.type&&"click"!==e.type||n.onClick&&n.onClick.call(t,e.native,t.active),t.lastActive.length&&t.updateHoverStyle(t.lastActive,r.mode,!1),t.active.length&&r.mode&&t.updateHoverStyle(t.active,r.mode,!0),o=!i.arrayEquals(t.active,t.lastActive),t.lastActive=t.active,o}}),e.Controller=e}},{25:25,28:28,45:45,48:48}],24:[function(e,t,n){"use strict";var r=e(45);t.exports=function(e){function t(e,t){e._chartjs?e._chartjs.listeners.push(t):(Object.defineProperty(e,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[t]}}),i.forEach(function(t){var n="onData"+t.charAt(0).toUpperCase()+t.slice(1),i=e[t];Object.defineProperty(e,t,{configurable:!0,enumerable:!1,value:function(){var t=Array.prototype.slice.call(arguments),o=i.apply(this,t);return r.each(e._chartjs.listeners,function(e){"function"==typeof e[n]&&e[n].apply(e,t)}),o}})}))}function n(e,t){var n=e._chartjs;if(n){var r=n.listeners,o=r.indexOf(t);-1!==o&&r.splice(o,1),r.length>0||(i.forEach(function(t){delete e[t]}),delete e._chartjs)}}var i=["push","pop","shift","splice","unshift"];e.DatasetController=function(e,t){this.initialize(e,t)},r.extend(e.DatasetController.prototype,{datasetElementType:null,dataElementType:null,initialize:function(e,t){var n=this;n.chart=e,n.index=t,n.linkScales(),n.addElements()},updateIndex:function(e){this.index=e},linkScales:function(){var e=this,t=e.getMeta(),n=e.getDataset();null===t.xAxisID&&(t.xAxisID=n.xAxisID||e.chart.options.scales.xAxes[0].id),null===t.yAxisID&&(t.yAxisID=n.yAxisID||e.chart.options.scales.yAxes[0].id)},getDataset:function(){return this.chart.data.datasets[this.index]},getMeta:function(){return this.chart.getDatasetMeta(this.index)},getScaleForId:function(e){return this.chart.scales[e]},reset:function(){this.update(!0)},destroy:function(){this._data&&n(this._data,this)},createMetaDataset:function(){var e=this,t=e.datasetElementType;return t&&new t({_chart:e.chart,_datasetIndex:e.index})},createMetaData:function(e){var t=this,n=t.dataElementType;return n&&new n({_chart:t.chart,_datasetIndex:t.index,_index:e})},addElements:function(){var e,t,n=this,r=n.getMeta(),i=n.getDataset().data||[],o=r.data;for(e=0,t=i.length;e<t;++e)o[e]=o[e]||n.createMetaData(e);r.dataset=r.dataset||n.createMetaDataset()},addElementAndReset:function(e){var t=this.createMetaData(e);this.getMeta().data.splice(e,0,t),this.updateElement(t,e,!0)},buildOrUpdateElements:function(){var e=this,r=e.getDataset(),i=r.data||(r.data=[]);e._data!==i&&(e._data&&n(e._data,e),t(i,e),e._data=i),e.resyncElements()},update:r.noop,transition:function(e){for(var t=this.getMeta(),n=t.data||[],r=n.length,i=0;i<r;++i)n[i].transition(e);t.dataset&&t.dataset.transition(e)},draw:function(){var e=this.getMeta(),t=e.data||[],n=t.length,r=0;for(e.dataset&&e.dataset.draw();r<n;++r)t[r].draw()},removeHoverStyle:function(e,t){var n=this.chart.data.datasets[e._datasetIndex],i=e._index,o=e.custom||{},a=r.valueAtIndexOrDefault,s=e._model;s.backgroundColor=o.backgroundColor?o.backgroundColor:a(n.backgroundColor,i,t.backgroundColor),s.borderColor=o.borderColor?o.borderColor:a(n.borderColor,i,t.borderColor),s.borderWidth=o.borderWidth?o.borderWidth:a(n.borderWidth,i,t.borderWidth)},setHoverStyle:function(e){var t=this.chart.data.datasets[e._datasetIndex],n=e._index,i=e.custom||{},o=r.valueAtIndexOrDefault,a=r.getHoverColor,s=e._model;s.backgroundColor=i.hoverBackgroundColor?i.hoverBackgroundColor:o(t.hoverBackgroundColor,n,a(s.backgroundColor)),s.borderColor=i.hoverBorderColor?i.hoverBorderColor:o(t.hoverBorderColor,n,a(s.borderColor)),s.borderWidth=i.hoverBorderWidth?i.hoverBorderWidth:o(t.hoverBorderWidth,n,s.borderWidth)},resyncElements:function(){var e=this,t=e.getMeta(),n=e.getDataset().data,r=t.data.length,i=n.length;i<r?t.data.splice(i,r-i):i>r&&e.insertElements(r,i-r)},insertElements:function(e,t){for(var n=0;n<t;++n)this.addElementAndReset(e+n)},onDataPush:function(){this.insertElements(this.getDataset().data.length-1,arguments.length)},onDataPop:function(){this.getMeta().data.pop()},onDataShift:function(){this.getMeta().data.shift()},onDataSplice:function(e,t){this.getMeta().data.splice(e,t),this.insertElements(e,arguments.length-2)},onDataUnshift:function(){this.insertElements(0,arguments.length)}}),e.DatasetController.extend=r.inherits}},{45:45}],25:[function(e,t,n){"use strict";var r=e(45);t.exports={_set:function(e,t){return r.merge(this[e]||(this[e]={}),t)}}},{45:45}],26:[function(e,t,n){"use strict";function r(e,t,n,r){var o,a,s,l,u,c,d,f,p,h=Object.keys(n);for(o=0,a=h.length;o<a;++o)if(s=h[o],c=n[s],t.hasOwnProperty(s)||(t[s]=c),(l=t[s])!==c&&"_"!==s[0]){if(e.hasOwnProperty(s)||(e[s]=l),u=e[s],(d=typeof c)===typeof u)if("string"===d){if((f=i(u)).valid&&(p=i(c)).valid){t[s]=p.mix(f,r).rgbString();continue}}else if("number"===d&&isFinite(u)&&isFinite(c)){t[s]=u+(c-u)*r;continue}t[s]=c}}var i=e(3),o=e(45),a=function(e){o.extend(this,e),this.initialize.apply(this,arguments)};o.extend(a.prototype,{initialize:function(){this.hidden=!1},pivot:function(){var e=this;return e._view||(e._view=o.clone(e._model)),e._start={},e},transition:function(e){var t=this,n=t._model,i=t._start,o=t._view;return n&&1!==e?(o||(o=t._view={}),i||(i=t._start={}),r(i,o,n,e),t):(t._view=n,t._start=null,t)},tooltipPosition:function(){return{x:this._model.x,y:this._model.y}},hasValue:function(){return o.isNumber(this._model.x)&&o.isNumber(this._model.y)}}),a.extend=o.inherits,t.exports=a},{3:3,45:45}],27:[function(e,t,n){"use strict";var r=e(3),i=e(25),o=e(45);t.exports=function(e){function t(e,t,n){var r;return"string"==typeof e?(r=parseInt(e,10),-1!==e.indexOf("%")&&(r=r/100*t.parentNode[n])):r=e,r}function n(e){return void 0!==e&&null!==e&&"none"!==e}function a(e,r,i){var o=document.defaultView,a=e.parentNode,s=o.getComputedStyle(e)[r],l=o.getComputedStyle(a)[r],u=n(s),c=n(l),d=Number.POSITIVE_INFINITY;return u||c?Math.min(u?t(s,e,i):d,c?t(l,a,i):d):"none"}o.configMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,r,i){var a=n[t]||{},s=r[t];"scales"===t?n[t]=o.scaleMerge(a,s):"scale"===t?n[t]=o.merge(a,[e.scaleService.getScaleDefaults(s.type),s]):o._merger(t,n,r,i)}})},o.scaleMerge=function(){return o.merge(o.clone(arguments[0]),[].slice.call(arguments,1),{merger:function(t,n,r,i){if("xAxes"===t||"yAxes"===t){var a,s,l,u=r[t].length;for(n[t]||(n[t]=[]),a=0;a<u;++a)l=r[t][a],s=o.valueOrDefault(l.type,"xAxes"===t?"category":"linear"),a>=n[t].length&&n[t].push({}),!n[t][a].type||l.type&&l.type!==n[t][a].type?o.merge(n[t][a],[e.scaleService.getScaleDefaults(s),l]):o.merge(n[t][a],l)}else o._merger(t,n,r,i)}})},o.where=function(e,t){if(o.isArray(e)&&Array.prototype.filter)return e.filter(t);var n=[];return o.each(e,function(e){t(e)&&n.push(e)}),n},o.findIndex=Array.prototype.findIndex?function(e,t,n){return e.findIndex(t,n)}:function(e,t,n){n=void 0===n?e:n;for(var r=0,i=e.length;r<i;++r)if(t.call(n,e[r],r,e))return r;return-1},o.findNextWhere=function(e,t,n){o.isNullOrUndef(n)&&(n=-1);for(var r=n+1;r<e.length;r++){var i=e[r];if(t(i))return i}},o.findPreviousWhere=function(e,t,n){o.isNullOrUndef(n)&&(n=e.length);for(var r=n-1;r>=0;r--){var i=e[r];if(t(i))return i}},o.isNumber=function(e){return!isNaN(parseFloat(e))&&isFinite(e)},o.almostEquals=function(e,t,n){return Math.abs(e-t)<n},o.almostWhole=function(e,t){var n=Math.round(e);return n-t<e&&n+t>e},o.max=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.max(e,t)},Number.NEGATIVE_INFINITY)},o.min=function(e){return e.reduce(function(e,t){return isNaN(t)?e:Math.min(e,t)},Number.POSITIVE_INFINITY)},o.sign=Math.sign?function(e){return Math.sign(e)}:function(e){return e=+e,0===e||isNaN(e)?e:e>0?1:-1},o.log10=Math.log10?function(e){return Math.log10(e)}:function(e){return Math.log(e)/Math.LN10},o.toRadians=function(e){return e*(Math.PI/180)},o.toDegrees=function(e){return e*(180/Math.PI)},o.getAngleFromPoint=function(e,t){var n=t.x-e.x,r=t.y-e.y,i=Math.sqrt(n*n+r*r),o=Math.atan2(r,n);return o<-.5*Math.PI&&(o+=2*Math.PI),{angle:o,distance:i}},o.distanceBetweenPoints=function(e,t){return Math.sqrt(Math.pow(t.x-e.x,2)+Math.pow(t.y-e.y,2))},o.aliasPixel=function(e){return e%2==0?0:.5},o.splineCurve=function(e,t,n,r){var i=e.skip?t:e,o=t,a=n.skip?t:n,s=Math.sqrt(Math.pow(o.x-i.x,2)+Math.pow(o.y-i.y,2)),l=Math.sqrt(Math.pow(a.x-o.x,2)+Math.pow(a.y-o.y,2)),u=s/(s+l),c=l/(s+l),d=r*(u=isNaN(u)?0:u),f=r*(c=isNaN(c)?0:c);return{previous:{x:o.x-d*(a.x-i.x),y:o.y-d*(a.y-i.y)},next:{x:o.x+f*(a.x-i.x),y:o.y+f*(a.y-i.y)}}},o.EPSILON=Number.EPSILON||1e-14,o.splineCurveMonotone=function(e){var t,n,r,i,a=(e||[]).map(function(e){return{model:e._model,deltaK:0,mK:0}}),s=a.length;for(t=0;t<s;++t)if(!(r=a[t]).model.skip){if(n=t>0?a[t-1]:null,(i=t<s-1?a[t+1]:null)&&!i.model.skip){var l=i.model.x-r.model.x;r.deltaK=0!==l?(i.model.y-r.model.y)/l:0}!n||n.model.skip?r.mK=r.deltaK:!i||i.model.skip?r.mK=n.deltaK:this.sign(n.deltaK)!==this.sign(r.deltaK)?r.mK=0:r.mK=(n.deltaK+r.deltaK)/2}var u,c,d,f;for(t=0;t<s-1;++t)r=a[t],i=a[t+1],r.model.skip||i.model.skip||(o.almostEquals(r.deltaK,0,this.EPSILON)?r.mK=i.mK=0:(u=r.mK/r.deltaK,c=i.mK/r.deltaK,(f=Math.pow(u,2)+Math.pow(c,2))<=9||(d=3/Math.sqrt(f),r.mK=u*d*r.deltaK,i.mK=c*d*r.deltaK)));var p;for(t=0;t<s;++t)(r=a[t]).model.skip||(n=t>0?a[t-1]:null,i=t<s-1?a[t+1]:null,n&&!n.model.skip&&(p=(r.model.x-n.model.x)/3,r.model.controlPointPreviousX=r.model.x-p,r.model.controlPointPreviousY=r.model.y-p*r.mK),i&&!i.model.skip&&(p=(i.model.x-r.model.x)/3,r.model.controlPointNextX=r.model.x+p,r.model.controlPointNextY=r.model.y+p*r.mK))},o.nextItem=function(e,t,n){return n?t>=e.length-1?e[0]:e[t+1]:t>=e.length-1?e[e.length-1]:e[t+1]},o.previousItem=function(e,t,n){return n?t<=0?e[e.length-1]:e[t-1]:t<=0?e[0]:e[t-1]},o.niceNum=function(e,t){var n=Math.floor(o.log10(e)),r=e/Math.pow(10,n);return(t?r<1.5?1:r<3?2:r<7?5:10:r<=1?1:r<=2?2:r<=5?5:10)*Math.pow(10,n)},o.requestAnimFrame=function(){return"undefined"==typeof window?function(e){e()}:window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e){return window.setTimeout(e,1e3/60)}}(),o.getRelativePosition=function(e,t){var n,r,i=e.originalEvent||e,a=e.currentTarget||e.srcElement,s=a.getBoundingClientRect(),l=i.touches;l&&l.length>0?(n=l[0].clientX,r=l[0].clientY):(n=i.clientX,r=i.clientY);var u=parseFloat(o.getStyle(a,"padding-left")),c=parseFloat(o.getStyle(a,"padding-top")),d=parseFloat(o.getStyle(a,"padding-right")),f=parseFloat(o.getStyle(a,"padding-bottom")),p=s.right-s.left-u-d,h=s.bottom-s.top-c-f;return n=Math.round((n-s.left-u)/p*a.width/t.currentDevicePixelRatio),r=Math.round((r-s.top-c)/h*a.height/t.currentDevicePixelRatio),{x:n,y:r}},o.getConstraintWidth=function(e){return a(e,"max-width","clientWidth")},o.getConstraintHeight=function(e){return a(e,"max-height","clientHeight")},o.getMaximumWidth=function(e){var t=e.parentNode;if(!t)return e.clientWidth;var n=parseInt(o.getStyle(t,"padding-left"),10),r=parseInt(o.getStyle(t,"padding-right"),10),i=t.clientWidth-n-r,a=o.getConstraintWidth(e);return isNaN(a)?i:Math.min(i,a)},o.getMaximumHeight=function(e){var t=e.parentNode;if(!t)return e.clientHeight;var n=parseInt(o.getStyle(t,"padding-top"),10),r=parseInt(o.getStyle(t,"padding-bottom"),10),i=t.clientHeight-n-r,a=o.getConstraintHeight(e);return isNaN(a)?i:Math.min(i,a)},o.getStyle=function(e,t){return e.currentStyle?e.currentStyle[t]:document.defaultView.getComputedStyle(e,null).getPropertyValue(t)},o.retinaScale=function(e,t){var n=e.currentDevicePixelRatio=t||window.devicePixelRatio||1;if(1!==n){var r=e.canvas,i=e.height,o=e.width;r.height=i*n,r.width=o*n,e.ctx.scale(n,n),r.style.height=i+"px",r.style.width=o+"px"}},o.fontString=function(e,t,n){return t+" "+e+"px "+n},o.longestText=function(e,t,n,r){var i=(r=r||{}).data=r.data||{},a=r.garbageCollect=r.garbageCollect||[];r.font!==t&&(i=r.data={},a=r.garbageCollect=[],r.font=t),e.font=t;var s=0;o.each(n,function(t){void 0!==t&&null!==t&&!0!==o.isArray(t)?s=o.measureText(e,i,a,s,t):o.isArray(t)&&o.each(t,function(t){void 0===t||null===t||o.isArray(t)||(s=o.measureText(e,i,a,s,t))})});var l=a.length/2;if(l>n.length){for(var u=0;u<l;u++)delete i[a[u]];a.splice(0,l)}return s},o.measureText=function(e,t,n,r,i){var o=t[i];return o||(o=t[i]=e.measureText(i).width,n.push(i)),o>r&&(r=o),r},o.numberOfLabelLines=function(e){var t=1;return o.each(e,function(e){o.isArray(e)&&e.length>t&&(t=e.length)}),t},o.color=r?function(e){return e instanceof CanvasGradient&&(e=i.global.defaultColor),r(e)}:function(e){return console.error("Color.js not found!"),e},o.getHoverColor=function(e){return e instanceof CanvasPattern?e:o.color(e).saturate(.5).darken(.1).rgbString()}}},{25:25,3:3,45:45}],28:[function(e,t,n){"use strict";function r(e,t){return e.native?{x:e.x,y:e.y}:u.getRelativePosition(e,t)}function i(e,t){var n,r,i,o,a;for(r=0,o=e.data.datasets.length;r<o;++r)if(e.isDatasetVisible(r))for(i=0,a=(n=e.getDatasetMeta(r)).data.length;i<a;++i){var s=n.data[i];s._view.skip||t(s)}}function o(e,t){var n=[];return i(e,function(e){e.inRange(t.x,t.y)&&n.push(e)}),n}function a(e,t,n,r){var o=Number.POSITIVE_INFINITY,a=[];return i(e,function(e){if(!n||e.inRange(t.x,t.y)){var i=e.getCenterPoint(),s=r(t,i);s<o?(a=[e],o=s):s===o&&a.push(e)}}),a}function s(e){var t=-1!==e.indexOf("x"),n=-1!==e.indexOf("y");return function(e,r){var i=t?Math.abs(e.x-r.x):0,o=n?Math.abs(e.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function l(e,t,n){var i=r(t,e);n.axis=n.axis||"x";var l=s(n.axis),u=n.intersect?o(e,i):a(e,i,!1,l),c=[];return u.length?(e.data.datasets.forEach(function(t,n){if(e.isDatasetVisible(n)){var r=e.getDatasetMeta(n).data[u[0]._index];r&&!r._view.skip&&c.push(r)}}),c):[]}var u=e(45);t.exports={modes:{single:function(e,t){var n=r(t,e),o=[];return i(e,function(e){if(e.inRange(n.x,n.y))return o.push(e),o}),o.slice(0,1)},label:l,index:l,dataset:function(e,t,n){var i=r(t,e);n.axis=n.axis||"xy";var l=s(n.axis),u=n.intersect?o(e,i):a(e,i,!1,l);return u.length>0&&(u=e.getDatasetMeta(u[0]._datasetIndex).data),u},"x-axis":function(e,t){return l(e,t,{intersect:!1})},point:function(e,t){return o(e,r(t,e))},nearest:function(e,t,n){var i=r(t,e);n.axis=n.axis||"xy";var o=s(n.axis),l=a(e,i,n.intersect,o);return l.length>1&&l.sort(function(e,t){var n=e.getArea()-t.getArea();return 0===n&&(n=e._datasetIndex-t._datasetIndex),n}),l.slice(0,1)},x:function(e,t,n){var o=r(t,e),a=[],s=!1;return i(e,function(e){e.inXRange(o.x)&&a.push(e),e.inRange(o.x,o.y)&&(s=!0)}),n.intersect&&!s&&(a=[]),a},y:function(e,t,n){var o=r(t,e),a=[],s=!1;return i(e,function(e){e.inYRange(o.y)&&a.push(e),e.inRange(o.x,o.y)&&(s=!0)}),n.intersect&&!s&&(a=[]),a}}}},{45:45}],29:[function(e,t,n){"use strict";e(25)._set("global",{responsive:!0,responsiveAnimationDuration:0,maintainAspectRatio:!0,events:["mousemove","mouseout","click","touchstart","touchmove"],hover:{onHover:null,mode:"nearest",intersect:!0,animationDuration:400},onClick:null,defaultColor:"rgba(0,0,0,0.1)",defaultFontColor:"#666",defaultFontFamily:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",defaultFontSize:12,defaultFontStyle:"normal",showLines:!0,elements:{},layout:{padding:{top:0,right:0,bottom:0,left:0}}}),t.exports=function(){var e=function(e,t){return this.construct(e,t),this};return e.Chart=e,e}},{25:25}],30:[function(e,t,n){"use strict";var r=e(45);t.exports=function(e){function t(e,t){return r.where(e,function(e){return e.position===t})}function n(e,t){e.forEach(function(e,t){return e._tmpIndex_=t,e}),e.sort(function(e,n){var r=t?n:e,i=t?e:n;return r.weight===i.weight?r._tmpIndex_-i._tmpIndex_:r.weight-i.weight}),e.forEach(function(e){delete e._tmpIndex_})}e.layoutService={defaults:{},addBox:function(e,t){e.boxes||(e.boxes=[]),t.fullWidth=t.fullWidth||!1,t.position=t.position||"top",t.weight=t.weight||0,e.boxes.push(t)},removeBox:function(e,t){var n=e.boxes?e.boxes.indexOf(t):-1;-1!==n&&e.boxes.splice(n,1)},configure:function(e,t,n){for(var r,i=["fullWidth","position","weight"],o=i.length,a=0;a<o;++a)r=i[a],n.hasOwnProperty(r)&&(t[r]=n[r])},update:function(e,i,o){function a(e){var t,n=e.isHorizontal();n?(t=e.update(e.fullWidth?w:$,S),M-=t.height):(t=e.update(k,C),$-=t.width),T.push({horizontal:n,minSize:t,box:e})}function s(e){var t=r.findNextWhere(T,function(t){return t.box===e});if(t)if(e.isHorizontal()){var n={left:Math.max(R,D),right:Math.max(P,E),top:0,bottom:0};e.update(e.fullWidth?w:$,_/2,n)}else e.update(t.minSize.width,M)}function l(e){var t=r.findNextWhere(T,function(t){return t.box===e}),n={left:0,right:0,top:F,bottom:O};t&&e.update(t.minSize.width,M,n)}function u(e){e.isHorizontal()?(e.left=e.fullWidth?f:R,e.right=e.fullWidth?i-p:R+$,e.top=H,e.bottom=H+e.height,H=e.bottom):(e.left=z,e.right=z+e.width,e.top=F,e.bottom=F+M,z=e.right)}if(e){var c=e.options.layout||{},d=r.options.toPadding(c.padding),f=d.left,p=d.right,h=d.top,g=d.bottom,m=t(e.boxes,"left"),v=t(e.boxes,"right"),y=t(e.boxes,"top"),b=t(e.boxes,"bottom"),x=t(e.boxes,"chartArea");n(m,!0),n(v,!1),n(y,!0),n(b,!1);var w=i-f-p,_=o-h-g,C=_/2,k=(i-w/2)/(m.length+v.length),S=(o-C)/(y.length+b.length),$=w,M=_,T=[];r.each(m.concat(v,y,b),a);var D=0,E=0,L=0,A=0;r.each(y.concat(b),function(e){if(e.getPadding){var t=e.getPadding();D=Math.max(D,t.left),E=Math.max(E,t.right)}}),r.each(m.concat(v),function(e){if(e.getPadding){var t=e.getPadding();L=Math.max(L,t.top),A=Math.max(A,t.bottom)}});var R=f,P=p,F=h,O=g;r.each(m.concat(v),s),r.each(m,function(e){R+=e.width}),r.each(v,function(e){P+=e.width}),r.each(y.concat(b),s),r.each(y,function(e){F+=e.height}),r.each(b,function(e){O+=e.height}),r.each(m.concat(v),l),R=f,P=p,F=h,O=g,r.each(m,function(e){R+=e.width}),r.each(v,function(e){P+=e.width}),r.each(y,function(e){F+=e.height}),r.each(b,function(e){O+=e.height});var N=Math.max(D-R,0);R+=N,P+=Math.max(E-P,0);var I=Math.max(L-F,0);F+=I,O+=Math.max(A-O,0);var j=o-F-O,Y=i-R-P;Y===$&&j===M||(r.each(m,function(e){e.height=j}),r.each(v,function(e){e.height=j}),r.each(y,function(e){e.fullWidth||(e.width=Y)}),r.each(b,function(e){e.fullWidth||(e.width=Y)}),M=j,$=Y);var z=f+N,H=h+I;r.each(m.concat(y),u),z+=$,H+=M,r.each(v,u),r.each(b,u),e.chartArea={left:R,top:F,right:R+$,bottom:F+M},r.each(x,function(t){t.left=e.chartArea.left,t.top=e.chartArea.top,t.right=e.chartArea.right,t.bottom=e.chartArea.bottom,t.update($,M)})}}}}},{45:45}],31:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{plugins:{}}),t.exports=function(e){e.plugins={_plugins:[],_cacheId:0,register:function(e){var t=this._plugins;[].concat(e).forEach(function(e){-1===t.indexOf(e)&&t.push(e)}),this._cacheId++},unregister:function(e){var t=this._plugins;[].concat(e).forEach(function(e){var n=t.indexOf(e);-1!==n&&t.splice(n,1)}),this._cacheId++},clear:function(){this._plugins=[],this._cacheId++},count:function(){return this._plugins.length},getAll:function(){return this._plugins},notify:function(e,t,n){var r,i,o,a,s,l=this.descriptors(e),u=l.length;for(r=0;r<u;++r)if(i=l[r],o=i.plugin,"function"==typeof(s=o[t])&&((a=[e].concat(n||[])).push(i.options),!1===s.apply(o,a)))return!1;return!0},descriptors:function(e){var t=e._plugins||(e._plugins={});if(t.id===this._cacheId)return t.descriptors;var n=[],i=[],a=e&&e.config||{},s=a.options&&a.options.plugins||{};return this._plugins.concat(a.plugins||[]).forEach(function(e){if(-1===n.indexOf(e)){var t=e.id,a=s[t];!1!==a&&(!0===a&&(a=o.clone(r.global.plugins[t])),n.push(e),i.push({plugin:e,options:a||{}}))}}),t.descriptors=i,t.id=this._cacheId,i}},e.pluginService=e.plugins,e.PluginBase=i.extend({})}},{25:25,26:26,45:45}],32:[function(e,t,n){"use strict";function r(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(e[t].label);return r}function i(e,t,n){var r=e.getPixelForTick(t);return n&&(r-=0===t?(e.getPixelForTick(1)-r)/2:(r-e.getPixelForTick(t-1))/2),r}var o=e(25),a=e(26),s=e(45),l=e(34);o._set("scale",{display:!0,position:"left",offset:!1,gridLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1,drawBorder:!0,drawOnChartArea:!0,drawTicks:!0,tickMarkLength:10,zeroLineWidth:1,zeroLineColor:"rgba(0,0,0,0.25)",zeroLineBorderDash:[],zeroLineBorderDashOffset:0,offsetGridLines:!1,borderDash:[],borderDashOffset:0},scaleLabel:{display:!1,labelString:"",lineHeight:1.2,padding:{top:4,bottom:4}},ticks:{beginAtZero:!1,minRotation:0,maxRotation:50,mirror:!1,padding:0,reverse:!1,display:!0,autoSkip:!0,autoSkipPadding:0,labelOffset:0,callback:l.formatters.values,minor:{},major:{}}}),t.exports=function(e){function t(e,t,n){return s.isArray(t)?s.longestText(e,n,t):e.measureText(t).width}function n(e){var t=s.valueOrDefault,n=o.global,r=t(e.fontSize,n.defaultFontSize),i=t(e.fontStyle,n.defaultFontStyle),a=t(e.fontFamily,n.defaultFontFamily);return{size:r,style:i,family:a,font:s.fontString(r,i,a)}}function l(e){return s.options.toLineHeight(s.valueOrDefault(e.lineHeight,1.2),s.valueOrDefault(e.fontSize,o.global.defaultFontSize))}e.Scale=a.extend({getPadding:function(){var e=this;return{left:e.paddingLeft||0,top:e.paddingTop||0,right:e.paddingRight||0,bottom:e.paddingBottom||0}},getTicks:function(){return this._ticks},mergeTicksOptions:function(){var e=this.options.ticks;!1===e.minor&&(e.minor={display:!1}),!1===e.major&&(e.major={display:!1});for(var t in e)"major"!==t&&"minor"!==t&&(void 0===e.minor[t]&&(e.minor[t]=e[t]),void 0===e.major[t]&&(e.major[t]=e[t]))},beforeUpdate:function(){s.callback(this.options.beforeUpdate,[this])},update:function(e,t,n){var r,i,o,a,l,u,c=this;for(c.beforeUpdate(),c.maxWidth=e,c.maxHeight=t,c.margins=s.extend({left:0,right:0,top:0,bottom:0},n),c.longestTextCache=c.longestTextCache||{},c.beforeSetDimensions(),c.setDimensions(),c.afterSetDimensions(),c.beforeDataLimits(),c.determineDataLimits(),c.afterDataLimits(),c.beforeBuildTicks(),l=c.buildTicks()||[],c.afterBuildTicks(),c.beforeTickToLabelConversion(),o=c.convertTicksToLabels(l)||c.ticks,c.afterTickToLabelConversion(),c.ticks=o,r=0,i=o.length;r<i;++r)a=o[r],(u=l[r])?u.label=a:l.push(u={label:a,major:!1});return c._ticks=l,c.beforeCalculateTickRotation(),c.calculateTickRotation(),c.afterCalculateTickRotation(),c.beforeFit(),c.fit(),c.afterFit(),c.afterUpdate(),c.minSize},afterUpdate:function(){s.callback(this.options.afterUpdate,[this])},beforeSetDimensions:function(){s.callback(this.options.beforeSetDimensions,[this])},setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0},afterSetDimensions:function(){s.callback(this.options.afterSetDimensions,[this])},beforeDataLimits:function(){s.callback(this.options.beforeDataLimits,[this])},determineDataLimits:s.noop,afterDataLimits:function(){s.callback(this.options.afterDataLimits,[this])},beforeBuildTicks:function(){s.callback(this.options.beforeBuildTicks,[this])},buildTicks:s.noop,afterBuildTicks:function(){s.callback(this.options.afterBuildTicks,[this])},beforeTickToLabelConversion:function(){s.callback(this.options.beforeTickToLabelConversion,[this])},convertTicksToLabels:function(){var e=this,t=e.options.ticks;e.ticks=e.ticks.map(t.userCallback||t.callback,this)},afterTickToLabelConversion:function(){s.callback(this.options.afterTickToLabelConversion,[this])},beforeCalculateTickRotation:function(){s.callback(this.options.beforeCalculateTickRotation,[this])},calculateTickRotation:function(){var e=this,t=e.ctx,i=e.options.ticks,o=r(e._ticks),a=n(i);t.font=a.font;var l=i.minRotation||0;if(o.length&&e.options.display&&e.isHorizontal())for(var u,c=s.longestText(t,a.font,o,e.longestTextCache),d=c,f=e.getPixelForTick(1)-e.getPixelForTick(0)-6;d>f&&l<i.maxRotation;){var p=s.toRadians(l);if(u=Math.cos(p),Math.sin(p)*c>e.maxHeight){l--;break}l++,d=u*c}e.labelRotation=l},afterCalculateTickRotation:function(){s.callback(this.options.afterCalculateTickRotation,[this])},beforeFit:function(){s.callback(this.options.beforeFit,[this])},fit:function(){var e=this,i=e.minSize={width:0,height:0},o=r(e._ticks),a=e.options,u=a.ticks,c=a.scaleLabel,d=a.gridLines,f=a.display,p=e.isHorizontal(),h=n(u),g=a.gridLines.tickMarkLength;if(i.width=p?e.isFullWidth()?e.maxWidth-e.margins.left-e.margins.right:e.maxWidth:f&&d.drawTicks?g:0,i.height=p?f&&d.drawTicks?g:0:e.maxHeight,c.display&&f){var m=l(c)+s.options.toPadding(c.padding).height;p?i.height+=m:i.width+=m}if(u.display&&f){var v=s.longestText(e.ctx,h.font,o,e.longestTextCache),y=s.numberOfLabelLines(o),b=.5*h.size,x=e.options.ticks.padding;if(p){e.longestLabelWidth=v;var w=s.toRadians(e.labelRotation),_=Math.cos(w),C=Math.sin(w)*v+h.size*y+b*(y-1)+b;i.height=Math.min(e.maxHeight,i.height+C+x),e.ctx.font=h.font;var k=t(e.ctx,o[0],h.font),S=t(e.ctx,o[o.length-1],h.font);0!==e.labelRotation?(e.paddingLeft="bottom"===a.position?_*k+3:_*b+3,e.paddingRight="bottom"===a.position?_*b+3:_*S+3):(e.paddingLeft=k/2+3,e.paddingRight=S/2+3)}else u.mirror?v=0:v+=x+b,i.width=Math.min(e.maxWidth,i.width+v),e.paddingTop=h.size/2,e.paddingBottom=h.size/2}e.handleMargins(),e.width=i.width,e.height=i.height},handleMargins:function(){var e=this;e.margins&&(e.paddingLeft=Math.max(e.paddingLeft-e.margins.left,0),e.paddingTop=Math.max(e.paddingTop-e.margins.top,0),e.paddingRight=Math.max(e.paddingRight-e.margins.right,0),e.paddingBottom=Math.max(e.paddingBottom-e.margins.bottom,0))},afterFit:function(){s.callback(this.options.afterFit,[this])},isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},isFullWidth:function(){return this.options.fullWidth},getRightValue:function(e){if(s.isNullOrUndef(e))return NaN;if("number"==typeof e&&!isFinite(e))return NaN;if(e)if(this.isHorizontal()){if(void 0!==e.x)return this.getRightValue(e.x)}else if(void 0!==e.y)return this.getRightValue(e.y);return e},getLabelForIndex:s.noop,getPixelForValue:s.noop,getValueForPixel:s.noop,getPixelForTick:function(e){var t=this,n=t.options.offset;if(t.isHorizontal()){var r=(t.width-(t.paddingLeft+t.paddingRight))/Math.max(t._ticks.length-(n?0:1),1),i=r*e+t.paddingLeft;n&&(i+=r/2);var o=t.left+Math.round(i);return o+=t.isFullWidth()?t.margins.left:0}var a=t.height-(t.paddingTop+t.paddingBottom);return t.top+e*(a/(t._ticks.length-1))},getPixelForDecimal:function(e){var t=this;if(t.isHorizontal()){var n=(t.width-(t.paddingLeft+t.paddingRight))*e+t.paddingLeft,r=t.left+Math.round(n);return r+=t.isFullWidth()?t.margins.left:0}return t.top+e*t.height},getBasePixel:function(){return this.getPixelForValue(this.getBaseValue())},getBaseValue:function(){var e=this,t=e.min,n=e.max;return e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0},_autoSkip:function(e){var t,n,r,i,o=this,a=o.isHorizontal(),l=o.options.ticks.minor,u=e.length,c=s.toRadians(o.labelRotation),d=Math.cos(c),f=o.longestLabelWidth*d,p=[];for(l.maxTicksLimit&&(i=l.maxTicksLimit),a&&(t=!1,(f+l.autoSkipPadding)*u>o.width-(o.paddingLeft+o.paddingRight)&&(t=1+Math.floor((f+l.autoSkipPadding)*u/(o.width-(o.paddingLeft+o.paddingRight)))),i&&u>i&&(t=Math.max(t,Math.floor(u/i)))),n=0;n<u;n++)r=e[n],(t>1&&n%t>0||n%t==0&&n+t>=u)&&n!==u-1&&delete r.label,p.push(r);return p},draw:function(e){var t=this,r=t.options;if(r.display){var a=t.ctx,u=o.global,c=r.ticks.minor,d=r.ticks.major||c,f=r.gridLines,p=r.scaleLabel,h=0!==t.labelRotation,g=t.isHorizontal(),m=c.autoSkip?t._autoSkip(t.getTicks()):t.getTicks(),v=s.valueOrDefault(c.fontColor,u.defaultFontColor),y=n(c),b=s.valueOrDefault(d.fontColor,u.defaultFontColor),x=n(d),w=f.drawTicks?f.tickMarkLength:0,_=s.valueOrDefault(p.fontColor,u.defaultFontColor),C=n(p),k=s.options.toPadding(p.padding),S=s.toRadians(t.labelRotation),$=[],M="right"===r.position?t.left:t.right-w,T="right"===r.position?t.left+w:t.right,D="bottom"===r.position?t.top:t.bottom-w,E="bottom"===r.position?t.top+w:t.bottom;if(s.each(m,function(n,o){if(!s.isNullOrUndef(n.label)){var a,l,d,p,v=n.label;o===t.zeroLineIndex&&r.offset===f.offsetGridLines?(a=f.zeroLineWidth,l=f.zeroLineColor,d=f.zeroLineBorderDash,p=f.zeroLineBorderDashOffset):(a=s.valueAtIndexOrDefault(f.lineWidth,o),l=s.valueAtIndexOrDefault(f.color,o),d=s.valueOrDefault(f.borderDash,u.borderDash),p=s.valueOrDefault(f.borderDashOffset,u.borderDashOffset));var y,b,x,_,C,k,L,A,R,P,F="middle",O="middle",N=c.padding;if(g){var I=w+N;"bottom"===r.position?(O=h?"middle":"top",F=h?"right":"center",P=t.top+I):(O=h?"middle":"bottom",F=h?"left":"center",P=t.bottom-I);var j=i(t,o,f.offsetGridLines&&m.length>1);j<t.left&&(l="rgba(0,0,0,0)"),j+=s.aliasPixel(a),R=t.getPixelForTick(o)+c.labelOffset,y=x=C=L=j,b=D,_=E,k=e.top,A=e.bottom}else{var Y,z="left"===r.position;c.mirror?(F=z?"left":"right",Y=N):(F=z?"right":"left",Y=w+N),R=z?t.right-Y:t.left+Y;var H=i(t,o,f.offsetGridLines&&m.length>1);H<t.top&&(l="rgba(0,0,0,0)"),H+=s.aliasPixel(a),P=t.getPixelForTick(o)+c.labelOffset,y=M,x=T,C=e.left,L=e.right,b=_=k=A=H}$.push({tx1:y,ty1:b,tx2:x,ty2:_,x1:C,y1:k,x2:L,y2:A,labelX:R,labelY:P,glWidth:a,glColor:l,glBorderDash:d,glBorderDashOffset:p,rotation:-1*S,label:v,major:n.major,textBaseline:O,textAlign:F})}}),s.each($,function(e){if(f.display&&(a.save(),a.lineWidth=e.glWidth,a.strokeStyle=e.glColor,a.setLineDash&&(a.setLineDash(e.glBorderDash),a.lineDashOffset=e.glBorderDashOffset),a.beginPath(),f.drawTicks&&(a.moveTo(e.tx1,e.ty1),a.lineTo(e.tx2,e.ty2)),f.drawOnChartArea&&(a.moveTo(e.x1,e.y1),a.lineTo(e.x2,e.y2)),a.stroke(),a.restore()),c.display){a.save(),a.translate(e.labelX,e.labelY),a.rotate(e.rotation),a.font=e.major?x.font:y.font,a.fillStyle=e.major?b:v,a.textBaseline=e.textBaseline,a.textAlign=e.textAlign;var t=e.label;if(s.isArray(t))for(var n=0,r=0;n<t.length;++n)a.fillText(""+t[n],0,r),r+=1.5*y.size;else a.fillText(t,0,0);a.restore()}}),p.display){var L,A,R=0,P=l(p)/2;if(g)L=t.left+(t.right-t.left)/2,A="bottom"===r.position?t.bottom-P-k.bottom:t.top+P+k.top;else{var F="left"===r.position;L=F?t.left+P+k.top:t.right-P-k.top,A=t.top+(t.bottom-t.top)/2,R=F?-.5*Math.PI:.5*Math.PI}a.save(),a.translate(L,A),a.rotate(R),a.textAlign="center",a.textBaseline="middle",a.fillStyle=_,a.font=C.font,a.fillText(p.labelString,0,0),a.restore()}if(f.drawBorder){a.lineWidth=s.valueAtIndexOrDefault(f.lineWidth,0),a.strokeStyle=s.valueAtIndexOrDefault(f.color,0);var O=t.left,N=t.right,I=t.top,j=t.bottom,Y=s.aliasPixel(a.lineWidth);g?(I=j="top"===r.position?t.bottom:t.top,I+=Y,j+=Y):(O=N="left"===r.position?t.right:t.left,O+=Y,N+=Y),a.beginPath(),a.moveTo(O,I),a.lineTo(N,j),a.stroke()}}}})}},{25:25,26:26,34:34,45:45}],33:[function(e,t,n){"use strict";var r=e(25),i=e(45);t.exports=function(e){e.scaleService={constructors:{},defaults:{},registerScaleType:function(e,t,n){this.constructors[e]=t,this.defaults[e]=i.clone(n)},getScaleConstructor:function(e){return this.constructors.hasOwnProperty(e)?this.constructors[e]:void 0},getScaleDefaults:function(e){return this.defaults.hasOwnProperty(e)?i.merge({},[r.scale,this.defaults[e]]):{}},updateScaleDefaults:function(e,t){var n=this;n.defaults.hasOwnProperty(e)&&(n.defaults[e]=i.extend(n.defaults[e],t))},addScalesToLayout:function(t){i.each(t.scales,function(n){n.fullWidth=n.options.fullWidth,n.position=n.options.position,n.weight=n.options.weight,e.layoutService.addBox(t,n)})}}}},{25:25,45:45}],34:[function(e,t,n){"use strict";var r=e(45);t.exports={generators:{linear:function(e,t){var n,i=[];if(e.stepSize&&e.stepSize>0)n=e.stepSize;else{var o=r.niceNum(t.max-t.min,!1);n=r.niceNum(o/(e.maxTicks-1),!0)}var a=Math.floor(t.min/n)*n,s=Math.ceil(t.max/n)*n;e.min&&e.max&&e.stepSize&&r.almostWhole((e.max-e.min)/e.stepSize,n/1e3)&&(a=e.min,s=e.max);var l=(s-a)/n;l=r.almostEquals(l,Math.round(l),n/1e3)?Math.round(l):Math.ceil(l),i.push(void 0!==e.min?e.min:a);for(var u=1;u<l;++u)i.push(a+u*n);return i.push(void 0!==e.max?e.max:s),i},logarithmic:function(e,t){var n,i,o=[],a=r.valueOrDefault,s=a(e.min,Math.pow(10,Math.floor(r.log10(t.min)))),l=Math.floor(r.log10(t.max)),u=Math.ceil(t.max/Math.pow(10,l));0===s?(n=Math.floor(r.log10(t.minNotZero)),i=Math.floor(t.minNotZero/Math.pow(10,n)),o.push(s),s=i*Math.pow(10,n)):(n=Math.floor(r.log10(s)),i=Math.floor(s/Math.pow(10,n)));do{o.push(s),10===++i&&(i=1,++n),s=i*Math.pow(10,n)}while(n<l||n===l&&i<u);var c=a(e.max,s);return o.push(c),o}},formatters:{values:function(e){return r.isArray(e)?e:""+e},linear:function(e,t,n){var i=n.length>3?n[2]-n[1]:n[1]-n[0];Math.abs(i)>1&&e!==Math.floor(e)&&(i=e-Math.floor(e));var o=r.log10(Math.abs(i)),a="";if(0!==e){var s=-1*Math.floor(o);s=Math.max(Math.min(s,20),0),a=e.toFixed(s)}else a="0";return a},logarithmic:function(e,t,n){var i=e/Math.pow(10,Math.floor(r.log10(e)));return 0===e?"0":1===i||2===i||5===i||0===t||t===n.length-1?e.toExponential():""}}}},{45:45}],35:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{tooltips:{enabled:!0,custom:null,mode:"nearest",position:"average",intersect:!0,backgroundColor:"rgba(0,0,0,0.8)",titleFontStyle:"bold",titleSpacing:2,titleMarginBottom:6,titleFontColor:"#fff",titleAlign:"left",bodySpacing:2,bodyFontColor:"#fff",bodyAlign:"left",footerFontStyle:"bold",footerSpacing:2,footerMarginTop:6,footerFontColor:"#fff",footerAlign:"left",yPadding:6,xPadding:6,caretPadding:2,caretSize:5,cornerRadius:6,multiKeyBackground:"#fff",displayColors:!0,borderColor:"rgba(0,0,0,0)",borderWidth:0,callbacks:{beforeTitle:o.noop,title:function(e,t){var n="",r=t.labels,i=r?r.length:0;if(e.length>0){var o=e[0];o.xLabel?n=o.xLabel:i>0&&o.index<i&&(n=r[o.index])}return n},afterTitle:o.noop,beforeBody:o.noop,beforeLabel:o.noop,label:function(e,t){var n=t.datasets[e.datasetIndex].label||"";return n&&(n+=": "),n+=e.yLabel},labelColor:function(e,t){var n=t.getDatasetMeta(e.datasetIndex).data[e.index]._view;return{borderColor:n.borderColor,backgroundColor:n.backgroundColor}},labelTextColor:function(){return this._options.bodyFontColor},afterLabel:o.noop,afterBody:o.noop,beforeFooter:o.noop,footer:o.noop,afterFooter:o.noop}}}),t.exports=function(e){function t(e,t){var n=o.color(e);return n.alpha(t*n.alpha()).rgbaString()}function n(e,t){return t&&(o.isArray(t)?Array.prototype.push.apply(e,t):e.push(t)),e}function a(e){var t=e._xScale,n=e._yScale||e._scale,r=e._index,i=e._datasetIndex;return{xLabel:t?t.getLabelForIndex(r,i):"",yLabel:n?n.getLabelForIndex(r,i):"",index:r,datasetIndex:i,x:e._model.x,y:e._model.y}}function s(e){var t=r.global,n=o.valueOrDefault;return{xPadding:e.xPadding,yPadding:e.yPadding,xAlign:e.xAlign,yAlign:e.yAlign,bodyFontColor:e.bodyFontColor,_bodyFontFamily:n(e.bodyFontFamily,t.defaultFontFamily),_bodyFontStyle:n(e.bodyFontStyle,t.defaultFontStyle),_bodyAlign:e.bodyAlign,bodyFontSize:n(e.bodyFontSize,t.defaultFontSize),bodySpacing:e.bodySpacing,titleFontColor:e.titleFontColor,_titleFontFamily:n(e.titleFontFamily,t.defaultFontFamily),_titleFontStyle:n(e.titleFontStyle,t.defaultFontStyle),titleFontSize:n(e.titleFontSize,t.defaultFontSize),_titleAlign:e.titleAlign,titleSpacing:e.titleSpacing,titleMarginBottom:e.titleMarginBottom,footerFontColor:e.footerFontColor,_footerFontFamily:n(e.footerFontFamily,t.defaultFontFamily),_footerFontStyle:n(e.footerFontStyle,t.defaultFontStyle),footerFontSize:n(e.footerFontSize,t.defaultFontSize),_footerAlign:e.footerAlign,footerSpacing:e.footerSpacing,footerMarginTop:e.footerMarginTop,caretSize:e.caretSize,cornerRadius:e.cornerRadius,backgroundColor:e.backgroundColor,opacity:0,legendColorBackground:e.multiKeyBackground,displayColors:e.displayColors,borderColor:e.borderColor,borderWidth:e.borderWidth}}function l(e,t){var n=e._chart.ctx,r=2*t.yPadding,i=0,a=t.body,s=a.reduce(function(e,t){return e+t.before.length+t.lines.length+t.after.length},0);s+=t.beforeBody.length+t.afterBody.length;var l=t.title.length,u=t.footer.length,c=t.titleFontSize,d=t.bodyFontSize,f=t.footerFontSize;r+=l*c,r+=l?(l-1)*t.titleSpacing:0,r+=l?t.titleMarginBottom:0,r+=s*d,r+=s?(s-1)*t.bodySpacing:0,r+=u?t.footerMarginTop:0,r+=u*f,r+=u?(u-1)*t.footerSpacing:0;var p=0,h=function(e){i=Math.max(i,n.measureText(e).width+p)};return n.font=o.fontString(c,t._titleFontStyle,t._titleFontFamily),o.each(t.title,h),n.font=o.fontString(d,t._bodyFontStyle,t._bodyFontFamily),o.each(t.beforeBody.concat(t.afterBody),h),p=t.displayColors?d+2:0,o.each(a,function(e){o.each(e.before,h),o.each(e.lines,h),o.each(e.after,h)}),p=0,n.font=o.fontString(f,t._footerFontStyle,t._footerFontFamily),o.each(t.footer,h),i+=2*t.xPadding,{width:i,height:r}}function u(e,t){var n=e._model,r=e._chart,i=e._chart.chartArea,o="center",a="center";n.y<t.height?a="top":n.y>r.height-t.height&&(a="bottom");var s,l,u,c,d,f=(i.left+i.right)/2,p=(i.top+i.bottom)/2;"center"===a?(s=function(e){return e<=f},l=function(e){return e>f}):(s=function(e){return e<=t.width/2},l=function(e){return e>=r.width-t.width/2}),u=function(e){return e+t.width>r.width},c=function(e){return e-t.width<0},d=function(e){return e<=p?"top":"bottom"},s(n.x)?(o="left",u(n.x)&&(o="center",a=d(n.y))):l(n.x)&&(o="right",c(n.x)&&(o="center",a=d(n.y)));var h=e._options;return{xAlign:h.xAlign?h.xAlign:o,yAlign:h.yAlign?h.yAlign:a}}function c(e,t,n){var r=e.x,i=e.y,o=e.caretSize,a=e.caretPadding,s=e.cornerRadius,l=n.xAlign,u=n.yAlign,c=o+a,d=s+a;return"right"===l?r-=t.width:"center"===l&&(r-=t.width/2),"top"===u?i+=c:i-="bottom"===u?t.height+c:t.height/2,"center"===u?"left"===l?r+=c:"right"===l&&(r-=c):"left"===l?r-=d:"right"===l&&(r+=d),{x:r,y:i}}e.Tooltip=i.extend({initialize:function(){this._model=s(this._options),this._lastActive=[]},getTitle:function(){var e=this,t=e._options.callbacks,r=t.beforeTitle.apply(e,arguments),i=t.title.apply(e,arguments),o=t.afterTitle.apply(e,arguments),a=[];return a=n(a,r),a=n(a,i),a=n(a,o)},getBeforeBody:function(){var e=this._options.callbacks.beforeBody.apply(this,arguments);return o.isArray(e)?e:void 0!==e?[e]:[]},getBody:function(e,t){var r=this,i=r._options.callbacks,a=[];return o.each(e,function(e){var o={before:[],lines:[],after:[]};n(o.before,i.beforeLabel.call(r,e,t)),n(o.lines,i.label.call(r,e,t)),n(o.after,i.afterLabel.call(r,e,t)),a.push(o)}),a},getAfterBody:function(){var e=this._options.callbacks.afterBody.apply(this,arguments);return o.isArray(e)?e:void 0!==e?[e]:[]},getFooter:function(){var e=this,t=e._options.callbacks,r=t.beforeFooter.apply(e,arguments),i=t.footer.apply(e,arguments),o=t.afterFooter.apply(e,arguments),a=[];return a=n(a,r),a=n(a,i),a=n(a,o)},update:function(t){var n,r,i=this,d=i._options,f=i._model,p=i._model=s(d),h=i._active,g=i._data,m={xAlign:f.xAlign,yAlign:f.yAlign},v={x:f.x,y:f.y},y={width:f.width,height:f.height},b={x:f.caretX,y:f.caretY};if(h.length){p.opacity=1;var x=[],w=[];b=e.Tooltip.positioners[d.position].call(i,h,i._eventPosition);var _=[];for(n=0,r=h.length;n<r;++n)_.push(a(h[n]));d.filter&&(_=_.filter(function(e){return d.filter(e,g)})),d.itemSort&&(_=_.sort(function(e,t){return d.itemSort(e,t,g)})),o.each(_,function(e){x.push(d.callbacks.labelColor.call(i,e,i._chart)),w.push(d.callbacks.labelTextColor.call(i,e,i._chart))}),p.title=i.getTitle(_,g),p.beforeBody=i.getBeforeBody(_,g),p.body=i.getBody(_,g),p.afterBody=i.getAfterBody(_,g),p.footer=i.getFooter(_,g),p.x=Math.round(b.x),p.y=Math.round(b.y),p.caretPadding=d.caretPadding,p.labelColors=x,p.labelTextColors=w,p.dataPoints=_,v=c(p,y=l(this,p),m=u(this,y))}else p.opacity=0;return p.xAlign=m.xAlign,p.yAlign=m.yAlign,p.x=v.x,p.y=v.y,p.width=y.width,p.height=y.height,p.caretX=b.x,p.caretY=b.y,i._model=p,t&&d.custom&&d.custom.call(i,p),i},drawCaret:function(e,t){var n=this._chart.ctx,r=this._view,i=this.getCaretPosition(e,t,r);n.lineTo(i.x1,i.y1),n.lineTo(i.x2,i.y2),n.lineTo(i.x3,i.y3)},getCaretPosition:function(e,t,n){var r,i,o,a,s,l,u=n.caretSize,c=n.cornerRadius,d=n.xAlign,f=n.yAlign,p=e.x,h=e.y,g=t.width,m=t.height;if("center"===f)s=h+m/2,"left"===d?(i=(r=p)-u,o=r,a=s+u,l=s-u):(i=(r=p+g)+u,o=r,a=s-u,l=s+u);else if("left"===d?(r=(i=p+c+u)-u,o=i+u):"right"===d?(r=(i=p+g-c-u)-u,o=i+u):(r=(i=p+g/2)-u,o=i+u),"top"===f)s=(a=h)-u,l=a;else{s=(a=h+m)+u,l=a;var v=o;o=r,r=v}return{x1:r,x2:i,x3:o,y1:a,y2:s,y3:l}},drawTitle:function(e,n,r,i){var a=n.title;if(a.length){r.textAlign=n._titleAlign,r.textBaseline="top";var s=n.titleFontSize,l=n.titleSpacing;r.fillStyle=t(n.titleFontColor,i),r.font=o.fontString(s,n._titleFontStyle,n._titleFontFamily);var u,c;for(u=0,c=a.length;u<c;++u)r.fillText(a[u],e.x,e.y),e.y+=s+l,u+1===a.length&&(e.y+=n.titleMarginBottom-l)}},drawBody:function(e,n,r,i){var a=n.bodyFontSize,s=n.bodySpacing,l=n.body;r.textAlign=n._bodyAlign,r.textBaseline="top",r.font=o.fontString(a,n._bodyFontStyle,n._bodyFontFamily);var u=0,c=function(t){r.fillText(t,e.x+u,e.y),e.y+=a+s};r.fillStyle=t(n.bodyFontColor,i),o.each(n.beforeBody,c);var d=n.displayColors;u=d?a+2:0,o.each(l,function(s,l){var u=t(n.labelTextColors[l],i);r.fillStyle=u,o.each(s.before,c),o.each(s.lines,function(o){d&&(r.fillStyle=t(n.legendColorBackground,i),r.fillRect(e.x,e.y,a,a),r.lineWidth=1,r.strokeStyle=t(n.labelColors[l].borderColor,i),r.strokeRect(e.x,e.y,a,a),r.fillStyle=t(n.labelColors[l].backgroundColor,i),r.fillRect(e.x+1,e.y+1,a-2,a-2),r.fillStyle=u),c(o)}),o.each(s.after,c)}),u=0,o.each(n.afterBody,c),e.y-=s},drawFooter:function(e,n,r,i){var a=n.footer;a.length&&(e.y+=n.footerMarginTop,r.textAlign=n._footerAlign,r.textBaseline="top",r.fillStyle=t(n.footerFontColor,i),r.font=o.fontString(n.footerFontSize,n._footerFontStyle,n._footerFontFamily),o.each(a,function(t){r.fillText(t,e.x,e.y),e.y+=n.footerFontSize+n.footerSpacing}))},drawBackground:function(e,n,r,i,o){r.fillStyle=t(n.backgroundColor,o),r.strokeStyle=t(n.borderColor,o),r.lineWidth=n.borderWidth;var a=n.xAlign,s=n.yAlign,l=e.x,u=e.y,c=i.width,d=i.height,f=n.cornerRadius;r.beginPath(),r.moveTo(l+f,u),"top"===s&&this.drawCaret(e,i),r.lineTo(l+c-f,u),r.quadraticCurveTo(l+c,u,l+c,u+f),"center"===s&&"right"===a&&this.drawCaret(e,i),r.lineTo(l+c,u+d-f),r.quadraticCurveTo(l+c,u+d,l+c-f,u+d),"bottom"===s&&this.drawCaret(e,i),r.lineTo(l+f,u+d),r.quadraticCurveTo(l,u+d,l,u+d-f),"center"===s&&"left"===a&&this.drawCaret(e,i),r.lineTo(l,u+f),r.quadraticCurveTo(l,u,l+f,u),r.closePath(),r.fill(),n.borderWidth>0&&r.stroke()},draw:function(){var e=this._chart.ctx,t=this._view;if(0!==t.opacity){var n={width:t.width,height:t.height},r={x:t.x,y:t.y},i=Math.abs(t.opacity<.001)?0:t.opacity,o=t.title.length||t.beforeBody.length||t.body.length||t.afterBody.length||t.footer.length;this._options.enabled&&o&&(this.drawBackground(r,t,e,n,i),r.x+=t.xPadding,r.y+=t.yPadding,this.drawTitle(r,t,e,i),this.drawBody(r,t,e,i),this.drawFooter(r,t,e,i))}},handleEvent:function(e){var t=this,n=t._options,r=!1;if(t._lastActive=t._lastActive||[],"mouseout"===e.type?t._active=[]:t._active=t._chart.getElementsAtEventForMode(e,n.mode,n),!(r=!o.arrayEquals(t._active,t._lastActive)))return!1;if(t._lastActive=t._active,n.enabled||n.custom){t._eventPosition={x:e.x,y:e.y};var i=t._model;t.update(!0),t.pivot(),r|=i.x!==t._model.x||i.y!==t._model.y}return r}}),e.Tooltip.positioners={average:function(e){if(!e.length)return!1;var t,n,r=0,i=0,o=0;for(t=0,n=e.length;t<n;++t){var a=e[t];if(a&&a.hasValue()){var s=a.tooltipPosition();r+=s.x,i+=s.y,++o}}return{x:Math.round(r/o),y:Math.round(i/o)}},nearest:function(e,t){var n,r,i,a=t.x,s=t.y,l=Number.POSITIVE_INFINITY;for(n=0,r=e.length;n<r;++n){var u=e[n];if(u&&u.hasValue()){var c=u.getCenterPoint(),d=o.distanceBetweenPoints(t,c);d<l&&(l=d,i=u)}}if(i){var f=i.tooltipPosition();a=f.x,s=f.y}return{x:a,y:s}}}}},{25:25,26:26,45:45}],36:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{elements:{arc:{backgroundColor:r.global.defaultColor,borderColor:"#fff",borderWidth:2}}}),t.exports=i.extend({inLabelRange:function(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hoverRadius,2)},inRange:function(e,t){var n=this._view;if(n){for(var r=o.getAngleFromPoint(n,{x:e,y:t}),i=r.angle,a=r.distance,s=n.startAngle,l=n.endAngle;l<s;)l+=2*Math.PI;for(;i>l;)i-=2*Math.PI;for(;i<s;)i+=2*Math.PI;var u=i>=s&&i<=l,c=a>=n.innerRadius&&a<=n.outerRadius;return u&&c}return!1},getCenterPoint:function(){var e=this._view,t=(e.startAngle+e.endAngle)/2,n=(e.innerRadius+e.outerRadius)/2;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},getArea:function(){var e=this._view;return Math.PI*((e.endAngle-e.startAngle)/(2*Math.PI))*(Math.pow(e.outerRadius,2)-Math.pow(e.innerRadius,2))},tooltipPosition:function(){var e=this._view,t=e.startAngle+(e.endAngle-e.startAngle)/2,n=(e.outerRadius-e.innerRadius)/2+e.innerRadius;return{x:e.x+Math.cos(t)*n,y:e.y+Math.sin(t)*n}},draw:function(){var e=this._chart.ctx,t=this._view,n=t.startAngle,r=t.endAngle;e.beginPath(),e.arc(t.x,t.y,t.outerRadius,n,r),e.arc(t.x,t.y,t.innerRadius,r,n,!0),e.closePath(),e.strokeStyle=t.borderColor,e.lineWidth=t.borderWidth,e.fillStyle=t.backgroundColor,e.fill(),e.lineJoin="bevel",t.borderWidth&&e.stroke()}})},{25:25,26:26,45:45}],37:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45),a=r.global;r._set("global",{elements:{line:{tension:.4,backgroundColor:a.defaultColor,borderWidth:3,borderColor:a.defaultColor,borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",capBezierPoints:!0,fill:!0}}}),t.exports=i.extend({draw:function(){var e,t,n,r,i=this,s=i._view,l=i._chart.ctx,u=s.spanGaps,c=i._children.slice(),d=a.elements.line,f=-1;for(i._loop&&c.length&&c.push(c[0]),l.save(),l.lineCap=s.borderCapStyle||d.borderCapStyle,l.setLineDash&&l.setLineDash(s.borderDash||d.borderDash),l.lineDashOffset=s.borderDashOffset||d.borderDashOffset,l.lineJoin=s.borderJoinStyle||d.borderJoinStyle,l.lineWidth=s.borderWidth||d.borderWidth,l.strokeStyle=s.borderColor||a.defaultColor,l.beginPath(),f=-1,e=0;e<c.length;++e)t=c[e],n=o.previousItem(c,e),r=t._view,0===e?r.skip||(l.moveTo(r.x,r.y),f=e):(n=-1===f?n:c[f],r.skip||(f!==e-1&&!u||-1===f?l.moveTo(r.x,r.y):o.canvas.lineTo(l,n._view,t._view),f=e));l.stroke(),l.restore()}})},{25:25,26:26,45:45}],38:[function(e,t,n){"use strict";function r(e){var t=this._view;return!!t&&Math.pow(e-t.x,2)<Math.pow(t.radius+t.hitRadius,2)}function i(e){var t=this._view;return!!t&&Math.pow(e-t.y,2)<Math.pow(t.radius+t.hitRadius,2)}var o=e(25),a=e(26),s=e(45),l=o.global.defaultColor;o._set("global",{elements:{point:{radius:3,pointStyle:"circle",backgroundColor:l,borderColor:l,borderWidth:1,hitRadius:1,hoverRadius:4,hoverBorderWidth:1}}}),t.exports=a.extend({inRange:function(e,t){var n=this._view;return!!n&&Math.pow(e-n.x,2)+Math.pow(t-n.y,2)<Math.pow(n.hitRadius+n.radius,2)},inLabelRange:r,inXRange:r,inYRange:i,getCenterPoint:function(){var e=this._view;return{x:e.x,y:e.y}},getArea:function(){return Math.PI*Math.pow(this._view.radius,2)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y,padding:e.radius+e.borderWidth}},draw:function(e){var t=this._view,n=this._model,r=this._chart.ctx,i=t.pointStyle,a=t.radius,u=t.x,c=t.y,d=s.color,f=0;t.skip||(r.strokeStyle=t.borderColor||l,r.lineWidth=s.valueOrDefault(t.borderWidth,o.global.elements.point.borderWidth),r.fillStyle=t.backgroundColor||l,void 0!==e&&(n.x<e.left||1.01*e.right<n.x||n.y<e.top||1.01*e.bottom<n.y)&&(n.x<e.left?f=(u-n.x)/(e.left-n.x):1.01*e.right<n.x?f=(n.x-u)/(n.x-e.right):n.y<e.top?f=(c-n.y)/(e.top-n.y):1.01*e.bottom<n.y&&(f=(n.y-c)/(n.y-e.bottom)),f=Math.round(100*f)/100,r.strokeStyle=d(r.strokeStyle).alpha(f).rgbString(),r.fillStyle=d(r.fillStyle).alpha(f).rgbString()),s.canvas.drawPoint(r,i,a,u,c))}})},{25:25,26:26,45:45}],39:[function(e,t,n){"use strict";function r(e){return void 0!==e._view.width}function i(e){var t,n,i,o,a=e._view;if(r(e)){var s=a.width/2;t=a.x-s,n=a.x+s,i=Math.min(a.y,a.base),o=Math.max(a.y,a.base)}else{var l=a.height/2;t=Math.min(a.x,a.base),n=Math.max(a.x,a.base),i=a.y-l,o=a.y+l}return{left:t,top:i,right:n,bottom:o}}var o=e(25),a=e(26);o._set("global",{elements:{rectangle:{backgroundColor:o.global.defaultColor,borderColor:o.global.defaultColor,borderSkipped:"bottom",borderWidth:0}}}),t.exports=a.extend({draw:function(){function e(e){return v[(y+e)%4]}var t,n,r,i,o,a,s,l=this._chart.ctx,u=this._view,c=u.borderWidth;if(u.horizontal?(t=u.base,n=u.x,r=u.y-u.height/2,i=u.y+u.height/2,o=n>t?1:-1,a=1,s=u.borderSkipped||"left"):(t=u.x-u.width/2,n=u.x+u.width/2,r=u.y,o=1,a=(i=u.base)>r?1:-1,s=u.borderSkipped||"bottom"),c){var d=Math.min(Math.abs(t-n),Math.abs(r-i)),f=(c=c>d?d:c)/2,p=t+("left"!==s?f*o:0),h=n+("right"!==s?-f*o:0),g=r+("top"!==s?f*a:0),m=i+("bottom"!==s?-f*a:0);p!==h&&(r=g,i=m),g!==m&&(t=p,n=h)}l.beginPath(),l.fillStyle=u.backgroundColor,l.strokeStyle=u.borderColor,l.lineWidth=c;var v=[[t,i],[t,r],[n,r],[n,i]],y=["bottom","left","top","right"].indexOf(s,0);-1===y&&(y=0);var b=e(0);l.moveTo(b[0],b[1]);for(var x=1;x<4;x++)b=e(x),l.lineTo(b[0],b[1]);l.fill(),c&&l.stroke()},height:function(){var e=this._view;return e.base-e.y},inRange:function(e,t){var n=!1;if(this._view){var r=i(this);n=e>=r.left&&e<=r.right&&t>=r.top&&t<=r.bottom}return n},inLabelRange:function(e,t){var n=this;if(!n._view)return!1;var o=i(n);return r(n)?e>=o.left&&e<=o.right:t>=o.top&&t<=o.bottom},inXRange:function(e){var t=i(this);return e>=t.left&&e<=t.right},inYRange:function(e){var t=i(this);return e>=t.top&&e<=t.bottom},getCenterPoint:function(){var e,t,n=this._view;return r(this)?(e=n.x,t=(n.y+n.base)/2):(e=(n.x+n.base)/2,t=n.y),{x:e,y:t}},getArea:function(){var e=this._view;return e.width*Math.abs(e.y-e.base)},tooltipPosition:function(){var e=this._view;return{x:e.x,y:e.y}}})},{25:25,26:26}],40:[function(e,t,n){"use strict";t.exports={},t.exports.Arc=e(36),t.exports.Line=e(37),t.exports.Point=e(38),t.exports.Rectangle=e(39)},{36:36,37:37,38:38,39:39}],41:[function(e,t,n){"use strict";var r=e(42),n=t.exports={clear:function(e){e.ctx.clearRect(0,0,e.width,e.height)},roundedRect:function(e,t,n,r,i,o){if(o){var a=Math.min(o,r/2),s=Math.min(o,i/2);e.moveTo(t+a,n),e.lineTo(t+r-a,n),e.quadraticCurveTo(t+r,n,t+r,n+s),e.lineTo(t+r,n+i-s),e.quadraticCurveTo(t+r,n+i,t+r-a,n+i),e.lineTo(t+a,n+i),e.quadraticCurveTo(t,n+i,t,n+i-s),e.lineTo(t,n+s),e.quadraticCurveTo(t,n,t+a,n)}else e.rect(t,n,r,i)},drawPoint:function(e,t,n,r,i){var o,a,s,l,u,c;if(!t||"object"!=typeof t||"[object HTMLImageElement]"!==(o=t.toString())&&"[object HTMLCanvasElement]"!==o){if(!(isNaN(n)||n<=0)){switch(t){default:e.beginPath(),e.arc(r,i,n,0,2*Math.PI),e.closePath(),e.fill();break;case"triangle":e.beginPath(),u=(a=3*n/Math.sqrt(3))*Math.sqrt(3)/2,e.moveTo(r-a/2,i+u/3),e.lineTo(r+a/2,i+u/3),e.lineTo(r,i-2*u/3),e.closePath(),e.fill();break;case"rect":c=1/Math.SQRT2*n,e.beginPath(),e.fillRect(r-c,i-c,2*c,2*c),e.strokeRect(r-c,i-c,2*c,2*c);break;case"rectRounded":var d=n/Math.SQRT2,f=r-d,p=i-d,h=Math.SQRT2*n;e.beginPath(),this.roundedRect(e,f,p,h,h,n/2),e.closePath(),e.fill();break;case"rectRot":c=1/Math.SQRT2*n,e.beginPath(),e.moveTo(r-c,i),e.lineTo(r,i+c),e.lineTo(r+c,i),e.lineTo(r,i-c),e.closePath(),e.fill();break;case"cross":e.beginPath(),e.moveTo(r,i+n),e.lineTo(r,i-n),e.moveTo(r-n,i),e.lineTo(r+n,i),e.closePath();break;case"crossRot":e.beginPath(),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l),e.moveTo(r-s,i+l),e.lineTo(r+s,i-l),e.closePath();break;case"star":e.beginPath(),e.moveTo(r,i+n),e.lineTo(r,i-n),e.moveTo(r-n,i),e.lineTo(r+n,i),s=Math.cos(Math.PI/4)*n,l=Math.sin(Math.PI/4)*n,e.moveTo(r-s,i-l),e.lineTo(r+s,i+l),e.moveTo(r-s,i+l),e.lineTo(r+s,i-l),e.closePath();break;case"line":e.beginPath(),e.moveTo(r-n,i),e.lineTo(r+n,i),e.closePath();break;case"dash":e.beginPath(),e.moveTo(r,i),e.lineTo(r+n,i),e.closePath()}e.stroke()}}else e.drawImage(t,r-t.width/2,i-t.height/2,t.width,t.height)},clipArea:function(e,t){e.save(),e.beginPath(),e.rect(t.left,t.top,t.right-t.left,t.bottom-t.top),e.clip()},unclipArea:function(e){e.restore()},lineTo:function(e,t,n,r){if(n.steppedLine)return"after"===n.steppedLine&&!r||"after"!==n.steppedLine&&r?e.lineTo(t.x,n.y):e.lineTo(n.x,t.y),void e.lineTo(n.x,n.y);n.tension?e.bezierCurveTo(r?t.controlPointPreviousX:t.controlPointNextX,r?t.controlPointPreviousY:t.controlPointNextY,r?n.controlPointNextX:n.controlPointPreviousX,r?n.controlPointNextY:n.controlPointPreviousY,n.x,n.y):e.lineTo(n.x,n.y)}};r.clear=n.clear,r.drawRoundedRectangle=function(e){e.beginPath(),n.roundedRect.apply(n,arguments),e.closePath()}},{42:42}],42:[function(e,t,n){"use strict";var r={noop:function(){},uid:function(){var e=0;return function(){return e++}}(),isNullOrUndef:function(e){return null===e||void 0===e},isArray:Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)},isObject:function(e){return null!==e&&"[object Object]"===Object.prototype.toString.call(e)},valueOrDefault:function(e,t){return void 0===e?t:e},valueAtIndexOrDefault:function(e,t,n){return r.valueOrDefault(r.isArray(e)?e[t]:e,n)},callback:function(e,t,n){if(e&&"function"==typeof e.call)return e.apply(n,t)},each:function(e,t,n,i){var o,a,s;if(r.isArray(e))if(a=e.length,i)for(o=a-1;o>=0;o--)t.call(n,e[o],o);else for(o=0;o<a;o++)t.call(n,e[o],o);else if(r.isObject(e))for(a=(s=Object.keys(e)).length,o=0;o<a;o++)t.call(n,e[s[o]],s[o])},arrayEquals:function(e,t){var n,i,o,a;if(!e||!t||e.length!==t.length)return!1;for(n=0,i=e.length;n<i;++n)if(o=e[n],a=t[n],o instanceof Array&&a instanceof Array){if(!r.arrayEquals(o,a))return!1}else if(o!==a)return!1;return!0},clone:function(e){if(r.isArray(e))return e.map(r.clone);if(r.isObject(e)){for(var t={},n=Object.keys(e),i=n.length,o=0;o<i;++o)t[n[o]]=r.clone(e[n[o]]);return t}return e},_merger:function(e,t,n,i){var o=t[e],a=n[e];r.isObject(o)&&r.isObject(a)?r.merge(o,a,i):t[e]=r.clone(a)},_mergerIf:function(e,t,n){var i=t[e],o=n[e];r.isObject(i)&&r.isObject(o)?r.mergeIf(i,o):t.hasOwnProperty(e)||(t[e]=r.clone(o))},merge:function(e,t,n){var i,o,a,s,l,u=r.isArray(t)?t:[t],c=u.length;if(!r.isObject(e))return e;for(i=(n=n||{}).merger||r._merger,o=0;o<c;++o)if(t=u[o],r.isObject(t))for(l=0,s=(a=Object.keys(t)).length;l<s;++l)i(a[l],e,t,n);return e},mergeIf:function(e,t){return r.merge(e,t,{merger:r._mergerIf})},extend:function(e){for(var t=function(t,n){e[n]=t},n=1,i=arguments.length;n<i;++n)r.each(arguments[n],t);return e},inherits:function(e){var t=this,n=e&&e.hasOwnProperty("constructor")?e.constructor:function(){return t.apply(this,arguments)},i=function(){this.constructor=n};return i.prototype=t.prototype,n.prototype=new i,n.extend=r.inherits,e&&r.extend(n.prototype,e),n.__super__=t.prototype,n}};t.exports=r,r.callCallback=r.callback,r.indexOf=function(e,t,n){return Array.prototype.indexOf.call(e,t,n)},r.getValueOrDefault=r.valueOrDefault,r.getValueAtIndexOrDefault=r.valueAtIndexOrDefault},{}],43:[function(e,t,n){"use strict";var r=e(42),i={linear:function(e){return e},easeInQuad:function(e){return e*e},easeOutQuad:function(e){return-e*(e-2)},easeInOutQuad:function(e){return(e/=.5)<1?.5*e*e:-.5*(--e*(e-2)-1)},easeInCubic:function(e){return e*e*e},easeOutCubic:function(e){return(e-=1)*e*e+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*e*e*e:.5*((e-=2)*e*e+2)},easeInQuart:function(e){return e*e*e*e},easeOutQuart:function(e){return-((e-=1)*e*e*e-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*e*e*e*e:-.5*((e-=2)*e*e*e-2)},easeInQuint:function(e){return e*e*e*e*e},easeOutQuint:function(e){return(e-=1)*e*e*e*e+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*e*e*e*e*e:.5*((e-=2)*e*e*e*e+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return e>=1?e:-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-(e-=1)*e)},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeInElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),-r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n))},easeOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:1===e?1:(n||(n=.3),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),r*Math.pow(2,-10*e)*Math.sin((e-t)*(2*Math.PI)/n)+1)},easeInOutElastic:function(e){var t=1.70158,n=0,r=1;return 0===e?0:2==(e/=.5)?1:(n||(n=.45),r<1?(r=1,t=n/4):t=n/(2*Math.PI)*Math.asin(1/r),e<1?r*Math.pow(2,10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*-.5:r*Math.pow(2,-10*(e-=1))*Math.sin((e-t)*(2*Math.PI)/n)*.5+1)},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},easeInBounce:function(e){return 1-i.easeOutBounce(1-e)},easeOutBounce:function(e){return e<1/2.75?7.5625*e*e:e<2/2.75?7.5625*(e-=1.5/2.75)*e+.75:e<2.5/2.75?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInOutBounce:function(e){return e<.5?.5*i.easeInBounce(2*e):.5*i.easeOutBounce(2*e-1)+.5}};t.exports={effects:i},r.easingEffects=i},{42:42}],44:[function(e,t,n){"use strict";var r=e(42);t.exports={toLineHeight:function(e,t){var n=(""+e).match(/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/);if(!n||"normal"===n[1])return 1.2*t;switch(e=+n[2],n[3]){case"px":return e;case"%":e/=100}return t*e},toPadding:function(e){var t,n,i,o;return r.isObject(e)?(t=+e.top||0,n=+e.right||0,i=+e.bottom||0,o=+e.left||0):t=n=i=o=+e||0,{top:t,right:n,bottom:i,left:o,height:t+i,width:o+n}},resolve:function(e,t,n){var i,o,a;for(i=0,o=e.length;i<o;++i)if(void 0!==(a=e[i])&&(void 0!==t&&"function"==typeof a&&(a=a(t)),void 0!==n&&r.isArray(a)&&(a=a[n]),void 0!==a))return a}}},{42:42}],45:[function(e,t,n){"use strict";t.exports=e(42),t.exports.easing=e(43),t.exports.canvas=e(41),t.exports.options=e(44)},{41:41,42:42,43:43,44:44}],46:[function(e,t,n){t.exports={acquireContext:function(e){return e&&e.canvas&&(e=e.canvas),e&&e.getContext("2d")||null}}},{}],47:[function(e,t,n){"use strict";function r(e,t){var n=m.getStyle(e,t),r=n&&n.match(/^(\d+)(\.\d+)?px$/);return r?Number(r[1]):void 0}function i(e,t){var n=e.style,i=e.getAttribute("height"),o=e.getAttribute("width");if(e[v]={initial:{height:i,width:o,style:{display:n.display,height:n.height,width:n.width}}},n.display=n.display||"block",null===o||""===o){var a=r(e,"width");void 0!==a&&(e.width=a)}if(null===i||""===i)if(""===e.style.height)e.height=e.width/(t.options.aspectRatio||2);else{var s=r(e,"height");void 0!==a&&(e.height=s)}return e}function o(e,t,n){e.addEventListener(t,n,C)}function a(e,t,n){e.removeEventListener(t,n,C)}function s(e,t,n,r,i){return{type:e,chart:t,native:i||null,x:void 0!==n?n:null,y:void 0!==r?r:null}}function l(e,t){var n=_[e.type]||e.type,r=m.getRelativePosition(e,t);return s(n,t,r.x,r.y,e)}function u(e,t){var n=!1,r=[];return function(){r=Array.prototype.slice.call(arguments),t=t||this,n||(n=!0,m.requestAnimFrame.call(window,function(){n=!1,e.apply(t,r)}))}}function c(e){var t=document.createElement("div"),n=y+"size-monitor",r="position:absolute;left:0;top:0;right:0;bottom:0;overflow:hidden;pointer-events:none;visibility:hidden;z-index:-1;";t.style.cssText=r,t.className=n,t.innerHTML='<div class="'+n+'-expand" style="'+r+'"><div style="position:absolute;width:1000000px;height:1000000px;left:0;top:0"></div></div><div class="'+n+'-shrink" style="'+r+'"><div style="position:absolute;width:200%;height:200%;left:0; top:0"></div></div>';var i=t.childNodes[0],a=t.childNodes[1];t._reset=function(){i.scrollLeft=1e6,i.scrollTop=1e6,a.scrollLeft=1e6,a.scrollTop=1e6};var s=function(){t._reset(),e()};return o(i,"scroll",s.bind(i,"expand")),o(a,"scroll",s.bind(a,"shrink")),t}function d(e,t){var n=e[v]||(e[v]={}),r=n.renderProxy=function(e){e.animationName===x&&t()};m.each(w,function(t){o(e,t,r)}),n.reflow=!!e.offsetParent,e.classList.add(b)}function f(e){var t=e[v]||{},n=t.renderProxy;n&&(m.each(w,function(t){a(e,t,n)}),delete t.renderProxy),e.classList.remove(b)}function p(e,t,n){var r=e[v]||(e[v]={}),i=r.resizer=c(u(function(){if(r.resizer)return t(s("resize",n))}));d(e,function(){if(r.resizer){var t=e.parentNode;t&&t!==i.parentNode&&t.insertBefore(i,t.firstChild),i._reset()}})}function h(e){var t=e[v]||{},n=t.resizer;delete t.resizer,f(e),n&&n.parentNode&&n.parentNode.removeChild(n)}function g(e,t){var n=e._style||document.createElement("style");e._style||(e._style=n,t="/* Chart.js */\n"+t,n.setAttribute("type","text/css"),document.getElementsByTagName("head")[0].appendChild(n)),n.appendChild(document.createTextNode(t))}var m=e(45),v="$chartjs",y="chartjs-",b=y+"render-monitor",x=y+"render-animation",w=["animationstart","webkitAnimationStart"],_={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},C=!!function(){var e=!1;try{var t=Object.defineProperty({},"passive",{get:function(){e=!0}});window.addEventListener("e",null,t)}catch(e){}return e}()&&{passive:!0};t.exports={_enabled:"undefined"!=typeof window&&"undefined"!=typeof document,initialize:function(){var e="from{opacity:0.99}to{opacity:1}";g(this,"@-webkit-keyframes "+x+"{"+e+"}@keyframes "+x+"{"+e+"}."+b+"{-webkit-animation:"+x+" 0.001s;animation:"+x+" 0.001s;}")},acquireContext:function(e,t){"string"==typeof e?e=document.getElementById(e):e.length&&(e=e[0]),e&&e.canvas&&(e=e.canvas);var n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(i(e,t),n):null},releaseContext:function(e){var t=e.canvas;if(t[v]){var n=t[v].initial;["height","width"].forEach(function(e){var r=n[e];m.isNullOrUndef(r)?t.removeAttribute(e):t.setAttribute(e,r)}),m.each(n.style||{},function(e,n){t.style[n]=e}),t.width=t.width,delete t[v]}},addEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=n[v]||(n[v]={});o(r,t,(i.proxies||(i.proxies={}))[e.id+"_"+t]=function(t){n(l(t,e))})}else p(r,n,e)},removeEventListener:function(e,t,n){var r=e.canvas;if("resize"!==t){var i=((n[v]||{}).proxies||{})[e.id+"_"+t];i&&a(r,t,i)}else h(r)}},m.addEvent=o,m.removeEvent=a},{45:45}],48:[function(e,t,n){"use strict";var r=e(45),i=e(46),o=e(47),a=o._enabled?o:i;t.exports=r.extend({initialize:function(){},acquireContext:function(){},releaseContext:function(){},addEventListener:function(){},removeEventListener:function(){}},a)},{45:45,46:46,47:47}],49:[function(e,t,n){"use strict";var r=e(25),i=e(40),o=e(45);r._set("global",{plugins:{filler:{propagate:!0}}}),t.exports=function(){function e(e,t,n){var r,i=e._model||{},o=i.fill;if(void 0===o&&(o=!!i.backgroundColor),!1===o||null===o)return!1;if(!0===o)return"origin";if(r=parseFloat(o,10),isFinite(r)&&Math.floor(r)===r)return"-"!==o[0]&&"+"!==o[0]||(r=t+r),!(r===t||r<0||r>=n)&&r;switch(o){case"bottom":return"start";case"top":return"end";case"zero":return"origin";case"origin":case"start":case"end":return o;default:return!1}}function t(e){var t,n=e.el._model||{},r=e.el._scale||{},i=e.fill,o=null;if(isFinite(i))return null;if("start"===i?o=void 0===n.scaleBottom?r.bottom:n.scaleBottom:"end"===i?o=void 0===n.scaleTop?r.top:n.scaleTop:void 0!==n.scaleZero?o=n.scaleZero:r.getBasePosition?o=r.getBasePosition():r.getBasePixel&&(o=r.getBasePixel()),void 0!==o&&null!==o){if(void 0!==o.x&&void 0!==o.y)return o;if("number"==typeof o&&isFinite(o))return t=r.isHorizontal(),{x:t?o:null,y:t?null:o}}return null}function n(e,t,n){var r,i=e[t].fill,o=[t];if(!n)return i;for(;!1!==i&&-1===o.indexOf(i);){if(!isFinite(i))return i;if(!(r=e[i]))return!1;if(r.visible)return i;o.push(i),i=r.fill}return!1}function a(e){var t=e.fill,n="dataset";return!1===t?null:(isFinite(t)||(n="boundary"),c[n](e))}function s(e){return e&&!e.skip}function l(e,t,n,r,i){var a;if(r&&i){for(e.moveTo(t[0].x,t[0].y),a=1;a<r;++a)o.canvas.lineTo(e,t[a-1],t[a]);for(e.lineTo(n[i-1].x,n[i-1].y),a=i-1;a>0;--a)o.canvas.lineTo(e,n[a],n[a-1],!0)}}function u(e,t,n,r,i,o){var a,u,c,d,f,p,h,g=t.length,m=r.spanGaps,v=[],y=[],b=0,x=0;for(e.beginPath(),a=0,u=g+!!o;a<u;++a)f=n(d=t[c=a%g]._view,c,r),p=s(d),h=s(f),p&&h?(b=v.push(d),x=y.push(f)):b&&x&&(m?(p&&v.push(d),h&&y.push(f)):(l(e,v,y,b,x),b=x=0,v=[],y=[]));l(e,v,y,b,x),e.closePath(),e.fillStyle=i,e.fill()}var c={dataset:function(e){var t=e.fill,n=e.chart,r=n.getDatasetMeta(t),i=r&&n.isDatasetVisible(t)&&r.dataset._children||[],o=i.length||0;return o?function(e,t){return t<o&&i[t]._view||null}:null},boundary:function(e){var t=e.boundary,n=t?t.x:null,r=t?t.y:null;return function(e){return{x:null===n?e.x:n,y:null===r?e.y:r}}}};return{id:"filler",afterDatasetsUpdate:function(r,o){var s,l,u,c,d=(r.data.datasets||[]).length,f=o.propagate,p=[];for(l=0;l<d;++l)c=null,(u=(s=r.getDatasetMeta(l)).dataset)&&u._model&&u instanceof i.Line&&(c={visible:r.isDatasetVisible(l),fill:e(u,l,d),chart:r,el:u}),s.$filler=c,p.push(c);for(l=0;l<d;++l)(c=p[l])&&(c.fill=n(p,l,f),c.boundary=t(c),c.mapper=a(c))},beforeDatasetDraw:function(e,t){var n=t.meta.$filler;if(n){var i=e.ctx,a=n.el,s=a._view,l=a._children||[],c=n.mapper,d=s.backgroundColor||r.global.defaultColor;c&&d&&l.length&&(o.canvas.clipArea(i,e.chartArea),u(i,l,c,s,d,a._loop),o.canvas.unclipArea(i))}}}}},{25:25,40:40,45:45}],50:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{legend:{display:!0,position:"top",fullWidth:!0,reverse:!1,weight:1e3,onClick:function(e,t){var n=t.datasetIndex,r=this.chart,i=r.getDatasetMeta(n);i.hidden=null===i.hidden?!r.data.datasets[n].hidden:null,r.update()},onHover:null,labels:{boxWidth:40,padding:10,generateLabels:function(e){var t=e.data;return o.isArray(t.datasets)?t.datasets.map(function(t,n){return{text:t.label,fillStyle:o.isArray(t.backgroundColor)?t.backgroundColor[0]:t.backgroundColor,hidden:!e.isDatasetVisible(n),lineCap:t.borderCapStyle,lineDash:t.borderDash,lineDashOffset:t.borderDashOffset,lineJoin:t.borderJoinStyle,lineWidth:t.borderWidth,strokeStyle:t.borderColor,pointStyle:t.pointStyle,datasetIndex:n}},this):[]}}},legendCallback:function(e){var t=[];t.push('<ul class="'+e.id+'-legend">');for(var n=0;n<e.data.datasets.length;n++)t.push('<li><span style="background-color:'+e.data.datasets[n].backgroundColor+'"></span>'),e.data.datasets[n].label&&t.push(e.data.datasets[n].label),t.push("</li>");return t.push("</ul>"),t.join("")}}),t.exports=function(e){function t(e,t){return e.usePointStyle?t*Math.SQRT2:e.boxWidth}function n(t,n){var r=new e.Legend({ctx:t.ctx,options:n,chart:t});a.configure(t,r,n),a.addBox(t,r),t.legend=r}var a=e.layoutService,s=o.noop;return e.Legend=i.extend({initialize:function(e){o.extend(this,e),this.legendHitBoxes=[],this.doughnutMode=!1},beforeUpdate:s,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:s,beforeSetDimensions:s,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:s,beforeBuildLabels:s,buildLabels:function(){var e=this,t=e.options.labels||{},n=o.callback(t.generateLabels,[e.chart],e)||[];t.filter&&(n=n.filter(function(n){return t.filter(n,e.chart.data)})),e.options.reverse&&n.reverse(),e.legendItems=n},afterBuildLabels:s,beforeFit:s,fit:function(){var e=this,n=e.options,i=n.labels,a=n.display,s=e.ctx,l=r.global,u=o.valueOrDefault,c=u(i.fontSize,l.defaultFontSize),d=u(i.fontStyle,l.defaultFontStyle),f=u(i.fontFamily,l.defaultFontFamily),p=o.fontString(c,d,f),h=e.legendHitBoxes=[],g=e.minSize,m=e.isHorizontal();if(m?(g.width=e.maxWidth,g.height=a?10:0):(g.width=a?10:0,g.height=e.maxHeight),a)if(s.font=p,m){var v=e.lineWidths=[0],y=e.legendItems.length?c+i.padding:0;s.textAlign="left",s.textBaseline="top",o.each(e.legendItems,function(n,r){var o=t(i,c)+c/2+s.measureText(n.text).width;v[v.length-1]+o+i.padding>=e.width&&(y+=c+i.padding,v[v.length]=e.left),h[r]={left:0,top:0,width:o,height:c},v[v.length-1]+=o+i.padding}),g.height+=y}else{var b=i.padding,x=e.columnWidths=[],w=i.padding,_=0,C=0,k=c+b;o.each(e.legendItems,function(e,n){var r=t(i,c)+c/2+s.measureText(e.text).width;C+k>g.height&&(w+=_+i.padding,x.push(_),_=0,C=0),_=Math.max(_,r),C+=k,h[n]={left:0,top:0,width:r,height:c}}),w+=_,x.push(_),g.width+=w}e.width=g.width,e.height=g.height},afterFit:s,isHorizontal:function(){return"top"===this.options.position||"bottom"===this.options.position},draw:function(){var e=this,n=e.options,i=n.labels,a=r.global,s=a.elements.line,l=e.width,u=e.lineWidths;if(n.display){var c,d=e.ctx,f=o.valueOrDefault,p=f(i.fontColor,a.defaultFontColor),h=f(i.fontSize,a.defaultFontSize),g=f(i.fontStyle,a.defaultFontStyle),m=f(i.fontFamily,a.defaultFontFamily),v=o.fontString(h,g,m);d.textAlign="left",d.textBaseline="middle",d.lineWidth=.5,d.strokeStyle=p,d.fillStyle=p,d.font=v;var y=t(i,h),b=e.legendHitBoxes,x=function(e,t,r){if(!(isNaN(y)||y<=0)){d.save(),d.fillStyle=f(r.fillStyle,a.defaultColor),d.lineCap=f(r.lineCap,s.borderCapStyle),d.lineDashOffset=f(r.lineDashOffset,s.borderDashOffset),d.lineJoin=f(r.lineJoin,s.borderJoinStyle),d.lineWidth=f(r.lineWidth,s.borderWidth),d.strokeStyle=f(r.strokeStyle,a.defaultColor);var i=0===f(r.lineWidth,s.borderWidth);if(d.setLineDash&&d.setLineDash(f(r.lineDash,s.borderDash)),n.labels&&n.labels.usePointStyle){var l=h*Math.SQRT2/2,u=l/Math.SQRT2,c=e+u,p=t+u;o.canvas.drawPoint(d,r.pointStyle,l,c,p)}else i||d.strokeRect(e,t,y,h),d.fillRect(e,t,y,h);d.restore()}},w=function(e,t,n,r){var i=h/2,o=y+i+e,a=t+i;d.fillText(n.text,o,a),n.hidden&&(d.beginPath(),d.lineWidth=2,d.moveTo(o,a),d.lineTo(o+r,a),d.stroke())},_=e.isHorizontal();c=_?{x:e.left+(l-u[0])/2,y:e.top+i.padding,line:0}:{x:e.left+i.padding,y:e.top+i.padding,line:0};var C=h+i.padding;o.each(e.legendItems,function(t,n){var r=d.measureText(t.text).width,o=y+h/2+r,a=c.x,s=c.y;_?a+o>=l&&(s=c.y+=C,c.line++,a=c.x=e.left+(l-u[c.line])/2):s+C>e.bottom&&(a=c.x=a+e.columnWidths[c.line]+i.padding,s=c.y=e.top+i.padding,c.line++),x(a,s,t),b[n].left=a,b[n].top=s,w(a,s,t,r),_?c.x+=o+i.padding:c.y+=C})}},handleEvent:function(e){var t=this,n=t.options,r="mouseup"===e.type?"click":e.type,i=!1;if("mousemove"===r){if(!n.onHover)return}else{if("click"!==r)return;if(!n.onClick)return}var o=e.x,a=e.y;if(o>=t.left&&o<=t.right&&a>=t.top&&a<=t.bottom)for(var s=t.legendHitBoxes,l=0;l<s.length;++l){var u=s[l];if(o>=u.left&&o<=u.left+u.width&&a>=u.top&&a<=u.top+u.height){if("click"===r){n.onClick.call(t,e.native,t.legendItems[l]),i=!0;break}if("mousemove"===r){n.onHover.call(t,e.native,t.legendItems[l]),i=!0;break}}}return i}}),{id:"legend",beforeInit:function(e){var t=e.options.legend;t&&n(e,t)},beforeUpdate:function(e){var t=e.options.legend,i=e.legend;t?(o.mergeIf(t,r.global.legend),i?(a.configure(e,i,t),i.options=t):n(e,t)):i&&(a.removeBox(e,i),delete e.legend)},afterEvent:function(e,t){var n=e.legend;n&&n.handleEvent(t)}}}},{25:25,26:26,45:45}],51:[function(e,t,n){"use strict";var r=e(25),i=e(26),o=e(45);r._set("global",{title:{display:!1,fontStyle:"bold",fullWidth:!0,lineHeight:1.2,padding:10,position:"top",text:"",weight:2e3}}),t.exports=function(e){function t(t,r){var i=new e.Title({ctx:t.ctx,options:r,chart:t});n.configure(t,i,r),n.addBox(t,i),t.titleBlock=i}var n=e.layoutService,a=o.noop;return e.Title=i.extend({initialize:function(e){var t=this;o.extend(t,e),t.legendHitBoxes=[]},beforeUpdate:a,update:function(e,t,n){var r=this;return r.beforeUpdate(),r.maxWidth=e,r.maxHeight=t,r.margins=n,r.beforeSetDimensions(),r.setDimensions(),r.afterSetDimensions(),r.beforeBuildLabels(),r.buildLabels(),r.afterBuildLabels(),r.beforeFit(),r.fit(),r.afterFit(),r.afterUpdate(),r.minSize},afterUpdate:a,beforeSetDimensions:a,setDimensions:function(){var e=this;e.isHorizontal()?(e.width=e.maxWidth,e.left=0,e.right=e.width):(e.height=e.maxHeight,e.top=0,e.bottom=e.height),e.paddingLeft=0,e.paddingTop=0,e.paddingRight=0,e.paddingBottom=0,e.minSize={width:0,height:0}},afterSetDimensions:a,beforeBuildLabels:a,buildLabels:a,afterBuildLabels:a,beforeFit:a,fit:function(){var e=this,t=o.valueOrDefault,n=e.options,i=n.display,a=t(n.fontSize,r.global.defaultFontSize),s=e.minSize,l=o.isArray(n.text)?n.text.length:1,u=o.options.toLineHeight(n.lineHeight,a),c=i?l*u+2*n.padding:0;e.isHorizontal()?(s.width=e.maxWidth,s.height=c):(s.width=c,s.height=e.maxHeight),e.width=s.width,e.height=s.height},afterFit:a,isHorizontal:function(){var e=this.options.position;return"top"===e||"bottom"===e},draw:function(){var e=this,t=e.ctx,n=o.valueOrDefault,i=e.options,a=r.global;if(i.display){var s,l,u,c=n(i.fontSize,a.defaultFontSize),d=n(i.fontStyle,a.defaultFontStyle),f=n(i.fontFamily,a.defaultFontFamily),p=o.fontString(c,d,f),h=o.options.toLineHeight(i.lineHeight,c),g=h/2+i.padding,m=0,v=e.top,y=e.left,b=e.bottom,x=e.right;t.fillStyle=n(i.fontColor,a.defaultFontColor),t.font=p,e.isHorizontal()?(l=y+(x-y)/2,u=v+g,s=x-y):(l="left"===i.position?y+g:x-g,u=v+(b-v)/2,s=b-v,m=Math.PI*("left"===i.position?-.5:.5)),t.save(),t.translate(l,u),t.rotate(m),t.textAlign="center",t.textBaseline="middle";var w=i.text;if(o.isArray(w))for(var _=0,C=0;C<w.length;++C)t.fillText(w[C],0,_,s),_+=h;else t.fillText(w,0,0,s);t.restore()}}}),{id:"title",beforeInit:function(e){var n=e.options.title;n&&t(e,n)},beforeUpdate:function(i){var a=i.options.title,s=i.titleBlock;a?(o.mergeIf(a,r.global.title),s?(n.configure(i,s,a),s.options=a):t(i,a)):s&&(e.layoutService.removeBox(i,s),delete i.titleBlock)}}}},{25:25,26:26,45:45}],52:[function(e,t,n){"use strict";t.exports=function(e){var t={position:"bottom"},n=e.Scale.extend({getLabels:function(){var e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels},determineDataLimits:function(){var e=this,t=e.getLabels();e.minIndex=0,e.maxIndex=t.length-1;var n;void 0!==e.options.ticks.min&&(n=t.indexOf(e.options.ticks.min),e.minIndex=-1!==n?n:e.minIndex),void 0!==e.options.ticks.max&&(n=t.indexOf(e.options.ticks.max),e.maxIndex=-1!==n?n:e.maxIndex),e.min=t[e.minIndex],e.max=t[e.maxIndex]},buildTicks:function(){var e=this,t=e.getLabels();e.ticks=0===e.minIndex&&e.maxIndex===t.length-1?t:t.slice(e.minIndex,e.maxIndex+1)},getLabelForIndex:function(e,t){var n=this,r=n.chart.data,i=n.isHorizontal();return r.yLabels&&!i?n.getRightValue(r.datasets[t].data[e]):n.ticks[e-n.minIndex]},getPixelForValue:function(e,t){var n,r=this,i=r.options.offset,o=Math.max(r.maxIndex+1-r.minIndex-(i?0:1),1);if(void 0!==e&&null!==e&&(n=r.isHorizontal()?e.x:e.y),void 0!==n||void 0!==e&&isNaN(t)){var a=r.getLabels();e=n||e;var s=a.indexOf(e);t=-1!==s?s:t}if(r.isHorizontal()){var l=r.width/o,u=l*(t-r.minIndex);return i&&(u+=l/2),r.left+Math.round(u)}var c=r.height/o,d=c*(t-r.minIndex);return i&&(d+=c/2),r.top+Math.round(d)},getPixelForTick:function(e){return this.getPixelForValue(this.ticks[e],e+this.minIndex,null)},getValueForPixel:function(e){var t=this,n=t.options.offset,r=Math.max(t._ticks.length-(n?0:1),1),i=t.isHorizontal(),o=(i?t.width:t.height)/r;return e-=i?t.left:t.top,n&&(e-=o/2),(e<=0?0:Math.round(e/o))+t.minIndex},getBasePixel:function(){return this.bottom}});e.scaleService.registerScaleType("category",n,t)}},{}],53:[function(e,t,n){"use strict";var r=e(25),i=e(45),o=e(34);t.exports=function(e){var t={position:"left",ticks:{callback:o.formatters.linear}},n=e.LinearScaleBase.extend({determineDataLimits:function(){function e(e){return a?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,r=t.chart,o=r.data.datasets,a=t.isHorizontal();t.min=null,t.max=null;var s=n.stacked;if(void 0===s&&i.each(o,function(t,n){if(!s){var i=r.getDatasetMeta(n);r.isDatasetVisible(n)&&e(i)&&void 0!==i.stack&&(s=!0)}}),n.stacked||s){var l={};i.each(o,function(o,a){var s=r.getDatasetMeta(a),u=[s.type,void 0===n.stacked&&void 0===s.stack?a:"",s.stack].join(".");void 0===l[u]&&(l[u]={positiveValues:[],negativeValues:[]});var c=l[u].positiveValues,d=l[u].negativeValues;r.isDatasetVisible(a)&&e(s)&&i.each(o.data,function(e,r){var i=+t.getRightValue(e);isNaN(i)||s.data[r].hidden||(c[r]=c[r]||0,d[r]=d[r]||0,n.relativePoints?c[r]=100:i<0?d[r]+=i:c[r]+=i)})}),i.each(l,function(e){var n=e.positiveValues.concat(e.negativeValues),r=i.min(n),o=i.max(n);t.min=null===t.min?r:Math.min(t.min,r),t.max=null===t.max?o:Math.max(t.max,o)})}else i.each(o,function(n,o){var a=r.getDatasetMeta(o);r.isDatasetVisible(o)&&e(a)&&i.each(n.data,function(e,n){var r=+t.getRightValue(e);isNaN(r)||a.data[n].hidden||(null===t.min?t.min=r:r<t.min&&(t.min=r),null===t.max?t.max=r:r>t.max&&(t.max=r))})});t.min=isFinite(t.min)&&!isNaN(t.min)?t.min:0,t.max=isFinite(t.max)&&!isNaN(t.max)?t.max:1,this.handleTickRangeOptions()},getTickLimit:function(){var e,t=this,n=t.options.ticks;if(t.isHorizontal())e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.width/50));else{var o=i.valueOrDefault(n.fontSize,r.global.defaultFontSize);e=Math.min(n.maxTicksLimit?n.maxTicksLimit:11,Math.ceil(t.height/(2*o)))}return e},handleDirectionalChanges:function(){this.isHorizontal()||this.ticks.reverse()},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForValue:function(e){var t,n=this,r=n.start,i=+n.getRightValue(e),o=n.end-r;return n.isHorizontal()?(t=n.left+n.width/o*(i-r),Math.round(t)):(t=n.bottom-n.height/o*(i-r),Math.round(t))},getValueForPixel:function(e){var t=this,n=t.isHorizontal(),r=n?t.width:t.height,i=(n?e-t.left:t.bottom-e)/r;return t.start+(t.end-t.start)*i},getPixelForTick:function(e){return this.getPixelForValue(this.ticksAsNumbers[e])}});e.scaleService.registerScaleType("linear",n,t)}},{25:25,34:34,45:45}],54:[function(e,t,n){"use strict";var r=e(45),i=e(34);t.exports=function(e){var t=r.noop;e.LinearScaleBase=e.Scale.extend({getRightValue:function(t){return"string"==typeof t?+t:e.Scale.prototype.getRightValue.call(this,t)},handleTickRangeOptions:function(){var e=this,t=e.options.ticks;if(t.beginAtZero){var n=r.sign(e.min),i=r.sign(e.max);n<0&&i<0?e.max=0:n>0&&i>0&&(e.min=0)}var o=void 0!==t.min||void 0!==t.suggestedMin,a=void 0!==t.max||void 0!==t.suggestedMax;void 0!==t.min?e.min=t.min:void 0!==t.suggestedMin&&(null===e.min?e.min=t.suggestedMin:e.min=Math.min(e.min,t.suggestedMin)),void 0!==t.max?e.max=t.max:void 0!==t.suggestedMax&&(null===e.max?e.max=t.suggestedMax:e.max=Math.max(e.max,t.suggestedMax)),o!==a&&e.min>=e.max&&(o?e.max=e.min+1:e.min=e.max-1),e.min===e.max&&(e.max++,t.beginAtZero||e.min--)},getTickLimit:t,handleDirectionalChanges:t,buildTicks:function(){var e=this,t=e.options.ticks,n=e.getTickLimit(),o={maxTicks:n=Math.max(2,n),min:t.min,max:t.max,stepSize:r.valueOrDefault(t.fixedStepSize,t.stepSize)},a=e.ticks=i.generators.linear(o,e);e.handleDirectionalChanges(),e.max=r.max(a),e.min=r.min(a),t.reverse?(a.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){var t=this;t.ticksAsNumbers=t.ticks.slice(),t.zeroLineIndex=t.ticks.indexOf(0),e.Scale.prototype.convertTicksToLabels.call(t)}})}},{34:34,45:45}],55:[function(e,t,n){"use strict";var r=e(45),i=e(34);t.exports=function(e){var t={position:"left",ticks:{callback:i.formatters.logarithmic}},n=e.Scale.extend({determineDataLimits:function(){function e(e){return l?e.xAxisID===t.id:e.yAxisID===t.id}var t=this,n=t.options,i=n.ticks,o=t.chart,a=o.data.datasets,s=r.valueOrDefault,l=t.isHorizontal();t.min=null,t.max=null,t.minNotZero=null;var u=n.stacked;if(void 0===u&&r.each(a,function(t,n){if(!u){var r=o.getDatasetMeta(n);o.isDatasetVisible(n)&&e(r)&&void 0!==r.stack&&(u=!0)}}),n.stacked||u){var c={};r.each(a,function(i,a){var s=o.getDatasetMeta(a),l=[s.type,void 0===n.stacked&&void 0===s.stack?a:"",s.stack].join(".");o.isDatasetVisible(a)&&e(s)&&(void 0===c[l]&&(c[l]=[]),r.each(i.data,function(e,r){var i=c[l],o=+t.getRightValue(e);isNaN(o)||s.data[r].hidden||(i[r]=i[r]||0,n.relativePoints?i[r]=100:i[r]+=o)}))}),r.each(c,function(e){var n=r.min(e),i=r.max(e);t.min=null===t.min?n:Math.min(t.min,n),t.max=null===t.max?i:Math.max(t.max,i)})}else r.each(a,function(n,i){var a=o.getDatasetMeta(i);o.isDatasetVisible(i)&&e(a)&&r.each(n.data,function(e,n){var r=+t.getRightValue(e);isNaN(r)||a.data[n].hidden||(null===t.min?t.min=r:r<t.min&&(t.min=r),null===t.max?t.max=r:r>t.max&&(t.max=r),0!==r&&(null===t.minNotZero||r<t.minNotZero)&&(t.minNotZero=r))})});t.min=s(i.min,t.min),t.max=s(i.max,t.max),t.min===t.max&&(0!==t.min&&null!==t.min?(t.min=Math.pow(10,Math.floor(r.log10(t.min))-1),t.max=Math.pow(10,Math.floor(r.log10(t.max))+1)):(t.min=1,t.max=10))},buildTicks:function(){var e=this,t=e.options.ticks,n={min:t.min,max:t.max},o=e.ticks=i.generators.logarithmic(n,e);e.isHorizontal()||o.reverse(),e.max=r.max(o),e.min=r.min(o),t.reverse?(o.reverse(),e.start=e.max,e.end=e.min):(e.start=e.min,e.end=e.max)},convertTicksToLabels:function(){this.tickValues=this.ticks.slice(),e.Scale.prototype.convertTicksToLabels.call(this)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},getPixelForTick:function(e){return this.getPixelForValue(this.tickValues[e])},getPixelForValue:function(e){var t,n,i,o=this,a=o.start,s=+o.getRightValue(e),l=o.options.ticks;return o.isHorizontal()?(i=r.log10(o.end)-r.log10(a),0===s?n=o.left:(t=o.width,n=o.left+t/i*(r.log10(s)-r.log10(a)))):(t=o.height,0!==a||l.reverse?0===o.end&&l.reverse?(i=r.log10(o.start)-r.log10(o.minNotZero),n=s===o.end?o.top:s===o.minNotZero?o.top+.02*t:o.top+.02*t+.98*t/i*(r.log10(s)-r.log10(o.minNotZero))):0===s?n=l.reverse?o.top:o.bottom:(i=r.log10(o.end)-r.log10(a),t=o.height,n=o.bottom-t/i*(r.log10(s)-r.log10(a))):(i=r.log10(o.end)-r.log10(o.minNotZero),n=s===a?o.bottom:s===o.minNotZero?o.bottom-.02*t:o.bottom-.02*t-.98*t/i*(r.log10(s)-r.log10(o.minNotZero)))),n},getValueForPixel:function(e){var t,n,i=this,o=r.log10(i.end)-r.log10(i.start);return i.isHorizontal()?(n=i.width,t=i.start*Math.pow(10,(e-i.left)*o/n)):(n=i.height,t=Math.pow(10,(i.bottom-e)*o/n)/i.start),t}});e.scaleService.registerScaleType("logarithmic",n,t)}},{34:34,45:45}],56:[function(e,t,n){"use strict";var r=e(25),i=e(45),o=e(34);t.exports=function(e){function t(e){var t=e.options;return t.angleLines.display||t.pointLabels.display?e.chart.data.labels.length:0}function n(e){var t=e.options.pointLabels,n=i.valueOrDefault(t.fontSize,m.defaultFontSize),r=i.valueOrDefault(t.fontStyle,m.defaultFontStyle),o=i.valueOrDefault(t.fontFamily,m.defaultFontFamily);return{size:n,style:r,family:o,font:i.fontString(n,r,o)}}function a(e,t,n){return i.isArray(n)?{w:i.longestText(e,e.font,n),h:n.length*t+1.5*(n.length-1)*t}:{w:e.measureText(n).width,h:t}}function s(e,t,n,r,i){return e===r||e===i?{start:t-n/2,end:t+n/2}:e<r||e>i?{start:t-n-5,end:t}:{start:t,end:t+n+5}}function l(e){var r,o,l,u=n(e),c=Math.min(e.height/2,e.width/2),d={r:e.width,l:0,t:e.height,b:0},f={};e.ctx.font=u.font,e._pointLabelSizes=[];var p=t(e);for(r=0;r<p;r++){l=e.getPointPosition(r,c),o=a(e.ctx,u.size,e.pointLabels[r]||""),e._pointLabelSizes[r]=o;var h=e.getIndexAngle(r),g=i.toDegrees(h)%360,m=s(g,l.x,o.w,0,180),v=s(g,l.y,o.h,90,270);m.start<d.l&&(d.l=m.start,f.l=h),m.end>d.r&&(d.r=m.end,f.r=h),v.start<d.t&&(d.t=v.start,f.t=h),v.end>d.b&&(d.b=v.end,f.b=h)}e.setReductions(c,d,f)}function u(e){var t=Math.min(e.height/2,e.width/2);e.drawingArea=Math.round(t),e.setCenterPoint(0,0,0,0)}function c(e){return 0===e||180===e?"center":e<180?"left":"right"}function d(e,t,n,r){if(i.isArray(t))for(var o=n.y,a=1.5*r,s=0;s<t.length;++s)e.fillText(t[s],n.x,o),o+=a;else e.fillText(t,n.x,n.y)}function f(e,t,n){90===e||270===e?n.y-=t.h/2:(e>270||e<90)&&(n.y-=t.h)}function p(e){var r=e.ctx,o=i.valueOrDefault,a=e.options,s=a.angleLines,l=a.pointLabels;r.lineWidth=s.lineWidth,r.strokeStyle=s.color;var u=e.getDistanceFromCenterForValue(a.ticks.reverse?e.min:e.max),p=n(e);r.textBaseline="top";for(var h=t(e)-1;h>=0;h--){if(s.display){var g=e.getPointPosition(h,u);r.beginPath(),r.moveTo(e.xCenter,e.yCenter),r.lineTo(g.x,g.y),r.stroke(),r.closePath()}if(l.display){var v=e.getPointPosition(h,u+5),y=o(l.fontColor,m.defaultFontColor);r.font=p.font,r.fillStyle=y;var b=e.getIndexAngle(h),x=i.toDegrees(b);r.textAlign=c(x),f(x,e._pointLabelSizes[h],v),d(r,e.pointLabels[h]||"",v,p.size)}}}function h(e,n,r,o){var a=e.ctx;if(a.strokeStyle=i.valueAtIndexOrDefault(n.color,o-1),a.lineWidth=i.valueAtIndexOrDefault(n.lineWidth,o-1),e.options.gridLines.circular)a.beginPath(),a.arc(e.xCenter,e.yCenter,r,0,2*Math.PI),a.closePath(),a.stroke();else{var s=t(e);if(0===s)return;a.beginPath();var l=e.getPointPosition(0,r);a.moveTo(l.x,l.y);for(var u=1;u<s;u++)l=e.getPointPosition(u,r),a.lineTo(l.x,l.y);a.closePath(),a.stroke()}}function g(e){return i.isNumber(e)?e:0}var m=r.global,v={display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,color:"rgba(0, 0, 0, 0.1)",lineWidth:1},gridLines:{circular:!1},ticks:{showLabelBackdrop:!0,backdropColor:"rgba(255,255,255,0.75)",backdropPaddingY:2,backdropPaddingX:2,callback:o.formatters.linear},pointLabels:{display:!0,fontSize:10,callback:function(e){return e}}},y=e.LinearScaleBase.extend({setDimensions:function(){var e=this,t=e.options,n=t.ticks;e.width=e.maxWidth,e.height=e.maxHeight,e.xCenter=Math.round(e.width/2),e.yCenter=Math.round(e.height/2);var r=i.min([e.height,e.width]),o=i.valueOrDefault(n.fontSize,m.defaultFontSize);e.drawingArea=t.display?r/2-(o/2+n.backdropPaddingY):r/2},determineDataLimits:function(){var e=this,t=e.chart,n=Number.POSITIVE_INFINITY,r=Number.NEGATIVE_INFINITY;i.each(t.data.datasets,function(o,a){if(t.isDatasetVisible(a)){var s=t.getDatasetMeta(a);i.each(o.data,function(t,i){var o=+e.getRightValue(t);isNaN(o)||s.data[i].hidden||(n=Math.min(o,n),r=Math.max(o,r))})}}),e.min=n===Number.POSITIVE_INFINITY?0:n,e.max=r===Number.NEGATIVE_INFINITY?0:r,e.handleTickRangeOptions()},getTickLimit:function(){var e=this.options.ticks,t=i.valueOrDefault(e.fontSize,m.defaultFontSize);return Math.min(e.maxTicksLimit?e.maxTicksLimit:11,Math.ceil(this.drawingArea/(1.5*t)))},convertTicksToLabels:function(){var t=this;e.LinearScaleBase.prototype.convertTicksToLabels.call(t),t.pointLabels=t.chart.data.labels.map(t.options.pointLabels.callback,t)},getLabelForIndex:function(e,t){return+this.getRightValue(this.chart.data.datasets[t].data[e])},fit:function(){this.options.pointLabels.display?l(this):u(this)},setReductions:function(e,t,n){var r=this,i=t.l/Math.sin(n.l),o=Math.max(t.r-r.width,0)/Math.sin(n.r),a=-t.t/Math.cos(n.t),s=-Math.max(t.b-r.height,0)/Math.cos(n.b);i=g(i),o=g(o),a=g(a),s=g(s),r.drawingArea=Math.min(Math.round(e-(i+o)/2),Math.round(e-(a+s)/2)),r.setCenterPoint(i,o,a,s)},setCenterPoint:function(e,t,n,r){var i=this,o=i.width-t-i.drawingArea,a=e+i.drawingArea,s=n+i.drawingArea,l=i.height-r-i.drawingArea;i.xCenter=Math.round((a+o)/2+i.left),i.yCenter=Math.round((s+l)/2+i.top)},getIndexAngle:function(e){return e*(2*Math.PI/t(this))+(this.chart.options&&this.chart.options.startAngle?this.chart.options.startAngle:0)*Math.PI*2/360},getDistanceFromCenterForValue:function(e){var t=this;if(null===e)return 0;var n=t.drawingArea/(t.max-t.min);return t.options.ticks.reverse?(t.max-e)*n:(e-t.min)*n},getPointPosition:function(e,t){var n=this,r=n.getIndexAngle(e)-Math.PI/2;return{x:Math.round(Math.cos(r)*t)+n.xCenter,y:Math.round(Math.sin(r)*t)+n.yCenter}},getPointPositionForValue:function(e,t){return this.getPointPosition(e,this.getDistanceFromCenterForValue(t))},getBasePosition:function(){var e=this,t=e.min,n=e.max;return e.getPointPositionForValue(0,e.beginAtZero?0:t<0&&n<0?n:t>0&&n>0?t:0)},draw:function(){var e=this,t=e.options,n=t.gridLines,r=t.ticks,o=i.valueOrDefault;if(t.display){var a=e.ctx,s=this.getIndexAngle(0),l=o(r.fontSize,m.defaultFontSize),u=o(r.fontStyle,m.defaultFontStyle),c=o(r.fontFamily,m.defaultFontFamily),d=i.fontString(l,u,c);i.each(e.ticks,function(t,i){if(i>0||r.reverse){var u=e.getDistanceFromCenterForValue(e.ticksAsNumbers[i]);if(n.display&&0!==i&&h(e,n,u,i),r.display){var c=o(r.fontColor,m.defaultFontColor);if(a.font=d,a.save(),a.translate(e.xCenter,e.yCenter),a.rotate(s),r.showLabelBackdrop){var f=a.measureText(t).width;a.fillStyle=r.backdropColor,a.fillRect(-f/2-r.backdropPaddingX,-u-l/2-r.backdropPaddingY,f+2*r.backdropPaddingX,l+2*r.backdropPaddingY)}a.textAlign="center",a.textBaseline="middle",a.fillStyle=c,a.fillText(t,0,-u),a.restore()}}}),(t.angleLines.display||t.pointLabels.display)&&p(e)}}});e.scaleService.registerScaleType("radialLinear",y,v)}},{25:25,34:34,45:45}],57:[function(e,t,n){"use strict";function r(e,t){return e-t}function i(e){var t,n,r,i={},o=[];for(t=0,n=e.length;t<n;++t)i[r=e[t]]||(i[r]=!0,o.push(r));return o}function o(e,t,n,r){if("linear"===r||!e.length)return[{time:t,pos:0},{time:n,pos:1}];var i,o,a,s,l,u=[],c=[t];for(i=0,o=e.length;i<o;++i)(s=e[i])>t&&s<n&&c.push(s);for(c.push(n),i=0,o=c.length;i<o;++i)l=c[i+1],a=c[i-1],s=c[i],void 0!==a&&void 0!==l&&Math.round((l+a)/2)===s||u.push({time:s,pos:i/(o-1)});return u}function a(e,t,n){for(var r,i,o,a=0,s=e.length-1;a>=0&&a<=s;){if(r=a+s>>1,i=e[r-1]||null,o=e[r],!i)return{lo:null,hi:o};if(o[t]<n)a=r+1;else{if(!(i[t]>n))return{lo:i,hi:o};s=r-1}}return{lo:o,hi:null}}function s(e,t,n,r){var i=a(e,t,n),o=i.lo?i.hi?i.lo:e[e.length-2]:e[0],s=i.lo?i.hi?i.hi:e[e.length-1]:e[1],l=s[t]-o[t],u=l?(n-o[t])/l:0,c=(s[r]-o[r])*u;return o[r]+c}function l(e,t){var n=t.parser,r=t.parser||t.format;return"function"==typeof n?n(e):"string"==typeof e&&"string"==typeof r?v(e,r):(e instanceof v||(e=v(e)),e.isValid()?e:"function"==typeof r?r(e):e)}function u(e,t){if(b.isNullOrUndef(e))return null;var n=t.options.time,r=l(t.getRightValue(e),n);return r.isValid()?(n.round&&r.startOf(n.round),r.valueOf()):null}function c(e,t,n,r){var i,o,a,s=t-e,l=_[n],u=l.size,c=l.steps;if(!c)return Math.ceil(s/((r||1)*u));for(i=0,o=c.length;i<o&&(a=c[i],!(Math.ceil(s/(u*a))<=r));++i);return a}function d(e,t,n,r){var i,o,a,s=C.length;for(i=C.indexOf(e);i<s-1;++i)if(o=_[C[i]],a=o.steps?o.steps[o.steps.length-1]:w,o.common&&Math.ceil((n-t)/(a*o.size))<=r)return C[i];return C[s-1]}function f(e,t,n,r){var i,o,a=v.duration(v(r).diff(v(n)));for(i=C.length-1;i>=C.indexOf(t);i--)if(o=C[i],_[o].common&&a.as(o)>=e.length)return o;return C[t?C.indexOf(t):0]}function p(e){for(var t=C.indexOf(e)+1,n=C.length;t<n;++t)if(_[C[t]].common)return C[t]}function h(e,t,n,r){var i,o=r.time,a=o.unit||d(o.minUnit,e,t,n),s=p(a),l=b.valueOrDefault(o.stepSize,o.unitStepSize),u="week"===a&&o.isoWeekday,f=r.ticks.major.enabled,h=_[a],g=v(e),m=v(t),y=[];for(l||(l=c(e,t,a,n)),u&&(g=g.isoWeekday(u),m=m.isoWeekday(u)),g=g.startOf(u?"day":a),(m=m.startOf(u?"day":a))<t&&m.add(1,a),i=v(g),f&&s&&!u&&!o.round&&(i.startOf(s),i.add(~~((g-i)/(h.size*l))*l,a));i<m;i.add(l,a))y.push(+i);return y.push(+i),y}function g(e,t,n,r,i){var o,a,l=0,u=0;return i.offset&&t.length&&(i.time.min||(o=t.length>1?t[1]:r,a=t[0],l=(s(e,"time",o,"pos")-s(e,"time",a,"pos"))/2),i.time.max||(o=t[t.length-1],a=t.length>1?t[t.length-2]:n,u=(s(e,"time",o,"pos")-s(e,"time",a,"pos"))/2)),{left:l,right:u}}function m(e,t){var n,r,i,o,a=[];for(n=0,r=e.length;n<r;++n)i=e[n],o=!!t&&i===+v(i).startOf(t),a.push({value:i,major:o});return a}var v=e(1);v="function"==typeof v?v:window.moment;var y=e(25),b=e(45),x=Number.MIN_SAFE_INTEGER||-9007199254740991,w=Number.MAX_SAFE_INTEGER||9007199254740991,_={millisecond:{common:!0,size:1,steps:[1,2,5,10,20,50,100,250,500]},second:{common:!0,size:1e3,steps:[1,2,5,10,30]},minute:{common:!0,size:6e4,steps:[1,2,5,10,30]},hour:{common:!0,size:36e5,steps:[1,2,3,6,12]},day:{common:!0,size:864e5,steps:[1,2,5]},week:{common:!1,size:6048e5,steps:[1,2,3,4]},month:{common:!0,size:2628e6,steps:[1,2,3]},quarter:{common:!1,size:7884e6,steps:[1,2,3,4]},year:{common:!0,size:3154e7}},C=Object.keys(_);t.exports=function(e){var t={position:"bottom",distribution:"linear",bounds:"data",time:{parser:!1,format:!1,unit:!1,round:!1,displayFormat:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{millisecond:"h:mm:ss.SSS a",second:"h:mm:ss a",minute:"h:mm a",hour:"hA",day:"MMM D",week:"ll",month:"MMM YYYY",quarter:"[Q]Q - YYYY",year:"YYYY"}},ticks:{autoSkip:!1,source:"auto",major:{enabled:!1}}},n=e.Scale.extend({initialize:function(){if(!v)throw new Error("Chart.js - Moment.js could not be found! You must include it before Chart.js to use the time scale. Download at https://momentjs.com");this.mergeTicksOptions(),e.Scale.prototype.initialize.call(this)},update:function(){var t=this,n=t.options;return n.time&&n.time.format&&console.warn("options.time.format is deprecated and replaced by options.time.parser."),e.Scale.prototype.update.apply(t,arguments)},getRightValue:function(t){return t&&void 0!==t.t&&(t=t.t),e.Scale.prototype.getRightValue.call(this,t)},determineDataLimits:function(){var e,t,n,o,a,s,l=this,c=l.chart,d=l.options.time,f=w,p=x,h=[],g=[],m=[];for(e=0,n=c.data.labels.length;e<n;++e)m.push(u(c.data.labels[e],l));for(e=0,n=(c.data.datasets||[]).length;e<n;++e)if(c.isDatasetVisible(e))if(a=c.data.datasets[e].data,b.isObject(a[0]))for(g[e]=[],t=0,o=a.length;t<o;++t)s=u(a[t],l),h.push(s),g[e][t]=s;else h.push.apply(h,m),g[e]=m.slice(0);else g[e]=[];m.length&&(m=i(m).sort(r),f=Math.min(f,m[0]),p=Math.max(p,m[m.length-1])),h.length&&(h=i(h).sort(r),f=Math.min(f,h[0]),p=Math.max(p,h[h.length-1])),f=u(d.min,l)||f,p=u(d.max,l)||p,f=f===w?+v().startOf("day"):f,p=p===x?+v().endOf("day")+1:p,l.min=Math.min(f,p),l.max=Math.max(f+1,p),l._horizontal=l.isHorizontal(),l._table=[],l._timestamps={data:h,datasets:g,labels:m}},buildTicks:function(){var e,t,n,r=this,i=r.min,a=r.max,s=r.options,l=s.time,c=[],d=[];switch(s.ticks.source){case"data":c=r._timestamps.data;break;case"labels":c=r._timestamps.labels;break;case"auto":default:c=h(i,a,r.getLabelCapacity(i),s)}for("ticks"===s.bounds&&c.length&&(i=c[0],a=c[c.length-1]),i=u(l.min,r)||i,a=u(l.max,r)||a,e=0,t=c.length;e<t;++e)(n=c[e])>=i&&n<=a&&d.push(n);return r.min=i,r.max=a,r._unit=l.unit||f(d,l.minUnit,r.min,r.max),r._majorUnit=p(r._unit),r._table=o(r._timestamps.data,i,a,s.distribution),r._offsets=g(r._table,d,i,a,s),m(d,r._majorUnit)},getLabelForIndex:function(e,t){var n=this,r=n.chart.data,i=n.options.time,o=r.labels&&e<r.labels.length?r.labels[e]:"",a=r.datasets[t].data[e];return b.isObject(a)&&(o=n.getRightValue(a)),i.tooltipFormat&&(o=l(o,i).format(i.tooltipFormat)),o},tickFormatFunction:function(e,t,n,r){var i=this,o=i.options,a=e.valueOf(),s=o.time.displayFormats,l=s[i._unit],u=i._majorUnit,c=s[u],d=e.clone().startOf(u).valueOf(),f=o.ticks.major,p=f.enabled&&u&&c&&a===d,h=e.format(r||(p?c:l)),g=p?f:o.ticks.minor,m=b.valueOrDefault(g.callback,g.userCallback);return m?m(h,t,n):h},convertTicksToLabels:function(e){var t,n,r=[];for(t=0,n=e.length;t<n;++t)r.push(this.tickFormatFunction(v(e[t].value),t,e));return r},getPixelForOffset:function(e){var t=this,n=t._horizontal?t.width:t.height,r=t._horizontal?t.left:t.top,i=s(t._table,"time",e,"pos");return r+n*(t._offsets.left+i)/(t._offsets.left+1+t._offsets.right)},getPixelForValue:function(e,t,n){var r=this,i=null;if(void 0!==t&&void 0!==n&&(i=r._timestamps.datasets[n][t]),null===i&&(i=u(e,r)),null!==i)return r.getPixelForOffset(i)},getPixelForTick:function(e){var t=this.getTicks();return e>=0&&e<t.length?this.getPixelForOffset(t[e].value):null},getValueForPixel:function(e){var t=this,n=t._horizontal?t.width:t.height,r=t._horizontal?t.left:t.top,i=(n?(e-r)/n:0)*(t._offsets.left+1+t._offsets.left)-t._offsets.right,o=s(t._table,"pos",i,"time");return v(o)},getLabelWidth:function(e){var t=this,n=t.options.ticks,r=t.ctx.measureText(e).width,i=b.toRadians(n.maxRotation),o=Math.cos(i),a=Math.sin(i);return r*o+b.valueOrDefault(n.fontSize,y.global.defaultFontSize)*a},getLabelCapacity:function(e){var t=this,n=t.options.time.displayFormats.millisecond,r=t.tickFormatFunction(v(e),0,[],n),i=t.getLabelWidth(r),o=t.isHorizontal()?t.width:t.height;return Math.floor(o/i)}});e.scaleService.registerScaleType("time",n,t)}},{1:1,25:25,45:45}]},{},[7])(7)}),function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e,t){function n(){return new Date(Date.UTC.apply(Date,arguments))}function r(){var e=new Date;return n(e.getFullYear(),e.getMonth(),e.getDate())}function i(e,t){return e.getUTCFullYear()===t.getUTCFullYear()&&e.getUTCMonth()===t.getUTCMonth()&&e.getUTCDate()===t.getUTCDate()}function o(e){return function(){return this[e].apply(this,arguments)}}function a(e){return e&&!isNaN(e.getTime())}function s(t,n){function r(e,t){return t.toLowerCase()}var i=e(t).data(),o={},a=new RegExp("^"+n.toLowerCase()+"([A-Z])");n=new RegExp("^"+n.toLowerCase());for(var s in i)n.test(s)&&(o[s.replace(a,r)]=i[s]);return o}function l(t){var n={};if(m[t]||(t=t.split("-")[0],m[t])){var r=m[t];return e.each(g,function(e,t){t in r&&(n[t]=r[t])}),n}}var u=function(){var t={get:function(e){return this.slice(e)[0]},contains:function(e){for(var t=e&&e.valueOf(),n=0,r=this.length;n<r;n++)if(this[n].valueOf()===t)return n;return-1},remove:function(e){this.splice(e,1)},replace:function(t){t&&(e.isArray(t)||(t=[t]),this.clear(),this.push.apply(this,t))},clear:function(){this.length=0},copy:function(){var e=new u;return e.replace(this),e}};return function(){var n=[];return n.push.apply(n,arguments),e.extend(n,t),n}}(),c=function(t,n){e(t).data("datepicker",this),this._process_options(n),this.dates=new u,this.viewDate=this.o.defaultViewDate,this.focusDate=null,this.element=e(t),this.isInput=this.element.is("input"),this.inputField=this.isInput?this.element:this.element.find("input"),this.component=!!this.element.hasClass("date")&&this.element.find(".add-on, .input-group-addon, .btn"),this.hasInput=this.component&&this.inputField.length,this.component&&0===this.component.length&&(this.component=!1),this.isInline=!this.component&&this.element.is("div"),this.picker=e(v.template),this._check_template(this.o.templates.leftArrow)&&this.picker.find(".prev").html(this.o.templates.leftArrow),this._check_template(this.o.templates.rightArrow)&&this.picker.find(".next").html(this.o.templates.rightArrow),this._buildEvents(),this._attachEvents(),this.isInline?this.picker.addClass("datepicker-inline").appendTo(this.element):this.picker.addClass("datepicker-dropdown dropdown-menu"),this.o.rtl&&this.picker.addClass("datepicker-rtl"),this.viewMode=this.o.startView,this.o.calendarWeeks&&this.picker.find("thead .datepicker-title, tfoot .today, tfoot .clear").attr("colspan",function(e,t){return parseInt(t)+1}),this._allow_update=!1,this.setStartDate(this._o.startDate),this.setEndDate(this._o.endDate),this.setDaysOfWeekDisabled(this.o.daysOfWeekDisabled),this.setDaysOfWeekHighlighted(this.o.daysOfWeekHighlighted),this.setDatesDisabled(this.o.datesDisabled),this.fillDow(),this.fillMonths(),this._allow_update=!0,this.update(),this.showMode(),this.isInline&&this.show()};c.prototype={constructor:c,_resolveViewName:function(e,n){return 0===e||"days"===e||"month"===e?0:1===e||"months"===e||"year"===e?1:2===e||"years"===e||"decade"===e?2:3===e||"decades"===e||"century"===e?3:4===e||"centuries"===e||"millennium"===e?4:n!==t&&n},_check_template:function(n){try{return n!==t&&""!==n&&((n.match(/[<>]/g)||[]).length<=0||e(n).length>0)}catch(e){return!1}},_process_options:function(t){this._o=e.extend({},this._o,t);var i=this.o=e.extend({},this._o),o=i.language;m[o]||(o=o.split("-")[0],m[o]||(o=h.language)),i.language=o,i.startView=this._resolveViewName(i.startView,0),i.minViewMode=this._resolveViewName(i.minViewMode,0),i.maxViewMode=this._resolveViewName(i.maxViewMode,4),i.startView=Math.min(i.startView,i.maxViewMode),i.startView=Math.max(i.startView,i.minViewMode),!0!==i.multidate&&(i.multidate=Number(i.multidate)||!1,!1!==i.multidate&&(i.multidate=Math.max(0,i.multidate))),i.multidateSeparator=String(i.multidateSeparator),i.weekStart%=7,i.weekEnd=(i.weekStart+6)%7;var a=v.parseFormat(i.format);i.startDate!==-1/0&&(i.startDate?i.startDate instanceof Date?i.startDate=this._local_to_utc(this._zero_time(i.startDate)):i.startDate=v.parseDate(i.startDate,a,i.language,i.assumeNearbyYear):i.startDate=-1/0),i.endDate!==1/0&&(i.endDate?i.endDate instanceof Date?i.endDate=this._local_to_utc(this._zero_time(i.endDate)):i.endDate=v.parseDate(i.endDate,a,i.language,i.assumeNearbyYear):i.endDate=1/0),i.daysOfWeekDisabled=i.daysOfWeekDisabled||[],e.isArray(i.daysOfWeekDisabled)||(i.daysOfWeekDisabled=i.daysOfWeekDisabled.split(/[,\s]*/)),i.daysOfWeekDisabled=e.map(i.daysOfWeekDisabled,function(e){return parseInt(e,10)}),i.daysOfWeekHighlighted=i.daysOfWeekHighlighted||[],e.isArray(i.daysOfWeekHighlighted)||(i.daysOfWeekHighlighted=i.daysOfWeekHighlighted.split(/[,\s]*/)),i.daysOfWeekHighlighted=e.map(i.daysOfWeekHighlighted,function(e){return parseInt(e,10)}),i.datesDisabled=i.datesDisabled||[],e.isArray(i.datesDisabled)||(i.datesDisabled=[i.datesDisabled]),i.datesDisabled=e.map(i.datesDisabled,function(e){return v.parseDate(e,a,i.language,i.assumeNearbyYear)});var s=String(i.orientation).toLowerCase().split(/\s+/g),l=i.orientation.toLowerCase();if(s=e.grep(s,function(e){return/^auto|left|right|top|bottom$/.test(e)}),i.orientation={x:"auto",y:"auto"},l&&"auto"!==l)if(1===s.length)switch(s[0]){case"top":case"bottom":i.orientation.y=s[0];break;case"left":case"right":i.orientation.x=s[0]}else l=e.grep(s,function(e){return/^left|right$/.test(e)}),i.orientation.x=l[0]||"auto",l=e.grep(s,function(e){return/^top|bottom$/.test(e)}),i.orientation.y=l[0]||"auto";else;if(i.defaultViewDate){var u=i.defaultViewDate.year||(new Date).getFullYear(),c=i.defaultViewDate.month||0,d=i.defaultViewDate.day||1;i.defaultViewDate=n(u,c,d)}else i.defaultViewDate=r()},_events:[],_secondaryEvents:[],_applyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(r=t,i=e[o][1]):3===e[o].length&&(r=e[o][1],i=e[o][2]),n.on(i,r)},_unapplyEvents:function(e){for(var n,r,i,o=0;o<e.length;o++)n=e[o][0],2===e[o].length?(i=t,r=e[o][1]):3===e[o].length&&(i=e[o][1],r=e[o][2]),n.off(r,i)},_buildEvents:function(){var t={keyup:e.proxy(function(t){-1===e.inArray(t.keyCode,[27,37,39,38,40,32,13,9])&&this.update()},this),keydown:e.proxy(this.keydown,this),paste:e.proxy(this.paste,this)};!0===this.o.showOnFocus&&(t.focus=e.proxy(this.show,this)),this.isInput?this._events=[[this.element,t]]:this.component&&this.hasInput?this._events=[[this.inputField,t],[this.component,{click:e.proxy(this.show,this)}]]:this._events=[[this.element,{click:e.proxy(this.show,this),keydown:e.proxy(this.keydown,this)}]],this._events.push([this.element,"*",{blur:e.proxy(function(e){this._focused_from=e.target},this)}],[this.element,{blur:e.proxy(function(e){this._focused_from=e.target},this)}]),this.o.immediateUpdates&&this._events.push([this.element,{"changeYear changeMonth":e.proxy(function(e){this.update(e.date)},this)}]),this._secondaryEvents=[[this.picker,{click:e.proxy(this.click,this)}],[e(window),{resize:e.proxy(this.place,this)}],[e(document),{mousedown:e.proxy(function(e){this.element.is(e.target)||this.element.find(e.target).length||this.picker.is(e.target)||this.picker.find(e.target).length||this.isInline||this.hide()},this)}]]},_attachEvents:function(){this._detachEvents(),this._applyEvents(this._events)},_detachEvents:function(){this._unapplyEvents(this._events)},_attachSecondaryEvents:function(){this._detachSecondaryEvents(),this._applyEvents(this._secondaryEvents)},_detachSecondaryEvents:function(){this._unapplyEvents(this._secondaryEvents)},_trigger:function(t,n){var r=n||this.dates.get(-1),i=this._utc_to_local(r);this.element.trigger({type:t,date:i,dates:e.map(this.dates,this._utc_to_local),format:e.proxy(function(e,t){0===arguments.length?(e=this.dates.length-1,t=this.o.format):"string"==typeof e&&(t=e,e=this.dates.length-1),t=t||this.o.format;var n=this.dates.get(e);return v.formatDate(n,t,this.o.language)},this)})},show:function(){if(!(this.inputField.prop("disabled")||this.inputField.prop("readonly")&&!1===this.o.enableOnReadonly))return this.isInline||this.picker.appendTo(this.o.container),this.place(),this.picker.show(),this._attachSecondaryEvents(),this._trigger("show"),(window.navigator.msMaxTouchPoints||"ontouchstart"in document)&&this.o.disableTouchKeyboard&&e(this.element).blur(),this},hide:function(){return this.isInline||!this.picker.is(":visible")?this:(this.focusDate=null,this.picker.hide().detach(),this._detachSecondaryEvents(),this.viewMode=this.o.startView,this.showMode(),this.o.forceParse&&this.inputField.val()&&this.setValue(),this._trigger("hide"),this)},destroy:function(){return this.hide(),this._detachEvents(),this._detachSecondaryEvents(),this.picker.remove(),delete this.element.data().datepicker,this.isInput||delete this.element.data().date,this},paste:function(t){var n;if(t.originalEvent.clipboardData&&t.originalEvent.clipboardData.types&&-1!==e.inArray("text/plain",t.originalEvent.clipboardData.types))n=t.originalEvent.clipboardData.getData("text/plain");else{if(!window.clipboardData)return;n=window.clipboardData.getData("Text")}this.setDate(n),this.update(),t.preventDefault()},_utc_to_local:function(e){return e&&new Date(e.getTime()+6e4*e.getTimezoneOffset())},_local_to_utc:function(e){return e&&new Date(e.getTime()-6e4*e.getTimezoneOffset())},_zero_time:function(e){return e&&new Date(e.getFullYear(),e.getMonth(),e.getDate())},_zero_utc_time:function(e){return e&&new Date(Date.UTC(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()))},getDates:function(){return e.map(this.dates,this._utc_to_local)},getUTCDates:function(){return e.map(this.dates,function(e){return new Date(e)})},getDate:function(){return this._utc_to_local(this.getUTCDate())},getUTCDate:function(){var e=this.dates.get(-1);return void 0!==e?new Date(e):null},clearDates:function(){this.inputField&&this.inputField.val(""),this.update(),this._trigger("changeDate"),this.o.autoclose&&this.hide()},setDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,t),this._trigger("changeDate"),this.setValue(),this},setUTCDates:function(){var t=e.isArray(arguments[0])?arguments[0]:arguments;return this.update.apply(this,e.map(t,this._utc_to_local)),this._trigger("changeDate"),this.setValue(),this},setDate:o("setDates"),setUTCDate:o("setUTCDates"),remove:o("destroy"),setValue:function(){var e=this.getFormattedDate();return this.inputField.val(e),this},getFormattedDate:function(n){n===t&&(n=this.o.format);var r=this.o.language;return e.map(this.dates,function(e){return v.formatDate(e,n,r)}).join(this.o.multidateSeparator)},getStartDate:function(){return this.o.startDate},setStartDate:function(e){return this._process_options({startDate:e}),this.update(),this.updateNavArrows(),this},getEndDate:function(){return this.o.endDate},setEndDate:function(e){return this._process_options({endDate:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekDisabled:function(e){return this._process_options({daysOfWeekDisabled:e}),this.update(),this.updateNavArrows(),this},setDaysOfWeekHighlighted:function(e){return this._process_options({daysOfWeekHighlighted:e}),this.update(),this},setDatesDisabled:function(e){this._process_options({datesDisabled:e}),this.update(),this.updateNavArrows()},place:function(){if(this.isInline)return this;var t=this.picker.outerWidth(),n=this.picker.outerHeight(),r=e(this.o.container),i=r.width(),o="body"===this.o.container?e(document).scrollTop():r.scrollTop(),a=r.offset(),s=[];this.element.parents().each(function(){var t=e(this).css("z-index");"auto"!==t&&0!==t&&s.push(parseInt(t))});var l=Math.max.apply(Math,s)+this.o.zIndexOffset,u=this.component?this.component.parent().offset():this.element.offset(),c=this.component?this.component.outerHeight(!0):this.element.outerHeight(!1),d=this.component?this.component.outerWidth(!0):this.element.outerWidth(!1),f=u.left-a.left,p=u.top-a.top;"body"!==this.o.container&&(p+=o),this.picker.removeClass("datepicker-orient-top datepicker-orient-bottom datepicker-orient-right datepicker-orient-left"),"auto"!==this.o.orientation.x?(this.picker.addClass("datepicker-orient-"+this.o.orientation.x),"right"===this.o.orientation.x&&(f-=t-d)):u.left<0?(this.picker.addClass("datepicker-orient-left"),f-=u.left-10):f+t>i?(this.picker.addClass("datepicker-orient-right"),f+=d-t):this.picker.addClass("datepicker-orient-left");var h=this.o.orientation.y;if("auto"===h&&(h=-o+p-n<0?"bottom":"top"),this.picker.addClass("datepicker-orient-"+h),"top"===h?p-=n+parseInt(this.picker.css("padding-top")):p+=c,this.o.rtl){var g=i-(f+d);this.picker.css({top:p,right:g,zIndex:l})}else this.picker.css({top:p,left:f,zIndex:l});return this},_allow_update:!0,update:function(){if(!this._allow_update)return this;var t=this.dates.copy(),n=[],r=!1;return arguments.length?(e.each(arguments,e.proxy(function(e,t){t instanceof Date&&(t=this._local_to_utc(t)),n.push(t)},this)),r=!0):(n=this.isInput?this.element.val():this.element.data("date")||this.inputField.val(),n=n&&this.o.multidate?n.split(this.o.multidateSeparator):[n],delete this.element.data().date),n=e.map(n,e.proxy(function(e){return v.parseDate(e,this.o.format,this.o.language,this.o.assumeNearbyYear)},this)),n=e.grep(n,e.proxy(function(e){return!this.dateWithinRange(e)||!e},this),!0),this.dates.replace(n),this.dates.length?this.viewDate=new Date(this.dates.get(-1)):this.viewDate<this.o.startDate?this.viewDate=new Date(this.o.startDate):this.viewDate>this.o.endDate?this.viewDate=new Date(this.o.endDate):this.viewDate=this.o.defaultViewDate,r?this.setValue():n.length&&String(t)!==String(this.dates)&&this._trigger("changeDate"),!this.dates.length&&t.length&&this._trigger("clearDate"),this.fill(),this.element.change(),this},fillDow:function(){var t=this.o.weekStart,n="<tr>";for(this.o.calendarWeeks&&(this.picker.find(".datepicker-days .datepicker-switch").attr("colspan",function(e,t){return parseInt(t)+1}),n+='<th class="cw">&#160;</th>');t<this.o.weekStart+7;)n+='<th class="dow',e.inArray(t,this.o.daysOfWeekDisabled)>-1&&(n+=" disabled"),n+='">'+m[this.o.language].daysMin[t++%7]+"</th>";n+="</tr>",this.picker.find(".datepicker-days thead").append(n)},fillMonths:function(){for(var e=this._utc_to_local(this.viewDate),t="",n=0;n<12;)t+='<span class="month'+(e&&e.getMonth()===n?" focused":"")+'">'+m[this.o.language].monthsShort[n++]+"</span>";this.picker.find(".datepicker-months td").html(t)},setRange:function(t){t&&t.length?this.range=e.map(t,function(e){return e.valueOf()}):delete this.range,this.fill()},getClassNames:function(t){var n=[],r=this.viewDate.getUTCFullYear(),i=this.viewDate.getUTCMonth(),o=new Date;return t.getUTCFullYear()<r||t.getUTCFullYear()===r&&t.getUTCMonth()<i?n.push("old"):(t.getUTCFullYear()>r||t.getUTCFullYear()===r&&t.getUTCMonth()>i)&&n.push("new"),this.focusDate&&t.valueOf()===this.focusDate.valueOf()&&n.push("focused"),this.o.todayHighlight&&t.getUTCFullYear()===o.getFullYear()&&t.getUTCMonth()===o.getMonth()&&t.getUTCDate()===o.getDate()&&n.push("today"),-1!==this.dates.contains(t)&&n.push("active"),this.dateWithinRange(t)||n.push("disabled"),this.dateIsDisabled(t)&&n.push("disabled","disabled-date"),-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekHighlighted)&&n.push("highlighted"),this.range&&(t>this.range[0]&&t<this.range[this.range.length-1]&&n.push("range"),-1!==e.inArray(t.valueOf(),this.range)&&n.push("selected"),t.valueOf()===this.range[0]&&n.push("range-start"),t.valueOf()===this.range[this.range.length-1]&&n.push("range-end")),n},_fill_yearsView:function(n,r,i,o,a,s,l,u){var c,d,f,p,h,g,m,v,y,b,x;for(c="",d=this.picker.find(n),f=parseInt(a/i,10)*i,h=parseInt(s/o,10)*o,g=parseInt(l/o,10)*o,p=e.map(this.dates,function(e){return parseInt(e.getUTCFullYear()/o,10)*o}),d.find(".datepicker-switch").text(f+"-"+(f+9*o)),m=f-o,v=-1;v<11;v+=1)y=[r],b=null,-1===v?y.push("old"):10===v&&y.push("new"),-1!==e.inArray(m,p)&&y.push("active"),(m<h||m>g)&&y.push("disabled"),m===this.viewDate.getFullYear()&&y.push("focused"),u!==e.noop&&((x=u(new Date(m,0,1)))===t?x={}:"boolean"==typeof x?x={enabled:x}:"string"==typeof x&&(x={classes:x}),!1===x.enabled&&y.push("disabled"),x.classes&&(y=y.concat(x.classes.split(/\s+/))),x.tooltip&&(b=x.tooltip)),c+='<span class="'+y.join(" ")+'"'+(b?' title="'+b+'"':"")+">"+m+"</span>",m+=o;d.find("td").html(c)},fill:function(){var r,i,o=new Date(this.viewDate),a=o.getUTCFullYear(),s=o.getUTCMonth(),l=this.o.startDate!==-1/0?this.o.startDate.getUTCFullYear():-1/0,u=this.o.startDate!==-1/0?this.o.startDate.getUTCMonth():-1/0,c=this.o.endDate!==1/0?this.o.endDate.getUTCFullYear():1/0,d=this.o.endDate!==1/0?this.o.endDate.getUTCMonth():1/0,f=m[this.o.language].today||m.en.today||"",p=m[this.o.language].clear||m.en.clear||"",h=m[this.o.language].titleFormat||m.en.titleFormat;if(!isNaN(a)&&!isNaN(s)){this.picker.find(".datepicker-days .datepicker-switch").text(v.formatDate(o,h,this.o.language)),this.picker.find("tfoot .today").text(f).toggle(!1!==this.o.todayBtn),this.picker.find("tfoot .clear").text(p).toggle(!1!==this.o.clearBtn),this.picker.find("thead .datepicker-title").text(this.o.title).toggle(""!==this.o.title),this.updateNavArrows(),this.fillMonths();var g=n(a,s-1,28),y=v.getDaysInMonth(g.getUTCFullYear(),g.getUTCMonth());g.setUTCDate(y),g.setUTCDate(y-(g.getUTCDay()-this.o.weekStart+7)%7);var b=new Date(g);g.getUTCFullYear()<100&&b.setUTCFullYear(g.getUTCFullYear()),b.setUTCDate(b.getUTCDate()+42),b=b.valueOf();for(var x,w=[];g.valueOf()<b;){if(g.getUTCDay()===this.o.weekStart&&(w.push("<tr>"),this.o.calendarWeeks)){var _=new Date(+g+(this.o.weekStart-g.getUTCDay()-7)%7*864e5),C=new Date(Number(_)+(11-_.getUTCDay())%7*864e5),k=new Date(Number(k=n(C.getUTCFullYear(),0,1))+(11-k.getUTCDay())%7*864e5),S=(C-k)/864e5/7+1;w.push('<td class="cw">'+S+"</td>")}(x=this.getClassNames(g)).push("day"),this.o.beforeShowDay!==e.noop&&((i=this.o.beforeShowDay(this._utc_to_local(g)))===t?i={}:"boolean"==typeof i?i={enabled:i}:"string"==typeof i&&(i={classes:i}),!1===i.enabled&&x.push("disabled"),i.classes&&(x=x.concat(i.classes.split(/\s+/))),i.tooltip&&(r=i.tooltip)),x=e.unique(x),w.push('<td class="'+x.join(" ")+'"'+(r?' title="'+r+'"':"")+">"+g.getUTCDate()+"</td>"),r=null,g.getUTCDay()===this.o.weekEnd&&w.push("</tr>"),g.setUTCDate(g.getUTCDate()+1)}this.picker.find(".datepicker-days tbody").empty().append(w.join(""));var $=m[this.o.language].monthsTitle||m.en.monthsTitle||"Months",M=this.picker.find(".datepicker-months").find(".datepicker-switch").text(this.o.maxViewMode<2?$:a).end().find("span").removeClass("active");if(e.each(this.dates,function(e,t){t.getUTCFullYear()===a&&M.eq(t.getUTCMonth()).addClass("active")}),(a<l||a>c)&&M.addClass("disabled"),a===l&&M.slice(0,u).addClass("disabled"),a===c&&M.slice(d+1).addClass("disabled"),this.o.beforeShowMonth!==e.noop){var T=this;e.each(M,function(n,r){var i=new Date(a,n,1),o=T.o.beforeShowMonth(i);o===t?o={}:"boolean"==typeof o?o={enabled:o}:"string"==typeof o&&(o={classes:o}),!1!==o.enabled||e(r).hasClass("disabled")||e(r).addClass("disabled"),o.classes&&e(r).addClass(o.classes),o.tooltip&&e(r).prop("title",o.tooltip)})}this._fill_yearsView(".datepicker-years","year",10,1,a,l,c,this.o.beforeShowYear),this._fill_yearsView(".datepicker-decades","decade",100,10,a,l,c,this.o.beforeShowDecade),this._fill_yearsView(".datepicker-centuries","century",1e3,100,a,l,c,this.o.beforeShowCentury)}},updateNavArrows:function(){if(this._allow_update){var e=new Date(this.viewDate),t=e.getUTCFullYear(),n=e.getUTCMonth();switch(this.viewMode){case 0:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()&&n<=this.o.startDate.getUTCMonth()?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()&&n>=this.o.endDate.getUTCMonth()?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"});break;case 1:case 2:case 3:case 4:this.o.startDate!==-1/0&&t<=this.o.startDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".prev").css({visibility:"hidden"}):this.picker.find(".prev").css({visibility:"visible"}),this.o.endDate!==1/0&&t>=this.o.endDate.getUTCFullYear()||this.o.maxViewMode<2?this.picker.find(".next").css({visibility:"hidden"}):this.picker.find(".next").css({visibility:"visible"})}}},click:function(t){t.preventDefault(),t.stopPropagation();var i,o,a,s,l,u,c;(i=e(t.target)).hasClass("datepicker-switch")&&this.showMode(1);var d=i.closest(".prev, .next");d.length>0&&(o=v.modes[this.viewMode].navStep*(d.hasClass("prev")?-1:1),0===this.viewMode?(this.viewDate=this.moveMonth(this.viewDate,o),this._trigger("changeMonth",this.viewDate)):(this.viewDate=this.moveYear(this.viewDate,o),1===this.viewMode&&this._trigger("changeYear",this.viewDate)),this.fill()),i.hasClass("today")&&!i.hasClass("day")&&(this.showMode(-2),this._setDate(r(),"linked"===this.o.todayBtn?null:"view")),i.hasClass("clear")&&this.clearDates(),i.hasClass("disabled")||(i.hasClass("day")&&(a=parseInt(i.text(),10)||1,s=this.viewDate.getUTCFullYear(),l=this.viewDate.getUTCMonth(),i.hasClass("old")&&(0===l?(l=11,s-=1,u=!0,c=!0):(l-=1,u=!0)),i.hasClass("new")&&(11===l?(l=0,s+=1,u=!0,c=!0):(l+=1,u=!0)),this._setDate(n(s,l,a)),c&&this._trigger("changeYear",this.viewDate),u&&this._trigger("changeMonth",this.viewDate)),i.hasClass("month")&&(this.viewDate.setUTCDate(1),a=1,l=i.parent().find("span").index(i),s=this.viewDate.getUTCFullYear(),this.viewDate.setUTCMonth(l),this._trigger("changeMonth",this.viewDate),1===this.o.minViewMode?(this._setDate(n(s,l,a)),this.showMode()):this.showMode(-1),this.fill()),(i.hasClass("year")||i.hasClass("decade")||i.hasClass("century"))&&(this.viewDate.setUTCDate(1),a=1,l=0,s=parseInt(i.text(),10)||0,this.viewDate.setUTCFullYear(s),i.hasClass("year")&&(this._trigger("changeYear",this.viewDate),2===this.o.minViewMode&&this._setDate(n(s,l,a))),i.hasClass("decade")&&(this._trigger("changeDecade",this.viewDate),3===this.o.minViewMode&&this._setDate(n(s,l,a))),i.hasClass("century")&&(this._trigger("changeCentury",this.viewDate),4===this.o.minViewMode&&this._setDate(n(s,l,a))),this.showMode(-1),this.fill())),this.picker.is(":visible")&&this._focused_from&&e(this._focused_from).focus(),delete this._focused_from},_toggle_multidate:function(e){var t=this.dates.contains(e);if(e||this.dates.clear(),-1!==t?(!0===this.o.multidate||this.o.multidate>1||this.o.toggleActive)&&this.dates.remove(t):!1===this.o.multidate?(this.dates.clear(),this.dates.push(e)):this.dates.push(e),"number"==typeof this.o.multidate)for(;this.dates.length>this.o.multidate;)this.dates.remove(0)},_setDate:function(e,t){t&&"date"!==t||this._toggle_multidate(e&&new Date(e)),t&&"view"!==t||(this.viewDate=e&&new Date(e)),this.fill(),this.setValue(),t&&"view"===t||this._trigger("changeDate"),this.inputField&&this.inputField.change(),!this.o.autoclose||t&&"date"!==t||this.hide()},moveDay:function(e,t){var n=new Date(e);return n.setUTCDate(e.getUTCDate()+t),n},moveWeek:function(e,t){return this.moveDay(e,7*t)},moveMonth:function(e,t){if(!a(e))return this.o.defaultViewDate;if(!t)return e;var n,r,i=new Date(e.valueOf()),o=i.getUTCDate(),s=i.getUTCMonth(),l=Math.abs(t);if(t=t>0?1:-1,1===l)r=-1===t?function(){return i.getUTCMonth()===s}:function(){return i.getUTCMonth()!==n},n=s+t,i.setUTCMonth(n),(n<0||n>11)&&(n=(n+12)%12);else{for(var u=0;u<l;u++)i=this.moveMonth(i,t);n=i.getUTCMonth(),i.setUTCDate(o),r=function(){return n!==i.getUTCMonth()}}for(;r();)i.setUTCDate(--o),i.setUTCMonth(n);return i},moveYear:function(e,t){return this.moveMonth(e,12*t)},moveAvailableDate:function(e,t,n){do{if(e=this[n](e,t),!this.dateWithinRange(e))return!1;n="moveDay"}while(this.dateIsDisabled(e));return e},weekOfDateIsDisabled:function(t){return-1!==e.inArray(t.getUTCDay(),this.o.daysOfWeekDisabled)},dateIsDisabled:function(t){return this.weekOfDateIsDisabled(t)||e.grep(this.o.datesDisabled,function(e){return i(t,e)}).length>0},dateWithinRange:function(e){return e>=this.o.startDate&&e<=this.o.endDate},keydown:function(e){if(this.picker.is(":visible")){var t,n,r=!1,i=this.focusDate||this.viewDate;switch(e.keyCode){case 27:this.focusDate?(this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill()):this.hide(),e.preventDefault(),e.stopPropagation();break;case 37:case 38:case 39:case 40:if(!this.o.keyboardNavigation||7===this.o.daysOfWeekDisabled.length)break;t=37===e.keyCode||38===e.keyCode?-1:1,0===this.viewMode?e.ctrlKey?(n=this.moveAvailableDate(i,t,"moveYear"))&&this._trigger("changeYear",this.viewDate):e.shiftKey?(n=this.moveAvailableDate(i,t,"moveMonth"))&&this._trigger("changeMonth",this.viewDate):37===e.keyCode||39===e.keyCode?n=this.moveAvailableDate(i,t,"moveDay"):this.weekOfDateIsDisabled(i)||(n=this.moveAvailableDate(i,t,"moveWeek")):1===this.viewMode?(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(i,t,"moveMonth")):2===this.viewMode&&(38!==e.keyCode&&40!==e.keyCode||(t*=4),n=this.moveAvailableDate(i,t,"moveYear")),n&&(this.focusDate=this.viewDate=n,this.setValue(),this.fill(),e.preventDefault());break;case 13:if(!this.o.forceParse)break;i=this.focusDate||this.dates.get(-1)||this.viewDate,this.o.keyboardNavigation&&(this._toggle_multidate(i),r=!0),this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.setValue(),this.fill(),this.picker.is(":visible")&&(e.preventDefault(),e.stopPropagation(),this.o.autoclose&&this.hide());break;case 9:this.focusDate=null,this.viewDate=this.dates.get(-1)||this.viewDate,this.fill(),this.hide()}r&&(this.dates.length?this._trigger("changeDate"):this._trigger("clearDate"),this.inputField&&this.inputField.change())}else 40!==e.keyCode&&27!==e.keyCode||(this.show(),e.stopPropagation())},showMode:function(e){e&&(this.viewMode=Math.max(this.o.minViewMode,Math.min(this.o.maxViewMode,this.viewMode+e))),this.picker.children("div").hide().filter(".datepicker-"+v.modes[this.viewMode].clsName).show(),this.updateNavArrows()}};var d=function(t,n){e(t).data("datepicker",this),this.element=e(t),this.inputs=e.map(n.inputs,function(e){return e.jquery?e[0]:e}),delete n.inputs,p.call(e(this.inputs),n).on("changeDate",e.proxy(this.dateUpdated,this)),this.pickers=e.map(this.inputs,function(t){return e(t).data("datepicker")}),this.updateDates()};d.prototype={updateDates:function(){this.dates=e.map(this.pickers,function(e){return e.getUTCDate()}),this.updateRanges()},updateRanges:function(){var t=e.map(this.dates,function(e){return e.valueOf()});e.each(this.pickers,function(e,n){n.setRange(t)})},dateUpdated:function(t){if(!this.updating){this.updating=!0;var n=e(t.target).data("datepicker");if(void 0!==n){var r=n.getUTCDate(),i=e.inArray(t.target,this.inputs),o=i-1,a=i+1,s=this.inputs.length;if(-1!==i){if(e.each(this.pickers,function(e,t){t.getUTCDate()||t.setUTCDate(r)}),r<this.dates[o])for(;o>=0&&r<this.dates[o];)this.pickers[o--].setUTCDate(r);else if(r>this.dates[a])for(;a<s&&r>this.dates[a];)this.pickers[a++].setUTCDate(r);this.updateDates(),delete this.updating}}}},remove:function(){e.map(this.pickers,function(e){e.remove()}),delete this.element.data().datepicker}};var f=e.fn.datepicker,p=function(n){var r=Array.apply(null,arguments);r.shift();var i;if(this.each(function(){var t=e(this),o=t.data("datepicker"),a="object"==typeof n&&n;if(!o){var u=s(this,"date"),f=l(e.extend({},h,u,a).language),p=e.extend({},h,f,u,a);t.hasClass("input-daterange")||p.inputs?(e.extend(p,{inputs:p.inputs||t.find("input").toArray()}),o=new d(this,p)):o=new c(this,p),t.data("datepicker",o)}"string"==typeof n&&"function"==typeof o[n]&&(i=o[n].apply(o,r))}),i===t||i instanceof c||i instanceof d)return this;if(this.length>1)throw new Error("Using only allowed for the collection of a single element ("+n+" function)");return i};e.fn.datepicker=p;var h=e.fn.datepicker.defaults={assumeNearbyYear:!1,autoclose:!1,beforeShowDay:e.noop,beforeShowMonth:e.noop,beforeShowYear:e.noop,beforeShowDecade:e.noop,beforeShowCentury:e.noop,calendarWeeks:!1,clearBtn:!1,toggleActive:!1,daysOfWeekDisabled:[],daysOfWeekHighlighted:[],datesDisabled:[],endDate:1/0,forceParse:!0,format:"mm/dd/yyyy",keyboardNavigation:!0,language:"en",minViewMode:0,maxViewMode:4,multidate:!1,multidateSeparator:",",orientation:"auto",rtl:!1,startDate:-1/0,startView:0,todayBtn:!1,todayHighlight:!1,weekStart:0,disableTouchKeyboard:!1,enableOnReadonly:!0,showOnFocus:!0,zIndexOffset:10,container:"body",immediateUpdates:!1,title:"",templates:{leftArrow:"&laquo;",rightArrow:"&raquo;"}},g=e.fn.datepicker.locale_opts=["format","rtl","weekStart"];e.fn.datepicker.Constructor=c;var m=e.fn.datepicker.dates={en:{days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],daysShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],daysMin:["Su","Mo","Tu","We","Th","Fr","Sa"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],monthsShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],today:"Today",clear:"Clear",titleFormat:"MM yyyy"}},v={modes:[{clsName:"days",navFnc:"Month",navStep:1},{clsName:"months",navFnc:"FullYear",navStep:1},{clsName:"years",navFnc:"FullYear",navStep:10},{clsName:"decades",navFnc:"FullDecade",navStep:100},{clsName:"centuries",navFnc:"FullCentury",navStep:1e3}],isLeapYear:function(e){return e%4==0&&e%100!=0||e%400==0},getDaysInMonth:function(e,t){return[31,v.isLeapYear(e)?29:28,31,30,31,30,31,31,30,31,30,31][t]},validParts:/dd?|DD?|mm?|MM?|yy(?:yy)?/g,nonpunctuation:/[^ -\/:-@\u5e74\u6708\u65e5\[-`{-~\t\n\r]+/g,parseFormat:function(e){if("function"==typeof e.toValue&&"function"==typeof e.toDisplay)return e;var t=e.replace(this.validParts,"\0").split("\0"),n=e.match(this.validParts);if(!t||!t.length||!n||0===n.length)throw new Error("Invalid date format.");return{separators:t,parts:n}},parseDate:function(i,o,a,s){function l(e,t){return!0===t&&(t=10),e<100&&(e+=2e3)>(new Date).getFullYear()+t&&(e-=100),e}function u(){var e=this.slice(0,y[p].length),t=y[p].slice(0,e.length);return e.toLowerCase()===t.toLowerCase()}if(!i)return t;if(i instanceof Date)return i;if("string"==typeof o&&(o=v.parseFormat(o)),o.toValue)return o.toValue(i,o,a);var d,f,p,h,g=/([\-+]\d+)([dmwy])/,y=i.match(/([\-+]\d+)([dmwy])/g),b={d:"moveDay",m:"moveMonth",w:"moveWeek",y:"moveYear"},x={yesterday:"-1d",today:"+0d",tomorrow:"+1d"};if(/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i)){for(i=new Date,p=0;p<y.length;p++)d=g.exec(y[p]),f=parseInt(d[1]),h=b[d[2]],i=c.prototype[h](i,f);return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())}if(void 0!==x[i]&&(i=x[i],y=i.match(/([\-+]\d+)([dmwy])/g),/^[\-+]\d+[dmwy]([\s,]+[\-+]\d+[dmwy])*$/.test(i))){for(i=new Date,p=0;p<y.length;p++)d=g.exec(y[p]),f=parseInt(d[1]),h=b[d[2]],i=c.prototype[h](i,f);return n(i.getUTCFullYear(),i.getUTCMonth(),i.getUTCDate())}y=i&&i.match(this.nonpunctuation)||[],i=new Date;var w,_,C={},k=["yyyy","yy","M","MM","m","mm","d","dd"],S={yyyy:function(e,t){return e.setUTCFullYear(s?l(t,s):t)},yy:function(e,t){return e.setUTCFullYear(s?l(t,s):t)},m:function(e,t){if(isNaN(e))return e;for(t-=1;t<0;)t+=12;for(t%=12,e.setUTCMonth(t);e.getUTCMonth()!==t;)e.setUTCDate(e.getUTCDate()-1);return e},d:function(e,t){return e.setUTCDate(t)}};S.M=S.MM=S.mm=S.m,S.dd=S.d,i=r();var $=o.parts.slice();if(y.length!==$.length&&($=e($).filter(function(t,n){return-1!==e.inArray(n,k)}).toArray()),y.length===$.length){var M;for(p=0,M=$.length;p<M;p++){if(w=parseInt(y[p],10),d=$[p],isNaN(w))switch(d){case"MM":_=e(m[a].months).filter(u),w=e.inArray(_[0],m[a].months)+1;break;case"M":_=e(m[a].monthsShort).filter(u),w=e.inArray(_[0],m[a].monthsShort)+1}C[d]=w}var T,D;for(p=0;p<k.length;p++)(D=k[p])in C&&!isNaN(C[D])&&(T=new Date(i),S[D](T,C[D]),isNaN(T)||(i=T))}return i},formatDate:function(t,n,r){if(!t)return"";if("string"==typeof n&&(n=v.parseFormat(n)),n.toDisplay)return n.toDisplay(t,n,r);var i={d:t.getUTCDate(),D:m[r].daysShort[t.getUTCDay()],DD:m[r].days[t.getUTCDay()],m:t.getUTCMonth()+1,M:m[r].monthsShort[t.getUTCMonth()],MM:m[r].months[t.getUTCMonth()],yy:t.getUTCFullYear().toString().substring(2),yyyy:t.getUTCFullYear()};i.dd=(i.d<10?"0":"")+i.d,i.mm=(i.m<10?"0":"")+i.m,t=[];for(var o=e.extend([],n.separators),a=0,s=n.parts.length;a<=s;a++)o.length&&t.push(o.shift()),t.push(i[n.parts[a]]);return t.join("")},headTemplate:'<thead><tr><th colspan="7" class="datepicker-title"></th></tr><tr><th class="prev">&laquo;</th><th colspan="5" class="datepicker-switch"></th><th class="next">&raquo;</th></tr></thead>',contTemplate:'<tbody><tr><td colspan="7"></td></tr></tbody>',footTemplate:'<tfoot><tr><th colspan="7" class="today"></th></tr><tr><th colspan="7" class="clear"></th></tr></tfoot>'};v.template='<div class="datepicker"><div class="datepicker-days"><table class="table-condensed">'+v.headTemplate+"<tbody></tbody>"+v.footTemplate+'</table></div><div class="datepicker-months"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-years"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-decades"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+'</table></div><div class="datepicker-centuries"><table class="table-condensed">'+v.headTemplate+v.contTemplate+v.footTemplate+"</table></div></div>",e.fn.datepicker.DPGlobal=v,e.fn.datepicker.noConflict=function(){return e.fn.datepicker=f,this},e.fn.datepicker.version="1.6.1",e(document).on("focus.datepicker.data-api click.datepicker.data-api",'[data-provide="datepicker"]',function(t){var n=e(this);n.data("datepicker")||(t.preventDefault(),p.call(n,"show"))}),e(function(){p.call(e('[data-provide="datepicker-inline"]'))})}),function(e){"use strict";function t(t,n){if((n=n||{}).worker&&C.WORKERS_SUPPORTED){var r=u();return r.userStep=n.step,r.userChunk=n.chunk,r.userComplete=n.complete,r.userError=n.error,n.step=m(n.step),n.chunk=m(n.chunk),n.complete=m(n.complete),n.error=m(n.error),delete n.worker,void r.postMessage({input:t,config:n,workerId:r.id})}var s=null;return"string"==typeof t?s=n.download?new i(n):new a(n):(e.File&&t instanceof File||t instanceof Object)&&(s=new o(n)),s.stream(t)}function n(e,t){function n(e){if("object"!=typeof e)return[];var t=[];for(var n in e)t.push(n);return t}function r(e,t){var n="";"string"==typeof e&&(e=JSON.parse(e)),"string"==typeof t&&(t=JSON.parse(t));var r=e instanceof Array&&e.length>0,o=!(t[0]instanceof Array);if(r){for(var a=0;a<e.length;a++)a>0&&(n+=s),n+=i(e[a],a);t.length>0&&(n+=l)}for(var u=0;u<t.length;u++){for(var c=r?e.length:t[u].length,d=0;c>d;d++){d>0&&(n+=s);var f=r&&o?e[d]:d;n+=i(t[u][f],d)}u<t.length-1&&(n+=l)}return n}function i(e,t){return void 0===e||null===e?"":(e=e.toString().replace(/"/g,'""'),"boolean"==typeof a&&a||a instanceof Array&&a[t]||o(e,C.BAD_DELIMITERS)||e.indexOf(s)>-1||" "==e.charAt(0)||" "==e.charAt(e.length-1)?'"'+e+'"':e)}function o(e,t){for(var n=0;n<t.length;n++)if(e.indexOf(t[n])>-1)return!0;return!1}var a=!1,s=",",l="\r\n";if(function(){"object"==typeof t&&("string"==typeof t.delimiter&&1==t.delimiter.length&&-1==C.BAD_DELIMITERS.indexOf(t.delimiter)&&(s=t.delimiter),("boolean"==typeof t.quotes||t.quotes instanceof Array)&&(a=t.quotes),"string"==typeof t.newline&&(l=t.newline))}(),"string"==typeof e&&(e=JSON.parse(e)),e instanceof Array){if(!e.length||e[0]instanceof Array)return r(null,e);if("object"==typeof e[0])return r(n(e[0]),e)}else if("object"==typeof e)return"string"==typeof e.data&&(e.data=JSON.parse(e.data)),e.data instanceof Array&&(e.fields||(e.fields=e.data[0]instanceof Array?e.fields:n(e.data[0])),e.data[0]instanceof Array||"object"==typeof e.data[0]||(e.data=[e.data])),r(e.fields||[],e.data||[]);throw"exception: Unable to serialize unrecognized input"}function r(t){function n(e){var t=h(e);t.chunkSize=parseInt(t.chunkSize),e.step||e.chunk||(t.chunkSize=null),this._handle=new s(t),this._handle.streamer=this,this._config=t}this._handle=null,this._paused=!1,this._finished=!1,this._input=null,this._baseIndex=0,this._partialLine="",this._rowCount=0,this._start=0,this._nextChunk=null,this.isFirstChunk=!0,this._completeResults={data:[],errors:[],meta:{}},n.call(this,t),this.parseChunk=function(t){if(this.isFirstChunk&&m(this._config.beforeFirstChunk)){var n=this._config.beforeFirstChunk(t);void 0!==n&&(t=n)}this.isFirstChunk=!1;var r=this._partialLine+t;this._partialLine="";var i=this._handle.parse(r,this._baseIndex,!this._finished);if(!this._handle.paused()&&!this._handle.aborted()){var o=i.meta.cursor;this._finished||(this._partialLine=r.substring(o-this._baseIndex),this._baseIndex=o),i&&i.data&&(this._rowCount+=i.data.length);var a=this._finished||this._config.preview&&this._rowCount>=this._config.preview;if(b)e.postMessage({results:i,workerId:C.WORKER_ID,finished:a});else if(m(this._config.chunk)){if(this._config.chunk(i,this._handle),this._paused)return;i=void 0,this._completeResults=void 0}return this._config.step||this._config.chunk||(this._completeResults.data=this._completeResults.data.concat(i.data),this._completeResults.errors=this._completeResults.errors.concat(i.errors),this._completeResults.meta=i.meta),!a||!m(this._config.complete)||i&&i.meta.aborted||this._config.complete(this._completeResults),a||i&&i.meta.paused||this._nextChunk(),i}},this._sendError=function(t){m(this._config.error)?this._config.error(t):b&&this._config.error&&e.postMessage({workerId:C.WORKER_ID,error:t,finished:!1})}}function i(e){function t(e){var t=e.getResponseHeader("Content-Range");return parseInt(t.substr(t.lastIndexOf("/")+1))}(e=e||{}).chunkSize||(e.chunkSize=C.RemoteChunkSize),r.call(this,e);var n;this._nextChunk=y?function(){this._readChunk(),this._chunkLoaded()}:function(){this._readChunk()},this.stream=function(e){this._input=e,this._nextChunk()},this._readChunk=function(){if(this._finished)this._chunkLoaded();else{if(n=new XMLHttpRequest,y||(n.onload=g(this._chunkLoaded,this),n.onerror=g(this._chunkError,this)),n.open("GET",this._input,!y),this._config.chunkSize){var e=this._start+this._config.chunkSize-1;n.setRequestHeader("Range","bytes="+this._start+"-"+e),n.setRequestHeader("If-None-Match","webkit-no-cache")}try{n.send()}catch(e){this._chunkError(e.message)}y&&0==n.status?this._chunkError():this._start+=this._config.chunkSize}},this._chunkLoaded=function(){if(4==n.readyState){if(n.status<200||n.status>=400)return void this._chunkError();this._finished=!this._config.chunkSize||this._start>t(n),this.parseChunk(n.responseText)}},this._chunkError=function(e){var t=n.statusText||e;this._sendError(t)}}function o(e){(e=e||{}).chunkSize||(e.chunkSize=C.LocalChunkSize),r.call(this,e);var t,n,i="undefined"!=typeof FileReader;this.stream=function(e){this._input=e,n=e.slice||e.webkitSlice||e.mozSlice,i?(t=new FileReader,t.onload=g(this._chunkLoaded,this),t.onerror=g(this._chunkError,this)):t=new FileReaderSync,this._nextChunk()},this._nextChunk=function(){this._finished||this._config.preview&&!(this._rowCount<this._config.preview)||this._readChunk()},this._readChunk=function(){var e=this._input;if(this._config.chunkSize){var r=Math.min(this._start+this._config.chunkSize,this._input.size);e=n.call(e,this._start,r)}var o=t.readAsText(e,this._config.encoding);i||this._chunkLoaded({target:{result:o}})},this._chunkLoaded=function(e){this._start+=this._config.chunkSize,this._finished=!this._config.chunkSize||this._start>=this._input.size,this.parseChunk(e.target.result)},this._chunkError=function(){this._sendError(t.error)}}function a(e){e=e||{},r.call(this,e);var t,n;this.stream=function(e){return t=e,n=e,this._nextChunk()},this._nextChunk=function(){if(!this._finished){var e=this._config.chunkSize,t=e?n.substr(0,e):n;return n=e?n.substr(e):"",this._finished=!n,this.parseChunk(t)}}}function s(e){function t(){if(w&&f&&(u("Delimiter","UndetectableDelimiter","Unable to auto-detect delimiting character; defaulted to '"+C.DefaultDelimiter+"'"),f=!1),e.skipEmptyLines)for(var t=0;t<w.data.length;t++)1==w.data[t].length&&""==w.data[t][0]&&w.data.splice(t--,1);return n()&&r(),i()}function n(){return e.header&&0==x.length}function r(){if(w){for(var e=0;n()&&e<w.data.length;e++)for(var t=0;t<w.data[e].length;t++)x.push(w.data[e][t]);w.data.splice(0,1)}}function i(){if(!w||!e.header&&!e.dynamicTyping)return w;for(var t=0;t<w.data.length;t++){for(var n={},r=0;r<w.data[t].length;r++){if(e.dynamicTyping){var i=w.data[t][r];w.data[t][r]="true"==i||"TRUE"==i||"false"!=i&&"FALSE"!=i&&s(i)}e.header&&(r>=x.length?(n.__parsed_extra||(n.__parsed_extra=[]),n.__parsed_extra.push(w.data[t][r])):n[x[r]]=w.data[t][r])}e.header&&(w.data[t]=n,r>x.length?u("FieldMismatch","TooManyFields","Too many fields: expected "+x.length+" fields but parsed "+r,t):r<x.length&&u("FieldMismatch","TooFewFields","Too few fields: expected "+x.length+" fields but parsed "+r,t))}return e.header&&w.meta&&(w.meta.fields=x),w}function o(t){for(var n,r,i,o=[",","\t","|",";",C.RECORD_SEP,C.UNIT_SEP],a=0;a<o.length;a++){var s=o[a],u=0,c=0;i=void 0;for(var d=new l({delimiter:s,preview:10}).parse(t),f=0;f<d.data.length;f++){var p=d.data[f].length;c+=p,void 0!==i?p>1&&(u+=Math.abs(p-i),i=p):i=p}d.data.length>0&&(c/=d.data.length),(void 0===r||r>u)&&c>1.99&&(r=u,n=s)}return e.delimiter=n,{successful:!!n,bestDelimiter:n}}function a(e){var t=(e=e.substr(0,1048576)).split("\r");if(1==t.length)return"\n";for(var n=0,r=0;r<t.length;r++)"\n"==t[r][0]&&n++;return n>=t.length/2?"\r\n":"\r"}function s(e){return p.test(e)?parseFloat(e):e}function u(e,t,n,r){w.errors.push({type:e,code:t,message:n,row:r})}var c,d,f,p=/^\s*-?(\d*\.?\d+|\d+\.?\d*)(e[-+]?\d+)?\s*$/i,g=this,v=0,y=!1,b=!1,x=[],w={data:[],errors:[],meta:{}};if(m(e.step)){var _=e.step;e.step=function(r){if(w=r,n())t();else{if(t(),0==w.data.length)return;v+=r.data.length,e.preview&&v>e.preview?d.abort():_(w,g)}}}this.parse=function(n,r,i){if(e.newline||(e.newline=a(n)),f=!1,!e.delimiter){var s=o(n);s.successful?e.delimiter=s.bestDelimiter:(f=!0,e.delimiter=C.DefaultDelimiter),w.meta.delimiter=e.delimiter}var u=h(e);return e.preview&&e.header&&u.preview++,c=n,d=new l(u),w=d.parse(c,r,i),t(),y?{meta:{paused:!0}}:w||{meta:{paused:!1}}},this.paused=function(){return y},this.pause=function(){y=!0,d.abort(),c=c.substr(d.getCharIndex())},this.resume=function(){y=!1,g.streamer.parseChunk(c)},this.aborted=function(){return b},this.abort=function(){b=!0,d.abort(),w.meta.aborted=!0,m(e.complete)&&e.complete(w),c=""}}function l(e){var t=(e=e||{}).delimiter,n=e.newline,r=e.comments,i=e.step,o=e.preview,a=e.fastMode;if(("string"!=typeof t||C.BAD_DELIMITERS.indexOf(t)>-1)&&(t=","),r===t)throw"Comment character same as delimiter";!0===r?r="#":("string"!=typeof r||C.BAD_DELIMITERS.indexOf(r)>-1)&&(r=!1),"\n"!=n&&"\r"!=n&&"\r\n"!=n&&(n="\n");var s=0,l=!1;this.parse=function(e,u,c){function d(e){w.push(e),k=s}function f(t){return c?h():(void 0===t&&(t=e.substr(s)),C.push(t),s=m,d(C),x&&g(),h())}function p(t){s=t,d(C),C=[],T=e.indexOf(n,s)}function h(e){return{data:w,errors:_,meta:{delimiter:t,linebreak:n,aborted:l,truncated:!!e,cursor:k+(u||0)}}}function g(){i(h()),w=[],_=[]}if("string"!=typeof e)throw"Input must be a string";var m=e.length,v=t.length,y=n.length,b=r.length,x="function"==typeof i;s=0;var w=[],_=[],C=[],k=0;if(!e)return h();if(a||!1!==a&&-1===e.indexOf('"')){for(var S=e.split(n),$=0;$<S.length;$++){C=S[$];if(s+=C.length,$!==S.length-1)s+=n.length;else if(c)return h();if(!r||C.substr(0,b)!=r){if(x){if(w=[],d(C.split(t)),g(),l)return h()}else d(C.split(t));if(o&&$>=o)return w=w.slice(0,o),h(!0)}}return h()}for(var M=e.indexOf(t,s),T=e.indexOf(n,s);;)if('"'!=e[s])if(r&&0===C.length&&e.substr(s,b)===r){if(-1==T)return h();s=T+y,T=e.indexOf(n,s),M=e.indexOf(t,s)}else if(-1!==M&&(T>M||-1===T))C.push(e.substring(s,M)),s=M+v,M=e.indexOf(t,s);else{if(-1===T)break;if(C.push(e.substring(s,T)),p(T+y),x&&(g(),l))return h();if(o&&w.length>=o)return h(!0)}else{var D=s;for(s++;;){if(-1===(D=e.indexOf('"',D+1)))return c||_.push({type:"Quotes",code:"MissingQuotes",message:"Quoted field unterminated",row:w.length,index:s}),f();if(D===m-1)return f(e.substring(s,D).replace(/""/g,'"'));if('"'!=e[D+1]){if(e[D+1]==t){C.push(e.substring(s,D).replace(/""/g,'"')),s=D+1+v,M=e.indexOf(t,s),T=e.indexOf(n,s);break}if(e.substr(D+1,y)===n){if(C.push(e.substring(s,D).replace(/""/g,'"')),p(D+1+y),M=e.indexOf(t,s),x&&(g(),l))return h();if(o&&w.length>=o)return h(!0);break}}else D++}}return f()},this.abort=function(){l=!0},this.getCharIndex=function(){return s}}function u(){if(!C.WORKERS_SUPPORTED)return!1;if(!x&&null===C.SCRIPT_PATH)throw new Error("Script path cannot be determined automatically when Papa Parse is loaded asynchronously. You need to set Papa.SCRIPT_PATH manually.");var t=C.SCRIPT_PATH||v;t+=(-1!==t.indexOf("?")?"&":"?")+"papaworker";var n=new e.Worker(t);return n.onmessage=c,n.id=_++,w[n.id]=n,n}function c(e){var t=e.data,n=w[t.workerId],r=!1;if(t.error)n.userError(t.error,t.file);else if(t.results&&t.results.data){var i={abort:function(){r=!0,d(t.workerId,{data:[],errors:[],meta:{aborted:!0}})},pause:f,resume:f};if(m(n.userStep)){for(var o=0;o<t.results.data.length&&(n.userStep({data:[t.results.data[o]],errors:t.results.errors,meta:t.results.meta},i),!r);o++);delete t.results}else m(n.userChunk)&&(n.userChunk(t.results,i,t.file),delete t.results)}t.finished&&!r&&d(t.workerId,t.results)}function d(e,t){var n=w[e];m(n.userComplete)&&n.userComplete(t),n.terminate(),delete w[e]}function f(){throw"Not implemented."}function p(t){var n=t.data;if(void 0===C.WORKER_ID&&n&&(C.WORKER_ID=n.workerId),"string"==typeof n.input)e.postMessage({workerId:C.WORKER_ID,results:C.parse(n.input,n.config),finished:!0});else if(e.File&&n.input instanceof File||n.input instanceof Object){var r=C.parse(n.input,n.config);r&&e.postMessage({workerId:C.WORKER_ID,results:r,finished:!0})}}function h(e){if("object"!=typeof e)return e;var t=e instanceof Array?[]:{};for(var n in e)t[n]=h(e[n]);return t}function g(e,t){return function(){e.apply(t,arguments)}}function m(e){return"function"==typeof e}var v,y=!e.document&&!!e.postMessage,b=y&&/(\?|&)papaworker(=|&|$)/.test(e.location.search),x=!1,w={},_=0,C={};if(C.parse=t,C.unparse=n,C.RECORD_SEP=String.fromCharCode(30),C.UNIT_SEP=String.fromCharCode(31),C.BYTE_ORDER_MARK="\ufeff",C.BAD_DELIMITERS=["\r","\n",'"',C.BYTE_ORDER_MARK],C.WORKERS_SUPPORTED=!y&&!!e.Worker,C.SCRIPT_PATH=null,C.LocalChunkSize=10485760,C.RemoteChunkSize=5242880,C.DefaultDelimiter=",",C.Parser=l,C.ParserHandle=s,C.NetworkStreamer=i,C.FileStreamer=o,C.StringStreamer=a,"undefined"!=typeof module&&module.exports?module.exports=C:m(e.define)&&e.define.amd?define(function(){return C}):e.Papa=C,e.jQuery){var k=e.jQuery;k.fn.parse=function(t){function n(){if(0!=a.length){var e=a[0];if(m(t.before)){var n=t.before(e.file,e.inputElem);if("object"==typeof n){if("abort"==n.action)return void r("AbortError",e.file,e.inputElem,n.reason);if("skip"==n.action)return void i();"object"==typeof n.config&&(e.instanceConfig=k.extend(e.instanceConfig,n.config))}else if("skip"==n)return void i()}var o=e.instanceConfig.complete;e.instanceConfig.complete=function(t){m(o)&&o(t,e.file,e.inputElem),i()},C.parse(e.file,e.instanceConfig)}else m(t.complete)&&t.complete()}function r(e,n,r,i){m(t.error)&&t.error({name:e},n,r,i)}function i(){a.splice(0,1),n()}var o=t.config||{},a=[];return this.each(function(){if(!("INPUT"==k(this).prop("tagName").toUpperCase()&&"file"==k(this).attr("type").toLowerCase()&&e.FileReader)||!this.files||0==this.files.length)return!0;for(var t=0;t<this.files.length;t++)a.push({file:this.files[t],inputElem:this,instanceConfig:k.extend({},o)})}),n(),this}}b?e.onmessage=p:C.WORKERS_SUPPORTED&&(v=function(){var e=document.getElementsByTagName("script");return e.length?e[e.length-1].src:""}(),document.body?document.addEventListener("DOMContentLoaded",function(){x=!0},!0):x=!0),i.prototype=Object.create(r.prototype),i.prototype.constructor=i,o.prototype=Object.create(r.prototype),o.prototype.constructor=o,a.prototype=Object.create(a.prototype),a.prototype.constructor=a}("undefined"!=typeof window?window:this),!window.XMLHttpRequest||window.FileAPI&&FileAPI.shouldLoad||(window.XMLHttpRequest.prototype.setRequestHeader=function(e){return function(t,n){if("__setXHR_"===t){var r=n(this);r instanceof Function&&r(this)}else e.apply(this,arguments)}}(window.XMLHttpRequest.prototype.setRequestHeader));var ngFileUpload=angular.module("ngFileUpload",[]);ngFileUpload.version="12.2.12",ngFileUpload.service("UploadBase",["$http","$q","$timeout",function(e,t,n){function r(r){function i(e){u.notify&&u.notify(e),c.progressFunc&&n(function(){c.progressFunc(e)})}function s(e){return null!=r._start&&a?{loaded:e.loaded+r._start,total:r._file&&r._file.size||e.total,type:e.type,config:r,lengthComputable:!0,target:e.target}:e}function l(){e(r).then(function(e){if(a&&r._chunkSize&&!r._finished&&r._file){var t=r._file&&r._file.size||0;i({loaded:Math.min(r._end,t),total:t,config:r,type:"progress"}),o.upload(r,!0)}else r._finished&&delete r._finished,u.resolve(e)},function(e){u.reject(e)},function(e){u.notify(e)})}r.method=r.method||"POST",r.headers=r.headers||{};var u=r._deferred=r._deferred||t.defer(),c=u.promise;return r.disableProgress||(r.headers.__setXHR_=function(){return function(e){e&&e.upload&&e.upload.addEventListener&&(r.__XHR=e,r.xhrFn&&r.xhrFn(e),e.upload.addEventListener("progress",function(e){e.config=r,i(s(e))},!1),e.upload.addEventListener("load",function(e){e.lengthComputable&&(e.config=r,i(s(e)))},!1))}}),a?r._chunkSize&&r._end&&!r._finished?(r._start=r._end,r._end+=r._chunkSize,l()):r.resumeSizeUrl?e.get(r.resumeSizeUrl).then(function(e){r._start=r.resumeSizeResponseReader?r.resumeSizeResponseReader(e.data):parseInt((null==e.data.size?e.data:e.data.size).toString()),r._chunkSize&&(r._end=r._start+r._chunkSize),l()},function(e){throw e}):r.resumeSize?r.resumeSize().then(function(e){r._start=e,r._chunkSize&&(r._end=r._start+r._chunkSize),l()},function(e){throw e}):(r._chunkSize&&(r._start=0,r._end=r._start+r._chunkSize),l()):l(),c.success=function(e){return c.then(function(t){e(t.data,t.status,t.headers,r)}),c},c.error=function(e){return c.then(null,function(t){e(t.data,t.status,t.headers,r)}),c},c.progress=function(e){return c.progressFunc=e,c.then(null,null,function(t){e(t)}),c},c.abort=c.pause=function(){return r.__XHR&&n(function(){r.__XHR.abort()}),c},c.xhr=function(e){return r.xhrFn=function(t){return function(){t&&t.apply(c,arguments),e.apply(c,arguments)}}(r.xhrFn),c},o.promisesCount++,c.finally&&c.finally instanceof Function&&c.finally(function(){o.promisesCount--}),c}function i(e){var t={};for(var n in e)e.hasOwnProperty(n)&&(t[n]=e[n]);return t}var o=this;o.promisesCount=0,this.isResumeSupported=function(){return window.Blob&&window.Blob.prototype.slice};var a=this.isResumeSupported();this.isUploadInProgress=function(){return o.promisesCount>0},this.rename=function(e,t){return e.ngfName=t,e},this.jsonBlob=function(e){null==e||angular.isString(e)||(e=JSON.stringify(e));var t=new window.Blob([e],{type:"application/json"});return t._ngfBlob=!0,t},this.json=function(e){return angular.toJson(e)},this.isFile=function(e){return null!=e&&(e instanceof window.Blob||e.flashId&&e.name&&e.size)},this.upload=function(e,t){function n(t,n){if(t._ngfBlob)return t;if(e._file=e._file||t,null!=e._start&&a){e._end&&e._end>=t.size&&(e._finished=!0,e._end=t.size);var r=t.slice(e._start,e._end||t.size);return r.name=t.name,r.ngfName=t.ngfName,e._chunkSize&&(n.append("_chunkSize",e._chunkSize),n.append("_currentChunkSize",e._end-e._start),n.append("_chunkNumber",Math.floor(e._start/e._chunkSize)),n.append("_totalSize",e._file.size)),r}return t}function s(t,r,i){if(void 0!==r)if(angular.isDate(r)&&(r=r.toISOString()),angular.isString(r))t.append(i,r);else if(o.isFile(r)){var a=n(r,t),l=i.split(",");l[1]&&(a.ngfName=l[1].replace(/^\s+|\s+$/g,""),i=l[0]),e._fileKey=e._fileKey||i,t.append(i,a,a.ngfName||a.name)}else if(angular.isObject(r)){if(r.$$ngfCircularDetection)throw"ngFileUpload: Circular reference in config.data. Make sure specified data for Upload.upload() has no circular reference: "+i;r.$$ngfCircularDetection=!0;try{for(var u in r)if(r.hasOwnProperty(u)&&"$$ngfCircularDetection"!==u){var c=null==e.objectKey?"[i]":e.objectKey;r.length&&parseInt(u)>-1&&(c=null==e.arrayKey?c:e.arrayKey),s(t,r[u],i+c.replace(/[ik]/g,u))}}finally{delete r.$$ngfCircularDetection}}else t.append(i,r)}return t||(e=i(e)),e._isDigested||(e._isDigested=!0,function(){e._chunkSize=o.translateScalars(e.resumeChunkSize),e._chunkSize=e._chunkSize?parseInt(e._chunkSize.toString()):null,e.headers=e.headers||{},e.headers["Content-Type"]=void 0,e.transformRequest=e.transformRequest?angular.isArray(e.transformRequest)?e.transformRequest:[e.transformRequest]:[],e.transformRequest.push(function(t){var n,r=new window.FormData;t=t||e.fields||{},e.file&&(t.file=e.file);for(n in t)if(t.hasOwnProperty(n)){var i=t[n];e.formDataAppender?e.formDataAppender(r,n,i):s(r,i,n)}return r})}()),r(e)},this.http=function(t){return t=i(t),t.transformRequest=t.transformRequest||function(t){return window.ArrayBuffer&&t instanceof window.ArrayBuffer||t instanceof window.Blob?t:e.defaults.transformRequest[0].apply(this,arguments)},t._chunkSize=o.translateScalars(t.resumeChunkSize),t._chunkSize=t._chunkSize?parseInt(t._chunkSize.toString()):null,r(t)},this.translateScalars=function(e){if(angular.isString(e)){if(e.search(/kb/i)===e.length-2)return parseFloat(1024*e.substring(0,e.length-2));if(e.search(/mb/i)===e.length-2)return parseFloat(1048576*e.substring(0,e.length-2));if(e.search(/gb/i)===e.length-2)return parseFloat(1073741824*e.substring(0,e.length-2));if(e.search(/b/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/s/i)===e.length-1)return parseFloat(e.substring(0,e.length-1));if(e.search(/m/i)===e.length-1)return parseFloat(60*e.substring(0,e.length-1));if(e.search(/h/i)===e.length-1)return parseFloat(3600*e.substring(0,e.length-1))}return e},this.urlToBlob=function(n){var r=t.defer();return e({url:n,method:"get",responseType:"arraybuffer"}).then(function(e){var t=new Uint8Array(e.data),i=e.headers("content-type")||"image/WebP",o=new window.Blob([t],{type:i}),a=n.match(/.*\/(.+?)(\?.*)?$/);a.length>1&&(o.name=a[1]),r.resolve(o)},function(e){r.reject(e)}),r.promise},this.setDefaults=function(e){this.defaults=e||{}},this.defaults={},this.version=ngFileUpload.version}]),ngFileUpload.service("Upload",["$parse","$timeout","$compile","$q","UploadExif",function(e,t,n,r,i){function o(e,t,n){var i=[l.emptyPromise()];return angular.forEach(e,function(r,o){0===r.type.indexOf("image/jpeg")&&l.attrGetter("ngfFixOrientation",t,n,{$file:r})&&i.push(l.happyPromise(l.applyExifRotation(r),r).then(function(t){e.splice(o,1,t)}))}),r.all(i)}function a(e,t,n,i){var o=l.attrGetter("ngfResize",t,n);if(!o||!l.isResizeSupported()||!e.length)return l.emptyPromise();if(o instanceof Function){var a=r.defer();return o(e).then(function(r){s(r,e,t,n,i).then(function(e){a.resolve(e)},function(e){a.reject(e)})},function(e){a.reject(e)})}return s(o,e,t,n,i)}function s(e,t,n,i,o){for(var a=[l.emptyPromise()],s=0;s<t.length;s++)!function(r,s){if(0===r.type.indexOf("image")){if(e.pattern&&!l.validatePattern(r,e.pattern))return;e.resizeIf=function(e,t){return l.attrGetter("ngfResizeIf",n,i,{$width:e,$height:t,$file:r})};var u=l.resize(r,e);a.push(u),u.then(function(e){t.splice(s,1,e)},function(e){r.$error="resize",(r.$errorMessages=r.$errorMessages||{}).resize=!0,r.$errorParam=(e?(e.message?e.message:e)+": ":"")+(r&&r.name),o.$ngfValidations.push({name:"resize",valid:!1}),l.applyModelValidation(o,t)})}}(t[s],s);return r.all(a)}var l=i;return l.getAttrWithDefaults=function(e,t){if(null!=e[t])return e[t];var n=l.defaults[t];return null==n?n:angular.isString(n)?n:JSON.stringify(n)},l.attrGetter=function(t,n,r,i){var o=this.getAttrWithDefaults(n,t);if(!r)return o;try{return i?e(o)(r,i):e(o)(r)}catch(e){if(t.search(/min|max|pattern/i))return o;throw e}},l.shouldUpdateOn=function(e,t,n){var r=l.attrGetter("ngfModelOptions",t,n);return!r||!r.updateOn||r.updateOn.split(" ").indexOf(e)>-1},l.emptyPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.resolve.apply(e,n)}),e.promise},l.rejectPromise=function(){var e=r.defer(),n=arguments;return t(function(){e.reject.apply(e,n)}),e.promise},l.happyPromise=function(e,n){var i=r.defer();return e.then(function(e){i.resolve(e)},function(e){t(function(){throw e}),i.resolve(n)}),i.promise},l.updateModel=function(n,r,i,s,u,c,d){function f(o,a,u,d,f){r.$$ngfPrevValidFiles=o,r.$$ngfPrevInvalidFiles=a;var p=o&&o.length?o[0]:null,h=a&&a.length?a[0]:null;n&&(l.applyModelValidation(n,o),n.$setViewValue(f?p:o)),s&&e(s)(i,{$files:o,$file:p,$newFiles:u,$duplicateFiles:d,$invalidFiles:a,$invalidFile:h,$event:c});var g=l.attrGetter("ngfModelInvalid",r);g&&t(function(){e(g).assign(i,f?h:a)}),t(function(){})}function p(){function e(){t(function(){f(x?g.concat(b):b,x?m.concat(y):y,u,v,w)},C&&C.debounce?C.debounce.change||C.debounce:0)}var o=_?h:b;a(o,r,i,n).then(function(){_?l.validate(h,x?g.length:0,n,r,i).then(function(t){b=t.validsFiles,y=t.invalidsFiles,e()}):e()},function(){for(var t=0;t<o.length;t++){var n=o[t];if("resize"===n.$error){var r=b.indexOf(n);r>-1&&(b.splice(r,1),y.push(n)),e()}}})}var h,g,m,v=[],y=[],b=[];g=r.$$ngfPrevValidFiles||[],m=r.$$ngfPrevInvalidFiles||[],n&&n.$modelValue&&(g=function(e){return angular.isArray(e)?e:[e]}(n.$modelValue));var x=l.attrGetter("ngfKeep",r,i);h=(u||[]).slice(0),("distinct"===x||!0===l.attrGetter("ngfKeepDistinct",r,i))&&function(){function e(e,t){return e.name===t.name&&(e.$ngfOrigSize||e.size)===(t.$ngfOrigSize||t.size)&&e.type===t.type}if(u){h=[],v=[];for(var t=0;t<u.length;t++)!function(t){var n;for(n=0;n<g.length;n++)if(e(t,g[n]))return!0;for(n=0;n<m.length;n++)if(e(t,m[n]))return!0;return!1}(u[t])?h.push(u[t]):v.push(u[t])}}();var w=!x&&!l.attrGetter("ngfMultiple",r,i)&&!l.attrGetter("multiple",r);if(!x||h.length){l.attrGetter("ngfBeforeModelChange",r,i,{$files:u,$file:u&&u.length?u[0]:null,$newFiles:h,$duplicateFiles:v,$event:c});var _=l.attrGetter("ngfValidateAfterResize",r,i),C=l.attrGetter("ngfModelOptions",r,i);l.validate(h,x?g.length:0,n,r,i).then(function(e){d?f(h,[],u,v,w):(C&&C.allowInvalid||_?b=h:(b=e.validFiles,y=e.invalidFiles),l.attrGetter("ngfFixOrientation",r,i)&&l.isExifSupported()?o(b,r,i).then(function(){p()}):p())})}},l}]),ngFileUpload.directive("ngfSelect",["$parse","$timeout","$compile","Upload",function(e,t,n,r){function i(e){var t=e.match(/Android[^\d]*(\d+)\.(\d+)/);if(t&&t.length>2){var n=r.defaults.androidFixMinorVersion||4;return parseInt(t[1])<4||parseInt(t[1])===n&&parseInt(t[2])<n}return-1===e.indexOf("Chrome")&&/.*Windows.*Safari.*/.test(e)}function o(e,t,n,r,o,s,l,u){function c(){return"input"===t[0].tagName.toLowerCase()&&n.type&&"file"===n.type.toLowerCase()}function d(){return y("ngfChange")||y("ngfSelect")}function f(t){if(u.shouldUpdateOn("change",n,e)){var i=t.__files_||t.target&&t.target.files,o=[];if(!i)return;for(var a=0;a<i.length;a++)o.push(i[a]);u.updateModel(r,n,e,d(),o.length?o:null,t)}}function p(e,r){function i(t){e.attr("id","ngf-"+t),r.attr("id","ngf-label-"+t)}for(var o=0;o<t[0].attributes.length;o++){var a=t[0].attributes[o];"type"!==a.name&&"class"!==a.name&&"style"!==a.name&&("id"===a.name?(i(a.value),b.push(n.$observe("id",i))):e.attr(a.name,a.value||"required"!==a.name&&"multiple"!==a.name?a.value:a.name))}}function h(n){if(t.attr("disabled"))return!1;if(!y("ngfSelectDisabled",e)){var r=g(n);if(null!=r)return r;m(n);try{c()||document.body.contains(_[0])||(a.push({el:t,ref:_.parent()}),document.body.appendChild(_.parent()[0]),_.bind("change",f))}catch(e){}return i(navigator.userAgent)?setTimeout(function(){_[0].click()},0):_[0].click(),!1}}function g(e){var t=e.changedTouches||e.originalEvent&&e.originalEvent.changedTouches;if(t){if("touchstart"===e.type)return w=t[0].clientX,x=t[0].clientY,!0;if("touchend"===e.type){var n=t[0].clientX,r=t[0].clientY;if(Math.abs(n-w)>20||Math.abs(r-x)>20)return e.stopPropagation(),e.preventDefault(),!1}return!0}}function m(t){u.shouldUpdateOn("click",n,e)&&_.val()&&(_.val(null),u.updateModel(r,n,e,d(),null,t,!0))}function v(e){if(_&&!_.attr("__ngf_ie10_Fix_")){if(!_[0].parentNode)return void(_=null);e.preventDefault(),e.stopPropagation(),_.unbind("click");var t=_.clone();return _.replaceWith(t),(_=t).attr("__ngf_ie10_Fix_","true"),_.bind("change",f),_.bind("click",v),_[0].click(),!1}_.removeAttr("__ngf_ie10_Fix_")}var y=function(e,t){return u.attrGetter(e,n,t)};u.registerModelChangeValidator(r,n,e);var b=[];y("ngfMultiple")&&b.push(e.$watch(y("ngfMultiple"),function(){_.attr("multiple",y("ngfMultiple",e))})),y("ngfCapture")&&b.push(e.$watch(y("ngfCapture"),function(){_.attr("capture",y("ngfCapture",e))})),y("ngfAccept")&&b.push(e.$watch(y("ngfAccept"),function(){_.attr("accept",y("ngfAccept",e))})),b.push(n.$observe("accept",function(){_.attr("accept",y("accept"))}));var x=0,w=0,_=t;c()||(_=function(){if(c())return t;var e=angular.element('<input type="file">'),n=angular.element("<label>upload</label>");return n.css("visibility","hidden").css("position","absolute").css("overflow","hidden").css("width","0px").css("height","0px").css("border","none").css("margin","0px").css("padding","0px").attr("tabindex","-1"),p(e,n),a.push({el:t,ref:n}),document.body.appendChild(n.append(e)[0]),e}()),_.bind("change",f),c()?t.bind("click",m):t.bind("click touchstart touchend",h),-1!==navigator.appVersion.indexOf("MSIE 10")&&_.bind("click",v),r&&r.$formatters.push(function(e){return(null==e||0===e.length)&&_.val()&&_.val(null),e}),e.$on("$destroy",function(){c()||_.parent().remove(),angular.forEach(b,function(e){e()})}),s(function(){for(var e=0;e<a.length;e++){var t=a[e];document.body.contains(t.el[0])||(a.splice(e,1),t.ref.remove())}}),window.FileAPI&&window.FileAPI.ngfFixIE&&window.FileAPI.ngfFixIE(t,_,f)}var a=[];return{restrict:"AEC",require:"?ngModel",link:function(i,a,s,l){o(i,a,s,l,e,t,n,r)}}}]),function(){function e(e){return"img"===e.tagName.toLowerCase()?"image":"audio"===e.tagName.toLowerCase()?"audio":"video"===e.tagName.toLowerCase()?"video":/./}function t(t,n,r,i,o,a,s,l){function u(e){var a=t.attrGetter("ngfNoObjectUrl",o,r);t.dataUrl(e,a).finally(function(){n(function(){var t=(a?e.$ngfDataUrl:e.$ngfBlobUrl)||e.$ngfDataUrl;l?i.css("background-image","url('"+(t||"")+"')"):i.attr("src",t),t?i.removeClass("ng-hide"):i.addClass("ng-hide")})})}n(function(){var n=r.$watch(o[a],function(n){var c=s;if("ngfThumbnail"===a&&(c||(c={width:i[0].naturalWidth||i[0].clientWidth,height:i[0].naturalHeight||i[0].clientHeight}),0===c.width&&window.getComputedStyle)){var d=getComputedStyle(i[0]);c={width:parseInt(d.width.slice(0,-2)),height:parseInt(d.height.slice(0,-2))}}return angular.isString(n)?(i.removeClass("ng-hide"),l?i.css("background-image","url('"+n+"')"):i.attr("src",n)):void(!n||!n.type||0!==n.type.search(e(i[0]))||l&&0!==n.type.indexOf("image")?i.addClass("ng-hide"):c&&t.isResizeSupported()?(c.resizeIf=function(e,i){return t.attrGetter("ngfResizeIf",o,r,{$width:e,$height:i,$file:n})},t.resize(n,c).then(function(e){u(e)},function(e){throw e})):u(n))});r.$on("$destroy",function(){n()})})}ngFileUpload.service("UploadDataUrl",["UploadBase","$timeout","$q",function(e,t,n){var r=e;return r.base64DataUrl=function(e){if(angular.isArray(e)){var t=n.defer(),i=0;return angular.forEach(e,function(n){r.dataUrl(n,!0).finally(function(){if(++i===e.length){var n=[];angular.forEach(e,function(e){n.push(e.$ngfDataUrl)}),t.resolve(n,e)}})}),t.promise}return r.dataUrl(e,!0)},r.dataUrl=function(e,i){if(!e)return r.emptyPromise(e,e);if(i&&null!=e.$ngfDataUrl||!i&&null!=e.$ngfBlobUrl)return r.emptyPromise(i?e.$ngfDataUrl:e.$ngfBlobUrl,e);var o=i?e.$$ngfDataUrlPromise:e.$$ngfBlobUrlPromise;if(o)return o;var a=n.defer();return t(function(){if(window.FileReader&&e&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 8")||e.size<2e4)&&(!window.FileAPI||-1===navigator.userAgent.indexOf("MSIE 9")||e.size<4e6)){var n=window.URL||window.webkitURL;if(n&&n.createObjectURL&&!i){var o;try{o=n.createObjectURL(e)}catch(n){return void t(function(){e.$ngfBlobUrl="",a.reject()})}t(function(){if(e.$ngfBlobUrl=o,o){a.resolve(o,e),r.blobUrls=r.blobUrls||[],r.blobUrlsTotalSize=r.blobUrlsTotalSize||0,r.blobUrls.push({url:o,size:e.size}),r.blobUrlsTotalSize+=e.size||0;for(var t=r.defaults.blobUrlsMaxMemory||268435456,i=r.defaults.blobUrlsMaxQueueSize||200;(r.blobUrlsTotalSize>t||r.blobUrls.length>i)&&r.blobUrls.length>1;){var s=r.blobUrls.splice(0,1)[0];n.revokeObjectURL(s.url),r.blobUrlsTotalSize-=s.size}}})}else{var s=new FileReader;s.onload=function(n){t(function(){e.$ngfDataUrl=n.target.result,a.resolve(n.target.result,e),t(function(){delete e.$ngfDataUrl},1e3)})},s.onerror=function(){t(function(){e.$ngfDataUrl="",a.reject()})},s.readAsDataURL(e)}}else t(function(){e[i?"$ngfDataUrl":"$ngfBlobUrl"]="",a.reject()})}),(o=i?e.$$ngfDataUrlPromise=a.promise:e.$$ngfBlobUrlPromise=a.promise).finally(function(){delete e[i?"$$ngfDataUrlPromise":"$$ngfBlobUrlPromise"]}),o},r}]),ngFileUpload.directive("ngfSrc",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfSrc",e.attrGetter("ngfResize",o,r),!1)}}}]),ngFileUpload.directive("ngfBackground",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){t(e,n,r,i,o,"ngfBackground",e.attrGetter("ngfResize",o,r),!0)}}}]),ngFileUpload.directive("ngfThumbnail",["Upload","$timeout",function(e,n){return{restrict:"AE",link:function(r,i,o){var a=e.attrGetter("ngfSize",o,r);t(e,n,r,i,o,"ngfThumbnail",a,e.attrGetter("ngfAsBackground",o,r))}}}]),ngFileUpload.config(["$compileProvider",function(e){e.imgSrcSanitizationWhitelist&&e.imgSrcSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/),e.aHrefSanitizationWhitelist&&e.aHrefSanitizationWhitelist(/^\s*(https?|ftp|mailto|tel|webcal|local|file|data|blob):/)}]),ngFileUpload.filter("ngfDataUrl",["UploadDataUrl","$sce",function(e,t){return function(n,r,i){if(angular.isString(n))return t.trustAsResourceUrl(n);var o=n&&((r?n.$ngfDataUrl:n.$ngfBlobUrl)||n.$ngfDataUrl);return n&&!o?(!n.$ngfDataUrlFilterInProgress&&angular.isObject(n)&&(n.$ngfDataUrlFilterInProgress=!0,e.dataUrl(n,r)),""):(n&&delete n.$ngfDataUrlFilterInProgress,(n&&o?i?t.trustAsResourceUrl(o):o:n)||"")}}])}(),ngFileUpload.service("UploadValidate",["UploadDataUrl","$q","$timeout",function(e,t,n){function r(e){var t="",n=[];if(e.length>2&&"/"===e[0]&&"/"===e[e.length-1])t=e.substring(1,e.length-1);else{var i=e.split(",");if(i.length>1)for(var o=0;o<i.length;o++){var a=r(i[o]);a.regexp?(t+="("+a.regexp+")",o<i.length-1&&(t+="|")):n=n.concat(a.excludes)}else 0===e.indexOf("!")?n.push("^((?!"+r(e.substring(1)).regexp+").)*$"):(0===e.indexOf(".")&&(e="*"+e),t="^"+e.replace(new RegExp("[.\\\\+*?\\[\\^\\]$(){}=!<>|:\\-]","g"),"\\$&")+"$",t=t.replace(/\\\*/g,".*").replace(/\\\?/g,"."))}return{regexp:t,excludes:n}}function i(e,t){null==t||e.$dirty||(e.$setDirty?e.$setDirty():e.$dirty=!0)}var o=e;return o.validatePattern=function(e,t){if(!t)return!0;var n=r(t),i=!0;if(n.regexp&&n.regexp.length){var o=new RegExp(n.regexp,"i");i=null!=e.type&&o.test(e.type)||null!=e.name&&o.test(e.name)}for(var a=n.excludes.length;a--;){var s=new RegExp(n.excludes[a],"i");i=i&&(null==e.type||s.test(e.type))&&(null==e.name||s.test(e.name))}return i},o.ratioToFloat=function(e){var t=e.toString(),n=t.search(/[x:]/i);return t=n>-1?parseFloat(t.substring(0,n))/parseFloat(t.substring(n+1)):parseFloat(t)},o.registerModelChangeValidator=function(e,t,n){e&&e.$formatters.push(function(r){if(e.$dirty){var i=r;r&&!angular.isArray(r)&&(i=[r]),o.validate(i,0,e,t,n).then(function(){o.applyModelValidation(e,i)})}return r})},o.applyModelValidation=function(e,t){i(e,t),angular.forEach(e.$ngfValidations,function(t){e.$setValidity(t.name,t.valid)})},o.getValidationAttr=function(e,t,n,r,i){var a="ngf"+n[0].toUpperCase()+n.substr(1),s=o.attrGetter(a,e,t,{$file:i});if(null==s&&(s=o.attrGetter("ngfValidate",e,t,{$file:i}))){var l=(r||n).split(".");s=s[l[0]],l.length>1&&(s=s&&s[l[1]])}return s},o.validate=function(e,n,r,i,a){function s(t,n,s){if(e){for(var l=e.length,u=null;l--;){var p=e[l];if(p){var h=o.getValidationAttr(i,a,t,n,p);null!=h&&(s(p,h,l)||(-1===c.indexOf(t)?(p.$error=t,(p.$errorMessages=p.$errorMessages||{})[t]=!0,p.$errorParam=h,-1===f.indexOf(p)&&f.push(p),d||e.splice(l,1),u=!1):e.splice(l,1)))}}null!==u&&r.$ngfValidations.push({name:t,valid:u})}}function l(n,s,l,p,h){function g(t,r,i){function o(o){if(o())if(-1===c.indexOf(n)){if(r.$error=n,(r.$errorMessages=r.$errorMessages||{})[n]=!0,r.$errorParam=i,-1===f.indexOf(r)&&f.push(r),!d){var a=e.indexOf(r);a>-1&&e.splice(a,1)}t.resolve(!1)}else{var s=e.indexOf(r);s>-1&&e.splice(s,1),t.resolve(!0)}else t.resolve(!0)}null!=i?p(r,i).then(function(e){o(function(){return!h(e,i)})},function(){o(function(){return u("ngfValidateForce",{$file:r})})}):t.resolve(!0)}var m=[o.emptyPromise(!0)];e&&(e=void 0===e.length?[e]:e,angular.forEach(e,function(e){var r=t.defer();return m.push(r.promise),!l||null!=e.type&&0===e.type.search(l)?void("dimensions"===n&&null!=o.attrGetter("ngfDimensions",i)?o.imageDimensions(e).then(function(t){g(r,e,u("ngfDimensions",{$file:e,$width:t.width,$height:t.height}))},function(){r.resolve(!1)}):"duration"===n&&null!=o.attrGetter("ngfDuration",i)?o.mediaDuration(e).then(function(t){g(r,e,u("ngfDuration",{$file:e,$duration:t}))},function(){r.resolve(!1)}):g(r,e,o.getValidationAttr(i,a,n,s,e))):void r.resolve(!0)}));var v=t.defer();return t.all(m).then(function(e){for(var t=!0,i=0;i<e.length;i++)if(!e[i]){t=!1;break}r.$ngfValidations.push({name:n,valid:t}),v.resolve(t)}),v.promise}(r=r||{}).$ngfValidations=r.$ngfValidations||[],angular.forEach(r.$ngfValidations,function(e){e.valid=!0});var u=function(e,t){return o.attrGetter(e,i,a,t)},c=(o.attrGetter("ngfIgnoreInvalid",i,a)||"").split(" "),d=o.attrGetter("ngfRunAllValidations",i,a);if(null==e||0===e.length)return o.emptyPromise({validFiles:e,invalidFiles:[]});e=void 0===e.length?[e]:e.slice(0);var f=[];s("pattern",null,o.validatePattern),s("minSize","size.min",function(e,t){return e.size+.1>=o.translateScalars(t)}),s("maxSize","size.max",function(e,t){return e.size-.1<=o.translateScalars(t)});var p=0;if(s("maxTotalSize",null,function(t,n){return!((p+=t.size)>o.translateScalars(n))||(e.splice(0,e.length),!1)}),s("validateFn",null,function(e,t){return!0===t||null===t||""===t}),!e.length)return o.emptyPromise({validFiles:[],invalidFiles:f});var h=t.defer(),g=[];return g.push(l("maxHeight","height.max",/image/,this.imageDimensions,function(e,t){return e.height<=t})),g.push(l("minHeight","height.min",/image/,this.imageDimensions,function(e,t){return e.height>=t})),g.push(l("maxWidth","width.max",/image/,this.imageDimensions,function(e,t){return e.width<=t})),g.push(l("minWidth","width.min",/image/,this.imageDimensions,function(e,t){return e.width>=t})),g.push(l("dimensions",null,/image/,function(e,t){return o.emptyPromise(t)},function(e){return e})),g.push(l("ratio",null,/image/,this.imageDimensions,function(e,t){for(var n=t.toString().split(","),r=!1,i=0;i<n.length;i++)Math.abs(e.width/e.height-o.ratioToFloat(n[i]))<.01&&(r=!0);return r})),g.push(l("maxRatio","ratio.max",/image/,this.imageDimensions,function(e,t){return e.width/e.height-o.ratioToFloat(t)<1e-4})),g.push(l("minRatio","ratio.min",/image/,this.imageDimensions,function(e,t){return e.width/e.height-o.ratioToFloat(t)>-1e-4})),g.push(l("maxDuration","duration.max",/audio|video/,this.mediaDuration,function(e,t){return e<=o.translateScalars(t)})),g.push(l("minDuration","duration.min",/audio|video/,this.mediaDuration,function(e,t){return e>=o.translateScalars(t)})),g.push(l("duration",null,/audio|video/,function(e,t){return o.emptyPromise(t)},function(e){return e})),g.push(l("validateAsyncFn",null,null,function(e,t){return t},function(e){return!0===e||null===e||""===e})),t.all(g).then(function(){if(d)for(var t=0;t<e.length;t++)e[t].$error&&e.splice(t--,1);d=!1,s("maxFiles",null,function(e,t,r){return t>n+r}),h.resolve({validFiles:e,invalidFiles:f})}),h.promise},o.imageDimensions=function(e){if(e.$ngfWidth&&e.$ngfHeight){var r=t.defer();return n(function(){r.resolve({width:e.$ngfWidth,height:e.$ngfHeight})}),r.promise}if(e.$ngfDimensionPromise)return e.$ngfDimensionPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("image")?void i.reject("not image"):void o.dataUrl(e).then(function(t){function r(){var t=s[0].naturalWidth||s[0].clientWidth,n=s[0].naturalHeight||s[0].clientHeight;s.remove(),e.$ngfWidth=t,e.$ngfHeight=n,i.resolve({width:t,height:n})}function o(){s.remove(),i.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].clientWidth?r():l++>10?o():a())},1e3)}var s=angular.element("<img>").attr("src",t).css("visibility","hidden").css("position","fixed").css("max-width","none !important").css("max-height","none !important");s.on("load",r),s.on("error",o);var l=0;a(),angular.element(document.getElementsByTagName("body")[0]).append(s)},function(){i.reject("load error")})}),e.$ngfDimensionPromise=i.promise,e.$ngfDimensionPromise.finally(function(){delete e.$ngfDimensionPromise}),e.$ngfDimensionPromise},o.mediaDuration=function(e){if(e.$ngfDuration){var r=t.defer();return n(function(){r.resolve(e.$ngfDuration)}),r.promise}if(e.$ngfDurationPromise)return e.$ngfDurationPromise;var i=t.defer();return n(function(){return 0!==e.type.indexOf("audio")&&0!==e.type.indexOf("video")?void i.reject("not media"):void o.dataUrl(e).then(function(t){function r(){var t=s[0].duration;e.$ngfDuration=t,s.remove(),i.resolve(t)}function o(){s.remove(),i.reject("load error")}function a(){n(function(){s[0].parentNode&&(s[0].duration?r():l>10?o():a())},1e3)}var s=angular.element(0===e.type.indexOf("audio")?"<audio>":"<video>").attr("src",t).css("visibility","none").css("position","fixed");s.on("loadedmetadata",r),s.on("error",o);var l=0;a(),angular.element(document.body).append(s)},function(){i.reject("load error")})}),e.$ngfDurationPromise=i.promise,e.$ngfDurationPromise.finally(function(){delete e.$ngfDurationPromise}),e.$ngfDurationPromise},o}]),ngFileUpload.service("UploadResize",["UploadValidate","$q",function(e,t){var n=e,r=function(e,t,n,r,i){var o=i?Math.max(n/e,r/t):Math.min(n/e,r/t);return{width:e*o,height:t*o,marginX:e*o-n,marginY:t*o-r}},i=function(e,i,o,a,s,l,u,c){var d=t.defer(),f=document.createElement("canvas"),p=document.createElement("img");return p.setAttribute("style","visibility:hidden;position:fixed;z-index:-100000"),document.body.appendChild(p),p.onload=function(){var e=p.width,t=p.height;if(p.parentNode.removeChild(p),null==c||!1!==c(e,t))try{if(l){var h=n.ratioToFloat(l);h>e/t?(i=e,o=i/h):(o=t,i=o*h)}i||(i=e),o||(o=t);var g=r(e,t,i,o,u);f.width=Math.min(g.width,i),f.height=Math.min(g.height,o),f.getContext("2d").drawImage(p,Math.min(0,-g.marginX/2),Math.min(0,-g.marginY/2),g.width,g.height),d.resolve(f.toDataURL(s||"image/WebP",a||.934))}catch(e){d.reject(e)}else d.reject("resizeIf")},p.onerror=function(){p.parentNode.removeChild(p),d.reject()},p.src=e,d.promise};return n.dataUrltoBlob=function(e,t,n){for(var r=e.split(","),i=r[0].match(/:(.*?);/)[1],o=atob(r[1]),a=o.length,s=new Uint8Array(a);a--;)s[a]=o.charCodeAt(a);var l=new window.Blob([s],{type:i});return l.name=t,l.$ngfOrigSize=n,l},n.isResizeSupported=function(){var e=document.createElement("canvas");return window.atob&&e.getContext&&e.getContext("2d")&&window.Blob},n.isResizeSupported()&&Object.defineProperty(window.Blob.prototype,"name",{get:function(){return this.$ngfName},set:function(e){this.$ngfName=e},configurable:!0}),n.resize=function(e,r){if(0!==e.type.indexOf("image"))return n.emptyPromise(e);var o=t.defer();return n.dataUrl(e,!0).then(function(t){i(t,r.width,r.height,r.quality,r.type||e.type,r.ratio,r.centerCrop,r.resizeIf).then(function(i){if("image/jpeg"===e.type&&!1!==r.restoreExif)try{i=n.restoreExif(t,i)}catch(e){setTimeout(function(){throw e},1)}try{var a=n.dataUrltoBlob(i,e.name,e.size);o.resolve(a)}catch(e){o.reject(e)}},function(t){"resizeIf"===t&&o.resolve(e),o.reject(t)})},function(e){o.reject(e)}),o.promise},n}]),function(){function e(e,n,r,i,o,a,s,l,u,c){function d(){return n.attr("disabled")||v("ngfDropDisabled",e)}function f(t,n){l.updateModel(i,r,e,v("ngfChange")||v("ngfDrop"),t,n)}function p(t,n){if(!l.shouldUpdateOn(t,r,e)||"string"!=typeof n)return l.rejectPromise([]);var i=[];n.replace(/<(img src|img [^>]* src) *=\"([^\"]*)\"/gi,function(e,t,n){i.push(n)});var o=[],a=[];if(i.length){angular.forEach(i,function(e){o.push(l.urlToBlob(e).then(function(e){a.push(e)}))});var s=c.defer();return c.all(o).then(function(){s.resolve(a)},function(e){s.reject(e)}),s.promise}return l.emptyPromise()}function h(e,t,n,r){var i=v("ngfDragOverClass",e,{$event:n}),o="dragover";if(angular.isString(i))o=i;else if(i&&(i.delay&&(w=i.delay),i.accept||i.reject)){var a=n.dataTransfer.items;if(null!=a&&a.length)for(var s=i.pattern||v("ngfPattern",e,{$event:n}),u=a.length;u--;){if(!l.validatePattern(a[u],s)){o=i.reject;break}o=i.accept}else o=i.accept}r(o)}function g(t,n,i,o){function a(e,t){var n=c.defer();if(null!=e)if(e.isDirectory){var r=[l.emptyPromise()];if(f){var i={type:"directory"};i.name=i.path=(t||"")+e.name,p.push(i)}var o=e.createReader(),s=[],g=function(){o.readEntries(function(i){try{i.length?(s=s.concat(Array.prototype.slice.call(i||[],0)),g()):(angular.forEach(s.slice(0),function(n){p.length<=u&&d>=h&&r.push(a(n,(t||"")+e.name+"/"))}),c.all(r).then(function(){n.resolve()},function(e){n.reject(e)}))}catch(e){n.reject(e)}},function(e){n.reject(e)})};g()}else e.file(function(e){try{e.path=(t||"")+e.name,f&&(e=l.rename(e,e.path)),p.push(e),h+=e.size,n.resolve()}catch(e){n.reject(e)}},function(e){n.reject(e)});return n.promise}var u=l.getValidationAttr(r,e,"maxFiles");null==u&&(u=Number.MAX_VALUE);var d=l.getValidationAttr(r,e,"maxTotalSize");null==d&&(d=Number.MAX_VALUE);var f=v("ngfIncludeDir",e),p=[],h=0,g=[l.emptyPromise()];if(t&&t.length>0&&"file:"!==s.location.protocol)for(var m=0;m<t.length;m++){if(t[m].webkitGetAsEntry&&t[m].webkitGetAsEntry()&&t[m].webkitGetAsEntry().isDirectory){var y=t[m].webkitGetAsEntry();if(y.isDirectory&&!i)continue;null!=y&&g.push(a(y))}else{var b=t[m].getAsFile();null!=b&&(p.push(b),h+=b.size)}if(p.length>u||h>d||!o&&p.length>0)break}else if(null!=n)for(var x=0;x<n.length;x++){var w=n.item(x);if((w.type||w.size>0)&&(p.push(w),h+=w.size),p.length>u||h>d||!o&&p.length>0)break}var _=c.defer();return c.all(g).then(function(){if(o||f||!p.length)_.resolve(p);else{for(var e=0;p[e]&&"directory"===p[e].type;)e++;_.resolve([p[e]])}},function(e){_.reject(e)}),_.promise}var m=t(),v=function(e,t,n){return l.attrGetter(e,r,t,n)};if(v("dropAvailable")&&a(function(){e[v("dropAvailable")]?e[v("dropAvailable")].value=m:e[v("dropAvailable")]=m}),m){null==v("ngfSelect")&&l.registerModelChangeValidator(i,r,e);var y,b=null,x=o(v("ngfStopPropagation")),w=1;n[0].addEventListener("dragover",function(t){if(!d()&&l.shouldUpdateOn("drop",r,e)){if(t.preventDefault(),x(e)&&t.stopPropagation(),navigator.userAgent.indexOf("Chrome")>-1){var i=t.dataTransfer.effectAllowed;t.dataTransfer.dropEffect="move"===i||"linkMove"===i?"move":"copy"}a.cancel(b),y||(y="C",h(e,r,t,function(r){y=r,n.addClass(y),v("ngfDrag",e,{$isDragging:!0,$class:y,$event:t})}))}},!1),n[0].addEventListener("dragenter",function(t){!d()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),x(e)&&t.stopPropagation())},!1),n[0].addEventListener("dragleave",function(t){!d()&&l.shouldUpdateOn("drop",r,e)&&(t.preventDefault(),x(e)&&t.stopPropagation(),b=a(function(){y&&n.removeClass(y),y=null,v("ngfDrag",e,{$isDragging:!1,$event:t})},w||100))},!1),n[0].addEventListener("drop",function(t){if(!d()&&l.shouldUpdateOn("drop",r,e)){t.preventDefault(),x(e)&&t.stopPropagation(),y&&n.removeClass(y),y=null;var i,o=t.dataTransfer.items;try{i=t.dataTransfer&&t.dataTransfer.getData&&t.dataTransfer.getData("text/html")}catch(e){}g(o,t.dataTransfer.files,!1!==v("ngfAllowDir",e),v("multiple")||v("ngfMultiple",e)).then(function(e){e.length?f(e,t):p("dropUrl",i).then(function(e){f(e,t)})})}},!1),n[0].addEventListener("paste",function(t){if(navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&t.preventDefault(),!d()&&l.shouldUpdateOn("paste",r,e)){var n=[],i=t.clipboardData||t.originalEvent.clipboardData;if(i&&i.items)for(var o=0;o<i.items.length;o++)-1!==i.items[o].type.indexOf("image")&&n.push(i.items[o].getAsFile());n.length?f(n,t):p("pasteUrl",i).then(function(e){f(e,t)})}},!1),navigator.userAgent.toLowerCase().indexOf("firefox")>-1&&v("ngfEnableFirefoxPaste",e)&&(n.attr("contenteditable",!0),n.on("keypress",function(e){e.metaKey||e.ctrlKey||e.preventDefault()}))}else!0===v("ngfHideOnDropNotAvailable",e)&&n.css("display","none")}function t(){var e=document.createElement("div");return"draggable"in e&&"ondrop"in e&&!/Edge\/12./i.test(navigator.userAgent)}ngFileUpload.directive("ngfDrop",["$parse","$timeout","$window","Upload","$http","$q",function(t,n,r,i,o,a){return{restrict:"AEC",require:"?ngModel",link:function(s,l,u,c){e(s,l,u,c,t,n,r,i,o,a)}}}]),ngFileUpload.directive("ngfNoFileDrop",function(){return function(e,n){t()&&n.css("display","none")}}),ngFileUpload.directive("ngfDropAvailable",["$parse","$timeout","Upload",function(e,n,r){return function(i,o,a){if(t()){var s=e(r.attrGetter("ngfDropAvailable",a));n(function(){s(i),s.assign&&s.assign(i,!0)})}}}])}(),ngFileUpload.service("UploadExif",["UploadResize","$q",function(e,t){function n(e,t,n,r){switch(t){case 2:return e.transform(-1,0,0,1,n,0);case 3:return e.transform(-1,0,0,-1,n,r);case 4:return e.transform(1,0,0,-1,0,r);case 5:return e.transform(0,1,1,0,0,0);case 6:return e.transform(0,1,-1,0,r,0);case 7:return e.transform(0,-1,-1,0,r,n);case 8:return e.transform(0,-1,1,0,0,n)}}function r(e){for(var t="",n=new Uint8Array(e),r=n.byteLength,i=0;r>i;i++)t+=String.fromCharCode(n[i]);return window.btoa(t)}var i=e;return i.isExifSupported=function(){return window.FileReader&&(new FileReader).readAsArrayBuffer&&i.isResizeSupported()},i.readOrientation=function(e){var n=t.defer(),r=new FileReader,i=e.slice?e.slice(0,65536):e;return r.readAsArrayBuffer(i),r.onerror=function(e){return n.reject(e)},r.onload=function(e){var t={orientation:1},r=new DataView(this.result);if(65496!==r.getUint16(0,!1))return n.resolve(t);for(var i=r.byteLength,o=2;i>o;){var a=r.getUint16(o,!1);if(o+=2,65505===a){if(1165519206!==r.getUint32(o+=2,!1))return n.resolve(t);var s=18761===r.getUint16(o+=6,!1);o+=r.getUint32(o+4,s);var l=r.getUint16(o,s);o+=2;for(var u=0;l>u;u++)if(274===r.getUint16(o+12*u,s)){var c=r.getUint16(o+12*u+8,s);return c>=2&&8>=c&&(r.setUint16(o+12*u+8,1,s),t.fixedArrayBuffer=e.target.result),t.orientation=c,n.resolve(t)}}else{if(65280!=(65280&a))break;o+=r.getUint16(o,!1)}}return n.resolve(t)},n.promise},i.applyExifRotation=function(e){if(0!==e.type.indexOf("image/jpeg"))return i.emptyPromise(e);var o=t.defer();return i.readOrientation(e).then(function(t){return t.orientation<2||t.orientation>8?o.resolve(e):void i.dataUrl(e,!0).then(function(a){var s=document.createElement("canvas"),l=document.createElement("img");l.onload=function(){try{s.width=t.orientation>4?l.height:l.width,s.height=t.orientation>4?l.width:l.height;var a=s.getContext("2d");n(a,t.orientation,l.width,l.height),a.drawImage(l,0,0);var u=s.toDataURL(e.type||"image/WebP",.934);u=i.restoreExif(r(t.fixedArrayBuffer),u);var c=i.dataUrltoBlob(u,e.name);o.resolve(c)}catch(e){return o.reject(e)}},l.onerror=function(){o.reject()},l.src=a},function(e){o.reject(e)})},function(e){o.reject(e)}),o.promise},i.restoreExif=function(e,t){var n={};return n.KEY_STR="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n.encode64=function(e){var t,n,r,i,o,a="",s="",l="",u=0;do{t=e[u++],n=e[u++],s=e[u++],r=t>>2,i=(3&t)<<4|n>>4,o=(15&n)<<2|s>>6,l=63&s,isNaN(n)?o=l=64:isNaN(s)&&(l=64),a=a+this.KEY_STR.charAt(r)+this.KEY_STR.charAt(i)+this.KEY_STR.charAt(o)+this.KEY_STR.charAt(l),t=n=s="",r=i=o=l=""}while(u<e.length);return a},n.restore=function(e,t){e.match("data:image/jpeg;base64,")&&(e=e.replace("data:image/jpeg;base64,",""));var n=this.decode64(e),r=this.slice2Segments(n),i=this.exifManipulation(t,r);return"data:image/jpeg;base64,"+this.encode64(i)},n.exifManipulation=function(e,t){var n=this.getExifArray(t),r=this.insertExif(e,n);return new Uint8Array(r)},n.getExifArray=function(e){for(var t,n=0;n<e.length;n++)if(255===(t=e[n])[0]&225===t[1])return t;return[]},n.insertExif=function(e,t){var n=e.replace("data:image/jpeg;base64,",""),r=this.decode64(n),i=r.indexOf(255,3),o=r.slice(0,i),a=r.slice(i),s=o;return s=s.concat(t),s=s.concat(a)},n.slice2Segments=function(e){for(var t=0,n=[];!(255===e[t]&218===e[t+1]);){if(255===e[t]&216===e[t+1])t+=2;else{var r=t+(256*e[t+2]+e[t+3])+2,i=e.slice(t,r);n.push(i),t=r}if(t>e.length)break}return n},n.decode64=function(e){var t,n,r,i,o,a="",s="",l=0,u=[];/[^A-Za-z0-9\+\/\=]/g.exec(e)&&console.log("There were invalid base64 characters in the input text.\nValid base64 characters are A-Z, a-z, 0-9, NaNExpect errors in decoding."),e=e.replace(/[^A-Za-z0-9\+\/\=]/g,"");do{r=this.KEY_STR.indexOf(e.charAt(l++)),i=this.KEY_STR.indexOf(e.charAt(l++)),o=this.KEY_STR.indexOf(e.charAt(l++)),s=this.KEY_STR.indexOf(e.charAt(l++)),t=r<<2|i>>4,n=(15&i)<<4|o>>2,a=(3&o)<<6|s,u.push(t),64!==o&&u.push(n),64!==s&&u.push(a),t=n=a="",r=i=o=s=""}while(l<e.length);return u},n.restore(e,t)},i}]),function(e,t){function n(e){return!!(""===e||e&&e.charCodeAt&&e.substr)}function r(e){return d?d(e):"[object Array]"===f.call(e)}function i(e){return e&&"[object Object]"===f.call(e)}function o(e,t){var n;e=e||{},t=t||{};for(n in t)t.hasOwnProperty(n)&&null==e[n]&&(e[n]=t[n]);return e}function a(e,t,n){var r,i,o=[];if(!e)return o;if(c&&e.map===c)return e.map(t,n);for(r=0,i=e.length;r<i;r++)o[r]=t.call(n,e[r],r,e);return o}function s(e,t){return e=Math.round(Math.abs(e)),isNaN(e)?t:e}function l(e){var t=u.settings.currency.format;return"function"==typeof e&&(e=e()),n(e)&&e.match("%v")?{pos:e,neg:e.replace("-","").replace("%v","-%v"),zero:e}:e&&e.pos&&e.pos.match("%v")?e:n(t)?u.settings.currency.format={pos:t,neg:t.replace("%v","-%v"),zero:t}:t}var u={};u.version="0.4.1",u.settings={currency:{symbol:"$",format:"%s%v",decimal:".",thousand:",",precision:2,grouping:3},number:{precision:0,grouping:3,thousand:",",decimal:"."}};var c=Array.prototype.map,d=Array.isArray,f=Object.prototype.toString,p=u.unformat=u.parse=function(e,t){if(r(e))return a(e,function(e){return p(e,t)});if("number"==typeof(e=e||0))return e;t=t||u.settings.number.decimal;var n=new RegExp("[^0-9-"+t+"]",["g"]),i=parseFloat((""+e).replace(/\((.*)\)/,"-$1").replace(n,"").replace(t,"."));return isNaN(i)?0:i},h=u.toFixed=function(e,t){t=s(t,u.settings.number.precision);var n=Math.pow(10,t);return(Math.round(u.unformat(e)*n)/n).toFixed(t)},g=u.formatNumber=u.format=function(e,t,n,l){if(r(e))return a(e,function(e){return g(e,t,n,l)});e=p(e);var c=o(i(t)?t:{precision:t,thousand:n,decimal:l},u.settings.number),d=s(c.precision),f=e<0?"-":"",m=parseInt(h(Math.abs(e||0),d),10)+"",v=m.length>3?m.length%3:0;return f+(v?m.substr(0,v)+c.thousand:"")+m.substr(v).replace(/(\d{3})(?=\d)/g,"$1"+c.thousand)+(d?c.decimal+h(Math.abs(e),d).split(".")[1]:"")},m=u.formatMoney=function(e,t,n,c,d,f){if(r(e))return a(e,function(e){return m(e,t,n,c,d,f)});e=p(e);var h=o(i(t)?t:{symbol:t,precision:n,thousand:c,decimal:d,format:f},u.settings.currency),v=l(h.format);return(e>0?v.pos:e<0?v.neg:v.zero).replace("%s",h.symbol).replace("%v",g(Math.abs(e),s(h.precision),h.thousand,h.decimal))};u.formatColumn=function(e,t,c,d,f,h){if(!e)return[];var m=o(i(t)?t:{symbol:t,precision:c,thousand:d,decimal:f,format:h},u.settings.currency),v=l(m.format),y=v.pos.indexOf("%s")<v.pos.indexOf("%v"),b=0;return a(a(e,function(e,t){if(r(e))return u.formatColumn(e,m);var n=((e=p(e))>0?v.pos:e<0?v.neg:v.zero).replace("%s",m.symbol).replace("%v",g(Math.abs(e),s(m.precision),m.thousand,m.decimal));return n.length>b&&(b=n.length),n}),function(e,t){return n(e)&&e.length<b?y?e.replace(m.symbol,m.symbol+new Array(b-e.length+1).join(" ")):new Array(b-e.length+1).join(" ")+e:e})},"undefined"!=typeof exports?("undefined"!=typeof module&&module.exports&&(exports=module.exports=u),exports.accounting=u):"function"==typeof define&&define.amd?define([],function(){return u}):(u.noConflict=function(t){return function(){return e.accounting=t,u.noConflict=void 0,u}}(e.accounting),e.accounting=u)}(this),function(){"use strict";angular.module("ui.grid.i18n",[]),angular.module("ui.grid",["ui.grid.i18n"])}(),function(){"use strict";angular.module("ui.grid").constant("uiGridConstants",{LOG_DEBUG_MESSAGES:!0,LOG_WARN_MESSAGES:!0,LOG_ERROR_MESSAGES:!0,CUSTOM_FILTERS:/CUSTOM_FILTERS/g,COL_FIELD:/COL_FIELD/g,MODEL_COL_FIELD:/MODEL_COL_FIELD/g,TOOLTIP:/title=\"TOOLTIP\"/g,DISPLAY_CELL_TEMPLATE:/DISPLAY_CELL_TEMPLATE/g,TEMPLATE_REGEXP:/<.+>/,FUNC_REGEXP:/(\([^)]*\))?$/,DOT_REGEXP:/\./g,APOS_REGEXP:/'/g,BRACKET_REGEXP:/^(.*)((?:\s*\[\s*\d+\s*\]\s*)|(?:\s*\[\s*"(?:[^"\\]|\\.)*"\s*\]\s*)|(?:\s*\[\s*'(?:[^'\\]|\\.)*'\s*\]\s*))(.*)$/,COL_CLASS_PREFIX:"ui-grid-col",ENTITY_BINDING:"$$this",events:{GRID_SCROLL:"uiGridScroll",COLUMN_MENU_SHOWN:"uiGridColMenuShown",ITEM_DRAGGING:"uiGridItemDragStart",COLUMN_HEADER_CLICK:"uiGridColumnHeaderClick"},keymap:{TAB:9,STRG:17,CAPSLOCK:20,CTRL:17,CTRLRIGHT:18,CTRLR:18,SHIFT:16,RETURN:13,ENTER:13,BACKSPACE:8,BCKSP:8,ALT:18,ALTR:17,ALTRIGHT:17,SPACE:32,WIN:91,MAC:91,FN:null,PG_UP:33,PG_DOWN:34,UP:38,DOWN:40,LEFT:37,RIGHT:39,ESC:27,DEL:46,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123},ASC:"asc",DESC:"desc",filter:{STARTS_WITH:2,ENDS_WITH:4,EXACT:8,CONTAINS:16,GREATER_THAN:32,GREATER_THAN_OR_EQUAL:64,LESS_THAN:128,LESS_THAN_OR_EQUAL:256,NOT_EQUAL:512,SELECT:"select",INPUT:"input"},aggregationTypes:{sum:2,count:4,avg:8,min:16,max:32},CURRENCY_SYMBOLS:["¤","؋","Ar","Ƀ","฿","B/.","Br","Bs.","Bs.F.","GH₵","¢","c","Ch.","₡","C$","D","ден","دج",".د.ب","د.ع","JD","د.ك","ل.د","дин","د.ت","د.م.","د.إ","Db","$","₫","Esc","€","ƒ","Ft","FBu","FCFA","CFA","Fr","FRw","G","gr","₲","h","₴","₭","Kč","kr","kn","MK","ZK","Kz","K","L","Le","лв","E","lp","M","KM","MT","₥","Nfk","₦","Nu.","UM","T$","MOP$","₱","Pt.","£","ج.م.","LL","LS","P","Q","q","R","R$","ر.ع.","ر.ق","ر.س","៛","RM","p","Rf.","₹","₨","SRe","Rp","₪","Ksh","Sh.So.","USh","S/","SDR","сом","৳\t","WS$","₮","VT","₩","¥","zł"],scrollDirection:{UP:"up",DOWN:"down",LEFT:"left",RIGHT:"right",NONE:"none"},dataChange:{ALL:"all",EDIT:"edit",ROW:"row",COLUMN:"column",OPTIONS:"options"},scrollbars:{NEVER:0,ALWAYS:1,WHEN_NEEDED:2}})}(),angular.module("ui.grid").directive("uiGridCell",["$compile","$parse","gridUtil","uiGridConstants",function(e,t,n,r){return{priority:0,scope:!1,require:"?^uiGrid",compile:function(){return{pre:function(t,i,o,a){if(a&&t.col.compiledElementFn)!function(){(0,t.col.compiledElementFn)(t,function(e,t){i.append(e)})}();else if(a&&!t.col.compiledElementFn)t.col.getCompiledElementFn().then(function(e){e(t,function(e,t){i.append(e)})}).catch(angular.noop);else{var s=t.col.cellTemplate.replace(r.MODEL_COL_FIELD,"row.entity."+n.preEval(t.col.field)).replace(r.COL_FIELD,"grid.getCellValue(row, col)"),l=e(s)(t);i.append(l)}},post:function(e,t,n,i){var o=e.col.getColClass(!1);t.addClass(o);var a,s=function(n){var r=t;a&&(r.removeClass(a),a=null),a=angular.isFunction(e.col.cellClass)?e.col.cellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.cellClass,r.addClass(a)};e.col.cellClass&&s();var l=e.grid.registerDataChangeCallback(s,[r.dataChange.COLUMN,r.dataChange.EDIT]),u=function(n,r){if(n!==r){(a||e.col.cellClass)&&s();var i=e.col.getColClass(!1);i!==o&&(t.removeClass(o),t.addClass(i),o=i)}},c=e.$watch("row",u),d=function(){l(),c()};e.$on("$destroy",d),t.on("$destroy",d)}}}}}]),function(){angular.module("ui.grid").service("uiGridColumnMenuService",["i18nService","uiGridConstants","gridUtil",function(e,t,n){var r={initialize:function(e,t){e.grid=t.grid,t.columnMenuScope=e,e.menuShown=!1},setColMenuItemWatch:function(e){var t=e.$watch("col.menuItems",function(t){void 0!==t&&t&&angular.isArray(t)?(t.forEach(function(t){void 0!==t.context&&t.context||(t.context={}),t.context.col=e.col}),e.menuItems=e.defaultMenuItems.concat(t)):e.menuItems=e.defaultMenuItems});e.$on("$destroy",t)},sortable:function(e){return!!(e.grid.options.enableSorting&&void 0!==e.col&&e.col&&e.col.enableSorting)},isActiveSort:function(e,t){return void 0!==e.col&&void 0!==e.col.sort&&void 0!==e.col.sort.direction&&e.col.sort.direction===t},suppressRemoveSort:function(e){return!(!e.col||!e.col.suppressRemoveSort)},hideable:function(e){return void 0===e.col||!e.col||!e.col.colDef||!1!==e.col.colDef.enableHiding},getDefaultMenuItems:function(n){return[{title:function(){return e.getSafeText("sort.ascending")},icon:"ui-grid-icon-sort-alt-up",action:function(e){e.stopPropagation(),n.sortColumn(e,t.ASC)},shown:function(){return r.sortable(n)},active:function(){return r.isActiveSort(n,t.ASC)}},{title:function(){return e.getSafeText("sort.descending")},icon:"ui-grid-icon-sort-alt-down",action:function(e){e.stopPropagation(),n.sortColumn(e,t.DESC)},shown:function(){return r.sortable(n)},active:function(){return r.isActiveSort(n,t.DESC)}},{title:function(){return e.getSafeText("sort.remove")},icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),n.unsortColumn()},shown:function(){return r.sortable(n)&&void 0!==n.col&&void 0!==n.col.sort&&void 0!==n.col.sort.direction&&null!==n.col.sort.direction&&!r.suppressRemoveSort(n)}},{title:function(){return e.getSafeText("column.hide")},icon:"ui-grid-icon-cancel",shown:function(){return r.hideable(n)},action:function(e){e.stopPropagation(),n.hideColumn()}}]},getColumnElementPosition:function(e,t,r){var i={};return i.left=r[0].offsetLeft,i.top=r[0].offsetTop,i.parentLeft=r[0].offsetParent.offsetLeft,i.offset=0,t.grid.options.offsetLeft&&(i.offset=t.grid.options.offsetLeft),i.height=n.elementHeight(r,!0),i.width=n.elementWidth(r,!0),i},repositionMenu:function(e,t,r,i,o){var a=i[0].querySelectorAll(".ui-grid-menu"),s=n.closestElm(o,".ui-grid-render-container"),l=s.getBoundingClientRect().left-e.grid.element[0].getBoundingClientRect().left,u=s.querySelectorAll(".ui-grid-viewport")[0].scrollLeft,c=n.elementWidth(a,!0),d=t.lastMenuPaddingRight?t.lastMenuPaddingRight:e.lastMenuPaddingRight?e.lastMenuPaddingRight:10;0!==a.length&&0!==a[0].querySelectorAll(".ui-grid-menu-mid").length&&(d=parseInt(n.getStyles(angular.element(a)[0]).paddingRight,10),e.lastMenuPaddingRight=d,t.lastMenuPaddingRight=d);var f=r.left+l-u+r.parentLeft+r.width+d;f<r.offset+c&&(f=Math.max(r.left-u+r.parentLeft-d+c,r.offset+c)),i.css("left",f+"px"),i.css("top",r.top+r.height+"px")}};return r}]).directive("uiGridColumnMenu",["$timeout","gridUtil","uiGridConstants","uiGridColumnMenuService","$document",function(e,t,n,r,i){return{priority:0,scope:!0,require:"^uiGrid",templateUrl:"ui-grid/uiGridColumnMenu",replace:!0,link:function(o,a,s,l){function u(){function e(e,t,r,o){e.keyCode===n.keymap.TAB&&(t?e.preventDefault():r&&(e.preventDefault(),i[o].focus()))}var t,r=angular.element(a[0].querySelector(".ui-grid-menu-items"))[0],i=[];r&&(r.onkeydown=function(e){e.keyCode===n.keymap.ESC&&(e.preventDefault(),o.hideMenu())},t=r.querySelectorAll(".ui-grid-menu-item:not(.ng-hide)"),angular.forEach(t,function(e){null!==e.offsetParent&&this.push(e)},i),i.length&&(1===i.length?i[0].onkeydown=function(t){e(t,!0)}:(i[0].onkeydown=function(t){e(t,!1,t.shiftKey,i.length-1)},i[i.length-1].onkeydown=function(t){e(t,!1,!t.shiftKey,0)})))}r.initialize(o,l),o.defaultMenuItems=r.getDefaultMenuItems(o),o.menuItems=o.defaultMenuItems,r.setColMenuItemWatch(o),o.showMenu=function(e,t,n){o.col=e;var i=r.getColumnElementPosition(o,e,t);o.menuShown?(o.colElement=t,o.colElementPosition=i,o.hideThenShow=!0,o.$broadcast("hide-menu",{originalEvent:n})):(o.menuShown=!0,o.colElement=t,o.colElementPosition=i,o.$broadcast("show-menu",{originalEvent:n}))},o.hideMenu=function(e){o.menuShown=!1,e||o.$broadcast("hide-menu")},o.$on("menu-hidden",function(){var e=angular.element(a[0].querySelector(".ui-grid-menu-items"))[0];a[0].removeAttribute("style"),o.hideThenShow?(delete o.hideThenShow,o.$broadcast("show-menu"),o.menuShown=!0):(o.hideMenu(!0),o.col&&t.focus.bySelector(i,".ui-grid-header-cell."+o.col.getColClass()+" .ui-grid-column-menu-button",o.col.grid,!1)),e&&(e.onkeydown=null,angular.forEach(e.children,function(e){e.onkeydown=null}))}),o.$on("menu-shown",function(){e(function(){r.repositionMenu(o,o.col,o.colElementPosition,a,o.colElement),t.focus.bySelector(i,".ui-grid-menu-items .ui-grid-menu-item:not(.ng-hide)",!0),delete o.colElementPosition,delete o.columnElement,u()})}),o.sortColumn=function(e,t){e.stopPropagation(),o.grid.sortColumn(o.col,t,!0).then(function(){o.grid.refresh(),o.hideMenu()}).catch(angular.noop)},o.unsortColumn=function(){o.col.unsort(),o.grid.refresh(),o.hideMenu()};var c=function(){e(function(){var e,n=function(){return t.focus.byId("grid-menu",o.grid)};o.grid.columns.some(function(t,n){if(angular.equals(t,o.col))return e=n,!0});var r;if(o.grid.columns.some(function(t,n){if(!t.visible)return!1;if(n<e)r=t;else{if(n>e&&!r)return r=t,!0;if(n>e&&r)return!0}}),r){var a=r.getColClass();t.focus.bySelector(i,".ui-grid-header-cell."+a+" .ui-grid-header-cell-primary-focus",!0).then(angular.noop,function(e){if("canceled"!==e)return n()}).catch(angular.noop)}else n()})};o.hideColumn=function(){o.col.colDef.visible=!1,o.col.visible=!1,o.grid.queueGridRefresh(),o.hideMenu(),o.grid.api.core.notifyDataChange(n.dataChange.COLUMN),o.grid.api.core.raise.columnVisibilityChanged(o.col),c()}},controller:["$scope",function(e){var t=this;e.$watch("menuItems",function(e){t.menuItems=e})}]}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFilter",["$compile","$templateCache","i18nService","gridUtil",function(e,t,n,r){return{compile:function(){return{pre:function(t,n,r,i){t.col.updateFilters=function(r){if(n.children().remove(),r){var i=t.col.filterHeaderTemplate;void 0===i&&""!==t.col.providedFilterHeaderTemplate?t.col.filterHeaderTemplatePromise&&t.col.filterHeaderTemplatePromise.then(function(){i=t.col.filterHeaderTemplate,n.append(e(i)(t))}):n.append(e(i)(t))}},t.$on("$destroy",function(){delete t.col.updateFilters})},post:function(e,t,i,o){e.aria=n.getSafeText("headerCell.aria"),e.removeFilter=function(e,n){e.term=null,r.focus.bySelector(t,".ui-grid-filter-input-"+n)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooterCell",["$timeout","gridUtil","uiGridConstants","$compile",function(e,t,n,r){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},replace:!0,require:"^uiGrid",compile:function(e,t,i){return{pre:function(e,t,n,i){var o=e.col.footerCellTemplate;void 0===o&&""!==e.col.providedFooterCellTemplate?e.col.footerCellTemplatePromise&&e.col.footerCellTemplatePromise.then(function(){o=e.col.footerCellTemplate,t.append(r(o)(e))}):t.append(r(o)(e))},post:function(e,t,r,i){e.grid=i.grid;var o=e.col.getColClass(!1);t.addClass(o);var a,s=function(n){var r=t;a&&(r.removeClass(a),a=null),a=angular.isFunction(e.col.footerCellClass)?e.col.footerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.footerCellClass,r.addClass(a)};e.col.footerCellClass&&s(),e.col.updateAggregationValue();var l=e.grid.registerDataChangeCallback(s,[n.dataChange.COLUMN]);e.grid.api.core.on.rowsRendered(e,e.col.updateAggregationValue),e.grid.api.core.on.rowsRendered(e,s),e.$on("$destroy",l)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,r,i){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,i,o){var a=o[0],s=o[1];e.grid=a.grid,e.colContainer=s.colContainer,s.footer=n;var l=e.grid.options.footerTemplate;r.getTemplate(l).then(function(r){var i=angular.element(r),o=t(i)(e);if(n.append(o),s){var a=n[0].getElementsByClassName("ui-grid-footer-viewport")[0];a&&(s.footerViewport=a)}}).catch(angular.noop)},post:function(e,t,n,i){var o=i[0],a=i[1];o.grid;r.disableAnimations(t),a.footer=t;var s=t[0].getElementsByClassName("ui-grid-footer-viewport")[0];s&&(a.footerViewport=s)}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridGridFooter",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout",function(e,t,n,r,i){return{restrict:"EA",replace:!0,require:"^uiGrid",scope:!0,compile:function(e,n){return{pre:function(e,n,i,o){e.grid=o.grid;var a=e.grid.options.gridFooterTemplate;r.getTemplate(a).then(function(r){var i=angular.element(r),o=t(i)(e);n.append(o)}).catch(angular.noop)},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeaderCell",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","ScrollEvent","i18nService",function(e,t,n,r,i,o,a,s){return{priority:0,scope:{col:"=",row:"=",renderIndex:"="},require:["^uiGrid","^uiGridRenderContainer"],replace:!0,compile:function(){return{pre:function(t,n,r){var i=t.col.headerCellTemplate;void 0===i&&""!==t.col.providedHeaderCellTemplate?t.col.headerCellTemplatePromise&&t.col.headerCellTemplatePromise.then(function(){i=t.col.headerCellTemplate,n.append(e(i)(t))}):n.append(e(i)(t))},post:function(e,n,i,a){var l=a[0],u=a[1];e.i18n={headerCell:s.getSafeText("headerCell"),sort:s.getSafeText("sort")},e.isSortPriorityVisible=function(){return angular.isNumber(e.col.sort.priority)&&e.grid.columns.some(function(t,n){return angular.isNumber(t.sort.priority)&&t!==e.col})},e.getSortDirectionAriaLabel=function(){var t=e.col,n=t.sort.direction===o.ASC?e.i18n.sort.ascending:t.sort.direction===o.DESC?e.i18n.sort.descending:e.i18n.sort.none;return e.isSortPriorityVisible()&&(n=n+". "+e.i18n.headerCell.priority+" "+(t.sort.priority+1)),n},e.grid=l.grid,e.renderContainer=l.grid.renderContainers[u.containerId];var c=e.col.getColClass(!1);n.addClass(c),e.menuShown=!1,e.asc=o.ASC,e.desc=o.DESC;angular.element(n[0].querySelectorAll(".ui-grid-header-cell-menu"));var d,f,p=angular.element(n[0].querySelectorAll(".ui-grid-cell-contents")),h=[];e.downFn=function(i){i.stopPropagation(),void 0!==i.originalEvent&&void 0!==i.originalEvent&&(i=i.originalEvent),i.button&&0!==i.button||(f=i.pageX,e.mousedownStartTime=(new Date).getTime(),e.mousedownTimeout=t(function(){},500),e.mousedownTimeout.then(function(){e.colMenu&&l.columnMenuScope.showMenu(e.col,n,i)}).catch(angular.noop),l.fireEvent(o.events.COLUMN_HEADER_CLICK,{event:i,columnName:e.col.colDef.name}),e.offAllEvents(),"touchstart"===i.type?(r.on("touchend",e.upFn),r.on("touchmove",e.moveFn)):"mousedown"===i.type&&(r.on("mouseup",e.upFn),r.on("mousemove",e.moveFn)))},e.upFn=function(n){n.stopPropagation(),t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type),(new Date).getTime()-e.mousedownStartTime>500||e.sortable&&e.handleClick(n)},e.handleKeyDown=function(e){32===e.keyCode&&e.preventDefault()},e.moveFn=function(n){0!==n.pageX-f&&(t.cancel(e.mousedownTimeout),e.offAllEvents(),e.onDownEvents(n.type))},e.clickFn=function(t){t.stopPropagation(),p.off("click",e.clickFn)},e.offAllEvents=function(){p.off("touchstart",e.downFn),p.off("mousedown",e.downFn),r.off("touchend",e.upFn),r.off("mouseup",e.upFn),r.off("touchmove",e.moveFn),r.off("mousemove",e.moveFn),p.off("click",e.clickFn)},e.onDownEvents=function(n){switch(n){case"touchmove":case"touchend":p.on("click",e.clickFn),p.on("touchstart",e.downFn),t(function(){p.on("mousedown",e.downFn)},500);break;case"mousemove":case"mouseup":p.on("click",e.clickFn),p.on("mousedown",e.downFn),t(function(){p.on("touchstart",e.downFn)},500);break;default:p.on("click",e.clickFn),p.on("touchstart",e.downFn),p.on("mousedown",e.downFn)}};var g=function(t){var r=n;d&&(r.removeClass(d),d=null),d=angular.isFunction(e.col.headerCellClass)?e.col.headerCellClass(e.grid,e.row,e.col,e.rowRenderIndex,e.colRenderIndex):e.col.headerCellClass,r.addClass(d),e.$applyAsync(function(){var t=e.grid.renderContainers.right&&e.grid.renderContainers.right.visibleColumnCache.length?e.grid.renderContainers.right:e.grid.renderContainers.body;e.isLastCol=l.grid.options&&l.grid.options.enableGridMenu&&e.col===t.visibleColumnCache[t.visibleColumnCache.length-1]}),e.sortable=Boolean(e.col.enableSorting);var i=e.filterable;e.filterable=Boolean(l.grid.options.enableFiltering&&e.col.enableFiltering),i!==e.filterable&&(void 0!==e.col.updateFilters&&e.col.updateFilters(e.filterable),e.filterable?(e.col.filters.forEach(function(t,n){h.push(e.$watch("col.filters["+n+"].term",function(e,t){e!==t&&(l.grid.api.core.raise.filterChanged(),l.grid.api.core.notifyDataChange(o.dataChange.COLUMN),l.grid.queueGridRefresh())}))}),e.$on("$destroy",function(){h.forEach(function(e){e()})})):h.forEach(function(e){e()})),e.col.grid.options&&!1!==e.col.grid.options.enableColumnMenus&&e.col.colDef&&!1!==e.col.colDef.enableColumnMenu?e.colMenu=!0:e.colMenu=!1,e.offAllEvents(),(e.sortable||e.colMenu)&&(e.onDownEvents(),e.$on("$destroy",function(){e.offAllEvents()}))};g();var m=e.grid.registerDataChangeCallback(g,[o.dataChange.COLUMN]);e.$on("$destroy",m),e.handleClick=function(t){var n=!1;t.shiftKey&&(n=!0),l.grid.sortColumn(e.col,n).then(function(){l.columnMenuScope&&l.columnMenuScope.hideMenu(),l.grid.refresh()}).catch(angular.noop)},e.headerCellArrowKeyDown=function(t){32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),e.toggleMenu(t))},e.toggleMenu=function(t){t.stopPropagation(),l.columnMenuScope.menuShown&&l.columnMenuScope.col===e.col?l.columnMenuScope.hideMenu():l.columnMenuScope.showMenu(e.col,n)}}}}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridHeader",["$templateCache","$compile","uiGridConstants","gridUtil","$timeout","ScrollEvent",function(e,t,n,r,i,o){return{restrict:"EA",replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:!0,compile:function(e,n){return{pre:function(e,n,i,a){function s(){c.header=c.colContainer.header=n;var e=n[0].getElementsByClassName("ui-grid-header-canvas");e.length>0?c.headerCanvas=c.colContainer.headerCanvas=e[0]:c.headerCanvas=null}function l(e){if(!u.grid.isScrollingHorizontally){var t=r.normalizeScrollLeft(c.headerViewport,u.grid),n=c.colContainer.scrollHorizontal(t),i=new o(u.grid,null,c.colContainer,o.Sources.ViewPortScroll);i.newScrollLeft=t,n>-1&&(i.x={percentage:n}),u.grid.scrollContainers(null,i)}}var u=a[0],c=a[1];e.grid=u.grid,e.colContainer=c.colContainer,s();var d;d=e.grid.options.showHeader?e.grid.options.headerTemplate?e.grid.options.headerTemplate:"ui-grid/ui-grid-header":"ui-grid/ui-grid-no-header",r.getTemplate(d).then(function(r){var i=angular.element(r),o=t(i)(e);if(n.replaceWith(o),n=o,s(),c){var a=n[0].getElementsByClassName("ui-grid-header-viewport")[0];a&&(c.headerViewport=a,angular.element(a).on("scroll",l),e.$on("$destroy",function(){angular.element(a).off("scroll",l)}))}e.grid.queueRefresh()}).catch(angular.noop)},post:function(e,t,n,i){function o(){var e="",t=0;return s.colContainer.visibleColumnCache.forEach(function(n){e+=n.getColClassDefinition(),t+=n.drawnWidth}),s.colContainer.canvasWidth=t,e}var a=i[0],s=i[1];a.grid;r.disableAnimations(t),s.header=t;var l=t[0].getElementsByClassName("ui-grid-header-viewport")[0];l&&(s.headerViewport=l),a&&a.grid.registerStyleComputation({priority:15,func:o})}}}}}])}(),function(){angular.module("ui.grid").service("uiGridGridMenuService",["gridUtil","i18nService","uiGridConstants",function(e,t,n){var r={initialize:function(e,t){t.gridMenuScope=e,e.grid=t,e.registeredMenuItems=[],e.$on("$destroy",function(){e.grid&&e.grid.gridMenuScope&&(e.grid.gridMenuScope=null),e.grid&&(e.grid=null),e.registeredMenuItems&&(e.registeredMenuItems=null)}),e.registeredMenuItems=[],t.api.registerMethod("core","addToGridMenu",r.addToGridMenu),t.api.registerMethod("core","removeFromGridMenu",r.removeFromGridMenu)},addToGridMenu:function(t,n){angular.isArray(n)?t.gridMenuScope?(t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems?t.gridMenuScope.registeredMenuItems:[],t.gridMenuScope.registeredMenuItems=t.gridMenuScope.registeredMenuItems.concat(n)):e.logError("Asked to addToGridMenu, but gridMenuScope not present.  Timing issue?  Please log issue with ui-grid"):e.logError("addToGridMenu: menuItems must be an array, and is not, not adding any items")},removeFromGridMenu:function(t,n){var r=-1;t&&t.gridMenuScope&&t.gridMenuScope.registeredMenuItems.forEach(function(t,i){t.id===n&&(r>-1?e.logError("removeFromGridMenu: found multiple items with the same id, removing only the last"):r=i)}),r>-1&&t.gridMenuScope.registeredMenuItems.splice(r,1)},getMenuItems:function(n){var i=[];n.grid.options.gridMenuCustomItems&&(angular.isArray(n.grid.options.gridMenuCustomItems)?i=i.concat(n.grid.options.gridMenuCustomItems):e.logError("gridOptions.gridMenuCustomItems must be an array, and is not"));var o=[{title:t.getSafeText("gridMenu.clearAllFilters"),action:function(e){n.grid.clearAllFilters()},shown:function(){return n.grid.options.enableFiltering},order:100}];return i=i.concat(o),i=i.concat(n.registeredMenuItems),!1!==n.grid.options.gridMenuShowHideColumns&&(i=i.concat(r.showHideColumns(n))),i.sort(function(e,t){return e.order-t.order}),i},showHideColumns:function(e){var n=[];return e.grid.options.columnDefs&&0!==e.grid.options.columnDefs.length&&0!==e.grid.columns.length?(n.push({title:t.getSafeText("gridMenu.columns"),order:300}),e.grid.options.gridMenuTitleFilter=e.grid.options.gridMenuTitleFilter?e.grid.options.gridMenuTitleFilter:function(e){return e},e.grid.options.columnDefs.forEach(function(t,i){if(!1!==t.enableHiding){var o={icon:"ui-grid-icon-ok",action:function(e){e.stopPropagation(),r.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*i};r.setMenuItemTitle(o,t,e.grid),n.push(o),o={icon:"ui-grid-icon-cancel",action:function(e){e.stopPropagation(),r.toggleColumnVisibility(this.context.gridCol)},shown:function(){return!(!0===this.context.gridCol.colDef.visible||void 0===this.context.gridCol.colDef.visible)},context:{gridCol:e.grid.getColumn(t.name||t.field)},leaveOpen:!0,order:301+2*i+1},r.setMenuItemTitle(o,t,e.grid),n.push(o)}}),n):n},setMenuItemTitle:function(t,n,r){var i=r.options.gridMenuTitleFilter(n.displayName||e.readableColumnName(n.name)||n.field);"string"==typeof i?t.title=i:i.then?(t.title="",i.then(function(e){t.title=e},function(e){t.title=e}).catch(angular.noop)):(e.logError("Expected gridMenuTitleFilter to return a string or a promise, it has returned neither, bad config"),t.title="badconfig")},toggleColumnVisibility:function(e){e.colDef.visible=!(!0===e.colDef.visible||void 0===e.colDef.visible),e.grid.refresh(),e.grid.api.core.notifyDataChange(n.dataChange.COLUMN),e.grid.api.core.raise.columnVisibilityChanged(e)}};return r}]).directive("uiGridMenuButton",["gridUtil","uiGridConstants","uiGridGridMenuService","i18nService",function(e,t,n,r){return{priority:0,scope:!0,require:["^uiGrid"],templateUrl:"ui-grid/ui-grid-menu-button",replace:!0,link:function(t,i,o,a){var s=a[0];t.i18n={aria:r.getSafeText("gridMenu.aria")},n.initialize(t,s.grid),t.shown=!1,t.toggleMenu=function(){t.shown?(t.$broadcast("hide-menu"),t.shown=!1):(t.menuItems=n.getMenuItems(t),t.$broadcast("show-menu"),t.shown=!0)},t.$on("menu-hidden",function(){t.shown=!1,e.focus.bySelector(i,".ui-grid-icon-container")})}}}])}(),function(){angular.module("ui.grid").directive("uiGridMenu",["$compile","$timeout","$window","$document","gridUtil","uiGridConstants","i18nService",function(e,t,n,r,i,o,a){return{priority:0,scope:{menuItems:"=",autoHide:"=?"},require:"?^uiGrid",templateUrl:"ui-grid/uiGridMenu",replace:!1,link:function(r,s,l,u){if(r.dynamicStyles="",u&&u.grid&&u.grid.options&&u.grid.options.gridMenuTemplate){var c=u.grid.options.gridMenuTemplate;i.getTemplate(c).then(function(t){var n=angular.element(t),i=e(n)(r);s.replaceWith(i)}).catch(angular.noop)}var d=function(e){var t=e-u.grid.headerHeight-20;r.dynamicStyles=[".grid"+u.grid.id+" .ui-grid-menu-mid {","max-height: "+t+"px;","}"].join(" ")};u&&(d(u.grid.gridHeight),u.grid.api.core.on.gridDimensionChanged(r,function(e,t,n,r){d(n)})),r.i18n={close:a.getSafeText("columnMenu.close")},r.showMenu=function(e,n){r.shown?r.shownMid||(r.shownMid=!0,r.$emit("menu-shown")):(r.shown=!0,t(function(){r.shownMid=!0,r.$emit("menu-shown")}));var i="click";n&&n.originalEvent&&n.originalEvent.type&&"touchstart"===n.originalEvent.type&&(i=n.originalEvent.type),angular.element(document).off("click touchstart",f),s.off("keyup",p),s.off("keydown",h),t(function(){angular.element(document).on(i,f),s.on("keyup",p),s.on("keydown",h)})},r.hideMenu=function(e){r.shown&&(r.shownMid=!1,t(function(){r.shownMid||(r.shown=!1,r.$emit("menu-hidden"))},40)),angular.element(document).off("click touchstart",f),s.off("keyup",p),s.off("keydown",h)},r.$on("hide-menu",function(e,t){r.hideMenu(e,t)}),r.$on("show-menu",function(e,t){r.showMenu(e,t)});var f=function(){r.shown&&r.$apply(function(){r.hideMenu()})},p=function(e){27===e.keyCode&&r.hideMenu()},h=function(e){var t=function(t){return t.focus(),e.preventDefault(),!1};if(9===e.keyCode){var n,r,i=s[0].querySelectorAll("button:not(.ng-hide)");i.length>0&&(n=i[0],r=i[i.length-1],e.target!==r||e.shiftKey?e.target===n&&e.shiftKey&&t(r):t(n))}};void 0!==r.autoHide&&void 0!==r.autoHide||(r.autoHide=!0),r.autoHide&&angular.element(n).on("resize",f),r.$on("$destroy",function(){angular.element(n).off("resize",f),angular.element(document).off("click touchstart",f),s.off("keyup",p),s.off("keydown",h)}),u&&r.$on("$destroy",u.grid.api.core.on.scrollBegin(r,f)),r.$on("$destroy",r.$on(o.events.ITEM_DRAGGING,f))}}}]).directive("uiGridMenuItem",["gridUtil","$compile","i18nService",function(e,t,n){return{priority:0,scope:{name:"=",active:"=",action:"=",icon:"=",shown:"=",context:"=",templateUrl:"=",leaveOpen:"=",screenReaderOnly:"="},require:["?^uiGrid"],templateUrl:"ui-grid/uiGridMenuItem",replace:!1,compile:function(){return{pre:function(n,r){n.templateUrl&&e.getTemplate(n.templateUrl).then(function(e){var i=angular.element(e),o=t(i)(n);r.replaceWith(o)}).catch(angular.noop)},post:function(t,r,i,o){var a=o[0];void 0!==t.shown&&null!==t.shown||(t.shown=function(){return!0}),t.itemShown=function(){var e={};return t.context&&(e.context=t.context),void 0!==a&&a&&(e.grid=a.grid),t.shown.call(e)},t.itemAction=function(n,r){if(n.stopPropagation(),"function"==typeof t.action){var i={};t.context&&(i.context=t.context),void 0!==a&&a&&(i.grid=a.grid),t.action.call(i,n,r),t.leaveOpen?e.focus.bySelector(angular.element(n.target.parentElement),"button[type=button]",!0):t.$emit("hide-menu")}},t.label=function(){var e=t.name;return"function"==typeof t.name&&(e=t.name.call()),e},t.i18n=n.get()}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid");angular.forEach([{tag:"Src",method:"attr"},{tag:"Text",method:"text"},{tag:"Href",method:"attr"},{tag:"Class",method:"addClass"},{tag:"Html",method:"html"},{tag:"Alt",method:"attr"},{tag:"Style",method:"css"},{tag:"Value",method:"attr"},{tag:"Id",method:"attr"},{tag:"Id",directiveName:"IdGrid",method:"attr",appendGridId:!0},{tag:"Title",method:"attr"},{tag:"Label",method:"attr",aria:!0},{tag:"Labelledby",method:"attr",aria:!0},{tag:"Labelledby",directiveName:"LabelledbyGrid",appendGridId:!0,method:"attr",aria:!0},{tag:"Describedby",method:"attr",aria:!0},{tag:"Describedby",directiveName:"DescribedbyGrid",appendGridId:!0,method:"attr",aria:!0}],function(t){var n=(t.aria?"uiGridOneBindAria":"uiGridOneBind")+(t.directiveName?t.directiveName:t.tag);e.directive(n,["gridUtil",function(e){return{restrict:"A",require:["?uiGrid","?^uiGrid"],link:function(r,i,o,a){var s=function(t){var i;if(r.grid)i=r.grid;else if(r.col&&r.col.grid)i=r.col.grid;else if(!a.some(function(e){if(e&&e.grid)return i=e.grid,!0}))throw e.logError("["+n+"] A valid grid could not be found to bind id. Are you using this directive within the correct scope? Trying to generate id: [gridID]-"+t),new Error("No valid grid could be found");return i&&(new RegExp(i.id.toString()).test(t)||(t=i.id.toString()+"-"+t)),t},l=r.$watch(o[n],function(e){if(e){if(t.appendGridId){var n=null;angular.forEach(e.split(" "),function(e){n=(n?n+" ":"")+s(e)}),e=n}switch(t.method){case"attr":t.aria?i[t.method]("aria-"+t.tag.toLowerCase(),e):i[t.method](t.tag.toLowerCase(),e);break;case"addClass":if(angular.isObject(e)&&!angular.isArray(e)){var r=[],o=!1;if(angular.forEach(e,function(e,t){null!==e&&void 0!==e&&(o=!0,e&&r.push(t))}),!o)return;e=r}if(!e)return;i.addClass(angular.isArray(e)?e.join(" "):e);break;default:i[t.method](e)}l()}},!0)}}}])})}(),function(){"use strict";var e=angular.module("ui.grid");e.directive("uiGridRenderContainer",["$timeout","$document","uiGridConstants","gridUtil","ScrollEvent",function(e,t,n,r,i){return{replace:!0,transclude:!0,templateUrl:"ui-grid/uiGridRenderContainer",require:["^uiGrid","uiGridRenderContainer"],scope:{containerId:"=",rowContainerName:"=",colContainerName:"=",bindScrollHorizontal:"=",bindScrollVertical:"=",enableVerticalScrollbar:"=",enableHorizontalScrollbar:"="},controller:"uiGridRenderContainer as RenderContainer",compile:function(){return{pre:function(e,t,n,r){var i=r[0],o=r[1],a=e.grid=i.grid;if(!e.rowContainerName)throw new Error("No row render container name specified");if(!e.colContainerName)throw new Error("No column render container name specified");if(!a.renderContainers[e.rowContainerName])throw new Error("Row render container '"+e.rowContainerName+"' is not registered.");if(!a.renderContainers[e.colContainerName])throw new Error("Column render container '"+e.colContainerName+"' is not registered.");var s=e.rowContainer=a.renderContainers[e.rowContainerName],l=e.colContainer=a.renderContainers[e.colContainerName];o.containerId=e.containerId,o.rowContainer=s,o.colContainer=l},post:function(e,t,n,o){function a(){var t="",n=d.canvasWidth,r=d.getViewportWidth(),i=c.getCanvasHeight(),o=c.getViewportHeight();d.needsHScrollbarPlaceholder()&&(o-=u.scrollbarHeight);var a,l;return a=l=d.getHeaderViewportWidth(),t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-canvas { width: "+n+"px; height: "+i+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { width: "+(n+u.scrollbarWidth)+"px; }",h.explicitHeaderCanvasHeight?t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: "+h.explicitHeaderCanvasHeight+"px; }":t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-canvas { height: inherit; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-viewport { width: "+r+"px; height: "+o+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-header-viewport { width: "+a+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-canvas { width: "+(n+u.scrollbarWidth)+"px; }",t+="\n .grid"+s.grid.id+" .ui-grid-render-container-"+e.containerId+" .ui-grid-footer-viewport { width: "+l+"px; }"}var s=o[0],l=o[1],u=s.grid,c=l.rowContainer,d=l.colContainer,f=null,p=null,h=u.renderContainers[e.containerId];t.addClass("ui-grid-render-container-"+e.containerId),r.on.mousewheel(t,function(e){var t=new i(u,c,d,i.Sources.RenderContainerMouseWheel);if(0!==e.deltaY){var n=-1*e.deltaY*e.deltaFactor;f=l.viewport[0].scrollTop,t.verticalScrollLength=c.getVerticalScrollLength();var o=(f+n)/t.verticalScrollLength;o>=1&&f<t.verticalScrollLength&&(l.viewport[0].scrollTop=t.verticalScrollLength),o<0?o=0:o>1&&(o=1),t.y={percentage:o,pixels:n}}if(0!==e.deltaX){var a=e.deltaX*e.deltaFactor;p=r.normalizeScrollLeft(l.viewport,u),t.horizontalScrollLength=d.getCanvasWidth()-d.getViewportWidth();var s=(p+a)/t.horizontalScrollLength;s<0?s=0:s>1&&(s=1),t.x={percentage:s,pixels:a}}0!==e.deltaY&&(t.atTop(f)||t.atBottom(f))||0!==e.deltaX&&(t.atLeft(p)||t.atRight(p))||(e.preventDefault(),e.stopPropagation(),t.fireThrottledScrollingEvent("",t))}),t.bind("$destroy",function(){t.unbind("keydown"),["touchstart","touchmove","touchend","keydown","wheel","mousewheel","DomMouseScroll","MozMousePixelScroll"].forEach(function(e){t.unbind(e)})}),s.grid.registerStyleComputation({priority:6,func:a})}}}}}]),e.controller("uiGridRenderContainer",["$scope","gridUtil",function(e,t){}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridRow",["gridUtil",function(e){return{replace:!0,require:["^uiGrid","^uiGridRenderContainer"],scope:{row:"=uiGridRow",rowRenderIndex:"="},compile:function(){return{pre:function(e,t,n,r){function i(){e.row.getRowTemplateFn.then(function(n){var r=e.$new();n(r,function(e,n){s&&(s.remove(),l.$destroy()),t.empty().append(e),s=e,l=r})}).catch(angular.noop)}var o=r[0],a=r[1];o.grid;e.grid=o.grid,e.colContainer=a.colContainer;var s,l;i(),e.$watch("row.getRowTemplateFn",function(e,t){e!==t&&i()})},post:function(e,t,n,r){}}}}}])}(),function(){angular.module("ui.grid").directive("uiGridStyle",["gridUtil","$interpolate",function(e,t){return{link:function(e,n,r,i){var o=t(n.text(),!0);o&&e.$watch(o,function(e){n.text(e)})}}}])}(),function(){"use strict";angular.module("ui.grid").directive("uiGridViewport",["gridUtil","ScrollEvent","uiGridConstants","$log",function(e,t,n,r){return{replace:!0,scope:{},controllerAs:"Viewport",templateUrl:"ui-grid/uiGridViewport",require:["^uiGrid","^uiGridRenderContainer"],link:function(n,r,i,o){function a(i){var o=r[0].scrollTop,a=e.normalizeScrollLeft(r,g),s=p.scrollVertical(o),l=h.scrollHorizontal(a),u=new t(g,p,h,t.Sources.ViewPortScroll);u.newScrollLeft=a,u.newScrollTop=o,l>-1&&(u.x={percentage:l}),s>-1&&(u.y={percentage:s}),g.scrollContainers(n.$parent.containerId,u)}function s(e){f.prevScrollArgs=e;var t=e.getNewScrollTop(p,f.viewport);r[0].scrollTop=t}function l(t){f.prevScrollArgs=t;var n=t.getNewScrollLeft(h,f.viewport);r[0].scrollLeft=e.denormalizeScrollLeft(f.viewport,n,g)}function u(t){var n=t.getNewScrollLeft(h,f.viewport);f.headerViewport&&(f.headerViewport.scrollLeft=e.denormalizeScrollLeft(f.viewport,n,g))}function c(t){var n=t.getNewScrollLeft(h,f.viewport);f.footerViewport&&(f.footerViewport.scrollLeft=e.denormalizeScrollLeft(f.viewport,n,g))}var d=o[0],f=o[1];n.containerCtrl=f;var p=f.rowContainer,h=f.colContainer,g=d.grid;n.grid=d.grid,n.rowContainer=f.rowContainer,n.colContainer=f.colContainer,f.viewport=r,g&&g.options&&g.options.customScroller?g.options.customScroller(r,a):r.on("scroll",a);n.$parent.bindScrollVertical&&g.addVerticalScrollSync(n.$parent.containerId,s),n.$parent.bindScrollHorizontal&&(g.addHorizontalScrollSync(n.$parent.containerId,l),g.addHorizontalScrollSync(n.$parent.containerId+"header",u),g.addHorizontalScrollSync(n.$parent.containerId+"footer",c)),n.$on("$destroy",function(){r.off()})},controller:["$scope",function(e){this.rowStyle=function(t){var n=e.rowContainer,r=e.colContainer,i={};if(0!==n.currentTopRow){var o="translateY("+n.currentTopRow*n.grid.options.rowHeight+"px)";i.transform=o,i["-webkit-transform"]=o,i["-ms-transform"]=o}return 0!==r.currentFirstColumn&&(r.grid.isRTL()?i["margin-right"]=r.columnOffset+"px":i["margin-left"]=r.columnOffset+"px"),i}}]}}])}(),function(){angular.module("ui.grid").directive("uiGridVisible",function(){return function(e,t,n){e.$watch(n.uiGridVisible,function(e){t[e?"removeClass":"addClass"]("ui-grid-invisible")})}})}(),function(){"use strict";function e(e,t,n){return{templateUrl:"ui-grid/ui-grid",scope:{uiGrid:"="},replace:!0,transclude:!0,controller:"uiGridController",compile:function(){return{post:function(r,i,o,a){function s(){i[0].offsetWidth<=0&&h<p?(setTimeout(s,f),h++):r.$applyAsync(l)}function l(){d.gridWidth=r.gridWidth=t.elementWidth(i),d.canvasWidth=a.grid.gridWidth,d.gridHeight=r.gridHeight=t.elementHeight(i),d.gridHeight<=d.options.rowHeight&&d.options.enableMinHeightCheck&&u(),d.refreshCanvas(!0)}function u(){var e=d.options.minRowsToShow*d.options.rowHeight,o=d.options.showHeader?d.options.headerRowHeight:0,a=d.calcFooterHeight(),s=0;d.options.enableHorizontalScrollbar===n.scrollbars.ALWAYS&&(s=t.getScrollbarWidth());var l=0;angular.forEach(d.options.columnDefs,function(e){e.hasOwnProperty("filter")?l<1&&(l=1):e.hasOwnProperty("filters")&&l<e.filters.length&&(l=e.filters.length)}),d.options.enableFiltering&&!l&&(d.options.columnDefs.length&&d.options.columnDefs.every(function(e){return!1===e.enableFiltering})||(l=1));var u=o+e+a+s+l*o;i.css("height",u+"px"),d.gridHeight=r.gridHeight=t.elementHeight(i)}function c(){d.gridWidth=r.gridWidth=t.elementWidth(i),d.gridHeight=r.gridHeight=t.elementHeight(i),d.refreshCanvas(!0)}var d=a.grid;a.scrollbars=[],d.element=i;var f=100,p=20,h=0;!function(){var t,n;angular.element(e).on("resize",c),i.on("$destroy",function(){angular.element(e).off("resize",c),t(),n()}),t=r.$watch(function(){return d.hasLeftContainer()},function(e,t){e!==t&&d.refreshCanvas(!0)}),n=r.$watch(function(){return d.hasRightContainer()},function(e,t){e!==t&&d.refreshCanvas(!0)})}(),l(),d.renderingComplete(),s()}}}}}angular.module("ui.grid").controller("uiGridController",["$scope","$element","$attrs","gridUtil","$q","uiGridConstants","gridClassFactory","$parse","$compile",function(e,t,n,r,i,o,a,s,l){function u(e){return e?e.length:0}function c(t,n){t&&t!==n&&(f.grid.options.columnDefs=e.uiGrid.columnDefs,f.grid.callDataChangeCallbacks(o.dataChange.COLUMN,{orderByColumnDefs:!0,preCompileCellTemplates:!0}))}function d(t){var r=[];if(t=angular.isString(e.uiGrid.data)?f.grid.appScope[e.uiGrid.data]:e.uiGrid.data,h=t,t){var a=f.grid.columns.length>(f.grid.rowHeaderColumns?f.grid.rowHeaderColumns.length:0);!a&&!n.uiGridColumns&&0===f.grid.options.columnDefs.length&&t.length>0&&f.grid.buildColumnDefsFromData(t),!a&&(f.grid.options.columnDefs.length>0||t.length>0)&&r.push(f.grid.buildColumns().then(function(){f.grid.preCompileCellTemplates()}).catch(angular.noop)),i.all(r).then(function(){f.grid.modifyRows(h).then(function(){f.grid.redrawInPlace(!0),e.$evalAsync(function(){f.grid.refreshCanvas(!0),f.grid.callDataChangeCallbacks(o.dataChange.ROW)})}).catch(angular.noop)}).catch(angular.noop)}}var f=this,p=[];f.grid=a.createGrid(e.uiGrid),f.grid.appScope=f.grid.appScope||e.$parent,t.addClass("grid"+f.grid.id),f.grid.rtl="rtl"===r.getStyles(t[0]).direction,e.grid=f.grid,n.uiGridColumns&&p.push(n.$observe("uiGridColumns",function(e){f.grid.options.columnDefs=angular.isString(e)?angular.fromJson(e):e,f.grid.buildColumns().then(function(){f.grid.preCompileCellTemplates(),f.grid.refreshCanvas(!0)}).catch(angular.noop)})),f.grid.options.fastWatch?(f.uiGrid=e.uiGrid,angular.isString(e.uiGrid.data)?(p.push(e.$parent.$watch(e.uiGrid.data,d)),p.push(e.$parent.$watch(function(){return f.grid.appScope[e.uiGrid.data]?f.grid.appScope[e.uiGrid.data].length:void 0},d))):(p.push(e.$parent.$watch(function(){return e.uiGrid.data},d)),p.push(e.$parent.$watch(function(){return u(e.uiGrid.data)},function(){d(e.uiGrid.data)}))),p.push(e.$parent.$watch(function(){return e.uiGrid.columnDefs},c)),p.push(e.$parent.$watch(function(){return u(e.uiGrid.columnDefs)},function(){c(e.uiGrid.columnDefs)}))):(angular.isString(e.uiGrid.data)?p.push(e.$parent.$watchCollection(e.uiGrid.data,d)):p.push(e.$parent.$watchCollection(function(){return e.uiGrid.data},d)),p.push(e.$parent.$watchCollection(function(){return e.uiGrid.columnDefs},c)));var h,g=e.$watch(function(){return f.grid.styleComputations},function(){f.grid.refreshCanvas(!0)});e.$on("$destroy",function(){p.forEach(function(e){e()}),g()}),f.fireEvent=function(t,n){n=n||{},angular.isUndefined(n.grid)&&(n.grid=f.grid),e.$broadcast(t,n)},f.innerCompile=function(t){l(t)(e)}}]),angular.module("ui.grid").directive("uiGrid",e),e.$inject=["$window","gridUtil","uiGridConstants"]}(),function(){"use strict";angular.module("ui.grid").directive("uiGridPinnedContainer",["gridUtil",function(e){return{restrict:"EA",replace:!0,template:'<div class="ui-grid-pinned-container"><div ui-grid-render-container container-id="side" row-container-name="\'body\'" col-container-name="side" bind-scroll-vertical="true" class="{{ side }} ui-grid-render-container-{{ side }}"></div></div>',scope:{side:"=uiGridPinnedContainer"},require:"^uiGrid",compile:function(){return{post:function(e,t,n,r){function i(){var e=this,t=0;e.visibleColumnCache.forEach(function(e){t+=e.drawnWidth});var n=e.getViewportAdjustment();return t+=n.width}function o(){if("left"===e.side||"right"===e.side){for(var t=s.renderContainers[e.side].visibleColumnCache,n=0,r=0;r<t.length;r++){var i=t[r];n+=i.drawnWidth||i.width||0}return n}}function a(){var n="";return"left"!==e.side&&"right"!==e.side||(l=o(),t.attr("style",null),n+=".grid"+s.id+" .ui-grid-pinned-container-"+e.side+", .grid"+s.id+" .ui-grid-pinned-container-"+e.side+" .ui-grid-render-container-"+e.side+" .ui-grid-viewport { width: "+l+"px; } "),n}var s=r.grid,l=0;t.addClass("ui-grid-pinned-container-"+e.side),"left"!==e.side&&"right"!==e.side||(s.renderContainers[e.side].getViewportWidth=i),s.renderContainers.body.registerViewportAdjuster(function(t){return l=o(),t.width-=l,t.side=e.side,t}),s.registerStyleComputation({priority:15,func:a})}}}}}])}(),function(){angular.module("ui.grid").factory("Grid",["$q","$compile","$parse","gridUtil","uiGridConstants","GridOptions","GridColumn","GridRow","GridApi","rowSorter","rowSearcher","GridRenderContainer","$timeout","ScrollEvent",function(e,t,n,r,i,o,a,s,l,u,c,d,f,p){function h(){}var g=function(e){function t(e){a.isScrollingVertically=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=i.scrollDirection.NONE}function n(e){a.isScrollingHorizontally=!1,a.api.core.raise.scrollEnd(e),a.scrollDirection=i.scrollDirection.NONE}var a=this;if(void 0===e||void 0===e.id||!e.id)throw new Error("No ID provided. An ID must be given when creating a grid.");if(!/^[_a-zA-Z0-9-]+$/.test(e.id))throw new Error("Grid id '"+e.id+'" is invalid. It must follow CSS selector syntax rules.');a.id=e.id,delete e.id,a.options=o.initialize(e),a.appScope=a.options.appScopeProvider,a.headerHeight=a.options.headerRowHeight,a.footerHeight=a.calcFooterHeight(),a.columnFooterHeight=a.calcColumnFooterHeight(),a.rtl=!1,a.gridHeight=0,a.gridWidth=0,a.columnBuilders=[],a.rowBuilders=[],a.rowsProcessors=[],a.columnsProcessors=[],a.styleComputations=[],a.viewportAdjusters=[],a.rowHeaderColumns=[],a.dataChangeCallbacks={},a.verticalScrollSyncCallBackFns={},a.horizontalScrollSyncCallBackFns={},a.renderContainers={},a.renderContainers.body=new d("body",a),a.cellValueGetterCache={},a.getRowTemplateFn=null,a.rows=[],a.columns=[],a.isScrollingVertically=!1,a.isScrollingHorizontally=!1,a.scrollDirection=i.scrollDirection.NONE,a.disableScrolling=!1;var s=r.debounce(t,a.options.scrollDebounce),c=r.debounce(t,0),f=r.debounce(n,a.options.scrollDebounce),p=r.debounce(n,0);a.flagScrollingVertically=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingVertically=!0,0!==a.options.scrollDebounce&&e.withDelay?s(e):c(e)},a.flagScrollingHorizontally=function(e){a.isScrollingVertically||a.isScrollingHorizontally||a.api.core.raise.scrollBegin(e),a.isScrollingHorizontally=!0,0!==a.options.scrollDebounce&&e.withDelay?f(e):p(e)},a.scrollbarHeight=0,a.scrollbarWidth=0,a.options.enableHorizontalScrollbar!==i.scrollbars.NEVER&&(a.scrollbarHeight=r.getScrollbarWidth()),a.options.enableVerticalScrollbar!==i.scrollbars.NEVER&&(a.scrollbarWidth=r.getScrollbarWidth()),a.api=new l(a),a.api.registerMethod("core","refresh",this.refresh),a.api.registerMethod("core","queueGridRefresh",this.queueGridRefresh),a.api.registerMethod("core","refreshRows",this.refreshRows),a.api.registerMethod("core","queueRefresh",this.queueRefresh),a.api.registerMethod("core","handleWindowResize",this.handleWindowResize),a.api.registerMethod("core","addRowHeaderColumn",this.addRowHeaderColumn),a.api.registerMethod("core","scrollToIfNecessary",function(e,t){return a.scrollToIfNecessary(e,t)}),a.api.registerMethod("core","scrollTo",function(e,t){return a.scrollTo(e,t)}),a.api.registerMethod("core","registerRowsProcessor",this.registerRowsProcessor),a.api.registerMethod("core","registerColumnsProcessor",this.registerColumnsProcessor),a.api.registerMethod("core","sortHandleNulls",u.handleNulls),a.api.registerEvent("core","sortChanged"),a.api.registerEvent("core","columnVisibilityChanged"),a.api.registerMethod("core","notifyDataChange",this.notifyDataChange),a.api.registerMethod("core","clearAllFilters",this.clearAllFilters),a.registerDataChangeCallback(a.columnRefreshCallback,[i.dataChange.COLUMN]),a.registerDataChangeCallback(a.processRowsCallback,[i.dataChange.EDIT]),a.registerDataChangeCallback(a.updateFooterHeightCallback,[i.dataChange.OPTIONS]),a.registerStyleComputation({priority:10,func:a.getFooterStyles})};g.prototype.calcFooterHeight=function(){if(!this.hasFooter())return 0;var e=0;return this.options.showGridFooter&&(e+=this.options.gridFooterHeight),e+=this.calcColumnFooterHeight()},g.prototype.calcColumnFooterHeight=function(){var e=0;return this.options.showColumnFooter&&(e+=this.options.columnFooterHeight),e},g.prototype.getFooterStyles=function(){var e=".grid"+this.id+" .ui-grid-footer-aggregates-row { height: "+this.options.columnFooterHeight+"px; }";return e+=" .grid"+this.id+" .ui-grid-footer-info { height: "+this.options.gridFooterHeight+"px; }"},g.prototype.hasFooter=function(){return this.options.showGridFooter||this.options.showColumnFooter},g.prototype.isRTL=function(){return this.rtl},g.prototype.registerColumnBuilder=function(e){this.columnBuilders.push(e)},g.prototype.buildColumnDefsFromData=function(e){this.options.columnDefs=r.getColumnsFromData(e,this.options.excludeProperties)},g.prototype.registerRowBuilder=function(e){this.rowBuilders.push(e)},g.prototype.registerDataChangeCallback=function(e,t,n){var o=r.nextUid();t||(t=[i.dataChange.ALL]),Array.isArray(t)||r.logError("Expected types to be an array or null in registerDataChangeCallback, value passed was: "+t),this.dataChangeCallbacks[o]={callback:e,types:t,_this:n};var a=this;return function(){delete a.dataChangeCallbacks[o]}},g.prototype.callDataChangeCallbacks=function(e,t){angular.forEach(this.dataChangeCallbacks,function(n,r){-1===n.types.indexOf(i.dataChange.ALL)&&-1===n.types.indexOf(e)&&e!==i.dataChange.ALL||(n._this?n.callback.apply(n._this,this,t):n.callback(this,t))},this)},g.prototype.notifyDataChange=function(e){var t=i.dataChange;e===t.ALL||e===t.COLUMN||e===t.EDIT||e===t.ROW||e===t.OPTIONS?this.callDataChangeCallbacks(e):r.logError("Notified of a data change, but the type was not recognised, so no action taken, type was: "+e)},g.prototype.columnRefreshCallback=function(e,t){e.buildColumns(t),e.queueGridRefresh()},g.prototype.processRowsCallback=function(e){e.queueGridRefresh()},g.prototype.updateFooterHeightCallback=function(e){e.footerHeight=e.calcFooterHeight(),e.columnFooterHeight=e.calcColumnFooterHeight()},g.prototype.getColumn=function(e){var t=this.columns.filter(function(t){return t.colDef.name===e});return t.length>0?t[0]:null},g.prototype.getColDef=function(e){var t=this.options.columnDefs.filter(function(t){return t.name===e});return t.length>0?t[0]:null},g.prototype.assignTypes=function(){var e=this;e.options.columnDefs.forEach(function(t,n){if(!t.type){var i=new a(t,n,e),o=e.rows.length>0?e.rows[0]:null;t.type=o?r.guessType(e.getCellValue(o,i)):"string"}})},g.prototype.isRowHeaderColumn=function(e){return-1!==this.rowHeaderColumns.indexOf(e)},g.prototype.addRowHeaderColumn=function(e,t,n){var i=this;void 0===t&&(t=0);var o=new a(e,r.nextUid(),i);o.isRowHeader=!0,i.isRTL()?(i.createRightContainer(),o.renderContainer="right"):(i.createLeftContainer(),o.renderContainer="left"),i.columnBuilders[0](e,o,i.options).then(function(){o.enableFiltering=!1,o.enableSorting=!1,o.enableHiding=!1,o.headerPriority=t,i.rowHeaderColumns.push(o),i.rowHeaderColumns=i.rowHeaderColumns.sort(function(e,t){return e.headerPriority-t.headerPriority}),n||i.buildColumns().then(function(){i.preCompileCellTemplates(),i.queueGridRefresh()}).catch(angular.noop)}).catch(angular.noop)},g.prototype.getOnlyDataColumns=function(){var e=this,t=[];return e.columns.forEach(function(n){-1===e.rowHeaderColumns.indexOf(n)&&t.push(n)}),t},g.prototype.buildColumns=function(t){var n={orderByColumnDefs:!1};angular.extend(n,t);var i,o=this,s=[],l=o.rowHeaderColumns.length;for(i=0;i<o.columns.length;i++)o.getColDef(o.columns[i].name)||(o.columns.splice(i,1),i--);for(var u=o.rowHeaderColumns.length-1;u>=0;u--)o.columns.unshift(o.rowHeaderColumns[u]);if(o.options.columnDefs.forEach(function(e,t){o.preprocessColDef(e);var n=o.getColumn(e.name);n?n.updateColumnDef(e,!1):(n=new a(e,r.nextUid(),o),o.columns.splice(t+l,0,n)),o.columnBuilders.forEach(function(t){s.push(t.call(o,e,n,o.options))})}),n.orderByColumnDefs){var c=o.columns.slice(0),d=Math.min(o.options.columnDefs.length,o.columns.length);for(i=0;i<d;i++)o.columns[i+l].name!==o.options.columnDefs[i].name?c[i+l]=o.getColumn(o.options.columnDefs[i].name):c[i+l]=o.columns[i+l];o.columns.length=0,Array.prototype.splice.apply(o.columns,[0,0].concat(c))}return e.all(s).then(function(){o.rows.length>0&&o.assignTypes(),n.preCompileCellTemplates&&o.preCompileCellTemplates()}).catch(angular.noop)},g.prototype.preCompileCellTemplate=function(e){var n=this,r=e.cellTemplate.replace(i.MODEL_COL_FIELD,n.getQualifiedColField(e));r=r.replace(i.COL_FIELD,"grid.getCellValue(row, col)");var o=t(r);e.compiledElementFn=o,e.compiledElementFnDefer&&e.compiledElementFnDefer.resolve(e.compiledElementFn)},g.prototype.preCompileCellTemplates=function(){var e=this;e.columns.forEach(function(t){t.cellTemplate?e.preCompileCellTemplate(t):t.cellTemplatePromise&&t.cellTemplatePromise.then(function(){e.preCompileCellTemplate(t)}).catch(angular.noop)})},g.prototype.getQualifiedColField=function(e){return e.field===i.ENTITY_BINDING?"row.entity":r.preEval("row.entity."+e.field)},g.prototype.createLeftContainer=function(){this.hasLeftContainer()||(this.renderContainers.left=new d("left",this,{disableColumnOffset:!0}))},g.prototype.createRightContainer=function(){this.hasRightContainer()||(this.renderContainers.right=new d("right",this,{disableColumnOffset:!0}))},g.prototype.hasLeftContainer=function(){return void 0!==this.renderContainers.left},g.prototype.hasRightContainer=function(){return void 0!==this.renderContainers.right},g.prototype.preprocessColDef=function(e){var t=this;if(!e.field&&!e.name)throw new Error("colDef.name or colDef.field property is required");if(void 0===e.name&&void 0!==e.field){for(var n=e.field,r=2;t.getColumn(n);)n=e.field+r.toString(),r++;e.name=n}},g.prototype.newInN=function(e,t,n,r){for(var i=this,o=[],a=0;a<t.length;a++){for(var s=r?t[a][r]:t[a],l=!1,u=0;u<e.length;u++){var c=n?e[u][n]:e[u];if(i.options.rowEquality(s,c)){l=!0;break}}l||o.push(s)}return o},g.prototype.getRow=function(e,t){var n=this,r=(t=void 0===t?n.rows:t).filter(function(t){return n.options.rowEquality(t.entity,e)});return r.length>0?r[0]:null},g.prototype.modifyRows=function(t){var n=this,r=n.rows.slice(0),i=n.rowHashMap||n.createRowHashMap(),o=!0;n.rowHashMap=n.createRowHashMap(),n.rows.length=0,t.forEach(function(e,t){var a,l;(l=n.options.enableRowHashing?i.get(e):n.getRow(e,r))&&((a=l).entity=e),a||(a=n.processRowBuilders(new s(e,t,n))),n.rows.push(a),n.rowHashMap.put(e,a),a.isSelected||(o=!1)}),n.selection&&n.rows.length&&(n.selection.selectAll=o),n.assignTypes();var a=e.when(n.processRowsProcessors(n.rows)).then(function(e){return n.setVisibleRows(e)}).catch(angular.noop),l=e.when(n.processColumnsProcessors(n.columns)).then(function(e){return n.setVisibleColumns(e)}).catch(angular.noop);return e.all([a,l])},g.prototype.addRows=function(e){for(var t=this,n=t.rows.length,r=0;r<e.length;r++){var i=t.processRowBuilders(new s(e[r],r+n,t));if(t.options.enableRowHashing){var o=t.rowHashMap.get(i.entity);o&&(o.row=i)}t.rows.push(i)}},g.prototype.processRowBuilders=function(e){var t=this;return t.rowBuilders.forEach(function(n){n.call(t,e,t.options)}),e},g.prototype.registerStyleComputation=function(e){this.styleComputations.push(e)},g.prototype.registerRowsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.rowsProcessors.push({processor:e,priority:t}),this.rowsProcessors.sort(function(e,t){return e.priority-t.priority})},g.prototype.removeRowsProcessor=function(e){var t=-1;this.rowsProcessors.forEach(function(n,r){n.processor===e&&(t=r)}),-1!==t&&this.rowsProcessors.splice(t,1)},g.prototype.processRowsProcessors=function(t){function n(t,i){var a=r.rowsProcessors[t].processor;return e.when(a.call(r,i,r.columns)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=r.rowsProcessors.length-1)return n(t,e);o.resolve(e)}).catch(function(e){throw e})}var r=this,i=t.slice(0);if(0===r.rowsProcessors.length)return e.when(i);var o=e.defer();return n(0,i),o.promise},g.prototype.setVisibleRows=function(e){var t=this;for(var n in t.renderContainers){var r=t.renderContainers[n];r.canvasHeightShouldUpdate=!0,void 0===r.visibleRowCache?r.visibleRowCache=[]:r.visibleRowCache.length=0}for(var i=0;i<e.length;i++){var o=e[i],a=void 0!==o.renderContainer&&o.renderContainer?o.renderContainer:"body";o.visible&&t.renderContainers[a].visibleRowCache.push(o)}t.api.core.raise.rowsVisibleChanged(this.api),t.api.core.raise.rowsRendered(this.api)},g.prototype.registerColumnsProcessor=function(e,t){if(!angular.isFunction(e))throw"Attempt to register non-function rows processor: "+e;this.columnsProcessors.push({processor:e,priority:t}),this.columnsProcessors.sort(function(e,t){return e.priority-t.priority})},g.prototype.removeColumnsProcessor=function(e){var t=this.columnsProcessors.indexOf(e);void 0!==t&&void 0!==t&&this.columnsProcessors.splice(t,1)},g.prototype.processColumnsProcessors=function(t){function n(t,a){var s=r.columnsProcessors[t].processor;return e.when(s.call(r,a,r.rows)).then(function(e){if(!e)throw"Processor at index "+t+" did not return a set of renderable rows";if(!angular.isArray(e))throw"Processor at index "+t+" did not return an array";if(++t<=r.columnsProcessors.length-1)return n(t,i);o.resolve(i)}).catch(angular.noop)}var r=this,i=t.slice(0);if(0===r.columnsProcessors.length)return e.when(i);var o=e.defer();return n(0,i),o.promise},g.prototype.setVisibleColumns=function(e){var t=this;for(var n in t.renderContainers)t.renderContainers[n].visibleColumnCache.length=0;for(var r=0;r<e.length;r++){var i=e[r];i.visible&&(void 0!==i.renderContainer&&i.renderContainer?t.renderContainers[i.renderContainer].visibleColumnCache.push(i):t.renderContainers.body.visibleColumnCache.push(i))}},g.prototype.handleWindowResize=function(e){var t=this;return t.gridWidth=r.elementWidth(t.element),t.gridHeight=r.elementHeight(t.element),t.queueRefresh()},g.prototype.queueRefresh=function(){var e=this;return e.refreshCanceller&&f.cancel(e.refreshCanceller),e.refreshCanceller=f(function(){e.refreshCanvas(!0)}),e.refreshCanceller.then(function(){e.refreshCanceller=null}).catch(angular.noop),e.refreshCanceller},g.prototype.queueGridRefresh=function(){var e=this;return e.gridRefreshCanceller&&f.cancel(e.gridRefreshCanceller),e.gridRefreshCanceller=f(function(){e.refresh(!0)}),e.gridRefreshCanceller.then(function(){e.gridRefreshCanceller=null}).catch(angular.noop),e.gridRefreshCanceller},g.prototype.updateCanvasHeight=function(){var e=this;for(var t in e.renderContainers)e.renderContainers.hasOwnProperty(t)&&(e.renderContainers[t].canvasHeightShouldUpdate=!0)},g.prototype.buildStyles=function(){var e=this;e.customStyles="",e.styleComputations.sort(function(e,t){return null===e.priority?1:null===t.priority?-1:null===e.priority&&null===t.priority?0:e.priority-t.priority}).forEach(function(t){var n=t.func.call(e);angular.isString(n)&&(e.customStyles+="\n"+n)})},g.prototype.minColumnsToRender=function(){var e=this,t=this.getViewportWidth(),n=0,r=0;return e.columns.forEach(function(i,o){if(r<t)r+=i.drawnWidth,n++;else{for(var a=0,s=o;s>=o-n;s--)a+=e.columns[s].drawnWidth;a<t&&n++}}),n},g.prototype.getBodyHeight=function(){return this.getViewportHeight()},g.prototype.getViewportHeight=function(){var e=this,t=this.gridHeight-this.headerHeight-this.footerHeight;return t+=e.getViewportAdjustment().height},g.prototype.getViewportWidth=function(){var e=this,t=this.gridWidth;return t+=e.getViewportAdjustment().width},g.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},g.prototype.addVerticalScrollSync=function(e,t){this.verticalScrollSyncCallBackFns[e]=t},g.prototype.addHorizontalScrollSync=function(e,t){this.horizontalScrollSyncCallBackFns[e]=t},g.prototype.scrollContainers=function(e,t){if(t.y){var n=["body","left","right"];this.flagScrollingVertically(t),"body"===e?n=["left","right"]:"left"===e?n=["body","right"]:"right"===e&&(n=["body","left"]);for(var r=0;r<n.length;r++){var i=n[r];this.verticalScrollSyncCallBackFns[i]&&this.verticalScrollSyncCallBackFns[i](t)}}if(t.x){var o=["body","bodyheader","bodyfooter"];this.flagScrollingHorizontally(t),"body"===e&&(o=["bodyheader","bodyfooter"]);for(var a=0;a<o.length;a++){var s=o[a];this.horizontalScrollSyncCallBackFns[s]&&this.horizontalScrollSyncCallBackFns[s](t)}}},g.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},g.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);void 0!==t&&void 0!==t&&this.viewportAdjusters.splice(t,1)},g.prototype.getViewportAdjustment=function(){var e={height:0,width:0};return this.viewportAdjusters.forEach(function(t){e=t.call(this,e)}),e},g.prototype.getVisibleRowCount=function(){return this.renderContainers.body.visibleRowCache.length},g.prototype.getVisibleRows=function(){return this.renderContainers.body.visibleRowCache},g.prototype.getVisibleColumnCount=function(){return this.renderContainers.body.visibleColumnCache.length},g.prototype.searchRows=function(e){return c.search(this,e,this.columns)},g.prototype.sortByColumn=function(e){return u.sort(this,e,this.columns)},g.prototype.getCellValue=function(e,t){return void 0!==e.entity["$$"+t.uid]?e.entity["$$"+t.uid].rendered:this.options.flatEntityAccess&&void 0!==t.field?e.entity[t.field]:(t.cellValueGetterCache||(t.cellValueGetterCache=n(e.getEntityQualifiedColField(t))),t.cellValueGetterCache(e))},g.prototype.getCellDisplayValue=function(e,t){if(!t.cellDisplayGetterCache){var r=t.cellFilter?" | "+t.cellFilter:"";if(void 0!==e.entity["$$"+t.uid])t.cellDisplayGetterCache=n(e.entity["$$"+t.uid].rendered+r);else if(this.options.flatEntityAccess&&void 0!==t.field){var i=t.field.replace(/(')|(\\)/g,"\\$&");t.cellDisplayGetterCache=n("entity['"+i+"']"+r)}else t.cellDisplayGetterCache=n(e.getEntityQualifiedColField(t)+r)}var o=angular.extend({},e,{col:t});return t.cellDisplayGetterCache(o)},g.prototype.getNextColumnSortPriority=function(){var e=0;return this.columns.forEach(function(t){t.sort&&void 0!==t.sort.priority&&t.sort.priority>=e&&(e=t.sort.priority+1)}),e},g.prototype.resetColumnSorting=function(e){this.columns.forEach(function(t){t===e||t.suppressRemoveSort||(t.sort={})})},g.prototype.getColumnSorting=function(){var e=[];return this.columns.slice(0).sort(u.prioritySort).forEach(function(t){t.sort&&void 0!==t.sort.direction&&t.sort.direction&&(t.sort.direction===i.ASC||t.sort.direction===i.DESC)&&e.push(t)}),e},g.prototype.sortColumn=function(t,n,r){var i=this,o=null;if(void 0===t||!t)throw new Error("No column parameter provided");if("boolean"==typeof n?r=n:o=n,r?void 0===t.sort.priority&&(t.sort.priority=i.getNextColumnSortPriority()):(i.resetColumnSorting(t),t.sort.priority=void 0,t.sort.priority=i.getNextColumnSortPriority()),o)t.sort.direction=o;else{var a=t.sortDirectionCycle.indexOf(t.sort.direction?t.sort.direction:null);a=(a+1)%t.sortDirectionCycle.length,t.colDef&&t.suppressRemoveSort&&!t.sortDirectionCycle[a]&&(a=(a+1)%t.sortDirectionCycle.length),t.sortDirectionCycle[a]?t.sort.direction=t.sortDirectionCycle[a]:m(t,i)}return i.api.core.raise.sortChanged(i,i.getColumnSorting()),e.when(t)};var m=function(e,t){t.columns.forEach(function(t){t.sort&&void 0!==t.sort.priority&&t.sort.priority>e.sort.priority&&(t.sort.priority-=1)}),e.sort={}};return g.prototype.renderingComplete=function(){angular.isFunction(this.options.onRegisterApi)&&this.options.onRegisterApi(this.api),this.api.core.raise.renderingComplete(this.api)},g.prototype.createRowHashMap=function(){var e=this,t=new h;return t.grid=e,t},g.prototype.refresh=function(t){var n=this,r=n.processRowsProcessors(n.rows).then(function(e){n.setVisibleRows(e)}).catch(angular.noop),i=n.processColumnsProcessors(n.columns).then(function(e){n.setVisibleColumns(e)}).catch(angular.noop);return e.all([r,i]).then(function(){n.refreshCanvas(!0),n.redrawInPlace(t)}).catch(angular.noop)},g.prototype.refreshRows=function(){var e=this;return e.processRowsProcessors(e.rows).then(function(t){e.setVisibleRows(t),e.redrawInPlace(),e.refreshCanvas(!0)}).catch(angular.noop)},g.prototype.refreshCanvas=function(t){var n=this,i=e.defer(),o=[];for(var a in n.renderContainers)if(n.renderContainers.hasOwnProperty(a)){var s=n.renderContainers[a];if(null===s.canvasWidth||isNaN(s.canvasWidth))continue;(s.header||s.headerCanvas)&&(s.explicitHeaderHeight=null,s.explicitHeaderCanvasHeight=null,o.push(s))}return t&&n.buildStyles(),f(o.length>0?function(){var e,a,s=!1,l=0,u=0,c=function(e,t){return e!==t&&(s=!0),t};for(e=0;e<o.length;e++)if(null!==(a=o[e]).canvasWidth&&!isNaN(a.canvasWidth)){if(a.header){var d=a.headerHeight=c(a.headerHeight,r.outerElementHeight(a.header)),f=r.getBorderSize(a.header,"top"),p=r.getBorderSize(a.header,"bottom"),h=parseInt(d-f-p,10);h=h<0?0:h,a.innerHeaderHeight=h,!a.explicitHeaderHeight&&h>l&&(l=h)}if(a.headerCanvas){var g=a.headerCanvasHeight=c(a.headerCanvasHeight,parseInt(r.outerElementHeight(a.headerCanvas),10));!a.explicitHeaderCanvasHeight&&g>u&&(u=g)}}for(e=0;e<o.length;e++)a=o[e],l>0&&void 0!==a.headerHeight&&null!==a.headerHeight&&(a.explicitHeaderHeight||a.headerHeight<l)&&(a.explicitHeaderHeight=c(a.explicitHeaderHeight,l)),u>0&&void 0!==a.headerCanvasHeight&&null!==a.headerCanvasHeight&&(a.explicitHeaderCanvasHeight||a.headerCanvasHeight<u)&&(a.explicitHeaderCanvasHeight=c(a.explicitHeaderCanvasHeight,u));t&&s&&n.buildStyles(),i.resolve()}:function(){i.resolve()}),i.promise},g.prototype.redrawInPlace=function(e){var t=this;for(var n in t.renderContainers){var r=t.renderContainers[n];e?(r.adjustRows(r.prevScrollTop,null),r.adjustColumns(r.prevScrollLeft,null)):(r.adjustRows(null,r.prevScrolltopPercentage),r.adjustColumns(null,r.prevScrollleftPercentage))}},g.prototype.hasLeftContainerColumns=function(){return this.hasLeftContainer()&&this.renderContainers.left.renderedColumns.length>0},g.prototype.hasRightContainerColumns=function(){return this.hasRightContainer()&&this.renderContainers.right.renderedColumns.length>0},g.prototype.scrollToIfNecessary=function(t,n){var r=this,i=new p(r,"uiGrid.scrollToIfNecessary"),o=r.renderContainers.body.visibleRowCache,a=r.renderContainers.body.visibleColumnCache,s=r.renderContainers.body.prevScrollTop+r.headerHeight;s=s<0?0:s;var l=r.renderContainers.body.prevScrollLeft,u=r.renderContainers.body.prevScrollTop+r.gridHeight-r.renderContainers.body.headerHeight-r.footerHeight-r.scrollbarWidth,c=r.renderContainers.body.prevScrollLeft+Math.ceil(r.renderContainers.body.getViewportWidth());if(null!==t){var d,f=o.indexOf(t),h=r.renderContainers.body.getCanvasHeight()-r.renderContainers.body.getViewportHeight(),g=f*r.options.rowHeight+r.headerHeight;(g=g<0?0:g)<s?(d=(r.renderContainers.body.prevScrollTop-(s-g))/h)<=1&&(i.y={percentage:d}):g>u&&(d=(g-u+r.renderContainers.body.prevScrollTop)/h)<=1&&(i.y={percentage:d})}if(null!==n){for(var m=a.indexOf(n),v=r.renderContainers.body.getCanvasWidth()-r.renderContainers.body.getViewportWidth(),y=0,b=0;b<m;b++)y+=a[b].drawnWidth;var x=(y=y<0?0:y)+n.drawnWidth;x=x<0?0:x;var w;y<l?(w=(w=(r.renderContainers.body.prevScrollLeft-(l-y))/v)>1?1:w,i.x={percentage:w}):x>c&&(w=(w=(x-c+r.renderContainers.body.prevScrollLeft)/v)>1?1:w,i.x={percentage:w})}var _=e.defer();if(i.y||i.x){i.withDelay=!1,r.scrollContainers("",i);var C=r.api.core.on.scrollEnd(null,function(){_.resolve(i),C()})}else _.resolve();return _.promise},g.prototype.scrollTo=function(e,t){var n=null,r=null;return null!==e&&void 0!==e&&(n=this.getRow(e)),null!==t&&void 0!==t&&(r=this.getColumn(t.name?t.name:t.field)),this.scrollToIfNecessary(n,r)},g.prototype.clearAllFilters=function(e,t,n){if(void 0===e&&(e=!0),void 0===t&&(t=!1),void 0===n&&(n=!1),this.columns.forEach(function(e){e.filters.forEach(function(e){e.term=void 0,t&&(e.condition=void 0),n&&(e.flags=void 0)})}),e)return this.refreshRows()},h.prototype={put:function(e,t){this[this.grid.options.rowIdentity(e)]=t},get:function(e){return this[this.grid.options.rowIdentity(e)]},remove:function(e){var t=this[e=this.grid.options.rowIdentity(e)];return delete this[e],t}},g}])}(),function(){angular.module("ui.grid").factory("GridApi",["$q","$rootScope","gridUtil","uiGridConstants","GridRow","uiGridGridMenuService",function(e,t,n,r,i,o){function a(e,n,r,i){return t.$on(e,function(e){var t=Array.prototype.slice.call(arguments);t.splice(0,1),n.apply(i||r.api,t)})}var s=function(e){this.grid=e,this.listeners=[],this.registerEvent("core","renderingComplete"),this.registerEvent("core","filterChanged"),this.registerMethod("core","setRowInvisible",i.prototype.setRowInvisible),this.registerMethod("core","clearRowInvisible",i.prototype.clearRowInvisible),this.registerMethod("core","getVisibleRows",this.grid.getVisibleRows),this.registerEvent("core","rowsVisibleChanged"),this.registerEvent("core","rowsRendered"),this.registerEvent("core","scrollBegin"),this.registerEvent("core","scrollEnd"),this.registerEvent("core","canvasHeightChanged"),this.registerEvent("core","gridDimensionChanged")};return s.prototype.suppressEvents=function(e,t){var n=this,r=angular.isArray(e)?e:[e],i=n.listeners.filter(function(e){return r.some(function(t){return e.handler===t})});i.forEach(function(e){e.dereg()}),t(),i.forEach(function(e){e.dereg=a(e.eventId,e.handler,n.grid,e._this)})},s.prototype.registerEvent=function(e,r){var i=this;i[e]||(i[e]={});var o=i[e];o.on||(o.on={},o.raise={});var s=i.grid.id+e+r;o.raise[r]=function(){t.$emit.apply(t,[s].concat(Array.prototype.slice.call(arguments)))},o.on[r]=function(t,o,l){if(null===t||void 0!==t.$on){var u={handler:o,dereg:a(s,o,i.grid,l),eventId:s,scope:t,_this:l};i.listeners.push(u);var c=function(){u.dereg();var e=i.listeners.indexOf(u);i.listeners.splice(e,1)};return t&&t.$on("$destroy",function(){c()}),c}n.logError("asked to listen on "+e+".on."+r+" but scope wasn't passed in the input parameters.  It is legitimate to pass null, but you've passed something else, so you probably forgot to provide scope rather than did it deliberately, not registering")}},s.prototype.registerEventsFromObject=function(e){var t=this,n=[];angular.forEach(e,function(e,t){var r={name:t,events:[]};angular.forEach(e,function(e,t){r.events.push(t)}),n.push(r)}),n.forEach(function(e){e.events.forEach(function(n){t.registerEvent(e.name,n)})})},s.prototype.registerMethod=function(e,t,r,i){this[e]||(this[e]={}),this[e][t]=n.createBoundedWrapper(i||this.grid,r)},s.prototype.registerMethodsFromObject=function(e,t){var n=this,r=[];angular.forEach(e,function(e,t){var n={name:t,methods:[]};angular.forEach(e,function(e,t){n.methods.push({name:t,fn:e})}),r.push(n)}),r.forEach(function(e){e.methods.forEach(function(r){n.registerMethod(e.name,r.name,r.fn,t)})})},s}])}(),function(){angular.module("ui.grid").factory("GridColumn",["gridUtil","uiGridConstants","i18nService",function(e,t,n){function r(e,n,r){var i=this;i.grid=r,i.uid=n,i.updateColumnDef(e,!0),i.aggregationValue=void 0,i.updateAggregationValue=function(){if(i.aggregationType){var e=0,n=i.grid.getVisibleRows(),r=function(){var e=[];return n.forEach(function(t){var n=i.grid.getCellValue(t,i),r=Number(n);isNaN(r)||e.push(r)}),e};angular.isFunction(i.aggregationType)?i.aggregationValue=i.aggregationType(n,i):i.aggregationType===t.aggregationTypes.count?i.aggregationValue=i.grid.getVisibleRowCount():i.aggregationType===t.aggregationTypes.sum?(r().forEach(function(t){e+=t}),i.aggregationValue=e):i.aggregationType===t.aggregationTypes.avg?(r().forEach(function(t){e+=t}),e/=r().length,i.aggregationValue=e):i.aggregationType===t.aggregationTypes.min?i.aggregationValue=Math.min.apply(null,r()):i.aggregationType===t.aggregationTypes.max?i.aggregationValue=Math.max.apply(null,r()):i.aggregationValue=" "}else i.aggregationValue=void 0},this.getAggregationValue=function(){return i.aggregationValue}}return r.prototype.hideColumn=function(){this.colDef.visible=!1},r.prototype.setPropertyOrDefault=function(e,t,n){var r=this;void 0!==e[t]&&e[t]?r[t]=e[t]:void 0!==r[t]?r[t]=r[t]:r[t]=n||{}},r.prototype.updateColumnDef=function(n,r){function i(e){return angular.isString(e)||angular.isNumber(e)}var o=this;if(o.colDef=n,void 0===n.name)throw new Error("colDef.name is required for column at index "+o.grid.options.columnDefs.indexOf(n));if(o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,!angular.isNumber(o.width)||!o.hasCustomWidth||n.allowCustomWidthOverride){var a=n.width,s="Cannot parse column width '"+a+"' for column named '"+n.name+"'";if(o.hasCustomWidth=!1,angular.isString(a)||angular.isNumber(a))if(angular.isString(a))if(e.endsWith(a,"%")){var l=a.replace(/%/g,""),u=parseInt(l,10);if(isNaN(u))throw new Error(s);o.width=a}else if(a.match(/^(\d+)$/))o.width=parseInt(a.match(/^(\d+)$/)[1],10);else{if(!a.match(/^\*+$/))throw new Error(s);o.width=a}else o.width=a;else o.width="*"}["minWidth","maxWidth"].forEach(function(e){var t=n[e],r="Cannot parse column "+e+" '"+t+"' for column named '"+n.name+"'";if("minWidth"===e&&!i(t)&&angular.isDefined(o.grid.options.minimumColumnSize)&&(t=o.grid.options.minimumColumnSize),i(t))if(angular.isString(t)){if(!t.match(/^(\d+)$/))throw new Error(r);o[e]=parseInt(t.match(/^(\d+)$/)[1],10)}else o[e]=t;else o[e]="minWidth"===e?30:9e3}),o.field=void 0===n.field?n.name:n.field,"string"!=typeof o.field&&e.logError("Field is not a string, this is likely to break the code, Field is: "+o.field),o.name=n.name,o.displayName=void 0===n.displayName?e.readableColumnName(n.name):n.displayName,o.aggregationType=angular.isDefined(n.aggregationType)?n.aggregationType:null,o.footerCellTemplate=angular.isDefined(n.footerCellTemplate)?n.footerCellTemplate:null,void 0===n.cellTooltip||!1===n.cellTooltip?o.cellTooltip=!1:!0===n.cellTooltip?o.cellTooltip=function(e,t){return o.grid.getCellValue(e,t)}:"function"==typeof n.cellTooltip?o.cellTooltip=n.cellTooltip:o.cellTooltip=function(e,t){return t.colDef.cellTooltip},void 0===n.headerTooltip||!1===n.headerTooltip?o.headerTooltip=!1:!0===n.headerTooltip?o.headerTooltip=function(e){return e.displayName}:"function"==typeof n.headerTooltip?o.headerTooltip=n.headerTooltip:o.headerTooltip=function(e){return e.colDef.headerTooltip},o.footerCellClass=n.footerCellClass,o.cellClass=n.cellClass,o.headerCellClass=n.headerCellClass,o.cellFilter=n.cellFilter?n.cellFilter:"",o.sortCellFiltered=!!n.sortCellFiltered,o.filterCellFiltered=!!n.filterCellFiltered,o.headerCellFilter=n.headerCellFilter?n.headerCellFilter:"",o.footerCellFilter=n.footerCellFilter?n.footerCellFilter:"",o.visible=e.isNullOrUndefined(n.visible)||n.visible,o.headerClass=n.headerClass,o.enableSorting=void 0!==n.enableSorting?n.enableSorting:o.grid.options.enableSorting,o.sortingAlgorithm=n.sortingAlgorithm,o.sortDirectionCycle=void 0!==n.sortDirectionCycle?n.sortDirectionCycle:[null,t.ASC,t.DESC],void 0===o.suppressRemoveSort&&(o.suppressRemoveSort=void 0!==n.suppressRemoveSort&&n.suppressRemoveSort),o.enableFiltering=void 0===n.enableFiltering||n.enableFiltering,o.setPropertyOrDefault(n,"menuItems",[]),r&&o.setPropertyOrDefault(n,"sort"),o.setPropertyOrDefault(n,"defaultSort");var c=[];n.filter?c.push(n.filter):n.filters?c=n.filters:c.push({}),r?(o.setPropertyOrDefault(n,"filter"),o.setPropertyOrDefault(n,"extraStyle"),o.setPropertyOrDefault(n,"filters",c)):o.filters.length===c.length&&o.filters.forEach(function(e,t){void 0!==c[t].placeholder&&(e.placeholder=c[t].placeholder),void 0!==c[t].ariaLabel&&(e.ariaLabel=c[t].ariaLabel),void 0!==c[t].flags&&(e.flags=c[t].flags),void 0!==c[t].type&&(e.type=c[t].type),void 0!==c[t].selectOptions&&(e.selectOptions=c[t].selectOptions)})},r.prototype.unsort=function(){var e=this.sort.priority;this.grid.columns.forEach(function(t){t.sort&&void 0!==t.sort.priority&&t.sort.priority>e&&(t.sort.priority-=1)}),this.sort={},this.grid.api.core.raise.sortChanged(this.grid,this.grid.getColumnSorting())},r.prototype.getColClass=function(e){var n=t.COL_CLASS_PREFIX+this.uid;return e?"."+n:n},r.prototype.isPinnedLeft=function(){return"left"===this.renderContainer},r.prototype.isPinnedRight=function(){return"right"===this.renderContainer},r.prototype.getColClassDefinition=function(){return" .grid"+this.grid.id+" "+this.getColClass(!0)+" { min-width: "+this.drawnWidth+"px; max-width: "+this.drawnWidth+"px; }"},r.prototype.getRenderContainer=function(){var e=this,t=e.renderContainer;return null!==t&&""!==t&&void 0!==t||(t="body"),e.grid.renderContainers[t]},r.prototype.showColumn=function(){this.colDef.visible=!0},r.prototype.getAggregationText=function(){var e=this;if(e.colDef.aggregationHideLabel)return"";if(e.colDef.aggregationLabel)return e.colDef.aggregationLabel;switch(e.colDef.aggregationType){case t.aggregationTypes.count:return n.getSafeText("aggregation.count");case t.aggregationTypes.sum:return n.getSafeText("aggregation.sum");case t.aggregationTypes.avg:return n.getSafeText("aggregation.avg");case t.aggregationTypes.min:return n.getSafeText("aggregation.min");case t.aggregationTypes.max:return n.getSafeText("aggregation.max");default:return""}},r.prototype.getCellTemplate=function(){return this.cellTemplatePromise},r.prototype.getCompiledElementFn=function(){return this.compiledElementFnDefer.promise},r}])}(),function(){angular.module("ui.grid").factory("GridOptions",["gridUtil","uiGridConstants",function(e,t){return{initialize:function(n){return n.onRegisterApi=n.onRegisterApi||angular.noop(),n.data=n.data||[],n.columnDefs=n.columnDefs||[],n.excludeProperties=n.excludeProperties||["$$hashKey"],n.enableRowHashing=!1!==n.enableRowHashing,n.rowIdentity=n.rowIdentity||function(t){return e.hashKey(t)},n.getRowIdentity=n.getRowIdentity||function(e){return e.$$hashKey},n.flatEntityAccess=!0===n.flatEntityAccess,n.showHeader=void 0===n.showHeader||n.showHeader,n.showHeader?n.headerRowHeight=void 0!==n.headerRowHeight?n.headerRowHeight:30:n.headerRowHeight=0,"string"==typeof n.rowHeight?n.rowHeight=parseInt(n.rowHeight)||30:n.rowHeight=n.rowHeight||30,n.minRowsToShow=void 0!==n.minRowsToShow?n.minRowsToShow:10,n.showGridFooter=!0===n.showGridFooter,n.showColumnFooter=!0===n.showColumnFooter,n.columnFooterHeight=void 0!==n.columnFooterHeight?n.columnFooterHeight:30,n.gridFooterHeight=void 0!==n.gridFooterHeight?n.gridFooterHeight:30,n.columnWidth=void 0!==n.columnWidth?n.columnWidth:50,n.maxVisibleColumnCount=void 0!==n.maxVisibleColumnCount?n.maxVisibleColumnCount:200,n.virtualizationThreshold=void 0!==n.virtualizationThreshold?n.virtualizationThreshold:20,n.columnVirtualizationThreshold=void 0!==n.columnVirtualizationThreshold?n.columnVirtualizationThreshold:10,n.excessRows=void 0!==n.excessRows?n.excessRows:4,n.scrollThreshold=void 0!==n.scrollThreshold?n.scrollThreshold:4,n.excessColumns=void 0!==n.excessColumns?n.excessColumns:4,n.horizontalScrollThreshold=void 0!==n.horizontalScrollThreshold?n.horizontalScrollThreshold:2,n.aggregationCalcThrottle=void 0!==n.aggregationCalcThrottle?n.aggregationCalcThrottle:500,n.wheelScrollThrottle=void 0!==n.wheelScrollThrottle?n.wheelScrollThrottle:70,n.scrollDebounce=void 0!==n.scrollDebounce?n.scrollDebounce:300,n.enableSorting=!1!==n.enableSorting,n.enableFiltering=!0===n.enableFiltering,n.enableColumnMenus=!1!==n.enableColumnMenus,n.enableVerticalScrollbar=void 0!==n.enableVerticalScrollbar?n.enableVerticalScrollbar:t.scrollbars.ALWAYS,n.enableHorizontalScrollbar=void 0!==n.enableHorizontalScrollbar?n.enableHorizontalScrollbar:t.scrollbars.ALWAYS,n.enableMinHeightCheck=!1!==n.enableMinHeightCheck,n.minimumColumnSize=void 0!==n.minimumColumnSize?n.minimumColumnSize:30,n.rowEquality=n.rowEquality||function(e,t){return e===t},n.headerTemplate=n.headerTemplate||null,n.footerTemplate=n.footerTemplate||"ui-grid/ui-grid-footer",n.gridFooterTemplate=n.gridFooterTemplate||"ui-grid/ui-grid-grid-footer",n.rowTemplate=n.rowTemplate||"ui-grid/ui-grid-row",n.gridMenuTemplate=n.gridMenuTemplate||"ui-grid/uiGridMenu",n.appScopeProvider=n.appScopeProvider||null,n}}}])}(),function(){angular.module("ui.grid").factory("GridRenderContainer",["gridUtil","uiGridConstants",function(e,t){function n(e,t,n){var r=this;r.name=e,r.grid=t,r.visibleRowCache=[],r.visibleColumnCache=[],r.renderedRows=[],r.renderedColumns=[],r.prevScrollTop=0,r.prevScrolltopPercentage=0,r.prevRowScrollIndex=0,r.prevScrollLeft=0,r.prevScrollleftPercentage=0,r.prevColumnScrollIndex=0,r.columnStyles="",r.viewportAdjusters=[],r.hasHScrollbar=!1,r.hasVScrollbar=!1,r.canvasHeightShouldUpdate=!0,r.$$canvasHeight=0,n&&angular.isObject(n)&&angular.extend(r,n),t.registerStyleComputation({priority:5,func:function(){return r.updateColumnWidths(),r.columnStyles}})}return n.prototype.reset=function(){this.visibleColumnCache.length=0,this.visibleRowCache.length=0,this.renderedRows.length=0,this.renderedColumns.length=0},n.prototype.containsColumn=function(e){return-1!==this.visibleColumnCache.indexOf(e)},n.prototype.minRowsToRender=function(){for(var e=this,t=0,n=0,r=e.getViewportHeight(),i=e.visibleRowCache.length-1;n<r&&i>=0;i--)n+=e.visibleRowCache[i].height,t++;return t},n.prototype.minColumnsToRender=function(){for(var e=this,t=this.getViewportWidth(),n=0,r=0,i=0;i<e.visibleColumnCache.length;i++){var o=e.visibleColumnCache[i];if(r<t)r+=o.drawnWidth?o.drawnWidth:0,n++;else{for(var a=0,s=i;s>=i-n;s--)a+=e.visibleColumnCache[s].drawnWidth?e.visibleColumnCache[s].drawnWidth:0;a<t&&n++}}return n},n.prototype.getVisibleRowCount=function(){return this.visibleRowCache.length},n.prototype.registerViewportAdjuster=function(e){this.viewportAdjusters.push(e)},n.prototype.removeViewportAdjuster=function(e){var t=this.viewportAdjusters.indexOf(e);t>-1&&this.viewportAdjusters.splice(t,1)},n.prototype.getViewportAdjustment=function(){var e={height:0,width:0};return this.viewportAdjusters.forEach(function(t){e=t.call(this,e)}),e},n.prototype.getMargin=function(e){var t=0;return this.viewportAdjusters.forEach(function(n){var r=n.call(this,{height:0,width:0});r.side&&r.side===e&&(t+=-1*r.width)}),t},n.prototype.getViewportHeight=function(){var e=this,t=e.headerHeight?e.headerHeight:e.grid.headerHeight,n=e.grid.gridHeight-t-e.grid.footerHeight;return n+=e.getViewportAdjustment().height},n.prototype.getViewportWidth=function(){var e=this,t=e.grid.gridWidth;return t+=e.getViewportAdjustment().width},n.prototype.getHeaderViewportWidth=function(){return this.getViewportWidth()},n.prototype.getCanvasHeight=function(){var e=this;if(!e.canvasHeightShouldUpdate)return e.$$canvasHeight;var t=e.$$canvasHeight;return e.$$canvasHeight=0,e.visibleRowCache.forEach(function(t){e.$$canvasHeight+=t.height}),e.canvasHeightShouldUpdate=!1,e.grid.api.core.raise.canvasHeightChanged(t,e.$$canvasHeight),e.$$canvasHeight},n.prototype.getVerticalScrollLength=function(){return this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight!==0?this.getCanvasHeight()-this.getViewportHeight()+this.grid.scrollbarHeight:-1},n.prototype.getHorizontalScrollLength=function(){return this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth!==0?this.getCanvasWidth()-this.getViewportWidth()+this.grid.scrollbarWidth:-1},n.prototype.getCanvasWidth=function(){return this.canvasWidth},n.prototype.setRenderedRows=function(e){this.renderedRows.length=e.length;for(var t=0;t<e.length;t++)this.renderedRows[t]=e[t]},n.prototype.setRenderedColumns=function(e){this.renderedColumns.length=e.length;for(var t=0;t<e.length;t++)this.renderedColumns[t]=e[t];this.updateColumnOffset()},n.prototype.updateColumnOffset=function(){for(var e=0,t=0;t<this.currentFirstColumn;t++)e+=this.visibleColumnCache[t].drawnWidth;this.columnOffset=e},n.prototype.scrollVertical=function(e){var n=-1;if(e!==this.prevScrollTop){var r=e-this.prevScrollTop;return r>0&&(this.grid.scrollDirection=t.scrollDirection.DOWN),r<0&&(this.grid.scrollDirection=t.scrollDirection.UP),(n=e/this.getVerticalScrollLength())>1&&(n=1),n<0&&(n=0),this.adjustScrollVertical(e,n),n}},n.prototype.scrollHorizontal=function(e){var n=-1;if(e!==this.prevScrollLeft){var r=e-this.prevScrollLeft;r>0&&(this.grid.scrollDirection=t.scrollDirection.RIGHT),r<0&&(this.grid.scrollDirection=t.scrollDirection.LEFT);var i=this.getHorizontalScrollLength();return n=0!==i?e/i:0,this.adjustScrollHorizontal(e,n),n}},n.prototype.adjustScrollVertical=function(e,t,n){(this.prevScrollTop!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasHeight()-this.getViewportHeight())*t),this.adjustRows(e,t,!1),this.prevScrollTop=e,this.prevScrolltopPercentage=t,this.grid.queueRefresh())},n.prototype.adjustScrollHorizontal=function(e,t,n){(this.prevScrollLeft!==e||n)&&(void 0!==e&&void 0!==e&&null!==e||(e=(this.getCanvasWidth()-this.getViewportWidth())*t),this.adjustColumns(e,t),this.prevScrollLeft=e,this.prevScrollleftPercentage=t,this.grid.queueRefresh())},n.prototype.adjustRows=function(e,t,n){var r=this,i=r.minRowsToRender(),o=r.visibleRowCache,a=o.length-i;void 0!==t&&null!==t||!e||(t=e/r.getVerticalScrollLength());var s=Math.ceil(Math.min(a,a*t));s>a&&(s=a);var l=[];if(o.length>r.grid.options.virtualizationThreshold){if(void 0!==e&&null!==e){if(!r.grid.suppressParentScrollDown&&r.prevScrollTop<e&&s<r.prevRowScrollIndex+r.grid.options.scrollThreshold&&s<a)return;if(!r.grid.suppressParentScrollUp&&r.prevScrollTop>e&&s>r.prevRowScrollIndex-r.grid.options.scrollThreshold&&s<a)return}l=[Math.max(0,s-r.grid.options.excessRows),Math.min(o.length,s+i+r.grid.options.excessRows)]}else{var u=r.visibleRowCache.length;l=[0,Math.max(u,i+r.grid.options.excessRows)]}r.updateViewableRowRange(l),r.prevRowScrollIndex=s},n.prototype.adjustColumns=function(e,t){var n=this,r=n.minColumnsToRender(),i=n.visibleColumnCache,o=i.length-r;void 0!==t&&null!==t||!e||(t=e/n.getHorizontalScrollLength());var a=Math.ceil(Math.min(o,o*t));a>o&&(a=o);var s=[];if(i.length>n.grid.options.columnVirtualizationThreshold&&n.getCanvasWidth()>n.getViewportWidth())s=[Math.max(0,a-n.grid.options.excessColumns),Math.min(i.length,a+r+n.grid.options.excessColumns)];else{var l=n.visibleColumnCache.length;s=[0,Math.max(l,r+n.grid.options.excessColumns)]}n.updateViewableColumnRange(s),n.prevColumnScrollIndex=a},n.prototype.updateViewableRowRange=function(e){var t=this.visibleRowCache.slice(e[0],e[1]);this.currentTopRow=e[0],this.setRenderedRows(t)},n.prototype.updateViewableColumnRange=function(e){var t=this.visibleColumnCache.slice(e[0],e[1]);this.currentFirstColumn=e[0],this.setRenderedColumns(t)},n.prototype.headerCellWrapperStyle=function(){var e=this;if(0!==e.currentFirstColumn){var t=e.columnOffset;return e.grid.isRTL()?{"margin-right":t+"px"}:{"margin-left":t+"px"}}return null},n.prototype.updateColumnWidths=function(){var t=this,n=[],r=0,i=0,o="",a=!1,s=[],l=[],u=0,c=t.grid.getViewportWidth()-t.grid.scrollbarWidth,d=[];angular.forEach(t.grid.renderContainers,function(e){d=d.concat(e.visibleColumnCache)}),d.forEach(function(o){var d=0;if(o.visible)if(a&&(c+=t.grid.scrollbarWidth),!a&&o.colDef.pinnedRight&&(a=!0),angular.isNumber(o.width))d=parseInt(o.width,10),i+=d,o.drawnWidth=d,s.push(o);else if(e.endsWith(o.width,"%")){var f=parseInt(o.width.replace(/%/g,""),10);(d=parseInt(f/100*c))>o.maxWidth&&(d=o.maxWidth),d<o.minWidth&&(d=o.minWidth),i+=d,o.drawnWidth=d,u+=f,l.push(o)}else angular.isString(o.width)&&-1!==o.width.indexOf("*")&&(r+=o.width.length,n.push(o))});var f=c-i;if(n.length>0){var p=f/r;n.forEach(function(e){var t=parseInt(e.width.length*p,10);t>e.maxWidth&&(t=e.maxWidth),t<e.minWidth&&(t=e.minWidth),i+=t,e.drawnWidth=t})}var h;if(n.length>0?h=n:l.length>0&&0===s.length&&100===u&&(h=l),!angular.isUndefined(h)){for(var g=function(e){e.drawnWidth<e.maxWidth&&m>0&&(e.drawnWidth++,i++,m--,v=!0)},m=c-i,v=!0;m>0&&v;)v=!1,h.forEach(g);var y=function(e){e.drawnWidth>e.minWidth&&b>0&&(e.drawnWidth--,i--,b--,v=!0)},b=i-c;for(v=!0;b>0&&v;)v=!1,h.forEach(y)}var x=0;t.visibleColumnCache.forEach(function(e){e.visible&&(x+=e.drawnWidth)}),d.forEach(function(e){o+=e.getColClassDefinition()}),t.canvasWidth=x,this.columnStyles=o},n.prototype.needsHScrollbarPlaceholder=function(){var e,n=this;return("left"===n.name||"right"===n.name&&!this.hasHScrollbar&&!this.grid.disableScrolling)&&(n.grid.options.enableHorizontalScrollbar===t.scrollbars.ALWAYS||(e=this.grid.element[0].querySelector(".ui-grid-render-container-body .ui-grid-viewport")).scrollWidth>e.offsetWidth)},n.prototype.getViewportStyle=function(){var e=this,n={},r={};return r[t.scrollbars.ALWAYS]="scroll",r[t.scrollbars.WHEN_NEEDED]="auto",e.hasHScrollbar=!1,e.hasVScrollbar=!1,e.grid.disableScrolling?(n["overflow-x"]="hidden",n["overflow-y"]="hidden",n):("body"===e.name?(e.hasHScrollbar=e.grid.options.enableHorizontalScrollbar!==t.scrollbars.NEVER,e.grid.isRTL()?e.grid.hasLeftContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER):e.grid.hasRightContainerColumns()||(e.hasVScrollbar=e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER)):"left"===e.name?e.hasVScrollbar=!!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER:e.hasVScrollbar=!e.grid.isRTL()&&e.grid.options.enableVerticalScrollbar!==t.scrollbars.NEVER,n["overflow-x"]=e.hasHScrollbar?r[e.grid.options.enableHorizontalScrollbar]:"hidden",n["overflow-y"]=e.hasVScrollbar?r[e.grid.options.enableVerticalScrollbar]:"hidden",n)},n}])}(),function(){angular.module("ui.grid").factory("GridRow",["gridUtil","uiGridConstants",function(e,t){function n(t,n,r){this.grid=r,this.entity=t,this.uid=e.nextUid(),this.visible=!0,this.isSelected=!1,this.$$height=r.options.rowHeight}return Object.defineProperty(n.prototype,"height",{get:function(){return this.$$height},set:function(e){e!==this.$$height&&(this.grid.updateCanvasHeight(),this.$$height=e)}}),n.prototype.getQualifiedColField=function(e){return"row."+this.getEntityQualifiedColField(e)},n.prototype.getEntityQualifiedColField=function(n){return n.field===t.ENTITY_BINDING?"entity":e.preEval("entity."+n.field)},n.prototype.setRowInvisible=function(e){e&&e.setThisRowInvisible&&e.setThisRowInvisible("user")},n.prototype.clearRowInvisible=function(e){e&&e.clearThisRowInvisible&&e.clearThisRowInvisible("user")},n.prototype.setThisRowInvisible=function(e,t){this.invisibleReason||(this.invisibleReason={}),this.invisibleReason[e]=!0,this.evaluateRowVisibility(t)},n.prototype.clearThisRowInvisible=function(e,t){void 0!==this.invisibleReason&&delete this.invisibleReason[e],this.evaluateRowVisibility(t)},n.prototype.evaluateRowVisibility=function(e){var t=!0;void 0!==this.invisibleReason&&angular.forEach(this.invisibleReason,function(e,n){e&&(t=!1)}),void 0!==this.visible&&this.visible===t||(this.visible=t,e||(this.grid.queueGridRefresh(),this.grid.api.core.raise.rowsVisibleChanged(this)))},n}])}(),function(){"use strict";angular.module("ui.grid").factory("GridRowColumn",["$parse","$filter",function(e,t){var n=function e(t,n){if(!(this instanceof e))throw"Using GridRowColumn as a function insead of as a constructor. Must be called with `new` keyword";this.row=t,this.col=n};return n.prototype.getIntersectionValueRaw=function(){return e(this.row.getEntityQualifiedColField(this.col))(this.row)},n}])}(),function(){angular.module("ui.grid").factory("ScrollEvent",["gridUtil",function(e){function t(t,n,r,i){var o=this;if(!t)throw new Error("grid argument is required");o.grid=t,o.source=i,o.withDelay=!0,o.sourceRowContainer=n,o.sourceColContainer=r,o.newScrollLeft=null,o.newScrollTop=null,o.x=null,o.y=null,o.verticalScrollLength=-9999999,o.horizontalScrollLength=-999999,o.fireThrottledScrollingEvent=e.throttle(function(e){o.grid.scrollContainers(e,o)},o.grid.options.wheelScrollThrottle,{trailing:!0})}return t.prototype.getNewScrollLeft=function(t,n){var r=this;if(!r.newScrollLeft){var i,o=t.getCanvasWidth()-t.getViewportWidth(),a=e.normalizeScrollLeft(n,r.grid);if(void 0!==r.x.percentage&&void 0!==r.x.percentage)i=r.x.percentage;else{if(void 0===r.x.pixels||void 0===r.x.pixels)throw new Error("No percentage or pixel value provided for scroll event X axis");i=r.x.percentage=(a+r.x.pixels)/o}return Math.max(0,i*o)}return r.newScrollLeft},t.prototype.getNewScrollTop=function(e,t){var n=this;if(!n.newScrollTop){var r,i=e.getVerticalScrollLength(),o=t[0].scrollTop;if(void 0!==n.y.percentage&&void 0!==n.y.percentage)r=n.y.percentage;else{if(void 0===n.y.pixels||void 0===n.y.pixels)throw new Error("No percentage or pixel value provided for scroll event Y axis");r=n.y.percentage=(o+n.y.pixels)/i}return Math.max(0,r*i)}return n.newScrollTop},t.prototype.atTop=function(e){return this.y&&(0===this.y.percentage||this.verticalScrollLength<0)&&0===e},t.prototype.atBottom=function(e){return this.y&&(1===this.y.percentage||0===this.verticalScrollLength)&&e>0},t.prototype.atLeft=function(e){return this.x&&(0===this.x.percentage||this.horizontalScrollLength<0)&&0===e},t.prototype.atRight=function(e){return this.x&&(1===this.x.percentage||0===this.horizontalScrollLength)&&e>0},t.Sources={ViewPortScroll:"ViewPortScroll",RenderContainerMouseWheel:"RenderContainerMouseWheel",RenderContainerTouchMove:"RenderContainerTouchMove",Other:99},t}])}(),function(){"use strict";angular.module("ui.grid").service("gridClassFactory",["gridUtil","$q","$compile","$templateCache","uiGridConstants","Grid","GridColumn","GridRow",function(e,t,n,r,i,o,a,s){var l={createGrid:function(r){(r=void 0!==r?r:{}).id=e.newId();var i=new o(r);if(i.options.rowTemplate){var a=t.defer();i.getRowTemplateFn=a.promise,e.getTemplate(i.options.rowTemplate).then(function(e){var t=n(e);a.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+i.options.rowTemplate+"'")}).catch(angular.noop)}return i.registerColumnBuilder(l.defaultColumnBuilder),i.registerRowBuilder(l.rowTemplateAssigner),i.registerRowsProcessor(function(e){return e.forEach(function(e){e.evaluateRowVisibility(!0)},50),e}),i.registerColumnsProcessor(function(e){return e.forEach(function(e){e.visible=!angular.isDefined(e.colDef.visible)||e.colDef.visible}),e},50),i.registerRowsProcessor(i.searchRows,100),i.options.externalSort&&angular.isFunction(i.options.externalSort)?i.registerRowsProcessor(i.options.externalSort,200):i.registerRowsProcessor(i.sortByColumn,200),i},defaultColumnBuilder:function(n,r,o){var a=[],s=function(t,o,s,l,u){n[t]?r[o]=n[t]:r[o]=s;var c=e.getTemplate(r[o]).then(function(e){angular.isFunction(e)&&(e=e());var n="cellTooltip"===u?"col.cellTooltip(row,col)":"col.headerTooltip(col)";u&&!1===r[u]?e=e.replace(i.TOOLTIP,""):u&&r[u]&&(e=e.replace(i.TOOLTIP,'title="{{'+n+' CUSTOM_FILTERS }}"')),r[t]=l?e.replace(i.CUSTOM_FILTERS,function(){return r[l]?"|"+r[l]:""}):e},function(e){throw new Error("Couldn't fetch/use colDef."+t+" '"+n[t]+"'")}).catch(angular.noop);return a.push(c),c};return r.cellTemplatePromise=s("cellTemplate","providedCellTemplate","ui-grid/uiGridCell","cellFilter","cellTooltip"),r.headerCellTemplatePromise=s("headerCellTemplate","providedHeaderCellTemplate","ui-grid/uiGridHeaderCell","headerCellFilter","headerTooltip"),r.footerCellTemplatePromise=s("footerCellTemplate","providedFooterCellTemplate","ui-grid/uiGridFooterCell","footerCellFilter"),r.filterHeaderTemplatePromise=s("filterHeaderTemplate","providedFilterHeaderTemplate","ui-grid/ui-grid-filter"),r.compiledElementFnDefer=t.defer(),t.all(a)},rowTemplateAssigner:function(r){var i=this;if(r.rowTemplate){var o=t.defer();r.getRowTemplateFn=o.promise,e.getTemplate(r.rowTemplate).then(function(e){var t=n(e);o.resolve(t)},function(e){throw new Error("Couldn't fetch/use row template '"+r.rowTemplate+"'")})}else r.rowTemplate=i.options.rowTemplate,r.getRowTemplateFn=i.getRowTemplateFn;return r.getRowTemplateFn}};return l}])}(),function(){function e(e){return e.replace(/[\-\[\]\/\{\}\(\)\*\+\?\.\\\^\$\|]/g,"\\$&")}angular.module("ui.grid").service("rowSearcher",["gridUtil","uiGridConstants",function(t,n){var r=n.filter.CONTAINS,i={};return i.getTerm=function(e){if(void 0===e.term)return e.term;var t=e.term;return"string"==typeof t&&(t=t.trim()),t},i.stripTerm=function(t){var n=i.getTerm(t);return"string"==typeof n?e(n.replace(/(^\*|\*$)/g,"")):n},i.guessCondition=function(e){if(void 0===e.term||!e.term)return r;var t=i.getTerm(e);if(/\*/.test(t)){var n="";e.flags&&e.flags.caseSensitive||(n+="i");var o=t.replace(/(\\)?\*/g,function(e,t){return t?e:"[\\s\\S]*?"});return new RegExp("^"+o+"$",n)}return r},i.setupFilters=function(e){for(var r=[],o=e.length,a=0;a<o;a++){var s=e[a];if(s.noTerm||!t.isNullOrUndefined(s.term)){var l={},u="";s.flags&&s.flags.caseSensitive||(u+="i"),t.isNullOrUndefined(s.term)||(s.rawTerm?l.term=s.term:l.term=i.stripTerm(s)),l.noTerm=s.noTerm,s.condition?l.condition=s.condition:l.condition=i.guessCondition(s),l.flags=angular.extend({caseSensitive:!1,date:!1},s.flags),l.condition===n.filter.STARTS_WITH&&(l.startswithRE=new RegExp("^"+l.term,u)),l.condition===n.filter.ENDS_WITH&&(l.endswithRE=new RegExp(l.term+"$",u)),l.condition===n.filter.CONTAINS&&(l.containsRE=new RegExp(l.term,u)),l.condition===n.filter.EXACT&&(l.exactRE=new RegExp("^"+l.term+"$",u)),r.push(l)}}return r},i.runColumnFilter=function(e,t,r,i){var o,a=typeof i.condition,s=i.term;if(o=r.filterCellFiltered?e.getCellDisplayValue(t,r):e.getCellValue(t,r),i.condition instanceof RegExp)return i.condition.test(o);if("function"===a)return i.condition(s,o,t,r);if(i.startswithRE)return i.startswithRE.test(o);if(i.endswithRE)return i.endswithRE.test(o);if(i.containsRE)return i.containsRE.test(o);if(i.exactRE)return i.exactRE.test(o);if(i.condition===n.filter.NOT_EQUAL)return!new RegExp("^"+s+"$").exec(o);if("number"==typeof o&&"string"==typeof s){var l=parseFloat(s.replace(/\\\./,".").replace(/\\\-/,"-"));isNaN(l)||(s=l)}return!0===i.flags.date&&(o=new Date(o),s=new Date(s.replace(/\\/g,""))),i.condition===n.filter.GREATER_THAN?o>s:i.condition===n.filter.GREATER_THAN_OR_EQUAL?o>=s:i.condition===n.filter.LESS_THAN?o<s:i.condition!==n.filter.LESS_THAN_OR_EQUAL||o<=s},i.searchColumn=function(e,n,r,o){if(e.options.useExternalFiltering)return!0;for(var a=o.length,s=0;s<a;s++){var l=o[s];if((!t.isNullOrUndefined(l.term)&&""!==l.term||l.noTerm)&&!i.runColumnFilter(e,n,r,l))return!1}return!0},i.search=function(e,n,r){if(n){if(!e.options.enableFiltering)return n;for(var o=[],a=r.length,s=0;s<a;s++){var l=r[s];void 0!==l.filters&&function(e){var n=!1;return e.forEach(function(e){(!t.isNullOrUndefined(e.term)&&""!==e.term||e.noTerm)&&(n=!0)}),n}(l.filters)&&o.push({col:l,filters:i.setupFilters(l.filters)})}if(o.length>0){for(var u=function(e,t,n,r){t.visible&&!i.searchColumn(e,t,n,r)&&(t.visible=!1)},c=o.length,d=0;d<c;d++)!function(e,t){for(var r=n.length,i=0;i<r;i++)u(e,n[i],t.col,t.filters)}(e,o[d]);e.api.core.raise.rowsVisibleChanged&&e.api.core.raise.rowsVisibleChanged()}return n}},i}])}(),function(){angular.module("ui.grid").service("rowSorter",["$parse","uiGridConstants",function(e,t){var n="("+t.CURRENCY_SYMBOLS.map(function(e){return"\\"+e}).join("|")+")?",r=(new RegExp("^[-+]?"+n+"[\\d,.]+"+n+"%?$"),{colSortFnCache:{}});return r.guessSortFn=function(e){switch(e){case"number":return r.sortNumber;case"numberStr":return r.sortNumberStr;case"boolean":return r.sortBool;case"string":return r.sortAlpha;case"date":return r.sortDate;case"object":return r.basicSort;default:throw new Error("No sorting function found for type:"+e)}},r.handleNulls=function(e,t){if(!e&&0!==e&&!1!==e||!t&&0!==t&&!1!==t){if(!e&&0!==e&&!1!==e&&!t&&0!==t&&!1!==t)return 0;if(!e&&0!==e&&!1!==e)return 1;if(!t&&0!==t&&!1!==t)return-1}return null},r.basicSort=function(e,t){var n=r.handleNulls(e,t);return null!==n?n:e===t?0:e<t?-1:1},r.sortNumber=function(e,t){var n=r.handleNulls(e,t);return null!==n?n:e-t},r.sortNumberStr=function(e,t){var n=r.handleNulls(e,t);if(null!==n)return n;var i,o,a=!1,s=!1;return i=parseFloat(e.replace(/[^0-9.-]/g,"")),isNaN(i)&&(a=!0),o=parseFloat(t.replace(/[^0-9.-]/g,"")),isNaN(o)&&(s=!0),a&&s?0:a?1:s?-1:i-o},r.sortAlpha=function(e,t){var n=r.handleNulls(e,t);if(null!==n)return n;var i=e.toString().toLowerCase(),o=t.toString().toLowerCase();return i===o?0:i.localeCompare(o)},r.sortDate=function(e,t){var n=r.handleNulls(e,t);if(null!==n)return n;e instanceof Date||(e=new Date(e)),t instanceof Date||(t=new Date(t));var i=e.getTime(),o=t.getTime();return i===o?0:i<o?-1:1},r.sortBool=function(e,t){var n=r.handleNulls(e,t);return null!==n?n:e&&t?0:e||t?e?1:-1:0},r.getSortFn=function(e,t,n){var i;return r.colSortFnCache[t.colDef.name]?i=r.colSortFnCache[t.colDef.name]:void 0!==t.sortingAlgorithm?(i=t.sortingAlgorithm,r.colSortFnCache[t.colDef.name]=t.sortingAlgorithm):t.sortCellFiltered&&t.cellFilter?(i=r.sortAlpha,r.colSortFnCache[t.colDef.name]=i):(i=r.guessSortFn(t.colDef.type))?r.colSortFnCache[t.colDef.name]=i:i=r.sortAlpha,i},r.prioritySort=function(e,t){return void 0!==e.sort.priority&&void 0!==t.sort.priority?e.sort.priority<t.sort.priority?-1:e.sort.priority===t.sort.priority?0:1:void 0!==e.sort.priority?-1:void 0!==t.sort.priority?1:0},r.sort=function(e,n,i){if(n){if(e.options.useExternalSorting)return n;var o=[],a=[];if(i.forEach(function(e){!e.sort||e.sort.ignoreSort||!e.sort.direction||e.sort.direction!==t.ASC&&e.sort.direction!==t.DESC?e.defaultSort&&e.defaultSort.direction&&(e.defaultSort.direction===t.ASC||e.defaultSort.direction===t.DESC)&&a.push({col:e,sort:e.defaultSort}):o.push({col:e,sort:e.sort})}),o=o.sort(r.prioritySort),a=a.sort(r.prioritySort),0===(o=o.concat(a)).length)return n;var s,l,u=function(e,t){e.entity.$$uiGridIndex=t};n.forEach(u);var c=n.slice(0),d=function(n,i){for(var a,u=0,d=0;0===u&&d<o.length;){s=o[d].col,l=o[d].sort.direction,a=r.getSortFn(e,s,c);var f,p;s.sortCellFiltered?(f=e.getCellDisplayValue(n,s),p=e.getCellDisplayValue(i,s)):(f=e.getCellValue(n,s),p=e.getCellValue(i,s)),u=a(f,p,n,i,l,s),d++}return 0===u?n.entity.$$uiGridIndex-i.entity.$$uiGridIndex:l===t.ASC?u:0-u},f=n.sort(d),p=function(e,t){delete e.entity.$$uiGridIndex};return n.forEach(p),f}},r}])}(),function(){function e(e){var t=e;return void 0!==t.length&&t.length&&(t=e[0]),t.ownerDocument.defaultView.getComputedStyle(t,null)}function t(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0,s=["Top","Right","Bottom","Left"];o<4;o+=2){var l=s[o];if("margin"===n){var u=parseFloat(i[n+l]);isNaN(u)||(a+=u)}if(r){if("content"===n){var c=parseFloat(i["padding"+l]);isNaN(c)||(a-=c)}if("margin"!==n){var d=parseFloat(i["border"+l+"Width"]);isNaN(d)||(a-=d)}}else{var f=parseFloat(i["padding"+l]);if(isNaN(f)||(a+=f),"padding"!==n){var p=parseFloat(i["border"+l+"Width"]);isNaN(p)||(a+=p)}}}return a}function n(n,r,i){var o,s=!0,l=e(n),u="border-box"===l.boxSizing;if(o<=0||null==o){if(((o=l[r])<0||null==o)&&(o=n.style[r]),a.test(o))return o;s=u&&!0,o=parseFloat(o)||0}return o+t(n,r,i||(u?"border":"content"),s,l)}function r(t){var n=(t=angular.element(t)[0]).parentElement;return n||(n=document.getElementsByTagName("body")[0]),parseInt(e(n).fontSize)||parseInt(e(t).fontSize)||16}var i,o=angular.module("ui.grid");"function"!=typeof Function.prototype.bind&&(i=function(){var e=Array.prototype.slice;return function(t){var n=this,r=e.call(arguments,1);return r.length?function(){return arguments.length?n.apply(t,r.concat(e.call(arguments))):n.apply(t,r)}:function(){return arguments.length?n.apply(t,arguments):n.call(t)}}});var a=new RegExp("^("+/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source+")(?!px)[a-z%]+$","i"),s=/^(block|none|table(?!-c[ea]).+)/,l={position:"absolute",visibility:"hidden",display:"block"},u=["0","0","0","0"];o.service("gridUtil",["$log","$window","$document","$http","$templateCache","$timeout","$interval","$injector","$q","$interpolate","uiGridConstants",function(o,a,c,d,f,p,h,g,m,v,y){function b(e,t){var n=angular.element(this),r=0,i=0,o=0,a=0;if(t.originalEvent&&(t=t.originalEvent),"detail"in t&&(o=-1*t.detail),"wheelDelta"in t&&(o=t.wheelDelta),"wheelDeltaY"in t&&(o=t.wheelDeltaY),"wheelDeltaX"in t&&(i=-1*t.wheelDeltaX),"axis"in t&&t.axis===t.HORIZONTAL_AXIS&&(i=-1*o,o=0),r=0===o?i:o,"deltaY"in t&&(r=o=-1*t.deltaY),"deltaX"in t&&(i=t.deltaX,0===o&&(r=-1*i)),0!==o||0!==i){if(1===t.deltaMode){var s=n.data("mousewheel-line-height");r*=s,o*=s,i*=s}else if(2===t.deltaMode){var l=n.data("mousewheel-page-height");r*=l,o*=l,i*=l}a=Math.max(Math.abs(o),Math.abs(i)),(!k||a<k)&&(k=a,w(t,a)&&(k/=40)),r=Math[r>=1?"floor":"ceil"](r/k),i=Math[i>=1?"floor":"ceil"](i/k),o=Math[o>=1?"floor":"ceil"](o/k);var u={originalEvent:t,deltaX:i,deltaY:o,deltaFactor:k,preventDefault:function(){t.preventDefault()},stopPropagation:function(){t.stopPropagation()}};C&&clearTimeout(C),C=setTimeout(x,200),e.call(n[0],u)}}function x(){k=null}function w(e,t){return"mousewheel"===e.type&&t%120==0}var _={augmentWidthOrHeight:t,getStyles:e,createBoundedWrapper:function(e,t){return function(){return t.apply(e,arguments)}},readableColumnName:function(e){return void 0===e||void 0===e||null===e?e:("string"!=typeof e&&(e=String(e)),e.replace(/_+/g," ").replace(/^[A-Z]+$/,function(e){return angular.lowercase(angular.uppercase(e.charAt(0))+e.slice(1))}).replace(/([\w\u00C0-\u017F]+)/g,function(e){return angular.uppercase(e.charAt(0))+e.slice(1)}).replace(/(\w+?(?=[A-Z]))/g,"$1 "))},getColumnsFromData:function(e,t){var n=[];if(!e||void 0===e[0]||void 0===e[0])return[];angular.isUndefined(t)&&(t=[]);var r=e[0];return angular.forEach(r,function(e,r){-1===t.indexOf(r)&&n.push({name:r})}),n},newId:function(){var e=(new Date).getTime();return function(){return e+=1}}(),getTemplate:function(e){if(f.get(e))return _.postProcessTemplate(f.get(e));if(angular.isFunction(e.then))return e.then(_.postProcessTemplate).catch(angular.noop);try{if(angular.element(e).length>0)return m.when(e).then(_.postProcessTemplate).catch(angular.noop)}catch(e){}return d({method:"GET",url:e}).then(function(t){var n=t.data.trim();return f.put(e,n),n},function(t){throw new Error("Could not get template "+e+": "+t)}).then(_.postProcessTemplate).catch(angular.noop)},postProcessTemplate:function(e){var t=v.startSymbol(),n=v.endSymbol();return"{{"===t&&"}}"===n||(e=(e=e.replace(/\{\{/g,t)).replace(/\}\}/g,n)),m.when(e)},guessType:function(e){var t=typeof e;switch(t){case"number":case"boolean":case"string":return t;default:return angular.isDate(e)?"date":"object"}},elementWidth:function(e){},elementHeight:function(e){},getScrollbarWidth:function(){var e=document.createElement("div");e.style.visibility="hidden",e.style.width="100px",e.style.msOverflowStyle="scrollbar",document.body.appendChild(e);var t=e.offsetWidth;e.style.overflow="scroll";var n=document.createElement("div");n.style.width="100%",e.appendChild(n);var r=n.offsetWidth;return e.parentNode.removeChild(e),t-r},swap:function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i},fakeElement:function(e,t,n,r){var i,o,a=angular.element(e).clone()[0];for(o in t)a.style[o]=t[o];return angular.element(document.body).append(a),i=n.call(a,a),angular.element(a).remove(),i},normalizeWheelEvent:function(e){var t,n,r,i=e||window.event,o=([].slice.call(arguments,1),0),a=0,s=0,l=0,u=0;return i.originalEvent&&(i=i.originalEvent),i.wheelDelta&&(o=i.wheelDelta),i.detail&&(o=-1*i.detail),s=o,void 0!==i.axis&&i.axis===i.HORIZONTAL_AXIS&&(s=0,a=-1*o),i.deltaY&&(o=s=-1*i.deltaY),i.deltaX&&(o=-1*(a=i.deltaX)),void 0!==i.wheelDeltaY&&(s=i.wheelDeltaY),void 0!==i.wheelDeltaX&&(a=i.wheelDeltaX),l=Math.abs(o),(!t||l<t)&&(t=l),u=Math.max(Math.abs(s),Math.abs(a)),(!n||u<n)&&(n=u),r=o>0?"floor":"ceil",o=Math[r](o/t),a=Math[r](a/n),s=Math[r](s/n),{delta:o,deltaX:a,deltaY:s}},isTouchEnabled:function(){var e;return("ontouchstart"in a||a.DocumentTouch&&c instanceof DocumentTouch)&&(e=!0),e},isNullOrUndefined:function(e){return void 0===e||null===e},endsWith:function(e,t){return!(!e||!t||"string"!=typeof e)&&-1!==e.indexOf(t,e.length-t.length)},arrayContainsObjectWithProperty:function(e,t,n){var r=!1;return angular.forEach(e,function(e){e[t]===n&&(r=!0)}),r},numericAndNullSort:function(e,t){return null===e?1:null===t?-1:null===e&&null===t?0:e-t},disableAnimations:function(e){var t;try{t=g.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!1):t.enabled(!1,e)}catch(e){}},enableAnimations:function(e){var t;try{return t=g.get("$animate"),angular.version.major>1||1===angular.version.major&&angular.version.minor>=4?t.enabled(e,!0):t.enabled(!0,e),t}catch(e){}},nextUid:function(){for(var e,t=u.length;t;){if(t--,57===(e=u[t].charCodeAt(0)))return u[t]="A","uiGrid-"+u.join("");if(90!==e)return u[t]=String.fromCharCode(e+1),"uiGrid-"+u.join("");u[t]="0"}return u.unshift("0"),"uiGrid-"+u.join("")},hashKey:function(e){var t,n=typeof e;return"object"===n&&null!==e?"function"==typeof(t=e.$$hashKey)?t=e.$$hashKey():void 0!==e.$$hashKey&&e.$$hashKey?t=e.$$hashKey:void 0===t&&(t=e.$$hashKey=_.nextUid()):t=e,n+":"+t},resetUids:function(){u=["0","0","0"]},logError:function(e){y.LOG_ERROR_MESSAGES&&o.error(e)},logWarn:function(e){y.LOG_WARN_MESSAGES&&o.warn(e)},logDebug:function(){y.LOG_DEBUG_MESSAGES&&o.debug.apply(o,arguments)}};_.focus={queue:[],byId:function(e,t){this._purgeQueue();var n=p(function(){var n=(t&&t.id?t.id+"-":"")+e,r=a.document.getElementById(n);r?r.focus():_.logWarn("[focus.byId] Element id "+n+" was not found.")},0,!1);return this.queue.push(n),n},byElement:function(e){if(!angular.isElement(e))return _.logWarn("Trying to focus on an element that isn't an element."),m.reject("not-element");e=angular.element(e),this._purgeQueue();var t=p(function(){e&&e[0].focus()},0,!1);return this.queue.push(t),t},bySelector:function(e,t,n){var r=this;if(!angular.isElement(e))throw new Error("The parent element is not an element.");e=angular.element(e);var i=function(){var n=e[0].querySelector(t);return r.byElement(n)};if(this._purgeQueue(),n){var o=p(i,0,!1);return this.queue.push(o),o}return i()},_purgeQueue:function(){this.queue.forEach(function(e){p.cancel(e)}),this.queue=[]}},["width","height"].forEach(function(t){var r=angular.uppercase(t.charAt(0))+t.substr(1);_["element"+r]=function(r,i){var o=r;if(o&&void 0!==o.length&&o.length&&(o=r[0]),o&&null!==o){var a=e(o);return 0===o.offsetWidth&&s.test(a.display)?_.swap(o,l,function(){return n(o,t,i)}):n(o,t,i)}return null},_["outerElement"+r]=function(e,t){return e?_["element"+r].call(this,e,t?"margin":"border"):null}}),_.closestElm=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n;["matches","webkitMatchesSelector","mozMatchesSelector","msMatchesSelector","oMatchesSelector"].some(function(e){return"function"==typeof document.body[e]&&(n=e,!0)});for(var r;null!==e;){if(null!==(r=e.parentElement)&&r[n](t))return r;e=r}return null},_.type=function(e){return Function.prototype.toString.call(e.constructor).match(/function (.*?)\(/)[1]},_.getBorderSize=function(t,n){void 0!==t.length&&t.length&&(t=t[0]);var r=e(t);n=n?"border"+n.charAt(0).toUpperCase()+n.slice(1):"border",n+="Width";var i=parseInt(r[n],10);return isNaN(i)?0:i},_.detectBrowser=function(){var e=a.navigator.userAgent,t={chrome:/chrome/i,safari:/safari/i,firefox:/firefox/i,ie:/internet explorer|trident\//i};for(var n in t)if(t[n].test(e))return n;return"unknown"},_.rtlScrollType=function e(){if(e.type)return e.type;var t=angular.element('<div dir="rtl" style="font-size: 14px; width: 1px; height: 1px; position: absolute; top: -1000px; overflow: scroll">A</div>')[0],n="reverse";return document.body.appendChild(t),t.scrollLeft>0?n="default":(t.scrollLeft=1,0===t.scrollLeft&&(n="negative")),angular.element(t).remove(),e.type=n,n},_.normalizeScrollLeft=function(e,t){void 0!==e.length&&e.length&&(e=e[0]);var n=e.scrollLeft;if(t.isRTL())switch(_.rtlScrollType()){case"default":return e.scrollWidth-n-e.clientWidth;case"negative":return Math.abs(n);case"reverse":return n}return n},_.denormalizeScrollLeft=function(e,t,n){if(void 0!==e.length&&e.length&&(e=e[0]),n.isRTL())switch(_.rtlScrollType()){case"default":return e.scrollWidth-e.clientWidth-t;case"negative":return-1*t;case"reverse":return t}return t},_.preEval=function(e){var t=y.BRACKET_REGEXP.exec(e);if(t)return(t[1]?_.preEval(t[1]):t[1])+t[2]+(t[3]?_.preEval(t[3]):t[3]);var n=(e=e.replace(y.APOS_REGEXP,"\\'")).split(y.DOT_REGEXP),r=[n.shift()];return angular.forEach(n,function(e){r.push(e.replace(y.FUNC_REGEXP,"']$1"))}),r.join("['")},_.debounce=function(e,t,n){function r(){a=this,o=arguments;var r=function(){i=null,n||(s=e.apply(a,o))},l=n&&!i;return i&&p.cancel(i),i=p(r,t,!1),l&&(s=e.apply(a,o)),s}var i,o,a,s;return r.cancel=function(){p.cancel(i),i=null},r},_.throttle=function(e,t,n){function r(t){a=+new Date,e.apply(i,o),h(function(){s=null},0,1,!1)}n=n||{};var i,o,a=0,s=null;return function(){if(i=this,o=arguments,null===s){var e=+new Date-a;e>t?r():n.trailing&&(s=h(r,t-e,1,!1))}}},_.on={},_.off={},_._events={},_.addOff=function(e){_.off[e]=function(t,n){var r=_._events[e].indexOf(n);r>0&&_._events[e].removeAt(r)}};var C,k,S="onwheel"in document||document.documentMode>=9?["wheel"]:["mousewheel","DomMouseScroll","MozMousePixelScroll"];return _.on.mousewheel=function(e,t){if(e&&t){var n=angular.element(e);n.data("mousewheel-line-height",r(n)),n.data("mousewheel-page-height",_.elementHeight(n)),n.data("mousewheel-callbacks")||n.data("mousewheel-callbacks",{});var o=n.data("mousewheel-callbacks");o[t]=(Function.prototype.bind||i).call(b,n[0],t);for(var a=S.length;a;)n.on(S[--a],o[t]);n.on("$destroy",function(){for(var e=S.length;e;)n.off(S[--e],o[t])})}},_.off.mousewheel=function(e,t){var n=angular.element(e),r=n.data("mousewheel-callbacks"),i=r[t];if(i)for(var o=S.length;o;)n.off(S[--o],i);delete r[t],0===Object.keys(r).length&&(n.removeData("mousewheel-line-height"),n.removeData("mousewheel-page-height"),n.removeData("mousewheel-callbacks"))},_}]),o.filter("px",function(){return function(e){return e.match(/^[\d\.]+$/)?e+"px":e}})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ar",{headerCell:{aria:{defaultFilterLabel:"التصفيه بالعمود",removeFilter:"محو التصفيه",columnMenuButtonLabel:"قاءمه الاعمده"},priority:"أولويه : ",filterLabel:"تصفيه بالاعمده :"},aggregate:{label:"العناصر"},groupPanel:{description:"اسحب رأس العمود هنا وأسقطه لإنشاء مجموعه"},search:{placeholder:"بحث  ...",showingItems:"العناصر الظاهره :",selectedItems:"العناصر المحدده :",totalItems:"عدد العناصر :",size:"حجم الصفحه :",first:"اول صفحه",next:"الصفحه التاليه",previous:"الصفحه الصابقه",last:"الصفحه الاخيره"},menu:{text:"اختيار العمود :"},sort:{ascending:"ترتيب تصاعدى",descending:"ترتيب تنازلى",none:"عدم التحديد",remove:"حذف الترتيب"},column:{hide:"إخفاء عمود"},aggregation:{count:"عدد الصفوف: ",sum:"جمع: ",avg:"المتوسط الحسابى: ",min:"الادنى: ",max:"الاقصى: "},pinning:{pinLeft:"تثبيت لليسار",pinRight:"تثبيت لليمين",unpin:"فك التثبيت"},columnMenu:{close:"غلق"},gridMenu:{aria:{buttonLabel:"قائمه الجدول"},columns:"الاعمده:",importerTitle:"إدخال ملف",exporterAllAsCsv:"إخراج كل البيانات ك(csv)",exporterVisibleAsCsv:"إخراج كل البيانات الواضحه ك (csv)",exporterSelectedAsCsv:"إخراج كل البيانات المحدده ك (csv)",exporterAllAsPdf:"إخراج كل البيانات ك(pdf)",exporterVisibleAsPdf:"إخراج كل البيانات الواضحه ك (pdf)",exporterSelectedAsPdf:"إخراج كل البيانات المحدده ك (pdf)",clearAllFilters:"محو كل الترشيح"},importer:{noHeaders:"اسماء هؤلاء الاعمده غير واضحه، هل يوجد رأس للملف؟",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"الملف غير قادر على الاتمام ، هل ال (CSV) صحيح؟",invalidJson:"الملف غير قادر على الاتمام ، هل ال (JSON) صحيح؟",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"الصفحه الاولى",pageBack:"الصفه السابقه",pageSelected:"الصفحه المحدده",pageForward:"الصفحه التاليه",pageToLast:"الصفحه الاخيره"},sizes:"عدد العناصر فى الصفحه",totalItems:"عناصر",through:"إلى",of:"من"},grouping:{group:"جمع",ungroup:"فك الجمع",aggregate_count:"جمله : العدد",aggregate_sum:"جمله : الحاصل",aggregate_max:"جمله : الاقصى",aggregate_min:"جمله : الاقل",aggregate_avg:"جمله :المتوسط ",aggregate_remove:"جمله : حذف"},validate:{error:"خطأ :",minLength:"القيمه لابد ان لا تقل عن THRESHOLD حرف.",maxLength:"القيمه لابد ان لا تزيد عن THRESHOLD حرف.",required:"مطلوب قيمه"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("bg",{headerCell:{aria:{defaultFilterLabel:"Филттър за колоната",removeFilter:"Премахни филтър",columnMenuButtonLabel:"Меню на колоната"},priority:"Приоритет:",filterLabel:"Филтър за колоната: "},aggregate:{label:"обекти"},search:{placeholder:"Търсене...",showingItems:"Показани обекти:",selectedItems:"избрани обекти:",totalItems:"Общо:",size:"Размер на страницата:",first:"Първа страница",next:"Следваща страница",previous:"Предишна страница",last:"Последна страница"},menu:{text:"Избери колони:"},sort:{ascending:"Сортиране по възходящ ред",descending:"Сортиране по низходящ ред",none:"Без сортиране",remove:"Премахни сортирането"},column:{hide:"Скрий колоната"},aggregation:{count:"Общо редове: ",sum:"общо: ",avg:"средно: ",min:"най-малко: ",max:"най-много: "},pinning:{pinLeft:"Прикрепи вляво",pinRight:"Прикрепи вдясно",unpin:"Премахване"},columnMenu:{close:"Затвори"},gridMenu:{aria:{buttonLabel:"Меню на таблицата"},columns:"Колони:",importerTitle:"Импортиране на файл",exporterAllAsCsv:"Експортиране на данните като csv",exporterVisibleAsCsv:"Експортиране на видимите данни като csv",exporterSelectedAsCsv:"Експортиране на избраните данни като csv",exporterAllAsPdf:"Експортиране на данните като pdf",exporterVisibleAsPdf:"Експортиране на видимите данни като pdf",exporterSelectedAsPdf:"Експортиране на избраните данни като pdf",clearAllFilters:"Премахни всички филтри"},importer:{noHeaders:"Имената на колоните не успяха да бъдат извлечени, файлът има ли хедър?",noObjects:"Обектите не успяха да бъдат извлечени, файлът съдържа ли данни, различни от хедър?",invalidCsv:"Файлът не може да бъде обработеб, уверете се, че е валиден CSV файл",invalidJson:"Файлът не може да бъде обработеб, уверете се, че е валиден JSON файл",jsonNotArray:"Импортираният JSON файл трябва да съдържа масив, прекратяване."},pagination:{aria:{pageToFirst:"Към първа страница",pageBack:"Страница назад",pageSelected:"Избрана страница",pageForward:"Страница напред",pageToLast:"Към последна страница"},sizes:"обекта на страница",totalItems:"обекта",through:"до",of:"от"},grouping:{group:"Групиране",ungroup:"Премахване на групирането",aggregate_count:"Сбор: Брой",aggregate_sum:"Сбор: Сума",aggregate_max:"Сбор: Максимум",aggregate_min:"Сбор: Минимум",aggregate_avg:"Сбор: Средно",aggregate_remove:"Сбор: Премахване"},validate:{error:"Грешка:",minLength:"Стойността трябва да съдържа поне THRESHOLD символа.",maxLength:"Стойността не трябва да съдържа повече от THRESHOLD символа.",required:"Необходима е стойност."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){var t={aggregate:{label:"položky"},groupPanel:{description:"Přesuňte záhlaví zde pro vytvoření skupiny dle sloupce."},search:{placeholder:"Hledat...",showingItems:"Zobrazuji položky:",selectedItems:"Vybrané položky:",totalItems:"Celkem položek:",size:"Velikost strany:",first:"První strana",next:"Další strana",previous:"Předchozí strana",last:"Poslední strana"},menu:{text:"Vyberte sloupec:"},sort:{ascending:"Seřadit od A-Z",descending:"Seřadit od Z-A",remove:"Odebrat seřazení"},column:{hide:"Schovat sloupec"},aggregation:{count:"celkem řádků: ",sum:"celkem: ",avg:"avg: ",min:"min.: ",max:"max.: "},pinning:{pinLeft:"Zamknout vlevo",pinRight:"Zamknout vpravo",unpin:"Odemknout"},gridMenu:{columns:"Sloupce:",importerTitle:"Importovat soubor",exporterAllAsCsv:"Exportovat všechna data do csv",exporterVisibleAsCsv:"Exportovat viditelná data do csv",exporterSelectedAsCsv:"Exportovat vybraná data do csv",exporterAllAsPdf:"Exportovat všechna data do pdf",exporterVisibleAsPdf:"Exportovat viditelná data do pdf",exporterSelectedAsPdf:"Exportovat vybraná data do pdf",exporterAllAsExcel:"Exportovat všechna data do excel",exporterVisibleAsExcel:"Exportovat viditelná data do excel",exporterSelectedAsExcel:"Exportovat vybraná data do excel",clearAllFilters:"Odstranit všechny filtry"},importer:{noHeaders:"Názvy sloupců se nepodařilo získat, obsahuje soubor záhlaví?",noObjects:"Data se nepodařilo zpracovat, obsahuje soubor řádky mimo záhlaví?",invalidCsv:"Soubor nelze zpracovat, jedná se o CSV?",invalidJson:"Soubor nelze zpracovat, je to JSON?",jsonNotArray:"Soubor musí obsahovat json. Ukončuji.."},pagination:{sizes:"položek na stránku",totalItems:"položek"},grouping:{group:"Seskupit",ungroup:"Odebrat seskupení",aggregate_count:"Agregace: Count",aggregate_sum:"Agregace: Sum",aggregate_max:"Agregace: Max",aggregate_min:"Agregace: Min",aggregate_avg:"Agregace: Avg",aggregate_remove:"Agregace: Odebrat"}};return e.add("cs",t),e.add("cz",t),e.add("cs-cz",t),e.add("cs-CZ",t),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("da",{aggregate:{label:"artikler"},groupPanel:{description:"Grupér rækker udfra en kolonne ved at trække dens overskift hertil."},search:{placeholder:"Søg...",showingItems:"Viste rækker:",selectedItems:"Valgte rækker:",totalItems:"Rækker totalt:",size:"Side størrelse:",first:"Første side",next:"Næste side",previous:"Forrige side",last:"Sidste side"},menu:{text:"Vælg kolonner:"},sort:{ascending:"Sorter stigende",descending:"Sorter faldende",none:"Sorter ingen",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antal rækker: ",sum:"sum: ",avg:"gns: ",min:"min: ",max:"max: "},gridMenu:{columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter markerede data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter markerede data som pdf",exporterAllAsExcel:"Eksporter alle data som excel",exporterVisibleAsExcel:"Eksporter synlige data som excel",exporterSelectedAsExcel:"Eksporter markerede data som excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Gå til første",pageBack:"Gå tilbage",pageSelected:"Valgte side",pageForward:"Gå frem",pageToLast:"Gå til sidste"},sizes:"genstande per side",totalItems:"genstande",through:"gennem",of:"af"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("de",{headerCell:{aria:{defaultFilterLabel:"Filter für Spalte",removeFilter:"Filter löschen",columnMenuButtonLabel:"Spaltenmenü",column:"Spalte"},priority:"Priorität:",filterLabel:"Filter für Spalte: "},aggregate:{label:"Eintrag"},groupPanel:{description:"Ziehen Sie eine Spaltenüberschrift hierhin, um nach dieser Spalte zu gruppieren."},search:{aria:{selected:"Zeile markiert",notSelected:"Zeile nicht markiert"},placeholder:"Suche...",showingItems:"Zeige Einträge:",selectedItems:"Ausgewählte Einträge:",totalItems:"Einträge gesamt:",size:"Einträge pro Seite:",first:"Erste Seite",next:"Nächste Seite",previous:"Vorherige Seite",last:"Letzte Seite"},menu:{text:"Spalten auswählen:"},sort:{ascending:"aufsteigend sortieren",descending:"absteigend sortieren",none:"keine Sortierung",remove:"Sortierung zurücksetzen"},column:{hide:"Spalte ausblenden"},aggregation:{count:"Zeilen insgesamt: ",sum:"gesamt: ",avg:"Durchschnitt: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Links anheften",pinRight:"Rechts anheften",unpin:"Lösen"},columnMenu:{close:"Schließen"},gridMenu:{aria:{buttonLabel:"Tabellenmenü"},columns:"Spalten:",importerTitle:"Datei importieren",exporterAllAsCsv:"Alle Daten als CSV exportieren",exporterVisibleAsCsv:"Sichtbare Daten als CSV exportieren",exporterSelectedAsCsv:"Markierte Daten als CSV exportieren",exporterAllAsPdf:"Alle Daten als PDF exportieren",exporterVisibleAsPdf:"Sichtbare Daten als PDF exportieren",exporterSelectedAsPdf:"Markierte Daten als PDF exportieren",exporterAllAsExcel:"Alle Daten als Excel exportieren",exporterVisibleAsExcel:"Sichtbare Daten als Excel exportieren",exporterSelectedAsExcel:"Markierte Daten als Excel exportieren",clearAllFilters:"Alle Filter zurücksetzen"},importer:{noHeaders:"Es konnten keine Spaltennamen ermittelt werden. Sind in der Datei Spaltendefinitionen enthalten?",noObjects:"Es konnten keine Zeileninformationen gelesen werden, Sind in der Datei außer den Spaltendefinitionen auch Daten enthalten?",invalidCsv:"Die Datei konnte nicht eingelesen werden, ist es eine gültige CSV-Datei?",invalidJson:"Die Datei konnte nicht eingelesen werden. Enthält sie gültiges JSON?",jsonNotArray:"Die importierte JSON-Datei muß ein Array enthalten. Breche Import ab."},pagination:{aria:{pageToFirst:"Zum Anfang",pageBack:"Seite zurück",pageSelected:"Ausgewählte Seite",pageForward:"Seite vor",pageToLast:"Zum Ende"},sizes:"Einträge pro Seite",totalItems:"Einträgen",through:"bis",of:"von"},grouping:{group:"Gruppieren",ungroup:"Gruppierung aufheben",aggregate_count:"Agg: Anzahl",aggregate_sum:"Agg: Summe",aggregate_max:"Agg: Maximum",aggregate_min:"Agg: Minimum",aggregate_avg:"Agg: Mittelwert",aggregate_remove:"Aggregation entfernen"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("en",{headerCell:{aria:{defaultFilterLabel:"Filter for column",removeFilter:"Remove Filter",columnMenuButtonLabel:"Column Menu",column:"Column"},priority:"Priority:",filterLabel:"Filter for column: "},aggregate:{label:"items"},groupPanel:{description:"Drag a column header here and drop it to group by that column."},search:{aria:{selected:"Row selected",notSelected:"Row not selected"},placeholder:"Search...",showingItems:"Showing Items:",selectedItems:"Selected Items:",totalItems:"Total Items:",size:"Page Size:",first:"First Page",next:"Next Page",previous:"Previous Page",last:"Last Page"},menu:{text:"Choose Columns:"},sort:{ascending:"Sort Ascending",descending:"Sort Descending",none:"Sort None",remove:"Remove Sort"},column:{hide:"Hide Column"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin Left",pinRight:"Pin Right",unpin:"Unpin"},columnMenu:{close:"Close"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",exporterAllAsExcel:"Export all data as excel",exporterVisibleAsExcel:"Export visible data as excel",exporterSelectedAsExcel:"Export selected data as excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."},pagination:{aria:{pageToFirst:"Page to first",pageBack:"Page back",pageSelected:"Selected page",pageForward:"Page forward",pageToLast:"Page to last"},sizes:"items per page",totalItems:"items",through:"through",of:"of"},grouping:{group:"Group",ungroup:"Ungroup",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"},validate:{error:"Error:",minLength:"Value should be at least THRESHOLD characters long.",maxLength:"Value should be at most THRESHOLD characters long.",required:"A value is needed."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("es",{aggregate:{label:"Artículos"},groupPanel:{description:"Arrastre un encabezado de columna aquí y suéltelo para agrupar por esa columna."},search:{placeholder:"Buscar...",showingItems:"Artículos Mostrados:",selectedItems:"Artículos Seleccionados:",totalItems:"Artículos Totales:",size:"Tamaño de Página:",first:"Primera Página",next:"Página Siguiente",previous:"Página Anterior",last:"Última Página"},menu:{text:"Elegir columnas:"},sort:{ascending:"Orden Ascendente",descending:"Orden Descendente",remove:"Sin Ordenar"},column:{hide:"Ocultar la columna"},aggregation:{count:"filas totales: ",sum:"total: ",avg:"media: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fijar a la Izquierda",pinRight:"Fijar a la Derecha",unpin:"Quitar Fijación"},gridMenu:{columns:"Columnas:",importerTitle:"Importar archivo",exporterAllAsCsv:"Exportar todo como csv",exporterVisibleAsCsv:"Exportar vista como csv",exporterSelectedAsCsv:"Exportar selección como csv",exporterAllAsPdf:"Exportar todo como pdf",exporterVisibleAsPdf:"Exportar vista como pdf",exporterSelectedAsPdf:"Exportar selección como pdf",exporterAllAsExcel:"Exportar todo como excel",exporterVisibleAsExcel:"Exportar vista como excel",exporterSelectedAsExcel:"Exportar selección como excel",clearAllFilters:"Limpiar todos los filtros"},importer:{noHeaders:"No fue posible derivar los nombres de las columnas, ¿tiene encabezados el archivo?",noObjects:"No fue posible obtener registros, ¿contiene datos el archivo, aparte de los encabezados?",invalidCsv:"No fue posible procesar el archivo, ¿es un CSV válido?",invalidJson:"No fue posible procesar el archivo, ¿es un Json válido?",jsonNotArray:"El archivo json importado debe contener un array, abortando."},pagination:{sizes:"registros por página",totalItems:"registros",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Cont",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Máx",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Prom",aggregate_remove:"Agr: Quitar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fa",{aggregate:{label:"قلم"},groupPanel:{description:"عنوان یک ستون را بگیر و به گروهی از آن ستون رها کن."},search:{placeholder:"جستجو...",showingItems:"نمایش اقلام:",selectedItems:"قلم‌های انتخاب شده:",totalItems:"مجموع اقلام:",size:"اندازه‌ی صفحه:",first:"اولین صفحه",next:"صفحه‌ی‌بعدی",previous:"صفحه‌ی‌ قبلی",last:"آخرین صفحه"},menu:{text:"ستون‌های انتخابی:"},sort:{ascending:"ترتیب صعودی",descending:"ترتیب نزولی",remove:"حذف مرتب کردن"},column:{hide:"پنهان‌کردن ستون"},aggregation:{count:"تعداد: ",sum:"مجموع: ",avg:"میانگین: ",min:"کمترین: ",max:"بیشترین: "},pinning:{pinLeft:"پین کردن سمت چپ",pinRight:"پین کردن سمت راست",unpin:"حذف پین"},gridMenu:{columns:"ستون‌ها:",importerTitle:"وارد کردن فایل",exporterAllAsCsv:"خروجی تمام داده‌ها در فایل csv",exporterVisibleAsCsv:"خروجی داده‌های قابل مشاهده در فایل csv",exporterSelectedAsCsv:"خروجی داده‌های انتخاب‌شده در فایل csv",exporterAllAsPdf:"خروجی تمام داده‌ها در فایل pdf",exporterVisibleAsPdf:"خروجی داده‌های قابل مشاهده در فایل pdf",exporterSelectedAsPdf:"خروجی داده‌های انتخاب‌شده در فایل pdf",clearAllFilters:"پاک کردن تمام فیلتر"},importer:{noHeaders:"نام ستون قابل استخراج نیست. آیا فایل عنوان دارد؟",noObjects:"اشیا قابل استخراج نیستند. آیا به جز عنوان‌ها در فایل داده وجود دارد؟",invalidCsv:"فایل قابل پردازش نیست. آیا فرمت  csv  معتبر است؟",invalidJson:"فایل قابل پردازش نیست. آیا فرمت json   معتبر است؟",jsonNotArray:"فایل json وارد شده باید حاوی آرایه باشد. عملیات ساقط شد."},pagination:{sizes:"اقلام در هر صفحه",totalItems:"اقلام",of:"از"},grouping:{group:"گروه‌بندی",ungroup:"حذف گروه‌بندی",aggregate_count:"Agg: تعداد",aggregate_sum:"Agg: جمع",aggregate_max:"Agg: بیشینه",aggregate_min:"Agg: کمینه",aggregate_avg:"Agg: میانگین",aggregate_remove:"Agg: حذف"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fi",{aggregate:{label:"rivit"},groupPanel:{description:"Raahaa ja pudota otsikko tähän ryhmittääksesi sarakkeen mukaan."},search:{placeholder:"Hae...",showingItems:"Näytetään rivejä:",selectedItems:"Valitut rivit:",totalItems:"Rivejä yht.:",size:"Näytä:",first:"Ensimmäinen sivu",next:"Seuraava sivu",previous:"Edellinen sivu",last:"Viimeinen sivu"},menu:{text:"Valitse sarakkeet:"},sort:{ascending:"Järjestä nouseva",descending:"Järjestä laskeva",remove:"Poista järjestys"},column:{hide:"Piilota sarake"},aggregation:{count:"Rivejä yht.: ",sum:"Summa: ",avg:"K.a.: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Lukitse vasemmalle",pinRight:"Lukitse oikealle",unpin:"Poista lukitus"},gridMenu:{columns:"Sarakkeet:",importerTitle:"Tuo tiedosto",exporterAllAsCsv:"Vie tiedot csv-muodossa",exporterVisibleAsCsv:"Vie näkyvä tieto csv-muodossa",exporterSelectedAsCsv:"Vie valittu tieto csv-muodossa",exporterAllAsPdf:"Vie tiedot pdf-muodossa",exporterVisibleAsPdf:"Vie näkyvä tieto pdf-muodossa",exporterSelectedAsPdf:"Vie valittu tieto pdf-muodossa",exporterAllAsExcel:"Vie tiedot excel-muodossa",exporterVisibleAsExcel:"Vie näkyvä tieto excel-muodossa",exporterSelectedAsExcel:"Vie valittu tieto excel-muodossa",clearAllFilters:"Puhdista kaikki suodattimet"},importer:{noHeaders:"Sarakkeen nimiä ei voitu päätellä, onko tiedostossa otsikkoriviä?",noObjects:"Tietoja ei voitu lukea, onko tiedostossa muuta kuin otsikkot?",invalidCsv:"Tiedostoa ei voitu käsitellä, oliko se CSV-muodossa?",invalidJson:"Tiedostoa ei voitu käsitellä, oliko se JSON-muodossa?",jsonNotArray:"Tiedosto ei sisältänyt taulukkoa, lopetetaan."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("fr",{headerCell:{aria:{defaultFilterLabel:"Filtre de la colonne",removeFilter:"Supprimer le filtre",columnMenuButtonLabel:"Menu de la colonne"},priority:"Priorité:",filterLabel:"Filtre de la colonne: "},aggregate:{label:"éléments"},groupPanel:{description:"Faites glisser une en-tête de colonne ici pour créer un groupe de colonnes."},search:{placeholder:"Recherche...",showingItems:"Affichage des éléments :",selectedItems:"Éléments sélectionnés :",totalItems:"Nombre total d'éléments:",size:"Taille de page:",first:"Première page",next:"Page Suivante",previous:"Page précédente",last:"Dernière page"},menu:{text:"Choisir des colonnes :"},sort:{ascending:"Trier par ordre croissant",descending:"Trier par ordre décroissant",none:"Aucun tri",remove:"Enlever le tri"},column:{hide:"Cacher la colonne"},aggregation:{count:"lignes totales: ",sum:"total: ",avg:"moy: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Épingler à gauche",pinRight:"Épingler à droite",unpin:"Détacher"},columnMenu:{close:"Fermer"},gridMenu:{aria:{buttonLabel:"Menu du tableau"},columns:"Colonnes:",importerTitle:"Importer un fichier",exporterAllAsCsv:"Exporter toutes les données en CSV",exporterVisibleAsCsv:"Exporter les données visibles en CSV",exporterSelectedAsCsv:"Exporter les données sélectionnées en CSV",exporterAllAsPdf:"Exporter toutes les données en PDF",exporterVisibleAsPdf:"Exporter les données visibles en PDF",exporterSelectedAsPdf:"Exporter les données sélectionnées en PDF",exporterAllAsExcel:"Exporter toutes les données en Excel",exporterVisibleAsExcel:"Exporter les données visibles en Excel",exporterSelectedAsExcel:"Exporter les données sélectionnées en Excel",clearAllFilters:"Nettoyez tous les filtres"},importer:{noHeaders:"Impossible de déterminer le nom des colonnes, le fichier possède-t-il une en-tête ?",noObjects:"Aucun objet trouvé, le fichier possède-t-il des données autres que l'en-tête ?",invalidCsv:"Le fichier n'a pas pu être traité, le CSV est-il valide ?",invalidJson:"Le fichier n'a pas pu être traité, le JSON est-il valide ?",jsonNotArray:"Le fichier JSON importé doit contenir un tableau, abandon."},pagination:{aria:{pageToFirst:"Aller à la première page",pageBack:"Page précédente",pageSelected:"Page sélectionnée",pageForward:"Page suivante",pageToLast:"Aller à la dernière page"},sizes:"éléments par page",totalItems:"éléments",through:"à",of:"sur"},grouping:{group:"Grouper",ungroup:"Dégrouper",aggregate_count:"Agg: Compter",aggregate_sum:"Agg: Somme",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Moy",aggregate_remove:"Agg: Retirer"},validate:{error:"Erreur:",minLength:"La valeur doit être supérieure ou égale à THRESHOLD caractères.",maxLength:"La valeur doit être inférieure ou égale à THRESHOLD caractères.",required:"Une valeur est nécéssaire."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("he",{aggregate:{label:"items"},groupPanel:{description:"גרור עמודה לכאן ושחרר בכדי לקבץ עמודה זו."},search:{placeholder:"חפש...",showingItems:"מציג:",selectedItems:'סה"כ נבחרו:',totalItems:'סה"כ רשומות:',size:"תוצאות בדף:",first:"דף ראשון",next:"דף הבא",previous:"דף קודם",last:"דף אחרון"},menu:{text:"בחר עמודות:"},sort:{ascending:"סדר עולה",descending:"סדר יורד",remove:"בטל"},column:{hide:"טור הסתר"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",exporterAllAsExcel:"Export all data as excel",exporterVisibleAsExcel:"Export visible data as excel",exporterSelectedAsExcel:"Export selected data as excel",clearAllFilters:"Clean all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("hy",{aggregate:{label:"տվյալներ"},groupPanel:{description:"Ըստ սյան խմբավորելու համար քաշեք և գցեք վերնագիրն այստեղ։"},search:{placeholder:"Փնտրում...",showingItems:"Ցուցադրված տվյալներ՝",selectedItems:"Ընտրված:",totalItems:"Ընդամենը՝",size:"Տողերի քանակը էջում՝",first:"Առաջին էջ",next:"Հաջորդ էջ",previous:"Նախորդ էջ",last:"Վերջին էջ"},menu:{text:"Ընտրել սյուները:"},sort:{ascending:"Աճման կարգով",descending:"Նվազման կարգով",remove:"Հանել "},column:{hide:"Թաքցնել սյունը"},aggregation:{count:"ընդամենը տող՝ ",sum:"ընդամենը՝ ",avg:"միջին՝ ",min:"մին՝ ",max:"մաքս՝ "},pinning:{pinLeft:"Կպցնել ձախ կողմում",pinRight:"Կպցնել աջ կողմում",unpin:"Արձակել"},gridMenu:{columns:"Սյուներ:",importerTitle:"Ներմուծել ֆայլ",exporterAllAsCsv:"Արտահանել ամբողջը CSV",exporterVisibleAsCsv:"Արտահանել երևացող տվյալները CSV",exporterSelectedAsCsv:"Արտահանել ընտրված տվյալները CSV",exporterAllAsPdf:"Արտահանել PDF",exporterVisibleAsPdf:"Արտահանել երևացող տվյալները PDF",exporterSelectedAsPdf:"Արտահանել ընտրված տվյալները PDF",exporterAllAsExcel:"Արտահանել excel",exporterVisibleAsExcel:"Արտահանել երևացող տվյալները excel",exporterSelectedAsExcel:"Արտահանել ընտրված տվյալները excel",clearAllFilters:"Մաքրել բոլոր ֆիլտրերը"},importer:{noHeaders:"Հնարավոր չեղավ որոշել սյան վերնագրերը։ Արդյո՞ք ֆայլը ունի վերնագրեր։",noObjects:"Հնարավոր չեղավ կարդալ տվյալները։ Արդյո՞ք ֆայլում կան տվյալներ։",invalidCsv:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր CSV է։",invalidJson:"Հնարավոր չեղավ մշակել ֆայլը։ Արդյո՞ք այն վավեր Json է։",jsonNotArray:"Ներմուծված json ֆայլը պետք է պարունակի զանգված, կասեցվում է։"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("is",{headerCell:{aria:{defaultFilterLabel:"Sía fyrir dálk",removeFilter:"Fjarlægja síu",columnMenuButtonLabel:"Dálkavalmynd"},priority:"Forgangsröðun:",filterLabel:"Sía fyrir dálka: "},aggregate:{label:"hlutir"},groupPanel:{description:"Dragðu dálkhaus hingað til að flokka saman eftir þeim dálki."},search:{placeholder:"Leita...",showingItems:"Sýni hluti:",selectedItems:"Valdir hlutir:",totalItems:"Hlutir alls:",size:"Stærð síðu:",first:"Fyrsta síða",next:"Næsta síða",previous:"Fyrri síða",last:"Síðasta síða"},menu:{text:"Veldu dálka:"},sort:{ascending:"Raða hækkandi",descending:"Raða lækkandi",none:"Engin röðun",remove:"Fjarlægja röðun"},column:{hide:"Fela dálk"},aggregation:{count:"fjöldi raða: ",sum:"summa: ",avg:"meðaltal: ",min:"lágmark: ",max:"hámark: "},pinning:{pinLeft:"Festa til vinstri",pinRight:"Festa til hægri",unpin:"Losa"},columnMenu:{close:"Loka"},gridMenu:{aria:{buttonLabel:"Töflu valmynd"},columns:"Dálkar:",importerTitle:"Flytja inn skjal",exporterAllAsCsv:"Flytja út gögn sem csv",exporterVisibleAsCsv:"Flytja út sýnileg gögn sem csv",exporterSelectedAsCsv:"Flytja út valin gögn sem csv",exporterAllAsPdf:"Flytja út öll gögn sem pdf",exporterVisibleAsPdf:"Flytja út sýnileg gögn sem pdf",exporterSelectedAsPdf:"Flytja út valin gögn sem pdf",clearAllFilters:"Hreinsa allar síur"},importer:{noHeaders:"Ekki hægt að vinna dálkanöfn úr skjalinu, er skjalið örugglega með haus?",noObjects:"Ekki hægt að vinna hluti úr skjalinu, voru örugglega gögn í skjalinu önnur en hausinn?",invalidCsv:"Tókst ekki að vinna skjal, er það örggulega gilt CSV?",invalidJson:"Tókst ekki að vinna skjal, er það örugglega gilt Json?",jsonNotArray:"Innflutt json skjal verður að innihalda fylki, hætti við."},pagination:{aria:{pageToFirst:"Fletta að fyrstu",pageBack:"Fletta til baka",pageSelected:"Valin síða",pageForward:"Fletta áfram",pageToLast:"Fletta að síðustu"},sizes:"hlutir á síðu",totalItems:"hlutir",through:"gegnum",of:"af"},grouping:{group:"Flokka",ungroup:"Sundurliða",aggregate_count:"Fjöldi: ",aggregate_sum:"Summa: ",aggregate_max:"Hámark: ",aggregate_min:"Lágmark: ",aggregate_avg:"Meðaltal: ",aggregate_remove:"Fjarlægja: "},validate:{error:"Villa:",minLength:"Gildi ætti að vera a.m.k. THRESHOLD stafa langt.",maxLength:"Gildi ætti að vera í mesta lagi THRESHOLD stafa langt.",required:"Þarf að hafa gildi."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("it",{aggregate:{label:"elementi"},groupPanel:{description:"Trascina un'intestazione all'interno del gruppo della colonna."},search:{placeholder:"Ricerca...",showingItems:"Mostra:",selectedItems:"Selezionati:",totalItems:"Totali:",size:"Tot Pagine:",first:"Prima",next:"Prossima",previous:"Precedente",last:"Ultima"},menu:{text:"Scegli le colonne:"},sort:{ascending:"Asc.",descending:"Desc.",remove:"Annulla ordinamento"},column:{hide:"Nascondi"},aggregation:{count:"righe totali: ",sum:"tot: ",avg:"media: ",min:"minimo: ",max:"massimo: "},pinning:{pinLeft:"Blocca a sx",pinRight:"Blocca a dx",unpin:"Blocca in alto"},gridMenu:{columns:"Colonne:",importerTitle:"Importa",exporterAllAsCsv:"Esporta tutti i dati in CSV",exporterVisibleAsCsv:"Esporta i dati visibili in CSV",exporterSelectedAsCsv:"Esporta i dati selezionati in CSV",exporterAllAsPdf:"Esporta tutti i dati in PDF",exporterVisibleAsPdf:"Esporta i dati visibili in PDF",exporterSelectedAsPdf:"Esporta i dati selezionati in PDF",exporterAllAsExcel:"Esporta tutti i dati in excel",exporterVisibleAsExcel:"Esporta i dati visibili in excel",exporterSelectedAsExcel:"Esporta i dati selezionati in excel",clearAllFilters:"Pulire tutti i filtri"},importer:{noHeaders:"Impossibile reperire i nomi delle colonne, sicuro che siano indicati all'interno del file?",noObjects:"Impossibile reperire gli oggetti, sicuro che siano indicati all'interno del file?",invalidCsv:"Impossibile elaborare il file, sicuro che sia un CSV?",invalidJson:"Impossibile elaborare il file, sicuro che sia un JSON valido?",jsonNotArray:"Errore! Il file JSON da importare deve contenere un array."},pagination:{aria:{pageToFirst:"Prima",pageBack:"Indietro",pageSelected:"Pagina selezionata",pageForward:"Avanti",pageToLast:"Ultima"},sizes:"elementi per pagina",totalItems:"elementi",through:"a",of:"di"},grouping:{group:"Raggruppa",ungroup:"Separa",aggregate_count:"Agg: N. Elem.",aggregate_sum:"Agg: Somma",aggregate_max:"Agg: Massimo",aggregate_min:"Agg: Minimo",aggregate_avg:"Agg: Media",aggregate_remove:"Agg: Rimuovi"},validate:{error:"Errore:",minLength:"Lunghezza minima pari a THRESHOLD caratteri.",maxLength:"Lunghezza massima pari a THRESHOLD caratteri.",required:"Necessario inserire un valore."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ja",{headerCell:{aria:{defaultFilterLabel:"列のフィルター",removeFilter:"フィルターの解除",columnMenuButtonLabel:"列のメニュー"},priority:"優先度:",filterLabel:"列フィルター: "},aggregate:{label:"項目"},groupPanel:{description:"ここに列ヘッダをドラッグアンドドロップして、その列でグループ化します。"},search:{placeholder:"検索...",showingItems:"表示中の項目:",selectedItems:"選択した項目:",totalItems:"項目の総数:",size:"ページサイズ:",first:"最初のページ",next:"次のページ",previous:"前のページ",last:"前のページ"},menu:{text:"列の選択:"},sort:{ascending:"昇順に並べ替え",descending:"降順に並べ替え",none:"並べ替え無し",remove:"並べ替えの解除"},column:{hide:"列の非表示"},aggregation:{count:"行数: ",sum:"合計: ",avg:"平均: ",min:"最小: ",max:"最大: "},pinning:{pinLeft:"左に固定",pinRight:"右に固定",unpin:"固定解除"},columnMenu:{close:"閉じる"},gridMenu:{aria:{buttonLabel:"グリッドメニュー"},columns:"列の表示/非表示:",importerTitle:"ファイルのインポート",exporterAllAsCsv:"すべてのデータをCSV形式でエクスポート",exporterVisibleAsCsv:"表示中のデータをCSV形式でエクスポート",exporterSelectedAsCsv:"選択したデータをCSV形式でエクスポート",exporterAllAsPdf:"すべてのデータをPDF形式でエクスポート",exporterVisibleAsPdf:"表示中のデータをPDF形式でエクスポート",exporterSelectedAsPdf:"選択したデータをPDF形式でエクスポート",clearAllFilters:"すべてのフィルタをクリア"},importer:{noHeaders:"列名を取得できません。ファイルにヘッダが含まれていることを確認してください。",noObjects:"オブジェクトを取得できません。ファイルにヘッダ以外のデータが含まれていることを確認してください。",invalidCsv:"ファイルを処理できません。ファイルが有効なCSV形式であることを確認してください。",invalidJson:"ファイルを処理できません。ファイルが有効なJSON形式であることを確認してください。",jsonNotArray:"インポートしたJSONファイルには配列が含まれている必要があります。処理を中止します。"},pagination:{aria:{pageToFirst:"最初のページ",pageBack:"前のページ",pageSelected:"現在のページ",pageForward:"次のページ",pageToLast:"最後のページ"},sizes:"項目/ページ",totalItems:"項目",through:"から",of:"項目/全"},grouping:{group:"グループ化",ungroup:"グループ化の解除",aggregate_count:"集計表示: 行数",aggregate_sum:"集計表示: 合計",aggregate_max:"集計表示: 最大",aggregate_min:"集計表示: 最小",aggregate_avg:"集計表示: 平均",aggregate_remove:"集計表示: 解除"},validate:{error:"Error:",minLength:"THRESHOLD 文字以上で入力してください。",maxLength:"THRESHOLD 文字以下で入力してください。",required:"値が必要です。"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ko",{aggregate:{label:"아이템"},groupPanel:{description:"컬럼으로 그룹핑하기 위해서는 컬럼 헤더를 끌어 떨어뜨려 주세요."},search:{placeholder:"검색...",showingItems:"항목 보여주기:",selectedItems:"선택 항목:",totalItems:"전체 항목:",size:"페이지 크기:",first:"첫번째 페이지",next:"다음 페이지",previous:"이전 페이지",last:"마지막 페이지"},menu:{text:"컬럼을 선택하세요:"},sort:{ascending:"오름차순 정렬",descending:"내림차순 정렬",remove:"소팅 제거"},column:{hide:"컬럼 제거"},aggregation:{count:"전체 갯수: ",sum:"전체: ",avg:"평균: ",min:"최소: ",max:"최대: "},pinning:{pinLeft:"왼쪽 핀",pinRight:"오른쪽 핀",unpin:"핀 제거"},gridMenu:{columns:"컬럼:",importerTitle:"파일 가져오기",exporterAllAsCsv:"csv로 모든 데이터 내보내기",exporterVisibleAsCsv:"csv로 보이는 데이터 내보내기",exporterSelectedAsCsv:"csv로 선택된 데이터 내보내기",exporterAllAsPdf:"pdf로 모든 데이터 내보내기",exporterVisibleAsPdf:"pdf로 보이는 데이터 내보내기",exporterSelectedAsPdf:"pdf로 선택 데이터 내보내기",clearAllFilters:"모든 필터를 청소"},importer:{noHeaders:"컬럼명이 지정되어 있지 않습니다. 파일에 헤더가 명시되어 있는지 확인해 주세요.",noObjects:"데이터가 지정되어 있지 않습니다. 데이터가 파일에 있는지 확인해 주세요.",invalidCsv:"파일을 처리할 수 없습니다. 올바른 csv인지 확인해 주세요.",invalidJson:"파일을 처리할 수 없습니다. 올바른 json인지 확인해 주세요.",jsonNotArray:"json 파일은 배열을 포함해야 합니다."},pagination:{sizes:"페이지당 항목",totalItems:"전체 항목"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("nl",{aggregate:{label:"items"},groupPanel:{description:"Sleep hier een kolomnaam heen om op te groeperen."},search:{placeholder:"Zoeken...",showingItems:"Getoonde items:",selectedItems:"Geselecteerde items:",totalItems:"Totaal aantal items:",size:"Items per pagina:",first:"Eerste pagina",next:"Volgende pagina",previous:"Vorige pagina",last:"Laatste pagina"},menu:{text:"Kies kolommen:"},sort:{ascending:"Sorteer oplopend",descending:"Sorteer aflopend",remove:"Verwijder sortering"},column:{hide:"Verberg kolom"},aggregation:{count:"Aantal rijen: ",sum:"Som: ",avg:"Gemiddelde: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Zet links vast",pinRight:"Zet rechts vast",unpin:"Maak los"},gridMenu:{columns:"Kolommen:",importerTitle:"Importeer bestand",exporterAllAsCsv:"Exporteer alle data als csv",exporterVisibleAsCsv:"Exporteer zichtbare data als csv",exporterSelectedAsCsv:"Exporteer geselecteerde data als csv",exporterAllAsPdf:"Exporteer alle data als pdf",exporterVisibleAsPdf:"Exporteer zichtbare data als pdf",exporterSelectedAsPdf:"Exporteer geselecteerde data als pdf",exporterAllAsExcel:"Exporteer alle data als excel",exporterVisibleAsExcel:"Exporteer zichtbare data als excel",exporterSelectedAsExcel:"Exporteer alle data als excel",clearAllFilters:"Reinig alle filters"},importer:{noHeaders:"Kolomnamen kunnen niet worden afgeleid. Heeft het bestand een header?",noObjects:"Objecten kunnen niet worden afgeleid. Bevat het bestand data naast de headers?",invalidCsv:"Het bestand kan niet verwerkt worden. Is het een valide csv bestand?",invalidJson:"Het bestand kan niet verwerkt worden. Is het valide json?",jsonNotArray:"Het json bestand moet een array bevatten. De actie wordt geannuleerd."},pagination:{sizes:"items per pagina",totalItems:"items",of:"van de"},grouping:{group:"Groepeer",ungroup:"Groepering opheffen",aggregate_count:"Agg: Aantal",aggregate_sum:"Agg: Som",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Gem",aggregate_remove:"Agg: Verwijder"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("no",{headerCell:{aria:{defaultFilterLabel:"Filter for kolonne",removeFilter:"Fjern filter",columnMenuButtonLabel:"Kolonnemeny"},priority:"Prioritet:",filterLabel:"Filter for kolonne: "},aggregate:{label:"elementer"},groupPanel:{description:"Trekk en kolonneoverskrift hit og slipp den for å gruppere etter den kolonnen."},search:{placeholder:"Søk...",showingItems:"Viste elementer:",selectedItems:"Valgte elementer:",totalItems:"Antall elementer:",size:"Sidestørrelse:",first:"Første side",next:"Neste side",previous:"Forrige side",last:"Siste side"},menu:{text:"Velg kolonner:"},sort:{ascending:"Sortere stigende",descending:"Sortere fallende",none:"Ingen sortering",remove:"Fjern sortering"},column:{hide:"Skjul kolonne"},aggregation:{count:"antall rader: ",sum:"total: ",avg:"gjennomsnitt: ",min:"minimum: ",max:"maksimum: "},pinning:{pinLeft:"Fest til venstre",pinRight:"Fest til høyre",unpin:"Løsne"},columnMenu:{close:"Lukk"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Kolonner:",importerTitle:"Importer fil",exporterAllAsCsv:"Eksporter alle data som csv",exporterVisibleAsCsv:"Eksporter synlige data som csv",exporterSelectedAsCsv:"Eksporter utvalgte data som csv",exporterAllAsPdf:"Eksporter alle data som pdf",exporterVisibleAsPdf:"Eksporter synlige data som pdf",exporterSelectedAsPdf:"Eksporter utvalgte data som pdf",exporterAllAsExcel:"Eksporter alle data som excel",exporterVisibleAsExcel:"Eksporter synlige data som excel",exporterSelectedAsExcel:"Eksporter utvalgte data som excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Kolonnenavn kunne ikke avledes. Har filen en overskrift?",noObjects:"Objekter kunne ikke avledes. Er der andre data i filen enn overskriften?",invalidCsv:"Filen kunne ikke behandles. Er den gyldig CSV?",invalidJson:"Filen kunne ikke behandles. Er den gyldig JSON?",jsonNotArray:"Importert JSON-fil må inneholde en liste. Avbryter."},pagination:{aria:{pageToFirst:"Gå til første side",pageBack:"Gå til forrige side",pageSelected:"Valgte side",pageForward:"Gå til neste side",pageToLast:"Gå til siste side"},sizes:"elementer per side",totalItems:"elementer",through:"til",of:"av"},grouping:{group:"Gruppere",ungroup:"Fjerne gruppering",aggregate_count:"Agr: Antall",aggregate_sum:"Agr: Sum",aggregate_max:"Agr: Maksimum",aggregate_min:"Agr: Minimum",aggregate_avg:"Agr: Gjennomsnitt",aggregate_remove:"Agr: Fjern"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pl",{headerCell:{aria:{defaultFilterLabel:"Filtr dla kolumny",removeFilter:"Usuń filtr",columnMenuButtonLabel:"Opcje kolumny",column:"Kolumna"},priority:"Priorytet:",filterLabel:"Filtr dla kolumny: "},aggregate:{label:"pozycji"},groupPanel:{description:"Przeciągnij nagłówek kolumny tutaj, aby pogrupować według niej."},search:{aria:{selected:"Wiersz zaznaczony",notSelected:"Wiersz niezaznaczony"},placeholder:"Szukaj...",showingItems:"Widoczne pozycje:",selectedItems:"Zaznaczone pozycje:",totalItems:"Wszystkich pozycji:",size:"Rozmiar strony:",first:"Pierwsza strona",next:"Następna strona",previous:"Poprzednia strona",last:"Ostatnia strona"},menu:{text:"Wybierz kolumny:"},sort:{ascending:"Sortuj rosnąco",descending:"Sortuj malejąco",none:"Brak sortowania",remove:"Wyłącz sortowanie"},column:{hide:"Ukryj kolumnę"},aggregation:{count:"Razem pozycji: ",sum:"Razem: ",avg:"Średnia: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Przypnij do lewej",pinRight:"Przypnij do prawej",unpin:"Odepnij"},columnMenu:{close:"Zamknij"},gridMenu:{aria:{buttonLabel:"Opcje tabeli"},columns:"Kolumny:",importerTitle:"Importuj plik",exporterAllAsCsv:"Eksportuj wszystkie dane do csv",exporterVisibleAsCsv:"Eksportuj widoczne dane do csv",exporterSelectedAsCsv:"Eksportuj zaznaczone dane do csv",exporterAllAsPdf:"Eksportuj wszystkie dane do pdf",exporterVisibleAsPdf:"Eksportuj widoczne dane do pdf",exporterSelectedAsPdf:"Eksportuj zaznaczone dane do pdf",exporterAllAsExcel:"Eksportuj wszystkie dane do excel",exporterVisibleAsExcel:"Eksportuj widoczne dane do excel",exporterSelectedAsExcel:"Eksportuj zaznaczone dane do excel",clearAllFilters:"Wyczyść filtry"},importer:{noHeaders:"Nie udało się wczytać nazw kolumn. Czy plik posiada nagłówek?",noObjects:"Nie udalo się wczytać pozycji. Czy plik zawiera dane?",invalidCsv:"Nie udało się przetworzyć pliku. Czy to prawidłowy plik CSV?",invalidJson:"Nie udało się przetworzyć pliku. Czy to prawidłowy plik JSON?",jsonNotArray:"Importowany plik JSON musi zawierać tablicę. Importowanie przerwane."},pagination:{aria:{pageToFirst:"Pierwsza strona",pageBack:"Poprzednia strona",pageSelected:"Wybrana strona",pageForward:"Następna strona",pageToLast:"Ostatnia strona"},sizes:"pozycji na stronę",totalItems:"pozycji",through:"do",of:"z"},grouping:{group:"Grupuj",ungroup:"Rozgrupuj",aggregate_count:"Zbiorczo: Razem",aggregate_sum:"Zbiorczo: Suma",aggregate_max:"Zbiorczo: Max",aggregate_min:"Zbiorczo: Min",aggregate_avg:"Zbiorczo: Średnia",aggregate_remove:"Zbiorczo: Usuń"},validate:{error:"Błąd:",minLength:"Wartość powinna składać się z co najmniej THRESHOLD znaków.",maxLength:"Wartość powinna składać się z przynajmniej THRESHOLD znaków.",required:"Wartość jest wymagana."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt-br",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Items Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar arquivo",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",exporterAllAsExcel:"Exportar todos os dados como excel",exporterVisibleAsExcel:"Exportar dados visíveis como excel",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O arquivo tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no arquivo, além dos cabeçalhos?",invalidCsv:"Arquivo não pode ser processado. É um CSV válido?",invalidJson:"Arquivo não pode ser processado. É um Json válido?",jsonNotArray:"Arquivo json importado tem que conter um array. Abortando."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Proxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"através dos",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("pt",{headerCell:{aria:{defaultFilterLabel:"Filtro por coluna",removeFilter:"Remover filtro",columnMenuButtonLabel:"Menu coluna"},priority:"Prioridade:",filterLabel:"Filtro por coluna: "},aggregate:{label:"itens"},groupPanel:{description:"Arraste e solte uma coluna aqui para agrupar por essa coluna"},search:{placeholder:"Procurar...",showingItems:"Mostrando os Itens:",selectedItems:"Itens Selecionados:",totalItems:"Total de Itens:",size:"Tamanho da Página:",first:"Primeira Página",next:"Próxima Página",previous:"Página Anterior",last:"Última Página"},menu:{text:"Selecione as colunas:"},sort:{ascending:"Ordenar Ascendente",descending:"Ordenar Descendente",none:"Nenhuma Ordem",remove:"Remover Ordenação"},column:{hide:"Esconder coluna"},aggregation:{count:"total de linhas: ",sum:"total: ",avg:"med: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Fixar Esquerda",pinRight:"Fixar Direita",unpin:"Desprender"},columnMenu:{close:"Fechar"},gridMenu:{aria:{buttonLabel:"Menu Grid"},columns:"Colunas:",importerTitle:"Importar ficheiro",exporterAllAsCsv:"Exportar todos os dados como csv",exporterVisibleAsCsv:"Exportar dados visíveis como csv",exporterSelectedAsCsv:"Exportar dados selecionados como csv",exporterAllAsPdf:"Exportar todos os dados como pdf",exporterVisibleAsPdf:"Exportar dados visíveis como pdf",exporterSelectedAsPdf:"Exportar dados selecionados como pdf",clearAllFilters:"Limpar todos os filtros"},importer:{noHeaders:"Nomes de colunas não puderam ser derivados. O ficheiro tem um cabeçalho?",noObjects:"Objetos não puderam ser derivados. Havia dados no ficheiro, além dos cabeçalhos?",invalidCsv:"Ficheiro não pode ser processado. É um CSV válido?",invalidJson:"Ficheiro não pode ser processado. É um Json válido?",jsonNotArray:"Ficheiro json importado tem que conter um array. Interrompendo."},pagination:{aria:{pageToFirst:"Primeira página",pageBack:"Página anterior",pageSelected:"Página Selecionada",pageForward:"Próxima",pageToLast:"Anterior"},sizes:"itens por página",totalItems:"itens",through:"a",of:"de"},grouping:{group:"Agrupar",ungroup:"Desagrupar",aggregate_count:"Agr: Contar",aggregate_sum:"Agr: Soma",aggregate_max:"Agr: Max",aggregate_min:"Agr: Min",aggregate_avg:"Agr: Med",aggregate_remove:"Agr: Remover"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ro",{headerCell:{aria:{defaultFilterLabel:"Filtru pentru coloana",removeFilter:"Sterge filtru",columnMenuButtonLabel:"Column Menu"},priority:"Prioritate:",filterLabel:"Filtru pentru coloana:"},aggregate:{label:"Elemente"},groupPanel:{description:"Trage un cap de coloana aici pentru a grupa elementele dupa coloana respectiva"},search:{placeholder:"Cauta...",showingItems:"Arata elementele:",selectedItems:"Elementele selectate:",totalItems:"Total elemente:",size:"Marime pagina:",first:"Prima pagina",next:"Pagina urmatoare",previous:"Pagina anterioara",last:"Ultima pagina"},menu:{text:"Alege coloane:"},sort:{ascending:"Ordoneaza crescator",descending:"Ordoneaza descrescator",none:"Fara ordonare",remove:"Sterge ordonarea"},column:{hide:"Ascunde coloana"},aggregation:{count:"total linii: ",sum:"total: ",avg:"medie: ",min:"min: ",max:"max: "},pinning:{pinLeft:"Pin la stanga",pinRight:"Pin la dreapta",unpin:"Sterge pinul"},columnMenu:{close:"Inchide"},gridMenu:{aria:{buttonLabel:"Grid Menu"},columns:"Coloane:",importerTitle:"Incarca fisier",exporterAllAsCsv:"Exporta toate datele ca csv",exporterVisibleAsCsv:"Exporta datele vizibile ca csv",exporterSelectedAsCsv:"Exporta datele selectate ca csv",exporterAllAsPdf:"Exporta toate datele ca pdf",exporterVisibleAsPdf:"Exporta datele vizibile ca pdf",exporterSelectedAsPdf:"Exporta datele selectate ca csv pdf",clearAllFilters:"Sterge toate filtrele"},importer:{noHeaders:"Numele coloanelor nu a putut fi incarcat, acest fisier are un header?",noObjects:"Datele nu au putut fi incarcate, exista date in fisier in afara numelor de coloane?",invalidCsv:"Fisierul nu a putut fi procesat, ati incarcat un CSV valid ?",invalidJson:"Fisierul nu a putut fi procesat, ati incarcat un Json valid?",jsonNotArray:"Json-ul incarcat trebuie sa contina un array, inchidere."},pagination:{aria:{pageToFirst:"Prima pagina",pageBack:"O pagina inapoi",pageSelected:"Pagina selectata",pageForward:"O pagina inainte",pageToLast:"Ultima pagina"},sizes:"Elemente per pagina",totalItems:"elemente",through:"prin",of:"of"},grouping:{group:"Grupeaza",ungroup:"Opreste gruparea",aggregate_count:"Agg: Count",aggregate_sum:"Agg: Sum",aggregate_max:"Agg: Max",aggregate_min:"Agg: Min",aggregate_avg:"Agg: Avg",aggregate_remove:"Agg: Remove"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ru",{headerCell:{aria:{defaultFilterLabel:"Фильтр столбца",removeFilter:"Удалить фильтр",columnMenuButtonLabel:"Меню столбца"},priority:"Приоритет:",filterLabel:"Фильтр столбца: "},aggregate:{label:"элементы"},groupPanel:{description:"Для группировки по столбцу перетащите сюда его название."},search:{placeholder:"Поиск...",showingItems:"Показать элементы:",selectedItems:"Выбранные элементы:",totalItems:"Всего элементов:",size:"Размер страницы:",first:"Первая страница",next:"Следующая страница",previous:"Предыдущая страница",last:"Последняя страница"},menu:{text:"Выбрать столбцы:"},sort:{ascending:"По возрастанию",descending:"По убыванию",none:"Без сортировки",remove:"Убрать сортировку"},column:{hide:"Спрятать столбец"},aggregation:{count:"всего строк: ",sum:"итого: ",avg:"среднее: ",min:"мин: ",max:"макс: "},pinning:{pinLeft:"Закрепить слева",pinRight:"Закрепить справа",unpin:"Открепить"},columnMenu:{close:"Закрыть"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Столбцы:",importerTitle:"Импортировать файл",exporterAllAsCsv:"Экспортировать всё в CSV",exporterVisibleAsCsv:"Экспортировать видимые данные в CSV",exporterSelectedAsCsv:"Экспортировать выбранные данные в CSV",exporterAllAsPdf:"Экспортировать всё в PDF",exporterVisibleAsPdf:"Экспортировать видимые данные в PDF",exporterSelectedAsPdf:"Экспортировать выбранные данные в PDF",clearAllFilters:"Очистите все фильтры"},importer:{noHeaders:"Не удалось получить названия столбцов, есть ли в файле заголовок?",noObjects:"Не удалось получить данные, есть ли в файле строки кроме заголовка?",invalidCsv:"Не удалось обработать файл, это правильный CSV-файл?",invalidJson:"Не удалось обработать файл, это правильный JSON?",jsonNotArray:"Импортируемый JSON-файл должен содержать массив, операция отменена."},pagination:{aria:{pageToFirst:"Первая страница",pageBack:"Предыдущая страница",pageSelected:"Выбранная страница",pageForward:"Следующая страница",pageToLast:"Последняя страница"},sizes:"строк на страницу",totalItems:"строк",through:"по",of:"из"},grouping:{group:"Группировать",ungroup:"Разгруппировать",aggregate_count:"Группировать: Count",aggregate_sum:"Для группы: Сумма",aggregate_max:"Для группы: Максимум",aggregate_min:"Для группы: Минимум",aggregate_avg:"Для группы: Среднее",aggregate_remove:"Для группы: Пусто"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sk",{aggregate:{label:"items"},groupPanel:{description:"Pretiahni sem názov stĺpca pre zoskupenie podľa toho stĺpca."},search:{placeholder:"Hľadaj...",showingItems:"Zobrazujem položky:",selectedItems:"Vybraté položky:",totalItems:"Počet položiek:",size:"Počet:",first:"Prvá strana",next:"Ďalšia strana",previous:"Predchádzajúca strana",last:"Posledná strana"},menu:{text:"Vyberte stĺpce:"},sort:{ascending:"Zotriediť vzostupne",descending:"Zotriediť zostupne",remove:"Vymazať triedenie"},aggregation:{count:"total rows: ",sum:"total: ",avg:"avg: ",min:"min: ",max:"max: "},gridMenu:{columns:"Columns:",importerTitle:"Import file",exporterAllAsCsv:"Export all data as csv",exporterVisibleAsCsv:"Export visible data as csv",exporterSelectedAsCsv:"Export selected data as csv",exporterAllAsPdf:"Export all data as pdf",exporterVisibleAsPdf:"Export visible data as pdf",exporterSelectedAsPdf:"Export selected data as pdf",exporterAllAsExcel:"Export all data as excel",exporterVisibleAsExcel:"Export visible data as excel",exporterSelectedAsExcel:"Export selected data as excel",clearAllFilters:"Clear all filters"},importer:{noHeaders:"Column names were unable to be derived, does the file have a header?",noObjects:"Objects were not able to be derived, was there data in the file other than headers?",invalidCsv:"File was unable to be processed, is it valid CSV?",invalidJson:"File was unable to be processed, is it valid Json?",jsonNotArray:"Imported json file must contain an array, aborting."}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("sv",{aggregate:{label:"Artiklar"},groupPanel:{description:"Dra en kolumnrubrik hit och släpp den för att gruppera efter den kolumnen."},search:{placeholder:"Sök...",showingItems:"Visar artiklar:",selectedItems:"Valda artiklar:",totalItems:"Antal artiklar:",size:"Sidstorlek:",first:"Första sidan",next:"Nästa sida",previous:"Föregående sida",last:"Sista sidan"},menu:{text:"Välj kolumner:"},sort:{ascending:"Sortera stigande",descending:"Sortera fallande",remove:"Inaktivera sortering"},column:{hide:"Göm kolumn"},aggregation:{count:"Antal rader: ",sum:"Summa: ",avg:"Genomsnitt: ",min:"Min: ",max:"Max: "},pinning:{pinLeft:"Fäst vänster",pinRight:"Fäst höger",unpin:"Lösgör"},gridMenu:{columns:"Kolumner:",importerTitle:"Importera fil",exporterAllAsCsv:"Exportera all data som CSV",exporterVisibleAsCsv:"Exportera synlig data som CSV",exporterSelectedAsCsv:"Exportera markerad data som CSV",exporterAllAsPdf:"Exportera all data som PDF",exporterVisibleAsPdf:"Exportera synlig data som PDF",exporterSelectedAsPdf:"Exportera markerad data som PDF",clearAllFilters:"Rengör alla filter"},importer:{noHeaders:"Kolumnnamn kunde inte härledas. Har filen ett sidhuvud?",noObjects:"Objekt kunde inte härledas. Har filen data undantaget sidhuvud?",invalidCsv:"Filen kunde inte behandlas, är den en giltig CSV?",invalidJson:"Filen kunde inte behandlas, är den en giltig JSON?",jsonNotArray:"Importerad JSON-fil måste innehålla ett fält. Import avbruten."},pagination:{sizes:"Artiklar per sida",totalItems:"Artiklar"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ta",{aggregate:{label:"உருப்படிகள்"},groupPanel:{description:"ஒரு பத்தியை குழுவாக அமைக்க அப்பத்தியின் தலைப்பை இங்கே  இழுத்து வரவும் "},search:{placeholder:"தேடல் ...",showingItems:"உருப்படிகளை காண்பித்தல்:",selectedItems:"தேர்ந்தெடுக்கப்பட்ட  உருப்படிகள்:",totalItems:"மொத்த உருப்படிகள்:",size:"பக்க அளவு: ",first:"முதல் பக்கம்",next:"அடுத்த பக்கம்",previous:"முந்தைய பக்கம் ",last:"இறுதி பக்கம்"},menu:{text:"பத்திகளை தேர்ந்தெடு:"},sort:{ascending:"மேலிருந்து கீழாக",descending:"கீழிருந்து மேலாக",remove:"வரிசையை நீக்கு"},column:{hide:"பத்தியை மறைத்து வை "},aggregation:{count:"மொத்த வரிகள்:",sum:"மொத்தம்: ",avg:"சராசரி: ",min:"குறைந்தபட்ச: ",max:"அதிகபட்ச: "},pinning:{pinLeft:"இடதுபுறமாக தைக்க ",pinRight:"வலதுபுறமாக தைக்க",unpin:"பிரி"},gridMenu:{columns:"பத்திகள்:",importerTitle:"கோப்பு : படித்தல்",exporterAllAsCsv:"எல்லா தரவுகளையும் கோப்பாக்கு: csv",exporterVisibleAsCsv:"இருக்கும் தரவுகளை கோப்பாக்கு: csv",exporterSelectedAsCsv:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: csv",exporterAllAsPdf:"எல்லா தரவுகளையும் கோப்பாக்கு: pdf",exporterVisibleAsPdf:"இருக்கும் தரவுகளை கோப்பாக்கு: pdf",exporterSelectedAsPdf:"தேர்ந்தெடுத்த தரவுகளை கோப்பாக்கு: pdf",clearAllFilters:"Clear all filters"},importer:{noHeaders:"பத்தியின் தலைப்புகளை பெற இயலவில்லை, கோப்பிற்கு தலைப்பு உள்ளதா?",noObjects:"இலக்குகளை உருவாக்க முடியவில்லை, கோப்பில் தலைப்புகளை தவிர தரவு ஏதேனும் உள்ளதா? ",invalidCsv:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - csv",invalidJson:"சரிவர நடைமுறை படுத்த இயலவில்லை, கோப்பு சரிதானா? - json",jsonNotArray:"படித்த கோப்பில் வரிசைகள் உள்ளது, நடைமுறை ரத்து செய் : json"},pagination:{sizes:"உருப்படிகள் / பக்கம்",totalItems:"உருப்படிகள் "},grouping:{group:"குழு",ungroup:"பிரி",aggregate_count:"மதிப்பீட்டு : எண்ணு",aggregate_sum:"மதிப்பீட்டு : கூட்டல்",aggregate_max:"மதிப்பீட்டு : அதிகபட்சம்",aggregate_min:"மதிப்பீட்டு : குறைந்தபட்சம்",aggregate_avg:"மதிப்பீட்டு : சராசரி",aggregate_remove:"மதிப்பீட்டு : நீக்கு"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("tr",{headerCell:{aria:{defaultFilterLabel:"Sütun için filtre",removeFilter:"Filtreyi Kaldır",columnMenuButtonLabel:"Sütun Menüsü"},priority:"Öncelik:",filterLabel:"Sütun için filtre: "},aggregate:{label:"kayıtlar"},groupPanel:{description:"Sütuna göre gruplamak için sütun başlığını buraya sürükleyin ve bırakın."},search:{placeholder:"Arama...",showingItems:"Gösterilen Kayıt:",selectedItems:"Seçili Kayıt:",totalItems:"Toplam Kayıt:",size:"Sayfa Boyutu:",first:"İlk Sayfa",next:"Sonraki Sayfa",previous:"Önceki Sayfa",last:"Son Sayfa"},menu:{text:"Sütunları Seç:"},sort:{ascending:"Artan Sırada Sırala",descending:"Azalan Sırada Sırala",none:"Sıralama Yapma",remove:"Sıralamayı Kaldır"},column:{hide:"Sütunu Gizle"},aggregation:{count:"toplam satır: ",sum:"toplam: ",avg:"ort: ",min:"min: ",max:"maks: "},pinning:{pinLeft:"Sola Sabitle",pinRight:"Sağa Sabitle",unpin:"Sabitlemeyi Kaldır"},columnMenu:{close:"Kapat"},gridMenu:{aria:{buttonLabel:"Tablo Menü"},columns:"Sütunlar:",importerTitle:"Dosya içeri aktar",exporterAllAsCsv:"Bütün veriyi CSV olarak dışarı aktar",exporterVisibleAsCsv:"Görünen veriyi CSV olarak dışarı aktar",exporterSelectedAsCsv:"Seçili veriyi CSV olarak dışarı aktar",exporterAllAsPdf:"Bütün veriyi PDF olarak dışarı aktar",exporterVisibleAsPdf:"Görünen veriyi PDF olarak dışarı aktar",exporterSelectedAsPdf:"Seçili veriyi PDF olarak dışarı aktar",clearAllFilters:"Bütün filtreleri kaldır"},importer:{noHeaders:"Sütun isimleri üretilemiyor, dosyanın bir başlığı var mı?",noObjects:"Nesneler üretilemiyor, dosyada başlıktan başka bir veri var mı?",invalidCsv:"Dosya işlenemedi, geçerli bir CSV dosyası mı?",invalidJson:"Dosya işlenemedi, geçerli bir Json dosyası mı?",jsonNotArray:"Alınan Json dosyasında bir dizi bulunmalıdır, işlem iptal ediliyor."},pagination:{aria:{pageToFirst:"İlk sayfaya",pageBack:"Geri git",pageSelected:"Seçili sayfa",pageForward:"İleri git",pageToLast:"Sona git"},sizes:"Sayfadaki nesne sayısı",totalItems:"kayıtlar",through:"",of:""},grouping:{group:"Grupla",ungroup:"Gruplama",aggregate_count:"Yekun: Sayı",aggregate_sum:"Yekun: Toplam",aggregate_max:"Yekun: Maks",aggregate_min:"Yekun: Min",aggregate_avg:"Yekun: Ort",aggregate_remove:"Yekun: Sil"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("ua",{headerCell:{aria:{defaultFilterLabel:"Фільтр стовпчика",removeFilter:"Видалити фільтр",columnMenuButtonLabel:"Меню ствпчика"},priority:"Пріоритет:",filterLabel:"Фільтр стовпчика: "},aggregate:{label:"елементи"},groupPanel:{description:"Для групування за стовпчиком перетягніть сюди його назву."},search:{placeholder:"Пошук...",showingItems:"Показати елементи:",selectedItems:"Обрані елементи:",totalItems:"Усього елементів:",size:"Розмір сторінки:",first:"Перша сторінка",next:"Наступна сторінка",previous:"Попередня сторінка",last:"Остання сторінка"},menu:{text:"Обрати ствпчики:"},sort:{ascending:"За зростанням",descending:"За спаданням",none:"Без сортування",remove:"Прибрати сортування"},column:{hide:"Приховати стовпчик"},aggregation:{count:"усього рядків: ",sum:"ітого: ",avg:"середнє: ",min:"мін: ",max:"макс: "},pinning:{pinLeft:"Закріпити ліворуч",pinRight:"Закріпити праворуч",unpin:"Відкріпити"},columnMenu:{close:"Закрити"},gridMenu:{aria:{buttonLabel:"Меню"},columns:"Стовпчики:",importerTitle:"Імпортувати файл",exporterAllAsCsv:"Експортувати все в CSV",exporterVisibleAsCsv:"Експортувати видимі дані в CSV",exporterSelectedAsCsv:"Експортувати обрані дані в CSV",exporterAllAsPdf:"Експортувати все в PDF",exporterVisibleAsPdf:"Експортувати видимі дані в PDF",exporterSelectedAsPdf:"Експортувати обрані дані в PDF",clearAllFilters:"Очистити всі фільтри"},importer:{noHeaders:"Не вдалося отримати назви стовпчиків, чи є в файлі заголовок?",noObjects:"Не вдалося отримати дані, чи є в файлі рядки окрім заголовка?",invalidCsv:"Не вдалося обробити файл, чи це коректний CSV-файл?",invalidJson:"Не вдалося обробити файл, чи це коректний JSON?",jsonNotArray:"JSON-файл що імпортується повинен містити масив, операцію скасовано."},pagination:{aria:{pageToFirst:"Перша сторінка",pageBack:"Попередня сторінка",pageSelected:"Обрана сторінка",pageForward:"Наступна сторінка",pageToLast:"Остання сторінка"},sizes:"рядків на сторінку",totalItems:"рядків",through:"по",of:"з"},grouping:{group:"Групувати",ungroup:"Розгрупувати",aggregate_count:"Групувати: Кількість",aggregate_sum:"Для групи: Сума",aggregate_max:"Для групи: Максимум",aggregate_min:"Для групи: Мінімум",aggregate_avg:"Для групи: Серднє",aggregate_remove:"Для групи: Пусто"}}),e}])}])}(),function(){var e=["uiT","uiTranslate"],t=["t","uiTranslate"],n=angular.module("ui.grid.i18n");n.constant("i18nConstants",{MISSING:"[MISSING]",UPDATE_EVENT:"$uiI18n",LOCALE_DIRECTIVE_ALIAS:"uiI18n",DEFAULT_LANG:"en"}),n.service("i18nService",["$log","i18nConstants","$rootScope",function(e,t,n){var r={_langs:{},current:null,get:function(e){return this._langs[e.toLowerCase()]},add:function(e,t){var n=e.toLowerCase();this._langs[n]||(this._langs[n]={}),angular.extend(this._langs[n],t)},getAllLangs:function(){var e=[];if(!this._langs)return e;for(var t in this._langs)e.push(t);return e},setCurrent:function(e){this.current=e.toLowerCase()},getCurrentLang:function(){return this.current}},i={add:function(e,t){"object"==typeof e?angular.forEach(e,function(e){e&&r.add(e,t)}):r.add(e,t)},getAllLangs:function(){return r.getAllLangs()},get:function(e){var t=e||i.getCurrentLang();return r.get(t)},getSafeText:function(e,n){var o=n||i.getCurrentLang(),a=r.get(o);if(!a)return t.MISSING;for(var s=e.split("."),l=a,u=0;u<s.length;++u){if(void 0===l[s[u]]||null===l[s[u]])return t.MISSING;l=l[s[u]]}return l},setCurrentLang:function(e){e&&(r.setCurrent(e),n.$broadcast(t.UPDATE_EVENT))},getCurrentLang:function(){var e=r.getCurrentLang();return e||(e=t.DEFAULT_LANG,r.setCurrent(e)),e}};return i}]);var r=function(e,t){return{compile:function(){return{pre:function(n,r,i){var o=t.LOCALE_DIRECTIVE_ALIAS,a=n.$eval(i[o]);a?n.$watch(i[o],function(){e.setCurrentLang(a)}):i.$$observers&&i.$observe(o,function(){e.setCurrentLang(i[o]||t.DEFAULT_LANG)})}}}}};n.directive("uiI18n",["i18nService","i18nConstants",r]);var i=function(t,n,r){return{restrict:"EA",compile:function(){return{pre:function(i,o,a){var s,l=e[0],u=e[1],c=a[l]||a[u]||o.html(),d=r.MISSING+c;if(a.$$observers){var f=a[l]?l:u;s=a.$observe(f,function(e){e&&o.html(t(e)(n.getCurrentLang())||d)})}var p=t(c),h=i.$on(r.UPDATE_EVENT,function(e){s?s(a[l]||a[u]):o.html(p(n.get())||d)});i.$on("$destroy",h),o.html(p(n.get())||d)}}}}};angular.forEach(e,function(e){n.directive(e,["$parse","i18nService","i18nConstants",i])});var o=function(e,t,n){return function(r){return e(r)(t.get())||n.MISSING+r}};angular.forEach(t,function(e){n.filter(e,["$parse","i18nService","i18nConstants",o])})}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-cn",{headerCell:{aria:{defaultFilterLabel:"列过滤器",removeFilter:"移除过滤器",columnMenuButtonLabel:"列菜单"},priority:"优先级:",filterLabel:"列过滤器: "},aggregate:{label:"行"},groupPanel:{description:"拖曳表头到此处进行分组"},search:{placeholder:"查找",showingItems:"已显示行数：",selectedItems:"已选择行数：",totalItems:"总行数：",size:"每页显示行数：",first:"首页",next:"下一页",previous:"上一页",last:"末页"},menu:{text:"选择列："},sort:{ascending:"升序",descending:"降序",none:"无序",remove:"取消排序"},column:{hide:"隐藏列"},aggregation:{count:"计数：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左侧固定",pinRight:"右侧固定",unpin:"取消固定"},columnMenu:{close:"关闭"},gridMenu:{aria:{buttonLabel:"表格菜单"},columns:"列：",importerTitle:"导入文件",exporterAllAsCsv:"导出全部数据到CSV",exporterVisibleAsCsv:"导出可见数据到CSV",exporterSelectedAsCsv:"导出已选数据到CSV",exporterAllAsPdf:"导出全部数据到PDF",exporterVisibleAsPdf:"导出可见数据到PDF",exporterSelectedAsPdf:"导出已选数据到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"无法获取列名，确定文件包含表头？",noObjects:"无法获取数据，确定文件包含数据？",invalidCsv:"无法处理文件，确定是合法的CSV文件？",invalidJson:"无法处理文件，确定是合法的JSON文件？",jsonNotArray:"导入的文件不是JSON数组！"},pagination:{aria:{pageToFirst:"第一页",pageBack:"上一页",pageSelected:"当前页",pageForward:"下一页",pageToLast:"最后一页"},sizes:"行每页",totalItems:"行",through:"至",of:"共"},grouping:{group:"分组",ungroup:"取消分组",aggregate_count:"合计: 计数",aggregate_sum:"合计: 求和",aggregate_max:"合计: 最大",aggregate_min:"合计: 最小",aggregate_avg:"合计: 平均",aggregate_remove:"合计: 移除"}}),e}])}])}(),function(){angular.module("ui.grid").config(["$provide",function(e){e.decorator("i18nService",["$delegate",function(e){return e.add("zh-tw",{aggregate:{label:"行"},groupPanel:{description:"拖曳表頭到此處進行分組"},search:{placeholder:"查找",showingItems:"已顯示行數：",selectedItems:"已選擇行數：",totalItems:"總行數：",size:"每頁顯示行數：",first:"首頁",next:"下壹頁",previous:"上壹頁",last:"末頁"},menu:{text:"選擇列："},sort:{ascending:"升序",descending:"降序",remove:"取消排序"},column:{hide:"隱藏列"},aggregation:{count:"計數：",sum:"求和：",avg:"均值：",min:"最小值：",max:"最大值："},pinning:{pinLeft:"左側固定",pinRight:"右側固定",unpin:"取消固定"},gridMenu:{columns:"列：",importerTitle:"導入文件",exporterAllAsCsv:"導出全部數據到CSV",exporterVisibleAsCsv:"導出可見數據到CSV",exporterSelectedAsCsv:"導出已選數據到CSV",exporterAllAsPdf:"導出全部數據到PDF",exporterVisibleAsPdf:"導出可見數據到PDF",exporterSelectedAsPdf:"導出已選數據到PDF",clearAllFilters:"清除所有过滤器"},importer:{noHeaders:"無法獲取列名，確定文件包含表頭？",noObjects:"無法獲取數據，確定文件包含數據？",invalidCsv:"無法處理文件，確定是合法的CSV文件？",invalidJson:"無法處理文件，確定是合法的JSON文件？",jsonNotArray:"導入的文件不是JSON數組！"},pagination:{sizes:"行每頁",totalItems:"行"}}),e}])}])}(),function(){"use strict";angular.module("ui.grid.autoResize",["ui.grid"]).directive("uiGridAutoResize",["gridUtil",function(e){return{require:"uiGrid",scope:!1,link:function(t,n,r,i){var o,a,s=e.throttle(function(){o=e.elementWidth(n)},200),l=e.throttle(function(){a=e.elementHeight(n)},200),u=e.throttle(function(e,t){i.grid.gridWidth=e,i.grid.gridHeight=t,i.grid.refresh()},300);t.$watchGroup([function(){return s(),o},function(){return l(),a}],function(e,t,n){angular.equals(e,t)||u(e[0],e[1])})}}}])}(),function(){"use strict";var e=angular.module("ui.grid.cellNav",["ui.grid"]);e.constant("uiGridCellNavConstants",{FEATURE_NAME:"gridCellNav",CELL_NAV_EVENT:"cellNav",direction:{LEFT:0,RIGHT:1,UP:2,DOWN:3,PG_UP:4,PG_DOWN:5},EVENT_TYPE:{KEYDOWN:0,CLICK:1,CLEAR:2}}),e.factory("uiGridCellNavFactory",["gridUtil","uiGridConstants","uiGridCellNavConstants","GridRowColumn","$q",function(e,t,n,r,i){var o=function(e,t,n,r){this.rows=e.visibleRowCache,this.columns=t.visibleColumnCache,this.leftColumns=n?n.visibleColumnCache:[],this.rightColumns=r?r.visibleColumnCache:[],this.bodyContainer=e};return o.prototype.getFocusableCols=function(){return this.leftColumns.concat(this.columns,this.rightColumns).filter(function(e){return e.colDef.allowCellFocus})},o.prototype.getFocusableRows=function(){return this.rows.filter(function(e){return!1!==e.allowCellFocus})},o.prototype.getNextRowCol=function(e,t,r){switch(e){case n.direction.LEFT:return this.getRowColLeft(t,r);case n.direction.RIGHT:return this.getRowColRight(t,r);case n.direction.UP:return this.getRowColUp(t,r);case n.direction.DOWN:return this.getRowColDown(t,r);case n.direction.PG_UP:return this.getRowColPageUp(t,r);case n.direction.PG_DOWN:return this.getRowColPageDown(t,r)}},o.prototype.initializeSelection=function(){var e=this.getFocusableCols(),t=this.getFocusableRows();if(0===e.length||0===t.length)return null;return new r(t[0],e[0])},o.prototype.getRowColLeft=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);-1===o&&(o=1);var s=0===o?n.length-1:o-1;return s>=o?0===a?new r(e,n[s]):new r(i[a-1],n[s]):new r(e,n[s])},o.prototype.getRowColRight=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=o===n.length-1?0:o+1;return s<=o?a===i.length-1?new r(e,n[s]):new r(i[a+1],n[s]):new r(e,n[s])},o.prototype.getRowColDown=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);return-1===o&&(o=0),a===i.length-1?new r(e,n[o]):new r(i[a+1],n[o])},o.prototype.getRowColPageDown=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=this.bodyContainer.minRowsToRender();return a>=i.length-s?new r(i[i.length-1],n[o]):new r(i[a+s],n[o])},o.prototype.getRowColUp=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);return-1===o&&(o=0),0===a?new r(e,n[o]):new r(i[a-1],n[o])},o.prototype.getRowColPageUp=function(e,t){var n=this.getFocusableCols(),i=this.getFocusableRows(),o=n.indexOf(t),a=i.indexOf(e);-1===o&&(o=0);var s=this.bodyContainer.minRowsToRender();return a-s<0?new r(i[0],n[o]):new r(i[a-s],n[o])},o}]),e.service("uiGridCellNavService",["gridUtil","uiGridConstants","uiGridCellNavConstants","$q","uiGridCellNavFactory","GridRowColumn","ScrollEvent",function(e,t,n,r,i,o,a){var s={initializeGrid:function(e){e.registerColumnBuilder(s.cellNavColumnBuilder),e.cellNav={},e.cellNav.lastRowCol=null,e.cellNav.focusedCells=[],s.defaultGridOptions(e.options);var t={events:{cellNav:{navigate:function(e,t){},viewPortKeyDown:function(e,t){},viewPortKeyPress:function(e,t){}}},methods:{cellNav:{scrollToFocus:function(t,n){return s.scrollToFocus(e,t,n)},getFocusedCell:function(){return e.cellNav.lastRowCol},getCurrentSelection:function(){return e.cellNav.focusedCells},rowColSelectIndex:function(t){for(var n=-1,r=0;r<e.cellNav.focusedCells.length;r++)if(e.cellNav.focusedCells[r].col.uid===t.col.uid&&e.cellNav.focusedCells[r].row.uid===t.row.uid){n=r;break}return n}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.modifierKeysToMultiSelectCells=!0===e.modifierKeysToMultiSelectCells,e.keyDownOverrides=e.keyDownOverrides||[]},decorateRenderContainers:function(e){var t=e.hasRightContainer()?e.renderContainers.right:null,n=e.hasLeftContainer()?e.renderContainers.left:null;null!==n&&(e.renderContainers.left.cellNav=new i(e.renderContainers.body,n,t,e.renderContainers.body)),null!==t&&(e.renderContainers.right.cellNav=new i(e.renderContainers.body,t,e.renderContainers.body,n)),e.renderContainers.body.cellNav=new i(e.renderContainers.body,e.renderContainers.body,n,t)},getDirection:function(e){return e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey?n.direction.LEFT:e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB?n.direction.RIGHT:e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey?n.direction.UP:e.keyCode===t.keymap.PG_UP?n.direction.PG_UP:e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER&&!e.ctrlKey&&!e.altKey?n.direction.DOWN:e.keyCode===t.keymap.PG_DOWN?n.direction.PG_DOWN:null},cellNavColumnBuilder:function(e,t,n){var i=[];return e.allowCellFocus=void 0===e.allowCellFocus||e.allowCellFocus,r.all(i)},scrollToFocus:function(e,t,n){var r=null,i=null;return void 0!==t&&null!==t&&(r=e.getRow(t)),void 0!==n&&null!==n&&(i=e.getColumn(n.name?n.name:n.field)),e.api.core.scrollToIfNecessary(r,i).then(function(){var t={row:r,col:i};null!==r&&null!==i&&e.cellNav.broadcastCellNav(t)})},getLeftWidth:function(e,t){var n=0;if(!t)return n;var r=e.renderContainers.body.visibleColumnCache.indexOf(t);e.renderContainers.body.visibleColumnCache.forEach(function(e,t){t<r&&(n+=e.drawnWidth)});var i=0===r?0:(r+1)/e.renderContainers.body.visibleColumnCache.length;return n+=t.drawnWidth*i}};return s}]),e.directive("uiGridCellnav",["gridUtil","uiGridCellNavService","uiGridCellNavConstants","uiGridConstants","GridRowColumn","$timeout","$compile","i18nService",function(e,t,n,r,i,o,a,s){return{replace:!0,priority:-150,require:"^uiGrid",scope:!1,controller:function(){},compile:function(){return{pre:function(e,o,a,s){var l=e,u=s.grid;t.initializeGrid(u),s.cellNav={},s.cellNav.makeRowCol=function(e){return e instanceof i||(e=new i(e.row,e.col)),e},s.cellNav.getActiveCell=function(){var e=o[0].getElementsByClassName("ui-grid-cell-focus");if(e.length>0)return e[0]},s.cellNav.broadcastCellNav=u.cellNav.broadcastCellNav=function(e,t,r){t=!(void 0===t||!t),e=s.cellNav.makeRowCol(e),s.cellNav.broadcastFocus(e,t,r),l.$broadcast(n.CELL_NAV_EVENT,e,t,r)},s.cellNav.clearFocus=u.cellNav.clearFocus=function(){u.cellNav.focusedCells=[],l.$broadcast(n.CELL_NAV_EVENT)},s.cellNav.broadcastFocus=function(e,t,n){t=!(void 0===t||!t);var r=(e=s.cellNav.makeRowCol(e)).row,o=e.col,a=s.grid.api.cellNav.rowColSelectIndex(e);if(null===u.cellNav.lastRowCol||-1===a||u.cellNav.lastRowCol.col===o&&u.cellNav.lastRowCol.row===r){var l=new i(r,o);(null===u.cellNav.lastRowCol||u.cellNav.lastRowCol.row!==l.row||u.cellNav.lastRowCol.col!==l.col||u.options.enableCellEditOnFocus)&&(u.api.cellNav.raise.navigate(l,u.cellNav.lastRowCol,n),u.cellNav.lastRowCol=l),s.grid.options.modifierKeysToMultiSelectCells&&t?u.cellNav.focusedCells.push(e):u.cellNav.focusedCells=[e]}else u.options.modifierKeysToMultiSelectCells&&t&&a>=0&&u.cellNav.focusedCells.splice(a,1)},s.cellNav.handleKeyDown=function(e){var i=t.getDirection(e);if(null===i)return null;var o="body";e.uiGridTargetRenderContainerId&&(o=e.uiGridTargetRenderContainerId);var a=s.grid.api.cellNav.getFocusedCell();if(a){var l=s.grid.renderContainers[o].cellNav.getNextRowCol(i,a.row,a.col),c=s.grid.renderContainers[o].cellNav.getFocusableCols(),d=s.grid.api.cellNav.rowColSelectIndex(l);return i===n.direction.LEFT&&l.col===c[c.length-1]&&l.row===a.row&&e.keyCode===r.keymap.TAB&&e.shiftKey?(u.cellNav.focusedCells.splice(d,1),s.cellNav.clearFocus(),!0):i!==n.direction.RIGHT||l.col!==c[0]||l.row!==a.row||e.keyCode!==r.keymap.TAB||e.shiftKey?(u.scrollToIfNecessary(l.row,l.col).then(function(){s.cellNav.broadcastCellNav(l,null,e)}),e.stopPropagation(),e.preventDefault(),!1):(u.cellNav.focusedCells.splice(d,1),s.cellNav.clearFocus(),!0)}}},post:function(e,t,r,i){var o=i.grid,l=!0;try{angular.module("ngAria")}catch(e){l=!1}l&&function(){var r='<div id="'+o.id+'-aria-speakable" class="ui-grid-a11y-ariascreenreader-speakable ui-grid-offscreen" aria-live="assertive" role="alert" aria-atomic="true" aria-hidden="false" aria-relevant="additions" >&nbsp;</div>',i=a(r)(e);t.prepend(i),e.$on(n.CELL_NAV_EVENT,function(e,t,n,r){if(!r||"focus"!==r.type){for(var a=[],l=o.api.cellNav.getCurrentSelection(),u=0;u<l.length;u++){var c=function(e){return"selectionRowHeaderCol"===e.col.field?e.row.isSelected?s.getSafeText("search.aria.selected"):s.getSafeText("search.aria.notSelected"):o.getCellDisplayValue(e.row,e.col)}(l[u])+function(e){return", "+s.getSafeText("headerCell.aria.column")+" "+e.displayName}(l[u].col);a.push(c)}!function(e){e!==i.text().trim()&&(i[0].style.clip="rect(0px,0px,0px,0px)",i[0].innerHTML="",i[0].style.visibility="hidden",i[0].style.visibility="visible",""!==e&&(i[0].style.clip="auto",i[0].appendChild(document.createTextNode(e+" ")),i[0].style.visibility="hidden",i[0].style.visibility="visible"))}(a.toString())}})}()}}}}}]),e.directive("uiGridRenderContainer",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","$compile","uiGridCellNavConstants",function(e,t,n,r,i,o,a){return{replace:!0,priority:-99999,require:["^uiGrid","uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{post:function(t,r,s,l){var u=l[0],c=l[1],d=l[2];if(u.grid.api.cellNav){var f=c.containerId,p=u.grid;if(i.decorateRenderContainers(p),"body"===f){u.grid.options.modifierKeysToMultiSelectCells?r.attr("aria-multiselectable",!0):r.attr("aria-multiselectable",!1);var h=o('<div class="ui-grid-focuser" role="region" aria-live="assertive" aria-atomic="false" tabindex="0" aria-controls="'+p.id+"-aria-speakable "+p.id+'-grid-container" aria-owns="'+p.id+'-grid-container"></div>')(t);r.append(h),h.on("focus",function(e){e.uiGridTargetRenderContainerId=f;var t=u.grid.api.cellNav.getFocusedCell();null===t&&(t=u.grid.renderContainers[f].cellNav.getNextRowCol(a.direction.DOWN,null,null)).row&&t.col&&u.cellNav.broadcastCellNav(t)}),d.setAriaActivedescendant=function(e){r.attr("aria-activedescendant",e)},d.removeAriaActivedescendant=function(e){r.attr("aria-activedescendant")===e&&r.attr("aria-activedescendant","")},u.focus=function(){n.focus.byElement(h[0])};var g=null;h.on("keydown",function(e){e.uiGridTargetRenderContainerId=f;var t=u.grid.api.cellNav.getFocusedCell();null===(u.grid.options.keyDownOverrides.some(function(t){return Object.keys(t).every(function(n){return t[n]===e[n]})})?null:u.cellNav.handleKeyDown(e))&&(u.grid.api.cellNav.raise.viewPortKeyDown(e,t,u.cellNav.handleKeyDown),g=t)}),h.on("keypress",function(t){g&&(e(function(){u.grid.api.cellNav.raise.viewPortKeyPress(t,g)},4),g=null)}),t.$on("$destroy",function(){h.off()})}}}}}}}]),e.directive("uiGridViewport",["$timeout","$document","gridUtil","uiGridConstants","uiGridCellNavService","uiGridCellNavConstants","$log","$compile",function(e,t,n,r,i,o,a,s){return{replace:!0,priority:-99999,require:["^uiGrid","^uiGridRenderContainer","?^uiGridCellnav"],scope:!1,compile:function(){return{pre:function(e,t,n,r){},post:function(e,t,n,r){var i=r[0],o=r[1];if(i.grid.api.cellNav&&"body"===o.containerId){var a=i.grid;a.api.core.on.scrollBegin(e,function(e){var t=i.grid.api.cellNav.getFocusedCell();null!==t&&o.colContainer.containsColumn(t.col)&&i.cellNav.clearFocus()}),a.api.core.on.scrollEnd(e,function(e){var t=i.grid.api.cellNav.getFocusedCell();null!==t&&o.colContainer.containsColumn(t.col)&&i.cellNav.broadcastCellNav(t)}),a.api.cellNav.on.navigate(e,function(){i.focus()})}}}}}}]),e.directive("uiGridCell",["$timeout","$document","uiGridCellNavService","gridUtil","uiGridCellNavConstants","uiGridConstants","GridRowColumn",function(e,t,n,r,i,o,a){return{priority:-150,restrict:"A",require:["^uiGrid","?^uiGridCellnav"],scope:!1,link:function(e,t,n,r){function s(e){e.preventDefault()}function l(){p.cellNav.focusedCells.some(function(t,n){return t.row===e.row&&t.col===e.col})?u():c()}function u(){e.focused||(t.find("div").addClass("ui-grid-cell-focus"),t.attr("aria-selected",!0),f.setAriaActivedescendant(t.attr("id")),e.focused=!0)}function c(){e.focused&&(t.find("div").removeClass("ui-grid-cell-focus"),t.attr("aria-selected",!1),f.removeAriaActivedescendant(t.attr("id")),e.focused=!1)}var d=r[0],f=r[1];if(d.grid.api.cellNav&&e.col.colDef.allowCellFocus){var p=d.grid;e.focused=!1,t.attr("tabindex",-1),t.find("div").on("click",function(t){d.cellNav.broadcastCellNav(new a(e.row,e.col),t.ctrlKey||t.metaKey,t),t.stopPropagation(),e.$apply()}),t.on("mousedown",s),d.grid.api.edit&&(d.grid.api.edit.on.beginCellEdit(e,function(){t.off("mousedown",s)}),d.grid.api.edit.on.afterCellEdit(e,function(){t.on("mousedown",s)}),d.grid.api.edit.on.cancelCellEdit(e,function(){t.on("mousedown",s)})),l(),t.on("focus",function(t){d.cellNav.broadcastCellNav(new a(e.row,e.col),!1,t),t.stopPropagation(),e.$apply()}),e.$on(i.CELL_NAV_EVENT,l);var h=d.grid.registerDataChangeCallback(function(t){c(),e.$applyAsync(l)},[o.dataChange.ROW]);e.$on("$destroy",function(){h(),t.find("div").off(),t.off()})}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.edit",["ui.grid"]);e.constant("uiGridEditConstants",{EDITABLE_CELL_TEMPLATE:/EDITABLE_CELL_TEMPLATE/g,EDITABLE_CELL_DIRECTIVE:/editable_cell_directive/g,events:{BEGIN_CELL_EDIT:"uiGridEventBeginCellEdit",END_CELL_EDIT:"uiGridEventEndCellEdit",CANCEL_CELL_EDIT:"uiGridEventCancelCellEdit"}}),e.service("uiGridEditService",["$q","uiGridConstants","gridUtil",function(e,t,n){var r={initializeGrid:function(e){r.defaultGridOptions(e.options),e.registerColumnBuilder(r.editColumnBuilder),e.edit={};var t={events:{edit:{afterCellEdit:function(e,t,n,r){},beginCellEdit:function(e,t,n){},cancelCellEdit:function(e,t){}}},methods:{edit:{}}};e.api.registerEventsFromObject(t.events)},defaultGridOptions:function(e){e.cellEditableCondition=void 0===e.cellEditableCondition||e.cellEditableCondition,e.enableCellEditOnFocus=void 0!==e.enableCellEditOnFocus&&e.enableCellEditOnFocus},editColumnBuilder:function(t,r,i){var o=[];return t.enableCellEdit=void 0===t.enableCellEdit?void 0===i.enableCellEdit?"object"!==t.type:i.enableCellEdit:t.enableCellEdit,t.cellEditableCondition=void 0===t.cellEditableCondition?i.cellEditableCondition:t.cellEditableCondition,t.enableCellEdit&&(t.editableCellTemplate=t.editableCellTemplate||i.editableCellTemplate||"ui-grid/cellEditor",o.push(n.getTemplate(t.editableCellTemplate).then(function(e){r.editableCellTemplate=e},function(e){throw new Error("Couldn't fetch/use colDef.editableCellTemplate '"+t.editableCellTemplate+"'")}))),t.enableCellEditOnFocus=void 0===t.enableCellEditOnFocus?i.enableCellEditOnFocus:t.enableCellEditOnFocus,e.all(o)},isStartEditKey:function(e){return!(e.metaKey||e.keyCode===t.keymap.ESC||e.keyCode===t.keymap.SHIFT||e.keyCode===t.keymap.CTRL||e.keyCode===t.keymap.ALT||e.keyCode===t.keymap.WIN||e.keyCode===t.keymap.CAPSLOCK||e.keyCode===t.keymap.LEFT||e.keyCode===t.keymap.TAB&&e.shiftKey||e.keyCode===t.keymap.RIGHT||e.keyCode===t.keymap.TAB||e.keyCode===t.keymap.UP||e.keyCode===t.keymap.ENTER&&e.shiftKey||e.keyCode===t.keymap.DOWN||e.keyCode===t.keymap.ENTER)}};return r}]),e.directive("uiGridEdit",["gridUtil","uiGridEditService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){t.initializeGrid(i.grid)},post:function(e,t,n,r){}}}}}]),e.directive("uiGridViewport",["uiGridEditConstants",function(e){return{replace:!0,priority:-99998,require:["^uiGrid","^uiGridRenderContainer"],scope:!1,compile:function(){return{post:function(t,n,r,i){var o=i[0];o.grid.api.edit&&o.grid.api.cellNav&&"body"===i[1].containerId&&(t.$on(e.events.CANCEL_CELL_EDIT,function(){o.focus()}),t.$on(e.events.END_CELL_EDIT,function(){o.focus()}))}}}}}]),e.directive("uiGridCell",["$compile","$injector","$timeout","uiGridConstants","uiGridEditConstants","gridUtil","$parse","uiGridEditService","$rootScope","$q",function(e,t,n,r,i,o,a,s,l,u){var c=500;if(t.has("uiGridCellNavService"))t.get("uiGridCellNavService");return{priority:-100,restrict:"A",scope:!1,require:"?^uiGrid",link:function(t,d,f,p){function h(){d.on("dblclick",x),d.on("touchstart",g),p&&p.grid.api.cellNav&&(A=p.grid.api.cellNav.on.viewPortKeyDown(t,function(e,n){null!==n&&(n.row!==t.row||n.col!==t.col||t.col.colDef.enableCellEditOnFocus||y(e))}),L=p.grid.api.cellNav.on.navigate(t,function(e,r,i){t.col.colDef.enableCellEditOnFocus&&(e.row!==t.row||e.col!==t.col||i&&(!i||"click"!==i.type&&"keydown"!==i.type)||n(function(){x(i)}))})),t.beginEditEventsWired=!0}function g(e){void 0!==e.originalEvent&&void 0!==e.originalEvent&&(e=e.originalEvent),d.on("touchend",m),(T=n(function(){},c)).then(function(){setTimeout(x,0),d.off("touchend",m)})}function m(e){n.cancel(T),d.off("touchend",m)}function v(){d.off("dblclick",x),d.off("keydown",y),d.off("touchstart",g),L(),A(),t.beginEditEventsWired=!1}function y(e){s.isStartEditKey(e)&&x(e)}function b(e,n,r){return!n.isSaving&&(angular.isFunction(e.colDef.cellEditableCondition)?e.colDef.cellEditableCondition(t,r):e.colDef.cellEditableCondition)}function x(e){t.grid.api.core.scrollToIfNecessary(t.row,t.col).then(function(){w(e)})}function w(s){if(!E&&b(t.col,t.row,s)){var c=t.row.getQualifiedColField(t.col);t.col.colDef.editModelField&&(c=o.preEval("row.entity."+t.col.colDef.editModelField)),M=a(c),$=M(t),S=t.col.editableCellTemplate,S=S.replace(r.MODEL_COL_FIELD,c),S=S.replace(r.COL_FIELD,"grid.getCellValue(row, col)");var f=t.col.colDef.editDropdownFilter?"|"+t.col.colDef.editDropdownFilter:"";S=S.replace(r.CUSTOM_FILTERS,f);var p="text";switch(t.col.colDef.type){case"boolean":p="checkbox";break;case"number":p="number";break;case"date":p="date"}S=S.replace("INPUT_TYPE",p);var h=t.col.colDef.editDropdownOptionsFunction;if(h)u.when(h(t.row.entity,t.col.colDef)).then(function(e){t.editDropdownOptionsArray=e});else{var g=t.col.colDef.editDropdownRowEntityOptionsArrayPath;t.editDropdownOptionsArray=g?k(t.row.entity,g):t.col.colDef.editDropdownOptionsArray}t.editDropdownIdLabel=t.col.colDef.editDropdownIdLabel?t.col.colDef.editDropdownIdLabel:"id",t.editDropdownValueLabel=t.col.colDef.editDropdownValueLabel?t.col.colDef.editDropdownValueLabel:"value";var m=function(){E=!0,v();var n=angular.element(S);d.append(n),D=t.$new(),e(n)(D),angular.element(d.children()[0]).addClass("ui-grid-cell-contents-hidden")};l.$$phase?m():t.$apply(m);var y=t.col.grid.api.core.on.scrollBegin(t,function(){t.grid.disableScrolling||(_(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,M(t),$),y(),x(),w())}),x=t.$on(i.events.END_CELL_EDIT,function(){_(),t.grid.api.edit.raise.afterCellEdit(t.row.entity,t.col.colDef,M(t),$),x(),y(),w()}),w=t.$on(i.events.CANCEL_CELL_EDIT,function(){C(),w(),y(),x()});t.$broadcast(i.events.BEGIN_CELL_EDIT,s),n(function(){t.grid.api.edit.raise.beginCellEdit(t.row.entity,t.col.colDef,s)})}}function _(){if(t.grid.disableScrolling=!1,E){p&&p.grid.api.cellNav&&p.focus();var e=angular.element(d.children()[0]);D.$destroy();for(var n=d.children(),i=1;i<n.length;i++)angular.element(n[i]).remove();e.removeClass("ui-grid-cell-contents-hidden"),E=!1,h(),t.grid.api.core.notifyDataChange(r.dataChange.EDIT)}}function C(){t.grid.disableScrolling=!1,E&&(M.assign(t,$),t.$apply(),t.grid.api.edit.raise.cancelCellEdit(t.row.entity,t.col.colDef),_())}function k(e,t){for(var n=(t=(t=t.replace(/\[(\w+)\]/g,".$1")).replace(/^\./,"")).split(".");n.length;){var r=n.shift();if(!(r in e))return;e=e[r]}return e}var S,$,M,T,D,E=!1;if(t.col.colDef.enableCellEdit){var L=function(){},A=function(){},R=function(){t.col.colDef.enableCellEdit&&!1!==t.row.enableCellEdit?t.beginEditEventsWired||h():t.beginEditEventsWired&&v()};R();var P=t.$watch("row",function(e,t){e!==t&&R()});t.$on("$destroy",function(){P(),d.off()})}}}}]),e.directive("uiGridEditor",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout","uiGridEditService",function(e,t,n,r,i){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer","ngModel"],compile:function(){return{pre:function(e,t,n){},post:function(e,o,a,s){var l,u,c;s[0]&&(l=s[0]),s[1]&&(u=s[1]),s[2]&&(c=s[2]),e.$on(n.events.BEGIN_CELL_EDIT,function(t,n){if(r(function(){if(o[0].focus(),!o[0].select||!e.col.colDef.enableCellEditOnFocus&&l&&l.grid.api.cellNav)try{o[0].setSelectionRange(o[0].value.length,o[0].value.length)}catch(e){}else o[0].select()}),l&&l.grid.api.cellNav)var a=l.grid.api.cellNav.on.viewPortKeyPress(e,function(e,t){if(i.isStartEditKey(e)){var n="number"==typeof e.which?e.which:e.keyCode;n>0&&(c.$setViewValue(String.fromCharCode(n),e),c.$render())}a()});o.on("mousedown",function(t){"checkbox"===o[0].type&&(o.off("blur",e.stopEdit),r(function(){o[0].focus(),o.on("blur",e.stopEdit)}))}),o.on("blur",e.stopEdit)}),e.deepEdit=!1,e.stopEdit=function(t){e.inputForm&&!e.inputForm.$valid?(t.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)):e.$emit(n.events.END_CELL_EDIT),e.deepEdit=!1},o.on("click",function(t){"checkbox"!==o[0].type&&(e.deepEdit=!0,e.$applyAsync(function(){e.grid.disableScrolling=!0}))}),o.on("keydown",function(r){switch(r.keyCode){case t.keymap.ESC:r.stopPropagation(),e.$emit(n.events.CANCEL_CELL_EDIT)}if(!e.deepEdit||r.keyCode!==t.keymap.LEFT&&r.keyCode!==t.keymap.RIGHT&&r.keyCode!==t.keymap.UP&&r.keyCode!==t.keymap.DOWN)if(l&&l.grid.api.cellNav)r.uiGridTargetRenderContainerId=u.containerId,null!==l.cellNav.handleKeyDown(r)&&e.stopEdit(r);else switch(r.keyCode){case t.keymap.ENTER:case t.keymap.TAB:r.stopPropagation(),r.preventDefault(),e.stopEdit(r)}else r.stopPropagation();return!0}),e.$on("$destroy",function(){o.off()})}}}}}]),e.directive("uiGridEditor",["$filter",function(e){function t(e){if(void 0===e||""===e)return null;var t=e.split("-");if(3!==t.length)return null;var n=parseInt(t[0],10),r=parseInt(t[1],10),i=parseInt(t[2],10);return r<1||n<1||i<1?null:new Date(n,r-1,i)}return{priority:-100,require:"?ngModel",link:function(n,r,i,o){2===angular.version.minor&&i.type&&"date"===i.type&&o&&(o.$formatters.push(function(t){return o.$setValidity(null,!t||!isNaN(t.getTime())),e("date")(t,"yyyy-MM-dd")}),o.$parsers.push(function(e){if(e&&e.length>0){var n=t(e);return o.$setValidity(null,n&&!isNaN(n.getTime())),n}return o.$setValidity(null,!0),null}))}}}]),e.directive("uiGridEditDropdown",["uiGridConstants","uiGridEditConstants","$timeout",function(e,t,n){return{require:["?^uiGrid","?^uiGridRenderContainer"],scope:!0,compile:function(){return{pre:function(e,t,n){},post:function(r,i,o,a){var s=a[0],l=a[1];r.$on(t.events.BEGIN_CELL_EDIT,function(){n(function(){i[0].focus()}),i[0].style.width=i[0].parentElement.offsetWidth-1+"px",i.on("blur",function(e){r.stopEdit(e)})}),r.stopEdit=function(e){r.$emit(t.events.END_CELL_EDIT)},i.on("keydown",function(n){switch(n.keyCode){case e.keymap.ESC:n.stopPropagation(),r.$emit(t.events.CANCEL_CELL_EDIT)}if(s&&s.grid.api.cellNav)n.uiGridTargetRenderContainerId=l.containerId,null!==s.cellNav.handleKeyDown(n)&&r.stopEdit(n);else switch(n.keyCode){case e.keymap.ENTER:case e.keymap.TAB:n.stopPropagation(),n.preventDefault(),r.stopEdit(n)}return!0}),r.$on("$destroy",function(){i.off()})}}}}}]),e.directive("uiGridEditFileChooser",["gridUtil","uiGridConstants","uiGridEditConstants","$timeout",function(e,t,n,r){return{scope:!0,require:["?^uiGrid","?^uiGridRenderContainer"],compile:function(){return{pre:function(e,t,n){},post:function(t,r,i,o){function a(r){var i=r.srcElement||r.target;i&&i.files&&i.files.length>0?("function"==typeof t.col.colDef.editFileChooserCallback?t.col.colDef.editFileChooserCallback(t.row,t.col,i.files):e.logError("You need to set colDef.editFileChooserCallback to use the file chooser"),i.form.reset(),t.$emit(n.events.END_CELL_EDIT)):t.$emit(n.events.CANCEL_CELL_EDIT)}r[0].addEventListener("change",a,!1),t.$on(n.events.BEGIN_CELL_EDIT,function(){r[0].focus(),r[0].select(),r.on("blur",function(e){t.$emit(n.events.END_CELL_EDIT)})}),t.$on("$destroy",function(){r.off(),r[0].removeEventListener("change",a,!1)})}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.emptyBaseLayer",["ui.grid"]);e.service("uiGridBaseLayerService",["gridUtil","$compile",function(e,t){return{initializeGrid:function(e,t){e.baseLayer={emptyRows:[]},!1!==e.options.enableEmptyGridBaseLayer&&(e.options.enableEmptyGridBaseLayer=!t)},setNumberOfEmptyRows:function(e,t){var n=t.options.rowHeight,r=Math.ceil(e/n);if(r>0){t.baseLayer.emptyRows=[];for(var i=0;i<r;i++)t.baseLayer.emptyRows.push({})}}}}]),e.directive("uiGridEmptyBaseLayer",["gridUtil","uiGridBaseLayerService","$parse",function(e,t,n){return{require:"^uiGrid",scope:!1,compile:function(e,r){return{pre:function(e,r,i,o){var a=!1===n(i.uiGridEmptyBaseLayer)(e);t.initializeGrid(o.grid,a)},post:function(e,n,r,i){function o(){var e=s.getViewportHeight();return e!==l&&(l=e,!0)}function a(e){return".grid"+i.grid.id+" .ui-grid-render-container .ui-grid-empty-base-layer-container.ui-grid-canvas { height: "+e+"px; }"}if(i.grid.options.enableEmptyGridBaseLayer){var s=i.grid.renderContainers.body,l=s.getViewportHeight();i.grid.registerStyleComputation({func:function(){return o()&&t.setNumberOfEmptyRows(l,i.grid),a(l)}})}}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){var r=n.get("ui-grid/emptyBaseLayerContainer");return e.prepend(r),{pre:function(e,t,n,r){},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.expandable",["ui.grid"]);e.service("uiGridExpandableService",["gridUtil","$compile",function(e,t){var n={initializeGrid:function(t){t.expandable={},t.expandable.expandedAll=!1,t.options.enableExpandable=!1!==t.options.enableExpandable,t.options.showExpandAllButton=!1!==t.options.showExpandAllButton,t.options.expandableRowHeight=t.options.expandableRowHeight||150,t.options.expandableRowHeaderWidth=t.options.expandableRowHeaderWidth||40,t.options.enableExpandable&&!t.options.expandableRowTemplate&&(e.logError("You have not set the expandableRowTemplate, disabling expandable module"),t.options.enableExpandable=!1);var r={events:{expandable:{rowExpandedBeforeStateChanged:function(e,t){},rowExpandedStateChanged:function(e,t){}}},methods:{expandable:{toggleRowExpansion:function(e){var r=t.getRow(e);null!==r&&n.toggleRowExpansion(t,r)},expandAllRows:function(){n.expandAllRows(t)},collapseAllRows:function(){n.collapseAllRows(t)},toggleAllRows:function(){n.toggleAllRows(t)},expandRow:function(e){var r=t.getRow(e);null===r||r.isExpanded||n.toggleRowExpansion(t,r)},collapseRow:function(e){var r=t.getRow(e);null!==r&&r.isExpanded&&n.toggleRowExpansion(t,r)},getExpandedRows:function(){return n.getExpandedRows(t).map(function(e){return e.entity})}}}};t.api.registerEventsFromObject(r.events),t.api.registerMethodsFromObject(r.methods)},toggleRowExpansion:function(e,t){e.api.expandable.raise.rowExpandedBeforeStateChanged(t),t.isExpanded=!t.isExpanded,angular.isUndefined(t.expandedRowHeight)&&(t.expandedRowHeight=e.options.expandableRowHeight),t.isExpanded?t.height=t.grid.options.rowHeight+t.expandedRowHeight:(t.height=t.grid.options.rowHeight,e.expandable.expandedAll=!1),e.api.expandable.raise.rowExpandedStateChanged(t)},expandAllRows:function(e,t){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded||t.entity.subGridOptions&&t.entity.subGridOptions.disableRowExpandable||n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.renderContainers.body.visibleRowCache.forEach(function(t){t.isExpanded&&n.toggleRowExpansion(e,t)}),e.expandable.expandedAll=!1,e.queueGridRefresh()},toggleAllRows:function(e){e.expandable.expandedAll?n.collapseAllRows(e):n.expandAllRows(e)},getExpandedRows:function(e){return e.rows.filter(function(e){return e.isExpanded})}};return n}]),e.directive("uiGridExpandable",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,r,i,o){if(e.initializeGrid(o.grid),o.grid.options.enableExpandable&&!1!==o.grid.options.enableExpandableRowHeader){var a={name:"expandableButtons",displayName:"",exporterSuppressExport:!0,enableColumnResizing:!1,enableColumnMenu:!1,width:o.grid.options.expandableRowHeaderWidth||40};a.cellTemplate=t.get("ui-grid/expandableRowHeader"),a.headerCellTemplate=t.get("ui-grid/expandableTopRowHeader"),o.grid.addRowHeaderColumn(a,-90)}},post:function(e,t,n,r){}}}}}]),e.directive("uiGrid",["uiGridExpandableService","$templateCache",function(e,t){return{replace:!0,priority:599,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,t,n,r){r.grid.api.core.on.renderingComplete(e,function(){e.row&&e.row.grid&&e.row.grid.options&&e.row.grid.options.enableExpandable&&(r.grid.parentRow=e.row)})},post:function(e,t,n,r){}}}}}]),e.directive("uiGridExpandableRow",["uiGridExpandableService","$timeout","$compile","uiGridConstants","gridUtil","$interval","$log",function(e,t,n,r,i,o,a){return{replace:!1,priority:0,scope:!1,compile:function(){return{pre:function(e,t,r,o){i.getTemplate(e.grid.options.expandableRowTemplate).then(function(r){if(e.grid.options.expandableRowScope){var i=e.grid.options.expandableRowScope;for(var o in i)i.hasOwnProperty(o)&&(e[o]=i[o])}var a=angular.element(r);t.append(a),a=n(a)(e),e.row.expandedRendered=!0})},post:function(e,t,n,r){e.$on("$destroy",function(){e.row.expandedRendered=!1})}}}}}]),e.directive("uiGridRow",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){return{pre:function(e,t,n,r){e.grid.options.enableExpandable&&(e.expandableRow={},e.expandableRow.shouldRenderExpand=function(){return"body"===e.colContainer.name&&!1!==e.grid.options.enableExpandable&&e.row.isExpanded&&(!e.grid.isScrollingVertically||e.row.expandedRendered)},e.expandableRow.shouldRenderFiller=function(){return e.row.isExpanded&&("body"!==e.colContainer.name||e.grid.isScrollingVertically&&!e.row.expandedRendered)})},post:function(e,t,n,r){}}}}}]),e.directive("uiGridViewport",["$compile","gridUtil","$templateCache",function(e,t,n){return{priority:-200,scope:!1,compile:function(e,t){var r=angular.element(e.children().children()[0]),i=n.get("ui-grid/expandableScrollFiller"),o=n.get("ui-grid/expandableRow");return r.append(o),r.append(i),{pre:function(e,t,n,r){},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.exporter",["ui.grid"]);e.constant("uiGridExporterConstants",{featureName:"exporter",ALL:"all",VISIBLE:"visible",SELECTED:"selected",CSV_CONTENT:"CSV_CONTENT",BUTTON_LABEL:"BUTTON_LABEL",FILE_NAME:"FILE_NAME"}),e.service("uiGridExporterService",["$q","uiGridExporterConstants","gridUtil","$compile","$interval","i18nService",function(e,t,n,r,i,o){var a={delay:100,initializeGrid:function(e){e.exporter={},this.defaultGridOptions(e.options);var t={events:{exporter:{}},methods:{exporter:{csvExport:function(t,n){a.csvExport(e,t,n)},pdfExport:function(t,n){a.pdfExport(e,t,n)},excelExport:function(t,n){a.excelExport(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods),e.api.core.addToGridMenu?a.addToMenu(e):i(function(){e.api.core.addToGridMenu&&a.addToMenu(e)},this.delay,1)},defaultGridOptions:function(e){e.exporterSuppressMenu=!0===e.exporterSuppressMenu,e.exporterMenuLabel=e.exporterMenuLabel?e.exporterMenuLabel:"Export",e.exporterSuppressColumns=e.exporterSuppressColumns?e.exporterSuppressColumns:[],e.exporterCsvColumnSeparator=e.exporterCsvColumnSeparator?e.exporterCsvColumnSeparator:",",e.exporterCsvFilename=e.exporterCsvFilename?e.exporterCsvFilename:"download.csv",e.exporterPdfFilename=e.exporterPdfFilename?e.exporterPdfFilename:"download.pdf",e.exporterOlderExcelCompatibility=!0===e.exporterOlderExcelCompatibility,e.exporterIsExcelCompatible=!0===e.exporterIsExcelCompatible,e.exporterMenuItemOrder=e.exporterMenuItemOrder?e.exporterMenuItemOrder:200,e.exporterPdfDefaultStyle=e.exporterPdfDefaultStyle?e.exporterPdfDefaultStyle:{fontSize:11},e.exporterPdfTableStyle=e.exporterPdfTableStyle?e.exporterPdfTableStyle:{margin:[0,5,0,15]},e.exporterPdfTableHeaderStyle=e.exporterPdfTableHeaderStyle?e.exporterPdfTableHeaderStyle:{bold:!0,fontSize:12,color:"black"},e.exporterPdfHeader=e.exporterPdfHeader?e.exporterPdfHeader:null,e.exporterPdfFooter=e.exporterPdfFooter?e.exporterPdfFooter:null,e.exporterPdfOrientation=e.exporterPdfOrientation?e.exporterPdfOrientation:"landscape",e.exporterPdfPageSize=e.exporterPdfPageSize?e.exporterPdfPageSize:"A4",e.exporterPdfMaxGridWidth=e.exporterPdfMaxGridWidth?e.exporterPdfMaxGridWidth:720,e.exporterMenuAllData=void 0===e.exporterMenuAllData||e.exporterMenuAllData,e.exporterMenuVisibleData=void 0===e.exporterMenuVisibleData||e.exporterMenuVisibleData,e.exporterMenuSelectedData=void 0===e.exporterMenuSelectedData||e.exporterMenuSelectedData,e.exporterMenuCsv=void 0===e.exporterMenuCsv||e.exporterMenuCsv,e.exporterMenuPdf=void 0===e.exporterMenuPdf||e.exporterMenuPdf,e.exporterMenuExcel=void 0===e.exporterMenuExcel||e.exporterMenuExcel,e.exporterPdfCustomFormatter=e.exporterPdfCustomFormatter&&"function"==typeof e.exporterPdfCustomFormatter?e.exporterPdfCustomFormatter:function(e){return e},e.exporterHeaderFilterUseName=!0===e.exporterHeaderFilterUseName,e.exporterFieldCallback=e.exporterFieldCallback?e.exporterFieldCallback:function(e,t,n,r){return r},e.exporterFieldFormatCallback=e.exporterFieldFormatCallback?e.exporterFieldFormatCallback:function(e,t,n,r){return null},e.exporterFieldApplyFilters=!0===e.exporterFieldApplyFilters,e.exporterAllDataFn=e.exporterAllDataFn?e.exporterAllDataFn:null,null===e.exporterAllDataFn&&e.exporterAllDataPromise&&(e.exporterAllDataFn=e.exporterAllDataPromise)},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:o.getSafeText("gridMenu.exporterAllAsCsv"),action:function(n){e.api.exporter.csvExport(t.ALL,t.ALL)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuAllData},order:e.options.exporterMenuItemOrder},{title:o.getSafeText("gridMenu.exporterVisibleAsCsv"),action:function(n){e.api.exporter.csvExport(t.VISIBLE,t.VISIBLE)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuVisibleData},order:e.options.exporterMenuItemOrder+1},{title:o.getSafeText("gridMenu.exporterSelectedAsCsv"),action:function(n){e.api.exporter.csvExport(t.SELECTED,t.VISIBLE)},shown:function(){return e.options.exporterMenuCsv&&e.options.exporterMenuSelectedData&&e.api.selection&&e.api.selection.getSelectedRows().length>0},order:e.options.exporterMenuItemOrder+2},{title:o.getSafeText("gridMenu.exporterAllAsPdf"),action:function(n){e.api.exporter.pdfExport(t.ALL,t.ALL)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuAllData},order:e.options.exporterMenuItemOrder+3},{title:o.getSafeText("gridMenu.exporterVisibleAsPdf"),action:function(n){e.api.exporter.pdfExport(t.VISIBLE,t.VISIBLE)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuVisibleData},order:e.options.exporterMenuItemOrder+4},{title:o.getSafeText("gridMenu.exporterSelectedAsPdf"),action:function(n){e.api.exporter.pdfExport(t.SELECTED,t.VISIBLE)},shown:function(){return e.options.exporterMenuPdf&&e.options.exporterMenuSelectedData&&e.api.selection&&e.api.selection.getSelectedRows().length>0},order:e.options.exporterMenuItemOrder+5},{title:o.getSafeText("gridMenu.exporterAllAsExcel"),action:function(n){e.api.exporter.excelExport(t.ALL,t.ALL)},shown:function(){return e.options.exporterMenuExcel&&e.options.exporterMenuAllData},order:e.options.exporterMenuItemOrder+6},{title:o.getSafeText("gridMenu.exporterVisibleAsExcel"),action:function(n){e.api.exporter.excelExport(t.VISIBLE,t.VISIBLE)},shown:function(){return e.options.exporterMenuExcel&&e.options.exporterMenuVisibleData},order:e.options.exporterMenuItemOrder+7},{title:o.getSafeText("gridMenu.exporterSelectedAsExcel"),action:function(n){e.api.exporter.excelExport(t.SELECTED,t.VISIBLE)},shown:function(){return e.options.exporterMenuExcel&&e.options.exporterMenuSelectedData&&e.api.selection&&e.api.selection.getSelectedRows().length>0},order:e.options.exporterMenuItemOrder+8}])},csvExport:function(e,t,n){var r=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var i=e.options.showHeader?r.getColumnHeaders(e,n):[],o=r.getData(e,t,n),a=r.formatAsCsv(i,o,e.options.exporterCsvColumnSeparator);r.downloadFile(e.options.exporterCsvFilename,a,e.options.exporterCsvColumnSeparator,e.options.exporterOlderExcelCompatibility,e.options.exporterIsExcelCompatible)})},loadAllDataIfNeeded:function(n,r,i){if(r===t.ALL&&n.rows.length!==n.options.totalItems&&n.options.exporterAllDataFn)return n.options.exporterAllDataFn().then(function(e){n.modifyRows(e)});var o=e.defer();return o.resolve(),o.promise},getColumnHeaders:function(e,n){var r,i=[];if(n===t.ALL)r=e.columns;else{var o=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],a=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],s=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];r=o.concat(a,s)}return r.forEach(function(t,n){if(!0!==t.colDef.exporterSuppressExport&&"$$hashKey"!==t.field&&-1===e.options.exporterSuppressColumns.indexOf(t.name)){var r={name:t.field,displayName:e.options.exporterHeaderFilter?e.options.exporterHeaderFilterUseName?e.options.exporterHeaderFilter(t.name):e.options.exporterHeaderFilter(t.displayName):t.displayName,width:t.drawnWidth?t.drawnWidth:t.width,align:t.colDef.align?t.colDef.align:"number"===t.colDef.type?"right":"left"};i.push(r)}}),i},getRowsFromNode:function(e){for(var t=[],n=0;n<e.children.length;n++)if(e.children[n].children&&0===e.children[n].children.length)t.push(e.children[n]);else{var r=this.getRowsFromNode(e.children[n]);t=t.concat(r)}return t},getDataSorted:function(e,t,n,r){if(!e.treeBase||0===e.treeBase.numberLevels)return e.rows;for(var i=[],o=0;o<e.treeBase.tree.length;o++)for(var a=this.getRowsFromNode(e.treeBase.tree[o]),s=0;s<a.length;s++)i.push(a[s].row);return i},getData:function(e,r,i,o){var a,s,l=[];switch(r){case t.ALL:a=this.getDataSorted(e,r,i,o);break;case t.VISIBLE:a=e.getVisibleRows();break;case t.SELECTED:e.api.selection?a=e.api.selection.getSelectedGridRows():n.logError("selection feature must be enabled to allow selected rows to be exported")}if(i===t.ALL)s=e.columns;else{var u=e.renderContainers.left?e.renderContainers.left.visibleColumnCache.filter(function(e){return e.visible}):[],c=e.renderContainers.body?e.renderContainers.body.visibleColumnCache.filter(function(e){return e.visible}):[],d=e.renderContainers.right?e.renderContainers.right.visibleColumnCache.filter(function(e){return e.visible}):[];s=u.concat(c,d)}return a.forEach(function(n,r){if(!1!==n.exporterEnableExporting){var a=[];s.forEach(function(r,s){if((r.visible||i===t.ALL)&&!0!==r.colDef.exporterSuppressExport&&"$$hashKey"!==r.field&&-1===e.options.exporterSuppressColumns.indexOf(r.name)){var l=o?e.getCellDisplayValue(n,r):e.getCellValue(n,r),u={value:e.options.exporterFieldCallback(e,n,r,l)},c=e.options.exporterFieldFormatCallback(e,n,r,l);c&&Object.assign(u,c),r.colDef.exporterPdfAlign&&(u.alignment=r.colDef.exporterPdfAlign),a.push(u)}}),l.push(a)}}),l},formatAsCsv:function(e,t,n){var r=this,i=e.map(function(e){return{value:e.displayName}}),o=i.length>0?r.formatRowAsCsv(this,n)(i)+"\n":"";return o+=t.map(this.formatRowAsCsv(this,n)).join("\n")},formatRowAsCsv:function(e,t){return function(n){return n.map(e.formatFieldAsCsv).join(t)}},formatFieldAsCsv:function(e){return null==e.value?"":"number"==typeof e.value?e.value:"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?'"'+e.value.replace(/"/g,'""')+'"':JSON.stringify(e.value)},isIE:function(){var e=!1;return-1!==navigator.userAgent.search(/(?:Edge|MSIE|Trident\/.*; rv:)/)&&(e=!0),e},downloadFile:function(e,t,n,r,i){var o,a=document,s=a.createElement("a"),l="application/octet-stream;charset=utf-8",u=this.isIE();if(i&&(t="sep="+n+"\r\n"+t),navigator.msSaveBlob)return navigator.msSaveOrOpenBlob(new Blob([r?"\ufeff":"",t],{type:l}),e);if(u){var c=a.createElement("iframe");return document.body.appendChild(c),c.contentWindow.document.open("text/html","replace"),c.contentWindow.document.write(t),c.contentWindow.document.close(),c.contentWindow.focus(),c.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(c),!0}if("download"in s){var d=new Blob([r?"\ufeff":"",t],{type:l});o=URL.createObjectURL(d),s.setAttribute("download",e)}else o="data:"+l+","+encodeURIComponent(t),s.setAttribute("target","_blank");s.href=o,s.setAttribute("style","display:none;"),a.body.appendChild(s),setTimeout(function(){if(s.click)s.click();else if(document.createEvent){var e=document.createEvent("MouseEvents");e.initEvent("click",!0,!0),s.dispatchEvent(e)}a.body.removeChild(s)},this.delay)},pdfExport:function(e,t,n){var r=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var i=r.getColumnHeaders(e,n),o=r.getData(e,t,n),a=r.prepareAsPdf(e,i,o);r.isIE()||-1!==navigator.appVersion.indexOf("Edge")?r.downloadPDF(e.options.exporterPdfFilename,a):pdfMake.createPdf(a).open()})},downloadPDF:function(e,t){var n,r=document;r.createElement("a");n=this.isIE();var i;pdfMake.createPdf(t).getBuffer(function(t){if(i=new Blob([t]),navigator.msSaveBlob)return navigator.msSaveBlob(i,e);if(n){var o=r.createElement("iframe");return document.body.appendChild(o),o.contentWindow.document.open("text/html","replace"),o.contentWindow.document.write(i),o.contentWindow.document.close(),o.contentWindow.focus(),o.contentWindow.document.execCommand("SaveAs",!0,e),document.body.removeChild(o),!0}})},prepareAsPdf:function(e,t,n){var r=this.calculatePdfHeaderWidths(e,t),i=t.map(function(e){return{text:e.displayName,style:"tableHeader"}}),o=n.map(this.formatRowAsPdf(this)),a=[i].concat(o),s={pageOrientation:e.options.exporterPdfOrientation,pageSize:e.options.exporterPdfPageSize,content:[{style:"tableStyle",table:{headerRows:1,widths:r,body:a}}],styles:{tableStyle:e.options.exporterPdfTableStyle,tableHeader:e.options.exporterPdfTableHeaderStyle},defaultStyle:e.options.exporterPdfDefaultStyle};return e.options.exporterPdfLayout&&(s.layout=e.options.exporterPdfLayout),e.options.exporterPdfHeader&&(s.header=e.options.exporterPdfHeader),e.options.exporterPdfFooter&&(s.footer=e.options.exporterPdfFooter),e.options.exporterPdfCustomFormatter&&(s=e.options.exporterPdfCustomFormatter(s)),s},calculatePdfHeaderWidths:function(e,t){var n=0;t.forEach(function(e){"number"==typeof e.width&&(n+=e.width)});var r=0;t.forEach(function(e){if("*"===e.width&&(r+=100),"string"==typeof e.width&&e.width.match(/(\d)*%/)){var t=parseInt(e.width.match(/(\d)*%/)[0]);e.width=n*t/100,r+=e.width}});var i=n+r;return t.map(function(t){return"*"===t.width?t.width:t.width*e.options.exporterPdfMaxGridWidth/i})},formatRowAsPdf:function(e){return function(t){return t.map(e.formatFieldAsPdfString)}},formatFieldAsPdfString:function(e){var t;return t=null==e.value?"":"number"==typeof e.value?e.value.toString():"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?e.value.replace(/"/g,'""'):e.value instanceof Date?JSON.stringify(e.value).replace(/^"/,"").replace(/"$/,""):"object"==typeof e.value?e.value:JSON.stringify(e.value).replace(/^"/,"").replace(/"$/,""),e.alignment&&"string"==typeof e.alignment&&(t={text:t,alignment:e.alignment}),t},formatAsExcel:function(e,t,n,r,i){for(var o=e.map(function(e){return{value:e.displayName}}),a=[],s=[],l=0;l<o.length;l++){var u="header";switch(e[l].align){case"center":u="headerCenter";break;case"right":u="headerRight"}var c=i.styles&&i.styles[u]?{style:i.styles[u].id}:null;s.push({value:o[l].value,metadata:c})}a.push(s);for(var d=t.map(this.formatRowAsExcel(this,n,r)),f=0;f<d.length;f++)a.push(d[f]);return a},formatRowAsExcel:function(e,t,n){return function(r){for(var i=[],o=0;o<r.length;o++){var a=e.formatFieldAsExcel(r[o],t,n);i.push({value:a,metadata:r[o].metadata})}return i}},formatFieldAsExcel:function(e,t,n,r){return null==e.value?"":"number"==typeof e.value?e.value:"boolean"==typeof e.value?e.value?"TRUE":"FALSE":"string"==typeof e.value?e.value.replace(/"/g,'""'):JSON.stringify(e.value)},prepareAsExcel:function(e,t,n){var r={styles:{}};if(e.options.exporterExcelCustomFormatters&&(r=e.options.exporterExcelCustomFormatters(e,t,r)),e.options.exporterExcelHeader){if(angular.isFunction(e.options.exporterExcelHeader))e.options.exporterExcelHeader(e,t,n,r);else{var i=e.options.exporterExcelHeader.text,o=e.options.exporterExcelHeader.style;n.data.push([{value:i,metadata:{style:r.styles[o].id}}])}}return r},excelExport:function(e,t,n){var r=this;this.loadAllDataIfNeeded(e,t,n).then(function(){var i=e.options.showHeader?r.getColumnHeaders(e,n):[],o=new ExcelBuilder.Workbook,a=e.options.exporterExcelSheetName?e.options.exporterExcelSheetName:"Sheet1",s=new ExcelBuilder.Worksheet({name:a});o.addWorksheet(s);for(var l=r.prepareAsExcel(e,o,s),u=[],c=e.treeBase?e.treeBase.numberLevels:!1!==e.enableRowSelection?1:0;c<e.columns.length;c++)u.push({width:e.columns[c].drawnWidth/75*10});s.setColumns(u);var d=r.getData(e,t,n,e.options.exporterFieldApplyFilters),f=r.formatAsExcel(i,d,o,s,l);s.setData(s.data.concat(f)),ExcelBuilder.Builder.createFile(o,{type:"blob"}).then(function(t){r.downloadFile(e.options.exporterExcelFilename,t,e.options.exporterCsvColumnSeparator,e.options.exporterOlderExcelCompatibility)})})}};return a}]),e.directive("uiGridExporter",["uiGridExporterConstants","uiGridExporterService","gridUtil","$compile",function(e,t,n,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,r,i){t.initializeGrid(i.grid),i.grid.exporter.$scope=e}}}])}(),function(){"use strict";var e=angular.module("ui.grid.grouping",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridGroupingConstants",{featureName:"grouping",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridGroupingService",["$q","uiGridGroupingConstants","gridUtil","rowSorter","GridRow","gridClassFactory","i18nService","uiGridConstants","uiGridTreeBaseService",function(e,t,n,r,i,o,a,s,l){var u={initializeGrid:function(e,t){l.initializeGrid(e,t),e.grouping={},e.grouping.groupHeaderCache={},u.defaultGridOptions(e.options),e.registerRowsProcessor(u.groupRows,400),e.registerColumnBuilder(u.groupingColumnBuilder),e.registerColumnsProcessor(u.groupingColumnProcessor,400);var n={events:{grouping:{aggregationChanged:{},groupingChanged:{}}},methods:{grouping:{getGrouping:function(t){var n=u.getGrouping(e);return n.grouping.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations.forEach(function(e){e.colName=e.col.name,delete e.col}),n.aggregations=n.aggregations.filter(function(e){return!e.aggregation.source||"grouping"!==e.aggregation.source}),t&&(n.rowExpandedStates=u.getRowExpandedStates(e.grouping.groupingHeaderCache)),n},setGrouping:function(t){u.setGrouping(e,t)},groupColumn:function(t){var n=e.getColumn(t);u.groupColumn(e,n)},ungroupColumn:function(t){var n=e.getColumn(t);u.ungroupColumn(e,n)},clearGrouping:function(){u.clearGrouping(e)},aggregateColumn:function(t,n,r){var i=e.getColumn(t);u.aggregateColumn(e,i,n,r)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods),e.api.core.on.sortChanged(t,u.tidyPriorities)},defaultGridOptions:function(e){e.enableGrouping=!1!==e.enableGrouping,e.groupingShowCounts=!1!==e.groupingShowCounts,e.groupingNullLabel=void 0===e.groupingNullLabel?"Null":e.groupingNullLabel,e.enableGroupHeaderSelection=!0===e.enableGroupHeaderSelection},groupingColumnBuilder:function(e,r,i){if(!1!==e.enableGrouping){void 0===r.grouping&&void 0!==e.grouping?(r.grouping=angular.copy(e.grouping),void 0!==r.grouping.groupPriority&&r.grouping.groupPriority>-1&&(r.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,r.treeAggregationFinalizerFn=u.groupedFinalizerFn)):void 0===r.grouping&&(r.grouping={}),void 0!==r.grouping&&void 0!==r.grouping.groupPriority&&r.grouping.groupPriority>=0&&(r.suppressRemoveSort=!0);var o={name:"ui.grid.grouping.group",title:a.get().grouping.group,icon:"ui-grid-icon-indent-right",shown:function(){return void 0===this.context.col.grouping||void 0===this.context.col.grouping.groupPriority||this.context.col.grouping.groupPriority<0},action:function(){u.groupColumn(this.context.col.grid,this.context.col)}},s={name:"ui.grid.grouping.ungroup",title:a.get().grouping.ungroup,icon:"ui-grid-icon-indent-left",shown:function(){return void 0!==this.context.col.grouping&&void 0!==this.context.col.grouping.groupPriority&&this.context.col.grouping.groupPriority>=0},action:function(){u.ungroupColumn(this.context.col.grid,this.context.col)}},c={name:"ui.grid.grouping.aggregateRemove",title:a.get().grouping.aggregate_remove,shown:function(){return void 0!==this.context.col.treeAggregationFn},action:function(){u.aggregateColumn(this.context.col.grid,this.context.col,null)}},d=function(e,t){t=t||a.get().grouping["aggregate_"+e]||e;var i={name:"ui.grid.grouping.aggregate"+e,title:t,shown:function(){return void 0===this.context.col.treeAggregation||void 0===this.context.col.treeAggregation.type||this.context.col.treeAggregation.type!==e},action:function(){u.aggregateColumn(this.context.col.grid,this.context.col,e)}};n.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.grouping.aggregate"+e)||r.menuItems.push(i)};!1!==r.colDef.groupingShowGroupingMenu&&(n.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.grouping.group")||r.menuItems.push(o),n.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.grouping.ungroup")||r.menuItems.push(s)),!1!==r.colDef.groupingShowAggregationMenu&&(angular.forEach(l.nativeAggregations(),function(e,t){d(t)}),angular.forEach(i.treeCustomAggregations,function(e,t){d(t,e.menuTitle)}),n.arrayContainsObjectWithProperty(r.menuItems,"name","ui.grid.grouping.aggregateRemove")||r.menuItems.push(c))}},groupingColumnProcessor:function(e,t){return e=u.moveGroupColumns(this,e,t)},groupedFinalizerFn:function(e){var t=this;void 0!==e.groupVal?(e.rendered=e.groupVal,t.grid.options.groupingShowCounts&&"date"!==t.colDef.type&&"object"!==t.colDef.type&&(e.rendered+=" ("+e.value+")")):e.rendered=null},moveGroupColumns:function(e,t,n){return!1===e.options.moveGroupColumns?t:(t.forEach(function(e,t){e.groupingPosition=t}),t.sort(function(e,t){var n,r;return n=e.isRowHeader?e.headerPriority:void 0===e.grouping||void 0===e.grouping.groupPriority||e.grouping.groupPriority<0?null:e.grouping.groupPriority,r=t.isRowHeader?t.headerPriority:void 0===t.grouping||void 0===t.grouping.groupPriority||t.grouping.groupPriority<0?null:t.grouping.groupPriority,null!==n&&null===r?-1:null!==r&&null===n?1:null!==n&&null!==r?n-r:e.groupingPosition-t.groupingPosition}),t.forEach(function(e,t){delete e.groupingPosition}),t)},groupColumn:function(e,n){void 0===n.grouping&&(n.grouping={});var r=u.getGrouping(e);n.grouping.groupPriority=r.grouping.length,n.previousSort=angular.copy(n.sort),n.sort?void 0!==n.sort.direction&&null!==n.sort.direction||(n.sort.direction=s.ASC):n.sort={direction:s.ASC},n.treeAggregation={type:t.aggregation.COUNT,source:"grouping"},n.treeAggregationFn=l.nativeAggregations()[t.aggregation.COUNT].aggregationFn,n.treeAggregationFinalizerFn=u.groupedFinalizerFn,e.api.grouping.raise.groupingChanged(n),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh()},ungroupColumn:function(e,t){void 0!==t.grouping&&(delete t.grouping.groupPriority,delete t.treeAggregation,delete t.customTreeAggregationFinalizer,t.previousSort&&(t.sort=t.previousSort,delete t.previousSort),u.tidyPriorities(e),e.api.grouping.raise.groupingChanged(t),e.api.core.raise.sortChanged(e,e.getColumnSorting()),e.queueGridRefresh())},aggregateColumn:function(e,t,n){void 0!==t.grouping&&void 0!==t.grouping.groupPriority&&t.grouping.groupPriority>=0&&u.ungroupColumn(e,t);var r={};void 0!==e.options.treeCustomAggregations[n]?r=e.options.treeCustomAggregations[n]:void 0!==l.nativeAggregations()[n]&&(r=l.nativeAggregations()[n]),t.treeAggregation={type:n,label:a.get().aggregation[r.label]||r.label},t.treeAggregationFn=r.aggregationFn,t.treeAggregationFinalizerFn=r.finalizerFn,e.api.grouping.raise.aggregationChanged(t),e.queueGridRefresh()},setGrouping:function(e,t){void 0!==t&&(u.clearGrouping(e),t.grouping&&t.grouping.length&&t.grouping.length>0&&t.grouping.forEach(function(t){var n=e.getColumn(t.colName);n&&u.groupColumn(e,n)}),t.aggregations&&t.aggregations.length&&t.aggregations.forEach(function(t){var n=e.getColumn(t.colName);n&&u.aggregateColumn(e,n,t.aggregation.type)}),t.rowExpandedStates&&u.applyRowExpandedStates(e.grouping.groupingHeaderCache,t.rowExpandedStates))},clearGrouping:function(e){var t=u.getGrouping(e);t.grouping.length>0&&t.grouping.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),u.ungroupColumn(e,t.col)}),t.aggregations.length>0&&t.aggregations.forEach(function(t){t.col||(t.col=e.getColumn(t.colName)),u.aggregateColumn(e,t.col,null)})},tidyPriorities:function(e){void 0!==e&&void 0===e.grid||void 0===this.grid||(e=this.grid);var t=[],n=[];e.columns.forEach(function(e,r){void 0!==e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0?t.push(e):void 0!==e.sort&&void 0!==e.sort.priority&&e.sort.priority>=0&&n.push(e)}),t.sort(function(e,t){return e.grouping.groupPriority-t.grouping.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.suppressRemoveSort=!0,void 0===e.sort&&(e.sort={}),e.sort.priority=t});var r=t.length;n.sort(function(e,t){return e.sort.priority-t.sort.priority}),n.forEach(function(e,t){e.sort.priority=r,e.suppressRemoveSort=e.colDef.suppressRemoveSort,r++})},groupRows:function(e){if(0===e.length)return e;var t=this;t.grouping.oldGroupingHeaderCache=t.grouping.groupingHeaderCache||{},t.grouping.groupingHeaderCache={};for(var n=u.initialiseProcessingState(t),i=function(i,s){var l=t.getCellValue(a,i.col);i.initialised&&0===r.getSortFn(t,i.col,e)(l,i.currentValue)||(u.insertGroupHeader(t,e,o,n,s),o++)},o=0;o<e.length;o++){var a=e[o];a.visible&&n.forEach(i)}return delete t.grouping.oldGroupingHeaderCache,e},initialiseProcessingState:function(e){var t=[];return u.getGrouping(e).grouping.forEach(function(e,n){t.push({fieldName:e.field,col:e.col,initialised:!1,currentValue:null,currentRow:null})}),t},getGrouping:function(e){var t=[],n=[];return e.columns.forEach(function(e,r){e.grouping&&void 0!==e.grouping.groupPriority&&e.grouping.groupPriority>=0&&t.push({field:e.field,col:e,groupPriority:e.grouping.groupPriority,grouping:e.grouping}),e.treeAggregation&&e.treeAggregation.type&&n.push({field:e.field,col:e,aggregation:e.treeAggregation})}),t.sort(function(e,t){return e.groupPriority-t.groupPriority}),t.forEach(function(e,t){e.grouping.groupPriority=t,e.groupPriority=t,delete e.grouping}),{grouping:t,aggregations:n}},insertGroupHeader:function(e,t,n,r,a){r[a].fieldName;var s=r[a].col,l=e.getCellValue(t[n],s),c=l;void 0!==l&&null!==l||(c=e.options.groupingNullLabel);for(var d=function(e){return angular.isObject(e)?JSON.stringify(e):e},f=e.grouping.oldGroupingHeaderCache,p=0;p<a;p++)f&&f[d(r[p].currentValue)]&&(f=f[d(r[p].currentValue)].children);var h;for(f&&f[d(l)]?(h=f[d(l)].row).entity={}:(h=new i({},null,e),o.rowTemplateAssigner.call(e,h)),h.entity["$$"+r[a].col.uid]={groupVal:c},h.treeLevel=a,h.groupHeader=!0,h.internalRow=!0,h.enableCellEdit=!1,h.enableSelection=e.options.enableGroupHeaderSelection,r[a].initialised=!0,r[a].currentValue=l,r[a].currentRow=h,u.finaliseProcessingState(r,a+1),t.splice(n,0,h),f=e.grouping.groupingHeaderCache,p=0;p<a;p++)f=f[d(r[p].currentValue)].children;f[d(l)]={row:h,children:{}}},finaliseProcessingState:function(e,t){for(var n=t;n<e.length;n++)e[n].initialised=!1,e[n].currentRow=null,e[n].currentValue=null},getRowExpandedStates:function(e){if(void 0===e)return{};var t={};return angular.forEach(e,function(e,n){t[n]={state:e.row.treeNode.state},e.children?t[n].children=u.getRowExpandedStates(e.children):t[n].children={}}),t},applyRowExpandedStates:function(e,t){void 0!==t&&angular.forEach(t,function(t,n){e[n]&&(e[n].row.treeNode.state=t.state,t.children&&e[n].children&&u.applyRowExpandedStates(e[n].children,t.children))})}};return u}]),e.directive("uiGridGrouping",["uiGridGroupingConstants","uiGridGroupingService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){!1!==i.grid.options.enableGrouping&&t.initializeGrid(i.grid,e)},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.importer",["ui.grid"]);e.constant("uiGridImporterConstants",{featureName:"importer"}),e.service("uiGridImporterService",["$q","uiGridConstants","uiGridImporterConstants","gridUtil","$compile","$interval","i18nService","$window",function(e,t,n,r,i,o,a,s){var l={initializeGrid:function(e,t){t.importer={$scope:e},this.defaultGridOptions(t.options);var n={events:{importer:{}},methods:{importer:{importFile:function(e){l.importThisFile(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.options.enableImporter&&t.options.importerShowMenu&&(t.api.core.addToGridMenu?l.addToMenu(t):o(function(){t.api.core.addToGridMenu&&l.addToMenu(t)},100,1))},defaultGridOptions:function(e){e.enableImporter||void 0===e.enableImporter?s.hasOwnProperty("File")&&s.hasOwnProperty("FileReader")&&s.hasOwnProperty("FileList")&&s.hasOwnProperty("Blob")?e.enableImporter=!0:(r.logError("The File APIs are not fully supported in this browser, grid importer cannot be used."),e.enableImporter=!1):e.enableImporter=!1,e.importerProcessHeaders=e.importerProcessHeaders||l.processHeaders,e.importerHeaderFilter=e.importerHeaderFilter||function(e){return e},e.importerErrorCallback&&"function"==typeof e.importerErrorCallback||delete e.importerErrorCallback,!0!==e.enableImporter||e.importerDataAddCallback||(r.logError("You have not set an importerDataAddCallback, importer is disabled"),e.enableImporter=!1),e.importerShowMenu=!1!==e.importerShowMenu,e.importerObjectCallback=e.importerObjectCallback||function(e,t){return t}},addToMenu:function(e){e.api.core.addToGridMenu(e,[{title:a.getSafeText("gridMenu.importerTitle"),order:150},{templateUrl:"ui-grid/importerMenuItemContainer",action:function(t){this.grid.api.importer.importAFile(e)},order:151}])},importThisFile:function(e,t){if(t){var n=new FileReader;switch(t.type){case"application/json":n.onload=l.importJsonClosure(e);break;default:n.onload=l.importCsvClosure(e)}n.readAsText(t)}else r.logError("No file object provided to importThisFile, should be impossible, aborting")},importJsonClosure:function(e){return function(t){var n,r=[],i=l.parseJson(e,t);null!==i&&(i.forEach(function(t,i){n=l.newObject(e),angular.extend(n,t),n=e.options.importerObjectCallback(e,n),r.push(n)}),l.addObjects(e,r))}},parseJson:function(e,t){var n;try{n=JSON.parse(t.target.result)}catch(n){return void l.alertError(e,"importer.invalidJson","File could not be processed, is it valid json? Content was: ",t.target.result)}return Array.isArray(n)?n:(l.alertError(e,"importer.jsonNotarray","Import failed, file is not an array, file was: ",t.target.result),[])},importCsvClosure:function(e){return function(t){var n=l.parseCsv(t);if(!n||n.length<1)l.alertError(e,"importer.invalidCsv","File could not be processed, is it valid csv? Content was: ",t.target.result);else{var r=l.createCsvObjects(e,n);r&&0!==r.length?l.addObjects(e,r):l.alertError(e,"importer.noObjects","Objects were not able to be derived, content was: ",t.target.result)}}},parseCsv:function(e){var t=e.target.result;return CSV.parse(t)},createCsvObjects:function(e,t){var n=e.options.importerProcessHeaders(e,t.shift());if(!n||0===n.length)return l.alertError(e,"importer.noHeaders","Column names could not be derived, content was: ",t),[];var r,i=[];return t.forEach(function(t,o){r=l.newObject(e),null!==t&&t.forEach(function(e,t){null!==n[t]&&(r[n[t]]=e)}),r=e.options.importerObjectCallback(e,r),i.push(r)}),i},processHeaders:function(e,t){var n=[];if(e.options.columnDefs&&0!==e.options.columnDefs.length){var r=l.flattenColumnDefs(e,e.options.columnDefs);return t.forEach(function(e,t){r[e]?n.push(r[e]):r[e.toLowerCase()]?n.push(r[e.toLowerCase()]):n.push(null)}),n}return t.forEach(function(e,t){n.push(e.replace(/[^0-9a-zA-Z\-_]/g,"_"))}),n},flattenColumnDefs:function(e,t){var n={};return t.forEach(function(t,r){t.name&&(n[t.name]=t.field||t.name,n[t.name.toLowerCase()]=t.field||t.name),t.field&&(n[t.field]=t.field||t.name,n[t.field.toLowerCase()]=t.field||t.name),t.displayName&&(n[t.displayName]=t.field||t.name,n[t.displayName.toLowerCase()]=t.field||t.name),t.displayName&&e.options.importerHeaderFilter&&(n[e.options.importerHeaderFilter(t.displayName)]=t.field||t.name,n[e.options.importerHeaderFilter(t.displayName).toLowerCase()]=t.field||t.name)}),n},addObjects:function(e,n,r){if(e.api.rowEdit){var i=e.registerDataChangeCallback(function(){e.api.rowEdit.setRowsDirty(n),i()},[t.dataChange.ROW]);e.importer.$scope.$on("$destroy",i)}e.importer.$scope.$apply(e.options.importerDataAddCallback(e,n))},newObject:function(e){return void 0!==e.options&&void 0!==e.options.importerNewObject?new e.options.importerNewObject:{}},alertError:function(e,t,n,i){e.options.importerErrorCallback?e.options.importerErrorCallback(e,t,n,i):(s.alert(a.getSafeText(t)),r.logError(n+i))}};return l}]),e.directive("uiGridImporter",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,r,i){t.initializeGrid(e,i.grid)}}}]),e.directive("uiGridImporterMenuItem",["uiGridImporterConstants","uiGridImporterService","gridUtil","$compile",function(e,t,n,r){return{replace:!0,priority:0,require:"?^uiGrid",scope:!1,templateUrl:"ui-grid/importerMenuItem",link:function(e,r,i,o){function a(e){var r=e.srcElement||e.target;if(r&&r.files&&1===r.files.length){var i=r.files[0];void 0!==o&&o?(s=o.grid,t.importThisFile(s,i),r.form.reset()):n.logError("Could not import file because UI Grid was not found.")}}var s,l=r[0].querySelectorAll(".ui-grid-importer-file-chooser");1!==l.length?n.logError("Found > 1 or < 1 file choosers within the menu item, error, cannot continue"):l[0].addEventListener("change",a,!1)}}}])}(),function(){"use strict";var e=angular.module("ui.grid.infiniteScroll",["ui.grid"]);e.service("uiGridInfiniteScrollService",["gridUtil","$compile","$rootScope","uiGridConstants","ScrollEvent","$q",function(e,t,n,r,i,o){var a={initializeGrid:function(e,t){if(a.defaultGridOptions(e.options),e.options.enableInfiniteScroll){e.infiniteScroll={dataLoading:!1},a.setScrollDirections(e,e.options.infiniteScrollUp,e.options.infiniteScrollDown),e.api.core.on.scrollEnd(t,a.handleScroll);var n={events:{infiniteScroll:{needLoadMoreData:function(e,t){},needLoadMoreDataTop:function(e,t){}}},methods:{infiniteScroll:{dataLoaded:function(t,n){return a.setScrollDirections(e,t,n),a.adjustScroll(e).then(function(){e.infiniteScroll.dataLoading=!1})},resetScroll:function(t,n){a.setScrollDirections(e,t,n),a.adjustInfiniteScrollPosition(e,0)},saveScrollPercentage:function(){e.infiniteScroll.prevScrollTop=e.renderContainers.body.prevScrollTop,e.infiniteScroll.previousVisibleRows=e.getVisibleRowCount()},dataRemovedTop:function(t,n){a.dataRemovedTop(e,t,n)},dataRemovedBottom:function(t,n){a.dataRemovedBottom(e,t,n)},setScrollDirections:function(t,n){a.setScrollDirections(e,t,n)}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)}},defaultGridOptions:function(e){e.enableInfiniteScroll=!1!==e.enableInfiniteScroll,e.infiniteScrollRowsFromEnd=e.infiniteScrollRowsFromEnd||20,e.infiniteScrollUp=!0===e.infiniteScrollUp,e.infiniteScrollDown=!1!==e.infiniteScrollDown},setScrollDirections:function(e,t,n){e.infiniteScroll.scrollUp=!0===t,e.suppressParentScrollUp=!0===t,e.infiniteScroll.scrollDown=!1!==n,e.suppressParentScrollDown=!1!==n},handleScroll:function(e){if(!(e.grid.infiniteScroll&&e.grid.infiniteScroll.dataLoading||"ui.grid.adjustInfiniteScrollPosition"===e.source)&&e.y)if(0===e.y.percentage)e.grid.scrollDirection=r.scrollDirection.UP,a.loadData(e.grid);else if(1===e.y.percentage)e.grid.scrollDirection=r.scrollDirection.DOWN,a.loadData(e.grid);else{var t=e.grid.options.infiniteScrollRowsFromEnd/e.grid.renderContainers.body.visibleRowCache.length;e.grid.scrollDirection===r.scrollDirection.UP?e.y.percentage<=t&&a.loadData(e.grid):e.grid.scrollDirection===r.scrollDirection.DOWN&&1-e.y.percentage<=t&&a.loadData(e.grid)}},loadData:function(e){e.infiniteScroll.previousVisibleRows=e.renderContainers.body.visibleRowCache.length,e.infiniteScroll.direction=e.scrollDirection,delete e.infiniteScroll.prevScrollTop,e.scrollDirection===r.scrollDirection.UP&&e.infiniteScroll.scrollUp?(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreDataTop()):e.scrollDirection===r.scrollDirection.DOWN&&e.infiniteScroll.scrollDown&&(e.infiniteScroll.dataLoading=!0,e.api.infiniteScroll.raise.needLoadMoreData())},adjustScroll:function(e){var t=o.defer();return n.$applyAsync(function(){var i,o,s,l;i=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,o=e.options.rowHeight,void 0===e.infiniteScroll.direction&&a.adjustInfiniteScrollPosition(e,0);var u=o*(s=e.getVisibleRowCount());e.infiniteScroll.scrollDown&&i>u&&e.api.infiniteScroll.raise.needLoadMoreData(),e.infiniteScroll.direction===r.scrollDirection.UP&&(l=(e.infiniteScroll.prevScrollTop||0)+(s-e.infiniteScroll.previousVisibleRows)*o,a.adjustInfiniteScrollPosition(e,l),n.$applyAsync(function(){t.resolve()})),e.infiniteScroll.direction===r.scrollDirection.DOWN&&(l=e.infiniteScroll.prevScrollTop||e.infiniteScroll.previousVisibleRows*o-i,a.adjustInfiniteScrollPosition(e,l),n.$applyAsync(function(){t.resolve()}))},0),t.promise},adjustInfiniteScrollPosition:function(e,t){var n=new i(e,null,null,"ui.grid.adjustInfiniteScrollPosition"),r=e.getVisibleRowCount(),o=e.getViewportHeight()+e.headerHeight-e.renderContainers.body.headerHeight-e.scrollbarHeight,a=r*e.options.rowHeight-o;0===t&&e.infiniteScroll.scrollUp?n.y={percentage:1/a}:n.y={percentage:t/a},e.scrollContainers("",n)},dataRemovedTop:function(e,t,n){var r,i,o,s;a.setScrollDirections(e,t,n),r=e.renderContainers.body.visibleRowCache.length,i=e.infiniteScroll.prevScrollTop,s=e.options.rowHeight,o=i-(e.infiniteScroll.previousVisibleRows-r)*s,a.adjustInfiniteScrollPosition(e,o)},dataRemovedBottom:function(e,t,n){var r;a.setScrollDirections(e,t,n),r=e.infiniteScroll.prevScrollTop,a.adjustInfiniteScrollPosition(e,r)}};return a}]),e.directive("uiGridInfiniteScroll",["uiGridInfiniteScrollService",function(e){return{priority:-200,scope:!1,require:"^uiGrid",compile:function(t,n,r){return{pre:function(t,n,r,i){e.initializeGrid(i.grid,t)},post:function(e,t,n){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.moveColumns",["ui.grid"]);e.service("uiGridMoveColumnService",["$q","$rootScope","$log","ScrollEvent","uiGridConstants","gridUtil",function(e,t,n,r,i,o){var a={initializeGrid:function(e){var t=this;this.registerPublicApi(e),this.defaultGridOptions(e.options),e.moveColumns={orderCache:[]},e.registerColumnBuilder(t.movableColumnBuilder),e.registerDataChangeCallback(t.verifyColumnOrder,[i.dataChange.COLUMN])},registerPublicApi:function(e){var t=this,n={events:{colMovable:{columnPositionChanged:function(e,t,n){}}},methods:{colMovable:{moveColumn:function(n,r){var i=e.columns;if(angular.isNumber(n)&&angular.isNumber(r)){for(var a=0,s=0;s<i.length;s++)(angular.isDefined(i[s].colDef.visible)&&!1===i[s].colDef.visible||!0===i[s].isRowHeader)&&a++;if(n>=i.length-a||r>=i.length-a)o.logError("MoveColumn: Invalid values for originalPosition, finalPosition");else{var l=function(e){for(var t=e,n=0;n<=t;n++)angular.isDefined(i[n])&&(angular.isDefined(i[n].colDef.visible)&&!1===i[n].colDef.visible||!0===i[n].isRowHeader)&&t++;return t};t.redrawColumnAtPosition(e,l(n),l(r))}}else o.logError("MoveColumn: Please provide valid values for originalPosition and finalPosition")}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableColumnMoving=!1!==e.enableColumnMoving},movableColumnBuilder:function(t,n,r){var i=[];return t.enableColumnMoving=void 0===t.enableColumnMoving?r.enableColumnMoving:t.enableColumnMoving,e.all(i)},updateColumnCache:function(e){e.moveColumns.orderCache=e.getOnlyDataColumns()},verifyColumnOrder:function(e){var t,n=e.rowHeaderColumns.length;angular.forEach(e.moveColumns.orderCache,function(r,i){if(-1!==(t=e.columns.indexOf(r))&&t-n!==i){var o=e.columns.splice(t,1)[0];e.columns.splice(i+n,0,o)}})},redrawColumnAtPosition:function(e,n,r){var o=e.columns;if(n!==r){var s=n<r?n+1:n-1,l=Math.min(s,r);for(l;l<=Math.max(s,r)&&!o[l].visible;l++);if(!(l>Math.max(s,r))){var u=o[n];if(u.colDef.enableColumnMoving){if(n>r)for(var c=n;c>r;c--)o[c]=o[c-1];else if(r>n)for(var d=n;d<r;d++)o[d]=o[d+1];o[r]=u,a.updateColumnCache(e),e.queueGridRefresh(),t.$applyAsync(function(){e.api.core.notifyDataChange(i.dataChange.COLUMN),e.api.colMovable.raise.columnPositionChanged(u.colDef,n,r)})}}}}};return a}]),e.directive("uiGridMoveColumns",["uiGridMoveColumnService",function(e){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(t,n,r,i){e.initializeGrid(i.grid)},post:function(e,t,n,r){}}}}}]),e.directive("uiGridHeaderCell",["$q","gridUtil","uiGridMoveColumnService","$document","$log","uiGridConstants","ScrollEvent",function(e,t,n,r,i,o,a){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,t,i,o){if(e.col.colDef.enableColumnMoving){var s,l,u,c,d,f,p=angular.element(t[0].querySelectorAll(".ui-grid-cell-contents")),h=!1,g=!1,m=function(t){s=e.grid.element[0].getBoundingClientRect().left,e.grid.hasLeftContainer()&&(s+=e.grid.renderContainers.left.header[0].getBoundingClientRect().width),l=t.pageX||(t.originalEvent?t.originalEvent.pageX:0),u=0,c=s+e.grid.getViewportWidth(),"mousedown"===t.type?(r.on("mousemove",v),r.on("mouseup",y)):"touchstart"===t.type&&(r.on("touchmove",v),r.on("touchend",y))},v=function(e){var t=e.pageX||(e.originalEvent?e.originalEvent.pageX:0),n=t-l;0!==n&&(document.onselectstart=function(){return!1},g=!0,h?h&&(_(n),l=t):w())},y=function(t){if(document.onselectstart=null,d&&(d.remove(),h=!1),x(),b(),g){for(var r=e.grid.columns,i=0,o=0;o<r.length&&r[o].colDef.name!==e.col.colDef.name;o++)i++;var a;if(u<0){var s,l=0;if(e.grid.isRTL()){for(s=i+1;s<r.length;s++)if((angular.isUndefined(r[s].colDef.visible)||!0===r[s].colDef.visible)&&(l+=r[s].drawnWidth||r[s].width||r[s].colDef.width)>Math.abs(u)){n.redrawColumnAtPosition(e.grid,i,s-1);break}}else for(s=i-1;s>=0;s--)if((angular.isUndefined(r[s].colDef.visible)||!0===r[s].colDef.visible)&&(l+=r[s].drawnWidth||r[s].width||r[s].colDef.width)>Math.abs(u)){n.redrawColumnAtPosition(e.grid,i,s+1);break}l<Math.abs(u)&&(a=0,e.grid.isRTL()&&(a=r.length-1),n.redrawColumnAtPosition(e.grid,i,a))}else if(u>0){var c,f=0;if(e.grid.isRTL()){for(c=i-1;c>0;c--)if((angular.isUndefined(r[c].colDef.visible)||!0===r[c].colDef.visible)&&(f+=r[c].drawnWidth||r[c].width||r[c].colDef.width)>u){n.redrawColumnAtPosition(e.grid,i,c);break}}else for(c=i+1;c<r.length;c++)if((angular.isUndefined(r[c].colDef.visible)||!0===r[c].colDef.visible)&&(f+=r[c].drawnWidth||r[c].width||r[c].colDef.width)>u){n.redrawColumnAtPosition(e.grid,i,c-1);break}f<u&&(a=r.length-1,e.grid.isRTL()&&(a=0),n.redrawColumnAtPosition(e.grid,i,a))}}},b=function(){p.on("touchstart",m),p.on("mousedown",m)},x=function(){p.off("touchstart",m),p.off("mousedown",m),r.off("mousemove",v),r.off("touchmove",v),r.off("mouseup",y),r.off("touchend",y)};b();var w=function(){h=!0,d=t.clone(),t.parent().append(d),d.addClass("movingColumn");var n={};n.left=t[0].offsetLeft+"px";var r=e.grid.element[0].getBoundingClientRect().right,i=t[0].getBoundingClientRect().right;i>r&&(f=e.col.drawnWidth+(r-i),n.width=f+"px"),d.css(n)},_=function(t){for(var n=e.grid.columns,r=0,i=0;i<n.length;i++)(angular.isUndefined(n[i].colDef.visible)||!0===n[i].colDef.visible)&&(r+=n[i].drawnWidth||n[i].width||n[i].colDef.width);var l,p=d[0].getBoundingClientRect().left-1,h=d[0].getBoundingClientRect().right;if(l=p-s+t,l=l<c?l:c,(p>=s||t>0)&&(h<=c||t<0))d.css({visibility:"visible",left:d[0].offsetLeft+(l<c?t:c-p)+"px"});else if(r>Math.ceil(o.grid.gridWidth)){t*=8;var g=new a(e.col.grid,null,null,"uiGridHeaderCell.moveElement");g.x={pixels:t},g.grid.scrollContainers("",g)}for(var m=0,v=0;v<n.length;v++)if(angular.isUndefined(n[v].colDef.visible)||!0===n[v].colDef.visible){if(n[v].colDef.name===e.col.colDef.name)break;m+=n[v].drawnWidth||n[v].width||n[v].colDef.width}void 0===e.newScrollLeft?u+=t:u=e.newScrollLeft+l-m,f<e.col.drawnWidth&&(f+=Math.abs(t),d.css({width:f+"px"}))};e.$on("$destroy",x)}}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.pagination",["ng","ui.grid"]);e.service("uiGridPaginationService",["gridUtil",function(e){var t={initializeGrid:function(e){t.defaultGridOptions(e.options);var n={events:{pagination:{paginationChanged:function(e,t){}}},methods:{pagination:{getPage:function(){return e.options.enablePagination?e.options.paginationCurrentPage:null},getFirstRowIndex:function(){return e.options.useCustomPagination?e.options.paginationPageSizes.reduce(function(t,n,r){return r<e.options.paginationCurrentPage-1?t+n:t},0):(e.options.paginationCurrentPage-1)*e.options.paginationPageSize},getLastRowIndex:function(){return e.options.useCustomPagination?n.methods.pagination.getFirstRowIndex()+e.options.paginationPageSizes[e.options.paginationCurrentPage-1]-1:Math.min(e.options.paginationCurrentPage*e.options.paginationPageSize,e.options.totalItems)-1},getTotalPages:function(){return e.options.enablePagination?e.options.useCustomPagination?e.options.paginationPageSizes.length:0===e.options.totalItems?1:Math.ceil(e.options.totalItems/e.options.paginationPageSize):null},nextPage:function(){e.options.enablePagination&&(e.options.totalItems>0?e.options.paginationCurrentPage=Math.min(e.options.paginationCurrentPage+1,n.methods.pagination.getTotalPages()):e.options.paginationCurrentPage++)},previousPage:function(){e.options.enablePagination&&(e.options.paginationCurrentPage=Math.max(e.options.paginationCurrentPage-1,1))},seek:function(t){if(e.options.enablePagination){if(!angular.isNumber(t)||t<1)throw"Invalid page number: "+t;e.options.paginationCurrentPage=Math.min(t,n.methods.pagination.getTotalPages())}}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods);var r=function(t){if(e.options.useExternalPagination||!e.options.enablePagination)return t;var r=parseInt(e.options.paginationPageSize,10),i=(parseInt(e.options.paginationCurrentPage,10),t.filter(function(e){return e.visible}));e.options.totalItems=i.length;var o=n.methods.pagination.getFirstRowIndex(),a=n.methods.pagination.getLastRowIndex();return o>i.length&&(o=((e.options.paginationCurrentPage=1)-1)*r),i.slice(o,a+1)};e.registerRowsProcessor(r,900)},defaultGridOptions:function(t){t.enablePagination=!1!==t.enablePagination,t.enablePaginationControls=!1!==t.enablePaginationControls,t.useExternalPagination=!0===t.useExternalPagination,t.useCustomPagination=!0===t.useCustomPagination,e.isNullOrUndefined(t.totalItems)&&(t.totalItems=0),e.isNullOrUndefined(t.paginationPageSizes)&&(t.paginationPageSizes=[250,500,1e3]),e.isNullOrUndefined(t.paginationPageSize)&&(t.paginationPageSizes.length>0?t.paginationPageSize=t.paginationPageSizes[0]:t.paginationPageSize=0),e.isNullOrUndefined(t.paginationCurrentPage)&&(t.paginationCurrentPage=1),e.isNullOrUndefined(t.paginationTemplate)&&(t.paginationTemplate="ui-grid/pagination")},onPaginationChanged:function(e,t,n){e.api.pagination.raise.paginationChanged(t,n),e.options.useExternalPagination||e.queueGridRefresh()}};return t}]),e.directive("uiGridPagination",["gridUtil","uiGridPaginationService",function(e,t){return{priority:-200,scope:!1,require:"uiGrid",link:{pre:function(n,r,i,o){t.initializeGrid(o.grid),e.getTemplate(o.grid.options.paginationTemplate).then(function(e){var t=angular.element(e);r.append(t),o.innerCompile(t)})}}}}]),e.directive("uiGridPager",["uiGridPaginationService","uiGridConstants","gridUtil","i18nService","i18nConstants",function(e,t,n,r,i){return{priority:-200,scope:!0,require:"^uiGrid",link:function(o,a,s,l){o.aria=r.getSafeText("pagination.aria");var u=function(){o.paginationApi=l.grid.api.pagination,o.sizesLabel=r.getSafeText("pagination.sizes"),o.totalItemsLabel=r.getSafeText("pagination.totalItems"),o.paginationOf=r.getSafeText("pagination.of"),o.paginationThrough=r.getSafeText("pagination.through")};u(),o.$on(i.UPDATE_EVENT,u);var c=l.grid.options;l.grid.renderContainers.body.registerViewportAdjuster(function(e){return c.enablePaginationControls&&(e.height=e.height-n.elementHeight(a,"padding")),e});var d=l.grid.registerDataChangeCallback(function(e){e.options.useExternalPagination||(e.options.totalItems=e.rows.length)},[t.dataChange.ROW]);o.$on("$destroy",d);var f=o.$watch("grid.options.paginationCurrentPage + grid.options.paginationPageSize",function(t,n){t!==n&&void 0!==n&&(!angular.isNumber(c.paginationCurrentPage)||c.paginationCurrentPage<1?c.paginationCurrentPage=1:c.totalItems>0&&c.paginationCurrentPage>o.paginationApi.getTotalPages()?c.paginationCurrentPage=o.paginationApi.getTotalPages():e.onPaginationChanged(o.grid,c.paginationCurrentPage,c.paginationPageSize))});o.$on("$destroy",function(){f()}),o.cantPageForward=function(){return o.paginationApi.getTotalPages()?o.cantPageToLast():c.data.length<1},o.cantPageToLast=function(){var e=o.paginationApi.getTotalPages();return!e||c.paginationCurrentPage>=e},o.cantPageBackward=function(){return c.paginationCurrentPage<=1};var p=function(e){e&&n.focus.bySelector(a,".ui-grid-pager-control-input")};o.pageFirstPageClick=function(){o.paginationApi.seek(1),p(o.cantPageBackward())},o.pagePreviousPageClick=function(){o.paginationApi.previousPage(),p(o.cantPageBackward())},o.pageNextPageClick=function(){o.paginationApi.nextPage(),p(o.cantPageForward())},o.pageLastPageClick=function(){o.paginationApi.seek(o.paginationApi.getTotalPages()),p(o.cantPageToLast())}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.pinning",["ui.grid"]);e.constant("uiGridPinningConstants",{container:{LEFT:"left",RIGHT:"right",NONE:""}}),e.service("uiGridPinningService",["gridUtil","GridRenderContainer","i18nService","uiGridPinningConstants",function(e,t,n,r){var i={initializeGrid:function(e){i.defaultGridOptions(e.options),e.registerColumnBuilder(i.pinningColumnBuilder);var t={events:{pinning:{columnPinned:function(e,t){}}},methods:{pinning:{pinColumn:function(t,n){i.pinColumn(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enablePinning=!1!==e.enablePinning,e.hidePinLeft=e.enablePinning&&e.hidePinLeft,e.hidePinRight=e.enablePinning&&e.hidePinRight},pinningColumnBuilder:function(t,o,a){if(t.enablePinning=void 0===t.enablePinning?a.enablePinning:t.enablePinning,t.hidePinLeft=void 0===t.hidePinLeft?a.hidePinLeft:t.hidePinLeft,t.hidePinRight=void 0===t.hidePinRight?a.hidePinRight:t.hidePinRight,t.pinnedLeft?(o.renderContainer="left",o.grid.createLeftContainer()):t.pinnedRight&&(o.renderContainer="right",o.grid.createRightContainer()),t.enablePinning){var s={name:"ui.grid.pinning.pinLeft",title:n.get().pinning.pinLeft,icon:"ui-grid-icon-left-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"left"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,r.container.LEFT)}},l={name:"ui.grid.pinning.pinRight",title:n.get().pinning.pinRight,icon:"ui-grid-icon-right-open",shown:function(){return void 0===this.context.col.renderContainer||!this.context.col.renderContainer||"right"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,r.container.RIGHT)}},u={name:"ui.grid.pinning.unpin",title:n.get().pinning.unpin,icon:"ui-grid-icon-cancel",shown:function(){return void 0!==this.context.col.renderContainer&&null!==this.context.col.renderContainer&&"body"!==this.context.col.renderContainer},action:function(){i.pinColumn(this.context.col.grid,this.context.col,r.container.NONE)}};t.hidePinLeft||e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.pinLeft")||o.menuItems.push(s),t.hidePinRight||e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.pinRight")||o.menuItems.push(l),e.arrayContainsObjectWithProperty(o.menuItems,"name","ui.grid.pinning.unpin")||o.menuItems.push(u)}},pinColumn:function(e,t,n){n===r.container.NONE?(t.renderContainer=null,t.colDef.pinnedLeft=t.colDef.pinnedRight=!1):(t.renderContainer=n,n===r.container.LEFT?e.createLeftContainer():n===r.container.RIGHT&&e.createRightContainer()),e.refresh().then(function(){e.api.pinning.raise.columnPinned(t.colDef,n)})}};return i}]),e.directive("uiGridPinning",["gridUtil","uiGridPinningService",function(e,t){return{require:"uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){t.initializeGrid(i.grid)},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.resizeColumns",["ui.grid"]);e.service("uiGridResizeColumnsService",["gridUtil","$q","$rootScope",function(e,t,n){return{defaultGridOptions:function(e){e.enableColumnResizing=!1!==e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1)},colResizerColumnBuilder:function(e,n,r){var i=[];return e.enableColumnResizing=void 0===e.enableColumnResizing?r.enableColumnResizing:e.enableColumnResizing,!1===e.enableColumnResize&&(e.enableColumnResizing=!1),t.all(i)},registerPublicApi:function(e){var t={events:{colResizable:{columnSizeChanged:function(e,t){}}}};e.api.registerEventsFromObject(t.events)},fireColumnSizeChanged:function(t,r,i){n.$applyAsync(function(){t.api.colResizable?t.api.colResizable.raise.columnSizeChanged(r,i):e.logError("The resizeable api is not registered, this may indicate that you've included the module but not added the 'ui-grid-resize-columns' directive to your grid definition.  Cannot raise any events.")})},findTargetCol:function(e,t,n){var r=e.getRenderContainer();if("left"===t){var i=r.visibleColumnCache.indexOf(e);return r.visibleColumnCache[i-1*n]}return e}}}]),e.directive("uiGridResizeColumns",["gridUtil","uiGridResizeColumnsService",function(e,t){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){t.defaultGridOptions(i.grid.options),i.grid.registerColumnBuilder(t.colResizerColumnBuilder),t.registerPublicApi(i.grid)},post:function(e,t,n,r){}}}}}]),e.directive("uiGridHeaderCell",["gridUtil","$templateCache","$compile","$q","uiGridResizeColumnsService","uiGridConstants",function(e,t,n,r,i,o){return{priority:-10,require:"^uiGrid",compile:function(){return{post:function(e,r,a,s){var l=s.grid;if(l.options.enableColumnResizing){var u=t.get("ui-grid/columnResizer"),c=1;l.isRTL()&&(e.position="left",c=-1);var d=function(){for(var t=r[0].getElementsByClassName("ui-grid-column-resizer"),o=0;o<t.length;o++)angular.element(t[o]).remove();var a=i.findTargetCol(e.col,"left",c),s=e.col.getRenderContainer();if(a&&0!==s.visibleColumnCache.indexOf(e.col)&&!1!==a.colDef.enableColumnResizing){var l=angular.element(u).clone();l.attr("position","left"),r.prepend(l),n(l)(e)}if(!1!==e.col.colDef.enableColumnResizing){var d=angular.element(u).clone();d.attr("position","right"),r.append(d),n(d)(e)}};d();var f=function(){e.$applyAsync(d)},p=l.registerDataChangeCallback(f,[o.dataChange.COLUMN]);e.$on("$destroy",p)}}}}}}]),e.directive("uiGridColumnResizer",["$document","gridUtil","uiGridConstants","uiGridResizeColumnsService",function(e,t,n,r){var i=angular.element('<div class="ui-grid-resize-overlay"></div>');return{priority:0,scope:{col:"=",position:"@",renderIndex:"="},require:"?^uiGrid",link:function(o,a,s,l){function u(e){l.grid.refreshCanvas(!0).then(function(){l.grid.queueGridRefresh()})}function c(e,t){var n=t;return e.minWidth&&n<e.minWidth?n=e.minWidth:e.maxWidth&&n>e.maxWidth&&(n=e.maxWidth),n}function d(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),(h=(e.targetTouches?e.targetTouches[0]:e).clientX-g)<0?h=0:h>l.grid.gridWidth&&(h=l.grid.gridWidth);var a=r.findTargetCol(o.col,o.position,m);if(!1!==a.colDef.enableColumnResizing){l.grid.element.hasClass("column-resizing")||l.grid.element.addClass("column-resizing");var s=h-p,u=parseInt(a.drawnWidth+s*m,10);h+=(c(a,u)-u)*m,i.css({left:h+"px"}),l.fireEvent(n.events.ITEM_DRAGGING)}}function f(e,t){e.originalEvent&&(e=e.originalEvent),e.preventDefault(),l.grid.element.removeClass("column-resizing"),i.remove();var n=(h=(e.changedTouches?e.changedTouches[0]:e).clientX-g)-p;if(0===n)return b(),void y();var a=r.findTargetCol(o.col,o.position,m);if(!1!==a.colDef.enableColumnResizing){var s=parseInt(a.drawnWidth+n*m,10);a.width=c(a,s),a.hasCustomWidth=!0,u(n),r.fireColumnSizeChanged(l.grid,a.colDef,n),b(),y()}}var p=0,h=0,g=0,m=1;l.grid.isRTL()&&(o.position="left",m=-1),"left"===o.position?a.addClass("left"):"right"===o.position&&a.addClass("right");var v=function(t,n){t.originalEvent&&(t=t.originalEvent),t.stopPropagation(),g=l.grid.element[0].getBoundingClientRect().left,p=(t.targetTouches?t.targetTouches[0]:t).clientX-g,l.grid.element.append(i),i.css({left:p}),"touchstart"===t.type?(e.on("touchend",f),e.on("touchmove",d),a.off("mousedown",v)):(e.on("mouseup",f),e.on("mousemove",d),a.off("touchstart",v))},y=function(){a.on("mousedown",v),a.on("touchstart",v)},b=function(){e.off("mouseup",f),e.off("touchend",f),e.off("mousemove",d),e.off("touchmove",d),a.off("mousedown",v),a.off("touchstart",v)};y();var x=function(e,i){e.stopPropagation();var s=r.findTargetCol(o.col,o.position,m);if(!1!==s.colDef.enableColumnResizing){var d=0,f=0,p=t.closestElm(a,".ui-grid-render-container").querySelectorAll("."+n.COL_CLASS_PREFIX+s.uid+" .ui-grid-cell-contents");Array.prototype.forEach.call(p,function(e){var n;angular.element(e).parent().hasClass("ui-grid-header-cell")&&(n=angular.element(e).parent()[0].querySelectorAll(".ui-grid-column-menu-button")),t.fakeElement(e,{},function(e){var r=angular.element(e);r.attr("style","float: left");var i=t.elementWidth(r);n&&(i+=t.elementWidth(n)),i>d&&(d=i)})});var h=c(s,d);f=h-s.drawnWidth,s.width=h,s.hasCustomWidth=!0,u(f),r.fireColumnSizeChanged(l.grid,s.colDef,f)}};a.on("dblclick",x),a.on("$destroy",function(){a.off("dblclick",x),b()})}}}])}(),function(){"use strict";var e=angular.module("ui.grid.rowEdit",["ui.grid","ui.grid.edit","ui.grid.cellNav"]);e.constant("uiGridRowEditConstants",{}),e.service("uiGridRowEditService",["$interval","$q","uiGridConstants","uiGridRowEditConstants","gridUtil",function(e,t,n,r,i){var o={initializeGrid:function(e,t){t.rowEdit={};var n={events:{rowEdit:{saveRow:function(e){}}},methods:{rowEdit:{setSavePromise:function(e,n){o.setSavePromise(t,e,n)},getDirtyRows:function(){return t.rowEdit.dirtyRows?t.rowEdit.dirtyRows:[]},getErrorRows:function(){return t.rowEdit.errorRows?t.rowEdit.errorRows:[]},flushDirtyRows:function(){return o.flushDirtyRows(t)},setRowsDirty:function(e){o.setRowsDirty(t,e)},setRowsClean:function(e){o.setRowsClean(t,e)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.api.core.on.renderingComplete(e,function(n){t.api.edit.on.afterCellEdit(e,o.endEditCell),t.api.edit.on.beginCellEdit(e,o.beginEditCell),t.api.edit.on.cancelCellEdit(e,o.cancelEditCell),t.api.cellNav&&t.api.cellNav.on.navigate(e,o.navigate)})},defaultGridOptions:function(e){},saveRow:function(e,t){var n=this;return function(){if(t.isSaving=!0,t.rowEditSavePromise)return t.rowEditSavePromise;var r=e.api.rowEdit.raise.saveRow(t.entity);return t.rowEditSavePromise?t.rowEditSavePromise.then(n.processSuccessPromise(e,t),n.processErrorPromise(e,t)):i.logError("A promise was not returned when saveRow event was raised, either nobody is listening to event, or event handler did not return a promise"),r}},setSavePromise:function(e,t,n){e.getRow(t).rowEditSavePromise=n},processSuccessPromise:function(e,t){var n=this;return function(){delete t.isSaving,delete t.isDirty,delete t.isError,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,n.removeRow(e.rowEdit.errorRows,t),n.removeRow(e.rowEdit.dirtyRows,t)}},processErrorPromise:function(e,t){return function(){delete t.isSaving,delete t.rowEditSaveTimer,delete t.rowEditSavePromise,t.isError=!0,e.rowEdit.errorRows||(e.rowEdit.errorRows=[]),o.isRowPresent(e.rowEdit.errorRows,t)||e.rowEdit.errorRows.push(t)}},removeRow:function(e,t){void 0!==e&&null!==e&&e.forEach(function(n,r){n.uid===t.uid&&e.splice(r,1)})},isRowPresent:function(e,t){var n=!1;return e.forEach(function(e,r){e.uid===t.uid&&(n=!0)}),n},flushDirtyRows:function(e){var n=[];return e.api.rowEdit.getDirtyRows().forEach(function(t){o.cancelTimer(e,t),o.saveRow(e,t)(),n.push(t.rowEditSavePromise)}),t.all(n)},endEditCell:function(e,t,n,r){var a=this.grid,s=a.getRow(e);s?(n!==r||s.isDirty)&&(a.rowEdit.dirtyRows||(a.rowEdit.dirtyRows=[]),s.isDirty||(s.isDirty=!0,a.rowEdit.dirtyRows.push(s)),delete s.isError,o.considerSetTimer(a,s)):i.logError("Unable to find rowEntity in grid data, dirty flag cannot be set")},beginEditCell:function(e,t){var n=this.grid,r=n.getRow(e);r?o.cancelTimer(n,r):i.logError("Unable to find rowEntity in grid data, timer cannot be cancelled")},cancelEditCell:function(e,t){var n=this.grid,r=n.getRow(e);r?o.considerSetTimer(n,r):i.logError("Unable to find rowEntity in grid data, timer cannot be set")},navigate:function(e,t){var n=this.grid;e.row.rowEditSaveTimer&&o.cancelTimer(n,e.row),t&&t.row&&t.row!==e.row&&o.considerSetTimer(n,t.row)},considerSetTimer:function(t,n){if(o.cancelTimer(t,n),n.isDirty&&!n.isSaving&&-1!==t.options.rowEditWaitInterval){var r=t.options.rowEditWaitInterval?t.options.rowEditWaitInterval:2e3;n.rowEditSaveTimer=e(o.saveRow(t,n),r,1)}},cancelTimer:function(t,n){n.rowEditSaveTimer&&!n.isSaving&&(e.cancel(n.rowEditSaveTimer),delete n.rowEditSaveTimer)},setRowsDirty:function(e,t){var n;t.forEach(function(t,r){(n=e.getRow(t))?(e.rowEdit.dirtyRows||(e.rowEdit.dirtyRows=[]),n.isDirty||(n.isDirty=!0,e.rowEdit.dirtyRows.push(n)),delete n.isError,o.considerSetTimer(e,n)):i.logError("requested row not found in rowEdit.setRowsDirty, row was: "+t)})},setRowsClean:function(e,t){var n;t.forEach(function(t,r){(n=e.getRow(t))?(delete n.isDirty,o.removeRow(e.rowEdit.dirtyRows,n),o.cancelTimer(e,n),delete n.isError,o.removeRow(e.rowEdit.errorRows,n)):i.logError("requested row not found in rowEdit.setRowsClean, row was: "+t)})}};return o}]),e.directive("uiGridRowEdit",["gridUtil","uiGridRowEditService","uiGridEditConstants",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){t.initializeGrid(e,i.grid)},post:function(e,t,n,r){}}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,r){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),r=n.attr("ng-class"),i="";return i=r?r.slice(0,-1)+", 'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}":"{'ui-grid-row-dirty': row.isDirty, 'ui-grid-row-saving': row.isSaving, 'ui-grid-row-error': row.isError}",n.attr("ng-class",i),{pre:function(e,t,n,r){},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.saveState",["ui.grid","ui.grid.selection","ui.grid.cellNav","ui.grid.grouping","ui.grid.pinning","ui.grid.treeView"]);e.constant("uiGridSaveStateConstants",{featureName:"saveState"}),e.service("uiGridSaveStateService",["$q","uiGridSaveStateConstants","gridUtil","$compile","$interval","uiGridConstants",function(e,t,n,r,i,o){var a={initializeGrid:function(e){e.saveState={},this.defaultGridOptions(e.options);var t={events:{saveState:{}},methods:{saveState:{save:function(){return a.save(e)},restore:function(t,n){return a.restore(e,t,n)}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.saveWidths=!1!==e.saveWidths,e.saveOrder=!1!==e.saveOrder,e.saveScroll=!0===e.saveScroll,e.saveFocus=!0!==e.saveScroll&&!1!==e.saveFocus,e.saveVisible=!1!==e.saveVisible,e.saveSort=!1!==e.saveSort,e.saveFilter=!1!==e.saveFilter,e.saveSelection=!1!==e.saveSelection,e.saveGrouping=!1!==e.saveGrouping,e.saveGroupingExpandedStates=!0===e.saveGroupingExpandedStates,e.savePinning=!1!==e.savePinning,e.saveTreeView=!1!==e.saveTreeView},save:function(e){var t={};return t.columns=a.saveColumns(e),t.scrollFocus=a.saveScrollFocus(e),t.selection=a.saveSelection(e),t.grouping=a.saveGrouping(e),t.treeView=a.saveTreeView(e),t.pagination=a.savePagination(e),t},restore:function(e,t,n){return n.columns&&a.restoreColumns(e,n.columns),n.scrollFocus&&a.restoreScrollFocus(e,t,n.scrollFocus),n.selection&&a.restoreSelection(e,n.selection),n.grouping&&a.restoreGrouping(e,n.grouping),n.treeView&&a.restoreTreeView(e,n.treeView),n.pagination&&a.restorePagination(e,n.pagination),e.refresh()},saveColumns:function(e){var t=[];return e.getOnlyDataColumns().forEach(function(n){var r={};r.name=n.name,e.options.saveVisible&&(r.visible=n.visible),e.options.saveWidths&&(r.width=n.width),e.options.saveSort&&(r.sort=angular.copy(n.sort)),e.options.saveFilter&&(r.filters=[],n.filters.forEach(function(e){var t={};angular.forEach(e,function(e,n){"condition"!==n&&"$$hashKey"!==n&&"placeholder"!==n&&(t[n]=e)}),r.filters.push(t)})),e.api.pinning&&e.options.savePinning&&(r.pinned=n.renderContainer?n.renderContainer:""),t.push(r)}),t},saveScrollFocus:function(e){if(!e.api.cellNav)return{};var t={};if(e.options.saveFocus){t.focus=!0;var n=e.api.cellNav.getFocusedCell();null!==n&&(null!==n.col&&(t.colName=n.col.colDef.name),null!==n.row&&(t.rowVal=a.getRowVal(e,n.row)))}return(e.options.saveScroll||e.options.saveFocus&&!t.colName&&!t.rowVal)&&(t.focus=!1,e.renderContainers.body.prevRowScrollIndex&&(t.rowVal=a.getRowVal(e,e.renderContainers.body.visibleRowCache[e.renderContainers.body.prevRowScrollIndex])),e.renderContainers.body.prevColScrollIndex&&(t.colName=e.renderContainers.body.visibleColumnCache[e.renderContainers.body.prevColScrollIndex].name)),t},saveSelection:function(e){return e.api.selection&&e.options.saveSelection?e.api.selection.getSelectedGridRows().map(function(t){return a.getRowVal(e,t)}):[]},saveGrouping:function(e){return e.api.grouping&&e.options.saveGrouping?e.api.grouping.getGrouping(e.options.saveGroupingExpandedStates):{}},savePagination:function(e){return e.api.pagination&&e.options.paginationPageSize?{paginationCurrentPage:e.options.paginationCurrentPage,paginationPageSize:e.options.paginationPageSize}:{}},saveTreeView:function(e){return e.api.treeView&&e.options.saveTreeView?e.api.treeView.getTreeView():{}},getRowVal:function(e,t){if(!t)return null;var n={};return e.options.saveRowIdentity?(n.identity=!0,n.row=e.options.saveRowIdentity(t.entity)):(n.identity=!1,n.row=e.renderContainers.body.visibleRowCache.indexOf(t)),n},restoreColumns:function(e,t){var n=!1;t.forEach(function(t,r){var i=e.getColumn(t.name);if(i&&!e.isRowHeaderColumn(i)){!e.options.saveVisible||i.visible===t.visible&&i.colDef.visible===t.visible||(i.visible=t.visible,i.colDef.visible=t.visible,e.api.core.raise.columnVisibilityChanged(i)),e.options.saveWidths&&i.width!==t.width&&(i.width=t.width,i.hasCustomWidth=!0),!e.options.saveSort||angular.equals(i.sort,t.sort)||void 0===i.sort&&angular.isEmpty(t.sort)||(i.sort=angular.copy(t.sort),n=!0),e.options.saveFilter&&!angular.equals(i.filters,t.filters)&&(t.filters.forEach(function(e,t){angular.extend(i.filters[t],e),void 0!==e.term&&null!==e.term||delete i.filters[t].term}),e.api.core.raise.filterChanged()),e.api.pinning&&e.options.savePinning&&i.renderContainer!==t.pinned&&e.api.pinning.pinColumn(i,t.pinned);var o=e.getOnlyDataColumns().indexOf(i);if(-1!==o&&e.options.saveOrder&&o!==r){var a=e.columns.splice(o+e.rowHeaderColumns.length,1)[0];e.columns.splice(r+e.rowHeaderColumns.length,0,a)}}}),n&&e.api.core.raise.sortChanged(e,e.getColumnSorting())},restoreScrollFocus:function(e,t,n){if(e.api.cellNav){var r,i;if(n.colName){var o=e.options.columnDefs.filter(function(e){return e.name===n.colName});o.length>0&&(r=o[0])}n.rowVal&&n.rowVal.row&&(i=n.rowVal.identity?a.findRowByIdentity(e,n.rowVal):e.renderContainers.body.visibleRowCache[n.rowVal.row]);var s=i&&i.entity?i.entity:null;(r||s)&&(n.focus?e.api.cellNav.scrollToFocus(s,r):e.scrollTo(s,r))}},restoreSelection:function(e,t){e.api.selection&&(e.api.selection.clearSelectedRows(),t.forEach(function(t){if(t.identity){var n=a.findRowByIdentity(e,t);n&&e.api.selection.selectRow(n.entity)}else e.api.selection.selectRowByVisibleIndex(t.row)}))},restoreGrouping:function(e,t){e.api.grouping&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.grouping.setGrouping(t)},restoreTreeView:function(e,t){e.api.treeView&&void 0!==t&&null!==t&&!angular.equals(t,{})&&e.api.treeView.setTreeView(t)},restorePagination:function(e,t){e.api.pagination&&e.options.paginationPageSize&&(e.options.paginationCurrentPage=t.paginationCurrentPage,e.options.paginationPageSize=t.paginationPageSize)},findRowByIdentity:function(e,t){if(!e.options.saveRowIdentity)return null;var n=e.rows.filter(function(n){return e.options.saveRowIdentity(n.entity)===t.row});return n.length>0?n[0]:null}};return a}]),e.directive("uiGridSaveState",["uiGridSaveStateConstants","uiGridSaveStateService","gridUtil","$compile",function(e,t,n,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,link:function(e,n,r,i){t.initializeGrid(i.grid)}}}])}(),function(){"use strict";var e=angular.module("ui.grid.selection",["ui.grid"]);e.constant("uiGridSelectionConstants",{featureName:"selection",selectionRowHeaderColName:"selectionRowHeaderCol"}),angular.module("ui.grid").config(["$provide",function(e){e.decorator("GridRow",["$delegate",function(e){return e.prototype.setSelected=function(e){e!==this.isSelected&&(this.isSelected=e,this.grid.selection.selectedCount+=e?1:-1)},e}])}]),e.service("uiGridSelectionService",["$q","$templateCache","uiGridSelectionConstants","gridUtil",function(e,t,n,r){var i={initializeGrid:function(e){e.selection={},e.selection.lastSelectedRow=null,e.selection.selectAll=!1,e.selection.selectedCount=0,i.defaultGridOptions(e.options);var t={events:{selection:{rowSelectionChanged:function(e,t,n){},rowSelectionChangedBatch:function(e,t,n){}}},methods:{selection:{toggleRowSelection:function(t,n){var r=e.getRow(t);null!==r&&i.toggleRowSelection(e,r,n,e.options.multiSelect,e.options.noUnselect)},selectRow:function(t,n){var r=e.getRow(t);null===r||r.isSelected||i.toggleRowSelection(e,r,n,e.options.multiSelect,e.options.noUnselect)},selectRowByVisibleIndex:function(t,n){var r=e.renderContainers.body.visibleRowCache[t];null===r||void 0===r||r.isSelected||i.toggleRowSelection(e,r,n,e.options.multiSelect,e.options.noUnselect)},unSelectRow:function(t,n){var r=e.getRow(t);null!==r&&r.isSelected&&i.toggleRowSelection(e,r,n,e.options.multiSelect,e.options.noUnselect)},unSelectRowByVisibleIndex:function(t,n){var r=e.renderContainers.body.visibleRowCache[t];null!==r&&void 0!==r&&r.isSelected&&i.toggleRowSelection(e,r,n,e.options.multiSelect,e.options.noUnselect)},selectAllRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(r){r.isSelected||!1===r.enableSelection||!1===e.options.isRowSelectable(r)||(r.setSelected(!0),i.decideRaiseSelectionEvent(e,r,n,t))}),i.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},selectAllVisibleRows:function(t){if(!1!==e.options.multiSelect){var n=[];e.rows.forEach(function(r){r.visible?r.isSelected||!1===r.enableSelection||!1===e.options.isRowSelectable(r)||(r.setSelected(!0),i.decideRaiseSelectionEvent(e,r,n,t)):r.isSelected&&(r.setSelected(!1),i.decideRaiseSelectionEvent(e,r,n,t))}),i.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!0}},clearSelectedRows:function(t){i.clearSelectedRows(e,t)},getSelectedRows:function(){return i.getSelectedRows(e).map(function(e){return e.entity}).filter(function(e){return e.hasOwnProperty("$$hashKey")})},getSelectedGridRows:function(){return i.getSelectedRows(e)},getSelectedCount:function(){return e.selection.selectedCount},setMultiSelect:function(t){e.options.multiSelect=t},setModifierKeysToMultiSelect:function(t){e.options.modifierKeysToMultiSelect=t},getSelectAllState:function(){return e.selection.selectAll}}}};e.api.registerEventsFromObject(t.events),e.api.registerMethodsFromObject(t.methods)},defaultGridOptions:function(e){e.enableRowSelection=!1!==e.enableRowSelection,e.multiSelect=!1!==e.multiSelect,e.noUnselect=!0===e.noUnselect,e.modifierKeysToMultiSelect=!0===e.modifierKeysToMultiSelect,e.enableRowHeaderSelection=!1!==e.enableRowHeaderSelection,void 0===e.enableFullRowSelection&&(e.enableFullRowSelection=!e.enableRowHeaderSelection),e.enableSelectAll=!1!==e.enableSelectAll,e.enableSelectionBatchEvent=!1!==e.enableSelectionBatchEvent,e.selectionRowHeaderWidth=angular.isDefined(e.selectionRowHeaderWidth)?e.selectionRowHeaderWidth:30,e.enableFooterTotalSelected=!1!==e.enableFooterTotalSelected,e.isRowSelectable=angular.isDefined(e.isRowSelectable)?e.isRowSelectable:angular.noop},toggleRowSelection:function(e,t,n,r,o){var a=t.isSelected;if(!1!==t.enableSelection||a){var s;r||a?!r&&a&&(s=i.getSelectedRows(e)).length>1&&(a=!1,i.clearSelectedRows(e,n)):i.clearSelectedRows(e,n),a&&o||(t.setSelected(!a),!0===t.isSelected&&(e.selection.lastSelectedRow=t),s=i.getSelectedRows(e),e.selection.selectAll=e.rows.length===s.length,e.api.selection.raise.rowSelectionChanged(t,n))}},shiftSelect:function(e,t,n,r){if(r){var o=i.getSelectedRows(e).length>0?e.renderContainers.body.visibleRowCache.indexOf(e.selection.lastSelectedRow):0,a=e.renderContainers.body.visibleRowCache.indexOf(t);if(o>a){var s=o;o=a,a=s}for(var l=[],u=o;u<=a;u++){var c=e.renderContainers.body.visibleRowCache[u];c&&(c.isSelected||!1===c.enableSelection||(c.setSelected(!0),e.selection.lastSelectedRow=c,i.decideRaiseSelectionEvent(e,c,l,n)))}i.decideRaiseSelectionBatchEvent(e,l,n)}},getSelectedRows:function(e){return e.rows.filter(function(e){return e.isSelected})},clearSelectedRows:function(e,t){var n=[];i.getSelectedRows(e).forEach(function(r){r.isSelected&&(r.setSelected(!1),i.decideRaiseSelectionEvent(e,r,n,t))}),i.decideRaiseSelectionBatchEvent(e,n,t),e.selection.selectAll=!1,e.selection.selectedCount=0},decideRaiseSelectionEvent:function(e,t,n,r){e.options.enableSelectionBatchEvent?n.push(t):e.api.selection.raise.rowSelectionChanged(t,r)},decideRaiseSelectionBatchEvent:function(e,t,n){t.length>0&&e.api.selection.raise.rowSelectionChangedBatch(t,n)}};return i}]),e.directive("uiGridSelection",["uiGridSelectionConstants","uiGridSelectionService","$templateCache","uiGridConstants",function(e,t,n,r){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(n,i,o,a){if(t.initializeGrid(a.grid),a.grid.options.enableRowHeaderSelection){var s={name:e.selectionRowHeaderColName,displayName:"",width:a.grid.options.selectionRowHeaderWidth,minWidth:10,cellTemplate:"ui-grid/selectionRowHeader",headerCellTemplate:"ui-grid/selectionHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};a.grid.addRowHeaderColumn(s,0)}var l=!1,u=function(e){return e.forEach(function(e){e.enableSelection=a.grid.options.isRowSelectable(e)}),e},c=function(){a.grid.options.isRowSelectable!==angular.noop&&!0!==l&&(a.grid.registerRowsProcessor(u,500),l=!0)};c();var d=a.grid.registerDataChangeCallback(c,[r.dataChange.OPTIONS]);n.$on("$destroy",d)},post:function(e,t,n,r){}}}}}]),e.directive("uiGridSelectionRowHeaderButtons",["$templateCache","uiGridSelectionService","gridUtil",function(e,t,n){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,r,i,o){function a(e,t){32===t.keyCode&&(t.preventDefault(),s(e,t))}function s(e,n){if(n.stopPropagation(),n.shiftKey)t.shiftSelect(u,e,n,u.options.multiSelect);else if(n.ctrlKey||n.metaKey)t.toggleRowSelection(u,e,n,u.options.multiSelect,u.options.noUnselect);else if(e.groupHeader)for(var r=0;r<e.treeNode.children.length;r++)t.toggleRowSelection(u,e.treeNode.children[r].row,n,u.options.multiSelect,u.options.noUnselect);else t.toggleRowSelection(u,e,n,u.options.multiSelect&&!u.options.modifierKeysToMultiSelect,u.options.noUnselect)}function l(e){(e.ctrlKey||e.shiftKey)&&(e.target.onselectstart=function(){return!1},window.setTimeout(function(){e.target.onselectstart=null},0))}var u=o.grid;e.selectButtonClick=s,e.selectButtonKeyDown=a,"ie"===n.detectBrowser()&&r.on("mousedown",l),e.$on("$destroy",function(){r.off()})}}}]),e.directive("uiGridSelectionSelectAllButtons",["$templateCache","uiGridSelectionService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/selectionSelectAllButtons"),scope:!1,link:function(e,n,r,i){var o=e.col.grid;e.headerButtonKeyDown=function(t){32!==t.keyCode&&13!==t.keyCode||(t.preventDefault(),e.headerButtonClick(t))},e.headerButtonClick=function(e){o.selection.selectAll?(t.clearSelectedRows(o,e),o.options.noUnselect&&o.api.selection.selectRowByVisibleIndex(0,e),o.selection.selectAll=!1):o.options.multiSelect&&(o.api.selection.selectAllVisibleRows(e),o.selection.selectAll=!0)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService",function(e,t,n,r,i,o){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e[0].querySelector(".ui-grid-canvas:not(.ui-grid-empty-base-layer-container)").children[0]),r=n.attr("ng-class"),i="";return i=r?r.slice(0,-1)+",'ui-grid-row-selected': row.isSelected}":"{'ui-grid-row-selected': row.isSelected}",n.attr("ng-class",i),{pre:function(e,t,n,r){},post:function(e,t,n,r){}}}}}]),e.directive("uiGridCell",["$compile","uiGridConstants","uiGridSelectionConstants","gridUtil","$parse","uiGridSelectionService","$timeout",function(e,t,n,r,i,o,a){return{priority:-200,restrict:"A",require:"?^uiGrid",scope:!1,link:function(e,n,r,i){function s(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&!n.hasClass("ui-grid-row-header-cell")&&(n.addClass("ui-grid-disable-selection"),n.on("touchstart",d),n.on("touchend",f),n.on("click",c),e.registered=!0)}function l(){e.registered&&(n.removeClass("ui-grid-disable-selection"),n.off("touchstart",d),n.off("touchend",f),n.off("click",c),e.registered=!1)}var u=0;i.grid.api.cellNav&&i.grid.api.cellNav.on.viewPortKeyDown(e,function(t,n){null!==n&&n.row===e.row&&n.col===e.col&&32===t.keyCode&&"selectionRowHeaderCol"===e.col.colDef.name&&(t.preventDefault(),o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply())});var c=function(t){"ui-grid-icon-minus-squared"!==t.target.className&&"ui-grid-icon-plus-squared"!==t.target.className&&(n.off("touchend",f),t.shiftKey?o.shiftSelect(e.grid,e.row,t,e.grid.options.multiSelect):t.ctrlKey||t.metaKey?o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect,e.grid.options.noUnselect):o.toggleRowSelection(e.grid,e.row,t,e.grid.options.multiSelect&&!e.grid.options.modifierKeysToMultiSelect,e.grid.options.noUnselect),e.$apply(),a(function(){n.on("touchend",f)},300))},d=function(e){u=(new Date).getTime(),n.off("click",c)},f=function(e){(new Date).getTime()-u<300&&c(e),a(function(){n.on("click",c)},300)};s();var p=e.grid.registerDataChangeCallback(function(){e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection&&!e.registered?s():e.grid.options.enableRowSelection&&e.grid.options.enableFullRowSelection||!e.registered||l()},[t.dataChange.OPTIONS]);n.on("$destroy",p)}}}]),e.directive("uiGridGridFooter",["$compile","uiGridConstants","gridUtil",function(e,t,n){return{restrict:"EA",replace:!0,priority:-1e3,require:"^uiGrid",scope:!0,compile:function(t,r){return{pre:function(t,r,i,o){o.grid.options.showGridFooter&&n.getTemplate("ui-grid/gridFooterSelectedItems").then(function(n){var i=angular.element(n),o=e(i)(t);angular.element(r[0].getElementsByClassName("ui-grid-grid-footer")[0]).append(o)})},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.treeBase",["ui.grid"]);e.constant("uiGridTreeBaseConstants",{featureName:"treeBase",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeBaseService",["$q","uiGridTreeBaseConstants","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants","rowSorter",function(e,t,n,r,i,o,a,s){var l={initializeGrid:function(e,t){e.treeBase={},e.treeBase.numberLevels=0,e.treeBase.expandAll=!1,e.treeBase.tree=[],l.defaultGridOptions(e.options),e.registerRowsProcessor(l.treeRows,410),e.registerColumnBuilder(l.treeBaseColumnBuilder),l.createRowHeader(e);var n={events:{treeBase:{rowExpanded:{},rowCollapsed:{}}},methods:{treeBase:{expandAllRows:function(){l.expandAllRows(e)},collapseAllRows:function(){l.collapseAllRows(e)},toggleRowTreeState:function(t){l.toggleRowTreeState(e,t)},expandRow:function(t,n){l.expandRow(e,t,n)},expandRowChildren:function(t){l.expandRowChildren(e,t)},collapseRow:function(t){l.collapseRow(e,t)},collapseRowChildren:function(t){l.collapseRowChildren(e,t)},getTreeExpandedState:function(){return{expandedState:l.getTreeState(e)}},setTreeState:function(t){l.setTreeState(e,t)},getRowChildren:function(e){return e.treeNode.children.map(function(e){return e.row})}}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.treeRowHeaderBaseWidth=e.treeRowHeaderBaseWidth||30,e.treeIndent=e.treeIndent||10,e.showTreeRowHeader=!1!==e.showTreeRowHeader,e.showTreeExpandNoChildren=!1!==e.showTreeExpandNoChildren,e.treeRowHeaderAlwaysVisible=!1!==e.treeRowHeaderAlwaysVisible,e.treeCustomAggregations=e.treeCustomAggregations||{},e.enableExpandAll=!1!==e.enableExpandAll},treeBaseColumnBuilder:function(e,t,n){void 0!==e.customTreeAggregationFn&&(t.treeAggregationFn=e.customTreeAggregationFn),void 0!==e.treeAggregationType&&(t.treeAggregation={type:e.treeAggregationType},void 0!==n.treeCustomAggregations[e.treeAggregationType]?(t.treeAggregationFn=n.treeCustomAggregations[e.treeAggregationType].aggregationFn,t.treeAggregationFinalizerFn=n.treeCustomAggregations[e.treeAggregationType].finalizerFn,t.treeAggregation.label=n.treeCustomAggregations[e.treeAggregationType].label):void 0!==l.nativeAggregations()[e.treeAggregationType]&&(t.treeAggregationFn=l.nativeAggregations()[e.treeAggregationType].aggregationFn,t.treeAggregation.label=l.nativeAggregations()[e.treeAggregationType].label)),void 0!==e.treeAggregationLabel&&(void 0===t.treeAggregation&&(t.treeAggregation={}),t.treeAggregation.label=e.treeAggregationLabel),t.treeAggregationUpdateEntity=!1!==e.treeAggregationUpdateEntity,void 0===t.customTreeAggregationFinalizerFn&&(t.customTreeAggregationFinalizerFn=e.customTreeAggregationFinalizerFn)},createRowHeader:function(e){var n={name:t.rowHeaderColName,displayName:"",width:e.options.treeRowHeaderBaseWidth,minWidth:10,cellTemplate:"ui-grid/treeBaseRowHeader",headerCellTemplate:"ui-grid/treeBaseHeaderCell",enableColumnResizing:!1,enableColumnMenu:!1,exporterSuppressExport:!0,allowCellFocus:!0};n.visible=e.options.treeRowHeaderAlwaysVisible,e.addRowHeaderColumn(n,-100)},expandAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.EXPANDED)}),e.treeBase.expandAll=!0,e.queueGridRefresh()},collapseAllRows:function(e){e.treeBase.tree.forEach(function(n){l.setAllNodes(e,n,t.COLLAPSED)}),e.treeBase.expandAll=!1,e.queueGridRefresh()},setAllNodes:function(e,n,r){void 0!==n.state&&n.state!==r&&(n.state=r,r===t.EXPANDED?e.api.treeBase.raise.rowExpanded(n.row):e.api.treeBase.raise.rowCollapsed(n.row)),n.children&&n.children.forEach(function(t){l.setAllNodes(e,t,r)})},toggleRowTreeState:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(n.treeNode.state===t.EXPANDED?l.collapseRow(e,n):l.expandRow(e,n,!1),e.queueGridRefresh())},expandRow:function(e,n,r){if(r){for(var i=[];n&&void 0!==n.treeLevel&&null!==n.treeLevel&&n.treeLevel>=0&&n.treeNode.state!==t.EXPANDED;)i.push(n),n=n.treeNode.parentRow;if(i.length>0){for(n=i.pop();n;)n.treeNode.state=t.EXPANDED,e.api.treeBase.raise.rowExpanded(n),n=i.pop();e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh()}}else{if(void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0)return;n.treeNode.state!==t.EXPANDED&&(n.treeNode.state=t.EXPANDED,e.api.treeBase.raise.rowExpanded(n),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())}},expandRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.EXPANDED),e.treeBase.expandAll=l.allExpanded(e.treeBase.tree),e.queueGridRefresh())},collapseRow:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||n.treeNode.state!==t.COLLAPSED&&(n.treeNode.state=t.COLLAPSED,e.treeBase.expandAll=!1,e.api.treeBase.raise.rowCollapsed(n),e.queueGridRefresh())},collapseRowChildren:function(e,n){void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0||(l.setAllNodes(e,n.treeNode,t.COLLAPSED),e.treeBase.expandAll=!1,e.queueGridRefresh())},allExpanded:function(e){var t=!0;return e.forEach(function(e){l.allExpandedInternal(e)||(t=!1)}),t},allExpandedInternal:function(e){if(e.children&&e.children.length>0){if(e.state===t.COLLAPSED)return!1;var n=!0;return e.children.forEach(function(e){l.allExpandedInternal(e)||(n=!1)}),n}return!0},treeRows:function(e){if(0===e.length)return e;var n=this;t.EXPANDED;return n.treeBase.tree=l.createTree(n,e),l.updateRowHeaderWidth(n),l.sortTree(n),l.fixFilter(n),l.renderTree(n.treeBase.tree)},updateRowHeaderWidth:function(e){var n=e.getColumn(t.rowHeaderColName),r=e.options.treeRowHeaderBaseWidth+e.options.treeIndent*Math.max(e.treeBase.numberLevels-1,0);n&&r!==n.width&&(n.width=r,e.queueRefresh());var i=!0;!1===e.options.showTreeRowHeader&&(i=!1),!1===e.options.treeRowHeaderAlwaysVisible&&e.treeBase.numberLevels<=0&&(i=!1),n&&n.visible!==i&&(n.visible=i,n.colDef.visible=i,e.queueGridRefresh())},renderTree:function(e){var n=[];return e.forEach(function(e){e.row.visible&&n.push(e.row),e.state===t.EXPANDED&&e.children&&e.children.length>0&&(n=n.concat(l.renderTree(e.children)))}),n},createTree:function(e,n){var r,i=-1,o=[];e.treeBase.tree=[],e.treeBase.numberLevels=0;var a=l.getAggregations(e),s=function(n){if(void 0!==n.entity.$$treeLevel&&n.treeLevel!==n.entity.$$treeLevel&&(n.treeLevel=n.entity.$$treeLevel),n.treeLevel<=i){for(;n.treeLevel<=i;){var s=o.pop();l.finaliseAggregations(s),i--}r=o.length>0?l.setCurrentState(o):t.EXPANDED}(void 0===n.treeLevel||null===n.treeLevel||n.treeLevel<0)&&n.visible&&l.aggregate(e,n,o),l.addOrUseNode(e,n,o,a),void 0!==n.treeLevel&&null!==n.treeLevel&&n.treeLevel>=0&&(o.push(n),i++,r=l.setCurrentState(o)),e.treeBase.numberLevels<n.treeLevel+1&&(e.treeBase.numberLevels=n.treeLevel+1)};for(n.forEach(s);o.length>0;){var u=o.pop();l.finaliseAggregations(u)}return e.treeBase.tree},addOrUseNode:function(e,n,r,i){var o=[];i.forEach(function(e){o.push(l.buildAggregationObject(e.col))});var a={state:t.COLLAPSED,row:n,parentRow:null,aggregations:o,children:[]};n.treeNode&&(a.state=n.treeNode.state),r.length>0&&(a.parentRow=r[r.length-1]),n.treeNode=a,0===r.length?e.treeBase.tree.push(a):r[r.length-1].treeNode.children.push(a)},setCurrentState:function(e){var n=t.EXPANDED;return e.forEach(function(e){e.treeNode.state===t.COLLAPSED&&(n=t.COLLAPSED)}),n},sortTree:function(e){e.columns.forEach(function(e){e.sort&&e.sort.ignoreSort&&delete e.sort.ignoreSort}),e.treeBase.tree=l.sortInternal(e,e.treeBase.tree)},sortInternal:function(e,n){var r=n.map(function(e){return e.row}),i=(r=s.sort(e,r,e.columns)).map(function(e){return e.treeNode});return i.forEach(function(n){n.state===t.EXPANDED&&n.children&&n.children.length>0&&(n.children=l.sortInternal(e,n.children))}),i},fixFilter:function(e){var t;e.treeBase.tree.forEach(function(e){e.children&&e.children.length>0&&(t=e.row.visible,l.fixFilterInternal(e.children,t))})},fixFilterInternal:function(e,t){return e.forEach(function(e){e.row.visible&&!t&&(l.setParentsVisible(e),t=!0),e.children&&e.children.length>0&&l.fixFilterInternal(e.children,t&&e.row.visible)&&(t=!0)}),t},setParentsVisible:function(e){for(;e.parentRow;)e.parentRow.visible=!0,e=e.parentRow.treeNode},buildAggregationObject:function(e){var t={col:e};return e.treeAggregation&&e.treeAggregation.type&&(t.type=e.treeAggregation.type),e.treeAggregation&&e.treeAggregation.label&&(t.label=e.treeAggregation.label),t},getAggregations:function(e){var t=[];return e.columns.forEach(function(n){void 0!==n.treeAggregationFn&&(t.push(l.buildAggregationObject(n)),e.options.showColumnFooter&&void 0===n.colDef.aggregationType&&n.treeAggregation&&(n.treeFooterAggregation=l.buildAggregationObject(n),n.aggregationType=l.treeFooterAggregationType))}),t},aggregate:function(e,t,n){0===n.length&&t.treeNode&&t.treeNode.aggregations&&t.treeNode.aggregations.forEach(function(n){if(void 0!==n.col.treeFooterAggregation){var r=e.getCellValue(t,n.col),i=Number(r);n.col.treeAggregationFn(n.col.treeFooterAggregation,r,i,t)}}),n.forEach(function(n,r){n.treeNode.aggregations&&n.treeNode.aggregations.forEach(function(n){var i=e.getCellValue(t,n.col),o=Number(i);n.col.treeAggregationFn(n,i,o,t),0===r&&void 0!==n.col.treeFooterAggregation&&n.col.treeAggregationFn(n.col.treeFooterAggregation,i,o,t)})})},nativeAggregations:function(){return{count:{label:o.get().aggregation.count,menuTitle:o.get().grouping.aggregate_count,aggregationFn:function(e,t,n){void 0===e.value?e.value=1:e.value++}},sum:{label:o.get().aggregation.sum,menuTitle:o.get().grouping.aggregate_sum,aggregationFn:function(e,t,n){isNaN(n)||(void 0===e.value?e.value=n:e.value+=n)}},min:{label:o.get().aggregation.min,menuTitle:o.get().grouping.aggregate_min,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t<e.value||null===e.value)&&(e.value=t)}},max:{label:o.get().aggregation.max,menuTitle:o.get().grouping.aggregate_max,aggregationFn:function(e,t,n){void 0===e.value?e.value=t:void 0!==t&&null!==t&&(t>e.value||null===e.value)&&(e.value=t)}},avg:{label:o.get().aggregation.avg,menuTitle:o.get().grouping.aggregate_avg,aggregationFn:function(e,t,n){void 0===e.count?e.count=1:e.count++,isNaN(n)||(void 0===e.value||void 0===e.sum?(e.value=n,e.sum=n):(e.sum+=n,e.value=e.sum/e.count))}}}},finaliseAggregation:function(e,t){t.col.treeAggregationUpdateEntity&&void 0!==e&&void 0!==e.entity["$$"+t.col.uid]&&angular.extend(t,e.entity["$$"+t.col.uid]),"function"==typeof t.col.treeAggregationFinalizerFn&&t.col.treeAggregationFinalizerFn(t),"function"==typeof t.col.customTreeAggregationFinalizerFn&&t.col.customTreeAggregationFinalizerFn(t),void 0===t.rendered&&(t.rendered=t.label?t.label+t.value:t.value)},finaliseAggregations:function(e){null!=e&&void 0!==e.treeNode.aggregations&&e.treeNode.aggregations.forEach(function(t){if(l.finaliseAggregation(e,t),t.col.treeAggregationUpdateEntity){var n={};angular.forEach(t,function(e,r){t.hasOwnProperty(r)&&"col"!==r&&(n[r]=e)}),e.entity["$$"+t.col.uid]=n}})},treeFooterAggregationType:function(e,t){return l.finaliseAggregation(void 0,t.treeFooterAggregation),void 0===t.treeFooterAggregation.value||null===t.treeFooterAggregation.rendered?"":t.treeFooterAggregation.rendered}};return l}]),e.directive("uiGridTreeBaseRowHeaderButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseRowHeaderButtons"),scope:!0,require:"^uiGrid",link:function(e,n,r,i){var o=i.grid;e.treeButtonClick=function(e,n){t.toggleRowTreeState(o,e,n)}}}}]),e.directive("uiGridTreeBaseExpandAllButtons",["$templateCache","uiGridTreeBaseService",function(e,t){return{replace:!0,restrict:"E",template:e.get("ui-grid/treeBaseExpandAllButtons"),scope:!1,link:function(e,n,r,i){var o=e.col.grid;e.headerButtonClick=function(e,n){o.treeBase.expandAll?t.collapseAllRows(o,n):t.expandAllRows(o,n)}}}}]),e.directive("uiGridViewport",["$compile","uiGridConstants","gridUtil","$parse",function(e,t,n,r){return{priority:-200,scope:!1,compile:function(e,t){var n=angular.element(e.children().children()[0]),r=n.attr("ng-class"),i="";return i=r?r.slice(0,-1)+",'ui-grid-tree-header-row': row.treeLevel > -1}":"{'ui-grid-tree-header-row': row.treeLevel > -1}",n.attr("ng-class",i),{pre:function(e,t,n,r){},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.treeView",["ui.grid","ui.grid.treeBase"]);e.constant("uiGridTreeViewConstants",{featureName:"treeView",rowHeaderColName:"treeBaseRowHeaderCol",EXPANDED:"expanded",COLLAPSED:"collapsed",aggregation:{COUNT:"count",SUM:"sum",MAX:"max",MIN:"min",AVG:"avg"}}),e.service("uiGridTreeViewService",["$q","uiGridTreeViewConstants","uiGridTreeBaseConstants","uiGridTreeBaseService","gridUtil","GridRow","gridClassFactory","i18nService","uiGridConstants",function(e,t,n,r,i,o,a,s,l){var u={initializeGrid:function(e,t){r.initializeGrid(e,t),e.treeView={},e.registerRowsProcessor(u.adjustSorting,60);var n={events:{treeView:{}},methods:{treeView:{}}};e.api.registerEventsFromObject(n.events),e.api.registerMethodsFromObject(n.methods)},defaultGridOptions:function(e){e.enableTreeView=!1!==e.enableTreeView},adjustSorting:function(e){return this.columns.forEach(function(e){e.sort&&(e.sort.ignoreSort=!0)}),e}};return u}]),e.directive("uiGridTreeView",["uiGridTreeViewConstants","uiGridTreeViewService","$templateCache",function(e,t,n){return{replace:!0,priority:0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){!1!==i.grid.options.enableTreeView&&t.initializeGrid(i.grid,e)},post:function(e,t,n,r){}}}}}])}(),function(){"use strict";var e=angular.module("ui.grid.validate",["ui.grid"]);e.service("uiGridValidateService",["$sce","$q","$http","i18nService","uiGridConstants",function(e,t,n,r,i){var o={validatorFactories:{},setExternalFactoryFunction:function(e){o.externalFactoryFunction=e},clearExternalFactory:function(){delete o.externalFactoryFunction},getValidatorFromExternalFactory:function(e,t){return o.externalFactoryFunction(e,t).validatorFactory(t)},getMessageFromExternalFactory:function(e,t){return o.externalFactoryFunction(e,t).messageFunction(t)},setValidator:function(e,t,n){o.validatorFactories[e]={validatorFactory:t,messageFunction:n}},getValidator:function(e,t){if(o.externalFactoryFunction){var n=o.getValidatorFromExternalFactory(e,t);if(n)return n}if(!o.validatorFactories[e])throw"Invalid validator name: "+e;return o.validatorFactories[e].validatorFactory(t)},getMessage:function(e,t){if(o.externalFactoryFunction){var n=o.getMessageFromExternalFactory(e,t);if(n)return n}return o.validatorFactories[e].messageFunction(t)},isInvalid:function(e,t){return e["$$invalid"+t.name]},setInvalid:function(e,t){e["$$invalid"+t.name]=!0},setValid:function(e,t){delete e["$$invalid"+t.name]},setError:function(e,t,n){e["$$errors"+t.name]||(e["$$errors"+t.name]={}),e["$$errors"+t.name][n]=!0},clearError:function(e,t,n){e["$$errors"+t.name]&&n in e["$$errors"+t.name]&&delete e["$$errors"+t.name][n]},getErrorMessages:function(e,t){var n=[];return e["$$errors"+t.name]&&0!==Object.keys(e["$$errors"+t.name]).length?(Object.keys(e["$$errors"+t.name]).sort().forEach(function(e){n.push(o.getMessage(e,t.validators[e]))}),n):n},getFormattedErrors:function(t,n){var i="",a=o.getErrorMessages(t,n);if(a.length)return a.forEach(function(e){i+=e+"<br/>"}),e.trustAsHtml("<p><b>"+r.getSafeText("validate.error")+"</b></p>"+i)},getTitleFormattedErrors:function(t,n){var i="",a=o.getErrorMessages(t,n);if(a.length)return a.forEach(function(e){i+=e+"\n"}),e.trustAsHtml(r.getSafeText("validate.error")+"\n"+i)},runValidators:function(e,n,r,i,a){if(r!==i){if(void 0===n.name||!n.name)throw new Error("colDef.name is required to perform validation");o.setValid(e,n);var s=[];for(var l in n.validators){o.clearError(e,n,l);var u=o.getValidator(l,n.validators[l]),c=t.when(u(i,r,e,n)).then(function(e,t,n){return function(s){s||(o.setInvalid(e,t),o.setError(e,t,n),a&&a.api.validate.raise.validationFailed(e,t,r,i))}}(e,n,l));s.push(c)}return t.all(s)}},createDefaultValidators:function(){o.setValidator("minLength",function(e){return function(t,n,r,i){return void 0===n||null===n||""===n||n.length>=e}},function(e){return r.getSafeText("validate.minLength").replace("THRESHOLD",e)}),o.setValidator("maxLength",function(e){return function(t,n,r,i){return void 0===n||null===n||""===n||n.length<=e}},function(e){return r.getSafeText("validate.maxLength").replace("THRESHOLD",e)}),o.setValidator("required",function(e){return function(t,n,r,i){return!e||!(void 0===n||null===n||""===n)}},function(e){return r.getSafeText("validate.required")})},initializeGrid:function(e,t){t.validate={isInvalid:o.isInvalid,getFormattedErrors:o.getFormattedErrors,getTitleFormattedErrors:o.getTitleFormattedErrors,runValidators:o.runValidators};var n={events:{validate:{validationFailed:function(e,t,n,r){}}},methods:{validate:{isInvalid:function(e,n){return t.validate.isInvalid(e,n)},getErrorMessages:function(e,n){return t.validate.getErrorMessages(e,n)},getFormattedErrors:function(e,n){return t.validate.getFormattedErrors(e,n)},getTitleFormattedErrors:function(e,n){return t.validate.getTitleFormattedErrors(e,n)}}}};t.api.registerEventsFromObject(n.events),t.api.registerMethodsFromObject(n.methods),t.edit&&t.api.edit.on.afterCellEdit(e,function(e,n,r,i){t.validate.runValidators(e,n,r,i,t)}),o.createDefaultValidators()}};return o}]),e.directive("uiGridValidate",["gridUtil","uiGridValidateService",function(e,t){return{priority:0,replace:!0,require:"^uiGrid",scope:!1,compile:function(){return{pre:function(e,n,r,i){t.initializeGrid(e,i.grid)},post:function(e,t,n,r){}}}}}])}(),angular.module("ui.grid").run(["$templateCache",function(e){"use strict";e.put("ui-grid/ui-grid-filter",'<div class="ui-grid-filter-container" ng-style="col.extraStyle" ng-repeat="colFilter in col.filters" ng-class="{\'ui-grid-filter-cancel-button-hidden\' : colFilter.disableCancelFilterButton === true }"><div ng-if="colFilter.type !== \'select\'"><input type="text" class="ui-grid-filter-input ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-attr-placeholder="{{colFilter.placeholder || \'\'}}" aria-label="{{colFilter.ariaLabel || aria.defaultFilterLabel}}"><div role="button" class="ui-grid-filter-button" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term !== null && colFilter.term !== \'\'"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div><div ng-if="colFilter.type === \'select\'"><select class="ui-grid-filter-select ui-grid-filter-input-{{$index}}" ng-model="colFilter.term" ng-show="colFilter.selectOptions.length > 0" ng-attr-placeholder="{{colFilter.placeholder || aria.defaultFilterLabel}}" aria-label="{{colFilter.ariaLabel || \'\'}}" ng-options="option.value as option.label for option in colFilter.selectOptions"><option value=""></option></select><div role="button" class="ui-grid-filter-button-select" ng-click="removeFilter(colFilter, $index)" ng-if="!colFilter.disableCancelFilterButton" ng-disabled="colFilter.term === undefined || colFilter.term === null || colFilter.term === \'\'" ng-show="colFilter.term !== undefined && colFilter.term != null"><i class="ui-grid-icon-cancel" ui-grid-one-bind-aria-label="aria.removeFilter">&nbsp;</i></div></div></div>'),e.put("ui-grid/ui-grid-footer",'<div class="ui-grid-footer-panel ui-grid-footer-aggregates-row">\x3c!-- tfooter --\x3e<div class="ui-grid-footer ui-grid-footer-viewport"><div class="ui-grid-footer-canvas"><div class="ui-grid-footer-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-footer-cell-row"><div ui-grid-footer-cell role="gridcell" ng-repeat="col in colContainer.renderedColumns track by col.uid" col="col" render-index="$index" class="ui-grid-footer-cell ui-grid-clearfix"></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-grid-footer",'<div class="ui-grid-footer-info ui-grid-grid-footer"><span>{{\'search.totalItems\' | t}} {{grid.rows.length}}</span> <span ng-if="grid.renderContainers.body.visibleRowCache.length !== grid.rows.length" class="ngLabel">({{"search.showingItems" | t}} {{grid.renderContainers.body.visibleRowCache.length}})</span></div>'),e.put("ui-grid/ui-grid-header",'<div role="rowgroup" class="ui-grid-header">\x3c!-- theader --\x3e<div class="ui-grid-top-panel"><div class="ui-grid-header-viewport"><div class="ui-grid-header-canvas"><div class="ui-grid-header-cell-wrapper" ng-style="colContainer.headerCellWrapperStyle()"><div role="row" class="ui-grid-header-cell-row"><div class="ui-grid-header-cell ui-grid-clearfix" ng-repeat="col in colContainer.renderedColumns track by col.uid" ui-grid-header-cell col="col" render-index="$index"></div></div></div></div></div></div></div>'),e.put("ui-grid/ui-grid-menu-button",'<div class="ui-grid-menu-button"><div role="button" ui-grid-one-bind-id-grid="\'grid-menu\'" class="ui-grid-icon-container" ng-click="toggleMenu()" aria-haspopup="true"><i class="ui-grid-icon-menu" ui-grid-one-bind-aria-label="i18n.aria.buttonLabel">&nbsp;</i></div><div ui-grid-menu menu-items="menuItems"></div></div>'),e.put("ui-grid/ui-grid-no-header",'<div class="ui-grid-top-panel"></div>'),e.put("ui-grid/ui-grid-row","<div ng-repeat=\"(colRenderIndex, col) in colContainer.renderedColumns track by col.uid\" ui-grid-one-bind-id-grid=\"rowRenderIndex + '-' + col.uid + '-cell'\" class=\"ui-grid-cell\" ng-class=\"{ 'ui-grid-row-header-cell': col.isRowHeader }\" role=\"{{col.isRowHeader ? 'rowheader' : 'gridcell'}}\" ui-grid-cell></div>"),e.put("ui-grid/ui-grid",'<div ui-i18n="en" class="ui-grid">\x3c!-- TODO (c0bra): add "scoped" attr here, eventually? --\x3e<style ui-grid-style>.grid{{ grid.id }} {\n      /* Styles for the grid */\n    }\n\n    .grid{{ grid.id }} .ui-grid-row, .grid{{ grid.id }} .ui-grid-cell, .grid{{ grid.id }} .ui-grid-cell .ui-grid-vertical-bar {\n      height: {{ grid.options.rowHeight }}px;\n    }\n\n    .grid{{ grid.id }} .ui-grid-row:last-child .ui-grid-cell {\n      border-bottom-width: {{ (((grid.getVisibleRowCount() * grid.options.rowHeight) < grid.getViewportHeight()) && \'1\') || \'0\' }}px;\n    }\n\n    {{ grid.verticalScrollbarStyles }}\n    {{ grid.horizontalScrollbarStyles }}\n\n    /*\n    .ui-grid[dir=rtl] .ui-grid-viewport {\n      padding-left: {{ grid.verticalScrollbarWidth }}px;\n    }\n    */\n\n    {{ grid.customStyles }}</style><div class="ui-grid-contents-wrapper" role="grid"><div ui-grid-menu-button ng-if="grid.options.enableGridMenu"></div><div ng-if="grid.hasLeftContainer()" style="width: 0" ui-grid-pinned-container="\'left\'"></div><div ui-grid-render-container container-id="\'body\'" col-container-name="\'body\'" row-container-name="\'body\'" bind-scroll-horizontal="true" bind-scroll-vertical="true" enable-horizontal-scrollbar="grid.options.enableHorizontalScrollbar" enable-vertical-scrollbar="grid.options.enableVerticalScrollbar"></div><div ng-if="grid.hasRightContainer()" style="width: 0" ui-grid-pinned-container="\'right\'"></div><div ui-grid-grid-footer ng-if="grid.options.showGridFooter"></div><div ui-grid-column-menu ng-if="grid.options.enableColumnMenus"></div><div ng-transclude></div></div></div>'),e.put("ui-grid/uiGridCell",'<div class="ui-grid-cell-contents" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/uiGridColumnMenu",'<div class="ui-grid-column-menu"><div ui-grid-menu menu-items="menuItems">\x3c!-- <div class="ui-grid-column-menu">\n    <div class="inner" ng-show="menuShown">\n      <ul>\n        <div ng-show="grid.options.enableSorting">\n          <li ng-click="sortColumn($event, asc)" ng-class="{ \'selected\' : col.sort.direction == asc }"><i class="ui-grid-icon-sort-alt-up"></i> Sort Ascending</li>\n          <li ng-click="sortColumn($event, desc)" ng-class="{ \'selected\' : col.sort.direction == desc }"><i class="ui-grid-icon-sort-alt-down"></i> Sort Descending</li>\n          <li ng-show="col.sort.direction" ng-click="unsortColumn()"><i class="ui-grid-icon-cancel"></i> Remove Sort</li>\n        </div>\n      </ul>\n    </div>\n  </div> --\x3e</div></div>'),e.put("ui-grid/uiGridFooterCell",'<div class="ui-grid-cell-contents" col-index="renderIndex"><div>{{ col.getAggregationText() + ( col.getAggregationValue() CUSTOM_FILTERS ) }}</div></div>'),e.put("ui-grid/uiGridHeaderCell",'<div role="columnheader" ng-class="{ \'sortable\': sortable, \'ui-grid-header-cell-last-col\': isLastCol }" ui-grid-one-bind-aria-labelledby-grid="col.uid + \'-header-text \' + col.uid + \'-sortdir-text\'" aria-sort="{{col.sort.direction == asc ? \'ascending\' : ( col.sort.direction == desc ? \'descending\' : (!col.sort.direction ? \'none\' : \'other\'))}}"><div role="button" tabindex="0" ng-keydown="handleKeyDown($event)" class="ui-grid-cell-contents ui-grid-header-cell-primary-focus" col-index="renderIndex" title="TOOLTIP"><span class="ui-grid-header-cell-label" ui-grid-one-bind-id-grid="col.uid + \'-header-text\'">{{ col.displayName CUSTOM_FILTERS }}</span> <span ui-grid-one-bind-id-grid="col.uid + \'-sortdir-text\'" ui-grid-visible="col.sort.direction" aria-label="{{getSortDirectionAriaLabel()}}"><i ng-class="{ \'ui-grid-icon-up-dir\': col.sort.direction == asc, \'ui-grid-icon-down-dir\': col.sort.direction == desc, \'ui-grid-icon-blank\': !col.sort.direction }" title="{{isSortPriorityVisible() ? i18n.headerCell.priority + \' \' + ( col.sort.priority + 1 )  : null}}" aria-hidden="true"></i> <sub ui-grid-visible="isSortPriorityVisible()" class="ui-grid-sort-priority-number">{{col.sort.priority + 1}}</sub></span></div><div role="button" tabindex="0" ui-grid-one-bind-id-grid="col.uid + \'-menu-button\'" class="ui-grid-column-menu-button" ng-if="grid.options.enableColumnMenus && !col.isRowHeader  && col.colDef.enableColumnMenu !== false" ng-click="toggleMenu($event)" ng-keydown="headerCellArrowKeyDown($event)" ui-grid-one-bind-aria-label="i18n.headerCell.aria.columnMenuButtonLabel" aria-haspopup="true"><i class="ui-grid-icon-angle-down" aria-hidden="true">&nbsp;</i></div><div ui-grid-filter></div></div>'),e.put("ui-grid/uiGridMenu",'<div class="ui-grid-menu" ng-show="shown"><style ui-grid-style>{{dynamicStyles}}</style><div class="ui-grid-menu-mid" ng-show="shownMid"><div class="ui-grid-menu-inner" ng-if="shown"><ul role="menu" class="ui-grid-menu-items"><li ng-repeat="item in menuItems" role="menuitem" ui-grid-menu-item ui-grid-one-bind-id="\'menuitem-\'+$index" action="item.action" name="item.title" active="item.active" icon="item.icon" shown="item.shown" context="item.context" template-url="item.templateUrl" leave-open="item.leaveOpen" screen-reader-only="item.screenReaderOnly"></li></ul></div></div></div>'),e.put("ui-grid/uiGridMenuItem",'<button type="button" class="ui-grid-menu-item" ng-click="itemAction($event, title)" ng-show="itemShown()" ng-class="{ \'ui-grid-menu-item-active\': active(), \'ui-grid-sr-only\': (!focus && screenReaderOnly) }" aria-pressed="{{active()}}" tabindex="0" ng-focus="focus=true" ng-blur="focus=false"><i ng-class="icon" aria-hidden="true">&nbsp;</i> {{ label() }}</button>'),e.put("ui-grid/uiGridRenderContainer","<div role=\"presentation\" ui-grid-one-bind-id-grid=\"'grid-container'\" class=\"ui-grid-render-container\" ng-style=\"{ 'margin-left': colContainer.getMargin('left') + 'px', 'margin-right': colContainer.getMargin('right') + 'px' }\">\x3c!-- All of these dom elements are replaced in place --\x3e<div ui-grid-header></div><div ui-grid-viewport></div><div ng-if=\"colContainer.needsHScrollbarPlaceholder()\" class=\"ui-grid-scrollbar-placeholder\" ng-style=\"{height:colContainer.grid.scrollbarHeight + 'px'}\"></div><ui-grid-footer ng-if=\"grid.options.showColumnFooter\"></ui-grid-footer></div>"),e.put("ui-grid/uiGridViewport",'<div role="rowgroup" class="ui-grid-viewport" ng-style="colContainer.getViewportStyle()">\x3c!-- tbody --\x3e<div class="ui-grid-canvas"><div ng-repeat="(rowRenderIndex, row) in rowContainer.renderedRows track by $index" class="ui-grid-row" ng-style="Viewport.rowStyle(rowRenderIndex)"><div role="row" ui-grid-row="row" row-render-index="rowRenderIndex"></div></div></div></div>'),e.put("ui-grid/cellEditor",'<div><form name="inputForm"><input type="INPUT_TYPE" ng-class="\'colt\' + col.uid" ui-grid-editor ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/dropdownEditor",'<div><form name="inputForm"><select ng-class="\'colt\' + col.uid" ui-grid-edit-dropdown ng-model="MODEL_COL_FIELD" ng-options="field[editDropdownIdLabel] as field[editDropdownValueLabel] CUSTOM_FILTERS for field in editDropdownOptionsArray"></select></form></div>'),e.put("ui-grid/fileChooserEditor",'<div><form name="inputForm"><input ng-class="\'colt\' + col.uid" ui-grid-edit-file-chooser type="file" id="files" name="files[]" ng-model="MODEL_COL_FIELD"></form></div>'),e.put("ui-grid/emptyBaseLayerContainer",'<div class="ui-grid-empty-base-layer-container ui-grid-canvas"><div class="ui-grid-row" ng-repeat="(rowRenderIndex, row) in grid.baseLayer.emptyRows track by $index" ng-style="Viewport.rowStyle(rowRenderIndex)"><div><div><div ng-repeat="(colRenderIndex, col) in colContainer.renderedColumns track by col.colDef.name" class="ui-grid-cell {{ col.getColClass(false) }}"></div></div></div></div></div>'),e.put("ui-grid/expandableRow",'<div ui-grid-expandable-row ng-if="expandableRow.shouldRenderExpand()" class="expandableRow" style="float:left; margin-top: 1px; margin-bottom: 1px" ng-style="{width: (grid.renderContainers.body.getCanvasWidth()) + \'px\', height: row.expandedRowHeight + \'px\'}"></div>'),e.put("ui-grid/expandableRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><i ng-if="!(row.groupHeader==true || row.entity.subGridOptions.disableRowExpandable)" ng-class="{ \'ui-grid-icon-plus-squared\' : !row.isExpanded, \'ui-grid-icon-minus-squared\' : row.isExpanded }" ng-click="grid.api.expandable.toggleRowExpansion(row.entity)"></i></div></div>'),e.put("ui-grid/expandableScrollFiller","<div ng-if=\"expandableRow.shouldRenderFiller()\" ng-class=\"{scrollFiller:true, scrollFillerClass:(colContainer.name === 'body')}\" ng-style=\"{ width: (grid.getViewportWidth()) + 'px', height: row.expandedRowHeight + 2 + 'px', 'margin-left': grid.options.rowHeader.rowHeaderWidth + 'px' }\"><i class=\"ui-grid-icon-spin5 ui-grid-animate-spin\" ng-style=\"{'margin-top': ( row.expandedRowHeight/2 - 5) + 'px', 'margin-left' : ((grid.getViewportWidth() - grid.options.rowHeader.rowHeaderWidth)/2 - 5) + 'px'}\"></i></div>"),e.put("ui-grid/expandableTopRowHeader",'<div class="ui-grid-row-header-cell ui-grid-expandable-buttons-cell"><div class="ui-grid-cell-contents"><span class="ui-grid-cell-empty" ng-if="!grid.options.showExpandAllButton"></span> <button type="button" class="ui-grid-icon-button" ng-if="grid.options.showExpandAllButton" ng-class="{ \'ui-grid-icon-plus-squared\' : !grid.expandable.expandedAll, \'ui-grid-icon-minus-squared\' : grid.expandable.expandedAll }" ng-click="grid.api.expandable.toggleAllRows()"></button></div></div>'),e.put("ui-grid/csvLink",'<span class="ui-grid-exporter-csv-link-span"><a href="data:text/csv;charset=UTF-8,CSV_CONTENT" download="FILE_NAME">LINK_LABEL</a></span>'),e.put("ui-grid/importerMenuItem",'<li class="ui-grid-menu-item"><form><input class="ui-grid-importer-file-chooser" type="file" id="files" name="files[]"></form></li>'),e.put("ui-grid/importerMenuItemContainer","<div ui-grid-importer-menu-item></div>"),e.put("ui-grid/pagination",'<div class="ui-grid-pager-panel" ui-grid-pager ng-show="grid.options.enablePaginationControls"><div role="navigation" class="ui-grid-pager-container"><div class="ui-grid-pager-control"><button type="button" class="ui-grid-pager-first" ui-grid-one-bind-title="aria.pageToFirst" ui-grid-one-bind-aria-label="aria.pageToFirst" ng-click="pageFirstPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle\' : \'first-triangle\'"><div ng-class="grid.isRTL() ? \'last-bar-rtl\' : \'first-bar\'"></div></div></button> <button type="button" class="ui-grid-pager-previous" ui-grid-one-bind-title="aria.pageBack" ui-grid-one-bind-aria-label="aria.pageBack" ng-click="pagePreviousPageClick()" ng-disabled="cantPageBackward()"><div ng-class="grid.isRTL() ? \'last-triangle prev-triangle\' : \'first-triangle prev-triangle\'"></div></button> <input type="number" ui-grid-one-bind-title="aria.pageSelected" ui-grid-one-bind-aria-label="aria.pageSelected" class="ui-grid-pager-control-input" ng-model="grid.options.paginationCurrentPage" min="1" max="{{ paginationApi.getTotalPages() }}" step="1" required> <span class="ui-grid-pager-max-pages-number" ng-show="paginationApi.getTotalPages() > 0"><abbr ui-grid-one-bind-title="paginationOf">/</abbr> {{ paginationApi.getTotalPages() }}</span> <button type="button" class="ui-grid-pager-next" ui-grid-one-bind-title="aria.pageForward" ui-grid-one-bind-aria-label="aria.pageForward" ng-click="pageNextPageClick()" ng-disabled="cantPageForward()"><div ng-class="grid.isRTL() ? \'first-triangle next-triangle\' : \'last-triangle next-triangle\'"></div></button> <button type="button" class="ui-grid-pager-last" ui-grid-one-bind-title="aria.pageToLast" ui-grid-one-bind-aria-label="aria.pageToLast" ng-click="pageLastPageClick()" ng-disabled="cantPageToLast()"><div ng-class="grid.isRTL() ? \'first-triangle\' : \'last-triangle\'"><div ng-class="grid.isRTL() ? \'first-bar-rtl\' : \'last-bar\'"></div></div></button></div><div class="ui-grid-pager-row-count-picker" ng-if="grid.options.paginationPageSizes.length > 1 && !grid.options.useCustomPagination"><select ui-grid-one-bind-aria-labelledby-grid="\'items-per-page-label\'" ng-model="grid.options.paginationPageSize" ng-options="o as o for o in grid.options.paginationPageSizes"></select><span ui-grid-one-bind-id-grid="\'items-per-page-label\'" class="ui-grid-pager-row-count-label">&nbsp;{{sizesLabel}}</span></div><span ng-if="grid.options.paginationPageSizes.length <= 1" class="ui-grid-pager-row-count-label">{{grid.options.paginationPageSize}}&nbsp;{{sizesLabel}}</span></div><div class="ui-grid-pager-count-container"><div class="ui-grid-pager-count"><span ng-show="grid.options.totalItems > 0">{{ 1 + paginationApi.getFirstRowIndex() }} <abbr ui-grid-one-bind-title="paginationThrough">-</abbr> {{ 1 + paginationApi.getLastRowIndex() }} {{paginationOf}} {{grid.options.totalItems}} {{totalItemsLabel}}</span></div></div></div>'),e.put("ui-grid/columnResizer",'<div ui-grid-column-resizer ng-if="grid.options.enableColumnResizing" class="ui-grid-column-resizer" col="col" position="right" render-index="renderIndex" unselectable="on"></div>'),e.put("ui-grid/gridFooterSelectedItems",'<span ng-if="grid.selection.selectedCount !== 0 && grid.options.enableFooterTotalSelected">({{"search.selectedItems" | t}} {{grid.selection.selectedCount}})</span>'),e.put("ui-grid/selectionHeaderCell",'<div>\x3c!-- <div class="ui-grid-vertical-bar">&nbsp;</div> --\x3e<div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-selection-select-all-buttons ng-if="grid.options.enableSelectAll" role="checkbox" ng-model="grid.selection.selectAll"></ui-grid-selection-select-all-buttons></div></div>'),e.put("ui-grid/selectionRowHeader",'<div class="ui-grid-cell-contents ui-grid-disable-selection"><ui-grid-selection-row-header-buttons></ui-grid-selection-row-header-buttons></div>'),e.put("ui-grid/selectionRowHeaderButtons",'<div class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-row-selected\': row.isSelected}" ng-click="selectButtonClick(row, $event)" ng-keydown="selectButtonKeyDown(row, $event)" role="checkbox" ng-model="row.isSelected">&nbsp;</div>'),e.put("ui-grid/selectionSelectAllButtons",'<div role="button" class="ui-grid-selection-row-header-buttons ui-grid-icon-ok" ng-class="{\'ui-grid-all-selected\': grid.selection.selectAll}" ng-click="headerButtonClick($event)" ng-keydown="headerButtonKeyDown($event)"></div>'),e.put("ui-grid/treeBaseExpandAllButtons",'<div class="ui-grid-tree-base-row-header-buttons" ng-class="{\'ui-grid-icon-minus-squared\': grid.treeBase.numberLevels > 0 && grid.treeBase.expandAll, \'ui-grid-icon-plus-squared\': grid.treeBase.numberLevels > 0 && !grid.treeBase.expandAll}" ng-click="headerButtonClick($event)"></div>'),e.put("ui-grid/treeBaseHeaderCell",'<div><div class="ui-grid-cell-contents" col-index="renderIndex"><ui-grid-tree-base-expand-all-buttons ng-if="grid.options.enableExpandAll"></ui-grid-tree-base-expand-all-buttons></div></div>'),e.put("ui-grid/treeBaseRowHeader",'<div class="ui-grid-cell-contents"><ui-grid-tree-base-row-header-buttons></ui-grid-tree-base-row-header-buttons></div>'),e.put("ui-grid/treeBaseRowHeaderButtons","<div class=\"ui-grid-tree-base-row-header-buttons\" ng-class=\"{'ui-grid-tree-base-header': row.treeLevel > -1 }\" ng-click=\"treeButtonClick(row, $event)\"><i ng-class=\"{'ui-grid-icon-minus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'expanded', 'ui-grid-icon-plus-squared': ( ( grid.options.showTreeExpandNoChildren && row.treeLevel > -1 ) || ( row.treeNode.children && row.treeNode.children.length > 0 ) ) && row.treeNode.state === 'collapsed'}\" ng-style=\"{'padding-left': grid.options.treeIndent * row.treeLevel + 'px'}\"></i> &nbsp;</div>"),e.put("ui-grid/cellTitleValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" title="{{grid.validate.getTitleFormattedErrors(row.entity,col.colDef)}}">{{COL_FIELD CUSTOM_FILTERS}}</div>'),e.put("ui-grid/cellTooltipValidator",'<div class="ui-grid-cell-contents" ng-class="{invalid:grid.validate.isInvalid(row.entity,col.colDef)}" tooltip-html-unsafe="{{grid.validate.getFormattedErrors(row.entity,col.colDef)}}" tooltip-enable="grid.validate.isInvalid(row.entity,col.colDef)" tooltip-append-to-body="true" tooltip-placement="top" title="TOOLTIP">{{COL_FIELD CUSTOM_FILTERS}}</div>')}]),function(e){if("object"==typeof exports&&"undefined"!=typeof module)module.exports=e();else if("function"==typeof define&&define.amd)define([],e);else{("undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:this).Clipboard=e()}}(function(){return function e(t,n,r){function i(a,s){if(!n[a]){if(!t[a]){var l="function"==typeof require&&require;if(!s&&l)return l(a,!0);if(o)return o(a,!0);var u=new Error("Cannot find module '"+a+"'");throw u.code="MODULE_NOT_FOUND",u}var c=n[a]={exports:{}};t[a][0].call(c.exports,function(e){var n=t[a][1][e];return i(n||e)},c,c.exports,e,t,n,r)}return n[a].exports}for(var o="function"==typeof require&&require,a=0;a<r.length;a++)i(r[a]);return i}({1:[function(e,t,n){function r(e,t){for(;e&&e.nodeType!==i;){if(e.matches(t))return e;e=e.parentNode}}var i=9;if(Element&&!Element.prototype.matches){var o=Element.prototype;o.matches=o.matchesSelector||o.mozMatchesSelector||o.msMatchesSelector||o.oMatchesSelector||o.webkitMatchesSelector}t.exports=r},{}],2:[function(e,t,n){function r(e,t,n,r,o){var a=i.apply(this,arguments);return e.addEventListener(n,a,o),{destroy:function(){e.removeEventListener(n,a,o)}}}function i(e,t,n,r){return function(n){n.delegateTarget=o(n.target,t),n.delegateTarget&&r.call(e,n)}}var o=e("./closest");t.exports=r},{"./closest":1}],3:[function(e,t,n){n.node=function(e){return void 0!==e&&e instanceof HTMLElement&&1===e.nodeType},n.nodeList=function(e){var t=Object.prototype.toString.call(e);return void 0!==e&&("[object NodeList]"===t||"[object HTMLCollection]"===t)&&"length"in e&&(0===e.length||n.node(e[0]))},n.string=function(e){return"string"==typeof e||e instanceof String},n.fn=function(e){return"[object Function]"===Object.prototype.toString.call(e)}},{}],4:[function(e,t,n){function r(e,t,n){if(!e&&!t&&!n)throw new Error("Missing required arguments");if(!s.string(t))throw new TypeError("Second argument must be a String");if(!s.fn(n))throw new TypeError("Third argument must be a Function");if(s.node(e))return i(e,t,n);if(s.nodeList(e))return o(e,t,n);if(s.string(e))return a(e,t,n);throw new TypeError("First argument must be a String, HTMLElement, HTMLCollection, or NodeList")}function i(e,t,n){return e.addEventListener(t,n),{destroy:function(){e.removeEventListener(t,n)}}}function o(e,t,n){return Array.prototype.forEach.call(e,function(e){e.addEventListener(t,n)}),{destroy:function(){Array.prototype.forEach.call(e,function(e){e.removeEventListener(t,n)})}}}function a(e,t,n){return l(document.body,e,t,n)}var s=e("./is"),l=e("delegate");t.exports=r},{"./is":3,delegate:2}],5:[function(e,t,n){function r(e){var t;if("SELECT"===e.nodeName)e.focus(),t=e.value;else if("INPUT"===e.nodeName||"TEXTAREA"===e.nodeName)e.focus(),e.setSelectionRange(0,e.value.length),t=e.value;else{e.hasAttribute("contenteditable")&&e.focus();var n=window.getSelection(),r=document.createRange();r.selectNodeContents(e),n.removeAllRanges(),n.addRange(r),t=n.toString()}return t}t.exports=r},{}],6:[function(e,t,n){function r(){}r.prototype={on:function(e,t,n){var r=this.e||(this.e={});return(r[e]||(r[e]=[])).push({fn:t,ctx:n}),this},once:function(e,t,n){function r(){i.off(e,r),t.apply(n,arguments)}var i=this;return r._=t,this.on(e,r,n)},emit:function(e){var t=[].slice.call(arguments,1),n=((this.e||(this.e={}))[e]||[]).slice(),r=0,i=n.length;for(r;r<i;r++)n[r].fn.apply(n[r].ctx,t);return this},off:function(e,t){var n=this.e||(this.e={}),r=n[e],i=[];if(r&&t)for(var o=0,a=r.length;o<a;o++)r[o].fn!==t&&r[o].fn._!==t&&i.push(r[o]);return i.length?n[e]=i:delete n[e],this}},t.exports=r},{}],7:[function(e,t,n){!function(r,i){if(void 0!==n)i(t,e("select"));else{var o={exports:{}};i(o,r.select),r.clipboardAction=o.exports}}(this,function(e,t){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}var r=function(e){return e&&e.__esModule?e:{default:e}}(t),i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},o=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),a=function(){function e(t){n(this,e),this.resolveOptions(t),this.initSelection()}return o(e,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action=e.action,this.emitter=e.emitter,this.target=e.target,this.text=e.text,this.trigger=e.trigger,this.selectedText=""}},{key:"initSelection",value:function(){this.text?this.selectFake():this.target&&this.selectTarget()}},{key:"selectFake",value:function(){var e=this,t="rtl"==document.documentElement.getAttribute("dir");this.removeFake(),this.fakeHandlerCallback=function(){return e.removeFake()},this.fakeHandler=document.body.addEventListener("click",this.fakeHandlerCallback)||!0,this.fakeElem=document.createElement("textarea"),this.fakeElem.style.fontSize="12pt",this.fakeElem.style.border="0",this.fakeElem.style.padding="0",this.fakeElem.style.margin="0",this.fakeElem.style.position="absolute",this.fakeElem.style[t?"right":"left"]="-9999px";var n=window.pageYOffset||document.documentElement.scrollTop;this.fakeElem.addEventListener("focus",window.scrollTo(0,n)),this.fakeElem.style.top=n+"px",this.fakeElem.setAttribute("readonly",""),this.fakeElem.value=this.text,document.body.appendChild(this.fakeElem),this.selectedText=(0,r.default)(this.fakeElem),this.copyText()}},{key:"removeFake",value:function(){this.fakeHandler&&(document.body.removeEventListener("click",this.fakeHandlerCallback),this.fakeHandler=null,this.fakeHandlerCallback=null),this.fakeElem&&(document.body.removeChild(this.fakeElem),this.fakeElem=null)}},{key:"selectTarget",value:function(){this.selectedText=(0,r.default)(this.target),this.copyText()}},{key:"copyText",value:function(){var e=void 0;try{e=document.execCommand(this.action)}catch(t){e=!1}this.handleResult(e)}},{key:"handleResult",value:function(e){this.emitter.emit(e?"success":"error",{action:this.action,text:this.selectedText,trigger:this.trigger,clearSelection:this.clearSelection.bind(this)})}},{key:"clearSelection",value:function(){this.target&&this.target.blur(),window.getSelection().removeAllRanges()}},{key:"destroy",value:function(){this.removeFake()}},{key:"action",set:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"copy";if(this._action=e,"copy"!==this._action&&"cut"!==this._action)throw new Error('Invalid "action" value, use either "copy" or "cut"')},get:function(){return this._action}},{key:"target",set:function(e){if(void 0!==e){if(!e||"object"!==(void 0===e?"undefined":i(e))||1!==e.nodeType)throw new Error('Invalid "target" value, use a valid Element');if("copy"===this.action&&e.hasAttribute("disabled"))throw new Error('Invalid "target" attribute. Please use "readonly" instead of "disabled" attribute');if("cut"===this.action&&(e.hasAttribute("readonly")||e.hasAttribute("disabled")))throw new Error('Invalid "target" attribute. You can\'t cut text from elements with "readonly" or "disabled" attributes');this._target=e}},get:function(){return this._target}}]),e}();e.exports=a})},{select:5}],8:[function(e,t,n){!function(r,i){if(void 0!==n)i(t,e("./clipboard-action"),e("tiny-emitter"),e("good-listener"));else{var o={exports:{}};i(o,r.clipboardAction,r.tinyEmitter,r.goodListener),r.clipboard=o.exports}}(this,function(e,t,n,r){"use strict";function i(e){return e&&e.__esModule?e:{default:e}}function o(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function s(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}function l(e,t){var n="data-clipboard-"+e;if(t.hasAttribute(n))return t.getAttribute(n)}var u=i(t),c=i(n),d=i(r),f=function(){function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}return function(t,n,r){return n&&e(t.prototype,n),r&&e(t,r),t}}(),p=function(e){function t(e,n){o(this,t);var r=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.resolveOptions(n),r.listenClick(e),r}return s(t,e),f(t,[{key:"resolveOptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};this.action="function"==typeof e.action?e.action:this.defaultAction,this.target="function"==typeof e.target?e.target:this.defaultTarget,this.text="function"==typeof e.text?e.text:this.defaultText}},{key:"listenClick",value:function(e){var t=this;this.listener=(0,d.default)(e,"click",function(e){return t.onClick(e)})}},{key:"onClick",value:function(e){var t=e.delegateTarget||e.currentTarget;this.clipboardAction&&(this.clipboardAction=null),this.clipboardAction=new u.default({action:this.action(t),target:this.target(t),text:this.text(t),trigger:t,emitter:this})}},{key:"defaultAction",value:function(e){return l("action",e)}},{key:"defaultTarget",value:function(e){var t=l("target",e);if(t)return document.querySelector(t)}},{key:"defaultText",value:function(e){return l("text",e)}},{key:"destroy",value:function(){this.listener.destroy(),this.clipboardAction&&(this.clipboardAction.destroy(),this.clipboardAction=null)}}]),t}(c.default);e.exports=p})},{"./clipboard-action":7,"good-listener":4,"tiny-emitter":6}]},{},[8])(8)}),function(){"use strict";var e,t;"object"==typeof module&&module.exports?(e=require("angular"),t=require("clipboard"),module.exports="ngclipboard"):(e=window.angular,t=window.Clipboard),e.module("ngclipboard",[]).directive("ngclipboard",function(){return{restrict:"A",scope:{ngclipboardSuccess:"&",ngclipboardError:"&"},link:function(e,n){var r=new t(n[0]);r.on("success",function(t){e.$apply(function(){e.ngclipboardSuccess({e:t})})}),r.on("error",function(t){e.$apply(function(){e.ngclipboardError({e:t})})})}}})}(),function(e,t){"use strict";function n(e,n,i){r.directive(e,["$parse","$swipe",function(r,o){return function(a,s,l){function u(e){if(!c)return!1;var t=Math.abs(e.y-c.y);return e=(e.x-c.x)*n,d&&75>t&&0<e&&30<e&&.3>t/e}var c,d,f=r(l[e]),p=["touch"];t.isDefined(l.ngSwipeDisableMouse)||p.push("mouse"),o.bind(s,{start:function(e,t){c=e,d=!0},cancel:function(e){d=!1},end:function(e,t){u(e)&&a.$apply(function(){s.triggerHandler(i),f(a,{$event:t})})}},p)}}])}var r=t.module("ngTouch",[]);r.info({angularVersion:"1.6.7-build.5455+sha.233a93f"}),r.factory("$swipe",[function(){function e(e){var t=(e=e.originalEvent||e).touches&&e.touches.length?e.touches:[e];return e=e.changedTouches&&e.changedTouches[0]||t[0],{x:e.clientX,y:e.clientY}}function n(e,n){var i=[];return t.forEach(e,function(e){(e=r[e][n])&&i.push(e)}),i.join(" ")}var r={mouse:{start:"mousedown",move:"mousemove",end:"mouseup"},touch:{start:"touchstart",move:"touchmove",end:"touchend",cancel:"touchcancel"},pointer:{start:"pointerdown",move:"pointermove",end:"pointerup",cancel:"pointercancel"}};return{bind:function(t,r,i){var o,a,s,l,u=!1;i=i||["mouse","touch","pointer"],t.on(n(i,"start"),function(t){s=e(t),u=!0,a=o=0,l=s,r.start&&r.start(s,t)});var c=n(i,"cancel");c&&t.on(c,function(e){u=!1,r.cancel&&r.cancel(e)}),t.on(n(i,"move"),function(t){if(u&&s){var n=e(t);o+=Math.abs(n.x-l.x),a+=Math.abs(n.y-l.y),l=n,10>o&&10>a||(a>o?(u=!1,r.cancel&&r.cancel(t)):(t.preventDefault(),r.move&&r.move(n,t)))}}),t.on(n(i,"end"),function(t){u&&(u=!1,r.end&&r.end(e(t),t))})}}}]),n("ngSwipeLeft",-1,"swipeleft"),n("ngSwipeRight",1,"swiperight")}(window,window.angular),angular.module("angular-carousel",["ngTouch","angular-carousel.shifty"]),angular.module("angular-carousel").directive("rnCarouselAutoSlide",["$interval",function(e){return{restrict:"A",link:function(t,n,r){var i=function(){t.autoSlider&&(e.cancel(t.autoSlider),t.autoSlider=null)},o=function(){t.autoSlide()};t.$watch("carouselIndex",o),r.hasOwnProperty("rnCarouselPauseOnHover")&&"false"!==r.rnCarouselPauseOnHover&&(n.on("mouseenter",i),n.on("mouseleave",o)),t.$on("$destroy",function(){i(),n.off("mouseenter",i),n.off("mouseleave",o)})}}}]),angular.module("angular-carousel").directive("rnCarouselIndicators",["$parse",function(e){return{restrict:"A",scope:{slides:"=",index:"=rnCarouselIndex"},templateUrl:"carousel-indicators.html",link:function(t,n,r){var i=e(r.rnCarouselIndex);t.goToSlide=function(e){i.assign(t.$parent.$parent,e)}}}}]),angular.module("angular-carousel").run(["$templateCache",function(e){e.put("carousel-indicators.html",'<div class="rn-carousel-indicator">\n<span ng-repeat="slide in slides" ng-class="{active: $index==index}" ng-click="goToSlide($index)">●</span></div>')}]),function(){"use strict";angular.module("angular-carousel").service("DeviceCapabilities",function(){return{has3d:function(){var e,t=document.createElement("p"),n={webkitTransform:"-webkit-transform",msTransform:"-ms-transform",transform:"transform"};document.body.insertBefore(t,null);for(var r in n)void 0!==t.style[r]&&(t.style[r]="translate3d(1px,1px,1px)",e=window.getComputedStyle(t).getPropertyValue(n[r]));return document.body.removeChild(t),void 0!==e&&e.length>0&&"none"!==e}(),transformProperty:function(){var e="transform";return void 0!==document.body.style[e]?["webkit","moz","o","ms"].every(function(t){var n="-"+t+"-transform";return void 0===document.body.style[n]||(e=n,!1)}):e=void 0!==document.body.style.webkitTransform?"-webkit-transform":void 0,e}()}}).service("computeCarouselSlideStyle",["DeviceCapabilities",function(e){return function(t,n,r){var i,o={display:"inline-block"},a=100*t+n,s=e.has3d?"translate3d("+a+"%, 0, 0)":"translate3d("+a+"%, 0)",l=(100-Math.abs(a))/100;if(e.transformProperty)if("fadeAndSlide"==r)o[e.transformProperty]=s,i=0,Math.abs(a)<100&&(i=.3+.7*l),o.opacity=i;else if("hexagon"==r){var u=100,c=0,d=60*(l-1);u=-100*t>n?100:0,c=-100*t>n?d:-d,o[e.transformProperty]=s+" rotateY("+c+"deg)",o[e.transformProperty+"-origin"]=u+"% 50%"}else if("zoom"==r){o[e.transformProperty]=s;var f=1;Math.abs(a)<100&&(f=1+2*(1-l)),o[e.transformProperty]+=" scale("+f+")",o[e.transformProperty+"-origin"]="50% 50%",i=0,Math.abs(a)<100&&(i=.3+.7*l),o.opacity=i}else o[e.transformProperty]=s;else o["margin-left"]=a+"%";return o}}]).service("createStyleString",function(){return function(e){var t=[];return angular.forEach(e,function(e,n){t.push(n+":"+e)}),t.join(";")}}).directive("rnCarousel",["$swipe","$window","$document","$parse","$compile","$timeout","$interval","computeCarouselSlideStyle","createStyleString","Tweenable",function(e,t,n,r,i,o,a,s,l,u){function c(e,t,n){var r=n;return e.every(function(e,n){return!angular.equals(e,t)||(r=n,!1)}),r}var d=0;return t.requestAnimationFrame||t.webkitRequestAnimationFrame||t.mozRequestAnimationFrame,{restrict:"A",scope:!0,compile:function(f,p){var h,g,m=f[0].querySelector("li"),v=m?m.attributes:[],y=!1,b=!1;return["ng-repeat","data-ng-repeat","ng:repeat","x-ng-repeat"].every(function(e){var t=v[e];if(angular.isDefined(t)){var n=t.value.match(/^\s*([\s\S]+?)\s+in\s+([\s\S]+?)(?:\s+track\s+by\s+([\s\S]+?))?\s*$/),r=n[3];if(h=n[1],g=n[2],h)return angular.isDefined(p.rnCarouselBuffered)&&(b=!0,t.value=h+" in "+g+"|carouselSlice:carouselBufferIndex:carouselBufferSize",r&&(t.value+=" track by "+r)),y=!0,!1}return!0}),function(f,h,m,v){function x(){for(var e=h[0].childNodes,t=[],n=0;n<e.length;n++)"LI"===e[n].tagName&&t.push(e[n]);return t}function w(e){j=!0,E({x:e.clientX,y:e.clientY},e)}function _(e){var t=100*f.carouselBufferIndex+e;angular.forEach(x(),function(e,n){e.style.cssText=l(s(n,t,N.transitionType))})}function C(e,t){if(void 0===e&&(e=f.carouselIndex),!1===(t=t||{}).animate||"none"===N.transitionType)return B=!1,I=-100*e,f.carouselIndex=e,void L();B=!0,(new u).tween({from:{x:I},to:{x:-100*e},duration:N.transitionDuration,easing:N.transitionEasing,step:function(e){isFinite(e.x)&&_(e.x)},finish:function(){f.$apply(function(){f.carouselIndex=e,I=-100*e,L(),o(function(){B=!1},0,!1)})}})}function k(){var e=h[0].getBoundingClientRect();return e.width?e.width:e.right-e.left}function S(){z=k()}function $(){V||(V=!0,n.bind("mouseup",w))}function M(){V&&(V=!1,n.unbind("mouseup",w))}function T(e,t){return B||Y.length<=1?void 0:(S(),H=h[0].querySelector("li").getBoundingClientRect().left,R=!0,P=e.x,!1)}function D(e,t){var n,r;return $(),R&&(n=e.x,(r=P-n)>2||-2>r)&&(j=!0,_(I+100*-r/z)),!1}function E(e,t,n){if((!t||j)&&(M(),R=!1,j=!1,0!==(F=P-e.x)&&!B))if(I+=100*-F/z,N.isSequential){var i=N.moveTreshold*z,o=-F,a=-Math[o>=0?"ceil":"floor"](o/z),s=Math.abs(o)>i;Y&&a+f.carouselIndex>=Y.length&&(a=Y.length-1-f.carouselIndex),a+f.carouselIndex<0&&(a=-f.carouselIndex);var l=s?a:0;C(F=f.carouselIndex+l),void 0!==m.rnCarouselOnInfiniteScrollRight&&0===a&&0!==f.carouselIndex&&(r(m.rnCarouselOnInfiniteScrollRight)(f),C(0)),void 0!==m.rnCarouselOnInfiniteScrollLeft&&0===a&&0===f.carouselIndex&&0===l&&(r(m.rnCarouselOnInfiniteScrollLeft)(f),C(Y.length))}else f.$apply(function(){f.carouselIndex=parseInt(-I/100,10),L()})}function L(){var e=0,t=(f.carouselBufferSize-1)/2;b?(e=f.carouselIndex<=t?0:Y&&Y.length<f.carouselBufferSize?0:Y&&f.carouselIndex>Y.length-f.carouselBufferSize?Y.length-f.carouselBufferSize:f.carouselIndex-t,f.carouselBufferIndex=e,o(function(){_(I)},0,!1)):o(function(){_(I)},0,!1)}function A(){S(),C()}d++;var R,P,F,O={transitionType:m.rnCarouselTransition||"slide",transitionEasing:m.rnCarouselEasing||"easeTo",transitionDuration:parseInt(m.rnCarouselDuration,10)||300,isSequential:!0,autoSlideDuration:3,bufferSize:5,moveTreshold:.1,defaultIndex:0},N=angular.extend({},O),I=0,j=!1,Y=[],z=null,H=null,V=!1,B=!1;"true"!==m.rnSwipeDisabled&&e.bind(h,{start:T,move:D,end:E,cancel:function(e){E({},e)}}),f.nextSlide=function(e){var t=f.carouselIndex+1;t>Y.length-1&&(t=0),B||C(t,e)},f.prevSlide=function(e){var t=f.carouselIndex-1;0>t&&(t=Y.length-1),C(t,e)};var W=!0;if(f.carouselIndex=0,y||(Y=[],angular.forEach(x(),function(e,t){Y.push({id:t})})),void 0!==m.rnCarouselControls){var U=(y?f.$eval(g.replace("::","")).length:Y.length)>1&&angular.isDefined(p.rnCarouselControlsAllowLoop),G='<div class="rn-carousel-controls">\n  <span class="rn-carousel-control rn-carousel-control-prev" ng-click="prevSlide()" ng-if="carouselIndex > 0 || '+U+'"></span>\n  <span class="rn-carousel-control rn-carousel-control-next" ng-click="nextSlide()" ng-if="carouselIndex < '+(y?"("+g.replace("::","")+").length - 1":Y.length-1)+" || "+U+'"></span>\n</div>';h.parent().append(i(angular.element(G))(f))}if(void 0!==m.rnCarouselAutoSlide){var q=parseInt(m.rnCarouselAutoSlide,10)||N.autoSlideDuration;f.autoSlide=function(){f.autoSlider&&(a.cancel(f.autoSlider),f.autoSlider=null),f.autoSlider=a(function(){B||R||f.nextSlide()},1e3*q)}}if(m.rnCarouselDefaultIndex){var K=r(m.rnCarouselDefaultIndex);N.defaultIndex=K(f.$parent)||0}if(m.rnCarouselIndex){var X=function(e){J.assign(f.$parent,e)},J=r(m.rnCarouselIndex);angular.isFunction(J.assign)?(f.$watch("carouselIndex",function(e){X(e)}),f.$parent.$watch(J,function(e,t){void 0!==e&&null!==e&&(Y&&Y.length>0&&e>=Y.length?(e=Y.length-1,X(e)):Y&&0>e&&(e=0,X(e)),B||C(e,{animate:!W}),W=!1)}),!0,N.defaultIndex&&C(N.defaultIndex,{animate:!W})):isNaN(m.rnCarouselIndex)||C(parseInt(m.rnCarouselIndex,10),{animate:!1})}else C(N.defaultIndex,{animate:!W}),W=!1;if(m.rnCarouselLocked&&f.$watch(m.rnCarouselLocked,function(e,t){B=!0===e}),y){var Z=void 0!==m.rnCarouselDeepWatch;f[Z?"$watch":"$watchCollection"](g,function(e,t){if(Y=e,!angular.isArray(Y))throw Error("the slides collection must be an Array");Z&&angular.isArray(e)?C(c(e,t[f.carouselIndex],f.carouselIndex),{animate:!1}):C(f.carouselIndex,{animate:!1})},!0)}f.$on("$destroy",function(){M()}),f.carouselBufferIndex=0,f.carouselBufferSize=N.bufferSize;var Q=angular.element(t);Q.bind("orientationchange",A),Q.bind("resize",A),f.$on("$destroy",function(){M(),Q.unbind("orientationchange",A),Q.unbind("resize",A)})}}}}])}(),angular.module("angular-carousel.shifty",[]).factory("Tweenable",function(){return function(e){var t=function(){"use strict";function t(){}function n(e,t){var n;for(n in e)Object.hasOwnProperty.call(e,n)&&t(n)}function r(e,t){return n(t,function(n){e[n]=t[n]}),e}function i(e,t){n(t,function(n){void 0===e[n]&&(e[n]=t[n])})}function o(e,t,n,r,i,o,s){var l,u=(e-o)/i;for(l in t)t.hasOwnProperty(l)&&(t[l]=a(n[l],r[l],d[s[l]],u));return t}function a(e,t,n,r){return e+(t-e)*n(r)}function s(e,t){var r=c.prototype.filter,i=e._filterArgs;n(r,function(n){void 0!==r[n][t]&&r[n][t].apply(e,i)})}function l(e,t,n,r,i,a,l,u,c){v=t+n,y=Math.min(m(),v),b=y>=v,x=n-(v-y),e.isPlaying()&&!b?(e._scheduleId=c(e._timeoutHandler,h),s(e,"beforeTween"),o(y,r,i,a,n,t,l),s(e,"afterTween"),u(r,e._attachment,x)):b&&(u(a,e._attachment,x),e.stop(!0))}function u(e,t){var r={};return"string"==typeof t?n(e,function(e){r[e]=t}):n(e,function(e){r[e]||(r[e]=t[e]||p)}),r}function c(e,t){this._currentState=e||{},this._configured=!1,this._scheduleFunction=f,void 0!==t&&this.setConfig(t)}var d,f,p="linear",h=1e3/60,g=Date.now?Date.now:function(){return+new Date},m="undefined"!=typeof SHIFTY_DEBUG_NOW?SHIFTY_DEBUG_NOW:g;f="undefined"!=typeof window?window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||window.mozCancelRequestAnimationFrame&&window.mozRequestAnimationFrame||setTimeout:setTimeout;var v,y,b,x;return c.prototype.tween=function(e){return this._isTweening?this:(void 0===e&&this._configured||this.setConfig(e),this._timestamp=m(),this._start(this.get(),this._attachment),this.resume())},c.prototype.setConfig=function(e){e=e||{},this._configured=!0,this._attachment=e.attachment,this._pausedAtTime=null,this._scheduleId=null,this._start=e.start||t,this._step=e.step||t,this._finish=e.finish||t,this._duration=e.duration||500,this._currentState=e.from||this.get(),this._originalState=this.get(),this._targetState=e.to||this.get();var n=this._currentState,r=this._targetState;return i(r,n),this._easing=u(n,e.easing||p),this._filterArgs=[n,this._originalState,r,this._easing],s(this,"tweenCreated"),this},c.prototype.get=function(){return r({},this._currentState)},c.prototype.set=function(e){this._currentState=e},c.prototype.pause=function(){return this._pausedAtTime=m(),this._isPaused=!0,this},c.prototype.resume=function(){this._isPaused&&(this._timestamp+=m()-this._pausedAtTime),this._isPaused=!1,this._isTweening=!0;var e=this;return this._timeoutHandler=function(){l(e,e._timestamp,e._duration,e._currentState,e._originalState,e._targetState,e._easing,e._step,e._scheduleFunction)},this._timeoutHandler(),this},c.prototype.seek=function(e){return this._timestamp=m()-e,this.isPlaying()||(this._isTweening=!0,this._isPaused=!1,l(this,this._timestamp,this._duration,this._currentState,this._originalState,this._targetState,this._easing,this._step,this._scheduleFunction),this._timeoutHandler(),this.pause()),this},c.prototype.stop=function(n){return this._isTweening=!1,this._isPaused=!1,this._timeoutHandler=t,(e.cancelAnimationFrame||e.webkitCancelAnimationFrame||e.oCancelAnimationFrame||e.msCancelAnimationFrame||e.mozCancelRequestAnimationFrame||e.clearTimeout)(this._scheduleId),n&&(r(this._currentState,this._targetState),s(this,"afterTweenEnd"),this._finish.call(this,this._currentState,this._attachment)),this},c.prototype.isPlaying=function(){return this._isTweening&&!this._isPaused},c.prototype.setScheduleFunction=function(e){this._scheduleFunction=e},c.prototype.dispose=function(){var e;for(e in this)this.hasOwnProperty(e)&&delete this[e]},c.prototype.filter={},c.prototype.formula={linear:function(e){return e}},d=c.prototype.formula,r(c,{now:m,each:n,tweenProps:o,tweenProp:a,applyFilter:s,shallowCopy:r,defaults:i,composeEasingObject:u}),e.Tweenable=c,c}();!function(){t.shallowCopy(t.prototype.formula,{easeInQuad:function(e){return Math.pow(e,2)},easeOutQuad:function(e){return-(Math.pow(e-1,2)-1)},easeInOutQuad:function(e){return(e/=.5)<1?.5*Math.pow(e,2):-.5*((e-=2)*e-2)},easeInCubic:function(e){return Math.pow(e,3)},easeOutCubic:function(e){return Math.pow(e-1,3)+1},easeInOutCubic:function(e){return(e/=.5)<1?.5*Math.pow(e,3):.5*(Math.pow(e-2,3)+2)},easeInQuart:function(e){return Math.pow(e,4)},easeOutQuart:function(e){return-(Math.pow(e-1,4)-1)},easeInOutQuart:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeInQuint:function(e){return Math.pow(e,5)},easeOutQuint:function(e){return Math.pow(e-1,5)+1},easeInOutQuint:function(e){return(e/=.5)<1?.5*Math.pow(e,5):.5*(Math.pow(e-2,5)+2)},easeInSine:function(e){return 1-Math.cos(e*(Math.PI/2))},easeOutSine:function(e){return Math.sin(e*(Math.PI/2))},easeInOutSine:function(e){return-.5*(Math.cos(Math.PI*e)-1)},easeInExpo:function(e){return 0===e?0:Math.pow(2,10*(e-1))},easeOutExpo:function(e){return 1===e?1:1-Math.pow(2,-10*e)},easeInOutExpo:function(e){return 0===e?0:1===e?1:(e/=.5)<1?.5*Math.pow(2,10*(e-1)):.5*(2-Math.pow(2,-10*--e))},easeInCirc:function(e){return-(Math.sqrt(1-e*e)-1)},easeOutCirc:function(e){return Math.sqrt(1-Math.pow(e-1,2))},easeInOutCirc:function(e){return(e/=.5)<1?-.5*(Math.sqrt(1-e*e)-1):.5*(Math.sqrt(1-(e-=2)*e)+1)},easeOutBounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},easeInBack:function(e){var t=1.70158;return e*e*((t+1)*e-t)},easeOutBack:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},easeInOutBack:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},elastic:function(e){return-1*Math.pow(4,-8*e)*Math.sin((6*e-1)*(2*Math.PI)/2)+1},swingFromTo:function(e){var t=1.70158;return(e/=.5)<1?e*e*((1+(t*=1.525))*e-t)*.5:.5*((e-=2)*e*((1+(t*=1.525))*e+t)+2)},swingFrom:function(e){var t=1.70158;return e*e*((t+1)*e-t)},swingTo:function(e){var t=1.70158;return(e-=1)*e*((t+1)*e+t)+1},bounce:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?7.5625*(e-=1.5/2.75)*e+.75:2.5/2.75>e?7.5625*(e-=2.25/2.75)*e+.9375:7.5625*(e-=2.625/2.75)*e+.984375},bouncePast:function(e){return 1/2.75>e?7.5625*e*e:2/2.75>e?2-(7.5625*(e-=1.5/2.75)*e+.75):2.5/2.75>e?2-(7.5625*(e-=2.25/2.75)*e+.9375):2-(7.5625*(e-=2.625/2.75)*e+.984375)},easeFromTo:function(e){return(e/=.5)<1?.5*Math.pow(e,4):-.5*((e-=2)*Math.pow(e,3)-2)},easeFrom:function(e){return Math.pow(e,4)},easeTo:function(e){return Math.pow(e,.25)}})}(),function(){function e(e,t,n,r,i,o){function a(e){return((d*e+f)*e+p)*e}function s(e){return((h*e+g)*e+m)*e}function l(e){return(3*d*e+2*f)*e+p}function u(e){return e>=0?e:0-e}function c(e,t){var n,r,i,o,s,c;for(i=e,c=0;8>c;c++){if(o=a(i)-e,u(o)<t)return i;if(s=l(i),u(s)<1e-6)break;i-=o/s}if(n=0,r=1,i=e,n>i)return n;if(i>r)return r;for(;r>n;){if(o=a(i),u(o-e)<t)return i;e>o?n=i:r=i,i=.5*(r-n)+n}return i}var d=0,f=0,p=0,h=0,g=0,m=0;return p=3*t,f=3*(r-t)-p,d=1-p-f,m=3*n,g=3*(i-n)-m,h=1-m-g,function(e,t){return s(c(e,t))}(e,function(e){return 1/(200*e)}(o))}function n(t,n,r,i){return function(o){return e(o,t,n,r,i,1)}}t.setBezierFunction=function(e,r,i,o,a){var s=n(r,i,o,a);return s.x1=r,s.y1=i,s.x2=o,s.y2=a,t.prototype.formula[e]=s},t.unsetBezierFunction=function(e){delete t.prototype.formula[e]}}(),function(){function e(e,n,r,i,o){return t.tweenProps(i,n,e,r,1,0,o)}var n=new t;n._filterArgs=[],t.interpolate=function(r,i,o,a){var s=t.shallowCopy({},r),l=t.composeEasingObject(r,a||"linear");n.set({});var u=n._filterArgs;u.length=0,u[0]=s,u[1]=r,u[2]=i,u[3]=l,t.applyFilter(n,"tweenCreated"),t.applyFilter(n,"beforeTween");var c=e(r,s,i,o,l);return t.applyFilter(n,"afterTween"),c}}(),function(e){function t(e,t){M.length=0;var n,r=e.length;for(n=0;r>n;n++)M.push("_"+t+"_"+n);return M}function n(e){var t=e.match(w);return t?(1===t.length||e[0].match(x))&&t.unshift(""):t=["",""],t.join($)}function r(t){e.each(t,function(e){var n=t[e];"string"==typeof n&&n.match(S)&&(t[e]=i(n))})}function i(e){return l(S,e,o)}function o(e){var t=a(e);return"rgb("+t[0]+","+t[1]+","+t[2]+")"}function a(e){return 3===(e=e.replace(/#/,"")).length&&(e=e.split(""),e=e[0]+e[0]+e[1]+e[1]+e[2]+e[2]),T[0]=s(e.substr(0,2)),T[1]=s(e.substr(2,2)),T[2]=s(e.substr(4,2)),T}function s(e){return parseInt(e,16)}function l(e,t,n){var r=t.match(e),i=t.replace(e,$);if(r)for(var o,a=r.length,s=0;a>s;s++)o=r.shift(),i=i.replace($,n(o));return i}function u(e){return l(C,e,c)}function c(e){for(var t=e.match(_),n=t.length,r=e.match(k)[0],i=0;n>i;i++)r+=parseInt(t[i],10)+",";return r=r.slice(0,-1)+")"}function d(r){var i={};return e.each(r,function(e){var o=r[e];if("string"==typeof o){var a=v(o);i[e]={formatString:n(o),chunkNames:t(a,e)}}}),i}function f(t,n){e.each(n,function(e){for(var r=v(t[e]),i=r.length,o=0;i>o;o++)t[n[e].chunkNames[o]]=+r[o];delete t[e]})}function p(t,n){e.each(n,function(e){var r=t[e],i=g(h(t,n[e].chunkNames),n[e].chunkNames);r=m(n[e].formatString,i),t[e]=u(r)})}function h(e,t){for(var n,r={},i=t.length,o=0;i>o;o++)n=t[o],r[n]=e[n],delete e[n];return r}function g(e,t){D.length=0;for(var n=t.length,r=0;n>r;r++)D.push(e[t[r]]);return D}function m(e,t){for(var n=e,r=t.length,i=0;r>i;i++)n=n.replace($,+t[i].toFixed(4));return n}function v(e){return e.match(_)}function y(t,n){e.each(n,function(e){for(var r=n[e].chunkNames,i=r.length,o=t[e].split(" "),a=o[o.length-1],s=0;i>s;s++)t[r[s]]=o[s]||a;delete t[e]})}function b(t,n){e.each(n,function(e){for(var r=n[e].chunkNames,i=r.length,o="",a=0;i>a;a++)o+=" "+t[r[a]],delete t[r[a]];t[e]=o.substr(1)})}var x=/(\d|\-|\.)/,w=/([^\-0-9\.]+)/g,_=/[0-9.\-]+/g,C=new RegExp("rgb\\("+_.source+/,\s*/.source+_.source+/,\s*/.source+_.source+"\\)","g"),k=/^.*\(/,S=/#([0-9]|[a-f]){3,6}/gi,$="VAL",M=[],T=[],D=[];e.prototype.filter.token={tweenCreated:function(e,t,n,i){r(e),r(t),r(n),this._tokenData=d(e)},beforeTween:function(e,t,n,r){y(r,this._tokenData),f(e,this._tokenData),f(t,this._tokenData),f(n,this._tokenData)},afterTween:function(e,t,n,r){p(e,this._tokenData),p(t,this._tokenData),p(n,this._tokenData),b(r,this._tokenData)}}}(t)}(window),window.Tweenable}),function(){"use strict";angular.module("angular-carousel").filter("carouselSlice",function(){return function(e,t,n){return angular.isArray(e)?e.slice(t,t+n):angular.isObject(e)?e:void 0}})}(),function(e){var t=/iPhone/i,n=/iPod/i,r=/iPad/i,i=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,o=/Android/i,a=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,s=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/Windows Phone/i,u=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,d=/BB10/i,f=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,h=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=new RegExp("(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)","i"),m=function(e,t){return e.test(t)},v=function(e){var v=e||navigator.userAgent,y=v.split("[FBAN");if(void 0!==y[1]&&(v=y[0]),void 0!==(y=v.split("Twitter"))[1]&&(v=y[0]),this.apple={phone:m(t,v),ipod:m(n,v),tablet:!m(t,v)&&m(r,v),device:m(t,v)||m(n,v)||m(r,v)},this.amazon={phone:m(a,v),tablet:!m(a,v)&&m(s,v),device:m(a,v)||m(s,v)},this.android={phone:m(a,v)||m(i,v),tablet:!m(a,v)&&!m(i,v)&&(m(s,v)||m(o,v)),device:m(a,v)||m(s,v)||m(i,v)||m(o,v)},this.windows={phone:m(l,v),tablet:m(u,v),device:m(l,v)||m(u,v)},this.other={blackberry:m(c,v),blackberry10:m(d,v),opera:m(f,v),firefox:m(h,v),chrome:m(p,v),device:m(c,v)||m(d,v)||m(f,v)||m(h,v)||m(p,v)},this.seven_inch=m(g,v),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},y=function(){var e=new v;return e.Class=v,e};"undefined"!=typeof module&&module.exports&&"undefined"==typeof window?module.exports=v:"undefined"!=typeof module&&module.exports&&"undefined"!=typeof window?module.exports=y():"function"==typeof define&&define.amd?define("isMobile",[],e.isMobile=y()):e.isMobile=y()}(this),function(e,t){"use strict";function n(){if("pageYOffset"in e)return{scrollTop:pageYOffset,scrollLeft:pageXOffset};var t,n,r=document,i=r.documentElement,o=r.body;return t=i.scrollLeft||o.scrollLeft||0,n=i.scrollTop||o.scrollTop||0,{scrollTop:n,scrollLeft:t}}function r(t,n){return t===e?"clientWidth"===n?e.innerWidth:e.innerHeight:t[n]}function i(t,r){return t===e?n()[r]:t[r]}function o(t,r,i){return t.getBoundingClientRect()[i?"left":"top"]-(r===e?0:r.getBoundingClientRect()[i?"left":"top"])+(r===e?n():r)[i?"scrollLeft":"scrollTop"]}var a=document.documentElement,s=a.matches?"matches":a.matchesSelector?"matchesSelector":a.webkitMatches?"webkitMatches":a.webkitMatchesSelector?"webkitMatchesSelector":a.msMatches?"msMatches":a.msMatchesSelector?"msMatchesSelector":a.mozMatches?"mozMatches":a.mozMatchesSelector?"mozMatchesSelector":null,l=t.element.prototype.closest||function(e){for(var n=this[0].parentNode;n!==document.documentElement&&null!=n&&!n[s](e);)n=n.parentNode;return n&&n[s](e)?t.element(n):t.element()},u=t.module("vs-repeat",[]).directive("vsRepeat",["$compile","$parse",function(n,a){return{restrict:"A",scope:!0,compile:function(s,u){var c,d,f,p,h,g,m=t.isDefined(u.vsRepeatContainer)?t.element(s[0].querySelector(u.vsRepeatContainer)):s,v=m.children().eq(0),y=v[0].outerHTML,b="$vs_collection",x=!1,w={vsRepeat:"elementSize",vsOffsetBefore:"offsetBefore",vsOffsetAfter:"offsetAfter",vsScrolledToEndOffset:"scrolledToEndOffset",vsScrolledToBeginningOffset:"scrolledToBeginningOffset",vsExcess:"excess"};if(v.attr("ng-repeat"))g="ng-repeat",c=v.attr("ng-repeat");else if(v.attr("data-ng-repeat"))g="data-ng-repeat",c=v.attr("data-ng-repeat");else if(v.attr("ng-repeat-start"))x=!0,g="ng-repeat-start",c=v.attr("ng-repeat-start");else{if(!v.attr("data-ng-repeat-start"))throw new Error("angular-vs-repeat: no ng-repeat directive on a child element");x=!0,g="data-ng-repeat-start",c=v.attr("data-ng-repeat-start")}if(d=/^\s*(\S+)\s+in\s+([\S\s]+?)(track\s+by\s+\S+)?$/.exec(c),f=d[1],p=d[2],h=d[3],x)for(var _=0,C=m.children().eq(0);null==C.attr("ng-repeat-end")&&null==C.attr("data-ng-repeat-end");)_++,C=m.children().eq(_),y+=C[0].outerHTML;return m.empty(),{pre:function(s,u,c){function d(){if(!A||A.length<1)s[b]=[],T=0,s.sizesCumulative=[0];else if(T=A.length,N){s.sizes=A.map(function(e){var n=s.$new(!1);t.extend(n,e),n[f]=e;var r=c.vsSize||c.vsSizeProperty?n.$eval(c.vsSize||c.vsSizeProperty):s.elementSize;return n.$destroy(),r});var e=0;s.sizesCumulative=s.sizes.map(function(t){var n=e;return e+=t,n}),s.sizesCumulative.push(e)}else m();k()}function m(){O&&s.$$postDigest(function(){if(D[0].offsetHeight||D[0].offsetWidth){for(var e=D.children(),t=0,n=!1,r=!1;t<e.length;){if(null!=e[t].attributes[g]||r){if(n||(s.elementSize=0),n=!0,e[t][z]&&(s.elementSize+=e[t][z]),!x)break;if(null!=e[t].attributes["ng-repeat-end"]||null!=e[t].attributes["data-ng-repeat-end"])break;r=!0}t++}n&&(k(),O=!1,s.$root&&!s.$root.$$phase&&s.$apply())}else var i=s.$watch(function(){(D[0].offsetHeight||D[0].offsetWidth)&&(i(),m())})})}function v(){var e="tr"===L?"":"min-";return R?e+"width":e+"height"}function _(){M()&&s.$digest()}function C(){void 0!==c.vsAutoresize&&(O=!0,m(),s.$root&&!s.$root.$$phase&&s.$apply()),M()&&s.$apply()}function k(){V=void 0,B=void 0,W=T,U=0,S(N?s.sizesCumulative[T]:s.elementSize*T),M(),s.$emit("vsRepeatReinitialized",s.startIndex,s.endIndex)}function S(e){s.totalSize=s.offsetBefore+e+s.offsetAfter}function $(){var e=r(I[0],Y);e!==G&&(k(),s.$root&&!s.$root.$$phase&&s.$apply()),G=e}function M(){var e=i(I[0],H),t=r(I[0],Y),n=D[0]===I[0]?0:o(D[0],I[0],R),l=s.startIndex,u=s.endIndex;if(N){for(l=0;s.sizesCumulative[l]<e-s.offsetBefore-n;)l++;for(l>0&&l--,u=l=Math.max(Math.floor(l-s.excess/2),0);s.sizesCumulative[u]<e-s.offsetBefore-n+t;)u++;u=Math.min(Math.ceil(u+s.excess/2),T)}else l=Math.max(Math.floor((e-s.offsetBefore-n)/s.elementSize)-s.excess/2,0),u=Math.min(l+Math.ceil(t/s.elementSize)+s.excess,T);W=Math.min(l,W),U=Math.max(u,U),s.startIndex=j.latch?W:l,s.endIndex=j.latch?U:u,U<s.startIndex&&(s.startIndex=U);var d=!1;if(null==V?d=!0:null==B&&(d=!0),d||(j.hunked?Math.abs(s.startIndex-V)>=s.excess/2||0===s.startIndex&&0!==V?d=!0:(Math.abs(s.endIndex-B)>=s.excess/2||s.endIndex===T&&B!==T)&&(d=!0):d=s.startIndex!==V||s.endIndex!==B),d){s[b]=A.slice(s.startIndex,s.endIndex),s.$emit("vsRepeatInnerCollectionUpdated",s.startIndex,s.endIndex,V,B);var f;c.vsScrolledToEnd&&(f=A.length-(s.scrolledToEndOffset||0),(s.endIndex>=f&&B<f||A.length&&s.endIndex===A.length)&&s.$eval(c.vsScrolledToEnd)),c.vsScrolledToBeginning&&(f=s.scrolledToBeginningOffset||0,s.startIndex<=f&&V>s.startIndex&&s.$eval(c.vsScrolledToBeginning)),V=s.startIndex,B=s.endIndex;var p=a(N?"(sizesCumulative[$index + startIndex] + offsetBefore)":"(($index + startIndex) * elementSize + offsetBefore)"),h=p(s,{$index:0}),g=p(s,{$index:s[b].length}),m=s.totalSize;P.css(v(),h+"px"),F.css(v(),m-g+"px")}return d}var T,D=t.isDefined(c.vsRepeatContainer)?t.element(u[0].querySelector(c.vsRepeatContainer)):u,E=t.element(y),L=E[0].tagName.toLowerCase(),A=[],R=void 0!==c.vsHorizontal,P=t.element("<"+L+' class="vs-repeat-before-content"></'+L+">"),F=t.element("<"+L+' class="vs-repeat-after-content"></'+L+">"),O=!c.vsRepeat,N=!!c.vsSize||!!c.vsSizeProperty,I=c.vsScrollParent?"window"===c.vsScrollParent?t.element(e):l.call(D,c.vsScrollParent):D,j="vsOptions"in c?s.$eval(c.vsOptions):{},Y=R?"clientWidth":"clientHeight",z=R?"offsetWidth":"offsetHeight",H=R?"scrollLeft":"scrollTop";if(s.totalSize=0,!("vsSize"in c)&&"vsSizeProperty"in c&&console.warn("vs-size-property attribute is deprecated. Please use vs-size attribute which also accepts angular expressions."),0===I.length)throw"Specified scroll parent selector did not match any element";s.$scrollParent=I,N&&(s.sizesCumulative=[]),s.elementSize=+c.vsRepeat||r(I[0],Y)||50,s.offsetBefore=0,s.offsetAfter=0,s.excess=2,R?(P.css("height","100%"),F.css("height","100%")):(P.css("width","100%"),F.css("width","100%")),Object.keys(w).forEach(function(e){c[e]&&c.$observe(e,function(t){s[w[e]]=+t,k()})}),s.$watchCollection(p,function(e){A=e||[],d()}),E.eq(0).attr(g,f+" in "+b+(h?" "+h:"")),E.addClass("vs-repeat-repeated-element"),D.append(P),D.append(E),n(E)(s),D.append(F),s.startIndex=0,s.endIndex=0,I.on("scroll",_),t.element(e).on("resize",C),s.$on("$destroy",function(){t.element(e).off("resize",C),I.off("scroll",_)}),s.$on("vsRepeatTrigger",d),s.$on("vsRepeatResize",function(){O=!0,m()});var V,B,W,U;s.$on("vsRenderAll",function(){j.latch&&setTimeout(function(){var e=T;U=Math.max(e,U),s.endIndex=j.latch?U:e,s[b]=A.slice(s.startIndex,s.endIndex),B=s.endIndex,s.$$postDigest(function(){P.css(v(),0),F.css(v(),0)}),s.$apply(function(){s.$emit("vsRenderAllDone")})})});var G;s.$watch(function(){"function"==typeof e.requestAnimationFrame?e.requestAnimationFrame($):$()})}}}}}]);"undefined"!=typeof module&&module.exports&&(module.exports=u.name)}(window,window.angular);(function(){var b=angular.module("tm1Ui",["ngDialog","acute.select","xeditable","nvd3"]);b.value("tm1UiSettings",{debug:false,frameworkLogID:"tm1.event.log",batcherRequestID:"tm1.core.data.request",batcherResponseID:"tm1.core.data.response",batcherElementRequestID:"tm1.core.element.request",batcherElementResponseID:"tm1.core.element.response",batchingElementRequestEnabled:false,batchingDbrRequestEnabled:true,windowResizeID:"app.window.resize",storeReadyID:"tm1.store.ready",storeUpdateSuccessID:"tm1.store.update.success",t:"X-CSRF-Token",tv:"Fetch",tu:"api/sec",tum:"GET",version:"3.2.0",site:"https://code.cubewise.com/canvas-help/",support:"canvas@cubewise.com"});b.config(["$logProvider","$sceProvider",function(d,a){d.debugEnabled(true);a.enabled(false)}]);b.run(["AcuteSelectService","editableOptions",function(a,d){a.updateSetting("templatePath","assets/html");d.theme="bs3"}]);b.factory("authHttpResponseInterceptor",["$q","$location","$rootScope","$window","$log",function(k,g,a,h,j){return{response:function(c){return c||k.when(c)},responseError:function(o){if(o.status===401){var c=o.config.url.split("/");if(c.length>1&&(c[0]=="tm1"||c[0]=="api")){var p=c.length>2?c[2]:c[1];var d=a.$state.current.name;var e=a.$stateParams.name;if(d!="login"){var q=false;var f="";_.each(a.instances,function(l){if(l.name.toLowerCase()===p.toLowerCase()){l.isLoggedIn=false;l.cam=null;l.userName=null;q=true}});if(!q&&o.config&&o.config.data){if(angular.isArray(o.config.data)&&o.config.data.length>0){if(o.config.data[0].instance){f=o.config.data[0].instance}}else{if(o.config.data.instance){f=o.config.data.instance}}}else{f=p}a.$state.transitionTo("login",{instance:f})}return o}}if(o.status===400||o.status===404){return o}if(o.status===500){j.warn("TM1 Server Might Be Down. Please Check.");return o}return k.reject(o)}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiAbout";d.Controller="Tm1UiAboutCtrl";d.Template="assets/html/tm1-ui-about.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",name:"@",id:"@",tm1Debug:"=",tm1UiClass:"@",ngModel:"="},link:function(o,e,r,p,q){o.directiveID=b.newguid();o.directiveClasses="";o.libraries=[];o.debug=false;o.log=function(j){o.logObj(j,{message:j})};o.logObj=function(k,j){if(o.debug){h.$broadcast(g.frameworkLogID,{id:o.directiveID,name:d.Name,message:k,object:j})}};if(angular.isDefined(r.tm1Debug)&&o.tm1Debug){o.debug=true}if(angular.isDefined(r.tm1UiClass)&&!_.isEmpty(o.tm1UiClass)){o.directiveClasses=o.tm1UiClass}var f={name:"Canvas",version:g.version,url:g.site,license:"Cubewise",licenseUrl:"assets/html/LICENSE.txt",site:g.site,support:g.support};var s={name:"AngularJS",version:angular.version.full,url:"https://angularjs.org/",license:"MIT",licenseUrl:"https://github.com/angular/angular.js/blob/master/LICENSE"};o.libraries.push(s);s={name:"Bootstrap",version:"3.2.0",url:"http://getbootstrap.com/",license:"MIT",licenseUrl:"https://github.com/twbs/bootstrap/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular UI Bootstrap",version:"2.5.0",url:"http://angular-ui.github.io/bootstrap/",license:"MIT",licenseUrl:"https://github.com/angular-ui/bootstrap/blob/master/LICENSE"};o.libraries.push(s);s={name:"Font Awesome",version:"4.7.0",url:"http://fontawesome.io/",license:"SIL OFL 1.1, MIT",licenseUrl:"http://fontawesome.io/license/"};o.libraries.push(s);s={name:"Angular Acute-Select",version:"0.0.0",url:"https://github.com/john-oc/acute-select",license:"MIT",licenseUrl:"https://github.com/john-oc/acute-select/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular Moment",version:"2.0.1",url:"https://github.com/urish/angular-moment",license:"MIT",licenseUrl:"https://github.com/urish/angular-moment/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular NVD3",version:"1.0.7",url:"http://krispo.github.io/angular-nvd3",license:"MIT",licenseUrl:"https://github.com/krispo/angular-nvd3/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular Sanitize",version:"1.5.3",url:"https://docs.angularjs.org/api/ngSanitize",license:"MIT",licenseUrl:"https://github.com/angular/angular.js/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular UI-Router",version:"1.0.3",url:"https://github.com/angular-ui/ui-router",license:"MIT",licenseUrl:"https://github.com/angular-ui/ui-router/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular uuid2",version:"0.0.0",url:"https://github.com/MBehtemam/angular-uuid",license:"MIT",licenseUrl:"https://github.com/MBehtemam/angular-uuid/blob/master/LICENSE.md"};o.libraries.push(s);s={name:"Angular ContextMenu",version:"0.9.0+",url:"https://github.com/Templarian/ui.bootstrap.contextMenu",license:"MIT",licenseUrl:"https://github.com/Templarian/ui.bootstrap.contextMenu/blob/master/license.txt"};o.libraries.push(s);s={name:"Angular ngStorage",version:"0.0.0",url:"https://github.com/gsklee/ngStorage",license:"MIT",licenseUrl:"https://github.com/gsklee/ngStorage/blob/master/LICENSE"};o.libraries.push(s);s={name:"Bootstrap DatePicker",version:"1.6.1",url:"https://github.com/eternicode/bootstrap-datepicker",license:"Apache License v2.0",licenseUrl:"https://github.com/eternicode/bootstrap-datepicker/blob/master/LICENSE"};o.libraries.push(s);s={name:"jQuery Menu-Aim",version:"0.0.0",url:"https://github.com/kamens/jQuery-menu-aim",license:"MIT",licenseUrl:"https://github.com/kamens/jQuery-menu-aim#faq"};o.libraries.push(s);s={name:"Modernizr",version:"2.8.3",url:"https://github.com/modernizr/modernizr",license:"MIT",licenseUrl:"https://github.com/Modernizr/Modernizr/blob/master/LICENSE"};o.libraries.push(s);s={name:"d3",version:"3.5.17",url:"https://d3js.org/",license:"BSD",licenseUrl:"https://github.com/d3/d3/blob/master/LICENSE"};o.libraries.push(s);s={name:"nvd3",version:"1.8.3",url:"https://github.com/novus/nvd3",license:"Apache License v2.0",licenseUrl:"https://github.com/novus/nvd3/blob/master/LICENSE.md"};o.libraries.push(s);s={name:"Moment",version:"2.9.0",url:"http://momentjs.com/",license:"MIT",licenseUrl:"https://github.com/moment/moment/blob/develop/LICENSE"};o.libraries.push(s);s={name:"Humanize Duration",version:"2.7.0+",url:"https://github.com/EvanHahn/HumanizeDuration.js",license:"MIT",licenseUrl:"https://github.com/EvanHahn/HumanizeDuration.js/blob/master/LICENSE.txt"};o.libraries.push(s);s={name:"Angular ngDialog",version:"0.5.8",url:"https://github.com/likeastore/ngDialog",license:"MIT",licenseUrl:"https://github.com/likeastore/ngDialog#license"};o.libraries.push(s);s={name:"Papa Parse",version:"4.1.2",url:"https://github.com/mholt/PapaParse",license:"MIT",licenseUrl:"https://github.com/mholt/PapaParse/blob/master/LICENSE"};o.libraries.push(s);s={name:"Text Angular",version:"1.5.0",url:"https://github.com/fraywing/textAngular",license:"MIT",licenseUrl:"https://github.com/fraywing/textAngular#license"};o.libraries.push(s);s={name:"jQuery Textscillate",version:"0.7.0",url:"http://textillate.js.org/",license:"MIT",licenseUrl:"https://github.com/jschr/textillate/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular xeditable",version:"0.1.8",url:"https://vitalets.github.io/angular-xeditable/",license:"MIT",licenseUrl:"https://github.com/vitalets/angular-xeditable/blob/master/LICENSE"};o.libraries.push(s);s={name:"Chart.js",version:"2.7.1",url:"http://www.chartjs.org/",license:"MIT",licenseUrl:"https://github.com/nnnick/Chart.js/blob/master/LICENSE.md"};o.libraries.push(s);s={name:"jQuery",version:$.fn.jquery,url:"https://jquery.com/",license:"MIT",licenseUrl:"https://jquery.org/license/"};o.libraries.push(s);s={name:"Lodash",version:_.VERSION,url:"https://lodash.com/",license:"jQuery License, MIT",licenseUrl:"https://github.com/lodash/lodash/blob/master/LICENSE"};o.libraries.push(s);s={name:"Dimple",version:"2.3.0",url:"http://dimplejs.org/",license:"MIT",licenseUrl:"https://github.com/PMSI-AlignAlytics/dimple/blob/master/MIT-LICENSE.txt"};o.libraries.push(s);s={name:"Angular ng-table",version:"3.0.1",url:"https://github.com/esvit/ng-table/",license:"BSD 2-Clause License",licenseUrl:"http://creativecommons.org/licenses/BSD/"};o.libraries.push(s);s={name:"XDomain",version:"0.7.5",url:"https://github.com/jpillora/xdomain",license:"MIT",licenseUrl:"https://github.com/jpillora/xdomain#mit-license"};o.libraries.push(s);s={name:"Angular File Upload",version:"12.2.12",url:"https://github.com/danialfarid/ng-file-upload",license:"MIT",licenseUrl:"https://github.com/danialfarid/ng-file-upload/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular matchMedia",version:"0.6.0",url:"https://github.com/jacopotarantino/angular-match-media",license:"Creative Commons Attribution-ShareAlike 4.0 International License",licenseUrl:"https://github.com/jacopotarantino/angular-match-media#license"};o.libraries.push(s);s={name:"SheetJS*",version:"0.10.1",url:"https://github.com/SheetJS/js-xlsx",license:"Apache License v2.0",licenseUrl:"https://github.com/SheetJS/js-xlsx/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular SheetJS*",version:"0.0.3",url:"https://github.com/brexis/angular-js-xlsx",license:"MIT",licenseUrl:"https://github.com/brexis/angular-js-xlsx/blob/master/LICENSE.txt"};o.libraries.push(s);s={name:"SheetJS - Spreadsheet Number Formater*",version:"0.9.2",url:"https://github.com/SheetJS/ssf",license:"Apache License v2.0",licenseUrl:"https://github.com/SheetJS/ssf/blob/master/LICENSE"};o.libraries.push(s);s={name:"isMobile",version:"0.4.1",url:"https://github.com/kaimallea/isMobile",license:"Public Domain Dedication",licenseUrl:"http://creativecommons.org/publicdomain/zero/1.0/"};o.libraries.push(s);s={name:"Angular UI Grid",version:"4.4.4",url:"https://github.com/angular-ui/ui-grid",license:"MIT",licenseUrl:"https://github.com/angular-ui/ui-grid/blob/master/LICENSE.md"};o.libraries.push(s);s={name:"Angular Drag and Drop Lists",version:"2.1.0",url:"http://marceljuenemann.github.io/angular-drag-and-drop-lists/",license:"MIT",licenseUrl:"https://github.com/marceljuenemann/angular-drag-and-drop-lists#license"};o.libraries.push(s);s={name:"Angular Data Table",version:"0.8.0",url:"http://jonshaffer.github.io/angular-data-table/",license:"MIT",licenseUrl:"https://github.com/jonshaffer/angular-data-table/blob/master/LICENSE"};o.libraries.push(s);s={name:"Angular VS Repeat",version:"1.1.7",url:"https://github.com/kamilkp/angular-vs-repeat",license:"MIT",licenseUrl:"https://github.com/kamilkp/angular-vs-repeat/blob/master/LICENSE"};o.libraries.push(s);s={name:"Accounting.js",version:"0.4.2",url:"http://openexchangerates.github.io/accounting.js/",license:"MIT",licenseUrl:"https://github.com/openexchangerates/accounting.js/blob/master/license"};o.libraries.push(s);s={name:"Bootbox",version:"4.4.0",url:"https://github.com/makeusabrew/bootbox",license:"MIT",licenseUrl:"https://github.com/makeusabrew/bootbox#license"};o.libraries.push(s);s={name:"Angular Bootbox",version:"0.0.4",url:"https://github.com/eriktufvesson/ngBootbox",license:"",licenseUrl:""};o.libraries.push(s);if(angular.isUndefined(r.ngModel)){o.libraries.push(f)}o.libraries=_.sortBy(o.libraries,function(j){return j.name});if(angular.isDefined(r.ngModel)){o.ngModel={libs:o.libraries,canvas:f}}if(angular.isDefined(r.tm1UiClass)){o.$watch("tm1UiClass",function(j,k){o.directiveClasses=_.isEmpty(j)?"":j})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$log",function(j,a,k,h){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiActiveForm";d.Controller="Tm1UiActiveFormCtrl";d.Template="assets/html/tm1-ui-active-form.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:{tm1UiRptConfig:"tm1UiRptConfig",tm1UiRptTemplate:"tm1UiRptTemplate"},replace:false,scope:{tm1Instance:"@",tm1Cube:"@",tm1SuppressZero:"@",tm1UiClass:"@",tm1Debug:"=",ngModel:"="},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.directiveClasses="";f.cubeIsReady=false;f.dimensionsAttribute={};f.message="";f.NO_ACTION=0;f.DIMENSIONS_RECEIVING=1;f.DIMENSIONS_ALL_RECEIVED=2;f.DIMENSIONS_ROWS_RECEIVED_HAS_ATTRIBUTES=2.1;f.DIMENSIONS_ROWS_HAS_NO_ATTRIBUTE=2.9;f.ACTIVE_FORM_WAITING_RESPONSE=3;f.ACTIVE_FORM_RECEIVED_RESPONSE=3.1;f.status=f.NO_ACTION;f.suppressZero=false;f.rowSuppressZero=false;f.columnSuppressZero=false;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(f.tm1Instance)){throw"tm1-instance cannot be empty."}}if(angular.isUndefined(o.tm1Cube)){throw"tm1-cube is a required attribute."}if(angular.isUndefined(o.ngModel)){throw"ng-model is a required attribute."}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}f.hasCompleteParams=function(){var j=true;if(_.isEmpty(f.tm1Cube)||_.isEmpty(f.tm1Cube)){j=false}return j};f.$on(d.Name+".event.refresh",function(j){if(f.hasCompleteParams()){f.log(d.Name+".event.refresh EVENT RECEIVED");m.refreshData()}});f.$on("tm1.event.refresh",function(j){if(f.hasCompleteParams()){f.log("tm1.event.refresh EVENT RECEIVED");m.refreshData()}});f.$watch("tm1Cube",function(k,j){if(!_.isEmpty(k)){m.getCubeDimensions()}});if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(k,j){f.logObj("new tm1UiClass RECEIVED",k);f.directiveClasses=_.isEmpty(k)?"":k})}if(angular.isDefined(o.tm1SuppressZero)){f.$watch("tm1SuppressZero",function(k,j){f.logObj("tm1SuppressZero Value RECEIVED",k);if(!_.isEmpty(k)){f.rowSuppressZero=false;f.columnSuppressZero=false;if(k.toLowerCase()=="both"){f.rowSuppressZero=true;f.columnSuppressZero=true}else{if(k.toLowerCase()=="row"){f.rowSuppressZero=true}else{if(k.toLowerCase()=="column"){f.columnSuppressZero=true}}}if(f.hasCompleteParams()){m.refreshData()}}})}f.$watch("status",function(k,j){f.log("status changed: "+k);switch(k){case f.DIMENSIONS_ALL_RECEIVED:m.validateRowDimensions();break;case f.DIMENSIONS_ROWS_RECEIVED_HAS_ATTRIBUTES:m.refreshData();break;case f.DIMENSIONS_ROWS_HAS_NO_ATTRIBUTE:f.log("One of the row dimensions has no attribute.");break;default:}})},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","$tm1UiHelper","tm1UiSettings","$log",function(k,a,l,m,j){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiAnimateChange";c.directive(d.Name,["$filter","tm1UiSettings","$log","$timeout",function(a,h,b,g){return function(e,f,k){e.$watch(k.tm1UiAnimateChange,function(j,m){if(m&&j!=m){f.addClass("tm1-ui-changed-value");g(function(){f.removeClass("tm1-ui-changed-value")},2000)}})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiChartDbr";d.Template="assets/html/tm1-ui-chart-dbr.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,j,h,k){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Cube:"@",tm1Elements:"@",tm1Label:"@",tm1LabelEmpty:"=",tm1Series:"@",tm1Area:"=",tm1OrderNo:"@",tm1Color:"@",tm1ShowMovement:"=",tm1Debug:"="},require:"^tm1UiChart",bindToController:"Tm1UiChartCtrl",compile:function b(g,f,n){return{pre:function e(m,l,s,r){if(angular.isUndefined(s.tm1OrderNo)){l.attr("tm1-order-no",r.SPECIAL_ORDER_NO)}},post:function o(m,l,u,s,t){m.directiveID=h.newguid();m.message="DIRECTIVE:"+d.Name;m.requestCount=0;m.labelForceEmpty=false;m.labelId=""+_.random(1,100);m.label="D"+m.labelId;m.series="Data";m.isArea=false;m.showMovement=true;m.debug=false;m.log=function(p){m.logObj(p,{message:p})};m.logObj=function(q,p){if(m.debug){k.$broadcast(j.frameworkLogID,{id:m.directiveID,name:d.Name,message:q,object:p})}};if(angular.isDefined(u.tm1Debug)&&m.tm1Debug){m.debug=true}if(angular.isUndefined(u.tm1Instance)){throw"tm1-instance is a REQUIRED attribute of "+d.Template}if(_.isEmpty(m.tm1Instance)){throw"tm1-instance CANNOT BE EMPTY in "+d.Template}if(angular.isUndefined(u.tm1Cube)){throw"tm1-cube is a REQUIRED attribute "+d.Template}if(angular.isUndefined(u.tm1Elements)){throw"tm1-elements is a REQUIRED attribute "+d.Template}if(angular.isDefined(u.tm1Label)){m.label=m.tm1Label}if(angular.isDefined(u.tm1Series)&&!_.isEmpty(m.tm1Series)){m.series=m.tm1Series.trim()}if(angular.isUndefined(u.tm1OrderNo)){if(angular.isUndefined(l.attr("tm1-order-no"))){throw"tm1-order-no is a REQUIRED ATTRIBUTE."}else{m.tm1OrderNo=""+l.attr("tm1-order-no")}}else{if(angular.isDefined(u.tm1OrderNo)&&_.isEmpty(m.tm1OrderNo)){throw"tm1-order-no CANNOT BE EMPTY and MUST BE A NUMBER."}}if(s.SPECIAL_ORDER_NO===m.tm1OrderNo){m.tm1OrderNo=s.getSeriesOrderNo(m.series,m.directiveID)}m.labelId=m.tm1OrderNo;if(angular.isDefined(u.tm1Area)&&m.tm1Area){m.isArea=true}if(angular.isDefined(u.tm1LabelEmpty)&&m.tm1LabelEmpty){m.labelForceEmpty=true}if(angular.isDefined(u.tm1ShowMovement)&&!m.tm1ShowMovement){m.showMovement=false}m.hasCompleteParams=function(){var p=true;if(_.isEmpty(m.tm1Cube)||_.isEmpty(m.tm1Elements)){p=false}else{if(angular.isDefined(u.tm1Label)&&_.isEmpty(m.tm1Label)&&!m.labelForceEmpty){p=false}else{if(angular.isDefined(u.tm1Series)&&_.isEmpty(m.tm1Series)){p=false}else{var q=Papa.parse(m.tm1Elements);if(angular.isDefined(q.data)&&q.data.length==1&&q.data[0].length>0){angular.forEach(q.data[0],function(r){if((p&&_.isEmpty(r))||(!_.isEmpty(r)&&r.trim()=="")){p=false}})}}}}return p};m.refreshData=function(){if(m.requestCount==0){m.requestCount++;var p={id:m.directiveID,dbr:{id:m.directiveID,instance:m.tm1Instance,cube:m.tm1Cube,elements:m.tm1Elements}};k.$broadcast(j.batcherRequestID,p)}};m.$on(j.batcherResponseID,function(r,z){m.requestCount=0;if(!_.isEmpty(z)&&angular.isDefined(z[m.directiveID])&&z[m.directiveID].statusCode==201){var A=angular.isDefined(z[m.directiveID].Value)?z[m.directiveID].Value:0;try{A=parseFloat(A)}catch(y){}m.label=m.labelForceEmpty?"":m.label;var q={chartDbrId:m.directiveID,label:m.label,value:A,id:m.labelId,sortId:parseInt(m.labelId),instance:m.tm1Instance,cube:m.tm1Cube,elements:m.tm1Elements,showMovement:m.showMovement};var p={isArea:m.isArea};if(angular.isDefined(u.tm1Color)&&!_.isEmpty(m.tm1Color)){p.seriesColor=m.tm1Color.trim()}m.logObj("Sending Data [series]",m.series);m.logObj("Sending Data [seriesConfig]",p);m.logObj("Sending Data [chartValue]",q);s.updateDataDbr(m.series,p,q)}});m.$on(d.Name+".event.refresh",function(p){if(m.hasCompleteParams()){m.refreshData()}});m.$on("tm1.event.refresh",function(p){if(m.hasCompleteParams()){m.refreshData()}});m.$on("tm1.event.chart.refresh",function(p){m.log("refresh Received for cube["+m.tm1Cube+"], elements ["+m.tm1Elements+"] - tm1Series: "+m.tm1Series);if(m.hasCompleteParams()){m.refreshData()}});u.$observe("tm1Cube",function(p){if(!_.isEmpty(p)&&m.hasCompleteParams()){m.refreshData()}});u.$observe("tm1Elements",function(p){if(!_.isEmpty(p)&&m.hasCompleteParams()){m.refreshData()}});if(angular.isDefined(u.tm1Label)&&!m.labelForceEmpty){u.$observe("tm1Label",function(p){if(!_.isEmpty(p)){m.label=p;if(m.hasCompleteParams()){m.refreshData()}}})}if(angular.isDefined(u.tm1Series)){u.$observe("tm1Series",function(p){if(!_.isEmpty(p)){if(m.hasCompleteParams()){m.series=p;m.log("New Value Received for cube["+m.tm1Cube+"], elements ["+m.tm1Elements+"] - tm1Series: "+p)}}})}}}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiChartValue";d.Controller="Tm1UiChartValueCtrl";d.Template="assets/html/tm1-ui-chart-value.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,j,h,k){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Value:"@",tm1Label:"@",tm1LabelEmpty:"=",tm1Series:"@",tm1Area:"=",tm1OrderNo:"@",tm1Color:"@",tm1ShowMovement:"=",tm1Debug:"="},require:"^tm1UiChart",bindToController:"Tm1UiChartCtrl",compile:function b(g,f,n){return{pre:function e(m,l,s,r){if(angular.isUndefined(s.tm1OrderNo)){l.attr("tm1-order-no",r.SPECIAL_ORDER_NO)}},post:function o(m,l,u,s,t){m.directiveID=h.newguid();m.message="Value: "+m.tm1Value;m.labelForceEmpty=false;m.labelId=""+_.random(1,100);m.label="D"+m.labelId;m.series="Data";m.isArea=false;m.showMovement=true;m.debug=false;m.log=function(p){m.logObj(p,{message:p})};m.logObj=function(q,p){if(m.debug){k.$broadcast(j.frameworkLogID,{id:m.directiveID,name:d.Name,message:q,object:p})}};if(angular.isDefined(u.tm1Debug)&&m.tm1Debug){m.debug=true}if(angular.isUndefined(u.tm1Value)){throw"tm1-value is a REQUIRED attribute of <tm1-chart-value />"}if(angular.isDefined(u.tm1Label)){m.label=m.tm1Label}if(angular.isDefined(u.tm1Series)&&!_.isEmpty(m.tm1Series)){m.series=m.tm1Series.trim()}if(angular.isUndefined(u.tm1OrderNo)){if(angular.isUndefined(l.attr("tm1-order-no"))){throw"tm1-order-no is a REQUIRED ATTRIBUTE."}else{m.tm1OrderNo=""+l.attr("tm1-order-no")}}else{if(angular.isDefined(u.tm1OrderNo)&&_.isEmpty(m.tm1OrderNo)){throw"tm1-order-no CANNOT BE EMPTY and MUST BE A NUMBER."}}if(s.SPECIAL_ORDER_NO===m.tm1OrderNo){m.tm1OrderNo=s.getSeriesOrderNo(m.series,m.directiveID)}m.labelId=m.tm1OrderNo;if(angular.isDefined(u.tm1Area)&&m.tm1Area){m.isArea=true}if(angular.isDefined(u.tm1LabelEmpty)&&m.tm1LabelEmpty){m.labelForceEmpty=true}if(angular.isUndefined(u.tm1OrderNo)){m.labelId=s.getSeriesOrderNo(m.series,m.directiveID)}if(angular.isDefined(u.tm1ShowMovement)&&!m.tm1ShowMovement){m.showMovement=false}m.refreshData=function(){var w=0;try{w=parseFloat(m.tm1Value)}catch(r){}m.label=m.labelForceEmpty?"":m.label;var q={chartDbrId:m.directiveID,chartValueIsCustom:true,label:m.label,value:w,id:m.labelId,sortId:parseInt(m.labelId),showMovement:m.showMovement};var p={isArea:m.isArea};if(angular.isDefined(u.tm1Color)&&!_.isEmpty(m.tm1Color)){p.seriesColor=m.tm1Color.trim()}s.updateDataDbr(m.series,p,q)};m.$watch("tm1Value",function(p,q){m.refreshData()});m.$on(d.Name+".event.refresh",function(p){m.refreshData()});m.$on("tm1.event.refresh",function(p){m.refreshData()});m.$on("tm1.event.chart.refresh",function(p){m.refreshData()});if(angular.isDefined(u.tm1Series)){u.$observe("tm1Series",function(p){if(!_.isEmpty(p)){m.series=p;m.log("New Value Received - tm1Series: "+p)}})}}}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiChart";d.Controller="Tm1UiChartCtrl";d.Template="assets/html/tm1-ui-chart-template.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$http","$rootScope","$timeout",function(b,l,k,a,m,j){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{tm1ChartType:"@",tm1Height:"@",tm1ShowValues:"=",tm1Margin:"=",tm1DataDecimal:"@",tm1FormatPercentage:"=",tm1MinY:"@",tm1MaxY:"@",tm1AxisLabelX:"@",tm1AxisLabelY:"@",tm1Duration:"@",tm1State:"@",tm1HideControls:"=",tm1HideLabel:"=",tm1Legend:"@",tm1ColorScheme:"=",tm1UiClass:"@",tm1RotateLabel:"@",tm1OptionsOverride:"=",tm1AccountingSettingsOverride:"=",tm1Debug:"=",tm1ShowData:"=",tm1OnChartElementSelect:"&",ngModel:"=?"},link:function(e,q,h,f,g){e.directiveID=k.newguid();e.optionOverrides={};e.dataSourceCount=0;e.dataDecimal=0;e.hasDataDecimal=false;e.formatPercentage=false;e.formatNegativeInParenthesis=false;e.customDirectiveColorScheme=false;e.isDonut=false;e.hasModel=false;e.directiveClasses="";e.displayChart=1;e.discreteBarIsCustomColors=false;e.discreteBarPalette=[];e.discreteBarDefaultColor="SteelBlue";e.minY=0;e.maxY=100;e.rotateLabel=0;e.xAxisLabels={};e.data=[];e.dataCopy=[];e.hasAccountingSettingsOverride=false;e.hasOnChartElementSelect=false;e.debug=false;e.log=function(n){e.logObj(n,{message:n})};e.logObj=function(o,n){if(e.debug){m.$broadcast(l.frameworkLogID,{id:e.directiveID,name:d.Name,message:o,object:n})}};angular.copy(f.CHART_DEFAULT,e.optionOverrides);if(angular.isDefined(h.tm1Debug)&&e.tm1Debug){e.debug=true}f.validateChartType(e.tm1ChartType);if(angular.isDefined(h.ngModel)){e.hasModel=true}if(angular.isDefined(h.tm1Margin)&&angular.isObject(e.tm1Margin)){if(e.tm1Margin.top){e.optionOverrides.margin.top=e.tm1Margin.top}if(e.tm1Margin.right){e.optionOverrides.margin.right=e.tm1Margin.right}if(e.tm1Margin.bottom){e.optionOverrides.margin.bottom=e.tm1Margin.bottom}if(e.tm1Margin.left){e.optionOverrides.margin.left=e.tm1Margin.left}}if(angular.isDefined(h.tm1DataDecimal)&&!_.isEmpty(e.tm1DataDecimal)){e.hasDataDecimal=true;e.dataDecimal=e.tm1DataDecimal}if(angular.isDefined(h.tm1Height)&&!_.isEmpty(e.tm1Height)){e.optionOverrides.height=e.tm1Height}if(h.tm1ShowValues){e.optionOverrides.showValues=e.tm1ShowValues}if(angular.isDefined(h.tm1AxisLabelX)){e.optionOverrides.axisLabelX=e.tm1AxisLabelX}if(angular.isDefined(h.tm1AxisLabelY)){e.optionOverrides.axisLabelY=e.tm1AxisLabelY}if(angular.isDefined(h.tm1MinY)&&!isNaN(e.tm1MinY)){e.minY=parseInt(e.tm1MinY)}if(angular.isDefined(h.tm1MaxY)&&!isNaN(e.tm1MaxY)){e.maxY=parseInt(e.tm1MaxY)}if(e.minY>e.maxY){e.maxY=e.minY+100}if(angular.isDefined(h.tm1Duration)&&!isNaN(e.tm1Duration)){e.optionOverrides.duration=parseInt(e.tm1Duration)}if(angular.isDefined(h.tm1HideControls)&&e.tm1HideControls){e.optionOverrides.showControls=e.tm1HideControls?false:true}if(angular.isDefined(h.tm1HideLabel)&&e.tm1HideLabel){e.optionOverrides.showLabels=e.tm1HideLabel?false:true}if(angular.isDefined(h.tm1Legend)&&!_.isEmpty(e.tm1Legend)){e.optionOverrides.showLegend=true;if(e.tm1Legend.trim().toLowerCase()=="none"){e.optionOverrides.showLegend=false}else{throw'tm1-legends value is not acceptable. Only "none" is supported for now.'}}if(angular.isDefined(h.tm1ColorScheme)){if(!angular.isArray(e.tm1ColorScheme)){throw"tm1-color-scheme must be an ARRAY of CSS colors"}else{if(angular.isArray(e.tm1ColorScheme)&&e.tm1ColorScheme.length<1){throw"tm1-color-scheme must contain at least one color"}else{e.customDirectiveColorScheme=true}}}if(h.tm1RotateLabel){try{e.rotateLabel=parseInt(e.tm1RotateLabel)}catch(p){e.rotateLabel=0}}if(angular.isDefined(h.tm1FormatPercentage)&&e.tm1FormatPercentage){e.formatPercentage=true}if(angular.isDefined(h.tm1UiClass)&&!_.isEmpty(e.tm1UiClass)){e.directiveClasses=e.tm1UiClass}if(angular.isDefined(h.tm1AccountingSettingsOverride)&&_.isObject(e.tm1AccountingSettingsOverride)){e.hasAccountingSettingsOverride=true;e.accountingSettingsOverride=angular.merge({},accounting.settings,e.tm1AccountingSettingsOverride)}if(angular.isDefined(h.tm1OnChartElementSelect)){e.hasOnChartElementSelect=true}e.updateWithOptionsOverride=function(){if(angular.isDefined(h.tm1OptionsOverride)&&angular.isObject(e.tm1OptionsOverride)){if(e.tm1OptionsOverride.chart){_.forEach(e.tm1OptionsOverride.chart,function(s,o){if(angular.isObject(s)){_.forEach(s,function(u,r){if(r=="dispatch"&&angular.isObject(u)){_.forEach(u,function(y,x){if(_.isFunction(y)&&(x=="elementClick"||x=="elementMouseover")){var t=y;e.tm1OptionsOverride.chart[o][r][x]=function(v){j(function(){t(v)})}}})}})}})}e.options=angular.merge(e.options,e.tm1OptionsOverride)}if(e.hasOnChartElementSelect&&f.supportingElementClick[e.tm1ChartType]){if(e.options.chart){var n=e.tm1ChartType;if(e.isDonut){n="pie"}else{if(n=="line"||n=="lineWithFocus"||n=="lineArea"){n="lines"}else{if(n=="multiBarHorizontal"){n="multiBar"}}}n=n.toLowerCase();e.findData=function(s,o){if(s=="lines"){if(o.point&&!o.data){o.data=o.point}}return o};e.options.chart[n]={dispatch:{}};e.options.chart[n].dispatch.elementClick=function(o){e.$apply(function(){e.tm1OnChartElementSelect({chartElement:e.findData(n,o)})})};if(isMobile.any){e.options.chart[n].dispatch.elementClick=undefined;e.options.chart[n].dispatch.elementMouseover=function(o){e.$apply(function(){e.tm1OnChartElementSelect({chartElement:e.findData(n,o)})})}}}}};e.getFormattedValue=function(n){if(angular.isUndefined(e.directiveAccountingSettings)){if(e.hasAccountingSettingsOverride){e.directiveAccountingSettings=e.accountingSettingsOverride}else{e.directiveAccountingSettings=_.cloneDeep(accounting.settings);if(e.hasDataDecimal){e.directiveAccountingSettings.currency.precision=_.toNumber(e.tm1DataDecimal)}if(e.formatPercentage){e.directiveAccountingSettings.currency.format={pos:"%v%",neg:"(%v%)",zero:"-%"}}}}return accounting.formatMoney(n,e.directiveAccountingSettings.currency)};e.options=f.getStandardOptions(e.tm1ChartType);e.options=f.applyOverrides(e.tm1ChartType,e.options,e.optionOverrides);e.updateWithOptionsOverride();angular.copy(f.CONFIG_DEFAULT,e.config);e.$on(l.windowResizeID,function(){e.api.update()});e.$watch("tm1ChartType",function(n,o){if(!_.isEmpty(n)&&f.supportedChartTypes[e.tm1ChartType]){e.options=f.getStandardOptions(n);e.options=f.applyOverrides(n,e.options,e.optionOverrides);e.updateWithOptionsOverride();j(function(){e.api.updateWithOptions(e.options)},1)}else{throw"Unsupported chart type ["+n+"]. Set something else."}});if(angular.isDefined(h.tm1UiClass)){e.$watch("tm1UiClass",function(n,o){e.directiveClasses=_.isEmpty(n)?"":n})}if(angular.isDefined(h.tm1State)){e.$watch("tm1State",function(n,o){if(n!=o){if(e.data&&angular.isArray(e.data)){e.data.length=0}else{e.data=[]}if(e.dataCopy&&angular.isArray(e.dataCopy)){e.dataCopy.length=0}else{e.dataCopy=[]}j(function(){e.$broadcast("tm1.event.chart.refresh")},500)}})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$rootScope","$timeout",function(k,a,l,m,j){var b=this;b.count=0;b.registeredChildDirectives={};b.registeredDataSeries={};b.chartType="";b.SPECIAL_ORDER_NO="999999999999999999";b.CHART_DEFAULT={margin:{top:100,right:100,bottom:100,left:100},height:300,axisLabelX:"X-Axis",axisLabelY:"Y-Axis",showValues:false,duration:500,showControls:true,showLegend:true,showLabels:true};b.CONFIG_DEFAULT={extended:true};b.supportedChartTypes={line:true,lineArea:false,lineWithFocus:true,discreteBar:true,multiBar:true,multiBarHorizontal:true,multi:false,waterfall:true,candlestickBar:false,cumulativeLine:false,pie:true,historicalBar:false,ohlcBar:false,donut:true,scatter:false,stackedArea:false,sunburst:false};b.supportingRotateLabel={line:false,lineArea:false,discreteBar:true,multiBar:true,multiBarHorizontal:false,multi:false,waterfall:false,candlestickBar:false,cumulativeLine:false,pie:false,historicalBar:false,ohlcBar:false,donut:false,scatter:false,stackedArea:false,sunburst:false};b.supportingElementClick={line:true,lineArea:true,lineWithFocus:true,discreteBar:true,multiBar:true,multiBarHorizontal:true,multi:false,waterfall:false,candlestickBar:false,cumulativeLine:false,pie:true,historicalBar:false,ohlcBar:false,donut:true,scatter:false,stackedArea:false,sunburst:false};b.getSupportedChartTypes=function(){var e="";angular.forEach(b.supportedChartTypes,function(f,g){if(f){e=e+","+g}});e=e.substr(1);return e};b.validateChartType=function(e){if(angular.isUndefined(e)){throw"Missing Required Attributes. Please Set tm1-chart-type."}else{if(angular.isUndefined(b.supportedChartTypes[e])){throw"Chart Type ["+e+"] is not supported. Choose from "+b.getSupportedChartTypes()}else{if(!b.supportedChartTypes[e]){throw"Chart Type ["+e+"] is not enabled yet. Choose from "+b.getSupportedChartTypes()}}}};b.getSeriesOrderNo=function(g,f){k.log("Generating OrderNo through System for series: "+g+" and dbrId: "+f);if(angular.isUndefined(b.registeredChildDirectives[g])){b.registeredChildDirectives[g]=[]}var e=_.findIndex(b.registeredChildDirectives[g],function(h){return h==f});if(e==-1){b.registeredChildDirectives[g].push(f)}e=_.findIndex(b.registeredChildDirectives[g],function(h){return h==f});return e+1};b.getDbrDataLabel_LineSeriesOnly=function(g){var f=false,e=g;angular.forEach(k.data,function(h){if(!f){angular.forEach(h.values,function(o){if(!f&&o.sortId==g){e=o.label;f=true}})}});return e};b.getStandardOptions=function(e){b.chartType=e;var f={};k.isDonut=false;if(e=="donut"){k.isDonut=true}if(k.isDonut){e="pie"}switch(e){case"line":f={chart:{type:e+"Chart",height:450,margin:{top:20,right:20,bottom:50,left:55},x:function(g){return g.sortId},y:function(g){return g.value},showValues:k.showValues,valueFormat:function(g){return k.getFormattedValue(g)},transitionDuration:500,xAxis:{axisLabel:"",axisLabelDistance:1,tickFormat:function(g){k.logObj("DataPoint-xAxis",g);return b.getDbrDataLabel_LineSeriesOnly(g)}},yAxis:{axisLabel:"",axisLabelDistance:1,tickFormat:function(g){k.logObj("DataPoint-yAxis",g);return k.getFormattedValue(g)}},forceY:[k.minY,k.maxY]}};break;case"lineWithFocus":f={chart:{type:e+"Chart",height:450,margin:{top:20,right:20,bottom:60,left:40},duration:50,useInteractiveGuideline:true,x:function(g){return g.sortId},y:function(g){return g.value},xAxis:{axisLabel:"X Axis",tickFormat:function(g){return b.getDbrDataLabel_LineSeriesOnly(g)}},x2Axis:{tickFormat:function(g){return b.getDbrDataLabel_LineSeriesOnly(g)}},yAxis:{axisLabel:"Y Axis",tickFormat:function(g){return k.getFormattedValue(g)},rotateYLabel:false},y2Axis:{tickFormat:function(g){return k.getFormattedValue(g)}},forceY:[k.minY,k.maxY]}};break;case"discreteBar":f={chart:{type:e+"Chart",height:450,margin:{top:20,right:20,bottom:50,left:55},x:function(g){return g.label},y:function(g){return g.value},showValues:true,valueFormat:function(g){return k.getFormattedValue(g)},duration:500,xAxis:{axisLabel:"X Axis"},yAxis:{axisLabel:"Y Axis",axisLabelDistance:-10,tickFormat:function(g){return k.getFormattedValue(g)}}}};break;case"multiBar":f={chart:{type:e+"Chart",height:450,margin:{top:20,right:20,bottom:45,left:45},clipEdge:true,staggerLabels:true,duration:500,stacked:false,showControls:true,showLegend:true,x:function(g){return g.label},y:function(g){return g.value},xAxis:{axisLabel:"Time (ms)",showMaxMin:false,tickFormat:function(g){return g}},yAxis:{axisLabel:"Y Axis",axisLabelDistance:-10,tickFormat:function(g){return k.getFormattedValue(g)}},valueFormat:function(g){return k.getFormattedValue(g)}}};break;case"multiBarHorizontal":f={chart:{type:e+"Chart",height:450,margin:{top:20,right:20,bottom:45,left:45},clipEdge:true,staggerLabels:true,duration:500,stacked:false,showControls:true,showLegend:true,x:function(g){return g.label},y:function(g){return g.value},xAxis:{axisLabel:"Time (ms)",showMaxMin:false,tickFormat:function(g){return g}},yAxis:{axisLabel:"Y Axis",axisLabelDistance:-10,tickFormat:function(g){return k.getFormattedValue(g)}},valueFormat:function(g){return k.getFormattedValue(g)}}};break;case"pie":f={chart:{type:e+"Chart",height:500,donut:k.isDonut,x:function(g){return g.label},y:function(g){return g.value},showLabels:true,duration:500,labelThreshold:0.01,labelSunbeamLayout:true,showLegend:true,valueFormat:function(g){return k.getFormattedValue(g)},legend:{margin:{top:5,right:35,bottom:5,left:0},dispatch:{},width:400,height:20,padding:32,align:true,maxKeyLength:20,rightAlign:true,updateState:true,radioButtonMode:false,expanded:false,vers:"classic"}}};break;case"waterfall":f={chart:{type:"candlestickBarChart",height:450,margin:{top:20,right:20,bottom:50,left:55},x:function(g){return g.sortId},y:function(g){return g.close},duration:100,xAxis:{axisLabel:"Dates",tickFormat:function(g){return b.getDbrDataLabel_LineSeriesOnly(g)},showMaxMin:false},yAxis:{axisLabel:"Stock Price",tickFormat:function(g){return k.getFormattedValue(g)},showMaxMin:false},zoom:{enabled:false,scaleExtent:[1,10],useFixedDomain:false,useNiceScale:false,horizontalOff:false,verticalOff:true,unzoomEventType:"dblclick.zoom"},forceY:[k.minY,k.maxY],interactiveLayer:{tooltip:{contentGenerator:function(y,h,t,u,v){k.logObj("on tooltip generation",y);var g=y.series[0].data.close-y.series[0].data.open;var x=k.getFormattedValue(Math.abs(g));var w="";w+="<div>";w+="<h3 ";w+=g>0?' style="color: Green" ':"";w+=g<0?' style="color: Red" ':"";w+='class="text-center"';w+=">";w+=x+" ";w+=g>0?'<i class="fa fa-caret-up"></i>':"";w+=g<0?'<i class="fa fa-caret-down"></i>':"";w+=g==0?'<i class="fa fa-minus"></i>':"";w+="</h3> ";if(y.series[0].data.showMovement){w+="<p>Open: <strong>"+k.getFormattedValue(y.series[0].data.open)+"</strong></p>";w+="<p>Close: <strong>"+k.getFormattedValue(y.series[0].data.close)+"</strong></p>"}w+="</div>";return w}}}}};break}return f};b.applyOverrides=function(f,g,e){if(angular.isDefined(g.chart.margin)){g.chart.margin=e.margin}if(angular.isDefined(g.chart.height)){g.chart.height=parseInt(e.height)}if(angular.isDefined(g.chart.showValues)){g.chart.showValues=e.showValues}if(angular.isDefined(g.chart.xAxis)&&angular.isDefined(g.chart.xAxis.axisLabel)){g.chart.xAxis.axisLabel=e.axisLabelX}if(angular.isDefined(g.chart.yAxis)&&angular.isDefined(g.chart.yAxis.axisLabel)){g.chart.yAxis.axisLabel=e.axisLabelY}if(angular.isDefined(g.chart.duration)){g.chart.duration=e.duration}if(angular.isDefined(g.chart.showControls)){g.chart.showControls=e.showControls}if(angular.isDefined(g.chart.showLegend)){g.chart.showLegend=e.showLegend}if(angular.isDefined(g.chart.showLabels)){g.chart.showLabels=e.showLabels}return g};b.updateDataDbr=function(E,g,z){var e=0;var F=0;if(k.tm1ChartType=="pie"||k.tm1ChartType=="donut"){var C=_.findIndex(k.dataCopy,function(n){return n.chartDbrId==z.chartDbrId});if(C!=-1){angular.extend(k.dataCopy[C],z)}else{k.dataCopy.push(z)}}else{var D=false;angular.forEach(k.dataCopy,function(n){if(!D&&n.key==E){D=true}});if(!D){k.dataCopy.push({key:E,values:[]})}e=_.findIndex(k.dataCopy,function(n){return n.key==E});F=_.findIndex(k.dataCopy[e].values,function(n){return n.chartDbrId==z.chartDbrId});z.series=e;if(F!=-1){angular.extend(k.dataCopy[e].values[F],z)}else{k.dataCopy[e].values.push(z)}var G=0;angular.forEach(k.dataCopy,function(n){k.dataCopy[G].values=_.sortBy(k.dataCopy[G].values,function(o){return o.sortId});G++});if(k.tm1ChartType=="waterfall"){var G=F==-1?k.dataCopy[e].values.length-1:F;k.dataCopy[e].values[G].date=15854+G;if(G==0||!z.showMovement){k.dataCopy[e].values[G].open=0;k.dataCopy[e].values[G].high=0;k.dataCopy[e].values[G].close=z.value;k.dataCopy[e].values[G].low=z.value}else{k.dataCopy[e].values[G].open=k.dataCopy[e].values[G-1].close;k.dataCopy[e].values[G].high=k.dataCopy[e].values[G-1].low;k.dataCopy[e].values[G].close=z.value;k.dataCopy[e].values[G].low=z.value}G=0;_.forEach(k.dataCopy[e].values,function(n){if(G==0||!n.showMovement){n.open=0;n.high=0;n.close=n.value;n.low=n.value}else{n.open=k.dataCopy[e].values[G-1].close;n.high=k.dataCopy[e].values[G-1].low;n.close=n.value;n.low=n.value}G++})}if(k.tm1ChartType=="line"){e=_.findIndex(k.dataCopy,function(n){return n.key==E});if(g.isArea){k.dataCopy[e].area=true}if(angular.isDefined(g.seriesColor)){k.dataCopy[e].color=g.seriesColor}}k.logObj("Latest Chart Data",k.dataCopy)}if(k.customDirectiveColorScheme){var f=k.api.getScope().chart;var h=k.tm1ColorScheme;d3.scale.colorThemes=function(){return d3.scale.ordinal().range(h)};f.color(d3.scale.colorThemes().range())}else{if(angular.isDefined(m.instanceSettings[z.instance]&&angular.isDefined(m.instanceSettings[z.instance].chartColorScheme))){if(angular.isArray(m.instanceSettings[z.instance].chartColorScheme)){var f=k.api.getScope().chart;var h=m.instanceSettings[z.instance].chartColorScheme;d3.scale.colorThemes=function(){return d3.scale.ordinal().range(h)};f.color(d3.scale.colorThemes().range())}}}if(k.tm1ChartType=="discreteBar"){if(angular.isDefined(g.seriesColor)){k.discreteBarIsCustomColors=true}var A={chartDbrId:z.chartDbrId,color:k.discreteBarDefaultColor,sortId:z.sortId,isCustom:false};if(angular.isDefined(g.seriesColor)){A.color=g.seriesColor;A.isCustom=true}if(F!=-1){angular.extend(k.discreteBarPalette[F],A)}else{k.discreteBarPalette.push(A)}k.discreteBarPalette=_.sortBy(k.discreteBarPalette,function(n){return n.sortId});var y=k.dataCopy[e].values.length;var h=[];for(var I=0;I<y;I++){h.push(k.discreteBarPalette[I].color)}if(k.customDirectiveColorScheme){for(var I=0;I<y;I++){if(!k.discreteBarPalette[I].isCustom){if(I<k.tm1ColorScheme.length){k.discreteBarPalette[I].color=k.tm1ColorScheme[I]}else{var G=(k.tm1ColorScheme.length%(I+1))-1;k.discreteBarPalette[I].color=k.tm1ColorScheme[G]}}}}h.length=0;for(var I=0;I<y;I++){h.push(k.discreteBarPalette[I].color)}if(k.discreteBarIsCustomColors){d3.scale.colorThemes=function(){return d3.scale.ordinal().range(h)};k.api.getScope().chart.color(d3.scale.colorThemes().range())}}if(b.supportingRotateLabel[k.tm1ChartType]){k.api.getScope().chart.rotateLabels(k.rotateLabel)}k.data=_.cloneDeep(k.dataCopy);j(function(){k.api.getScope().chart.update()},1);if(k.hasModel){var B=[];var H={};angular.copy(k.dataCopy,B);angular.copy(k.options,H);k.ngModel={data:B,options:H}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiConfiguratorChore";d.Controller="Tm1UiConfiguratorChoreCtrl";d.Template="assets/html/tm1-ui-configurator-chore.html";c.directive(d.Name,["$http","tm1UiSettings","$tm1Ui","$rootScope","$timeout","$ngBootbox",function(a,l,k,m,j,b){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Instances:"=",tm1Chore:"@",tm1Debug:"=?",tm1UiClass:"@",tm1OnApply:"&",tm1EnableExecute:"=?",tm1EnableUpdate:"=?",tm1UpdateButtonText:"@",tm1UpdateButtonClass:"@",ngModel:"="},link:function(e,o,h,f,g){e.directiveID=k.helperGenerateUUID();e.directiveClasses="";e.instanceChanges=0;e.executeStatus=0;e.EXECUTE_DEFAULT="Execute";e.executeText=e.EXECUTE_DEFAULT;e.chore={};e.chore.instance=e.tm1Instance;e.chore.name="";e.chore.chore={};e.instances=[];e.chores=[];e.debug=false;e.log=function(q,n){if(e.debug){m.$broadcast(l.frameworkLogID,{id:e.directiveID,name:d.Name,message:q,object:n})}};if(angular.isDefined(h.tm1Debug)&&e.tm1Debug){e.debug=true}if(angular.isDefined(h.tm1Chore)){e.chore.name=e.tm1Chore.trim()}if(angular.isUndefined(h.ngModel)){throw"ng-model is a REQUIRED FIELD."}if(angular.isDefined(h.tm1UiClass)&&!_.isEmpty(e.tm1UiClass)){e.directiveClasses=e.tm1UiClass}e.updateChoreList=function(n){e.chore.instance=n;if(!_.isEmpty(e.chore.instance)){k.chores(n).then(function(q){e.chores.length=0;_.forEach(q,function(p){if(p.Name){e.chores.push(p.Name)}});e.updateSelectDirective()})}};e.updateChoreProcessList=function(q,n){k.chore(q,n).then(function(p){e.chore.chore=p})};e.updateRunStatus=function(q,n){e.executeStatus=q;if(q==0){e.executeText=e.EXECUTE_DEFAULT}else{if(q==3||q==5){e.executeText=n;j(function(){e.executeText=e.EXECUTE_DEFAULT;e.executeStatus=0},3*1000)}else{e.executeText=n}}};e.$on("tm1.event.refresh",function(n){if(e.chore&&e.chore.instance){e.updateChoreList(e.chore.instance);if(!_.isEmpty(e.chore.name)){e.updateChoreProcessList(e.chore.instance,e.chore.name)}}});e.onItemSelect=function(){j(function(){if(!_.isEmpty(e.chore.name)){e.updateChoreProcessList(e.chore.instance,e.chore.name)}},1)};e.onApply=function(){if(e.ngModel){e.ngModel.name=e.chore.name;e.ngModel.instance=e.chore.instance;e.ngModel.chore=e.chore.chore}else{e.ngModel=e.chore}if(angular.isDefined(h.tm1OnApply)){j(function(){e.tm1OnApply()})}};e.onUpdate=function(){k.choreUpdateTasks(e.chore.instance,e.chore.name,e.chore.chore).then(function(n){if(n.success){b.alert("Updated Successfully!").then(function(){})}else{b.alert("There was an issue updating this chore.").then(function(){})}})};e.executeChore=function(){b.confirm("This will execute chore <strong>"+e.chore.name+"</strong>. Proceed?").then(function(){e.updateRunStatus(2,"...");k.choreExecute(e.chore.instance,e.chore.name,e.chore.chore).then(function(n){if(n.success){e.updateRunStatus(3,"Success")}else{e.updateRunStatus(5,"Error")}})},function(){})};e.updateSelectDirective=function(){if(e.selectScope){e.selectScope.$destroy()}e.selectScope=e.$new();e.selectConfig={};e.selectConfig.tm1List=e.chores;e.selectConfig.value=e.chore.name;e.selectConfig.tm1IncludeEmpty=true;e.showSelect=true;e.$broadcast("tm1UiSelect.items.ready",e.chores)};e.$on("tm1UiSelect.item.selected",function(q,n){e.chore.name=n;e.onItemSelect()});h.$observe("tm1Instance",function(n){e.instanceChanges++;e.chore.instance=n;if(e.instanceChanges>1){e.chore.name="";e.chore.chore={}}e.updateChoreList(n)});if(angular.isDefined(h.tm1UiClass)){h.$observe("tm1UiClass",function(n){e.directiveClasses=_.isEmpty(n)?"":n})}e.updateRunStatus(0);if(angular.isDefined(h.tm1Instance)&&!_.isEmpty(e.tm1Instance)){e.updateChoreList(e.tm1Instance);if(!_.isEmpty(e.chore.name)){e.updateChoreProcessList(e.tm1Instance,e.chore.name)}}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiCron";d.Template="assets/html/tm1-ui-cron.html";c.directive(d.Name,["$tm1Ui","$http",function(b,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1UiClass:"@",tm1ApplyClipboardModalFix:"=",ngModel:"=",tm1CronDescriptionModel:"=",tm1CronSelectionModel:"=",tm1OnCronApply:"&"},link:function(p,n,s,q,r){p.directiveID=b.helperGenerateUUID();p.directiveClasses="";p.generatedCron="";p.generatedCronMessage="";p.cron={};p.CRON_DAILY="daily";p.CRON_WEEKLY="weekly";p.CRON_MONTHLY="monthly";p.CRON_CUSTOM="custom";p.CRON_MONTHLY_SPECIFIC="specific day";p.CRON_MONTHLY_LASTDAY="last day";p.CRON_MONTHLY_LASTWEEKDAY="last week day";p.CRON_MONTHLY_SPECIFICWEEKDAY="specific week day";p.CRON_MONTHLY_SPECIFICWORKINGDAY="specific working day of the month";p.CRON_DAILY_SPECIFIC="specific time";p.CRON_DAILY_STARTTIME="starting time";p.CRON_DAILY_EVERYHOUR="every hour";p.cron.type=p.CRON_DAILY;p.cron.hour="09";p.cron.minute="00";p.cron.ampm="am";p.cron.weekdays=[];p.cron.parts=["0","0","9","*","*","?","*"];p.cron.weekmonthorder=[];p.cron.weekmonthorder.push({key:"1",desc:"1st"});p.cron.weekmonthorder.push({key:"2",desc:"2nd"});p.cron.weekmonthorder.push({key:"3",desc:"3rd"});p.cron.weekmonthorder.push({key:"4",desc:"4th"});p.cron.weekmonthorder.push({key:"5",desc:"5th"});p.cron.weeknames=[];p.cron.weeknames.push({key:"2",desc:"Monday",selected:false});p.cron.weeknames.push({key:"3",desc:"Tuesday",selected:false});p.cron.weeknames.push({key:"4",desc:"Wednesday",selected:false});p.cron.weeknames.push({key:"5",desc:"Thursday",selected:false});p.cron.weeknames.push({key:"6",desc:"Friday",selected:false});p.cron.weeknames.push({key:"7",desc:"Saturday",selected:false});p.cron.weeknames.push({key:"1",desc:"Sunday",selected:false});p.cron.hours=[];for(var o=1;o<=12;o++){p.cron.hours.push(o<10?"0"+o:""+o)}p.cron.absoluteHours=[];for(var o=0;o<=23;o++){p.cron.absoluteHours.push(o<10?"0"+o:""+o)}p.minutes=[];for(var o=0;o<=59;o++){p.minutes.push(o<10?"0"+o:""+o)}p.cron.days=[];for(var o=1;o<=31;o++){p.cron.days.push({key:o,selected:false})}p.dayNo=[];var m=null;for(var o=1;o<=20;o++){m=o===1?"1st":m;m=o===2?"2nd":m;m=o===3?"3rd":m;m=o>3?o+"th":m;p.dayNo.push({key:o,display:m})}p.cron.monthlyOption=p.CRON_MONTHLY_SPECIFIC;p.cron.monthlyOptionsUpdated=false;p.cron.dailyOption=p.CRON_DAILY_SPECIFIC;p.cron.dailyOptionIncrement="5";p.cron.nextRuns=[];p.cron.nextRunFlagError=false;p.cron.nextRunErrorMessage="";p.cron.monthlyOccurence="1";p.cron.monthlyWeekday="2";if(p.tm1ApplyClipboardModalFix){if($.fn.modal.Constructor.prototype.enforceFocus!=undefined){$.fn.modal.Constructor.prototype.enforceFocus=function(){}}if($.fn.modal.Constructor.prototype._enforceFocus!=undefined){$.fn.modal.Constructor.prototype._enforceFocus=function(){}}}if(angular.isDefined(s.tm1UiClass)&&!_.isEmpty(p.tm1UiClass)){p.directiveClasses=p.tm1UiClass}p.updateCronMessage=function(){p.generatedCronMessage="";var k="",G="Everyday";for(var f=0;f<p.cron.parts.length;f++){if(f==2){var h=0;var C=undefined;if(angular.isString(p.cron.parts[2])&&p.cron.parts[2].indexOf("-")!=-1){h=parseInt(p.cron.parts[2].split("-")[0]);C=parseInt(p.cron.parts[2].split("-")[1])}else{h=parseInt(p.cron.parts[2])}var A="am";if(h>12){A="pm";h-=12}else{if(h==0){h=12}}var j=undefined,l=undefined;if(angular.isString(p.cron.parts[1])&&p.cron.parts[1].indexOf("/")!=-1){var F=p.cron.parts[1].split("/");j=F[0];l=F[1]}j=parseInt(p.cron.parts[1]);j=j<10?"0"+j:j;k="At "+h+":"+j+A;if(l){k+=" and every "+l+" minute(s) thereafter for an hour."}else{if(C){k+=" and every hour thereafter until "+p.cron.dailyOptionIntervalHourDesciption+"."}}}if(f==3&&p.cron.monthlyOptionsUpdated){if(p.cron.monthlyOption==p.CRON_MONTHLY_LASTWEEKDAY){G="Every Last Weekday of the Month"}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_LASTDAY){G="Every Last Day of the Month"}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFIC){var B=[];_.forEach(p.cron.days,function(t){if(t.selected){B.push(t.key)}});if(B.length>0){G="Every Day ";_.forEach(B,function(t){G+=t+", "});G=G.substring(0,G.length-2);G+=" of the Month"}else{G="Everyday"}}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFICWEEKDAY){var E=_.find(p.cron.weekmonthorder,function(t){return t.key==p.cron.monthlyOccurence});var e=_.find(p.cron.weeknames,function(t){return t.key==p.cron.monthlyWeekday});G="Every "+E.desc+" "+e.desc+" of the Month"}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFICWORKINGDAY){var g=_.find(p.dayNo,function(t){return t.key==p.cron.monthlyWorkingDay});G="Every Nth working day of the Month";if(g){G="Every "+g.display+" working day of the Month"}}else{G="Unknown day format"}}}}}}else{if(f==5&&!p.cron.monthlyOptionsUpdated){if(p.cron.parts[5]!="*"&&p.cron.parts[5]!="?"){var D=p.cron.parts[5].split(",");if(D.length>0){G="Every ";_.forEach(D,function(t){G+=t=="1"?"Sunday, ":"";G+=t=="2"?"Monday, ":"";G+=t=="3"?"Tuesday, ":"";G+=t=="4"?"Wednesday, ":"";G+=t=="5"?"Thursday, ":"";G+=t=="6"?"Friday, ":"";G+=t=="7"?"Saturday, ":""});G=G.substring(0,G.length-2)}}}}}p.generatedCronMessage=G+" "+k};p.applyCron=function(){p.ngModel.cron=p.generatedCron;p.ngModel.customCron=p.generatedCron;p.ngModel.properCron=p.generatedCron;p.ngModel.customCronTargetWeekdayCount=0;if(p.ngModel.properCron.indexOf("[[")!=-1){p.ngModel.properCron=p.generatedCron.split("[[")[0]+p.generatedCron.split("]]")[1];p.temp=p.generatedCron.split("[[W")[1];p.ngModel.customCronTargetWorkdayCount=parseInt(p.temp.substring(0,p.temp.indexOf("]]")))}if(s.tm1CronDescriptionModel){p.tm1CronDescriptionModel=p.generatedCronMessage}if(s.tm1CronSelectionModel){p.tm1CronSelectionModel=angular.toJson(p.cron)}if(angular.isDefined(s.tm1OnCronApply)){p.tm1OnCronApply()}};p.clearWeekdaysSelection=function(){_.forEach(p.cron.weeknames,function(e){if(e.selected){e.selected=false}})};p.recalculateCron=function(){p.cron.monthlyOptionsUpdated=false;var w=false;var h="";if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFIC){_.forEach(p.cron.days,function(t){if(t.selected){h+=","+t.key;w=true}});h=h.substr(1);if(w){p.clearWeekdaysSelection();p.cron.monthlyOptionsUpdated=true;p.cron.parts[3]=h;p.cron.parts[5]="?"}}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_LASTDAY){w=true;p.cron.parts[3]="L";p.cron.parts[5]="?";p.cron.monthlyOptionsUpdated=true}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_LASTWEEKDAY){w=true;p.cron.parts[3]="LW";p.cron.parts[5]="?";p.cron.monthlyOptionsUpdated=true}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFICWEEKDAY){w=true;p.clearWeekdaysSelection();p.cron.parts[3]="?";var x=_.findIndex(p.cron.weeknames,function(t){return t.key==p.cron.monthlyWeekday});var k=_.findIndex(p.cron.weekmonthorder,function(t){return t.key==p.cron.monthlyOccurence});p.cron.parts[5]=p.cron.weeknames[x].key+"#"+p.cron.weekmonthorder[k].key;p.cron.monthlyOptionsUpdated=true}else{if(p.cron.monthlyOption==p.CRON_MONTHLY_SPECIFICWORKINGDAY){w=true;p.cron.parts[3]="1[[W"+(p.cron.monthlyWorkingDay?p.cron.monthlyWorkingDay:"")+"]]";p.cron.parts[5]="?";p.cron.monthlyOptionsUpdated=true}}}}}var j=false;var f="";_.forEach(p.cron.weeknames,function(t){if(t.selected){f+=","+t.key;j=true}});f=f.substr(1);if(j){p.cron.parts[5]=f;p.cron.parts[3]="?"}if(!w&&!j){p.cron.parts[3]="*";p.cron.parts[5]="?"}var e=parseInt(p.cron.hour);var g=parseInt(p.cron.minute);if(p.cron.ampm=="pm"){e+=12}if(e==12||e==24){e=p.cron.ampm=="am"?0:12}p.cron.parts[1]=g;p.cron.parts[2]=e;if(p.cron.dailyOption==p.CRON_DAILY_STARTTIME&&!_.isEmpty(p.cron.dailyOptionIncrement)){p.cron.parts[1]+="/"+p.cron.dailyOptionIncrement;p.cron.dailyOptionEndTime=(e)+":59"+p.cron.ampm}else{if(p.cron.dailyOption==p.CRON_DAILY_EVERYHOUR){if(angular.isUndefined(p.cron.dailyOptionIntervalHour)){p.cron.dailyOptionIntervalHour="23"}if(angular.isUndefined(p.cron.absoluteHours)){p.cron.absoluteHours=[]}p.cron.dailyOptionIntervalHourDesciption=moment("2000-01-01 "+p.cron.dailyOptionIntervalHour+":"+p.cron.minute).format("hh:mm a");var l=parseInt(p.cron.dailyOptionIntervalHour);p.cron.parts[2]=p.cron.parts[2]+"-"+l;p.cron.absoluteHours.length=0;if(e<23){for(var y=e+1;y<=23;y++){p.cron.absoluteHours.push(y<10?"0"+y:""+y)}}else{p.cron.absoluteHours.push("23")}if(_.isEmpty(p.cron.dailyOptionIntervalHour)){p.cron.dailyOptionIntervalHour="23"}}}p.cron.nextRuns.length=0;p.cron.nextRunFlagError=false;p.updateCron();p.updateCronMessage()};p.updateCron=function(){p.generatedCron="";_.forEach(p.cron.parts,function(e){p.generatedCron+=" "+e});p.generatedCron=p.generatedCron.substr(1)};p.checkCron=function(){p.cron.nextRunFlagError=false;var e={cron:p.generatedCron,count:5};a.post("api/admin/scheduler/next",e).then(function(f,g){if(b.helperIsSuccessful(f)){p.cron.nextRuns=f.data}else{p.cron.nextRunFlagError=true;if(f.status==400){p.cron.nextRunErrorMessage=f.data.message?f.data.message:"Unsupported CRON Format"}else{p.cron.nextRunErrorMessage="Unknown Error. Check Logs."}}})};if(angular.isDefined(s.tm1UiClass)){p.$watch("tm1UiClass",function(f,e){p.directiveClasses=_.isEmpty(f)?"":f})}if(angular.isDefined(s.tm1CronSelectionModel)&&!_.isEmpty(p.tm1CronSelectionModel)){p.cron=angular.fromJson(p.tm1CronSelectionModel)}p.recalculateCron()}}}])})();(function(){var c=angular.module("tm1Ui");c.filter("tm1DimensionsFilter",function(){return function(k,h,a){if(!_.isNil(h)&&!_.isEmpty(k)){var b=[];var j=_.toLower(h);_.forEach(k,function(f){if(f.Hierarchies&&f.Hierarchies.length>0){for(var e=0;e<f.Hierarchies.length;e++){if(_.toLower(f.Hierarchies[e].Name).indexOf(j)!=-1){b.push(f);break}}}});return b}else{if(a){var b=[];var j=_.toLower(h);_.forEach(k,function(e){if(e.Hierarchies&&e.Hierarchies.length>0){b.push(e)}});return b}else{return k}}}});c.filter("tm1HierarchiesFilter",function(){return function(h,b){if(!_.isNil(b)&&!_.isEmpty(h)){var a=[];var g=_.toLower(b);_.forEach(h,function(e){if(_.toLower(e.Name).indexOf(g)!=-1){a.push(e)}});return a}else{return h}}});var d={};d.Name="tm1UiCubeViewer";d.Template="assets/html/tm1-ui-cube-viewer.html";c.directive(d.Name,["$filter","tm1UiSettings","$tm1Ui","$rootScope","$templateCache","$compile","$ngBootbox","$log","$window","$timeout",function(o,p,b,n,s,q,r,a,u,t){return{restrict:"E",templateUrl:d.Template,replace:true,scope:{name:"@",id:"@",tm1Instance:"@",tm1Cube:"@",tm1View:"@",tm1Mdx:"@",tm1Api:"=?",tm1Options:"=?",tm1Debug:"=?",tm1UiClass:"@"},link:function(f,e,h,g){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.viewConfiguration={};f.viewConfiguration.columns=[];f.viewConfiguration.rows=[];f.viewConfiguration.titles=[];f.viewConfiguration.lastDraggedHierarchy="";f.viewConfigurationCopy={};f.constants={};f.constants.AXIS_COLUMN={axis:"column",display:"Column"};f.constants.AXIS_ROW={axis:"row",display:"Row"};f.constants.AXIS_TITLE={axis:"title",display:"Title"};f.constants.AXIS_UNKNOWN={axis:"unknown",display:"Not Found"};f.constants.AXIS_NONE="none";f.directiveConfigurations={};f.directiveConfigurations.dimensionAxes=[];f.directiveConfigurations.dimensionAxes.push(f.constants.AXIS_COLUMN);f.directiveConfigurations.dimensionAxes.push(f.constants.AXIS_ROW);f.directiveConfigurations.dimensionAxes.push(f.constants.AXIS_TITLE);f.directiveConfigurations.viewIsModified=false;f.directiveConfigurations.ignoreViewChangesThisTime=false;f.directiveConfigurations.dimensionsAndHierarchies=[];f.constants.TABLE_MODE_NO_PREFERENCE=0;f.constants.TABLE_MODE_ANALYSIS=1;f.constants.TABLE_MODE_EDIT=2;f.directiveConfigurations.tableMode=f.constants.TABLE_MODE_EDIT;f.directiveConfigurations.forcedTableMode=0;f.selectedAxisFrom=f.constants.AXIS_COLUMN;f.selectedAxisTo=f.constants.AXIS_COLUMN;f.constants.VIEW_TYPE_NATIVE="native";f.constants.VIEW_TYPE_CANVAS="canvas";f.constants.VIEW_TYPE_MDX="mdx";f.constants.VIEW_TYPE_UNKNOWN="unknown";f.constants.NEW_CANVAS_VIEW={Name:"",viewType:f.constants.VIEW_TYPE_CANVAS};f.selectedView=f.constants.NEW_CANVAS_VIEW;f.viewConfiguration.view=f.constants.NEW_CANVAS_VIEW.Name;f.viewConfiguration.viewType=f.constants.NEW_CANVAS_VIEW.viewType;f.constants.DRILL_COLLAPSE="DRILLUPMEMBER";f.constants.DRILL_EXPAND="DRILLDOWNMEMBER";f.constants.ERROR_MISSING_ROW_COLUMN_ON_VIEW="Row and Column must have at least one Hierarchy.";f.constants.SANDBOX_BASE={Name:"[Base]"};f.selectedSandbox=f.constants.SANDBOX_BASE;f.directiveConfigurations.sandboxNameToSet="";f.directiveConfigurations.autoRecalculate=false;f.directiveConfigurations.allowViewSave=true;f.directiveConfigurations.allowSandboxOperation=true;f.directiveConfigurations.allowSandboxPublishChanges=true;f.directiveConfigurations.allowSandboxCreateDelete=true;f.directiveConfigurations.hideHierarchies=false;f.directiveConfigurations.hideTitle=true;f.directiveConfigurations.hideToolbar=false;f.directiveConfigurations.hideMdx=false;f.directiveConfigurations.viewTypePriority="canvas";f.directiveConfigurations.expandHierarchyList=true;f.directiveConfigurations.tableClass="";f.directiveConfigurations.pageSize=0;f.directiveConfigurations.pageSet=1;f.directiveConfigurations.showBuiltInPagination=true;f.directiveConfigurations.isFirstLoad=true;f.directiveConfigurations.showTable=true;f.directiveConfigurations.isMDXViewSaveable=false;f.directiveConfigurations.disableTableAnimation=false;f.directiveConfigurations.tableAnimationText="Please Wait...";f.tableDrivers={column:[],row:[],title:[]};f.isPending=false;f.blockAddToHierarchy=true;f.blockMoveAxisOfHierarchy=true;f.directiveConfigurations.mdxMode=false;f.selections={showHierarchies:false};f.dragEvent={};f.debug=false;f.log=function(k,j){if(f.debug){b.log(f.directiveID,d.Name,k,j)}};if(angular.isDefined(h.tm1Debug)&&f.tm1Debug){f.debug=true}f.log("DebugEnabled");if(angular.isUndefined(h.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(f.tm1Instance)){throw"tm1-instance cannot be empty."}}f.viewConfiguration.instance=f.tm1Instance;if(angular.isUndefined(h.tm1Cube)){throw"tm1-cube is a required attribute."}else{if(_.isEmpty(f.tm1Cube)){throw"tm1-cube cannot be empty."}}f.viewConfiguration.cube=f.tm1Cube;f.viewConfigurationCopy=_.cloneDeep(f.viewConfiguration);if(angular.isDefined(h.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isDefined(h.tm1Api)){f.log("Directive API requested");f.tm1Api={refreshData:function(){f.log("Refreshed through api call!");f.refreshData({forceRecalculate:true})},getTableData:function(){f.log("Retrieving table data");return f.dataset},isBuiltinPaginationVisible:function(){return f.directiveConfigurations.showBuiltInPagination},toggleBuiltinPagination:function(){f.log("Toggle the built-in pagination");f.directiveConfigurations.showBuiltInPagination=!f.directiveConfigurations.showBuiltInPagination}}}f.sameDimensionality=function(k,l){var j=true;if(k.length!=l.length){j=false}else{for(var m=0;m<k.length;m++){if(!_.eq(k[m].hierarchy,l[m].hierarchy)){j=false;break}}}return j};f.getSubsetElementCount=function(j){var k=0;if(j&&j.subsets){_.forEach(j.subsets,function(l){if(l.Name==j.subset){k=l["Elements@odata.count"]}})}return k};f.updateSelectedHierarchyElementsAndSubsetList=function(j){if(!_.isNil(j.title)&&j.title.length>0){f.log("UpdateElementAndSubsetListOnTitle");_.forEach(j.title,function(k){f.updateHierarchyTitleElements(k)})}if(!_.isNil(j.row)&&j.row.length>0){f.log("UpdateElementAndSubsetListOnRow");_.forEach(j.row,function(k){f.updateHierarchySubsetList(k)})}if(!_.isNil(j.column)&&j.column.length>0){f.log("UpdateElementAndSubsetListOnColumn");_.forEach(j.column,function(k){f.updateHierarchySubsetList(k)})}};f.updateDirectiveState=function(k,F){f.log("UpdateStateUpdateOptions",F);var l={alias:{}};function j(w,v){if(angular.isDefined(f.viewConfiguration[v])&&f.viewConfiguration[v].length>0){_.forEach(f.viewConfiguration[v],function(x){if(x.alias&&!_.isEmpty(x.alias)){w.alias[x.dimension]=x.alias}})}}j(l,"columns");j(l,"rows");j(l,"titles");f.log("UpdateStateOtherOptions",l);if(!_.isNil(f.selectedSandbox)&&f.selectedSandbox.Name!=f.constants.SANDBOX_BASE.Name){l.sandbox=f.selectedSandbox.Name}f.dataset=b.resultsetTransform(f.tm1Instance,f.tm1Cube,k,l);if(f.directiveConfigurations.pageSize>0){f.dataset.metadata._page={current:1,size:f.directiveConfigurations.pageSize};f.dataset.recalculate();f.dataset.pageFirst()}else{f.dataset.metadata._page=undefined}if(!(!_.isNil(F)&&!_.isNil(F.skipElementListUpdates)&&F.skipElementListUpdates)){f.log("UpdateStateAddDimensionInfo");var D=false;if(f.tableDrivers.column.length==0&&f.tableDrivers.row.length==0&&f.tableDrivers.title.length==0){D=true;f.log("UpdateStateInitDriverInfo")}else{var E=f.sameDimensionality(f.tableDrivers.column,f.dataset.dimensions.hierarchies.columns);var C=f.sameDimensionality(f.tableDrivers.row,f.dataset.dimensions.hierarchies.rows);var m=f.sameDimensionality(f.tableDrivers.title,f.dataset.dimensions.hierarchies.titles);f.log("UpdateStateInitColumnDriverAndResultIsTheSame-"+E);f.log("UpdateStateInitRowDriverAndResultIsTheSame-"+C);f.log("UpdateStateInitTitleDriverAndResultIsTheSame-"+m);if(!(E&&C&&m)){D=true}}if(D){f.log("UpdateStateDriverInfo");f.tableDrivers.column.length=0;f.tableDrivers.row.length=0;f.tableDrivers.title.length=0;var B=function(v,w,x){if(w&&w.length>0){_.forEach(w,function(y){if(_.findIndex(f.viewConfiguration[x+"s"],function(z){return z.hierarchy==y.hierarchy})!=-1){v[x].push(y)}})}};B(f.tableDrivers,f.dataset.dimensions.hierarchies.columns,"column");B(f.tableDrivers,f.dataset.dimensions.hierarchies.rows,"row");B(f.tableDrivers,f.dataset.dimensions.hierarchies.titles,"title");f.log("UpdateStateDriverInfoDone")}f.updateSelectedHierarchyElementsAndSubsetList(f.tableDrivers);var G=function(v){if(!_.isNil(v)){_.forEach(v,function(x){var w=f.getHierarchyConfiguration(f.viewConfiguration,x.hierarchy);if(!_.isNil(w)&&!_.isNil(w.subset)){x.subset=w.subset}})}};f.log("UpdateStateAddSubsets");G(f.tableDrivers.column);G(f.tableDrivers.row);G(f.tableDrivers.title);f.log("UpdateStateAddSubsetsDone")}f.log("UpdateStateIsAutoRecalculate-"+f.directiveConfigurations.autoRecalculate);if(f.directiveConfigurations.autoRecalculate){f.directiveConfigurations.autoRecalculate=true;e.find("button").each(function(w,v){if(angular.element(v).hasClass("tm1-ui-cv-button-auto-recalculate")){f.log("UpdateStateAutoRecalculateFound");angular.element(v).addClass("active");angular.element(v).attr("aria-pressed",true)}})}e.find("button").each(function(w,v){if(angular.element(v).hasClass("tm1-ui-cv-button-suppress-rows")){angular.element(v).removeClass("active");if(f.viewConfiguration.suppressEmptyRows){f.log("UpdateStateSuppressRowFound");angular.element(v).addClass("active")}angular.element(v).attr("aria-pressed",f.viewConfiguration.suppressEmptyRows)}else{if(angular.element(v).hasClass("tm1-ui-cv-button-suppress-columns")){angular.element(v).removeClass("active");if(f.viewConfiguration.suppressEmptyColumns){f.log("UpdateStateSuppressColumnFound");angular.element(v).addClass("active")}angular.element(v).attr("aria-pressed",f.viewConfiguration.suppressEmptyColumns)}}});f.directiveConfigurations.viewIsModified=true;if(f.directiveConfigurations.ignoreViewChangesThisTime){f.log("UpdateStateIgnoreView");f.directiveConfigurations.ignoreViewChangesThisTime=false;f.directiveConfigurations.viewIsModified=false}f.tableDriversCopy=_.cloneDeep(f.tableDrivers);f.log("UpdateStateBroadcastRS");f.$broadcast("tm1UiTableVirtualScroll.event.recalculate");f.$broadcast("tm1UiTableVirtualScroll.event.scroll-reset")};f.getHierarchyCount=function(k){var j=1;if(!_.isNil(f.directiveConfigurations.dimensionsAndHierarchies)){_.forEach(f.directiveConfigurations.dimensionsAndHierarchies,function(l){if(l.Name==k.dimension){j=l.Hierarchies.length}})}return j};f.isHierarchyOnAxis=function(l){var j=false;function k(m,A,y){var z=false;_.forEach(m[A],function(v){if(!z&&v.hierarchy==y){z=true}});return z}j=k(f.tableDrivers,"column",l);if(!j){j=k(f.tableDrivers,"row",l)}if(!j){j=k(f.tableDrivers,"title",l)}return j};f.getHierarchyConfiguration=function(k,l){function j(z,A){var B=undefined;for(var C=0;C<k[z].length;C++){if(k[z][C].hierarchy==A){B=k[z][C];break}}return B}var m=undefined;m=j("columns",l);if(angular.isUndefined(m)){m=j("rows",l)}if(angular.isUndefined(m)){m=j("titles",l)}f.log("HierConfigRetrievedFromView",m);return m};f.getHierarchyAxis=function(k){var j="other";_.forEach(f.viewConfiguration,function(l,m){if(angular.isArray(l)&&l.length>0&&l[0].hierarchy){_.forEach(l,function(w){if(w.hierarchy==k){j=m}})}});f.log("HierAxis",j);return j};f.getIndentation=function(j){return new Array(j.topLevel)};f.updateHierarchyTitleElements=function(y){f.log("UpdateHierTitleElementsDimToUpdate",y);var m=f.getHierarchyConfiguration(f.viewConfiguration,y.hierarchy);f.log("UpdateHierTitleElementsHierObjReference",m);if(m){var k=undefined;var x={};if(!_.isNil(m.subset)){x.subset=m.subset}else{if(!_.isNil(m.mdx)){x.mdx=m.mdx}}if(!_.isNil(m.alias)){x.attributes=m.alias}if(y.dimension!=y.hierarchy){x.hierarchy=y.hierarchy}var l=function(v,w){if(!_.isNil(v.elements)){_.forEach(v.elements,function(A){A.alias=A.Name;if(!_.isNil(A.Attributes)&&!_.isNil(A.Attributes[w.alias])){if(!_.isEmpty(A.Attributes[w.alias])){A.alias=A.Attributes[w.alias]}}if(A.Name==w.elementSelected){v.elementSelectedAlias=A.alias;f.log("UpdateHierTitleElementsFound-"+w.elementSelected+"-For-"+v.elementSelectedAlias)}})}};var j=false;if(x.attributes&&!_.isNil(y.elements)){if(!(y.elements[0].Attributes&&y.elements[0].Attributes[x.attributes])){j=true}}if(!j&&m._forceRefresh){f.log("UpdateHierTitleElementsForceRefreshRequestFound");delete m._forceRefresh;j=true}k=b.dimensionElements(f.tm1Instance,y.dimension,x);if(_.isNil(y.elements)||j){f.log("UpdateHierTitleElementsRefreshElements");y.elements=[];k.then(function(v){y.elements=v;l(y,m)})}else{f.log("UpdateHierTitleElementsNoRefresh");l(y,m)}f.log("UpdateHierTitleElementsUpdatedDimObj",y)}else{a.warn("Unable to get hierarchy configuration object. Check this out!");a.warn(f.viewConfiguration);a.warn(y.hierarchy)}};f.updateHierarchySubsetList=function(k){f.log("UpdateHierSubsetList",k);var j=undefined;if(k.dimension!=k.hierarchy){j=b.dimensionSubsets(f.tm1Instance,k.dimension,{hierarchy:k.hierarchy})}else{j=b.dimensionSubsets(f.tm1Instance,k.dimension)}if(_.isNil(k.subsets)){k.subsets=[];j.then(function(l){k.subsets=l;k.elementCount=undefined;_.forEach(k.subsets,function(m){if(_.eq(m.Name,k.subset)){k.elementCount=m["Elements@odata.count"]}});f.log("UpdateHierSubsetListUpdated",k)})}};f.updateTemplate=_.debounce(function(){f.log("UpdateTemplate");e.find("div").each(function(m,l){if(angular.element(l).hasClass("tm1-ui-cv-table-data")){if(f.tableScope){f.log("UpdateTemplateTableScopeFoundAndDestroyed");f.tableScope.$destroy()}f.tableScope=f.$new();var k="assets/html/tm1-ui-cube-viewer-tpl-table-read-only.html";if(f.directiveConfigurations.tableMode==f.constants.TABLE_MODE_EDIT){k="assets/html/tm1-ui-cube-viewer-tpl-table-edit.html"}var w=s.get(k);var j=q(w)(f.tableScope);angular.element(l).empty();angular.element(l).append(j);setTimeout(function(){f.log("UpdateTemplateBroadcastRecalc");f.$broadcast("tm1UiTableVirtualScroll.event.recalculate")},200)}})},100);f.updateHierarchyViewerTemplate=function(){f.log("UpdateHierViewTemplate");var j="";if(isMobile.phone){j="assets/html/tm1-ui-cube-viewer-tpl-hierarchy-updater.html"}else{j="assets/html/tm1-ui-cube-viewer-tpl-hierarchy-drag-drop.html"}e.find("div").each(function(m,l){if(angular.element(l).hasClass("tm1-ui-cv-hierarchy-updater")){if(f.hierarchyViewerScope){f.hierarchyViewerScope.$destroy()}f.hierarchyViewerScope=f.$new();var k=s.get(j);var w=q(k)(f.hierarchyViewerScope);angular.element(l).empty();angular.element(l).append(w)}})};f.recalculateHierarchyPanelsHeight=_.debounce(function(){setTimeout(function(){var j=e.find(".tm1-ui-cube-viewer-title-axis-container").outerHeight();var l=e.find(".tm1-ui-cube-viewer-row-axis-container").outerHeight();var k=e.find(".tm1-ui-cube-viewer-column-axis-container").outerHeight();var m=j+(l>k?l:k)+12;e.find(".tm1-ui-cv-hierarchy-updater div.panel-body").css({minHeight:m+"px",height:m+"px"});if(l>k){e.find(".tm1-ui-cube-viewer-column-axis-container").css({minHeight:l+"px",height:l+"px"})}else{if(k>l){e.find(".tm1-ui-cube-viewer-row-axis-container").css({minHeight:k+"px",height:k+"px"})}}},100)},100);angular.element(u).bind("resize",function(){f.recalculateHierarchyPanelsHeight()});f.refreshData=function(k){f.log("RefreshDataRequest");var j=false;if(f.directiveConfigurations.autoRecalculate){j=true;f.log("RefreshDataAutoRecalculateEnabled")}else{if(!_.isNil(k)&&!_.isNil(k.forceRecalculate)&&k.forceRecalculate){j=true;f.log("RefreshDataForceRecalculate")}}if(f.directiveConfigurations.mdxMode){f.log("RefreshDataMDXMode");j=false}if(f.directiveConfigurations.isFirstLoad){f.log("RefreshDataFirstLoad");if(!j){j=true}else{f.directiveConfigurations.isFirstLoad=false}}if(j&&!(f.viewConfiguration&&f.viewConfiguration.rows&&f.viewConfiguration.columns&&f.viewConfiguration.rows.length>0&&f.viewConfiguration.columns.length>0)){f.directiveConfigurations.isFirstLoad=false;if(!_.isEmpty(f.viewConfiguration.view)){f.log("RefreshDataView - "+f.viewConfiguration.view)}else{f.log("RefreshDataNoView");j=false;t(function(){f.directiveConfigurations.error=f.constants.ERROR_MISSING_ROW_COLUMN_ON_VIEW});a.error(f.constants.ERROR_MISSING_ROW_COLUMN_ON_VIEW);f.refreshDimensionWithHierarchyList();f.recalculateHierarchyPanelsHeight()}}if(j){f.log("RefreshDataCalculating");if(!(k&&k.skipTableAnimation)){f.animateTableOut()}if(f.directiveConfigurations.isFirstLoad){f.log("RefreshDataCalculatingFirstLoad");f.directiveConfigurations.isFirstLoad=false;f.directiveConfigurations.showTable=false;if(_.isNil(f.viewConfiguration)){f.viewConfiguration={firstCellOnly:true}}else{f.viewConfiguration.firstCellOnly=true}}else{if(!_.isNil(f.viewConfiguration)&&f.viewConfiguration.firstCellOnly){f.log("RefreshDataCalculatingFirstCell");f.viewConfiguration.firstCellOnly=false;f.directiveConfigurations.showTable=true}else{if(!f.directiveConfigurations.showTable){f.log("RefreshDataCalculatingShowTable");f.directiveConfigurations.showTable=true}}}f.clearErrorAlert();f.log("RefreshDataVerifyCube",f.tm1Cube);f.log("RefreshDataVerifyView",f.viewConfiguration);b.cubeCanvasViewVerify(f.tm1Instance,f.tm1Cube,f.viewConfiguration).then(function(l){f.viewConfiguration=angular.merge({},f.viewConfiguration,l);f.log("RefreshDataViewEffective",f.viewConfiguration);b.cubeAdhocView(f.tm1Instance,f.tm1Cube,f.viewConfiguration).then(function(m){if(m&&m.failed){f.log("RefreshDataViewError");f.directiveConfigurations.error=m.message}else{if(m&&angular.isDefined(m.success)){f.log("RefreshDataViewSuccess")}else{f.log("RefreshDataViewSuccessPrepareView");f.updateDirectiveState(m,k);f.refreshCubeDimensionList();f.refreshDimensionWithHierarchyList();f.recalculateHierarchyPanelsHeight()}}})})}else{f.log("RefreshDataIgnored");f.updateSelectedHierarchyElementsAndSubsetList(f.tableDrivers)}};f.refreshDataDebounced=_.debounce(function(){f.refreshData()},500);f.updateViewConfiguration=function(){f.log("UpdateViewConfig");var j={};j.rows=[];j.columns=[];j.titles=[];function k(l,m,w){_.forEach(m[w],function(v){l[w+"s"].push(f.getHierarchyConfiguration(f.viewConfiguration,v.hierarchy))})}k(j,f.tableDrivers,"column");k(j,f.tableDrivers,"row");k(j,f.tableDrivers,"title");f.viewConfiguration.columns.length=0;f.viewConfiguration.rows.length=0;if(f.viewConfiguration.titles){f.viewConfiguration.titles.length=0}f.viewConfiguration.columns=j.columns;f.viewConfiguration.rows=j.rows;f.viewConfiguration.titles=j.titles;f.log("UpdateViewConfigUpdated",f.viewConfiguration)};f.onCellClick=function(j){if(j.HasPicklist){b.cellGetPicklistValues(f.tm1Instance,f.tm1Cube,j.reference()).then(function(k){f.picklistItems=k})}};f.onCellUpdate=function(k,j){if(angular.isDefined(j)){k.value=j}k.update(f.refreshDataDebounced)};f.onHierarchyClick=function(k){f.log("HierClick");var l=f.getHierarchyConfiguration(f.viewConfiguration,k.hierarchy);if(l){r.setDefaults({size:"large"});var j="<tm1-ui-subset-editor";j+=' tm1-instance="'+f.tm1Instance+'"';j+=' tm1-dimension="'+l.dimension+'"';j+=' tm1-hierarchy="'+l.hierarchy+'"';if(f.debug){j+=' tm1-debug="true"'}f.subsetEditorOptions={allowSubsetSave:true,dynamicExpandCollapseMode:true,staticHierarchy:true};if(!_.isNil(l.alias)&&!_.isEmpty(l.alias)){f.subsetEditorOptions.mdxPreferredAlias=l.alias}j+=' tm1-options="subsetEditorOptions"';j+=' tm1-api="subsetEditorApi"';if(!_.isNil(l.mdx)){f.tm1MdxValue=l.mdx;j+=' tm1-mdx="{{tm1MdxValue}}"'}else{if(!_.isNil(l.subset)){j+=' tm1-subset="'+l.subset+'"'}else{throw"This should not happen! Check hierarchy object!"}}j+=' ng-model="subsetEditorOutput"';j+="></tm1-ui-subset-editor>";var w=q(j);var m=f.$new();r.confirm(w(m)).then(function(){l=f.getHierarchyConfiguration(f.viewConfiguration,k.hierarchy);l._forceRefresh=true;f.directiveConfigurations.subsetEditorData=m.subsetEditorApi.getModelData();if(!_.isNil(f.directiveConfigurations.subsetEditorData.subset)&&!_.isEmpty(f.directiveConfigurations.subsetEditorData.subset)){l.subset=_.cloneDeep(f.directiveConfigurations.subsetEditorData.subset);l.mdx=undefined;k.subset=l.subset}else{if(!_.isNil(f.directiveConfigurations.subsetEditorData.mdx)&&!_.isEmpty(f.directiveConfigurations.subsetEditorData.mdx)){l.mdx=_.cloneDeep(f.directiveConfigurations.subsetEditorData.mdx);l.subset=undefined;k.subset=undefined}}l.alias="";if(!_.isNil(f.directiveConfigurations.subsetEditorData.alias)&&!_.isEmpty(f.directiveConfigurations.subsetEditorData.alias)){l.alias=f.directiveConfigurations.subsetEditorData.alias}if(f.directiveConfigurations.subsetEditorData.elementsSelected&&f.directiveConfigurations.subsetEditorData.elementsSelected.length>0){l.elementSelected=f.directiveConfigurations.subsetEditorData.elementsSelected[0].name}f.log("HierClickSubsetEditorData",f.directiveConfigurations.subsetEditorData);f.log("HierClickUpdatedHierObj",l);delete f.directiveConfigurations.subsetEditorData;f.refreshDataDebounced();m.$destroy()},function(){m.$destroy()})}else{throw"This should not happen. Check hierarchy object lookup."}};f.onHierarchyDragStart=function(j,l,m,k){f.log("OnHierDragStart-"+l,k);f.dragEvent.sourceAxis=m;f.dragEvent.sourceElementIndex=l;if(k&&k.hierarchy){f.dragEvent.hierarchy=k.hierarchy}};f.onHierarchyDrop=function(m,k,j,l,w){f.log("OnHierDragDrop-"+m,k);f.log("OnHierDragDropAxis-"+w);if(_.eq(w,f.constants.AXIS_NONE)){f.tableDrivers[f.dragEvent.sourceAxis].splice(f.dragEvent.sourceElementIndex,1);_.forEach(f.directiveConfigurations.dimensionsAndHierarchies,function(v){if(_.eq(v.Name,k.dimension)){v.Hierarchies.push({Name:k.dimension,dimension:k.dimension,hierarchy:k.hierarchy})}});return true}else{if(_.findIndex(f.tableDrivers[w],function(v){return v.dimension==k.dimension})!=-1){return false}else{f.dragEvent.dropAxis=w;f.dragEvent.item=k;return k}}};f.onHierarchyMoved=function(k,j,l){f.log("OnHierMoved-"+k);if(f.dragEvent.dropAxis){if(f.dragEvent.sourceAxis!=f.dragEvent.dropAxis){j.splice(k,1)}else{j.splice(f.dragEvent.sourceElementIndex,1)}}if(_.isNil(f.dragEvent.sourceAxis)||_.eq(f.dragEvent.sourceAxis,f.constants.AXIS_NONE)){f.viewConfiguration[f.dragEvent.dropAxis+"s"].push({alias:"",dimension:f.dragEvent.item.dimension,hierarchy:f.dragEvent.item.hierarchy,mdx:"{["+f.dragEvent.item.dimension+"].["+f.dragEvent.item.hierarchy+"].AllMembers}"})}f.dragEvent={};f.log("OnHierMovedUpdateViewConfigRequest");f.updateViewConfiguration();f.log("OnHierMovedUpdateViewDataRequest");f.refreshDataDebounced();f.log("OnHierMovedViewConfig",f.viewConfiguration)};f.onHierarchyTitleSelect=function(k,l){var j=f.getHierarchyConfiguration(f.viewConfiguration,k.hierarchy);if(!_.isNil(j)){if(l.Name!=j.elementSelected){j.elementSelected=l.Name;f.updateViewConfiguration();f.refreshDataDebounced()}}else{throw"(T) UNABLE TO FIND HIERARCHY CONFIGURATION! THIS SHOULD NOT HAPPEN."}};f.onHierarchySubsetSelect=function(l,k){f.log("HierSubsetSelect");var j=f.getHierarchyConfiguration(f.viewConfiguration,l.hierarchy);f.log("HierSubsetSelectHier",j);if(!_.isNil(j)){if(k.Name!=j.subset){j.subset=k.Name;j.mdx=undefined;l.subset=j.subset;f.log("HierSubsetSelectDim",l);f.updateViewConfiguration();f.refreshData({skipElementListUpdates:true})}}else{throw"(RC) UNABLE TO FIND HIERARCHY CONFIGURATION! THIS SHOULD NOT HAPPEN."}};f.onHierarchyRemove=function(k,j){f.log("HierRemoveDim",k);f.log("HierRemoveAcis",j);_.remove(f.tableDrivers[j],function(l){return l.hierarchy==k.hierarchy});f.updateViewConfiguration();f.refreshDataDebounced()};f.expandOrCollapse=function(l){var m=f.getHierarchyConfiguration(f.viewConfiguration,l.hierarchy);var k=l.element.children?f.constants.DRILL_COLLAPSE:f.constants.DRILL_EXPAND;var y="["+l.dimension+"].["+l.hierarchy+"].["+l.key+"]";var j=undefined;var x={};x.id=f.directiveID;x.dimension=l.dimension;x.hierarchy=l.hierarchy;x.drillAction=k;x.uniqueName=y;if(m.mdx){x.mdx=m.mdx}else{if(m.subset){x.mdx="{TM1SubsetToSet(["+l.dimension+'],"'+m.subset+'")}'}else{throw"UNSUPPORTED "+k+" LOGIC"}}b.dimensionApplyDrillAction(f.tm1Instance,l.dimension,x).then(function(v){m.mdx=v;b.dimensionElements(f.tm1Instance,m.dimension,{mdx:m.mdx}).then(function(A){var w="";_.forEach(A,function(z){w+=","+z.UniqueName});w=w.substr(1);if(!_.isEmpty(m.subset)){m.subset=""}f.refreshData({forceRecalculate:true,skipElementListUpdates:true,skipTableAnimation:true})})})};f.resetViewDefinitionAndData=function(){f.viewConfiguration=angular.merge({},f.viewConfigurationCopy,f.tm1Options);f.log("ViewDefReset",f.viewConfiguration);f.refreshData({forceRecalculate:true})};f.updateTableViaMDX=function(j){f.log("UpdateTableMDX",j);f.directiveConfigurations.showTable=false;b.cubeExecuteMdx(f.tm1Instance,j).then(function(k){if(k.failed){f.directiveConfigurations.error=k.message}else{f.directiveConfigurations.showTable=true;t(function(){f.dataset=b.resultsetTransform(f.tm1Instance,f.tm1Cube,k);f.$broadcast("tm1UiTableVirtualScroll.event.recalculate")})}})};f.saveAsMDXView=function(j){f.log("SaveMDXView",j);r.setDefaults({size:"medium"});var l=q(s.get("assets/html/tm1-ui-cube-viewer-tpl-mdxview-save-as.html"));var m=f.$new();m.viewOptions={type:"mdx"};m.viewOptions.view="";m.viewOptions.saveAsPrivateView=true;m.viewOptions.views=[];b.cubeViews(f.tm1Instance,f.tm1Cube).then(function(w){m.viewOptions.views=w});m.validateView=function(w){m.viewOptions.isValid=true;m.viewOptions.message="";if(!_.isNil(m.viewOptions.views)){_.forEach(m.viewOptions.views,function(v){if(m.viewOptions.isValid&&v.Name==m.viewOptions.view){m.viewOptions.isValid=false;m.viewOptions.message="View already exists. Please change."}})}};var k={message:l(m),title:"Save MDX as MDXView",buttons:{warning:{label:"Cancel",className:"btn-default",callback:function(){}},success:{label:"Save",className:"btn-primary",callback:function(){if(m.viewOptions.isValid){var w={};w.instance=f.tm1Instance;w.view=m.viewOptions.view;w.saveAsCanvasView=false;w.saveAsNativeView=false;w.saveAsMdxView=true;w.isPrivate=m.viewOptions.saveAsPrivateView;w.mdx=j;m.$destroy();b.cubeViewSave(f.tm1Instance,f.tm1Cube,m.viewOptions.view,w).then(function(v){if(v.success){r.alert("View saved successfully!").then(function(){})}else{r.alert("There was a problem saving the view. Check the logs.").then(function(){})}})}else{r.alert("View already exists. Unable to save into a view.").then(function(){})}}}}};r.customDialog(k)};f.generateCurrentViewMDX=function(){b.cubeCanvasViewMDX(f.tm1Instance,f.tm1Cube,f.viewConfiguration).then(function(j){if(!_.isNil(j)&&!_.isNil(j.mdx)){var l=f.$new();f.editorLoaded=function(w){w.setTheme(n.uiPrefs.editorTheme);w.setOptions({readOnly:true,highlightActiveLine:false,highlightGutterLine:false});w.getSession().setMode("ace/mode/mdx");w.getSession().setOptions({tabSize:2,useSoftTabs:true});w.$blockScrolling=Infinity;w.setFontSize(n.uiPrefs.fontSize);w.setShowPrintMargin(false);w.setValue(j.mdx,-1)};var k='<strong class="h3">Generated MDX</strong><hr /><div>';k+='<pre ui-ace="{ onLoad : editorLoaded }" style="height: 250px;"></pre>';k+="</div>";var m=q(k);r.alert(m(l)).then(function(){l.$destroy()})}else{r.alert('Unable to generate MDX for this Canvas view definition.<br /><span class="text-danger">'+JSON.stringify(j)+"</span>").then(function(){})}})};f.saveView=function(k){r.setDefaults({size:"medium"});var l=q(s.get("assets/html/tm1-ui-cube-viewer-tpl-view-save.html"));var m=f.$new();m.view=k;m.saveAsNativeView=false;m.viewOptions={type:"canvas"};m.viewOptions.view=k.Name;m.viewOptions.saveAsPrivateView=true;if(k&&!k.isPrivate){m.viewOptions.saveAsPrivateView=false}m.viewOptions.saveAsMDXView=false;if(k.viewType=="mdx"){m.viewOptions.saveAsMDXView=true}m.viewOptions.isNativeViewCompatible=false;function w(v){var y=true;if(!_.isNil(v)){_.forEach(v,function(x){if(y&&_.isNil(x.subset)||_.isEmpty(x.subset)){y=false}})}return y}m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.columns);if(m.viewOptions.isNativeViewCompatible){m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.rows)}if(m.viewOptions.isNativeViewCompatible){m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.titles)}m.validateView=function(){m.viewOptions.isValid=true;m.viewOptions.message="";if(!_.isNil(f.directiveConfigurations.views)){_.forEach(f.directiveConfigurations.views,function(v){if(m.viewOptions.isValid&&v.Name==m.viewOptions.view){m.viewOptions.isValid=false;m.viewOptions.message="View already exists. Please change."}})}if(!m.viewOptions.isValid&&m.viewOptions.overwriteView){m.viewOptions.isValid=true;m.viewOptions.message=""}if(_.isEmpty(m.viewOptions.view)){m.viewOptions.isValid=false;m.viewOptions.message="Please enter name of the view."}};m.validateView();var j={message:l(m),title:"Save View",buttons:{warning:{label:"Cancel",className:"btn-default",callback:function(){}},success:{label:"Save",className:"btn-primary",callback:function(){if(m.viewOptions.isValid){f.viewConfiguration.view=m.viewOptions.view;f.viewConfiguration.saveAsMdxView=false;f.viewConfiguration.saveAsCanvasView=false;f.viewConfiguration.saveAsNativeView=false;if(m.saveAsNativeView){f.viewConfiguration.saveAsNativeView=true}else{if(m.viewOptions.saveAsMDXView||f.directiveConfigurations.isMDXViewSaveable){f.viewConfiguration.saveAsMdxView=true}else{f.viewConfiguration.saveAsCanvasView=true}}f.viewConfiguration.isPrivate=m.viewOptions.saveAsPrivateView;m.$destroy();b.cubeViewSave(f.tm1Instance,f.tm1Cube,m.viewOptions.view,f.viewConfiguration).then(function(v){if(v.success){r.alert("View saved successfully!").then(function(){});f.refreshViewList({preselectView:m.viewOptions.view});f.directiveConfigurations.viewIsModified=false}else{if(!_.isNil(v.message)&&!_.isNil(v.message.message)){a.error("Save View Error: "+v.message.message)}else{a.error(v)}r.alert('<span class="text-danger">There was a problem saving the view. Check the logs.</span>').then(function(){})}})}else{r.alert("View Name already exists. Unable to save view.").then(function(){})}}}}};r.customDialog(j)};f.saveViewAs=function(k){r.setDefaults({size:"medium"});var l=q(s.get("assets/html/tm1-ui-cube-viewer-tpl-view-save-as.html"));var m=f.$new();m.view=k;m.viewOptions={saveAsNativeView:false};m.viewOptions.view=k.Name;m.viewOptions.saveAsPrivateView=true;if(k&&!k.isPrivate){m.viewOptions.saveAsPrivateView=false}m.viewOptions.isNativeViewCompatible=false;function w(v){var y=true;if(!_.isNil(v)){_.forEach(v,function(x){if(y&&_.isNil(x.subset)||_.isEmpty(x.subset)){y=false}})}return y}m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.columns);if(m.viewOptions.isNativeViewCompatible){m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.rows)}if(m.viewOptions.isNativeViewCompatible){m.viewOptions.isNativeViewCompatible=w(f.viewConfiguration.titles)}m.validateView=function(){m.viewOptions.isValid=true;m.viewOptions.message="";if(!_.isNil(f.directiveConfigurations.views)){_.forEach(f.directiveConfigurations.views,function(v){if(m.viewOptions.isValid&&v.Name==m.viewOptions.view){m.viewOptions.isValid=false;m.viewOptions.message="View already exists. Please change."}})}};m.validateView();var j={message:l(m),title:"Save View As",buttons:{warning:{label:"Cancel",className:"btn-default",callback:function(){}},success:{label:"Save",className:"btn-primary",callback:function(){if(m.viewOptions.isValid){f.viewConfiguration.view=m.viewOptions.view;f.viewConfiguration.saveAsCanvasView=false;f.viewConfiguration.saveAsNativeView=false;f.viewConfiguration.saveAsMdxView=false;if(m.viewOptions.saveAsNativeView){f.viewConfiguration.saveAsNativeView=true}else{if(f.directiveConfigurations.isMDXViewSaveable){f.viewConfiguration.saveAsMdxView=true}else{f.viewConfiguration.saveAsCanvasView=true}}f.viewConfiguration.isPrivate=m.viewOptions.saveAsPrivateView;m.$destroy();b.cubeViewSave(f.tm1Instance,f.tm1Cube,m.viewOptions.view,f.viewConfiguration).then(function(v){if(v.success){r.alert("View saved successfully!").then(function(){});f.selectedView.Name=m.viewOptions.view;f.refreshViewList({preselectView:f.selectedView.Name});f.directiveConfigurations.viewIsModified=false}else{r.alert("There was a problem saving the view. Check the logs.").then(function(){})}})}else{r.alert("View already exists. Unable to save into a new view.").then(function(){})}}}}};r.customDialog(j)};f.updateWithView=function(j){f.log("UpdateWithView",j);if(j.Name!=f.constants.NEW_CANVAS_VIEW.Name){f.selectedView=j;if(f.selectedView.viewType!=f.constants.VIEW_TYPE_CANVAS){f.log("UpdateWithViewConvertingToCanvasType");b.cubeViewConvert(f.tm1Instance,f.tm1Cube,f.selectedView.viewType,f.constants.VIEW_TYPE_CANVAS,{view:j.Name,isPrivate:j.isPrivate}).then(function(k){f.viewConfiguration=k;f.viewConfiguration.viewType=f.constants.VIEW_TYPE_CANVAS;f.viewConfigurationCopy=_.cloneDeep(f.viewConfiguration);f.directiveConfigurations.ignoreViewChangesThisTime=true;f.log("UpdateWithViewFinal1",f.viewConfiguration);f.refreshDataDebounced()})}else{f.log("UpdateWithViewCanvasType");b.cubeCanvasView(f.tm1Instance,f.tm1Cube,f.selectedView.Name,{isPrivate:f.selectedView.isPrivate}).then(function(k){f.viewConfiguration=k;f.viewConfiguration.viewType=f.selectedView.viewType;f.viewConfigurationCopy=_.cloneDeep(f.viewConfiguration);f.directiveConfigurations.ignoreViewChangesThisTime=true;f.log("UpdateWithViewFinal2",f.viewConfiguration);f.refreshDataDebounced()})}}else{}};f.refreshViewList=function(j){f.log("RefreshViewList",j);f.refreshViewListOptions=j;b.cubeViews(f.tm1Instance,f.tm1Cube,{includeCanvasViews:true}).then(function(m){if(angular.isArray(m)){f.directiveConfigurations.views=m;f.directiveConfigurations.views.push(f.constants.NEW_CANVAS_VIEW);_.forEach(f.directiveConfigurations.views,function(w){w.viewType=f.constants.VIEW_TYPE_CANVAS;if(angular.isDefined(w["@odata.type"])){if(w["@odata.type"].indexOf("NativeView")!=-1){w.viewType=f.constants.VIEW_TYPE_NATIVE}else{if(w["@odata.type"].indexOf("MDXView")!=-1){w.viewType=f.constants.VIEW_TYPE_MDX;w.disabled=true}else{if(w["@odata.type"].indexOf("CanvasView")!=-1){w.viewType=f.constants.VIEW_TYPE_CANVAS}else{w.viewType=f.constants.VIEW_TYPE_UNKNOWN;w.disabled=true}}}}w.display=_.isNil(w.Name)?"- new -":w.Name;if(w.viewType==f.constants.VIEW_TYPE_CANVAS){w.display=w.Name}else{if(w.viewType==f.constants.VIEW_TYPE_MDX){w.display=w.Name+" (MDX)"}else{if(w.viewType==f.constants.VIEW_TYPE_UNKNOWN){w.display=w.Name+" (Unknown)"}}}if(w.isPrivate){w.display=w.display+" *"}if(f.directiveConfigurations.viewTypePriority==w.viewType){if(!_.isNil(f.selectedView)&&f.selectedView.Name==w.Name){f.selectedView=w}else{if(!_.isEmpty(f.viewConfiguration.view)&&f.viewConfiguration.view==w.Name){f.selectedView=w}}}});if(j&&angular.isDefined(j.preselectView)){_.forEach(f.directiveConfigurations.views,function(w){if(w.Name==j.preselectView){f.selectedView=w}})}if((_.isNil(f.selectedView)||(!_.isNil(f.selectedView)&&_.isEmpty(f.selectedView.Name)))&&!_.isEmpty(f.viewConfiguration.view)){var l={};var k=0;_.forEach(f.directiveConfigurations.views,function(w){if(f.viewConfiguration.view==w.Name){l[w.viewType]=w;k++}});if(k>0){if(_.isNil(f.getPrioritizedView)){f.getPrioritizedView=function(w){if(!_.isNil(w[f.constants.VIEW_TYPE_CANVAS])){return w[f.constants.VIEW_TYPE_CANVAS]}else{if(!_.isNil(w[f.constants.VIEW_TYPE_NATIVE])){return w[f.constants.VIEW_TYPE_NATIVE]}else{if(!_.isNil(w[f.constants.VIEW_TYPE_MDX])){return w[f.constants.VIEW_TYPE_MDX]}else{return null}}}}}f.selectedView=f.getPrioritizedView(l);if(!_.isNil(f.selectedView)&&f.refreshViewListOptions&&!_.isNil(f.refreshViewListOptions.forceRecalculate)&&f.refreshViewListOptions.forceRecalculate){b.cubeViewConvert(f.tm1Instance,f.tm1Cube,f.selectedView.viewType,f.constants.VIEW_TYPE_CANVAS,{view:f.viewConfiguration.view}).then(function(w){f.viewConfiguration=w;f.viewConfigurationCopy=_.cloneDeep(f.viewConfiguration);f.refreshData({forceRecalculate:true})})}}}}})};f.refreshSandboxList=function(j){b.sandboxes(f.tm1Instance).then(function(k){if(angular.isArray(k)){if(f.directiveConfigurations.sandboxes){f.directiveConfigurations.sandboxes.length=0}f.directiveConfigurations.sandboxes=k;f.directiveConfigurations.sandboxes.push(f.constants.SANDBOX_BASE);if(!_.isEmpty(f.directiveConfigurations.sandboxNameToSet)){_.forEach(f.directiveConfigurations.sandboxes,function(l){if(l.Name==f.directiveConfigurations.sandboxNameToSet){f.selectedSandbox=l}});f.directiveConfigurations.sandboxNameToSet="";f.refreshData(j)}else{f.selectedSandbox=f.constants.SANDBOX_BASE}if(!_.isNil(j)&&j.forceRefreshOnSandboxUpdate){f.refreshData(j)}}})};f.createSandbox=function(){r.prompt("Please enter the name of the sandbox to create:").then(function(j){if(!_.isNil(j)&&!_.isEmpty(j)){j=j.trim();b.sandboxCreate(f.tm1Instance,j).then(function(k){if(!_.isNil(k.success)&&k.success){f.activateSandbox({Name:j})}else{var l=undefined;if(k&&k.message&&k.message.message){l=k.message.message}r.alert("There was an error creating <strong>"+j+'</strong>. <br /><span class="text-danger">'+l+" </span>").then(function(){});a.error(k)}})}else{r.alert("Sandbox name cannot be empty. Please try again.").then(function(){})}},function(){})};f.publishSandbox=function(j){r.confirm("This will publish changes from sandbox <strong>"+j.Name+"</strong> and merge it with the actual data. Proceed?").then(function(){b.sandboxPublishChanges(f.tm1Instance,j.Name).then(function(k){if(!_.isNil(k.success)&&k.success){f.directiveConfigurations.sandboxNameToSet="";f.refreshSandboxList({forceRefreshOnSandboxUpdate:true})}else{var l=undefined;if(k&&k.message&&k.message.message){l=k.message.message}r.alert("There was an error publishing changes from <strong>"+sandboxName+'</strong>. <br /><span class="text-danger">'+l+" </span>").then(function(){});a.error(k)}})},function(){})};f.discardSandboxChanges=function(j){r.confirm("This will discard your changes on this sandbox <strong>"+j.Name+"</strong>. Proceed?").then(function(){b.sandboxDiscardChanges(f.tm1Instance,j.Name).then(function(k){if(!_.isNil(k.success)&&k.success){f.directiveConfigurations.sandboxNameToSet="";f.refreshSandboxList({forceRefreshOnSandboxUpdate:true})}else{var l=undefined;if(k&&k.message&&k.message.message){l=k.message.message}r.alert("There was an error discarding changes from <strong>"+sandboxName+'</strong>. <br /><span class="text-danger">'+l+" </span>").then(function(){});a.error(k)}})},function(){})};f.deleteSandbox=function(j){r.confirm("This will delete sandbox <strong>"+j.Name+"</strong> and you will lose any unpublished changes. Proceed?").then(function(){b.sandboxDelete(f.tm1Instance,j.Name).then(function(k){if(!_.isNil(k.success)&&k.success){f.viewConfiguration.sandbox="";f.directiveConfigurations.sandboxNameToSet="";f.refreshSandboxList({forceRefreshOnSandboxUpdate:true})}else{var l=undefined;if(k&&k.message&&k.message.message){l=k.message.message}r.alert("There was an error deleting <strong>"+sandboxName+'</strong>. <br /><span class="text-danger">'+l+" </span>").then(function(){});a.error(k)}})},function(){})};f.activateSandbox=function(j){f.viewConfiguration.sandbox="";if(j.Name!=f.constants.SANDBOX_BASE.Name){f.viewConfiguration.sandbox=j.Name;f.directiveConfigurations.sandboxNameToSet=j.Name}f.refreshSandboxList()};f.refreshDimensionWithHierarchyList=function(){f.log("RefreshDimensionAndHierarchy");b.cubeDimensionsAndHierarchies(f.tm1Instance,f.tm1Cube).then(function(j){f.directiveConfigurations.dimensionsAndHierarchies.length=0;if(!_.isNil(j.Dimensions)){f.directiveConfigurations.dimensionsAndHierarchies=j.Dimensions;_.forEach(f.directiveConfigurations.dimensionsAndHierarchies,function(k){k.expanded=f.directiveConfigurations.expandHierarchyList;k.Hierarchies=_.remove(k.Hierarchies,function(l){return !f.isHierarchyOnAxis(l.Name)});_.forEach(k.Hierarchies,function(l){l.dimension=k.Name;l.hierarchy=l.Name})})}})};f.refreshCubeDimensionList=function(){f.log("RefreshCubeDimension");b.cubeDimensions(f.tm1Instance,f.tm1Cube).then(function(j){f.directiveConfigurations.cubeDimensions=j;f.selectedDimension=f.directiveConfigurations.cubeDimensions[0];f.refreshCubeDimensionHierarchyList(f.selectedDimension)})};f.refreshCubeDimensionHierarchyList=function(j){f.log("RefreshCubeDimensionHierarchy");b.dimensionHierarchies(f.tm1Instance,j).then(function(k){f.directiveConfigurations.dimensionHierarchies=k;f.selectedHierarchy=f.directiveConfigurations.dimensionHierarchies[0];f.refreshHierarchyAxisList(j,f.selectedHierarchy)})};f.refreshHierarchyAxisList=function(j,l){f.log("RefreshHierarchyAxis");var m=f.getHierarchyConfiguration(f.viewConfiguration,l.Name);f.blockAddToHierarchy=false;if(m){f.blockAddToHierarchy=true}f.hierarchyAxisFrom={};if(m){var k=f.getHierarchyAxis(l.Name);if(k.indexOf(f.constants.AXIS_COLUMN.axis)!=-1){f.hierarchyAxisFrom=f.constants.AXIS_COLUMN}else{if(k.indexOf(f.constants.AXIS_ROW.axis)!=-1){f.hierarchyAxisFrom=f.constants.AXIS_ROW}else{if(k.indexOf(f.constants.AXIS_TITLE.axis)!=-1){f.hierarchyAxisFrom=f.constants.AXIS_TITLE}else{f.hierarchyAxisFrom=f.constants.AXIS_UNKNOWN}}}}else{f.hierarchyAxisFrom=f.constants.AXIS_UNKNOWN}f.updateAxisMovementActionStatus(j,l)};f.updateAxisMovementActionStatus=function(j,k){f.blockMoveAxisOfHierarchy=true;var l=f.getHierarchyConfiguration(f.viewConfiguration,k.Name);var m=false;if(f.selectedAxisTo&&f.hierarchyAxisFrom.display!=f.selectedAxisTo.display){m=true}if(f.blockAddToHierarchy&&m&&l){f.blockMoveAxisOfHierarchy=false}};f.addHierarchy=function(j,l,k){f.tableDrivers[k.axis].push({name:l.Name,hierarchy:l.Name});f.viewConfiguration[k.axis+"s"].push({alias:"",dimension:j,hierarchy:l.Name,mdx:"{["+j+"].["+l.Name+"].AllMembers}"});f.updateViewConfiguration();f.refreshDataDebounced()};f.updateHierarchy=function(j,y,z,k){var A=f.getHierarchyConfiguration(f.viewConfiguration,y.Name);f.tableDrivers[k.axis].push(A);if(angular.isUndefined(f.viewConfiguration[k.axis+"s"])){f.viewConfiguration[k.axis+"s"]=[]}f.viewConfiguration[k.axis+"s"].push(A);var l=_.findIndex(f.tableDrivers[z.axis],function(v){return v.hierarchy==y.Name});f.tableDrivers[z.axis].splice(l,1);var m=_.findIndex(f.viewConfiguration[z.axis+"s"],function(v){return v.hierarchy==y.Name});f.viewConfiguration[z.axis+"s"].splice(m,1);f.updateViewConfiguration();f.refreshDataDebounced();f.blockMoveAxisOfHierarchy=true};f.toggleZeroSuppression=function(j){if(_.eq("rows",j)){f.viewConfiguration.suppressEmptyRows=!f.viewConfiguration.suppressEmptyRows}else{f.viewConfiguration.suppressEmptyColumns=!f.viewConfiguration.suppressEmptyColumns}f.refreshDataDebounced()};if(h.id!=undefined){e.attr("id",f.id)}if(h.name!=undefined){e.attr("name",f.name)}f.clearErrorAlert=function(){f.directiveConfigurations.error=""};f.aceLoaded=function(j){$(j.container).css("height",200);f.$editor=j;f.$editor.$blockScrolling=Infinity;f.$editor.setOptions({enableBasicAutocompletion:true,tabSize:2});f.$editor.session.setMode("ace/mode/mdx");f.$editor.commands.addCommand({name:"save",bindKey:{win:"Ctrl-S",mac:"Cmd-S"},exec:function(k){f.saveAsMDXView(k.getValue())}});f.$editor.commands.addCommand({name:"execute",bindKey:{win:"Ctrl-R",mac:"Cmd-R"},exec:function(k){f.updateTableViaMDX(k.getValue())}})};f.$on(d.Name+".event.refresh",function(j){f.refreshDataDebounced()});f.animateTableOut=function(){if(!f.directiveConfigurations.disableTableAnimation){e.find("div").each(function(k,j){if(angular.element(j).hasClass("tm1-ui-cv-table-wait")){if(_.isEmpty(angular.element(j).html())){angular.element(j).append(f.directiveConfigurations.tableAnimationText)}}});e.find("table").each(function(k,j){if(angular.element(j).hasClass("tm1-ui-cube-viewer-table")){angular.element(j).css("transition","");angular.element(j).css("opacity",0)}})}};f.$on("tm1UiTableVirtualScroll.event.start",function(j){f.animateTableOut()});f.animateTableBack=_.debounce(function(){e.find("table").each(function(k,j){e.find("div").each(function(m,l){if(angular.element(l).hasClass("tm1-ui-cv-table-wait")){angular.element(l).empty()}});if(angular.element(j).hasClass("tm1-ui-cube-viewer-table")){if(!f.directiveConfigurations.disableTableAnimation){angular.element(j).css("transition","opacity 0.5s")}angular.element(j).css("opacity",1)}})},600);f.$on("tm1UiTableVirtualScroll.event.finish",function(j){f.animateTableBack()});f.$on("tm1.event.refresh",function(j){f.refreshDataDebounced()});if(angular.isDefined(h.tm1UiClass)){h.$observe("tm1UiClass",function(j){f.directiveClasses=_.isEmpty(j)?"":j})}if(angular.isDefined(h.tm1View)){h.$observe("tm1View",function(j){if(!_.isEmpty(j)){f.viewConfiguration.view=j;f.viewConfigurationCopy.view=j;b.cubeViews(f.tm1Instance,f.tm1Cube).then(function(l){var k=false;if(l&&angular.isArray(l)&&l.length>0){_.forEach(l,function(m){if(!k&&_.toLower(m.Name)==_.toLower(j)&&m["@odata.type"].indexOf("NativeView")!=-1){k=true}});if(k||(f.directiveConfigurations.viewTypePriority!=f.constants.VIEW_TYPE_CANVAS)){b.cubeViewConvert(f.tm1Instance,f.tm1Cube,f.constants.VIEW_TYPE_NATIVE,f.constants.VIEW_TYPE_CANVAS,{view:f.viewConfiguration.view}).then(function(m){f.viewConfiguration=m;f.directiveConfigurations.ignoreViewChangesThisTime=true;f.refreshDataDebounced()})}else{b.cubeCanvasView(f.tm1Instance,f.tm1Cube,f.viewConfiguration.view).then(function(m){if(m.failed){if(m.statusCode==404){f.refreshViewList({forceRecalculate:true})}else{a.error(m);throw"Unknown error. Check logs."}}else{f.viewConfiguration=m;f.directiveConfigurations.ignoreViewChangesThisTime=true;f.refreshDataDebounced()}})}}})}})}if(angular.isDefined(h.tm1Mdx)){h.$observe("tm1Mdx",function(j){f.directiveConfigurations.autoRecalculate=false;f.directiveConfigurations.mdxMode=true;f.viewConfiguration.mdx=j})}if(angular.isDefined(h.tm1Options)){f.$watch("tm1Options",function(j){f.viewConfiguration=angular.merge({},f.viewConfiguration,j);f.viewConfigurationCopy=angular.merge({},f.viewConfigurationCopy,j);if(!_.isNil(j)){if(!_.isNil(j.autoRecalculate)&&_.isBoolean(j.autoRecalculate)){f.directiveConfigurations.autoRecalculate=j.autoRecalculate}if(!_.isNil(j.allowViewSave)&&_.isBoolean(j.allowViewSave)){f.directiveConfigurations.allowViewSave=j.allowViewSave}if(!_.isNil(j.allowSandboxOperation)&&_.isBoolean(j.allowSandboxOperation)){f.directiveConfigurations.allowSandboxOperation=j.allowSandboxOperation}if(!_.isNil(j.allowSandboxPublishChanges)&&_.isBoolean(j.allowSandboxPublishChanges)){f.directiveConfigurations.allowSandboxPublishChanges=j.allowSandboxPublishChanges}if(!_.isNil(j.allowSandboxCreateDelete)&&_.isBoolean(j.allowSandboxCreateDelete)){f.directiveConfigurations.allowSandboxCreateDelete=j.allowSandboxCreateDelete}if(!_.isNil(j.hideHierarchies)&&_.isBoolean(j.hideHierarchies)){f.directiveConfigurations.hideHierarchies=j.hideHierarchies}if(!_.isNil(j.hideHierarchies)&&_.isBoolean(j.hideTitle)){f.directiveConfigurations.hideTitle=j.hideTitle}if(!_.isNil(j.hideHierarchies)&&_.isBoolean(j.hideToolbar)){f.directiveConfigurations.hideToolbar=j.hideToolbar}if(!_.isNil(j.hideMdx)&&_.isBoolean(j.hideMdx)){f.directiveConfigurations.hideMdx=j.hideMdx}if(!_.isNil(j.expandHierarchyList)&&_.isBoolean(j.expandHierarchyList)){f.directiveConfigurations.expandHierarchyList=j.expandHierarchyList}if(!_.isNil(j.viewTypePriority)&&!_.isEmpty(j.viewTypePriority)){f.directiveConfigurations.viewTypePriority=j.viewTypePriority}if(!_.isNil(j.pageSize)&&!isNaN(j.pageSize)){f.directiveConfigurations.pageSize=_.toNumber(j.pageSize)}if(!_.isNil(j.pageSet)&&!isNaN(j.pageSet)){f.directiveConfigurations.pageSet=_.toNumber(j.pageSet)}if(!_.isNil(j.tableClass)){f.directiveConfigurations.tableClass=j.tableClass}if(!_.isNil(j.disableTableAnimation)&&_.isBoolean(j.disableTableAnimation)){f.directiveConfigurations.disableTableAnimation=j.disableTableAnimation}if(!_.isNil(j.tableAnimationText)){f.directiveConfigurations.tableAnimationText=j.tableAnimationText}if(!_.isNil(j.tableMode)&&!_.isEmpty(j.tableMode)){if(parseInt(j.tableMode)==f.constants.TABLE_MODE_ANALYSIS){f.directiveConfigurations.forcedTableMode=f.constants.TABLE_MODE_ANALYSIS;f.directiveConfigurations.tableMode=f.constants.TABLE_MODE_ANALYSIS;f.updateTemplate()}else{if(parseInt(j.tableMode)==f.constants.TABLE_MODE_EDIT){f.directiveConfigurations.forcedTableMode=f.constants.TABLE_MODE_EDIT;f.directiveConfigurations.tableMode=f.constants.TABLE_MODE_EDIT;f.updateTemplate()}else{if(parseInt(j.tableMode)==f.constants.TABLE_MODE_NO_PREFERENCE){f.directiveConfigurations.forcedTableMode=f.constants.TABLE_MODE_NO_PREFERENCE;f.updateTemplate()}else{f.directiveConfigurations.forcedTableMode=f.constants.TABLE_MODE_NO_PREFERENCE;a.warn("Unknown table mode found["+j.tableMode+"]. Resetting to no proference.")}}}}else{f.directiveConfigurations.forcedTableMode=f.constants.TABLE_MODE_NO_PREFERENCE}if(!_.isNil(j.forceSandboxName)&&!_.isEmpty(j.forceSandboxName)){f.directiveConfigurations.forceSandboxName=j.forceSandboxName;f.directiveConfigurations.allowSandboxCreateDelete=false;b.sandboxes(f.tm1Instance).then(function(l){var k=undefined;if(l){_.forEach(l,function(m){if(!k&&m.Name==j.forceSandboxName){k=m}})}if(k){f.activateSandbox(k)}else{b.sandboxCreate(f.tm1Instance,j.forceSandboxName).then(function(m){if(!_.isNil(m.success)&&m.success){f.activateSandbox({Name:j.forceSandboxName})}else{r.alert("There was an error creating <strong>"+sandboxName+"</strong>.").then(function(){});a.error(m)}})}})}if(!_.isNil(j.tableId)){f.directiveConfigurations.tableId=j.tableId}}if(f.directiveConfigurations.autoRecalculate){f.refreshDataDebounced()}},true)}b.applicationInstanceCapabilities(f.tm1Instance).then(function(j){f.log("Init");f.directiveConfigurations.isMDXViewSaveable=j.MDXView;f.updateTemplate();f.updateHierarchyViewerTemplate();f.refreshViewList();f.refreshSandboxList();f.refreshDataDebounced()})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmComment";d.Controller="Tm1UiDbrCmCommentCtrl";d.Template="assets/html/tm1-ui-dbr-cm-comment.html";c.directive(d.Name,["tm1UiSettings","$tm1Ui","$rootScope",function(b,a,f){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Cube:"=",tm1Elements:"=",tm1RefreshGroup:"@",tm1CommentCube:"=",tm1CommentElements:"=",tm1FormatHtmlButtons:"=",tm1ReadOnly:"=",tm1HasAnnotations:"=",tm1ParentDirective:"@",tm1Debug:"=",tm1UiClass:"@"},link:function(l,e,o,m,n){l.directiveID=a.helperGenerateUUID();l.readOnly=false;l.useAnnotations=true;l.annotations=[];l.annotationSelected="";l.showAnnotationViewer=true;l.comment=l.tm1CommentValue;l.debug=false;l.log=function(g){l.logObj(g,{message:g})};l.logObj=function(h,g){if(l.debug){f.$broadcast(b.frameworkLogID,{id:l.directiveID,name:d.Name,message:h,object:g})}};if(angular.isDefined(o.tm1Debug)&&l.tm1Debug){l.debug=true}if(angular.isDefined(o.tm1ReadOnly)&&l.tm1ReadOnly){l.readOnly=true}if(angular.isDefined(o.tm1CommentElements)&&!_.isEmpty(l.tm1CommentElements)){l.useAnnotations=false}l.setAnnotationView=function(g){l.annotationSelected=g.commentValue;l.showAnnotationViewer=true};l.hideViewer=function(){l.showAnnotationViewer=false};l.updateCommentBox=function(){if(angular.isUndefined(l.comment)){l.comment=""}l.comment+=l.annotationSelected};if(l.useAnnotations){m.refreshCubeAnnotations()}else{m.refreshCubeComment()}l.saveComments=function(){if(!_.isEqual(l.comment,l.tm1CommentValue)){if(!l.useAnnotations){m.saveCubeComment()}else{m.saveCubeAnnotations()}}};l.dismissModal=function(){l.$destroy()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","tm1UiSettings","$log","$rootScope",function(k,j,l,b,m){var a=this;a.refreshParent=function(){m.$broadcast(k.tm1ParentDirective+".event.refresh",{tm1RefreshGroup:k.tm1RefreshGroup,updateTimestamp:_.now()})};a.refreshCubeComment=function(){k.comment="";j.cellGets([{instance:k.tm1Instance,cube:k.tm1CommentCube,cubeElements:j.helperConvertElementsToArray(k.tm1CommentElements)}]).then(function(e){k.comment=e[0].Value})};a.refreshCubeAnnotations=function(){j.cellAnnotationGet(k.tm1Instance,k.tm1Cube,j.helperConvertElementsToArray(k.tm1Elements)).then(function(e){k.annotations=e})};a.saveCubeComment=function(){var e={id:k.directiveID,instance:k.tm1Instance,cube:k.tm1CommentCube,cubeElements:j.helperConvertElementsToArray(k.tm1CommentElements),value:k.comment};j.cellPuts([e]).then(function(f){if(f.success){a.refreshParent()}else{k.logObj("comment update error",success.data);b.error("Error Saving Comment");b.error(success)}k.dismissModal()})};a.saveCubeAnnotations=function(){k.log("Saving Comment: "+k.annotatedMessage);j.cellAnnotationPut(k.comment,k.tm1Instance,k.tm1Cube,j.helperConvertElementsToArray(k.tm1Elements)).then(function(e){if(e.success){k.isAnnotated=true;a.refreshParent()}else{b.error("Error Saving Annotations");b.error(success)}k.dismissModal()})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmDrill";d.Controller="Tm1UiDbrCmDrillCtrl";d.Template="assets/html/tm1-ui-dbr-cm-drill.html";c.directive(d.Name,["tm1UiSettings","$rootScope","$tm1Ui","screenSize",function(g,h,b,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Cube:"=",tm1Elements:"=",tm1Value:"=",tm1DrillData:"=",tm1Debug:"=",tm1UiClass:"@"},link:function(f,e,o,m,n){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.drills=[];f.hasDrillModel=false;f.debug=false;f.screenSize=a;f.pageArray=[];f.maxRowsTotal=0;f.searchValue="";f.activePage=0;f.currentPage=0;f.pageSize=5;f.hasDrillsSelected=false;f.pageSizeOptions=[5,10,20,50];f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isDefined(o.tm1DrillData)){f.hasDrillModel=true}f.setPageSize=function(j){f.pageSize=j;f.updatePageArray()};f.getNextPage=function(){f.activePage++;return f.currentPage+=f.pageSize};f.getPreviousPage=function(){f.activePage--;return f.currentPage-=f.pageSize};f.getCurrentPage=function(){return f.currentPage};f.gotoPage=function(j){f.activePage=j;f.currentPage=(f.pageSize*j)-f.pageSize};f.updatePageArray=function(){if(f.maxRowsTotal>0){f.pageArray.length=0;for(var j=1;j<=f.maxRowsTotal;j++){if(j==1){f.pageArray.push(j)}else{if((j%f.pageSize)==0){f.pageArray.push((j/f.pageSize)+1)}}}}};f.updateSearchValue=function(j){f.searchValue=j};f.updateDrillTransactions=function(j){if(j.isSelected){_.forEach(f.drills,function(k){if(k.name!=j.name){k.isSelected=false}});b.cellGetDrillNameTransactions(f.tm1Instance,f.tm1Cube,b.helperConvertElementsToArray(f.tm1Elements),j.name).then(function(k){if(j.type=="RelationalDrillthrough"){j.transactions=k;if(angular.isDefined(k.value)){j.rowsTotal=k.value.length}}else{if(j.type=="CubeDrillthrough"){b.addTableData(k);j.transactions=k;if(k.Axes&&k.Axes.length>1&&angular.isDefined(k.Axes[1].Cardinality)){j.rowsTotal=k.Axes[1].Cardinality}}}if(f.hasDrillModel){f.tm1DrillData[j.name].transactions=k}f.maxRowsTotal=j.rowsTotal>f.maxRowsTotal?j.rowsTotal:f.maxRowsTotal;f.updatePageArray();if(f.activePage==0){f.activePage=1}})}else{j.transactions=undefined}f.hasDrillsSelected=false;_.forEach(f.drills,function(k){if(k.isSelected){f.hasDrillsSelected=true}})};if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(k,j){f.directiveClasses=_.isEmpty(k)?"":k})}m.refreshData()},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","$log",function(h,g,b){var a=this;a.refreshData=function(){g.cellGetDrillNames(h.tm1Instance,h.tm1Cube,g.helperConvertElementsToArray(h.tm1Elements)).then(function(e){h.drills.length=0;if(h.hasDrillModel){h.tm1DrillData={}}if(e&&e.length>0){_.forEach(e,function(f){h.drills.push({name:f.name,type:f.type,isSelected:false});if(h.hasDrillModel){h.tm1DrillData[f.name]={type:f.type}}})}})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmReference";d.Controller="Tm1UiDbrCmReferenceCtrl";d.Template="assets/html/tm1-ui-dbr-cm-reference.html";c.directive(d.Name,["tm1UiSettings","$rootScope","$tm1Ui",function(b,f,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1ReferenceConfig:"&"},link:function(l,e,o,m,n){l.directiveID=a.helperGenerateUUID();l.directiveClasses="";l.dimensionElements=[];l.commentDimensionElements=[];l.tm1Instance=l.tm1ReferenceConfig().tm1Instance;l.tm1Cube=l.tm1ReferenceConfig().tm1Cube;l.tm1Elements=l.tm1ReferenceConfig().tm1Elements;l.tm1Value=l.tm1ReferenceConfig().tm1Value;l.tm1PickList=l.tm1ReferenceConfig().tm1PickList;l.tm1CommentCube=l.tm1ReferenceConfig().tm1CommentCube;l.tm1CommentElements=l.tm1ReferenceConfig().tm1CommentElements;l.tm1CommentValue=l.tm1ReferenceConfig().tm1CommentValue;l.tm1Debug=l.tm1ReferenceConfig().tm1Debug;l.tm1UiClass=l.tm1ReferenceConfig().tm1UiClass;l.debug=false;l.log=function(g){l.logObj(g,{message:g})};l.logObj=function(h,g){if(l.debug){f.$broadcast(b.frameworkLogID,{id:l.directiveID,name:d.Name,message:h,object:g})}};if(l.tm1Debug){l.debug=true}l.refreshData=function(){if(l.tm1Cube){a.cubeDimensions(l.tm1Instance,l.tm1Cube).then(function(j){l.dimensionElements=[];var g=0;var h={};var k=a.helperConvertElementsToArray(l.tm1Elements);_.forEach(j,function(q){h={dimension:q};if(k&&g<k.length){h.element=k[g]}l.dimensionElements.push(h);g++})})}if(l.tm1CommentCube){a.cubeDimensions(l.tm1Instance,l.tm1CommentCube).then(function(j){l.commentDimensionElements=[];var g=0;var h={};var k=a.helperConvertElementsToArray(l.tm1CommentElements);_.forEach(j,function(q){h={dimension:q};if(k&&g<k.length){h.element=k[g]}l.commentDimensionElements.push(h);g++})})}};l.refreshData()}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmSpread";d.Controller="Tm1UiDbrCmSpreadCtrl";d.Template="assets/html/tm1-ui-dbr-cm-spread.html";c.directive(d.Name,["$filter","tm1UiSettings","$tm1Ui","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1SpreadAction:"=",tm1Debug:"=",tm1UiClass:"@"},link:function(f,e,o,m,n){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.tm1SpreadAction.customSpreadCommand="";f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}f.apply=function(){if(!_.isEmpty(f.tm1SpreadAction.action)){var j="";switch(f.tm1SpreadAction.action){case"clear":f.confirmClear=true;break;case"proportional":f.$parent.entry.spreadValue="p > "+f.tm1SpreadAction.spreadValue;f.$parent.updateData();f.$destroy();break;case"custom":f.$parent.entry.spreadValue=f.tm1SpreadAction.customSpreadCommand;f.$parent.updateData();f.$destroy();break;default:$log.error("Unsupported spread command: "+f.tm1SpreadAction.action)}}};f.confirm=function(){f.$parent.entry.spreadValue="c";f.$parent.updateData();f.$destroy()};if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(k,j){f.directiveClasses=_.isEmpty(k)?"":k})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$log",function(j,a,k,h){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmTraceCalculation";d.Controller="Tm1UiDbrCmTraceCalculationCtrl";d.Template="assets/html/tm1-ui-dbr-cm-trace-calculation.html";c.directive(d.Name,["tm1UiSettings","$rootScope","$tm1Ui","$translate","$ngBootbox","$compile",function(l,m,k,b,a,j){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Options:"&"},link:function(e,o,h,f,g){e.directiveID=k.helperGenerateUUID();e.directiveClasses="";e.lineCharLimit=50;e.tm1Instance=e.tm1Options().tm1Instance;e.tm1Cube=e.tm1Options().tm1Cube;e.tm1Elements=e.tm1Options().tm1Elements;e.isConsolidated=e.tm1Options().isConsolidated;e.options={chart:{type:"sunburstChart",height:450,color:d3.scale.category20c(),duration:250,sunburst:{mode:"value",width:600,height:600},tooltip:{valueFormatter:function(n){return k.formatNumber(n)}}}};e.values={};e.lists={};e.constants={};e.constants.MODE_TABLE1="table1";e.constants.MODE_CHART1="chart1";e.constants.CELLTYPE_CONSOLIDATION="consolidation";e.constants.CELLTYPE_RULE="rule";e.values.displayMode=e.constants.MODE_TABLE1;e.values.enableChart=false;e.lists.elements=k.helperConvertElementsToArray(e.tm1Elements);e.getFaNodeIcon=function(q){var n="fa-angle-right";if(_.eq(q.typeLC,e.constants.CELLTYPE_CONSOLIDATION)){n=q.expanded?"fa-minus-square-o":"fa-plus-square-o"}else{if(_.eq(q.typeLC,e.constants.CELLTYPE_RULE)){n="fa-calculator"}}return n};e.getPrerequisiteRules=function(n){var s=[];if(n.Statements&&n.Statements.length>0){var r=n.Statements.length;_.each(n.Statements,function(p,q){if(q<(r-1)){s.push(p)}})}return s};e.extractElementNames=function(n){var r=[];var s="";_.each(n,function(q){var u=false;var p=q.UniqueName.split("].[");if(p.length==3){if(!_.eq(p[0],"["+p[1])){if(!_.isEmpty(s)&&_.eq(s,p[0])){r[r.length-1]+=" && "+p[1]+"::"+q.Name}else{r.push(p[1]+"::"+q.Name)}u=true}s=p[0]}if(!u){r.push(q.Name)}});return r};e.createElementsDisplay=function(t,u){var n="";var s=e.extractElementNames(t.Tuple);if(!(u&&u.referenceOnly)){if(!(u&&u.rulesOnly)){n=t.Type+": "+s.join(",")}if(t.Statements&&t.Statements.length>0){_.each(t.Statements,function(p,q){if(q==t.Statements.length-1){if(e.values.enableChart){if(u&&u.rulesOnly){n+="<br />"+p}else{n+="<br /><code>"+p+"</code>"}}else{n+=p}}})}}else{n=s.join(",")}return n};e.addChildren=function(n,q){n.children=[];_.each(q,function(s){var p={};p.name=e.createElementsDisplay(s);if(s.Cube){p.cube=s.Cube.Name}p.cubeIsDiff=!_.eq(p.cube,e.tm1Cube);p.elements=e.extractElementNames(s.Tuple);p.level=n.level+1;p.type=s.Type;p.typeLC=_.toLower(s.Type);p.reference=e.createElementsDisplay(s,{referenceOnly:true});p.value=s.Value;p.expanded=false;p.hasChildren=false;if(s.Components&&s.Components.length>0){e.addChildren(p,s.Components);p.hasChildren=true}else{p.size=s.Value}if(_.eq(p.typeLC,e.constants.CELLTYPE_RULE)){p.rule=e.createElementsDisplay(s,{rulesOnly:true});p.prereqRules=e.getPrerequisiteRules(s);p.prereqRulesIsExpanded=false}n.children.push(p)})};e.populateAdditionalInfo=function(s,r){var n={};n.name=e.createElementsDisplay(r);n.cube=r.Cube.Name;n.cubeIsDiff=!_.eq(n.cube,e.tm1Cube);n.elements=e.extractElementNames(r.Tuple);n.level=1;n.type=r.Type;n.typeLC=_.toLower(r.Type);n.value=r.Value;n.expanded=false;n.hasChildren=false;if(r.Components.length>0){n.reference=e.createElementsDisplay(r,{referenceOnly:true});e.addChildren(n,r.Components);n.hasChildren=true}else{n.reference=e.createElementsDisplay(r,{referenceOnly:true});r.reference=n.reference}if(_.eq(n.typeLC,e.constants.CELLTYPE_RULE)){n.rule=e.createElementsDisplay(r,{rulesOnly:true});n.prereqRules=e.getPrerequisiteRules(r);n.prereqRulesIsExpanded=false}s.push(n)};e.initTraceCalculations=function(n){k.cellTraceCalculations(e.tm1Instance,e.tm1Cube,n).then(function(q){e.values.calculationComponents=q;e.showGraph=false;e.showTable=false;e.data=[];e.populateAdditionalInfo(e.data,e.values.calculationComponents);if(q.Components.length>0){setTimeout(function(){e.showGraph=true},200)}else{e.values.tableRowSpan=q.Statements.length;e.showTable=true}})};e.showTraceFeeders=function(){a.setDefaults({size:"large"});e.tm1ContextOptions={};e.tm1ContextOptions.tm1Instance=e.tm1Instance;e.tm1ContextOptions.tm1Cube=e.tm1Cube;e.tm1ContextOptions.tm1Elements=e.tm1Elements;e.tm1ContextOptions.isConsolidated=e.isConsolidated;var n=j('<tm1-ui-dbr-cm-trace-feeder tm1-options="tm1ContextOptions"></tm1-ui-dbr-cm-trace-feeder>');var q=e.$new();a.alert(n(q)).then(function(){q.$destroy()})};e.refreshDisplay=function(n){if(_.eq(n,e.constants.MODE_TABLE1)){k.cellTraceCalculations(e.tm1Instance,e.tm1Cube,e.lists.elements,{traceCalculationLevel:1}).then(function(q){e.lists.calculationComponent=q;e.lists.tableData=[];e.populateAdditionalInfo(e.lists.tableData,e.lists.calculationComponent)})}else{if(_.isEmpty(e.data)){e.initTraceCalculations(e.lists.elements)}}};e.expandOrCollapse=function(n){if(!n.expanded){var q=false;_.each(n.children,function(p){if(!_.isEmpty(p.type)){q=true;return false}});if(n.hasChildren&&!q){k.cellTraceCalculations(e.tm1Instance,n.cube,n.elements,{traceCalculationLevel:2}).then(function(p){e.addChildren(n,p.Components)})}}n.expanded=!n.expanded};e.refreshDisplay(e.constants.MODE_TABLE1)}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrCmTraceFeeder";d.Controller="Tm1UiDbrCmTraceFeederCtrl";d.Template="assets/html/tm1-ui-dbr-cm-trace-feeder.html";c.directive(d.Name,["tm1UiSettings","$rootScope","$tm1Ui","$translate",function(g,h,b,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Options:"&"},link:function(f,e,o,m,n){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.lineCharLimit=50;f.tm1Instance=f.tm1Options().tm1Instance;f.tm1Cube=f.tm1Options().tm1Cube;f.tm1Elements=f.tm1Options().tm1Elements;f.isConsolidated=f.tm1Options().isConsolidated;f.values={};f.lists={};f.extractReference=function(k){var j="";_.forEach(k,function(l){j+=","+l.Name});j=j.substring(1);return j};f.refreshData=function(){var j=b.helperConvertElementsToArray(f.tm1Elements);b.cellCheckFeeders(f.tm1Instance,f.tm1Cube,j).then(function(k){var r=parseInt(Math.sqrt(k.length));f.lists.fedCellDescriptorRows=[];var s=[];var l=1;_.forEach(k,function(p){if(l>r){f.lists.fedCellDescriptorRows.push(_.cloneDeep(s));s.length=0;l=1}p.reference=f.extractReference(p.Tuple);s.push(p);l++});if(s.length>0){f.lists.fedCellDescriptorRows.push(s)}});if(!f.isConsolidated){b.cellTraceFeeders(f.tm1Instance,f.tm1Cube,j).then(function(k){f.lists.feederTrace=k;_.forEach(f.lists.feederTrace.FedCells,function(l){l.reference=f.extractReference(l.Tuple)})})}};f.refreshData()}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrDate";d.Controller="Tm1UiDbrDateCtrl";d.Template="assets/html/tm1-ui-dbr-date.html";c.directive(d.Name,["$filter","$tm1Ui","$tm1UiDbr",function(a,f,b){return{restrict:"EA",templateUrl:d.Template,transclude:false,replace:true,scope:{name:"@",id:"@",tm1UiClass:"@",tm1Instance:"@",tm1ReadOnly:"=",tm1CommentReadOnly:"=",tm1Cube:"@",tm1Elements:"@",tm1CommentCube:"@",tm1CommentElements:"@",tm1CommentFormatHtmlButtons:"=",tm1Placeholder:"@",tm1DateOption:"=",tm1HideReference:"=",tm1HideComment:"=",tm1HideSpread:"=",tm1HideDrill:"=",tm1BeforeUpdate:"&",tm1Api:"=",tm1Debug:"=",tm1DrillModel:"=",ngModel:"="},link:function(l,e,o,m,n){b.init(l);b.validate(l,o);l.isDateFormatted=true;if(angular.isUndefined(l.dateOption)){l.dateOption={format:"yyyy-mm-dd"}}b.initializeHelpers(l);b.initializeApi(l);l.updateData=function(){b.eventUpdateData(l,e)};l.onChange=function(){l.validationMessage=""};l.showStatus=function(){var g=a("filter")(l.entry.picklist,{value:l.entry.value});return(l.entry.value&&g.length)?g[0].text:"Not set"};l.showContext=function(g){b.eventOnClickForContext(l,g)};l.showReference=function(){b.showContextReference(l)};l.showSpread=function(){b.showContextSpread(l)};l.showDrill=function(){b.showContextDrill(l)};l.showComment=function(){b.showContextComment(l)};b.initializeEventReceivers(l);b.initializeWatchers(l,o);if(b.hasCompleteParams(l)){b.refreshData(l)}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrHidden";c.directive(d.Name,["$tm1UiDbr",function(a){return{restrict:"E",template:'<span class="tm1-ui-dbr-hidden" ng-hide="true"></span>',transclude:false,replace:true,scope:{tm1Instance:"@",tm1Cube:"@",tm1Elements:"@",tm1RefreshGroup:"@",tm1Sandbox:"@",tm1Debug:"&",ngModel:"=?"},link:function(j,b,m,k,l){a.init(j);a.validate(j,m);j.tm1UiDbrHiddenOptions={isValueOnly:true};a.initializeEventReceivers(j);a.initializeWatchers(j,m);if(a.hasCompleteParams(j)){a.refreshData(j)}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrImage";d.Template="assets/html/tm1-ui-dbr-image.html";c.directive(d.Name,["$filter","$tm1Ui","$tm1UiDbr","$templateCache",function(a,g,b,h){return{restrict:"EA",template:function(e,f){return h.get("assets/html/tm1-ui-dbr-tpl-root.html")},transclude:false,replace:true,scope:{name:"@",id:"@",tm1UiClass:"@",tm1Instance:"@",tm1Cube:"@",tm1Elements:"@",tm1Debug:"&",tm1Alt:"@",tm1RefreshGroup:"@",tm1Sandbox:"@",tm1SandboxClass:"@",ngModel:"=?"},link:function(f,e,o,m,n){f.baseClass="tm1-ui-dbr-image";b.init(f);f.isImageDBR=true;f.hideContextMenu=true;f.imageAlt="Image Not Found";if(angular.isDefined(o.tm1Alt)){f.imageAlt=f.tm1Alt}b.validate(f,o);b.initializeHelpers(f);b.initTemplate(f,e,o);b.updateTemplateWithAttributes(f,e,o);b.initializeEventReceivers(f);b.initializeWatchers(f,o,e);if(b.hasCompleteParams(f)){b.refreshData(f)}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbrReadOnly";d.Template="assets/html/tm1-ui-dbr-read-only.html";c.directive(d.Name,["$tm1UiDbr","$templateCache",function(a,b){return{restrict:"E",template:function(g,h){return b.get("assets/html/tm1-ui-dbr-tpl-root.html")},transclude:false,replace:true,scope:{id:"@",name:"@",tm1UiClass:"@",tm1Instance:"@",tm1CommentReadOnly:"&",tm1Cube:"@",tm1Elements:"@",tm1CommentCube:"@",tm1CommentElements:"@",tm1CommentFormatHtmlButtons:"&",tm1RefreshGroup:"@",tm1Sandbox:"@",tm1SandboxClass:"@",tm1HideReference:"&",tm1HideComment:"&",tm1HideSpread:"&",tm1HideDrill:"&",tm1HideTraceCalculation:"&",tm1HideContextMenu:"&",tm1AddContextMenu:"&",tm1DataDecimal:"@",tm1DataScale:"@",tm1FormatPercentage:"&",tm1FormatParenthesis:"&",tm1Debug:"&",tm1AccountingSettingsOverride:"&",tm1DrillModel:"=?",tm1Options:"=?",ngModel:"=?"},link:function(l,k,o,m,n){l.baseClass="tm1-ui-dbr-read-only";a.init(l);a.validate(l,o);l.isForcedReadOnly=true;l.tm1UiDbrReadOnlyOptions={isValueOnly:true};a.initializeHelpers(l);a.initTemplate(l,k,o);a.updateTemplateWithAttributes(l,k,o);l.showContext=function(e){a.eventOnClickForContext(l,e)};l.showReference=function(){a.showContextReference(l)};l.showSpread=function(){a.showContextSpread(l)};l.showDrill=function(){a.showContextDrill(l)};l.showComment=function(){a.showContextComment(l)};l.showTraceCalculation=function(){a.showContextTraceCalculation(l)};a.initializeEventReceivers(l);a.initializeWatchers(l,o,k);if(a.hasCompleteParams(l)){a.refreshData(l)}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbr";d.Controller="Tm1UiDbrCtrl";d.Template="assets/html/tm1-ui-dbr.html";c.directive(d.Name,["$filter","$tm1Ui","$tm1UiDbr","$templateCache",function(a,g,b,h){return{restrict:"EA",template:function(e,f){return h.get("assets/html/tm1-ui-dbr-tpl-root.html")},transclude:false,replace:true,scope:{name:"@",id:"@",tm1UiClass:"@",tm1Instance:"@",tm1ReadOnly:"=?",tm1CommentReadOnly:"&",tm1DataDecimal:"@",tm1DataScale:"@",tm1PicklistDisableSearch:"&",tm1PicklistRadio:"@",tm1MultiLine:"@",tm1RptViewModel:"&",tm1RptRowCell:"&",tm1Cube:"@",tm1Elements:"@",tm1CommentCube:"@",tm1CommentElements:"@",tm1CommentFormatHtmlButtons:"&",tm1DefaultEmpty:"@",tm1Placeholder:"@",tm1FormatPercentage:"&",tm1FormatParenthesis:"&",tm1DateOption:"&",tm1EnableRtf:"&",tm1FormatHtml:"&",tm1FormatHtmlPopup:"&",tm1FormatHtmlButtons:"&",tm1FormatHtmlButtonEnabled:"&",tm1FormatHtmlButtonText:"@",tm1FormatHtmlButtonClass:"@",tm1Validate:"@",tm1ValidateMessage:"@",tm1HideReference:"&",tm1HideComment:"&",tm1HideSpread:"&",tm1HideDrill:"&",tm1HideTraceCalculation:"&",tm1HideContextMenu:"&",tm1AddContextMenu:"&",tm1BeforeUpdate:"&",tm1ConsolInput:"&",tm1ConsolInputSpreadMethod:"@",tm1OnLoad:"&",tm1OnChange:"&",tm1Change:"&",tm1Api:"=?",tm1Options:"=?",tm1AccountingSettingsOverride:"&",tm1Debug:"&",tm1DrillModel:"=?",tm1RefreshGroup:"@",tm1Sandbox:"@",tm1SandboxClass:"@",ngModel:"=?"},link:function(f,e,o,m,n){f.baseClass="tm1-ui-dbr";b.init(f);b.initWithRptView(f,o);b.validate(f,o);b.initializeHelpers(f);b.initializeApi(f);b.initTemplate(f,e,o);b.updateTemplateWithAttributes(f,e,o);f.onInputFocus=function(){f.isInputActive=true;f.updateTimestamp=_.now();f.checkDatePicker()};f.onInputBlur=function(){f.isInputActive=false;b.eventUpdateData(f,e)};f.updateData=function(){b.eventUpdateData(f,e)};f.paste=function(j){b.eventPaste(f,j)};f.onChange=function(){f.validationMessage=""};f.onKeyDown=function(j){b.eventKeyDown(f,j)};f.showStatus=function(){var j=a("filter")(f.entry.picklist,{value:f.entry.value});return(f.entry.value&&j.length)?j[0].text:"Not set"};f.showContext=function(j){if(j==9){b.updatePicklistValues(f)}b.eventOnClickForContext(f,j)};f.showReference=function(){b.showContextReference(f)};f.showSpread=function(){b.showContextSpread(f)};f.showDrill=function(){b.showContextDrill(f)};f.showComment=function(){b.showContextComment(f)};f.showTraceCalculation=function(){b.showContextTraceCalculation(f)};b.initializeEventReceivers(f);b.initializeWatchers(f,o,e);if(b.hasCompleteParams(f)){b.refreshData(f)}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiDbra";d.Controller="Tm1UiDbraCtrl";d.Template="assets/html/tm1-ui-dbra.html";c.directive(d.Name,["$filter","tm1UiSettings","$log","$tm1Ui","$rootScope","$timeout","$ngBootbox",function(b,n,k,m,o,l,a){return{restrict:"E",templateUrl:d.Template,transclude:false,priority:10,replace:true,scope:{name:"@",id:"@","class":"@",tm1Instance:"@",tm1ReadOnly:"=?",tm1DataDecimal:"@",tm1Dimension:"@",tm1Element:"@",tm1Attribute:"@",tm1UiClass:"@",tm1Placeholder:"@",tm1Validate:"@",tm1ValidateMessage:"@",tm1HideReference:"=?",tm1OnLoad:"&",tm1OnChange:"&",tm1Change:"&",tm1Api:"=?",tm1Debug:"=?",ngModel:"=?"},link:function(q,h,g,e,f){q.formatNumberFlag=false;q.entry={value:"-"};q.DEFAULT_ERROR_DISPLAY="#VALUE!";q.isReadOnly=false;q.currentEntryValue="";q.directiveID=m.helperGenerateUUID();q.tm1Cube="";q.tm1Elements="";q.emptyDisplay="";q.directiveClasses="";q.directiveClassesPrior="";q.hasModel=false;q.hasValidation=false;q.hasValidationMessage=false;q.validate="";q.validateMessage="Not a valid entry. Please Check.";q.KEY_VALUE="@Value";q.KEY_REGEX="@RegEx";q.errorMessage="";q.hideReference=false;q.contextTimeout=5;q.hasApi=false;q.hasOnLoadFunction=false;q.hasOnChangeFunction=false;q.hasChangeFunction=false;q.skipOnChangeOnce=true;q.debug=false;q.log=function(p){q.logObj(p,{message:p})};q.logObj=function(s,p){if(q.debug){o.$broadcast(n.frameworkLogID,{id:q.directiveID,name:d.Name,message:s,object:p})}};if(angular.isDefined(g.tm1Debug)&&q.tm1Debug){q.debug=true}if(angular.isDefined(g.tm1DataDecimal)){q.formatNumberFlag=true}if(angular.isUndefined(g.tm1Instance)){throw"tm1-instance is a required attribute."}if(angular.isUndefined(g.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(angular.isUndefined(g.tm1Element)){throw"tm1-element is a required attribute."}if(angular.isUndefined(g.tm1Attribute)){throw"tm1-attribute is a required attribute."}if(angular.isDefined(g.ngModel)){q.hasModel=true}if((_.isEmpty(q.tm1Dimension)||_.isEmpty(q.tm1Element)||_.isEmpty(q.tm1Attribute))){q.isReadOnly=true}q.tm1Dimension=_.isEmpty(q.tm1Dimension)?"":q.tm1Dimension;q.tm1Element=_.isEmpty(q.tm1Element)?"":q.tm1Element;q.tm1Attribute=_.isEmpty(q.tm1Attribute)?"":q.tm1Attribute;if(angular.isDefined(g.tm1Placeholder)&&!_.isEmpty(q.tm1Placeholder)){q.emptyDisplay=q.tm1Placeholder}if(angular.isDefined(g.tm1UiClass)&&!_.isEmpty(q.tm1UiClass)){q.directiveClasses=q.tm1UiClass}if(angular.isDefined(g.tm1Validate)){q.hasValidation=true}if(angular.isDefined(g.tm1HideReference)&&q.tm1HideReference){q.hideReference=true}if(angular.isDefined(g.tm1Api)){q.hasApi=true}if(angular.isDefined(g.tm1Change)){q.hasChangeFunction=true}if(angular.isDefined(g.tm1OnLoad)){q.hasOnLoadFunction=true}if(angular.isDefined(g.tm1OnChange)){q.hasOnChangeFunction=true}if(q.hasApi){var j={setContextTimeout:function(p){try{q.contextTimeout=parseInt(p)}catch(s){}}};q.tm1Api=angular.merge({},q.tm1Api,j)}q.evaluateIfReadOnly=function(){q.isReadOnly=false;if(q.tm1ReadOnly!=undefined){q.isReadOnly=q.tm1ReadOnly}};q.formatData=function(p){if(q.formatNumberFlag){p=b("number")(p,q.tm1DataDecimal)}return p};q.getReadonlyData=function(p){return q.isReadOnly?q.formatData(p):""};q.hasCompleteParams=function(){if(_.isEmpty(q.tm1Dimension)||_.isEmpty(q.tm1Element)||_.isEmpty(q.tm1Attribute)){e.dbraParams="";return false}q.evaluateIfReadOnly();q.tm1Cube="}ElementAttributes_"+q.tm1Dimension;q.tm1Elements=q.tm1Element+","+q.tm1Attribute;return true};q.isContextApplicable=function(){var p=false;if(!q.hideReference){p=true}return p};q.showContext=function(p){q.log("showContext("+p+")");if(q.isContextApplicable()){q.hasContext=true;if(q.timer){l.cancel(q.timer);q.timer=null}q.log("showContext() contextTimeout: "+q.contextTimeout);q.timer=l(function(){q.hasContext=false},q.contextTimeout*1000)}};q.showReference=function(){var p="<h4><label>Dimension</label>: "+q.tm1Dimension+"</h4><div><label>Element</label>: "+q.tm1Element+"</div><div><label>Attribute</label>: "+q.tm1Attribute+"</div><div><label>Value</label>: "+q.currentEntryValue+"</div>";a.alert(p)};q.updateData=function(){if(q.currentEntryValue!=q.entry.value){q.currentEntryValue=q.entry.value;e.updateData(q.entry.value)}};q.$on(d.Name+".event.refresh",function(p,s){if(angular.isDefined(s)&&angular.isDefined(s.source)&&s.source==q.directiveID){}else{e.refreshData()}});q.$on("tm1.event.refresh",function(p){if(q.hasCompleteParams()){e.refreshData()}});q.$on(n.batcherResponseID,function(p,s){if(!_.isEmpty(s)){if(s[q.directiveID]){e.updateDirectiveState(s[q.directiveID])}}});g.$observe("tm1Dimension",function(p){if(q.hasCompleteParams()){e.refreshData()}});g.$observe("tm1Element",function(p){if(q.hasCompleteParams()){e.refreshData()}});g.$observe("tm1Attribute",function(p){if(q.hasCompleteParams()){e.refreshData()}});if(q.tm1ReadOnly!=undefined){q.$watch("tm1ReadOnly",function(p,s){if(p!=s){if(q.hasCompleteParams()){e.refreshData()}}})}if(angular.isDefined(g.tm1UiClass)){g.$observe("tm1UiClass",function(p){h.removeClass(q.directiveClassesPrior);q.directiveClasses=_.isEmpty(p)?"":p;q.directiveClassesPrior=q.directiveClasses;h.addClass(q.directiveClasses)})}if(angular.isDefined(g.tm1Validate)){q.$watch("tm1Validate",function(p,s){if(!_.isEmpty(p)){if(p.indexOf(q.KEY_VALUE)!=-1&&p.indexOf(q.KEY_REGEX)!=-1){q.validationMessage=q.KEY_VALUE+" or "+q.KEY_REGEX+" must be defined, but not BOTH. Please Check tm1-validate: "+p}else{if(p.indexOf(q.KEY_VALUE)==-1&&p.indexOf(q.KEY_REGEX)==-1){q.validationMessage="Either "+q.KEY_VALUE+" or "+q.KEY_REGEX+" must be defined. Please Check tm1-validate: "+p}}}});if(angular.isDefined(g.tm1ValidateMessage)){q.hasValidationMessage=true;q.$watch("tm1ValidateMessage",function(p,s){q.validateMessage=_.isEmpty(p)?"Not a valid entry. Please Check.":p})}}if(q.hasCompleteParams()){e.refreshData()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","tm1UiSettings","$log","$rootScope","$timeout","$tm1Ui",function(m,n,b,o,k,l){var a=this;a.dbraParams="";a.odata_cell={};a.refreshData=_.debounce(function(){var e={id:m.id,dbr:{id:m.directiveID,instance:m.tm1Instance,cube:m.tm1Cube,cubeElements:l.helperConvertElementsToArray(m.tm1Elements),isValueOnly:false}};m.$emit(n.batcherRequestID,e)},100);a.updateDirectiveState=function(g){m.logObj("Received Response ["+m.tm1Dimension+"]["+m.tm1Element+"]["+m.tm1Attribute+"]",g);m.validationMessage="";if(l.helperIsStatusSuccessful(g.statusCode)){a.odata_cell=g;a.odata_cell.ID=g.odataId;m.entry.value=a.odata_cell.Value;if(angular.isDefined(a.odata_cell.isReadOnly)&&a.odata_cell.isReadOnly){m.isReadOnly=true}if(m.hasModel){if(a.odata_cell.Value){m.ngModel=a.odata_cell.Value}else{if(angular.isUndefined(a.odata_cell.Value)){m.ngModel=0}else{m.ngModel=""}}}if(m.hasOnLoadFunction){m.hasOnLoadFunction=false;m.tm1OnLoad({data:angular.isDefined(m.ngModel)?m.ngModel:m.entry.value})}if(m.hasOnChangeFunction){if(m.skipOnChangeOnce){m.skipOnChangeOnce=false}else{setTimeout(function(){m.tm1OnChange({data:angular.isDefined(m.ngModel)?m.ngModel:m.entry.value})})}}if(m.hasChangeFunction){setTimeout(function(){m.tm1Change({data:angular.isDefined(m.ngModel)?m.ngModel:m.entry.value})})}}else{m.entry.value=m.DEFAULT_ERROR_DISPLAY;b.error("dbra(ERROR) - instance: "+m.tm1Instance+", dimension: "+m.tm1Dimension+", element: "+m.tm1Element+", attribute: "+m.tm1Attribute);b.error(g);m.errorMessage="(StatusCode: "+g.statusCode+")";if(angular.isDefined(g.errorMessage)){try{var f=angular.fromJson(g.errorMessage);b.debug(f);m.errorMessage=f.error.message+" "+m.errorMessage;m.validationMessage=m.errorMessage}catch(e){}}}m.currentEntryValue=m.entry.value};a.updateData=function(e){m.validationMessage=null;if(m.hasValidation){var f=false;if(m.tm1Validate.indexOf(m.KEY_REGEX)!=-1){m.validate=m.tm1Validate.split(m.KEY_REGEX).join("").trim();m.log("evaluating regex "+m.validate);var g=new RegExp(m.validate);f=g.test(e);m.logObj("evaluated regular expression",f)}else{m.validate=m.tm1Validate.split(m.KEY_VALUE).join(e);f=m.$eval(m.validate);m.log("evaluating "+m.validate);m.logObj("evaluated validation expression",f)}if(!f){if(m.hasValidationMessage&&m.tm1ValidateMessage.indexOf(m.KEY_VALUE)!=-1){m.validateMessage=m.tm1ValidateMessage.split(m.KEY_VALUE).join(e)}m.validationMessage=m.validateMessage;return}}l.attributePut(e,m.tm1Instance,m.tm1Dimension,m.tm1Element,m.tm1Attribute).then(function(h){if(m.hasApi&&m.tm1Api.onUpdate){m.tm1Api.onUpdate(h,{instance:m.tm1Instance,dimension:m.tm1Dimension,element:m.tm1Element,attribute:m.tm1Attribute,value:e})}if(h.success){if(m.hasModel){m.ngModel=e}if(m.hasOnLoadFunction){m.hasOnLoadFunction=false;m.tm1OnLoad({data:angular.isDefined(m.ngModel)?m.ngModel:e})}if(m.hasOnChangeFunction){if(m.skipOnChangeOnce){m.skipOnChangeOnce=false}else{setTimeout(function(){m.tm1OnChange({data:angular.isDefined(m.ngModel)?m.ngModel:e})})}}if(m.hasChangeFunction){setTimeout(function(){m.tm1Change({data:angular.isDefined(m.ngModel)?m.ngModel:e})})}m.currentEntryValue=e;o.$broadcast(d.Name+".event.refresh",{source:m.directiveID})}else{b.error("dbra(UPDATE_ERROR) - instance: "+m.tm1Instance+", dimension: "+m.tm1Dimension+", element: "+m.tm1Element+", attribute: "+m.tm1Attribute);b.error(h);try{m.validationMessage=h.message.message}catch(j){m.validationMessage="Not a valid entry. Please Check."}}})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiElementListItem";d.Controller="Tm1UiElementListItemCtrl";d.Template="assets/html/tm1-ui-element-list-item.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Item:"=",tm1ItemDisplay:"@",tm1Indent:"=?",tm1UiClass:"@",tm1UiClassLeaf:"@",tm1UiClassConsolidated:"@",tm1Debug:"=?"},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.directiveClasses=[];f.itemDisplay="";f.indent=true;f.indentArray=[];f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(o.tm1Indent&&!f.tm1Indent){f.indent=false}if(!o.tm1Item){throw"tm1-item is a REQUIRED attribute."}f.itemDisplay=f.tm1Item.key;if(o.tm1ItemDisplay){f.itemDisplay=f.tm1ItemDisplay}f.isLeaf=f.tm1Item.isLeaf;if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses.push(f.tm1UiClass)}if(f.indent&&f.tm1Item.topLevel){f.indentArray=new Array(f.tm1Item.topLevel)}f.updateDirectiveClass=function(){f.directiveClasses.length=0;if(!_.isEmpty(f.tm1UiClass)){f.directiveClasses.push(f.tm1UiClass)}if(!_.isEmpty(f.tm1UiClassLeaf)&&f.tm1Item.isLeaf){f.directiveClasses.push(f.tm1UiClassLeaf)}if(!_.isEmpty(f.tm1UiClassConsolidated)&&!f.tm1Item.isLeaf){f.directiveClasses.push(f.tm1UiClassConsolidated)}};if(angular.isDefined(o.tm1UiClass)){o.$observe("tm1UiClass",function(j){f.updateDirectiveClass()})}if(angular.isDefined(o.tm1UiClassLeaf)){o.$observe("tm1UiClassLeaf",function(j){f.updateDirectiveClass()})}if(angular.isDefined(o.tm1UiClassConsolidated)){o.$observe("tm1UiClassConsolidated",function(j){f.updateDirectiveClass()})}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiElementList";d.Controller="Tm1UiElementListCtrl";d.ControllerAs="tm1UiElementListCtrl";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",template:"<span></span>",transclude:true,replace:true,scope:{name:"@",id:"@","class":"@",tm1Instance:"@",tm1Dimension:"@",tm1Subset:"@",tm1Attributes:"@",tm1Mdx:"@",tm1CalculateTopLevel:"=?",tm1OnDataReady:"&",tm1Api:"=?",tm1Options:"=?",tm1Debug:"=?",ngModel:"="},link:function(f,e,o,m,n){if(f.ngModel&&angular.isArray(f.ngModel)){f.ngModel.length=0}else{f.ngModel=[]}f._elements=[];f.directiveID=b.newguid();f.subsetMdxFlagCount=0;f.hasCallBackPassed=false;f.batchRequestEnabled=g.batchingElementRequestEnabled;f.calculateLevel=false;f.hasPending=false;f.directiveOptions={asObject:false};f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Instance)){throw"Missing Required Attributes. Please Set tm1-instance."}if(angular.isUndefined(o.tm1Dimension)){throw"Missing Required Attributes. Please Set tm1-dimension."}if(angular.isDefined(o.tm1OnDataReady)){f.hasCallBackPassed=true}if(o.tm1Subset){f.subsetMdxFlagCount++}if(o.tm1Mdx){f.subsetMdxFlagCount++}if(f.subsetMdxFlagCount>1){throw"Please Set either tm1-subset OR tm1-mdx ONLY."}f.isByMdxFlag=angular.isDefined(o.tm1Mdx)?true:false;f.isBySubsetFlag=angular.isDefined(o.tm1Subset)?true:false;if(angular.isDefined(o.tm1Api)){f.log("Directive API requested");f.tm1Api={refreshData:function(){f.log("refreshed through api call!");m.refreshData()}}}if(angular.isDefined(o.tm1CalculateTopLevel)&&f.tm1CalculateTopLevel){f.calculateLevel=true}f.hasCompleteParams=function(){var k=true;if(_.isEmpty(f.tm1Instance)){k=false}else{if(f.isByMdxFlag&&_.isEmpty(f.tm1Mdx)){k=false}else{if(f.isByMdxFlag&&f.tm1Mdx.match(/\[\s*\]/g)!=null&&f.tm1Mdx.match(/\[\s*\]/g).length>0){k=false}else{if(_.isEmpty(f.tm1Dimension)){k=false}else{if(!_.isEmpty(f.tm1Dimension)&&o.tm1Subset!=undefined&&_.isEmpty(f.tm1Subset)){k=false}else{if(angular.isDefined(o.tm1Attributes)){var j=Papa.parse(f.tm1Attributes);if(angular.isDefined(j.data)&&j.data.length==1&&j.data[0].length>0){_.forEach(j.data[0],function(l){if((k&&_.isEmpty(l))||(!_.isEmpty(l)&&l.trim()=="")){k=false}})}}}}}}}return k};f.resetModel=function(){f.ngModel.length=0};f.$on(d.Name+".event.refresh",function(j){});f.$on("tm1.event.refresh",function(j){if(f.hasCompleteParams()){m.refreshData()}});f.$on("login.success",function(j){f.hasPending=false;if(f.hasCompleteParams()){m.refreshData()}});if(f.batchRequestEnabled){f.$on(g.batcherElementResponseID,function(k,j){if(!_.isEmpty(j)&&j[f.directiveID]){f.hasPending=false;m.updateDirectiveState(j[f.directiveID])}})}o.$observe("tm1Dimension",function(j){if(!_.isEmpty(j)){if(f.hasCompleteParams()){m.refreshData()}}});o.$observe("tm1Subset",function(j){if(!_.isEmpty(j)){if(f.hasCompleteParams()){m.refreshData()}}});o.$observe("tm1Mdx",function(j){if(!_.isEmpty(j)){if(f.hasCompleteParams()){f.resetModel();m.refreshData()}}});o.$observe("tm1Attributes",function(j){if(!_.isEmpty(j)){if(f.hasCompleteParams()){m.refreshData()}}});if(angular.isDefined(o.tm1Options)){f.$watch("tm1Options",function(j){f.directiveOptions=angular.merge({},f.directiveOptions,j)},true)}if(f.hasCompleteParams()){m.refreshData()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","tm1UiSettings","$rootScope",function(h,b,j,k){var a=this;a.updateDirectiveState=function(e){h._elements=e;if(h.directiveOptions.asObject){h.ngModel={}}else{if(h.ngModel&&angular.isArray(h.ngModel)){h.ngModel.length=0}else{h.ngModel=[]}}angular.forEach(h._elements,function(g){var f=angular.isDefined(g.Level)?g.Level:0;var o=angular.isDefined(g.TopLevel)?g.TopLevel:0;var p={key:g.Name,level:f,topLevel:o,index:g.Index,indent:function(){return new Array(o)}};if(g.Type){p.type=g.Type.substring(0,1)}if(p.level<=0){p.isLeaf=true}else{p.isLeaf=false}if(p.isLeaf){p.topLevelClass="tm1-ui-level-N"}else{if(angular.isDefined(g.TopLevel)){p.topLevelClass="tm1-ui-level-"+g.TopLevel}else{p.topLevelClass="tm1-ui-level-C"}}var q=true;angular.forEach(g.Attributes,function(l,n){p[n]=l;var m=n.replace(/\W+/g,"");p[m]=l;if(q){q=false;p.alias=l;p.value=l}});if(h.directiveOptions.asObject){h.ngModel[p.key]=p;if(p.alias){h.ngModel[p.alias]=p}}else{h.ngModel.push(p)}});if(h.hasCallBackPassed){h.tm1OnDataReady({data:h.ngModel})}};a.refreshData=function(){if(h.hasPending){return}h.hasPending=true;if(h.batchRequestEnabled){var f={id:h.directiveID,element:{id:h.directiveID,instance:h.tm1Instance,dimension:h.tm1Dimension,subset:h.tm1Subset,attribute:h.tm1Attributes,elementsOnly:!h.calculateLevel,mdx:h.tm1Mdx}};if(h.tm1Dimension&&h.tm1Dimension.indexOf("::")!=-1){var e=h.tm1Dimension.split("::");f.element.dimension=e[0];f.element.hierarchy=e[1]}k.$broadcast(j.batcherElementRequestID,f)}else{var g={attributes:h.tm1Attributes,subset:h.tm1Subset,mdx:h.tm1Mdx,batchSize:h.batchSize,elementsOnly:!h.calculateLevel};b.dimensionElements(h.tm1Instance,h.tm1Dimension,g).then(function(m){h.hasPending=false;if(h.ngModel&&angular.isArray(h.ngModel)){h.ngModel.length=0}else{h.ngModel=[]}a.updateDirectiveState(m)})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiElement";d.Controller="Tm1UiElementCtrl";d.Template="assets/html/tm1-ui-element.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",template:"<span></span>",transclude:false,replace:true,scope:{tm1Instance:"@",tm1Dimension:"@",tm1Element:"@",tm1Attributes:"@",ngModel:"=",tm1Debug:"="},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.directiveClasses="";f.batchRequestEnabled=g.batchingElementRequestEnabled;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(!o.tm1Instance)){throw"tm1-instance is a required attribute."}if(angular.isUndefined(!o.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(angular.isUndefined(!o.tm1Element)){throw"tm1-element is a required attribute."}if(angular.isUndefined(!o.ngModel)){throw"ng-model is a required attribute."}f.hasCompleteParams=function(){var k=true;if(_.isEmpty(f.tm1Dimension)||_.isEmpty(f.tm1Element)){k=false}else{if(angular.isDefined(o.tm1Attributes)){var j=Papa.parse(f.tm1Attributes);if(angular.isDefined(j.data)&&j.data.length==1&&j.data[0].length>0){_.forEach(j.data[0],function(l){if((k&&_.isEmpty(l))||(!_.isEmpty(l)&&l.trim()=="")){k=false}})}}}return k};f.$on("tm1.event.refresh",function(j){});f.$watch("tm1Dimension",function(k,j){if(k!=j){if(f.hasCompleteParams()){m.refreshData()}}});f.$watch("tm1Element",function(k,j){if(k!=j){if(f.hasCompleteParams()){m.refreshData()}}});f.$watch("tm1Attributes",function(k,j){if(k!=j){if(f.hasCompleteParams()){m.refreshData()}}});if(f.hasCompleteParams()){m.refreshData()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","$tm1Ui","tm1UiSettings","$log",function(l,a,k,m,j){var b=this;b.updateDirectiveState=function(e){if(e&&e.length==1){l.element=e[0];l.ngModel={};l.ngModel.key=l.element.Name;l.ngModel.level=l.element.Level;l.ngModel.type=l.element.Type.substr(0,1);l.ngModel.index=l.element.Index;if(l.element.Attributes){_.forEach(l.element.Attributes,function(f,g){l.ngModel[g]=f})}}};b.refreshData=function(){if(l.batchRequestEnabled){var e={id:l.directiveID,element:{id:l.directiveID,instance:l.tm1Instance,dimension:l.tm1Dimension,element:encodeURIComponent(l.tm1Element.trim()),attribute:l.tm1Attributes}};$rootScope.$broadcast(m.batcherElementRequestID,e)}else{k.dimensionElement(l.tm1Instance,l.tm1Dimension,l.tm1Element,l.tm1Attributes).then(function(f){b.updateDirectiveState(f)})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiExport";d.Controller="Tm1UiExportCtrl";d.Template="assets/html/tm1-ui-export.html";c.directive(d.Name,["$filter","tm1UiSettings","$http","$tm1Ui","$timeout","$window","$ngBootbox","$rootScope","$log",function(o,p,n,b,r,s,q,m,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:false,scope:{tm1TargetId:"@",tm1UiClass:"@",tm1OutputName:"@",tm1FieldSeparator:"@",tm1FieldQualifier:"@",tm1Locale:"@",tm1Debug:"=?"},link:function(g,f,e,h,j){g.directiveID=b.helperGenerateUUID();g.DEFAULT_FILE="exported";g.DEFAULT_FIELD_SEPARATOR=",";g.DEFAULT_FIELD_QUALIFIER='"';g.DEFAULT_LOCALE="en";g.outputFile=g.DEFAULT_FILE;g.outputFieldSeparator=g.DEFAULT_FIELD_SEPARATOR;g.outputFieldQualifier=g.DEFAULT_FIELD_QUALIFIER;g.outputLocale=g.DEFAULT_LOCALE;g.directiveClasses="";g.debug=false;g.log=function(k){g.logObj(k,{message:k})};g.logObj=function(l,k){if(g.debug){m.$broadcast(p.frameworkLogID,{id:g.directiveID,name:d.Name,message:l,object:k})}};if(angular.isDefined(e.tm1Debug)&&g.tm1Debug){g.debug=true}if(e.tm1OutputName){g.outputFile=g.tm1OutputName}if(e.tm1FieldSeparator){g.outputFieldSeparator=g.tm1FieldSeparator}if(e.tm1FieldQualifier){g.outputFieldQualifier=g.tm1FieldQualifier}if(angular.isDefined(e.tm1UiClass)&&!_.isEmpty(g.tm1UiClass)){g.directiveClasses=g.tm1UiClass}g.extractCellFormattedValue=function(l){var k=false;var v="";if($(l).find("input").length>0){k=true;v="input"}else{if($(l).find("select").length>0){k=true;v="select"}else{if($(l).find("textarea").length>0){k=true;v="textarea"}}}if(k){var w="";$(l).find(v).each(function(t){w+=","+$(this).val()});w=w.substr(1);return g.outputFieldQualifier+w+g.outputFieldQualifier}else{return g.outputFieldQualifier+$(l).text().trim()+g.outputFieldQualifier}};g.createTable=function(k,w){var l=$("<table />");var y=w&&w.rowHeadersCount?w.rowHeadersCount:0;if(y>0){$.each(k,function(v,u){if(v<y){var t=$("<thead />");l.append(t);var A=$("<tr />");$.each(u,function(z,C){A.append($("<th />").text(C))});t.append(A)}})}var x=$("<tbody />");l.append(x);$.each(k,function(v,u){if(v>=y){var t=$("<tr />");$.each(u,function(C,B){t.append($("<td />").text(B))});x.append(t)}});return l};g.exportTable=function(D){var E=$("#"+g.tm1TargetId).prop("tagName");if(E.toLowerCase()=="table"){var A=$("#"+g.tm1TargetId).clone();var C=$(A).find("thead tr");var l=$(A).find("tbody tr");var k=[];l.each(function(t){k[t]=[];$(this).find("td").each(function(u){k[t][u]=g.extractCellFormattedValue(this)})});l.each(function(u){var t=$(this).find("td");$(t).each(function(y){var x=$(t[y]).attr("rowspan");var v=g.extractCellFormattedValue(t[y]);x=_.parseInt(x);if(x>1){for(var w=u+1;w<l.length;w++){if(w<=x){k[w].splice(y,0,v)}else{break}}}})});var F=[];var B=0;C.each(function(u){var t=$(this).find("th");var v=[];$(t).each(function(y){var w=$(t[y]).attr("colspan");w=w?_.parseInt(w):1;for(var x=0;x<w;x++){v.push(g.extractCellFormattedValue(this))}});F.push(v)});C.each(function(u){var t=$(this).find("th");var v=0;$(t).each(function(y){var w=$(t[y]).attr("rowspan");w=_.parseInt(w);if(w>0){for(var x=1;x<w;x++){F[u+x].splice(y,0,g.extractCellFormattedValue(this))}}})});if(F.length>0){B=F.length;F=_.reverse(F);_.forEach(F,function(t){k.unshift(t)})}var G=g.createTable(k,{rowHeadersCount:B});g.contentExport=$("<div />").append(G).html();if(!_.isEmpty(g.contentExport)){b.getToken().then(function(u){if(!_.isEmpty(u)){var t={method:"POST",url:"api/export",data:{file:g.outputFile,output:D,html:g.contentExport,fieldSeparator:g.outputFieldSeparator,fieldQualifier:g.outputFieldQualifier,locale:g.outputLocale}};t.headers={};t.headers[p.t]=u;n(t).then(function(v,w){s.open("export.jsp","_blank")})}},function(t){a.error("tokenFailure: %o",t)})}}else{if(angular.isString(E)){E=E.toLowerCase()}q.alert("Target ID is not a supported HTML element - <strong>"+E+"</strong>. It must be an HTML Table.").then(function(){})}};if(angular.isDefined(e.tm1UiClass)){e.$observe("tm1UiClass",function(k){g.directiveClasses=_.isEmpty(k)?"":k})}if(angular.isDefined(e.tm1OutputName)){e.$observe("tm1OutputName",function(k){g.outputFile=_.isEmpty(k)?g.DEFAULT_FILE:k})}if(angular.isDefined(e.tm1FieldSeparator)){e.$observe("tm1FieldSeparator",function(k){g.outputFieldSeparator=_.isEmpty(k)?g.DEFAULT_FIELD_SEPARATOR:k})}if(angular.isDefined(e.tm1FieldQualifier)){e.$observe("tm1FieldQualifier",function(k){g.outputFieldQualifier=k})}if(angular.isDefined(e.tm1Locale)){e.$observe("tm1Locale",function(k){g.outputLocale=k})}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiFormatNumber";c.directive(d.Name,["$filter","$browser",function(a,b){return{require:"ngModel",link:function(n,o,q,m){var p=0;if(!_.isEmpty(q.tm1UiFormatNumber)){p=accounting.unformat(q.tm1UiFormatNumber)}var l=_.debounce(function(){var e=o.val().replace(/,/g,"");o.val(accounting.formatNumber(e,p))},500);m.$parsers.push(function(e){return e.replace(/,/g,"")});m.$render=function(){o.val(accounting.formatNumber(m.$viewValue,p))};o.bind("change",l);o.bind("keydown",function(e){var f=e.keyCode;if(f==91||(15<f&&f<19)||(37<=f&&f<=40)){return}b.defer(l)});o.bind("paste cut",function(){b.defer(l)})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiLog";d.Controller="Tm1UiLogCtrl";d.Template="assets/html/tm1-ui-log.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2",function(a,f,b){return{restrict:"E",templateUrl:d.Template,transclude:false,priority:1000,replace:false,scope:{id:"@","class":"@",tm1LogLimit:"@"},link:function(n,e,q,o,p){n.directiveID=b.newguid();n.tableClass="table";n.logs=[];n.logLimit=10;var m={time:a("date")((new Date()),"yyyyMMdd.HH:mm:ss.sss"),id:n.directiveID,name:d.Name,message:"Awaiting Log.."};n.logs.push(m);if(angular.isDefined(q["class"])&&!_.isEmpty(n["class"])){n.tableClass=n["class"].trim()}if(angular.isDefined(q.tm1LogLimit)&&!_.isEmpty(n.tm1LogLimit)){n.logLimit=parseInt(n.tm1LogLimit.trim())}n.clearLogs=function(){n.logs.length=0};n.$on(f.frameworkLogID,function(h,g){if(g){if(angular.isUndefined(g.time)){g.time=a("date")((new Date()),"yyyyMMdd.HH:mm:ss.sss")}if(angular.isUndefined(g.id)){g.id="No ID"}if(angular.isUndefined(g.name)){g.name="Unknown Directive"}n.logs=_.reverse(n.logs);n.logs.push(g);n.logs=_.takeRight(n.logs,n.logLimit);n.logs=_.reverse(n.logs)}});n.$on(d.Name+".event.refresh",function(g){});n.$on("tm1.event.refresh",function(g){})},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$log",function(j,a,k,h){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiLogin";d.Controller="Tm1UiLoginCtrl";d.Template="assets/html/tm1-ui-login.html";c.directive(d.Name,["$filter","$http","$rootScope","$base64","tm1UiSettings","$state","$location","$rootScope","$window","$stateParams","$location","$tm1Ui","$timeout","$log",function(s,r,q,x,t,y,u,q,w,p,u,b,v,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{name:"@",id:"@",tm1UiClass:"@",tm1AfterLogin:"&",tm1DefaultInstance:"@",tm1Debug:"=?"},link:function(g,f,k,h,j){g.directiveID=b.helperGenerateUUID();g.directiveClasses="";g.instances=[];g.instance="";g.credentials={cam:"",userName:"",password:""};g.NO_ACTION=1;g.AUTHENTICATION_START=2;g.UNAUTHORIZED=2.1;g.UNAUTHORIZED_WITH_ERROR_MESSAGE=2.11;g.UNABLE_TO_GET_INSTANCE_DETAILS=2.2;g.UNABLE_TO_SAVE_SESSION=2.3;g.AUTHENTICATION_ERROR=2.9;g.OIDC_ERROR_AUTHENTICATING=2.3;g.AUTHENTICATION_SUCCESS=5;g.CAM_ERROR_GETTING_PASSPORT=10;g.loginStatus=g.NO_ACTION;g.loginButtonClass="btn-primary";g.loginButtonText="LOGIN";g.loginEnabled=true;g.errorMessage="";g.authMethods={};g.useCAMwithSSO=false;g.useWindowsAuthentication=false;g.useOIDCAuthentication=false;g.useOIDCROPGLogin=false;g.nativeTM1AuthenticationIsNotAvailable=false;g.useCAM=false;g.camNamespaces=[];if(p&&p.instance){g.instance=p.instance}else{if(angular.isDefined(k.tm1DefaultInstance)&&!_.isEmpty(g.tm1DefaultInstance)){g.instance=g.tm1DefaultInstance}}g.debug=false;var e={name:g.instance,cam:"",userName:""};g.log=function(m,l){if(g.debug){q.$broadcast(t.frameworkLogID,{id:g.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(k.tm1Debug)&&g.tm1Debug){g.debug=true}if(angular.isDefined(k.tm1UiClass)&&!_.isEmpty(g.tm1UiClass)){g.directiveClasses=g.tm1UiClass}g.log("Debugging of Login START");if(g.debug){b.setDebug(g.debug)}g.log("Current $stateParams",p);if(k.id){f.attr("id",g.id)}if(k.name){f.attr("name",g.name)}g.updateCamSelection=function(){g.log("updateCamSelection()");if(g.instanceTarget&&g.instanceTarget.camNamespaces&&g.instanceTarget.camNamespaces.length>0){g.log("updateCamSelection(1)");g.useCAM=true;g.camNamespaces=g.instanceTarget.camNamespaces;if(g.camNamespaces.length>0){g.credentials.cam=g.camNamespaces[0]}}else{g.log("updateCamSelection(2) No target instance found.");if(g.instances&&g.instances.length>0&&g.instances[0].camNamespaces&&g.instances[0].camNamespaces.length>0){g.camNamespaces=g.instances[0].camNamespaces;g.credentials.cam=g.camNamespaces[0];g.log("updateCamSelection(2) Choosing First Instance and its Namespaces",g.camNamespaces);g.log("updateCamSelection(2) Choosing First Namespace",g.credentials.cam)}}};g.resetLoginState=function(){v(function(){g.loginStatus=g.NO_ACTION},3*1000)};g.getLoginInstance=function(){var l={};_.each(q.instances,function(m){if(m.name.toLowerCase()===g.instance.toLowerCase()){m.isLoggedIn=true;m.cam=g.credentials.cam;m.userName=g.credentials.userName;l=m;l.status=200}});return l};g.executeAfterSuccessfulLogin=function(){g.log("executeAfterSuccessfulLogin()");var l=g.getLoginInstance();g.log("executeAfterSuccessfulLogin() - Login Instance",l);q.$broadcast("login.success",l);if(l.name){b.applicationUser(l.name).then(function(m){})}if(l&&l.loginInstances&&angular.isArray(l.loginInstances)&&l.loginInstances.length>0){_.forEach(l.loginInstances,function(m){if(!_.eq(m,l.name)){q.$broadcast("login.instance.start",{instance:m});b.applicationSilentLogin(m,g.credentials.userName,g.credentials.password,g.credentials.cam).then(function(n){g.log("instanceNameLogin",m);g.log("instanceNameLoginStatus",n);var o={};o.status=n;o.instance=m;q.$broadcast("login.instance.status",_.cloneDeep(o));if(n.success){b.applicationUser(m).then(function(C){var B={};B.instance=m;B.userInfo=_.cloneDeep(C);q.$broadcast("login.instance.success",B)})}else{q.$broadcast("login.instance.failure",{status:n,instance:m})}})}})}if(k.tm1AfterLogin!=undefined){g.log("executeAfterSuccessfulLogin() - Custom Function Found");g.tm1AfterLogin({instance:l})}else{if(!_.isEmpty(q.priorState)&&!_.isEmpty(q.priorState.state)&&!_.isEmpty(q.priorState.state.name)){g.log("executeAfterSuccessfulLogin() - Prior State Found");y.transitionTo(q.priorState.state.name,{instance:q.priorState.param.instance})}else{g.log("executeAfterSuccessfulLogin() - Going to Browser History");w.history.back(-1)}}b.dataRefresh();g.loginStatus=g.AUTHENTICATION_SUCCESS};g.loginWithWindowsAuthentication=function(l){b.applicationLoginWithWindowsAuthentication(l.name).then(function(m){if(m.success){g.log("Successfully Logged in via Windows Authentication!");g.executeAfterSuccessfulLogin()}else{g.log("ERROR logging in with Windows Authentication!");a.error(m);g.loginStatus=g.WIA_ERROR_AUTHENTICATING}})};g.loginWithCAMPassport=function(m,l){g.log("Passport Retrieved... ",m);if(!_.isEmpty(m)){g.log("Logging In with CAM Passport Found...");var n=undefined;if(l&&l.camNamespaces&&l.camNamespaces.length>0){n=l.camNamespaces[0]}b.applicationLoginWithCAMPassport(l.name,n,m).then(function(o){if(o.success){g.log("Successfully Logged in with CAM Passport!");g.executeAfterSuccessfulLogin()}else{g.log("ERROR logging in with CAM Passport!");a.error(o);g.loginStatus=g.CAM_ERROR_GETTING_PASSPORT}})}else{g.log("ERROR getting CAM Passport",m);g.loginStatus=g.CAM_ERROR_GETTING_PASSPORT}};g.loginViaSSOProcess=function(l){if(l.useSSOviaJS&&!(l.clientCAMURI&&l.clientCAMURI.length>0)){throw'No "clientCAMURI" defined in intances.json file. Contact your administrator.'}g.useCAMwithSSO=true;var m=undefined;if(l&&l.camNamespaces&&l.camNamespaces.length>0){m=l.camNamespaces[0]}g.log("Getting Passport for Instance... ",l);if(l.useSSOviaJS){b.applicationGetCAMPassport(l.name,m).then(function(n){g.loginWithCAMPassport(n,l)})}else{b.applicationGetCAMUri(l.name,m).then(function(n){b.applicationSaveSessionLoginInstance({instance:l.name,lastLoginUrl:u.absUrl()}).then(function(o){if(o&&o.success){if(l.useSSOWithRedirect){w.location.href=n}else{g.targetOrigin=u.protocol()+"://";g.targetOrigin+=u.host();g.targetOrigin+=":"+u.port();g.receiveMessage=function(A){if(!_.startsWith(g.targetOrigin,A.origin)){a.warn("Unauthorized Origin: "+A.origin+" vs "+g.targetOrigin);return}else{g.ssoWindow.close();g.loginWithCAMPassport(A.data,l);w.removeEventListener("message",g.receiveMessage,false)}};w.addEventListener("message",g.receiveMessage,false);g.ssoWindow=w.open(n,"_blank")}}else{a.error("Unable to save login instance");a.error(o)}})},function(n){a.error("Client CAM Uri Retrieval Error");a.error(n)})}};g.checkCam=function(){_.forEach(g.instances,function(l){if(l.name==g.login.instance){g.instanceTarget=l}});g.log("checkCam() instance target",g.instanceTarget);if(g.instanceTarget&&g.instanceTarget.camNamespaces&&g.instanceTarget.camNamespaces.length>0){g.updateCamSelection()}else{g.log("checkCam() No CAM Namespace found for on this target.");g.useCAM=false;g.credentials.cam=""}};g.login=function(){g.loginStatus=g.AUTHENTICATION_START;g.instance=g.login.instance;g.log("login() Setting Instance to - "+g.instance);g.log("login() Refreshing CAM Info");g.checkCam();g.log("login() instance: "+g.login.instance+", user: "+g.credentials.userName+", cam: "+g.credentials.cam);b.applicationLogin(g.login.instance,g.credentials.userName,g.credentials.password,g.credentials.cam).then(function(n){if(n.success){g.executeAfterSuccessfulLogin()}else{g.loginStatus=g.UNAUTHORIZED;if(g.useOIDCROPGLogin&&n&&n.message&&n.message.message&&!_.isEmpty(n.message.message)){g.loginStatus=g.UNAUTHORIZED_WITH_ERROR_MESSAGE;g.errorMessage=n.message.message;try{if(n.message.message.indexOf("{")==0&&n.message.message.lastIndexOf("}")==(n.message.message.length-1)){var m=angular.fromJson(n.message.message);g.errorMessage=m.error_description}}catch(l){a.error(l)}}}},function(l){a.error(l)})};g.$on(d.Name+".event.refresh",function(l){h.refreshInstances()});g.onUpdate=function(){g.errorMessage=""};g.login.instance=g.instance;h.refreshInstances();if(angular.isDefined(k.tm1UiClass)){g.$watch("tm1UiClass",function(l,m){g.directiveClasses=_.isEmpty(l)?"":l})}g.$watch("loginStatus",function(l,m){switch(l){case g.AUTHENTICATION_SUCCESS:case g.NO_ACTION:g.loginButtonClass="btn-primary";g.loginButtonText="LOGIN";g.loginEnabled=true;break;case g.AUTHENTICATION_START:g.loginEnabled=false;g.loginButtonText="Please Wait...";g.loginButtonClass="btn-default";break;case g.UNABLE_TO_GET_INSTANCE_DETAILS:g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Unable to get TM1 instance details. Please check if REST API is running.";g.resetLoginState();break;case g.AUTHENTICATION_ERROR:case g.UNAUTHORIZED_WITH_ERROR_MESSAGE:g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.resetLoginState();break;case g.UNAUTHORIZED:g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Invalid credentials. Please check username and/or password.";g.resetLoginState();break;case g.UNABLE_TO_SAVE_SESSION:g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Unable to save session. Server maybe down. Please check.";g.resetLoginState();break;case g.CAM_ERROR_GETTING_PASSPORT:g.useCAMwithSSO=false;g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Unable to login automatically via CAM and SSO. Login manually.";g.resetLoginState();break;case g.WIA_ERROR_AUTHENTICATING:g.useWindowsAuthentication=false;g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Unable to login automatically via Windows Authentication. Login manually.";g.resetLoginState();break;case g.OIDC_ERROR_AUTHENTICATING:g.useOIDCAuthentication=false;g.loginButtonText="Authentication Failed";g.loginButtonClass="btn-danger";g.errorMessage="Unable to login automatically via OIDC Authentication. Login manually.";g.resetLoginState();break;default:g.loginButtonText="Please Wait...";g.loginButtonClass="btn-default"}});g.log("Current instance to be check for: "+g.instance);b.applicationInstances().then(function(l){g.instances=l;g.log("Instances Found",g.instances);g.instanceTarget=undefined;_.forEach(g.instances,function(m){if(m.name==g.instance){g.instanceTarget=m}});g.updateCamSelection();g.log("Target Instance Found",g.instanceTarget);if(g.instanceTarget&&g.instanceTarget.useSSOWithOIDC&&!g.instanceTarget.useOIDCROPGLogin){g.useOIDCAuthentication=true;g.loginStatus=g.AUTHENTICATION_START;b.applicationGetOIDCConfiguration(g.instanceTarget.name).then(function(n){if(_.isNil(n.authorizationEndpoint)){throw"Missing OIDC Authorization Endpoint."}if(_.isNil(n.clientID)){throw"Missing OIDC Client ID."}var B=u.protocol()+"://"+u.host()+":"+u.port()+g.instanceTarget.baseApp+"/";var C=u.absUrl();var m=C.length>1000?B:C;if(g.instanceTarget.useSSORedirecWithBaseURL){m=B}var o=n.authorizationEndpoint;o+="?client_id="+n.clientID;o+="&response_type=code";o+="&scope=openid";o+="&redirect_uri="+B;o+="&state="+g.instanceTarget.name+appConstants.OIDC_STATE_SEPARATOR+m+appConstants.OIDC_STATE_SEPARATOR+_.random(1,999999999);o+="$nonce="+_.random(1,999999999);w.location.href=o},function(m){a.error("OIDC Configuration ERROR");a.error(m);g.loginStatus=g.OIDC_ERROR_AUTHENTICATING})}else{if(g.instanceTarget){b.applicationInstanceAuthentications(g.instanceTarget.name).then(function(m){g.authMethods=_.cloneDeep(m);if(m){if(!(m.Basic||m.CAMNamespace||g.instanceTarget.useOIDCROPGLogin)){g.nativeTM1AuthenticationIsNotAvailable=true}if(m.OIDC&&g.instanceTarget.useOIDCROPGLogin){g.useOIDCROPGLogin=true}if(m.WindowsIntegrated&&g.instanceTarget.useSSOWithWindowsAuthentication){g.useWindowsAuthentication=true;g.loginWithWindowsAuthentication(g.instanceTarget)}else{if(m.CAMPassport&&g.instanceTarget.useSSOWithCAM){g.log("CAM for SSO Found",g.instanceTarget);b.applicationGetSessionLoginInstance().then(function(n){if(n&&!_.isEmpty(n.camPassport)){a.info("Existing CAMPassport Found. Retrying that...");b.applicationTryCamPassportLoginWithInstance(n.name).then(function(o){a.info("Relogin Status");a.info(o);if(o&&o.success){a.info("Logging in with Existing Passport...");g.loginWithCAMPassport(n.camPassport,g.instanceTarget)}else{g.loginViaSSOProcess(g.instanceTarget)}})}else{g.loginViaSSOProcess(g.instanceTarget)}})}}}})}}})},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","tm1UiSettings",function(g,b,h){var a=this;a.instances=[];a.refreshInstances=function(){b.applicationInstances().then(function(f){a.instances=f;if(a.instances.length>0){if(g.login.instance==undefined||g.login.instance==""){g.login.instance=a.instances[0].name}else{var e=false;_.forEach(a.instances,function(k){if(k.name&&k.name==g.login.instance){e=true}});if(!e){g.login.instance=a.instances[0].name}}}})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiProcess";d.Controller="Tm1UiProcessCtrl";d.Template="assets/html/tm1-ui-process.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$http","$timeout","$rootScope","$tm1UiHelper","$log","$tm1Ui",function(o,q,s,n,r,m,p,a,b){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{name:"@",id:"@","class":"@",tm1Instance:"@",tm1Name:"@",tm1Parameters:"@",tm1Sandbox:"@",tm1DisplayName:"@",tm1MessageRunning:"@",tm1MessageSuccess:"@",tm1MessageError:"@",tm1UiClass:"@",tm1UiButtonClass:"@",tm1AfterRun:"&",tm1ShowDialog:"=?",tm1RefreshPage:"=?",tm1Disabled:"=?",tm1Debug:"=?"},link:function(g,f,e,h,j){g.directiveID=s.newguid();g.process={name:g.tm1Name,parameters:[]};g.directiveClasses="";g.directiveClassesPrior="";g.buttonClasses="";g.parameters={Parameters:[]};g.isExistingProcess=false;g.displayName="Run "+g.tm1Name;g.displayNameCurrent=g.displayName;g.messageRunning="[Running Process...]";g.messageSuccess="Successfully Ran "+g.tm1Name+".";g.messageError="There was a problem running "+g.tm1Name+". Please Check Logs.";g.messageParamError="Error in one of the parameters. Please Check.";g.showDialog=false;g.refreshPage=false;g.NO_ACTION=0;g.INIT_PROCESS=1;g.PROCESS_NOT_AVAILABLE=1.1;g.READY_FOR_RUN=2;g.REVALUATING_PARAMS_BEFORE_RUN=2.1;g.REVALUATED_PARAMS_HAS_ERROR=2.2;g.PROCESS_RUNNING=3;g.COMPLETED_WITH_ERRORS=3.1;g.COMPLETED_SUCCESSFULLY=4;g.CHECK_LOGS=99;g.processStatus=g.NO_ACTION;g.silentModeClasses=[];g.debug=false;g.log=function(k){g.logObj(k,{message:k})};g.logObj=function(l,k){if(g.debug){m.$broadcast(q.frameworkLogID,{id:g.directiveID,name:d.Name,message:l,object:k})}};if(angular.isDefined(e.tm1Debug)&&g.tm1Debug){g.debug=true}if(angular.isUndefined(e.tm1Name)){throw"tm1-name is a required attribute. Please check."}if(_.isEmpty(g.tm1Name)){throw"tm1-name cannot be empty. Please check."}if(angular.isDefined(e.tm1ShowDialog)&&g.tm1ShowDialog){g.showDialog=true}if(angular.isDefined(e.tm1UiClass)&&!_.isEmpty(g.tm1UiClass)){g.directiveClasses=g.tm1UiClass}if(angular.isDefined(e.tm1UiButtonClass)&&!_.isEmpty(g.tm1UiButtonClass)){g.buttonClasses=g.tm1UiButtonClass}if(angular.isDefined(e.tm1RefreshPage)&&g.tm1RefreshPage){g.refreshPage=true}g.extractParameterName=function(l){var k=undefined;if(l&&l.length>0){k=l.substring("tm1-parameter-".length)}return k};g.delayResetStatus=function(){r(function(){g.processStatus=g.NO_ACTION},3*1000)};g.afterProcessRun=function(k){if(angular.isDefined(e.tm1AfterRun)){g.tm1AfterRun({success:k})}};g.prepareProcessInfo=function(){g.processStatus=g.INIT_PROCESS;n.get("api/processes/"+g.tm1Instance+"/"+g.process.name).then(function(k,l){if(p.isSuccessful(k)){g.isExistingProcess=true;g.parameters={Parameters:[]};angular.forEach(k.data.Parameters,function(v){var w={Name:v.Name,Value:v.Value,Type:"String",hasError:false};if(angular.isNumber(v.Value)){w.Type="Numeric"}g.parameters.Parameters.push(w)});angular.forEach(g.process.parameters,function(u){angular.forEach(u,function(t,x){for(var y=0;y<g.parameters.Parameters.length;y++){if(g.parameters.Parameters[y].Name.toLowerCase()==x.toLowerCase()){g.parameters.Parameters[y].Value=angular.isNumber(g.parameters.Parameters[y].Value)?parseFloat(t):t;break}}})});g.processStatus=g.READY_FOR_RUN}else{g.processStatus=g.PROCESS_NOT_AVAILABLE;a.error("Error Executing "+g.tm1Name);a.error(k.data)}})};g.runProcess=function(){g.processStatus=g.REVALUATING_PARAMS_BEFORE_RUN;var l={Parameters:[]};var k=true;angular.forEach(g.parameters.Parameters,function(w){var v={Name:w.Name};v.Value=w.Type=="Numeric"?parseFloat(w.Value):(""+w.Value);if(w.Type=="Numeric"&&!isFinite(v.Value)){k=false;w.hasError=true}l.Parameters.push(v)});if(k){g.processStatus=g.PROCESS_RUNNING;g.processExecuteRequest={};g.processExecuteRequest.instance=g.tm1Instance;g.processExecuteRequest.sandbox=g.tm1Sandbox;g.processExecuteRequest.processName=g.process.name;g.processExecuteRequest.processExecuteBody=l;b.processExecuteWithObject(g.processExecuteRequest).then(function(u){if(u.success){g.processStatus=g.COMPLETED_SUCCESSFULLY;g.delayResetStatus();g.afterProcessRun(true)}else{g.processStatus=g.COMPLETED_WITH_ERRORS;g.delayResetStatus();g.afterProcessRun(false)}})}else{g.processStatus=g.REVALUATED_PARAMS_HAS_ERROR;r(function(){angular.forEach(g.parameters.Parameters,function(u){u.hasError=false});g.processStatus=g.NO_ACTION},3*1000)}if(g.refreshPage){m.$broadcast("tm1.event.refresh")}};g.runProcessDirect=function(){g.processStatus=g.NO_ACTION;g.prepareProcessInfo();var k=g.$watch("processStatus",function(l,u){g.silentModeClasses.length=0;if(!_.isEmpty(g.buttonClasses)){g.silentModeClasses.push(g.buttonClasses)}g.isDisabled=true;switch(l){case g.INIT_PROCESS:g.silentModeClasses.push("btn-default");g.displayName="[Preparing...]";break;case g.READY_FOR_RUN:g.silentModeClasses.push("btn-default");g.displayName="[Ready To Run...]";g.runProcess();break;case g.REVALUATING_PARAMS_BEFORE_RUN:g.silentModeClasses.push("btn-default");g.displayName="[Revaluating Parameters...]";break;case g.REVALUATED_PARAMS_HAS_ERROR:g.silentModeClasses.push("btn-danger");g.displayName=g.messageParamError;break;case g.PROCESS_RUNNING:g.silentModeClasses.push("btn-default");g.displayName=g.messageRunning;break;case g.COMPLETED_SUCCESSFULLY:g.silentModeClasses.push("btn-success");g.displayName=g.messageSuccess;break;case g.COMPLETED_WITH_ERRORS:g.silentModeClasses.push("btn-danger");g.displayName=g.messageError;break;case g.PROCESS_NOT_AVAILABLE:g.silentModeClasses.push("btn-danger");g.displayName=g.messageError;g.delayResetStatus();break;case g.NO_ACTION:k();g.displayName=g.displayNameCurrent;g.isDisabled=false;break;default:}})};g.$on(d.Name+".event.refresh",function(k){});g.$on("tm1.event.refresh",function(k){});if(!_.isEmpty(g.tm1Parameters)){g.$watch("tm1Parameters",function(k,w){if(!_.isEmpty(k)){var l=k.split("&");var v=0;angular.forEach(l,function(t){var y=t.split("=");var u={};u[y[0]]=y[1];if(!_.isEmpty(y[1])){g.process.parameters.push(u);v++}})}})}if(angular.isDefined(e.tm1MessageSuccess)){g.$watch("tm1MessageSuccess",function(k,l){g.messageSuccess=k})}if(angular.isDefined(e.tm1MessageError)){g.$watch("tm1MessageError",function(k,l){g.messageError=k})}if(angular.isDefined(e.tm1MessageRunning)){g.$watch("tm1MessageRunning",function(k,l){g.messageRunning=k})}if(angular.isDefined(e.tm1DisplayName)){e.$observe("tm1DisplayName",function(k){g.displayNameCurrent=k;g.displayName=k})}if(angular.isDefined(e.tm1ShowDialog)){g.$watch("tm1ShowDialog",function(k,l){g.showDialog=k?true:false})}if(angular.isDefined(e.tm1UiClass)){e.$observe("tm1UiClass",function(k){f.removeClass(g.directiveClassesPrior);g.directiveClassesPrior=k;g.directiveClasses=k;f.addClass(g.directiveClasses)})}if(angular.isDefined(e.tm1UiButtonClass)){g.$watch("tm1UiButtonClass",function(k,l){g.buttonClasses=_.isEmpty(k)?"":k})}if(angular.isDefined(e.tm1Disabled)){g.$watch("tm1Disabled",function(k,l){g.isDisabled=k})}if(angular.isDefined(e.tm1Sandbox)){e.$observe("tm1Sandbox",function(k){g.tm1Sandbox=k})}_.forEach(e.$attr,function(l,w){if(l&&l.indexOf("tm1-parameter-")!=-1){var v=g.extractParameterName(l);var k={};k[v]="";g.process.parameters.push(k);e.$observe(w,function(t){var u=_.findIndex(g.process.parameters,function(y){return y[v]!=undefined});g.process.parameters[u][v]=t})}})},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$log",function(j,a,k,h){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiProgress";d.Controller="Tm1UiProgressCtrl";d.Template="assets/html/tm1-ui-progress.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:{tm1UiProgressPending:"?tm1UiProgressPending",tm1UiProgressReady:"?tm1UiProgressReady"},replace:true,scope:{id:"@",name:"@",tm1Debug:"=?",tm1UiClass:"@",tm1UiTrigger:"=?"},link:function(f,e,p,n,o){f.directiveID=b.newguid();f.directiveClasses="";f.hasTrigger=angular.isDefined(f.tm1UiTrigger);f.triggered=false;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(k,j){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:k,object:j})}};if(angular.isDefined(p.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(p.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(p.id){e.attr("id",f.id)}if(p.name){e.attr("name",f.name)}if(angular.isDefined(p.tm1UiClass)){f.$watch("tm1UiClass",function(j,k){f.directiveClasses=_.isEmpty(j)?"":j})}f.$watch("tm1UiTrigger",function(j){if(j){f.hasTrigger=true;f.triggered=true}},true);var q=h.$watch("isLoading",function(){if(h.isLoading==false){f.isReady=true}else{if(f.hasTrigger&&h.isLoading){if(f.triggered){f.isReady=false}}else{f.isReady=false}}f.triggered=false});f.$on("$destroy",function(){q()})},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$log",function(j,a,k,h){var b=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRepeat";d.Controller="Tm1UiRepeatCtrl";d.ControllerAs="tm1UiRepeatCtrl";d.Template="assets/html/tm1-ui-repeat.html";c.directive(d.Name,["$filter","tm1UiSettings","$log","uuid2","$rootScope",function(a,j,b,h,k){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{name:"@",id:"@","class":"@",tm1Instance:"@",tm1Dimension:"@",tm1Subset:"@",tm1Mdx:"@",tm1OnDataReady:"&",tm1Debug:"=",ngModel:"="},link:function(f,e,o,g,n){f._elements=[];f.directiveID=h.newguid();f.subsetMdxFlagCount=0;f.hasCallBackPassed=false;f.batchRequestEnabled=j.batchingElementRequestEnabled;f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){k.$broadcast(j.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Instance)){throw"Missing Required Attributes. Please Set tm1-instance."}if(angular.isUndefined(o.tm1Dimension)){throw"Missing Required Attributes. Please Set tm1-dimension."}if(angular.isDefined(o.tm1OnDataReady)){f.hasCallBackPassed=true}if(o.tm1Subset){f.subsetMdxFlagCount++}if(o.tm1Mdx){f.subsetMdxFlagCount++}if(f.subsetMdxFlagCount>1){throw"Please Set either tm1-subset OR tm1-mdx ONLY."}f.isByMdxFlag=angular.isDefined(o.tm1Mdx)?true:false;f.isBySubsetFlag=angular.isDefined(o.tm1Subset)?true:false;f.hasCompleteParams=function(){var l=true;if(_.isEmpty(f.tm1Instance)){l=false}else{if(f.isByMdxFlag&&_.isEmpty(f.tm1Mdx)){l=false}else{if(_.isEmpty(f.tm1Dimension)){l=false}else{if(!_.isEmpty(f.tm1Dimension)&&o.tm1Subset!=undefined&&_.isEmpty(f.tm1Subset)){l=false}}}}return l};f.$on(d.Name+".event.refresh",function(l){});f.$on("tm1.event.refresh",function(l){if(f.hasCompleteParams()){g.refreshData()}});if(f.batchRequestEnabled){f.$on(j.batcherElementResponseID,function(l,m){if(!_.isEmpty(m)&&m[f.directiveID]){g.updateDirectiveState(m[f.directiveID])}})}f.$watch("tm1Dimension",function(l,m){if(l!=m){if(f.hasCompleteParams()){g.refreshData()}}});f.$watch("tm1Subset",function(l,m){if(l!=m){if(f.hasCompleteParams()){g.refreshData()}}});f.$watch("tm1Mdx",function(l,m){if(l!=m){if(f.hasCompleteParams()){g.refreshData()}}});if(f.hasCompleteParams()){g.refreshData()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$rootScope",function(h,a,j,k){var b=this;b.updateDirectiveState=function(e){h._elements=e;if(h.ngModel&&angular.isArray(h.ngModel)){h.ngModel.length=0}else{h.ngModel=[]}angular.forEach(h._elements,function(n){var f=angular.isDefined(n.Level)?n.Level:0;var o={element:n.Name,description:n.Name,level:f};var g=0;angular.forEach(n.Attributes,function(l,m){g++});if(g==1&&h.isBySubsetFlag&&!_.isEmpty(h.tm1Subset)){angular.forEach(n.Attributes,function(l,m){o.description=l})}h.ngModel.push(o)});if(h.hasCallBackPassed){h.tm1OnDataReady({data:h.ngModel})}};b.refreshData=function(){if(h.batchRequestEnabled){var e={id:h.directiveID,element:{id:h.directiveID,instance:h.tm1Instance,dimension:h.tm1Dimension,subset:h.tm1Subset,mdx:h.tm1Mdx}};k.$broadcast(j.batcherElementRequestID,e)}else{var f={method:"POST",url:"api/dimensions",data:[{id:h.directiveID,instance:h.tm1Instance,dimension:h.tm1Dimension,subset:h.tm1Subset,mdx:h.tm1Mdx}]};a(f).then(function(g,m){if(h.ngModel&&angular.isArray(h.ngModel)){h.ngModel.length=0}else{h.ngModel=[]}if(g.data[h.directiveID]){b.updateDirectiveState(g.data[h.directiveID])}})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptColumn";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",transclude:false,replace:true,scope:{tm1Dimension:"@",tm1Element:"@",tm1Subset:"@",tm1Mdx:"@",tm1Debug:"="},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.elementDefinitions=0;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(angular.isDefined(o.tm1Element)){f.elementDefinitions++}if(angular.isDefined(o.tm1Subset)){f.elementDefinitions++}if(angular.isDefined(o.tm1Mdx)){f.elementDefinitions++}if(f.elementDefinitions>1){throw"ONLY ONE of these must be defined: tm1-element, tm1-subset or tm1-mdx"}f.hasCompleteParams=function(){var j=true;if(_.isEmpty(f.tm1Dimension)){j=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Element)&&_.isEmpty(f.tm1Element)){j=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Subset)&&_.isEmpty(f.tm1Subset)){j=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Mdx)&&_.isEmpty(f.tm1Mdx)){j=false}}}}return j};f.getDimConfig=function(){var j={dimension:f.tm1Dimension,mdx:""};if(angular.isDefined(o.tm1Element)){j.mdx="{["+j.dimension.trim()+"].["+f.tm1Element.trim()+"]}"}else{if(angular.isDefined(o.tm1Subset)){j.mdx="{TM1SubsetToSet(["+j.dimension.trim()+'],"'+f.tm1Subset.trim()+'")}';j.subset=f.tm1Subset.trim()}else{if(angular.isDefined(o.tm1Mdx)){j.mdx=f.tm1Mdx.trim()}else{j.mdx="{["+j.dimension.trim()+"].AllMembers}"}}}f.logObj("registering this dimension",j);return j};f.$on(d.Name+".event.refresh",function(j){});f.$on("tm1.event.refresh",function(j){});f.$watch("tm1Dimension",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("columns",f.getDimConfig())}}});f.$watch("tm1Element",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("columns",f.getDimConfig())}}});f.$watch("tm1Subset",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("columns",f.getDimConfig())}}});f.$watch("tm1Mdx",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("columns",f.getDimConfig())}}})},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptData";d.Template="assets/html/tm1-ui-rpt-data.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$interval","$rootScope",function(b,j,h,a,k){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1RowData:"=",tm1ColumnNo:"@",tm1ColumnNos:"=",tm1Debug:"=",tm1DataDecimal:"@"},link:function(e,q,o,f,g){e.directiveID=h.newguid();e.cube="";e.instance="";e.dimensionElements=[];e.cubeElements=[];e.customSingleColumn=false;e.customSingleTargetColumn=-1;e.customMultiColumn=false;e.customMutilTargetColumn=[];e.columnCount=0;e.bootstrapColumnSize=18;e.bootstrapColumn="";e.bootstrapExcessSpace=0;e.bootstrapExcessColumn="";e.dataDecimal="2";e.debug=false;e.log=function(l){e.logObj(l,{message:l})};e.logObj=function(m,l){if(e.debug){k.$broadcast(j.frameworkLogID,{id:e.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&e.tm1Debug){e.debug=true}if(!o.tm1RowData){throw"tm1-row-data is a required field."}if(o.tm1ColumnNo&&o.tm1ColumnNos){throw"Define either tm1-column-no or tm1-column-nos only. Not BOTH."}if(o.tm1ColumnNo){e.customSingleColumn=true;e.customSingleTargetColumn=e.tm1ColumnNo-1}else{if(o.tm1ColumnNos){if(angular.isArray(e.tm1ColumnNos)){e.customMultiColumn=true;e.customMutilTargetColumn=e.tm1ColumnNos}else{throw"tm1-column-nos must be passed with an ARRAY of COLUMN NOs"}}else{}}if(angular.isDefined(o.tm1DataDecimal)&&!_.isEmpty(e.tm1DataDecimal)){if(isNaN(e.tm1DataDecimal)){throw"tm1-data-decimal should be set with a number. Please check."}e.dataDecimal=e.tm1DataDecimal}var p=a(function(){if(f.activeFormIsReady){a.cancel(p);p=undefined;e.cube=f.cubeInfo.name;e.instance=f.instance;if(e.cubeElements&&angular.isArray(e.cubeElements)){e.cubeElements.length=0}else{e.cubeElements=[]}if(e.dimensionElements&&angular.isArray(e.dimensionElements)){e.dimensionElements.length=0}else{e.dimensionElements=[]}if(e.customSingleColumn){e.customMutilTargetColumn.push(e.customSingleTargetColumn)}else{if(!e.customSingleColumn&&!e.customMultiColumn){for(var m=0;m<f.activeForm.columns.length;m++){e.customMutilTargetColumn.push(m)}}}var l=0;angular.forEach(e.customMutilTargetColumn,function(t){if(angular.isUndefined(e.cubeElements[l])){if(e.cubeElements[l]&&angular.isArray(e.cubeElements[l])){e.cubeElements[l].length=0}else{e.cubeElements[l]=[]}}angular.forEach(f.cubeInfo.dimensions,function(r){var s={};s.dimension=r.Name;if(f.activeForm.titles[0][r.Name]){s.axis="titles"}else{if(e.tm1RowData[r.Name]){s.axis="rows"}else{s.axis="columns"}}if(s.axis=="titles"){s.element=f.activeForm.titles[0][r.Name]}else{if(s.axis=="rows"){s.element=e.tm1RowData[r.Name]}else{s.element=f.activeForm.columns[t-1][r.Name]}}e.dimensionElements.push(s)});var n="";var u=0;angular.forEach(e.dimensionElements,function(r){n=n+(u==0?"":",")+r.element;u++});e.cubeElements[l].push(n);l++;if(e.dimensionElements&&angular.isArray(e.dimensionElements)){e.dimensionElements.length=0}else{e.dimensionElements=[]}});e.columnCount=e.cubeElements.length;if(18%e.columnCount==0){e.bootstrapColumnSize=e.bootstrapColumnSize/e.columnCount;e.bootstrapColumn="col-xs-"+e.bootstrapColumnSize;e.bootstrapExcessColumn=""}else{e.bootstrapExcessSpace=e.bootstrapColumnSize%e.columnCount;e.bootstrapColumnSize=(e.bootstrapColumnSize-e.bootstrapExcessSpace)/e.columnCount;e.bootstrapColumn="col-xs-"+e.bootstrapColumnSize;e.bootstrapExcessColumn="col-xs-"+e.bootstrapExcessSpace}}},1*100,100)},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptRowCell";d.Template="assets/html/tm1-ui-rpt-row-cell.html";d.ParentDirective="tm1UiRptView";d.ParentController="Tm1UiRptViewCtrl";c.directive(d.Name,["$filter","tm1UiSettings","$tm1Ui","$rootScope","$timeout","$compile",function(a,l,k,m,b,j){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1RowData:"=",tm1ColumnNo:"@",tm1ColumnElements:"@",tm1PicklistDisableSearch:"&",tm1Debug:"=",tm1UiClass:"@"},link:function(e,o,h,f,g){e.directiveID=k.helperGenerateUUID();e.rowIndex=-1;e.columnIndex=-1;e.cell={};e.items=[];e.isCellByElements=false;e.columnElements="";e.directiveClasses="";e.picklistDisableSearch=false;e.debug=false;e.log=function(q,n){if(e.debug){m.$broadcast(l.frameworkLogID,{id:e.directiveID,name:d.Name,message:q,object:n})}};if(angular.isDefined(h.tm1Debug)&&e.tm1Debug){e.debug=true}if(angular.isDefined(h.tm1UiClass)&&!_.isEmpty(e.tm1UiClass)){e.directiveClasses=e.tm1UiClass}if(angular.isUndefined(h.tm1RowData)){throw"tm1-row-data is a required attribute."}if(angular.isDefined(h.tm1ColumnNo)&&angular.isDefined(h.tm1ColumnElements)){throw"Use either 'tm1-column' or 'tm1-column-elements' BUT NOT BOTH."}if(angular.isDefined(h.tm1ColumnElements)){if(!_.isEmpty(e.tm1ColumnElements)){e.isCellByElements=true}else{throw"tm1-column-elements CANNOT BE EMPTY."}}if(angular.isDefined(h.tm1PicklistDisableSearch)){if(e.tm1PicklistDisableSearch()){e.picklistDisableSearch=true}}e.updateFormattedColumnElements=function(){if(e.isCellByElements){e.columnElements=e.tm1ColumnElements.trim().split(" ").join("").toLowerCase()}};e.updateDirective=function(){e.updateFormattedColumnElements();e.rowIndex=e.tm1RowData.index-1;e.tm1RowData=f.activeForm.rows[e.rowIndex];if(e.tm1RowData!=undefined){if(e.isCellByElements){e.cell=e.tm1RowData.getCell(e.tm1ColumnElements);if(angular.isUndefined(e.cell)){throw"Cannot find "+e.columnElements+"|"+e.tm1ColumnElements+" from the columns. Please check."}}else{if(e.tm1RowData.cells&&(e.tm1ColumnNo<=e.tm1RowData.cells.length)){e.columnIndex=parseInt(e.tm1ColumnNo)-1;e.cell=e.tm1RowData.cells[e.columnIndex]}}if(e.cell){o.empty();if(!e.cell.isReadOnly&&!e.cell.HasPicklist){o.append('<span><input class="form-control" ng-blur="cell.update(onUpdate, false);" ng-model="cell.value"></span>');j(o.contents())(e)}else{if(e.cell.HasPicklist){e.items.length=0;e.items=[e.cell.value," ","  ","   ","   "];e.selectScope=e.$new();e.selectConfig={};e.selectConfig.tm1List=e.items;e.selectConfig.value=e.cell.value;e.selectConfig.tm1IncludeEmpty=true;if(e.picklistDisableSearch){e.selectConfig.disableSearch=true}var q='<tm1-ui-select tm1-config="selectConfig"></tm1-ui-select>';var n=j(q)(e.selectScope);o.append(n);e.$on("tm1UiSelect.dropdown.open",function(p){e.updateList()});e.$on("tm1UiSelect.item.selected",function(s,p){e.cell.value=p;e.onSelectChange(e.cell)})}else{e.value=accounting.formatMoney(e.cell.value);o.append("<span>"+e.value+"</span>")}}}}};e.onUpdate=function(){f.refreshData()};e.updateList=function(){k.cellGetPicklistValues(f.activeForm.instance,f.activeForm.cube,e.cell.reference()).then(function(n){e.items.length=0;e.items=n;e.$broadcast("tm1UiSelect.items.ready",e.items);e.$broadcast("tm1UiSelect.item.select",e.cell.value)})};e.onSelectChange=function(n){b(function(){n.update(e.onUpdate,false)},1)};e.$on(f.eventRefreshCellDisplayRequest,function(n){e.log(f.eventRefreshCellDisplayRequest+" EVENT RECEIVED");e.updateDirective()});if(angular.isDefined(h.tm1UiClass)){e.$watch("tm1UiClass",function(n,q){e.directiveClasses=_.isEmpty(n)?"":n})}if(e.isCellByElements){h.$observe("tm1ColumnElements",function(n){e.updateDirective()})}else{h.$observe("tm1ColumnNo",function(n){e.updateDirective()})}e.$watch("tm1RowData",function(n,q){e.updateDirective()});e.updateDirective()},require:"^"+d.ParentDirective,bindToController:d.ParentController}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptRowElement";d.Controller="Tm1UiRptRowElementCtrl";c.directive(d.Name,["tm1UiSettings",function(a){return{restrict:"A",template:function(b,g){var h="<td";h+=' class="tm1-ui-rpt-row-element"';h+=' rowspan="{{'+g.tm1UiRptRowElement+"['"+g.tm1Dimension+"'].rowspan}}\"";h+=' colspan="{{'+g.tm1UiRptRowElement+"['"+g.tm1Dimension+"'].colspan}}\"";h+=' ng-if="$index == tm1AfData.metadata._page.firstRowIndex || '+g.tm1UiRptRowElement+"['"+g.tm1Dimension+"'].visible\"";h+=">";h+="<tm1-ui-rpt-row-label";h+=' tm1-row-data="'+g.tm1UiRptRowElement+'"';h+=' tm1-dimension="'+g.tm1Dimension+'"';if(g.tm1FreezeElement!=undefined&&g.tm1FreezeElement.trim().toLowerCase()=="true"){h+=' tm1-freeze-element="true"'}if(g.tm1UiClass!=undefined){h+=' tm1-ui-class="'+g.tm1UiClass+'"'}h+=">";h+="</tm1-ui-rpt-row-label>";h+="</td>";return h},replace:true,scope:false,link:function(j,b,m,k,l){j.tm1AfData=k.activeForm;j.$on(k.eventRefreshActiveFormDataRequest,function(e,f){j.tm1AfData=k.activeForm})},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptRowHeader";d.Template="assets/html/tm1-ui-rpt-row-header.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope","$timeout",function(a,j,h,k,b){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{tm1Instance:"@",name:"@",id:"@",tm1Debug:"=",tm1UiClass:"@"},link:function(f,e,o,g,n){f.directiveID=h.newguid();f.directiveClasses="";f.titles="";f.hasTranscludedContent=false;f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){k.$broadcast(j.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}n(f.$parent,function(l,m){if(l!=undefined&&l.length>0){g.hasTransclude()}});if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}b(function(){f.hasTranscludedContent=g.headerDirectiveHasTransclude;if(!f.hasTranscludedContent){_.forEach(g.rows,function(l){f.titles=f.titles+","+l.dimension});f.titles=f.titles.substr(1)}},100);if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(l,m){f.directiveClasses=_.isEmpty(l)?"":l})}},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptRowLabel";d.Controller="Tm1UiRptRowLabelCtrl";d.Template="assets/html/tm1-ui-rpt-row-label.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$interval","$timeout",function(b,k,j,a,h){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1RowData:"=",tm1Dimension:"@",tm1FreezeElement:"=",tm1Debug:"=",tm1UiClass:"@"},link:function(f,q,p,g,o){f.directiveID=j.newguid();f.rowData=[];var e=[];f.rowIndex=-1;f.directiveClasses="";f.freezeElement=false;f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){$rootScope.$broadcast(k.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(p.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(p.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isUndefined(p.tm1RowData)){throw"tm1-row-data is a REQUIRED attribute. Please check."}if(angular.isUndefined(p.tm1Dimension)){throw"tm1-dimension is a REQUIRED attribute. Please check."}if(_.isEmpty(f.tm1RowData)){throw"tm1-row-data CANNOT BE EMPTY. Please check."}if(_.isEmpty(f.tm1Dimension)){throw"tm1-dimension CANNOT BE EMPTY. Please check."}if(angular.isDefined(p.tm1FreezeElement)&&f.tm1FreezeElement){f.freezeElement=true}f.updateDirective=function(){f.rowIndex=f.tm1RowData.index-1;f.tm1RowData=g.activeForm.rows[f.rowIndex]};f.expandOrCollapse=function(l){if(!f.freezeElement){g.activeForm.pageReset();g.activeForm.rows[f.rowIndex][f.tm1Dimension].element.toggle();g.activeForm.recalculate();g.activeForm.pageUpdate();g.refreshDimensionElements();f.logObj("expandOrCollapse() rowData",l)}else{f.log("expandOrCollapse() is frozen.")}};f.indent=function(){return new Array(g.activeForm.rows[f.rowIndex][f.tm1Dimension].element.topLevel)};if(angular.isDefined(p.tm1UiClass)){p.$observe("tm1UiClass",function(l){f.directiveClasses=l})}f.updateDirective()},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptRow";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope","$tm1Ui",function(a,j,b,k,h){return{restrict:"E",transclude:false,replace:true,scope:{tm1Dimension:"@",tm1Element:"@",tm1Subset:"@",tm1Mdx:"@",tm1ExpandElements:"@",tm1CollapseElements:"@",tm1Attribute:"@",tm1Debug:"="},link:function(f,e,o,g,n){f.directiveID=b.newguid();f.elementDefinitions=0;f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){k.$broadcast(j.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(angular.isDefined(o.tm1Element)){f.elementDefinitions++}if(angular.isDefined(o.tm1Subset)){f.elementDefinitions++}if(angular.isDefined(o.tm1Mdx)){f.elementDefinitions++}if(f.elementDefinitions>1){throw"ONLY ONE of these must be defined: tm1-element, tm1-subset or tm1-mdx"}f.hasCompleteParams=function(){var l=true;if(_.isEmpty(f.tm1Dimension)){l=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Element)&&_.isEmpty(f.tm1Element)){l=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Subset)&&_.isEmpty(f.tm1Subset)){l=false}else{if(f.elementDefinitions==1&&angular.isDefined(o.tm1Mdx)&&_.isEmpty(f.tm1Mdx)){l=false}else{if(angular.isDefined(o.tm1Attribute)&&_.isEmpty(f.tm1Attribute)){l=false}}}}}return l};f.getDimConfig=function(){var l={dimension:f.tm1Dimension,mdx:"",expanded:[],collapsed:[]};if(angular.isDefined(o.tm1Element)){l.mdx="{["+l.dimension.trim()+"].["+f.tm1Element.trim()+"]}"}else{if(angular.isDefined(o.tm1Subset)){l.mdx="{TM1SubsetToSet(["+l.dimension.trim()+'],"'+f.tm1Subset.trim()+'")}';l.subset=f.tm1Subset.trim()}else{if(angular.isDefined(o.tm1Mdx)){l.mdx=f.tm1Mdx.trim()}else{l.mdx="{["+l.dimension.trim()+"].AllMembers}"}}}if(angular.isDefined(o.tm1Attribute)){l.attribute=f.tm1Attribute}if(angular.isDefined(o.tm1ExpandElements)&&!_.isEmpty(f.tm1ExpandElements)){l.expanded=h.helperConvertElementsToArray(f.tm1ExpandElements)}if(angular.isDefined(o.tm1CollapseElements)&&!_.isEmpty(f.tm1CollapseElements)){l.collapsed=h.helperConvertElementsToArray(f.tm1CollapseElements)}f.logObj("registering this dimension",l);return l};f.$on(d.Name+".event.refresh",function(l){});f.$on("tm1.event.refresh",function(l){});f.$watch("tm1Dimension",function(l,m){if(!_.isEmpty(l)){if(f.hasCompleteParams()){g.registerDimension("rows",f.getDimConfig())}}});f.$watch("tm1Element",function(l,m){if(!_.isEmpty(l)){if(f.hasCompleteParams()){g.registerDimension("rows",f.getDimConfig())}}});f.$watch("tm1Subset",function(l,m){if(!_.isEmpty(l)){if(f.hasCompleteParams()){g.registerDimension("rows",f.getDimConfig())}}});f.$watch("tm1Mdx",function(l,m){if(!_.isEmpty(l)){if(f.hasCompleteParams()){g.registerDimension("rows",f.getDimConfig())}}});f.$watch("tm1Attribute",function(l,m){if(!_.isEmpty(l)){if(f.hasCompleteParams()){g.registerDimension("rows",f.getDimConfig())}}})},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptTitle";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",transclude:false,replace:true,scope:{tm1Dimension:"@",tm1Element:"@",tm1Debug:"="},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.isElementDefined=false;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(angular.isDefined(o.tm1Element)){f.isElementDefined=true}f.hasCompleteParams=function(){var j=true;if(_.isEmpty(f.tm1Dimension)){j=false}else{if(f.isElementDefined&&_.isEmpty(f.tm1Element)){j=false}}return j};f.getDimConfig=function(){var j={};j.dimension=f.tm1Dimension;j.element="DefaultMember";if(f.isElementDefined){j.element=f.tm1Element.trim()}return j};f.$watch("tm1Dimension",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("titles",f.getDimConfig())}}});if(f.isElementDefined){f.$watch("tm1Element",function(k,j){if(!_.isEmpty(k)){if(f.hasCompleteParams()){m.registerDimension("titles",f.getDimConfig())}}})}},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptTr";c.directive(d.Name,["tm1UiSettings",function(a){return{restrict:"A",template:function(b,g){var h="<tr";h+=' ng-repeat="rowData in tm1AfData.rows track by $index';h+=">";h+="<ng-transclude />";h+="</tr>";return h},replace:true,scope:false,link:function(j,b,m,k,l){j.tm1AfData=k.activeForm},require:"^tm1UiRptView",bindToController:"Tm1UiRptViewCtrl"}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiRptView";d.Controller="Tm1UiRptViewCtrl";d.ControllerAs="tm1UiRptViewCtrl";d.Template="assets/html/tm1-ui-rpt-view.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope","$tm1Ui",function(a,j,b,k,h){return{restrict:"E",templateUrl:d.Template,transclude:{tm1UiRptConfig:"tm1UiRptConfig",tm1UiRptTemplate:"tm1UiRptTemplate"},replace:false,scope:{id:"@",tm1Instance:"@",tm1Cube:"@",tm1SuppressZero:"@",tm1ShowMessage:"=",tm1PageSize:"@",tm1UiClass:"@",tm1Debug:"=",ngModel:"="},link:function(f,q,o,g,p){f.directiveID=b.newguid();f.directiveClasses="";f.cubeIsReady=false;f.dimensionsAttribute={};f.message="";f.NO_ACTION=0;f.DIMENSIONS_RECEIVING=1;f.DIMENSIONS_ALL_RECEIVED=2;f.DIMENSIONS_ROWS_RECEIVED_HAS_ATTRIBUTES=2.1;f.DIMENSIONS_ROWS_HAS_NO_ATTRIBUTE=2.9;f.DIMENSIONS_SUBSET_ALIAS_PROCESSED=4.1;f.ACTIVE_FORM_WAITING_RESPONSE=3;f.ACTIVE_FORM_RECEIVED_RESPONSE=3.1;f.status=f.NO_ACTION;f.suppressZero=false;f.rowSuppressZero=false;f.columnSuppressZero=false;f.showMessage=false;f.ruleTracingAllowed=false;f.pageSize=0;f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){k.$broadcast(j.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isUndefined(o.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(f.tm1Instance)){throw"tm1-instance cannot be empty."}}if(angular.isUndefined(o.tm1Cube)){throw"tm1-cube is a required attribute."}if(angular.isUndefined(o.ngModel)){throw"ng-model is a required attribute."}if(angular.isDefined(o.tm1ShowMessage)&&f.tm1ShowMessage){f.showMessage=true}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isDefined(o.tm1PageSize)&&!_.isEmpty(f.tm1PageSize)){var e=_.toInteger(f.tm1PageSize);if(e>f.pageSize){f.pageSize=e}}f.hasCompleteParams=function(){var l=true;if(_.isEmpty(f.tm1Cube)||_.isEmpty(f.tm1Cube)){l=false}return l};f.$on(d.Name+".event.refresh",function(l){if(f.hasCompleteParams()){f.log(d.Name+".event.refresh EVENT RECEIVED");g.refreshData()}});f.$on("tm1.event.refresh",function(l){if(f.hasCompleteParams()){f.log("tm1.event.refresh EVENT RECEIVED");g.refreshData()}});f.$watch("tm1Cube",function(l,m){if(!_.isEmpty(l)){g.getCubeDimensions()}});if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(l,m){f.logObj("new tm1UiClass RECEIVED",l);f.directiveClasses=_.isEmpty(l)?"":l})}if(angular.isDefined(o.tm1PageSize)){o.$observe("tm1PageSize",function(l){var m=_.toInteger(l);if(isFinite(m)){f.pageSize=m;g.refreshData()}})}if(angular.isDefined(o.tm1SuppressZero)){f.$watch("tm1SuppressZero",function(l,m){f.logObj("tm1SuppressZero Value RECEIVED",l);if(!_.isEmpty(l)){f.rowSuppressZero=false;f.columnSuppressZero=false;if(l.toLowerCase()=="both"){f.rowSuppressZero=true;f.columnSuppressZero=true}else{if(l.toLowerCase()=="row"){f.rowSuppressZero=true}else{if(l.toLowerCase()=="column"){f.columnSuppressZero=true}}}if(f.hasCompleteParams()){g.refreshData()}}})}f.$watch("status",function(l,m){f.log("status changed: "+l);switch(l){case f.DIMENSIONS_ALL_RECEIVED:g.validateRowDimensions();break;case f.DIMENSIONS_ROWS_RECEIVED_HAS_ATTRIBUTES:g.processAllSubsetAlias();break;case f.DIMENSIONS_SUBSET_ALIAS_PROCESSED:g.refreshData();break;case f.DIMENSIONS_ROWS_HAS_NO_ATTRIBUTE:f.log("One of the row dimensions has no attribute.");break;default:}});h.applicationInstanceCapabilities(f.tm1Instance).then(function(l){if(l){f.ruleTracingAllowed=l.TraceCalculation?true:false}})},controllerAs:d.ControllerAs,controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","$tm1Ui","tm1UiSettings","$log",function(l,a,k,m,j){var b=this;b.eventRefreshCellDisplayRequest=d.Name+".event.cell.refresh";b.eventRefreshDimensionElementsRequest=d.Name+".event.dimension.elements.refresh";b.eventRefreshActiveFormDataRequest=d.Name+".event.active-form.refresh";b.dimensionsRemaining=[];b.dimensionsReceived=[];b.dimensions=[];b.titles=[];b.columns=[];b.rows=[];b.cubeInfo={};b.instance=l.tm1Instance;b.activeFormIsReady=false;b.activeForm={};b.alias=[];b.refreshDimensionElements=function(){setTimeout(function(){l.$broadcast(b.eventRefreshDimensionElementsRequest)},5)};b.getCubeDimensions=function(){a.get("api/cubes/"+l.tm1Instance+"/"+l.tm1Cube).then(function(e,f){l.logObj("Cube Dimensions Response for "+l.tm1Cube,e);if(k.helperIsSuccessful(e)){if(e.data.Dimensions.length>0){b.dimensions.length=0;b.dimensionsRemaining.length=0;angular.forEach(e.data.Dimensions,function(g){b.dimensions.push(g.Name);b.dimensionsRemaining.push(g.Name)});l.cubeIsReady=true}}})};b.getDimensionDifference=function(){var f="";try{if(b.dimensionsRemaining&&b.dimensionsRemaining.length>0){_.forEach(b.dimensionsRemaining,function(g){f+=","+g});f=f.substring(1)}}catch(e){}return f};b.getDimensionsReceived=function(){var e="";try{_.forEach(b.dimensionsReceived,function(g){e+=","+g});e=e.substring(1)}catch(f){}return e};b.isDimensionsComplete=function(){var e=false;var f=b.rows.length+b.columns.length+b.titles.length;if(f==b.dimensions.length){e=true;l.log("Rows - "+b.rows.length+", Columns - "+b.columns.length+", Titles - "+b.titles.length+". COMPLETED!")}else{l.log("Rows - "+b.rows.length+", Columns - "+b.columns.length+", Titles - "+b.titles.length);l.logObj("Waiting for other dimensions ["+f+"] vs ["+b.dimensions.length+"]",{rows:b.rows,columns:b.columns,titles:b.titles});try{l.message="Waiting for other dimension configurations of ["+l.tm1Cube+"].";l.message+=" Dimension configurations received: ["+b.getDimensionsReceived()+"].";l.message+=" Dimension configurations waiting for: ["+b.getDimensionDifference()+"]."}catch(g){}}return e};b.registerDimension=function(e,g){l.logObj("registerDimension",g);var f=false;angular.forEach(b[e],function(o){if(!f&&o.dimension==g.dimension){f=true}});if(f){var h=_.findIndex(b[e],function(o){return o.dimension==g.dimension});b[e][h]=g}else{b[e].push(g)}if(angular.isDefined(g.attribute)){l.dimensionsAttribute[g.dimension]=g.attribute}_.remove(b.dimensionsRemaining,function(n){return n==g.dimension});var h=_.findIndex(b.dimensionsReceived,function(o){return o==g.dimension});if(h==-1){b.dimensionsReceived.push(g.dimension)}if(b.isDimensionsComplete()){l.status=l.DIMENSIONS_ALL_RECEIVED}};b.validateRowDimensions=function(){l.check={};l.check.MAX_ROW=b.rows.length;l.check.rowCount=0;l.check.isValid=true;angular.forEach(b.rows,function(e){l.message="Checking if ["+e.dimension+"] has attributes.";k.dimensionAttributes(l.tm1Instance,e.dimension).then(function(f){l.check.rowCount++;if(f.length==0){l.check.isValid=false;l.message="Dimension ["+e.dimension+"] must have at least one attribute in order to be used on the row of this active form."}if(l.check.rowCount==l.check.MAX_ROW){if(l.check.isValid){l.status=l.DIMENSIONS_ROWS_RECEIVED_HAS_ATTRIBUTES}else{l.status=l.DIMENSIONS_ROWS_HAS_NO_ATTRIBUTE}}else{l.message="Checking if all dimension in rows have attributes."}})})};b.processAllSubsetAlias=function(){b.alias=[];if(l.updateAliasList==undefined){l.updateAliasList=function(e){if(b[e].length>0){_.forEach(b[e],function(f){if(f.subset!=undefined&&f.subset.length>0){b.alias.push({dimension:f.dimension.trim(),subset:f.subset.trim()})}})}}}l.updateAliasList("rows");l.updateAliasList("columns");l.updateAliasList("titles");if(b.alias.length>0){l.tempAliasCountRequest=0;_.forEach(b.alias,function(e){k.dimensionSubsetAlias(l.tm1Instance,e.dimension,e.subset).then(function(f){l.tempAliasCountRequest++;if(!_.isEmpty(f)){e.alias=f}if(l.tempAliasCountRequest==b.alias.length){l.status=l.DIMENSIONS_SUBSET_ALIAS_PROCESSED}})})}else{l.status=l.DIMENSIONS_SUBSET_ALIAS_PROCESSED}};b.refreshData=function(){l.log("refreshData request");l.status=l.ACTIVE_FORM_WAITING_RESPONSE;l.message="All dimension configuration received! Now processing active form..";var e={cube:l.tm1Cube,title:{},row:{},column:{},rowSuppressZero:l.rowSuppressZero,columnSuppressZero:l.columnSuppressZero};if(b.titles.length>0){angular.forEach(b.titles,function(f){e.title[f.dimension]=f.element})}if(b.rows.length>0){angular.forEach(b.rows,function(f){e.row[f.dimension]=f.mdx})}if(b.columns.length>0){angular.forEach(b.columns,function(f){e.column[f.dimension]=f.mdx})}if(b.rows.length>0&&b.columns.length>0){if(e.dimensionConfigurations==undefined){e.dimensionConfigurations=[]}e.dimensionConfigurations.length=0;l.addDimensionConfiguration=function(f){if(b[f].length>0){_.forEach(b[f],function(g){e.dimensionConfigurations.push(g)})}};l.addDimensionConfiguration("rows");l.addDimensionConfiguration("columns");l.addDimensionConfiguration("titles");l.logObj("Sending Data",e);l.message="Getting Active Form Data...";a.post("api/activeform/"+l.tm1Instance+"/configuration",e).then(function(p,f){l.message="Getting Active Form Data... RECEIVED.";if(k.helperIsSuccessful(p)){l.message="Processing and formatting...";var g=false;var h={alias:{},expand:[],collapse:[]};h.ruleTracingAllowed=l.ruleTracingAllowed;if(e.row){_.forEach(e.row,function(n,o){if(l.dimensionsAttribute[o]){h.alias[o]=l.dimensionsAttribute[o]}})}if(b.alias.length>0){_.forEach(b.alias,function(n){if(n.alias){h.alias[n.dimension]=n.alias}})}if(l.activeFormData){h.expand=l.activeFormData.expanded();g=true}if(b.rows.length>0){_.forEach(b.rows,function(n){if(n.expanded.length>0){_.forEach(n.expanded,function(o){h.expand.push(o)})}if(n.collapsed.length>0){_.forEach(n.collapsed,function(o){h.collapse.push(o)})}})}l.currentPage=undefined;try{if(l.activeFormData.metadata._page.current){l.currentPage=l.activeFormData.metadata._page.current}}catch(q){}l.activeFormData=k.resultsetTransform(l.tm1Instance,l.tm1Cube,p.data,h);l.activeFormData.recalculate();if(l.activeFormData._rows&&l.activeFormData._rows.length>0){l.activeFormData.metadata.updateDimensionOrder(b.dimensions)}if(l.pageSize>=0){l.activeFormData.metadata._page={current:1,size:l.pageSize};if(l.currentPage){if(l.currentPage>l.activeFormData.pages()){l.activeFormData.pageLast()}else{l.activeFormData.pageGoto(l.currentPage)}}else{l.activeFormData.pageFirst()}}l.ngModel=l.activeFormData;b.activeForm=l.ngModel;l.$broadcast(b.eventRefreshActiveFormDataRequest);l.message="Processing and formatting... DONE!";b.activeFormIsReady=true;l.status=l.NO_ACTION;l.log("ACTIVE FORM IS READY");if(g){l.message="Sending Request for Update of Active Form Data...";l.$broadcast(b.eventRefreshCellDisplayRequest)}l.message="";if(!(l.activeFormData.rows&&l.activeFormData.rows.length>0)){l.message="No Data"}}else{throw"Unable to retrieve MDX result."}})}else{l.log("Refresh Directive Recieved but there should be dimensions defined on BOTH ROW and COLUMN. Please Check.")}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiSelect";d.Template="assets/html/tm1-ui-select.html";c.directive(d.Name,["$rootScope","tm1UiSettings","$compile",function(b,f,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Config:"&"},link:function(l,e,o,m,n){l.showDropdown=false;l.includeEmptyItem=false;l.items=[];l.itemsCopy=[];l.$on(d.Name+".items.ready",function(g,h){l.tm1List=_.cloneDeep(h);l.initItems();l.updateItems();l.caretActiveMode()});l.$on(d.Name+".item.select",function(h,g){l.value=g});l.tm1List=_.cloneDeep(l.tm1Config().tm1List);l.value=l.tm1Config().value;l.includeEmptyItem=l.tm1Config().tm1IncludeEmpty;if(l.tm1Config().disableSearch){e.find("input").prop("disabled",true)}l.updateTemplate=function(){if(_.isEqual(l.items,l.itemsPrevious)){}else{l.itemsPrevious=_.cloneDeep(l.items);var h=e.find("ul");h.empty();var j="";var g=0;_.forEach(l.items,function(k){j+="<li ";j+="ng-click=onItemSelect("+g+") ";if(k.style){j+='style="';_.forEach(k.style,function(r,s){j+=s+": "+r+"; "});j+='" '}if(k.isSelected){j+='class="tm1-select-plain-style-active" '}j+='id="value-'+_.kebabCase(k.data)+'"';j+=">";j+="<span>"+k.data+"</span>";j+="</li>";g++});h.append(j);a(h.contents())(l)}};l.toggleDropDown=function(g){if(g){l.showDropdown=true}else{l.showDropdown=!l.showDropdown}if(l.showDropdown){l.updateDropdownWidth();l.$emit(d.Name+".dropdown.open")}else{l.caretInactiveMode()}};l.updateValue=function(g){l.value=g.isEmpty?"":g.data;l.$emit(d.Name+".item.selected",l.value)};l.updateDropdownWidth=function(){e.find("div").each(function(h,g){if(angular.element(g).hasClass("tm1-select-plain-style")){angular.element(g).css("width",e[0].offsetWidth+"px")}})};l.caretActiveMode=function(){l.updateDropdownWidth();e.find("i").addClass("fa-caret-up");e.find("i").removeClass("fa-caret-down")};l.caretInactiveMode=function(){e.find("i").addClass("fa-caret-down");e.find("i").removeClass("fa-caret-up")};l.initItems=function(){l.items.length=0;if(l.addEmptyItem()){l.items.push({isSelected:false,data:"empty",isEmpty:true,style:{color:"transparent"}})}_.forEach(l.tm1List,function(g){l.items.push({isSelected:false,data:g})});l.itemsCopy=_.cloneDeep(l.items)};l.updateItems=function(){_.forEach(l.items,function(g){g.isSelected=false;if(g.data===l.value){g.isSelected=true}});l.updateTemplate()};l.addEmptyItem=function(){if(l.includeEmptyItem){return true}else{if(l.tm1List){_.forEach(l.tm1List,function(g){if(_.isEmpty(g)){return true}})}}return false};l.onCaret=function(){l.toggleDropDown()};l.onItemSelect=function(h){var g=l.items[h];l.updateValue(g);l.updateItems();l.toggleDropDown()};l.textChange=function(){if(_.isEmpty(l.value)){l.items=_.cloneDeep(l.itemsCopy)}else{l.items.length=0;_.forEach(l.itemsCopy,function(g){if(g.data){if(g.data.indexOf(l.value)!=-1){l.items.push(g)}}})}l.updateTemplate()};l.initItems();l.updateTemplate()}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiSession";d.Template="assets/html/tm1-ui-session.html";c.directive(d.Name,["$rootScope","tm1UiSettings","$log","$tm1Ui","$ngBootbox","$compile","$templateCache",function(m,n,b,l,a,k,o){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{name:"@",id:"@",tm1UiClass:"@",tm1Debug:"="},link:function(j,h,g,e,f){j.directiveClasses="";j.debug=false;j.sessions=[];j.sessionError=false;j.log=function(q){j.logObj(q,{message:q})};j.logObj=function(s,r){if(j.debug){m.$broadcast(n.frameworkLogID,{id:j.directiveID,name:d.Name,message:s,object:r})}};if(angular.isDefined(g.tm1Debug)&&j.tm1Debug){j.debug=true}if(angular.isDefined(g.tm1UiClass)&&!_.isEmpty(j.tm1UiClass)){j.directiveClasses=j.tm1UiClass}if(g.id){h.attr("id",j.id)}if(g.name){h.attr("name",j.name)}j.showSessions=function(){a.setDefaults({size:"large"});j.sessions.length=0;l.applicationInstances().then(function(s){_.forEach(s,function(p){j.sessions.push({name:p.name})});l.applicationSessions().then(function(p){_.forEach(j.sessions,function(q){if(p[q.name]&&p[q.name].isLoggedIn){q.active=true;l.applicationUser(q.name).then(function(r){if(angular.isDefined(r.defaultDisplay)&&!_.isEmpty(r.defaultDisplay)){q.user=r.defaultDisplay}else{if(angular.isDefined(r.Name)&&!_.isEmpty(r.Name)){q.user=r.Name}else{q.user=""}}})}else{q.active=false;q.user=""}})});var u=k(o.get("session-management"));var t={message:u(j),title:"<h1>Instances</h1>"};a.customDialog(t)})};j.logout=function(q){l.applicationLogout(q).then(function(p){if(p.success){_.forEach(j.sessions,function(s){if(s.name==q){s.active=false}})}else{j.sessionError=true;j.sessionErrorInfo=p;b.error(p)}})};if(angular.isDefined(g.tm1UiClass)){j.$watch("tm1UiClass",function(r,s){j.directiveClasses=_.isEmpty(r)?"":r})}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiStore";d.Controller="Tm1UiStoreCtrl";d.Template="assets/html/tm1-ui-store.html";c.directive(d.Name,["$filter","tm1UiSettings","$rootScope","$tm1Ui","$log","$timeout","$interval",function(b,n,o,m,k,l,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,require:"ngModel",scope:{tm1Instance:"@",tm1Cube:"@",tm1Elements:"@",tm1SaveValue:"=",tm1SaveDelay:"=",tm1Debug:"=",ngModel:"="},link:function(e,h,g,f){e.directiveID=m.helperGenerateUUID();e.isReady=false;e.message="Initializing...";e.evaluateSpecialWords=false;e.cubeElements=[];e.saveDelay=500;e.refreshDataRequests=[];e.saveValue=false;e.savePending=false;e.tm1Data=undefined;e.ngModelCurrent=undefined;e.debug=false;e.log=function(q){e.logObj(q,{message:q})};e.logObj=function(s,r){if(e.debug){o.$broadcast(n.frameworkLogID,{id:e.directiveID,name:d.Name,message:s,object:r})}};if(angular.isDefined(g.tm1Debug)&&e.tm1Debug){e.debug=true}if(angular.isUndefined(g.tm1Instance)){throw"tm1-instance is a required attribute."}if(_.isEmpty(e.tm1Instance)){throw"tm1-instance is a required attribute and CANNOT BE EMPTY."}if(angular.isUndefined(g.tm1Cube)){throw"tm1-cube is a required attribute."}if(angular.isUndefined(g.tm1Elements)){throw"tm1-elements is a required attribute."}if(angular.isUndefined(g.ngModel)){throw"ng-model is a required attribute."}if(angular.isDefined(g.tm1SaveDelay)&&isFinite(e.tm1SaveDelay)){var j=parseInt(e.tm1SaveDelay);if(isFinite(j)){e.saveDelay=j}}if(angular.isDefined(g.tm1SaveValue)&&_.isBoolean(e.tm1SaveValue)){e.saveValue=e.tm1SaveValue}e.log("instance: "+e.tm1Instance+", cube: "+e.tm1Cube+", elements: "+e.tm1Elements);e.hasCompleteParams=function(){var r=true;if(_.isEmpty(e.tm1Cube)||_.isEmpty(e.tm1Elements)){r=false}else{var s=Papa.parse(e.tm1Elements);if(angular.isDefined(s.data)&&s.data.length==1&&s.data[0].length>0){angular.forEach(s.data[0],function(p){if((r&&_.isEmpty(p))||(!_.isEmpty(p)&&p.trim()=="")){r=false}else{if(r&&!_.isEmpty(p)&&p.trim()=="@UserName"){r=false;e.evaluateSpecialWords=true}}})}}e.log("hasCompleteParams() instance: "+e.tm1Instance+", cube: "+e.tm1Cube+", elements: "+e.tm1Elements+", isComplete: "+r);return r};e.getInitializedValue=function(s){var u=undefined;try{u=angular.fromJson(s)}catch(t){u={_previousCellValue:s}}return u};e.populateCubeElements=function(){e.cubeElements.length=0;e.cubeElements=Papa.parse(e.tm1Elements).data[0]};e.refreshData=function(){e.populateCubeElements();e.refreshDataRequests.push({id:e.directiveID,instance:e.tm1Instance,cube:e.tm1Cube,cubeElements:e.cubeElements});l(function(){if(e.refreshDataRequests.length>0){var s=undefined;if(e.refreshDataRequests.length==1){s=e.refreshDataRequests[0]}else{s=_.last(e.refreshDataRequests)}e.refreshDataRequests.length=0;var r={};r.id=e.directiveID;r.instance=s.instance;r.cube=s.cube;r.cubeElements=s.cubeElements;m.cellGets([r]).then(function(p){e.tm1Data=e.getInitializedValue(p[0].Value);_.forEach(e.ngModel,function(q,u){if(angular.isUndefined(e.tm1Data[u])){e.tm1Data[u]=q}});e.ngModel=_.cloneDeep(e.tm1Data);e.saveThread=a(function(){if(!_.isEqual(e.ngModelCurrent,e.ngModel)){var u=angular.toJson(e.ngModel);e.populateCubeElements();var q={value:u,instance:e.tm1Instance,cube:e.tm1Cube,cubeElements:e.cubeElements};if(!e.savePending){e.savePending=true;m.cellPuts([q]).then(function(t){if(!t.success){k.error("Unable to save data");k.error(u);e.saveThread()}else{e.ngModelCurrent=_.cloneDeep(e.ngModel)}e.savePending=false})}}},e.saveDelay)})}},50)};e.$on("tm1.event.refresh",function(r,s){if(angular.isDefined(s)&&angular.isDefined(s.source)&&s.source==e.directiveID){}if(angular.isDefined(s)&&angular.isDefined(s.directiveName)&&s.directiveName==d.Name){}else{if(e.hasCompleteParams()){e.log("refresh: tm1.event.refresh");e.refreshData()}}});g.$observe("tm1Cube",function(q){if(e.hasCompleteParams()){e.log("refresh: tm1Cube");e.refreshData()}});g.$observe("tm1Elements",function(q){if(e.hasCompleteParams()){e.log("refresh: tm1Elements");e.refreshData()}});e.$watch("evaluateSpecialWords",function(r,s){if(r){m.applicationUser(e.tm1Instance).then(function(p){e.tm1Elements=e.tm1Elements.split("@UserName").join(p.Name);if(e.hasCompleteParams()){e.log("refresh: evaluateSpecialWords");e.refreshData()}})}});if(e.hasCompleteParams()){e.refreshData()}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiSubnm";d.Controller="Tm1UiSubnmCtrl";d.ControllerAs="tm1UiSubnmCtrl";d.Template="assets/html/tm1-ui-subnm.html";c.directive(d.Name,["$filter","tm1UiSettings","$filter","$timeout","$rootScope","$tm1Ui","$templateCache","$compile",function(a,m,a,b,n,l,o,k){return{restrict:"E",template:'<div class="tm1-ui-subnm"></div>',replace:true,scope:{id:"@",tm1Instance:"@",tm1Dimension:"@",tm1Hierarchy:"@",tm1Subset:"@",tm1Attribute:"@",tm1DefaultElement:"@",tm1InputSize:"@",tm1Mdx:"@",tm1MultiSelect:"=?",tm1ShowHierarchy:"=?",tm1Style:"@",tm1ServerMode:"=?",tm1BatchSize:"@",tm1UiClass:"@",tm1SelectOnly:"=?",tm1RadioOnly:"@",tm1OnLoad:"&",tm1OnChange:"&",tm1Change:"&",tm1BindModel:"=?",tm1Api:"=?",tm1Debug:"=?",tm1DebounceTime:"@",ngModel:"=?"},link:function(j,h,g,e,f){j.input={text:""};j.selectedElement={};j.batchRequestEnabled=m.batchingElementRequestEnabled;j.tm1DefaultElement=(j.tm1DefaultElement==undefined)?"":j.tm1DefaultElement;j.directiveID=l.helperGenerateUUID();j.activeIndex=-1;j.mouseOverIndex=-1;j.dataLoadComplete=false;j.requestingData=false;j.subelementIsSelected=false;j.isMultiSelect=false;j.pressedKeyCode=-1;j.showHierarchy=true;j.debounceTime=100;j.showDropdown=false;j.selectOnlyMode=false;j.radioOnlyMode=false;j.entry={radio:""};j.customClass="";j.selectClasses=["form-control"];j.twoWayBind=false;j.ngModel="";j.priorKeyCode=-1;j.debug=false;j.directiveClasses="";j.batchSize=15;j.isTextInputChange=false;j.isModelInitialized=false;j.hasOnLoadFunction=false;j.hasOnChangeFunction=false;j.hasChangeFunction=false;j.skipOnChangeOnce=true;j.constants={HIERARCHY_SEPARATOR:"::"};j.log=function(q){j.logObj(q,{message:q})};j.logObj=function(s,r){if(j.debug){n.$broadcast(m.frameworkLogID,{id:j.directiveID,name:d.Name,message:s,object:r})}};if(!_.isEmpty(g.tm1ShowHierarchy)){j.showHierarchy=j.tm1ShowHierarchy}if(angular.isUndefined(g.ngModel)){throw"ng-model is a required attribute."}else{if(!_.isEmpty(g.ngModel)&&g.ngModel.indexOf("=")!=-1){j.isModelInitialized=true}}if(angular.isUndefined(g.tm1Instance)){throw"tm1-instance is a required attribute."}if(angular.isDefined(g.tm1Instance)&&_.isEmpty(j.tm1Instance)){throw"tm1-instance cannot be empty."}if(angular.isDefined(g.tm1DebounceTime)&&!_.isEmpty(j.tm1DebounceTime)){j.debounceTime=_.toNumber(j.tm1DebounceTime)}if(angular.isDefined(g.tm1SelectOnly)&&j.tm1SelectOnly){j.selectOnlyMode=true}if(angular.isDefined(g.tm1BindModel)&&j.tm1BindModel){j.bindModel=true}if(angular.isDefined(g.tm1RadioOnly)){if(!(j.tm1RadioOnly.trim().toLowerCase()=="vertical"||j.tm1RadioOnly.trim().toLowerCase()=="horizontal")){throw'tm1-radio-only can only be "vertical" or "horizontal". Please check.'}j.radioOnlyMode=true;if(j.selectClasses&&angular.isArray(j.selectClasses)){j.selectClasses.length=0}else{j.selectClasses=[]}if(j.tm1RadioOnly.trim()=="horizontal"){j.selectClasses.push("radio-inline")}else{j.selectClasses.push("radio")}}if(angular.isDefined(g.tm1ShowHierarchy)&&j.selectOnlyMode){throw'Please remove tm1-show-hierarchy attribute. This will defaulted to "false" since tm1-select-only is "true"'}else{if(j.selectOnlyMode){j.showHierarchy=false}}if(angular.isDefined(g.tm1ShowHierarchy)&&j.radioOnlyMode){throw'Please remove tm1-show-hierarchy attribute. This will defaulted to "false" since tm1-radio-only is "true"'}else{if(j.radioOnlyMode){j.showHierarchy=false}}if(j.selectOnlyMode&&j.radioOnlyMode){throw"Please choose between tm1-select-only or tm1-radio-only. It CANNOT be BOTH."}if(angular.isDefined(g["class"])&&!_.isEmpty(j["class"])){j.customClass=j["class"];j.selectClasses.push(j["class"])}if(!_.isEmpty(j.tm1InputSize)){h.find("input").attr("size",j.tm1InputSize)}if(angular.isDefined(g.tm1Debug)&&j.tm1Debug){j.debug=true}if(angular.isDefined(g.tm1UiClass)&&!_.isEmpty(j.tm1UiClass)){j.directiveClasses=j.tm1UiClass}if(angular.isDefined(g.tm1ServerMode)&&j.tm1ServerMode){if(angular.isDefined(g.tm1SelectOnly)){throw"tm1-select-only CANNOT BE COMBINED with tm1-server-mode"}if(angular.isDefined(g.tm1RadioOnly)){throw"tm1-radio-only CANNOT BE COMBINED with tm1-server-mode"}if(angular.isDefined(g.tm1ShowHierarchy)){throw"tm1-show-hierarchy CANNOT BE COMBINED with tm1-server-mode"}if(angular.isDefined(g.tm1BatchSize)&&!_.isEmpty(j.tm1BatchSize)){j.batchSize=parseInt(j.tm1BatchSize);if(j.batchSize<1){throw"tm1-batch-size value CANNOT BE LESS than 1."}}j.showHierarchy=false}else{j.batchSize=0}if(angular.isDefined(g.tm1Api)){j.log("Directive API requested");j.tm1Api={getWatchers:function(q){return l.helperGetWatchers(h,q)},getWatchersCount:function(){return l.helperGetWatchersCount(h)},refreshData:function(){j.log("Directive API requested - Refreshing Data");if(arguments.length==1){j.log("refreshed through api call with String parameter: "+arguments[0]);j.input.text=arguments[0]}else{j.log("refreshed through api call!");e.refreshDataDebounced()}},getElements:function(){j.log("Directive API requested - Retrieving Elements");var s=function(p){var q={};q.key=p.Name;q.alias=p.Name;if(p.Attributes){_.forEach(p.Attributes,function(v,w){q.alias=v})}q.level=p.Level;q.index=p.Index;q.type=p.Type[0];return q};var r=function(q){var p=[];var u={};_.forEach(q,function(t){u={};u=s(t);if(t.Components&&t.Components.length>0){u.children=r(t.Components)}p.push(u)});return p};return r(j.elements)}}}j.isByMdxFlag=angular.isDefined(g.tm1Mdx)?true:false;if(angular.isDefined(g.tm1Change)){j.hasChangeFunction=true}if(angular.isDefined(g.tm1OnLoad)){j.hasOnLoadFunction=true}if(angular.isDefined(g.tm1OnChange)){j.hasOnChangeFunction=true}j.initTemplate=function(){var q="";if(!j.selectOnlyMode&&!j.radioOnlyMode){q+=o.get("assets/html/tm1-ui-subnm-tpl-input.html")}if(j.selectOnlyMode){q+=o.get("assets/html/tm1-ui-subnm-tpl-select.html")}else{if(j.radioOnlyMode){q+=o.get("assets/html/tm1-ui-subnm-tpl-radio.html")}else{if(j.showHierarchy){q+=o.get("assets/html/tm1-ui-subnm-tpl-hierarchy-full.html")}else{q+=o.get("assets/html/tm1-ui-subnm-tpl-hierarchy-flat.html")}}}h.append(q);if(j.id&&!_.isEmpty(j.id)){h.attr("id",j.id)}else{h.attr("id",j.directiveID)}k(h.contents())(j)};j.updateTemplate=function(){if(!j.selectOnlyMode&&!j.radioOnlyMode){if(j.showHierarchy){}else{var w=h.find("ul");w.empty();var v=0;var u="";_.forEach(j.elements,function(p){if(p.show){u+="<li";u+=' ng-mousedown="selectElement('+v+', $event)"';u+=">";u+=e.getDisplay(p,j.tm1Attribute);u+="</li>"}v++});if(j.listElementScope){j.listElementScope.$destroy();j.listElementScope=undefined}j.listElementScope=j.$new();var t=k(u)(j.listElementScope);w.append(t)}}};j.onSelectionChange=function(q){e.updateDirectiveStateModel(q)};j.textChange=function(){j.isTextInputChange=true;if(j.debug){var q=j.input.text;n.$broadcast(m.frameworkLogID,{id:j.directiveID,name:d.Name,message:"On textChange ["+q+"]"})}if(j.tm1ServerMode){e.refreshData(j.input.text)}else{e.updateElementDisplayFlag(j.input.text);j.updateTemplate()}};if(j.debug){j.$watch("input.text",function(r,s){n.$broadcast(m.frameworkLogID,{id:j.directiveID,name:d.Name,message:"new Value of text is ["+r+"], from ["+s+"]"})})}j.onCaret=function(){j.toggleDropDown()};j.onFocus=function(){j.toggleDropDown(true)};j.toggleDropDown=function(q){if(q){j.showDropdown=true}else{j.showDropdown=!j.showDropdown}if(j.showDropdown){h.find("input").select();h.find("div").each(function(s,p){if(angular.element(p).hasClass("tm1-subnm-plain-style")||angular.element(p).hasClass("tm1-subnm-hierarchy-style")){angular.element(p).css("width",h[0].offsetWidth+"px")}})}if(j.showHierarchy){setTimeout(function(){var p=h.find(".tm1-subnm-hierarchy-style")[0];if(p){p.scrollTop=0}},0)}};if(!j.showHierarchy){j.mouseOver=function(q){j.mouseOverIndex=q};j.mouseLeave=function(q){j.mouseOverIndex=-1};j.mouseMove=function(){e.showDropdown()}}else{if(j.showHierarchy){j.activeIdIndex=-1}}j.hasCompleteParams=function(){var q=true;if(_.isEmpty(j.tm1Dimension)){q=false}else{if(j.tm1Subset!=undefined&&_.isEmpty(j.tm1Subset)){q=false}else{if(j.tm1Attribute!=undefined&&_.isEmpty(j.tm1Attribute)){q=false}else{if(g.tm1MultiSelect!=undefined&&_.isEmpty(j.tm1Attribute)){q=false}else{if(j.isByMdxFlag&&_.isEmpty(j.tm1Mdx)){q=false}else{if(j.isByMdxFlag&&j.tm1Mdx.match(/\[\s*\]/g)!=null&&j.tm1Mdx.match(/\[\s*\]/g).length>0){q=false}}}}}}if(q&&j.isMultiSelect){if(j.ngModel&&angular.isArray(j.ngModel)){j.ngModel.length=0}else{j.ngModel=[]}}return q};j.updateOptionsWithHierarchyInfo=function(s){if(s){var r=undefined;if(j.tm1Dimension&&j.tm1Dimension.indexOf(j.constants.HIERARCHY_SEPARATOR)!=-1){r=j.tm1Dimension.split(j.constants.HIERARCHY_SEPARATOR)}s.dimension=j.tm1Dimension;if(!_.isNil(r)){s.dimension=r[0];s.hierarchy=r[1]}else{if(!_.isNil(j.tm1Hierarchy)){s.hierarchy=j.tm1Hierarchy}}}};if(!j.showHierarchy){j.selectElement=function(s,r){r.preventDefault();if(!j.subelementIsSelected){j.setSelectedElement(s);j.showDropdown=false}else{j.subelementIsSelected=false}};j.selectSubElement=function(t,v,u){j.subelementIsSelected=true;var w=_.findIndex(j.elements,function(p){return p.Name==u});if(w!=-1){j.setSelectedElement(w);j.showDropdown=false}else{e.refreshData(u);if(j.dataLoadComplete){w=_.findIndex(j.elements,function(p){return p.Name==u});j.setSelectedElement(w);j.showDropdown=false}}t.preventDefault()};j.setSelectedElement=function(q){j.activeIndex=q;e.updateDirectiveStateModel(j.elements[q])}}j.$on(d.Name+".event.refresh",function(q){e.refreshDataDebounced()});j.$on("tm1.event.refresh",function(q){});j.$on("login.success",function(q){e.refreshDataDebounced()});if(j.batchRequestEnabled){j.$on(m.batcherElementResponseID,function(r,s){if(!_.isEmpty(s&&s[j.directiveID])){if(e.indexes&&angular.isArray(e.indexes)){e.indexes.length=0}else{e.indexes=[]}e.elements=s[j.directiveID];j.elements=s[j.directiveID];j.dataLoadComplete=true;j.requestingData=false;if(_.isEmpty(e.searchFilter)&&!j.isTextInputChange){e.updateDirectiveState()}}})}g.$observe("tm1Dimension",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){e.refreshDataDebounced()}});if(angular.isDefined(g.tm1Subset)){g.$observe("tm1Subset",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){e.refreshDataDebounced()}})}if(angular.isDefined(g.tm1Attribute)){g.$observe("tm1Attribute",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){e.refreshDataDebounced()}})}if(angular.isDefined(g.tm1MultiSelect)){j.isMultiSelect=j.tm1MultiSelect;j.$watch("tm1MultiSelect",function(r,s){if(r!=s&&j.hasCompleteParams()){j.isMultiSelect=r}})}if(angular.isDefined(g.tm1ShowHierarchy)){j.$watch("tm1ShowHierarchy",function(r,s){if(r!=s){j.showHierarchy=r}})}if(j.bindModel){j.$watch("ngModel",function(r,s){j.tm1DefaultElement=r;e.refreshDataDebounced()})}if(angular.isDefined(g.tm1DefaultElement)){g.$observe("tm1DefaultElement",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){e.refreshDataDebounced()}})}if(angular.isDefined(g.tm1UiClass)){g.$observe("tm1UiClass",function(q){if(!_.isEmpty(j.directiveClasses)){angular.element(h).removeClass(j.directiveClasses)}j.directiveClasses=_.isEmpty(q)?"":q;if(!_.isEmpty(j.directiveClasses)){angular.element(h).addClass(j.directiveClasses)}})}if(angular.isDefined(g.tm1Mdx)){g.$observe("tm1Mdx",function(q){if(j.hasCompleteParams()){e.refreshDataDebounced()}})}j.initTemplate();if(j.hasCompleteParams()){e.refreshDataDebounced()}},controller:d.Controller,controllerAs:d.ControllerAs}}]);c.controller(d.Controller,["$scope","tm1UiSettings","$rootScope","$timeout","$tm1Ui","$log",function(m,n,o,k,l,b){var a=this;a.loopCount=0;a.loopLIMIT=10000;a.searchedElement={};a.tm1DefaultElement=m.tm1DefaultElement;a.searchFilter="";a.elements=[];a.indexes=[];a.keys={"8":"backspace","9":"tab","16":"shift","13":"enter","27":"escape","33":"pageUp","34":"pageDown","37":"leftArrow","38":"upArrow","39":"rightArrow","40":"downArrow","35":"end","36":"home","46":"del",backspace:8,tab:9,shift:16,enter:13,escape:27,pageUp:33,pageDown:34,end:35,home:36,leftArrow:37,upArrow:38,rightArrow:39,downArrow:40,del:46};a.showDropdown=function(){m.showDropdown=true};a.closeDropdown=function(){m.showDropdown=false};a.updateDirectiveStateModel=function(e){m.selectedElement=e;if(m.isMultiSelect){a.updateDirectiveStateModel_AddSelectedElement(e)}else{m.ngModel=m.selectedElement.Name;m.input.text=a.getDisplay(m.selectedElement,m.tm1Attribute);m.entry.radio=e;if(m.hasOnLoadFunction){m.hasOnLoadFunction=false;k(function(){m.tm1OnLoad({data:m.ngModel})})}if(m.hasOnChangeFunction){if(m.skipOnChangeOnce){m.skipOnChangeOnce=false}else{k(function(){m.tm1OnChange({data:m.ngModel})})}}if(m.hasChangeFunction){k(function(){m.tm1Change({data:m.ngModel})})}}};a.updateDirectiveStateModel_AddSelectedElement=function(e){var f=_.find(m.ngModel,function(g){return g==e.Name});if(!f){m.ngModel.push(e.Name)}m.input.text="";angular.forEach(m.ngModel,function(g){m.input.text=m.input.text+g+","});if(!_.isEmpty(m.input.text)){m.input.text=m.input.text.substr(0,m.input.text.length-1)}};a.updateDirectiveStateModel_RemoveSelectedElement=function(e){m.ngModel=_.remove(m.ngModel,function(f){return f!=e.Name});m.input.text="";angular.forEach(m.ngModel,function(f){m.input.text=m.input.text+f+","});if(!_.isEmpty(m.input.text)){m.input.text=m.input.text.substr(0,m.input.text.length-1)}};a.updateDirectiveState=function(){if(m.elements!=undefined&&m.elements.length>0){m.logObj("$scope.elements",m.elements);a.updateElementDisplayFlag("");m.updateTemplate();var e=false;if(!_.isEmpty(m.tm1DefaultElement)){a.loopCount=0;a.searchedElement={};angular.forEach(m.elements,function(h){if(!e){if(m.selectOnlyMode||m.radioOnlyMode){var g=a.findElementInList(m.tm1DefaultElement,m.elements);if(g){a.updateDirectiveStateModel(g);e=true}}else{a.findElement(m.tm1DefaultElement,h);if(!_.isEmpty(a.searchedElement)){a.updateDirectiveStateModel(a.searchedElement);e=true}}}})}if(!e){if(m.tm1ServerMode&&m.batchSize>0&&_.isEmpty(m.input.text)&&!_.isEmpty(m.tm1DefaultElement)){var f={attributes:m.tm1Attribute,mdx:"{["+m.tm1Dimension+"].["+m.tm1DefaultElement+"]}",batchSize:1,elementsOnly:!m.showHierarchy};m.updateOptionsWithHierarchyInfo(f);if(!_.isNil(f.hierarchy)){f.mdx="{["+f.dimension+"].["+f.hierarchy+"].["+m.tm1DefaultElement+"]}"}l.dimensionElements(m.tm1Instance,f.dimension,f).then(function(g){if(angular.isArray(g)&&g.length==1){m.elements.splice(m.elements.length-1,1,g[0]);a.updateDirectiveStateModel(g[0]);m.input.text=a.getDisplay(m.selectedElement,m.tm1Attribute);m.updateTemplate()}else{b.warn("DefaultElementNotFound -> "+m.tm1DefaultElement);b.warn(g)}})}else{a.updateDirectiveStateModel(m.elements[0])}}}else{m.ngModel=""}m.input.text=a.getDisplay(m.selectedElement,m.tm1Attribute)};a.updateElementDisplayFlag=function(f){function e(j,q){var h=a.getDisplay(j,m.tm1Attribute);if(h.toLowerCase().indexOf(q.toLowerCase())!=-1){j.show=true}else{j.show=false}if(j.Components&&j.Components.length>0){_.forEach(j.Components,function(p){e(p,f)})}}_.forEach(m.elements,function(h){e(h,f)});function g(j){if(j.Components&&j.Components.length>0){var h=false;_.forEach(j.Components,function(q){h=g(q);if(h){j.show=true}});return j.show}else{return j.show}}_.forEach(m.elements,function(h){if(g(h)){h.show=true}})};a.getDisplay=function(g,e){if(!_.isEmpty(e)&&!_.isEmpty(g.Attributes)&&!_.isEmpty(g.Attributes[e])){return g.Attributes[e]}else{if(angular.isDefined(m.tm1Subset)&&!_.isEmpty(g.Attributes)){var h=g.Name;var f=false;angular.forEach(g.Attributes,function(j,q){if(!f&&j.length>0){h=j;f=true}});return h}else{return g.Name}}};a.getSelectedElement=function(){return m.selectedElement};a.findElementInList=function(g,h){var f={};var e=false;angular.forEach(h,function(j){if(!e&&j.Name==g){f=j;e=true}});return f};a.findElement=function(f,e){a.loopCount++;if(!_.isEmpty(a.searchedElement)){return}if(e.Name==f){a.searchedElement=e}else{if(!_.isEmpty(e.Components)){angular.forEach(e.Components,function(g){a.findElement(f,g)})}}if(a.loopCount>a.loopLIMIT){throw"Exceeded loop limit of "+m.loopLimit+", breaking out now."}};a.refreshDataDebounced=_.debounce(function(){a.refreshData(null)},m.debounceTime);a.refreshData=function(f){if(!_.isEmpty(f)){a.showDropdown()}a.searchFilter=f;if(m.requestingData){return}m.requestingData=true;m.dataLoadComplete=false;if(m.batchRequestEnabled){var e={id:m.directiveID,element:{id:m.directiveID,instance:m.tm1Instance,dimension:m.tm1Dimension,attribute:m.tm1Attribute,subset:m.tm1Subset,mdx:m.tm1Mdx,filter:f,showHierarchy:m.showHierarchy,batchSize:m.batchSize,elementsOnly:!m.showHierarchy,defaultElement:m.tm1DefaultElement}};m.updateOptionsWithHierarchyInfo(e.element);o.$broadcast(n.batcherElementRequestID,e)}else{var g={attributes:m.tm1Attribute,subset:m.tm1Subset,mdx:m.tm1Mdx,filter:f,batchSize:m.batchSize,showHierarchy:m.showHierarchy,elementsOnly:!m.showHierarchy};m.updateOptionsWithHierarchyInfo(g);l.dimensionElements(m.tm1Instance,g.dimension,g).then(function(h){if(a.indexes&&angular.isArray(a.indexes)){a.indexes.length=0}else{if(a.indexes&&angular.isArray(a.indexes)){a.indexes.length=0}else{a.indexes=[]}}a.elements=h;m.elements=h;m.dataLoadComplete=true;m.requestingData=false;if(_.isEmpty(f)&&!m.isTextInputChange){a.updateDirectiveState()}else{if(m.batchSize>0){m.updateTemplate()}}})}};m.getDisplay=function(e){return a.getDisplay(e,m.tm1Attribute)};m.toggle=function(e){e.collapse=!e.collapse;return e.collapse};m.selectNode=function(e){a.updateDirectiveStateModel(e);m.showDropdown=false}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiSubsetEditor";d.Template="assets/html/tm1-ui-subset-editor.html";c.directive(d.Name,["$filter","tm1UiSettings","$tm1Ui","$rootScope","$timeout","$ngBootbox","$q","$compile","$templateCache","$translate","$log",function(p,r,b,o,v,t,q,s,u,w,a){return{restrict:"E",templateUrl:d.Template,replace:true,scope:{tm1Instance:"@",tm1Dimension:"@",tm1Hierarchy:"@",tm1Subset:"@",tm1Mdx:"@",tm1Elements:"@",tm1Options:"=?",tm1Debug:"=?",tm1DebugView:"=?",tm1Api:"=?",tm1UiClass:"@",ngModel:"=?"},link:function(f,e,j,g,h){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.constants={NO_SUBSET:"---",ADHOC_SUBSET:w.instant("SUBSETEXPRESSION"),ATTRIBUTETYPE_ALIAS:"Alias",DRILL_EXPAND:"DRILLDOWNMEMBER",DRILL_COLLAPSE:"DRILLUPMEMBER",CELLTYPE_CONSOLIDATED:"Consolidated"};f.selections={attributes:{},filterWildcardType:"contains",filterType:"attribute",levelFilter:{},selectedElements:[],selectedElementsCopy:[],allSelectedElements:[],subsetName:"",sortBy:"name",sortOrder:"ASC",sortWithinHierarchy:true,checked:[],checkedMap:{}};f.lists={levels:[],dimensionAttributes:[],dimensionAliases:[]};f.values={hierarchy:"",adhocSubsetEnabled:false,adhocSubsetObj:{Name:f.constants.ADHOC_SUBSET},directiveIsReady:false};f.directiveOptions={};f.directiveOptions.mdxPreferredAlias="";f.directiveOptions.hideSaveButton=false;f.directiveOptions.hideButtonGroupSubset=false;f.directiveOptions.hideButtonGroupAlias=false;f.directiveOptions.hideButtonGroupFilter=false;f.directiveOptions.hideButtonGroupSort=false;f.directiveOptions.hideButtonGroupSearch=false;f.directiveOptions.hideButtonAttributeToggle=false;f.directiveOptions.hideButtonMDX=false;f.directiveOptions.hideButtonRefresh=false;f.debug=false;f.debugView=false;f.log=function(l,k){if(f.debug){b.log(f.directiveID,d.Name,l,k)}};f.hasCompleteParams=function(){var k=true;if(_.isEmpty(f.tm1Instance)){k=false}if(k&&_.isEmpty(f.tm1Dimension)){k=false}if(k&&angular.isDefined(j.tm1Hierarchy)&&_.isEmpty(f.tm1Hierarchy)){k=false}if(k&&angular.isDefined(j.tm1Subset)&&_.isEmpty(f.tm1Subset)){k=false}if(k&&angular.isDefined(j.tm1Mdx)&&_.isEmpty(f.tm1Mdx)){k=false}if(k&&angular.isDefined(j.tm1Elements)&&_.isEmpty(f.tm1Elements)){k=false}return k};f.finalizeExpression=function(k){k=k.split("{dimension}").join(b.helperEscapeText(f.tm1Dimension));k=k.split("{hierarchy}").join(_.isNil(f.values.hierarchy)?b.helperEscapeText(f.tm1Dimension):b.helperEscapeText(f.values.hierarchy));return k};f.getSubsetEffectiveExpression=function(k){var l="";if(!_.isNil(k.ExpressionModified)&&!_.isEmpty(k.ExpressionModified)){l=k.ExpressionModified}else{if(!_.isNil(k.Expression)&&!_.isEmpty(k.Expression)){l=k.Expression}else{if(_.eq(k.Name,f.constants.NO_SUBSET)){if(f.values.supportAlternateHierarchies){l="{TM1SUBSETALL([{dimension}].[{hierarchy}])}"}else{l="{TM1SUBSETALL([{dimension}])}"}}else{if(f.values.supportAlternateHierarchies){l='{TM1SubsetToSet([{dimension}].[{hierarchy}],"'+k.Name+'")}'}else{l='{TM1SubsetToSet([{dimension}],"'+k.Name+'")}'}}}}return f.finalizeExpression(l)};f.resetDirectiveDebounced=_.debounce(function(k){var l=angular.extend({},{refreshData:true,subsetNameToSet:""},k);f.resetDirective().then(function(){if(l.refreshData){f.refreshData()}if(!_.isEmpty(l.subsetNameToSet)){f.onSubsetChange(l.subsetNameToSet)}})},200);f.resetDirective=function(){var k=q.defer();f.values.subsetObj=undefined;f.selections.subsetName="";f.selections.levelFilter={};f.selections.filterText="";f.refreshSubsets().then(function(l){f.refreshDimensionAttributeList().then(function(m){if(m.success){k.resolve({success:true})}else{k.reject({success:false,message:"Unable to refresh subsets",payload:m})}})},function(l){k.reject({success:false,message:"Unable to refresh subsets",payload:l})});return k.promise};f.generateDirectiveData=function(){var k={};k.dimension=f.tm1Dimension;k.hierarchy=f.values.hierarchy;if(f.values.subsetObj.HasChanged||_.eq(f.values.subsetObj.Name,f.constants.ADHOC_SUBSET)){k.mdx=f.getSubsetEffectiveExpression(f.values.subsetObj)}else{if(!_.eq(f.values.subsetObj.Name,f.constants.ADHOC_SUBSET)){k.subset=f.values.subsetObj.Name}}if(f.values.subsetObj.Alias&&!_.isEmpty(f.values.subsetObj.Alias)){k.alias=f.values.subsetObj.Alias}if(f.selections.selectedElements.length>0||f.selections.allSelectedElements.length>0){var l=f.selections.allSelectedElements.length>0?f.selections.allSelectedElements:f.selections.selectedElements;k.elementsSelected=[];_.forEach(l,function(m){k.elementsSelected.push({name:m.Name,alias:m.alias,type:m.Type,weight:m.Weight,level:m.Level,uniqueName:m.UniqueName,attributes:_.cloneDeep(m.Attributes)})})}if(angular.isDefined(j.ngModel)){f.ngModel=_.cloneDeep(k)}f.log("DirectiveDataGenerated",k);return k};f.saveElementSelections=function(l,k){_.forEach(k,function(n){var m=_.findIndex(l,function(y){return _.eq(y.UniqueName,n.UniqueName)});if(m==-1){l.push(n)}})};f.initAdhocSubset=function(k){f.values.adhocSubsetObj.ExpressionModified=k;f.values.adhocSubsetEnabled=true;f.selections.subsetName=f.values.adhocSubsetObj.Name};f.whenDirectiveIsReady=function(){var m=q.defer();var l=0;var k=setInterval(function(){if(f.values.directiveIsReady){clearInterval(k);m.resolve({success:true})}else{if(l>50){clearInterval(k);m.reject({success:false,message:"Maximum time waiting for directive to be ready has been reached. Check network connections."})}}l++},100);return m.promise};f.showHideElements=function(l,k,m){e.find(l).each(function(y,n){if(angular.element(n).hasClass(k)){if(m){angular.element(n).css("display","")}else{angular.element(n).css("display","none")}}})};if(angular.isDefined(j.tm1Debug)&&f.tm1Debug){f.debug=true}f.log("DebugEnabled");if(angular.isDefined(j.tm1DebugView)&&f.tm1DebugView){f.debugView=true}f.log("DebugViewEnabled");if(angular.isUndefined(j.tm1Instance)){throw"tm1-instance is a required attribute."}if(_.isEmpty(f.tm1Instance)){throw"tm1-instance is CANNOT BE EMPTY."}if(angular.isUndefined(j.tm1Dimension)){throw"tm1-dimension is a required attribute."}if(!_.isNil(f.tm1Mdx)){f.initAdhocSubset(f.tm1Mdx)}else{if(!_.isNil(f.tm1Subset)){f.selections.subsetName=f.tm1Subset}}if(angular.isDefined(j.tm1Hierarchy)){if(_.isEmpty(f.tm1Hierarchy)){f.values.hierarchy=f.tm1Dimension}else{f.values.hierarchy=f.tm1Hierarchy}}else{f.values.hierarchy=f.tm1Dimension}if(angular.isDefined(j.tm1Api)){f.log("Directive API requested");f.tm1Api={refreshData:function(){f.log("Refreshed through api call!");f.refreshData()},getModelData:function(){f.log("Retrieving model data of this directive");return f.generateDirectiveData()}}}f.gridOptions={enableFullRowSelection:true,enableRowHeaderSelection:false,modifierKeysToMultiSelect:true,columnDefs:[],data:[],onRegisterApi:function(k){f.gridApi=k;function l(m){f.selections.selectedElementsCopy=_.cloneDeep(m);if(m&&m.length>0){f.saveElementSelections(f.selections.allSelectedElements,f.selections.selectedElementsCopy);f.updateGridRowSelections()}else{f.selections.allSelectedElements.length=0}f.generateDirectiveData()}f.gridApi.selection.on.rowSelectionChanged(f,function(m){f.selections.selectedElements=_.cloneDeep(k.selection.getSelectedRows());l(f.selections.selectedElements)});f.gridApi.selection.on.rowSelectionChangedBatch(f,function(m){f.selections.selectedElements=_.cloneDeep(k.selection.getSelectedRows());l(f.selections.selectedElements)})}};f.updateGridColumnsAndData=function(k){if(f.gridOptions.columnDefs.length==0){f.gridOptions.columnDefs.push({name:"__checked",displayName:"",enableCellEdit:false,width:30,headerCellTemplate:'<div class="ui-grid-cell-contents text-center"></div>',cellTemplate:'<div class="ui-grid-cell-contents text-center click" >  <i ng-if="row.isSelected" class="fa fa-check-square-o" ></i>  <i ng-if="!row.isSelected" class="fa fa-square-o" ></i></div>'});f.gridOptions.columnDefs.push({name:"Elements",type:"string",width:300,visible:true,cellTemplate:'<div class="ui-grid-cell-contents"><span> <span ng-repeat="item in row.entity.indentation()" class="tm1-ui-indent"></span> <i ng-if="row.entity.Type == \'Consolidated\'" class="fa tm1-ui-subset-editor-expand-collapse-pointer" ng-class="row.entity.collapse ? \'fa-plus-square-o\' : \'fa-minus-square-o\'" ng-click="grid.appScope.toggleElement(row);$event.stopPropagation();"></i> <span ng-if="row.entity.Type == \'Numeric\'" class="tm1-ui-row-icon">#</span> <span ng-if="row.entity.Type == \'String\'" class="tm1-ui-row-icon">@</span> <span class="tm1-ui-indent">{{row.entity.alias}}</span></span></div>'});f.gridOptions.columnDefs.push({name:"Weight",displayName:w.instant("WEIGHT"),enableCellEdit:false,width:80,cellClass:"text-center",type:"number"})}f.gridOptions.columnDefs.length=3;_.forEach(f.lists.dimensionAttributes,function(l){if(f.selections.attributes&&f.selections.attributes[l.Name]){f.gridOptions.columnDefs.push({name:"Element.Attributes."+l.Name,displayName:l.Name,enableCellEdit:false,width:"*",type:"string",cellTemplate:'<div class="ui-grid-cell-contents"><span class="tm1-ui-indent"> <span ng-repeat="item in row.entity.indentation()" class="tm1-ui-indent"></span>{{row.entity.Attributes["'+l.Name+'"]}}</span></div>'})}});f.gridOptions.data.length=0;_.forEach(k,function(l){if(l.show){f.gridOptions.data.push(l)}});f.updateGridRowSelections()};f.updateGridRowSelections=function(){if(f.selections.allSelectedElements.length>0){v(function(){_.forEach(f.gridApi.grid.rows,function(k){var l=_.findIndex(f.selections.allSelectedElements,function(m){return _.eq(m.UniqueName,k.entity.UniqueName)});if(l!=-1){k.isSelected=true}});f.selections.selectedElementsCopy.length=0;f.selections.selectedElementsCopy=_.cloneDeep(f.selections.allSelectedElements)})}};f.addMoreElementProperties=function(k,l){f.values.levels={};var m="";_.forEachRight(k,function(n){n.uuid=b.helperGenerateUUID();n.alias=n.Name;if(!_.isNil(n.Attributes)&&f.values.subsetObj&&!_.isEmpty(n.Attributes[f.values.subsetObj.Alias])){n.alias=n.Attributes[f.values.subsetObj.Alias]}n.indentation=function(){var y=[];for(i=0;i<n.TopLevel;i++){y.push(i)}return y};if(!f.values.levels[""+n.TopLevel]){f.values.levels[""+n.TopLevel]=1}n.collapse=true;if(n.Type==f.constants.CELLTYPE_CONSOLIDATED&&!_.isEmpty(m)&&m.indexOf(n.UniqueName)!=-1){n.collapse=false}m="";if(n.Parents){_.forEach(n.Parents,function(y){m+=y.UniqueName})}});if(!(l&&l.skipLevelsUpdate)){f.lists.levels.length=0;_.forEach(f.values.levels,function(n,y){f.lists.levels.push(y)})}};f.refreshDimensionAttributeList=function(){var k=q.defer();b.dimensionAttributes(f.tm1Instance,f.tm1Dimension).then(function(l){if(l&&angular.isArray(l)){f.lists.dimensionAttributes=l;f.lists.dimensionAliases.length=0;_.forEach(f.lists.dimensionAttributes,function(m){if(_.eq(m.Type,f.constants.ATTRIBUTETYPE_ALIAS)){f.lists.dimensionAliases.push(m)}});k.resolve({success:true})}else{k.reject({success:false,message:"Unable to refresh attributes list"})}});return k.promise};f.refreshSubsets=function(){var k=q.defer();var l={hierarchy:f.values.hierarchy,forceUpdateCache:true};if(!_.isEmpty(f.tm1Dimension)){b.dimensionSubsets(f.tm1Instance,f.tm1Dimension,l).then(function(m){f.lists.subsets=m;if(angular.isArray(f.lists.subsets)&&f.values.adhocSubsetEnabled){f.lists.subsets.unshift(f.values.adhocSubsetObj)}if(angular.isArray(f.lists.subsets)){f.lists.subsets.unshift({Name:f.constants.NO_SUBSET,Alias:"",ExpressionModified:f.finalizeExpression("{[{dimension}].DefaultMember}")});_.forEach(f.lists.subsets,function(n){n.hasAlias=false;if(!_.isEmpty(n.Alias)){n.hasAlias=true}});k.resolve({success:true})}else{k.reject({success:false,message:"Unable to obtain a valid Subset Array",payload:m})}})}else{k.reject({success:false,message:"No dimension yet."})}return k.promise};f.refreshData=_.debounce(function(l){if(!f.values.subsetObj){return}var m={};var k=[];_.forEach(f.lists.dimensionAttributes,function(n){if(f.selections.attributes&&f.selections.attributes[n.Name]){k.push(n.Name)}});if(f.lists.dimensionAliases.length>0){_.forEach(f.lists.dimensionAliases,function(n){if(_.findIndex(k,function(y){return y==n.Name})==-1){k.push(n.Name)}})}if(k.length>0){m.attributes=k.join(",")}if(angular.isDefined(f.values.subsetObj.ExpressionModified)){m.mdx=f.values.subsetObj.ExpressionModified}else{if(f.values.supportAlternateHierarchies){m.mdx='{TM1SubsetToSet([{dimension}].[{hierarchy}], "'+f.values.subsetObj.Name+'")}'}else{m.mdx='{TM1SubsetToSet([{dimension}], "'+f.values.subsetObj.Name+'")}'}}if(!_.isEmpty(f.selections.search)){m.filter=f.selections.search}m.mdx=f.finalizeExpression(m.mdx);b.dimensionElements(f.tm1Instance,f.tm1Dimension,m).then(function(n){f.addMoreElementProperties(n);f.updateGridColumnsAndData(n);if(!(l&&l.skipCheckClear)){f.checkedRemoveAll()}f.generateDirectiveData()})},200);f.onSubsetChange=function(k){var l=undefined;_.forEach(f.lists.subsets,function(m){if(m.Name==k){l=m}});f.values.subsetObj=l;f.selections.subsetName=k;if(!_.isEmpty(f.directiveOptions.mdxPreferredAlias)){f.values.subsetObj.Alias=f.directiveOptions.mdxPreferredAlias;f.directiveOptions.mdxPreferredAlias=""}if(f.values.subsetObj&&f.values.subsetObj.Alias&&!_.isEmpty(f.values.subsetObj.Alias)){f.onAliasSelection(f.values.subsetObj.Alias)}f.refreshData()};f.onToggleAttributesColumns=function(k,l){if(k){k.stopPropagation()}if(l){if(!f.selections.attributes){f.selections.attributes={}}f.selections.attributes[l]=!f.selections.attributes[l]}f.refreshData({skipCheckClear:true})};f.onAliasSelection=function(l,k){f.values.subsetObj.HasChanged=false;if(k&&k.forceChange){f.values.subsetObj.HasChanged=true}_.forEach(f.gridOptions.data,function(m){m.alias=m.Name;if(m.Attributes&&m.Attributes[l]&&!_.isEmpty(m.Attributes[l])){m.alias=m.Attributes[l]}});f.generateDirectiveData()};f.onAliasRemove=function(){f.values.subsetObj.Alias="";f.values.subsetObj.HasChanged=true;_.forEach(f.gridOptions.data,function(k){k.alias=k.Name});f.generateDirectiveData()};f.toggleElement=function(m){f.values.subsetObj.HasChanged=true;var k=!m.entity.collapse;var l=m.entity.collapse?f.constants.DRILL_EXPAND:f.constants.DRILL_COLLAPSE;var y="["+f.tm1Dimension+"]";if(f.values.supportAlternateHierarchies&&!_.isNil(f.values.hierarchy)&&!_.isEmpty(f.values.hierarchy)){y+=".["+f.values.hierarchy+"]"}y+=".["+m.entity.Name+"]";var n={};n.id=f.directiveID;n.dimension=f.tm1Dimension;n.hierarchy=f.tm1Dimension;if(f.values.supportAlternateHierarchies&&!_.isNil(f.values.hierarchy)&&!_.isEmpty(f.values.hierarchy)){n.hierarchy=f.values.hierarchy}n.drillAction=l;n.uniqueName=y;n.mdx=f.getSubsetEffectiveExpression(f.values.subsetObj);b.dimensionApplyDrillAction(f.tm1Instance,f.tm1Dimension,n).then(function(x){f.values.subsetObj.ExpressionModified=x;f.refreshData({skipCheckClear:true})})};f.onShowMDXDefinition=function(){t.setDefaults({size:"medium"});var l=s(u.get("assets/html/tm1-ui-subset-editor-mdx-definition.html"));var m=f.$new();m.mdxHasChanged=false;m.mdx=f.getSubsetEffectiveExpression(f.values.subsetObj);f.editorLoaded=function(n){n.setTheme(o.uiPrefs.editorTheme);n.getSession().setMode("ace/mode/mdx");n.getSession().setOptions({tabSize:2,useSoftTabs:true});n.$blockScrolling=Infinity;n.setFontSize(o.uiPrefs.fontSize);n.setShowPrintMargin(false);n.setValue(m.mdx,-1)};f.editorChanged=function(n){m.newMDX=n[1].getValue();m.mdxHasChanged=m.mdx!=m.newMDX};var k={message:l(m),title:'<i class="fa fa-cube"></i>&nbsp;&nbsp;MDX',buttons:{warning:{label:w.instant("CANCEL"),className:"btn-default",callback:function(){m.$destroy()}},success:{label:w.instant("SAVE"),className:"btn-primary",callback:function(){if(m.mdxHasChanged||f.values.subsetObj.HasChanged){t.confirm("There were changes, this will override the current subset. Proceed?").then(function(){var n={};n.mdx=m.newMDX;n.hierarchy=f.values.hierarchy;n.alias=f.values.subsetObj.Alias;b.dimensionSubsetCreateOrUpdate(f.tm1Instance,f.tm1Dimension,f.selections.subsetName,n).then(function(y){f.refreshSubsets().then(function(x){if(x.success){f.refreshData()}m.$destroy()},function(x){m.$destroy()})})},function(){m.$destroy()})}else{t.alert("No changes made to the MDX.").then(function(){m.$destroy()})}}}}};t.customDialog(k)};f.onDeleteSubset=function(k){t.confirm("This will delete subset <strong>"+f.values.subsetObj.Name+"</strong>. Proceed?").then(function(l){var m={};m.hierarchy=f.values.hierarchy;b.dimensionSubsetDelete(f.tm1Instance,f.tm1Dimension,k,m).then(function(n){if(n.success){f.refreshSubsets().then(function(y){if(y.success){f.resetDirectiveDebounced({subsetNameToSet:f.constants.NO_SUBSET});t.alert("Successfully deleted subset!").then(function(){})}else{a.error("onDeleteSubset() ERROR 1");a.error(y);t.alert("Unable to delete subset. Please check logs.").then(function(){})}},function(y){a.error("onDeleteSubset() ERROR 2");a.error(y);t.alert("Unable to delete subset. Please check logs.").then(function(){})})}else{t.alert("Unable to delete subset. Please check logs.").then(function(){})}})},function(l){})};f.onSaveSubset=function(k){t.confirm("This will override existing subset definition for subset <strong>"+f.values.subsetObj.Name+"</strong>. Proceed?").then(function(l){var m={};m.mdx=f.getSubsetEffectiveExpression(f.values.subsetObj);m.hierarchy=f.values.hierarchy;m.alias=f.values.subsetObj.Alias;b.dimensionSubsetCreateOrUpdate(f.tm1Instance,f.tm1Dimension,f.selections.subsetName,m).then(function(n){if(n.success){f.refreshSubsets().then(function(y){if(y.success){f.resetDirectiveDebounced({subsetNameToSet:k});t.alert("Successfully updated subset!").then(function(){})}else{a.error("onSaveSubset() ERROR 1");a.error(y);t.alert("Unable to update subset. Please check logs.").then(function(){})}},function(y){a.error("onSaveSubset() ERROR 2");a.error(y);t.alert("Unable to update subset. Please check logs.").then(function(){})})}else{t.alert("Unable to update subset. Please check logs.").then(function(){})}})},function(l){})};f.onSaveSubsetAs=function(k){t.setDefaults({size:"medium"});var n=s(u.get("assets/html/tm1-ui-subset-editor-save-dialog.html"));var y=f.$new();var l="Subset Already Exists.";y.subsetName=k;y.isValidSubset=false;y.subsetValidationMessage=l;f.validateSubsetName=function(x){y.isValidSubset=false;var A={hierarchy:f.values.hierarchy,forceUpdateCache:true};b.dimensionSubsets(f.tm1Instance,f.tm1Dimension,A).then(function(z){var C=false;_.forEach(z,function(B){if(!C&&_.eq(B.Name,x)){C=true}});if(!C){y.subsetValidationMessage="";y.isValidSubset=true}else{y.subsetValidationMessage=l}})};var m={message:n(y),title:'<i class="fa fa-list"></i>&nbsp;&nbsp;'+w.instant("COPY")+"&nbsp;"+w.instant("SUBSET"),buttons:{warning:{label:w.instant("CANCEL"),className:"btn-default",callback:function(){y.$destroy()}},success:{label:w.instant("SAVE"),className:"btn-primary",callback:function(){if(y.isValidSubset){var x={};x.mdx=f.getSubsetEffectiveExpression(f.values.subsetObj);x.hierarchy=f.values.hierarchy;x.alias=f.values.subsetObj.Alias;b.dimensionSubsetCreateOrUpdate(f.tm1Instance,f.tm1Dimension,y.subsetName,x).then(function(A){if(A.success){f.refreshSubsets().then(function(z){if(z.success){f.resetDirectiveDebounced({subsetNameToSet:y.subsetName});t.alert("Successfully created a copy of this subset!").then(function(){y.$destroy()})}else{a.error("onSaveSubsetAs() ERROR 1");a.error(z);t.alert("Unable to save a copy of the subset. Please check logs.").then(function(){y.$destroy()})}},function(z){a.error("onSaveSubsetAs() ERROR 2");a.error(z);t.alert("Unable to save a copy of the subset. Please check logs.").then(function(){y.$destroy()})})}else{t.alert("Unable to save a copy of the subset. Please check logs.").then(function(){y.$destroy()})}})}else{t.alert("Subset name already exists. This will not be saved.").then(function(){y.$destroy()})}}}}};t.customDialog(m)};f.onSearch=function(k){f.saveElementSelections(f.selections.allSelectedElements,f.selections.selectedElementsCopy);f.refreshData({skipCheckClear:true})};f.keepElementsOnList=function(){var l=[];for(var k=0,m=f.selections.selectedElementsCopy.length;k<m;k++){l.push(f.selections.selectedElementsCopy[k].UniqueName)}f.values.subsetObj.ExpressionModified="{"+l.join(",")+"}";f.values.subsetObj.HasChanged=true;f.refreshData()};f.deleteElementsOnList=function(){var k=[];for(var l=0,n=f.selections.selectedElementsCopy.length;l<n;l++){k.push(f.selections.selectedElementsCopy[l].UniqueName)}var m="{"+k.join(",")+"}";f.values.subsetObj.ExpressionModified="{EXCEPT("+f.getSubsetEffectiveExpression(f.values.subsetObj)+","+m+")}";f.values.subsetObj.HasChanged=true;f.refreshData()};f.expandAll=function(){if(f.values.supportAlternateHierarchies){f.values.subsetObj.ExpressionModified=f.finalizeExpression("{TM1SUBSETALL([{dimension}].[{hierarchy}])}")}else{f.values.subsetObj.ExpressionModified=f.finalizeExpression("{TM1SUBSETALL([{dimension}])}")}f.selections.levelFilter={};f.selections.filterText="";f.values.subsetObj.HasChanged=true;f.refreshData()};f.expandSelectedElementOnList=function(){var k="";for(var l=0;l<f.selections.selectedElements.length;l++){k+=","+f.selections.selectedElements[l].UniqueName}f.values.subsetObj.ExpressionModified="{TM1DRILLDOWNMEMBER("+f.getSubsetEffectiveExpression(f.values.subsetObj)+",{"+k.substr(1)+"})}";f.values.subsetObj.HasChanged=true;f.refreshData({skipCheckClear:true})};f.onFilterLevelClick=function(l,k){l.stopPropagation();f.selections.levelFilter[k]=!f.selections.levelFilter[k]};f.onFilterLevelApply=function(){var k=[];_.each(f.selections.levelFilter,function(l,m){if(l){k.push(m)}});if(k.length){f.values.subsetObj.ExpressionModified="{TM1FILTERBYLEVEL("+f.getSubsetEffectiveExpression(f.values.subsetObj)+", "+k.join(",")+")}";f.values.subsetObj.HasChanged=true;f.refreshData()}};f.filterApply=function(){var k=f.selections.filterText;if(f.selections.filterType==="attribute"){k="[{dimension}].[{hierarchy}].["+b.helperEscapeText(f.selections.filterAttribute)+"] = '"+f.selections.filterText+"'"}f.values.subsetObj.ExpressionModified="{FILTER("+f.getSubsetEffectiveExpression(f.values.subsetObj)+", "+k+")}";f.values.subsetObj.HasChanged=true;f.selections.filterText="";f.refreshData()};f.filterWildcardApply=function(){var k=f.selections.wildcardFilter;if(f.selections.filterWildcardType==="contains"){k="*"+k+"*"}f.values.subsetObj.ExpressionModified="{TM1FILTERBYPATTERN("+f.getSubsetEffectiveExpression(f.values.subsetObj)+", '"+k+"')}";f.values.subsetObj.HasChanged=true;f.selections.wildcardFilter="";f.refreshData()};f.sortHierarchy=function(k){f.values.subsetObj.ExpressionModified="{HIERARCHIZE("+f.getSubsetEffectiveExpression(f.values.subsetObj)+")}";f.values.subsetObj.HasChanged=true;f.refreshData()};f.sortApply=function(){var l=f.selections.sortOrder;if(f.selections.sortBy==="index"){f.values.subsetObj.ExpressionModified="{TM1SORTBYINDEX("+f.getSubsetEffectiveExpression(f.values.subsetObj)+", "+l+" )}"}else{if(!f.selections.sortWithinHierarchy){l="B"+l}var k="[{dimension}].CurrentMember.Name";if(!_.isEmpty(f.selections.sortAttribute)){k="[{dimension}].["+b.helperEscapeText(f.selections.sortAttribute)+"]"}f.values.subsetObj.ExpressionModified="{ORDER("+f.getSubsetEffectiveExpression(f.values.subsetObj)+","+k+", "+l+" )}"}f.values.subsetObj.HasChanged=true;f.refreshData()};f.checkedRemoveAll=function(k){f.selections.selectedElements.length=0;f.selections.selectedElementsCopy.length=0;f.selections.allSelectedElements.length=0;_.forEach(f.gridApi.grid.rows,function(l){l.isSelected=false});f.generateDirectiveData()};f.checkedRemove=function(m,n,y){y.stopPropagation();f.selections.selectedElements.splice(n,1);f.selections.selectedElementsCopy.splice(n,1);var k=_.findIndex(f.selections.allSelectedElements,function(x){return _.eq(x.UniqueName,m.UniqueName)});if(k!=-1){f.selections.allSelectedElements.splice(k,1)}var l=_.find(f.gridApi.grid.rows,function(x){return x.entity.UniqueName==m.UniqueName});l.isSelected=false;f.generateDirectiveData()};f.checkedUp=function(k,l,m){m.stopPropagation();if(l>0){f.selections.selectedElementsCopy.splice(l,1);f.selections.selectedElementsCopy.splice(l-1,0,k)}};f.checkedDown=function(k,l,m){m.stopPropagation();f.selections.selectedElementsCopy.splice(l,1);if(l>=f.selections.selectedElementsCopy.length-1){f.selections.selectedElementsCopy.push(k)}else{f.selections.selectedElementsCopy.splice(l+1,0,k)}};f.$on(d.Name+".event.refresh",function(k){f.resetDirective().then(function(){f.refreshData()})});f.$on("tm1.event.refresh",function(k){f.resetDirective().then(function(){f.refreshData()})});if(angular.isDefined(j.tm1UiClass)){j.$observe("tm1UiClass",function(k){if(!_.isEmpty(f.directiveClasses)){angular.element(e).removeClass(f.directiveClasses)}f.directiveClasses=_.isEmpty(k)?"":k;if(!_.isEmpty(f.directiveClasses)){angular.element(e).addClass(f.directiveClasses)}})}if(angular.isDefined(j.tm1Dimension)){j.$observe("tm1Dimension",function(k){if(angular.isUndefined(j.tm1Hierarchy)){f.values.hierarchy=k}if(f.hasCompleteParams()){var l=f.values.adhocSubsetEnabled?f.constants.ADHOC_SUBSET:f.constants.NO_SUBSET;f.resetDirectiveDebounced({subsetNameToSet:l})}})}if(angular.isDefined(j.tm1Hierarchy)){j.$observe("tm1Hierarchy",function(k){f.values.hierarchy=k;if(f.hasCompleteParams()){var l=f.values.adhocSubsetEnabled?f.constants.ADHOC_SUBSET:f.constants.NO_SUBSET;f.resetDirectiveDebounced({subsetNameToSet:l})}})}if(angular.isDefined(j.tm1Mdx)){j.$observe("tm1Mdx",function(k){if(!_.isEmpty(k)){f.initAdhocSubset(k);if(f.hasCompleteParams()){f.resetDirectiveDebounced({subsetNameToSet:f.constants.ADHOC_SUBSET})}}})}if(angular.isDefined(j.tm1Elements)){j.$observe("tm1Elements",function(k){if(!_.isEmpty(k)){var l=b.helperConvertElementsToArray(f.tm1Elements);var m=_.cloneDeep(l);var n=0;_.forEach(l,function(y){if(f.values.supportAlternateHierarchies){m[n]="[{dimension}].[{hierarchy}].["+y+"]"}else{m[n]="[{dimension}].["+y+"]"}n++});f.initAdhocSubset("{"+m.join(",")+"}");if(f.hasCompleteParams()){f.resetDirectiveDebounced({subsetNameToSet:f.constants.ADHOC_SUBSET})}}})}if(angular.isDefined(j.tm1Subset)){j.$observe("tm1Subset",function(k){f.selections.subsetName=k;f.whenDirectiveIsReady().then(function(l){if(f.hasCompleteParams()){f.resetDirectiveDebounced({subsetNameToSet:f.selections.subsetName})}},function(l){a.error("On tm1Subset. Directive IS NOT READY YET.");a.error(l)})})}if(angular.isDefined(j.tm1Options)){f.$watch("tm1Options",function(k){f.directiveOptions=angular.merge({},f.directiveOptions,k);if(f.directiveOptions.hideButtonGroupSubset){f.showHideElements("div","tm1-se-btn-subset",false)}else{f.showHideElements("div","tm1-se-btn-subset",true)}if(f.directiveOptions.hideButtonGroupAlias){f.showHideElements("div","tm1-se-btn-alias",false)}else{f.showHideElements("div","tm1-se-btn-alias",true)}if(f.directiveOptions.hideButtonGroupFilter){f.showHideElements("div","tm1-se-btn-filter",false)}else{f.showHideElements("div","tm1-se-btn-filter",true)}if(f.directiveOptions.hideButtonGroupSort){f.showHideElements("div","tm1-se-btn-sort",false)}else{f.showHideElements("div","tm1-se-btn-sort",true)}if(f.directiveOptions.hideButtonGroupSearch){f.showHideElements("div","tm1-se-btn-search",false)}else{f.showHideElements("div","tm1-se-btn-search",true)}if(f.directiveOptions.hideButtonAttributeToggle){f.showHideElements("div","tm1-se-btn-attribute-toggle",false)}else{f.showHideElements("div","tm1-se-btn-attribute-toggle",true)}if(f.directiveOptions.hideButtonMDX){f.showHideElements("button","tm1-se-btn-mdx",false)}else{f.showHideElements("button","tm1-se-btn-mdx",true)}if(f.directiveOptions.hideButtonRefresh){f.showHideElements("button","tm1-se-btn-refresh",false)}else{f.showHideElements("button","tm1-se-btn-refresh",true)}if(f.hasCompleteParams()){f.resetDirectiveDebounced({subsetNameToSet:f.constants.NO_SUBSET})}})}b.applicationInstanceCapabilities(f.tm1Instance).then(function(k){if(!k.failed){f.values.supportAlternateHierarchies=k.AlternateHierarchies;f.values.directiveIsReady=true;f.log("InitAlternateHierarchySupport-"+f.values.supportAlternateHierarchies);if(f.hasCompleteParams()){if(f.values.adhocSubsetEnabled){f.log("InitAdhocSubset");f.resetDirectiveDebounced({subsetNameToSet:f.values.adhocSubsetObj.Name})}else{f.log("InitSubset");f.resetDirectiveDebounced({subsetNameToSet:f.constants.NO_SUBSET})}}}})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiSystem";d.Controller="Tm1UiSystemCtrl";d.Template="assets/html/tm1-ui-system.html";c.directive(d.Name,["$filter","tm1UiSettings","$http","$log",function(b,h,a,g){return{restrict:"E",templateUrl:d.Template,replace:true,scope:{name:"@",id:"@"},link:function(f,e,o,m,n){f.lists={systemProperties:[]};f.debug=false;if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(appSettings.showSystemDiagnostics){a.get("api/system").then(function(j){f.lists.systemProperties.length=0;_.forEach(j.data,function(l,k){f.lists.systemProperties.push({key:k,value:l})})},function(j){g.error(d.Name);g.error(j)})}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiTableMdx";d.Controller="Tm1UiTableMdxCtrl";d.Template="assets/html/tm1-ui-table-mdx.html";c.directive(d.Name,["$filter","tm1UiSettings","$tm1Ui","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{id:"@",tm1Instance:"@",tm1Cube:"@",tm1MdxId:"@",tm1MdxParameters:"=",tm1DimensionAttribute:"=",tm1Debug:"=",tm1UiClass:"@"},link:function(f,e,o,m,n){f.directiveID=b.helperGenerateUUID();f.directiveClasses="";f.hasPending=false;f.mdxId="";f.hasMdxParameters=false;f.hasDimensionAttributes=false;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isUndefined(o.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(f.tm1Instance)){throw"tm1-instance cannot be empty."}}if(angular.isUndefined(o.tm1Cube)){throw"tm1-cube is a required attribute."}if(angular.isUndefined(o.tm1MdxId)){throw"tm1-mdx-id is a required attribute."}if(angular.isDefined(o.tm1MdxParameters)){f.hasMdxParameters=true}if(angular.isDefined(o.tm1DimensionAttribute)){f.hasDimensionAttributes=true}if(o.id){e.attr("id",f.id)}f.hasCompleteParams=function(){var j=true;if(_.isEmpty(f.tm1MdxId)){j=false}else{if(_.isEmpty(f.tm1Cube)){j=false}else{if(f.hasMdxParameters){if(!_.isEmpty(f.tm1MdxParameters)){_.forEach(f.tm1MdxParameters,function(k,l){if(_.isEmpty(k)){j=false}})}}else{if(f.hasDimensionAttributes){if(!_.isEmpty(f.tm1DimensionAttribute)){_.forEach(f.tm1DimensionAttribute,function(k,l){if(_.isEmpty(k)){j=false}})}}}}}return j};f.refreshData=function(){m.refreshData({showLoading:false})};f.$on("tm1.event.refresh",function(j){if(f.hasCompleteParams()){m.refreshData()}});if(angular.isDefined(o.tm1UiClass)){o.$observe("tm1UiClass",function(j){f.directiveClasses=_.isEmpty(j)?"":j})}o.$observe("tm1Cube",function(j){if(!_.isEmpty(j)&&f.hasCompleteParams()){m.refreshData()}});o.$observe("tm1MdxId",function(j){f.mdxId=_.isEmpty(j)?"":j;if(f.hasCompleteParams()){m.refreshData()}});if(f.hasMdxParameters){f.$watch("tm1MdxParameters",function(k,j){if(f.hasCompleteParams()){m.refreshData()}})}if(f.hasDimensionAttributes){f.$watch("tm1DimensionAttribute",function(k,j){if(f.hasCompleteParams()){m.refreshData()}})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","$log",function(h,g,b){var a=this;a.refreshData=function(e){if(h.hasPending){return}else{h.hasPending=true}if(!e){e={showLoading:true}}if(e.showLoading){h.loading=true}g.cubeExecuteNamedMdx(h.tm1Instance,h.tm1MdxId,{parameters:h.tm1MdxParameters}).then(function(f){if(h.hasDimensionAttributes){h.dataset=g.resultsetTransform(h.tm1Instance,h.tm1Cube,f,{alias:h.tm1DimensionAttribute})}else{h.dataset=g.resultsetTransform(h.tm1Instance,h.tm1Cube,f)}var k={preload:false,watch:false};if(h.table){k.index=h.table.options.index;k.pageSize=h.table.options.pageSize}h.table=g.tableCreate(h,h.dataset.rows,k);h.hasPending=false;if(e.showLoading){h.loading=false}})}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiTableVirtualScroll";c.directive(d.Name,["$tm1Ui","$compile","$timeout","$window","$log",function(k,h,j,a,b){return{restrict:"A",scope:{tm1UiTableVirtualScroll:"=?",tm1UiTableVirtualScrollRows:"=?",tm1Debug:"="},link:function(f,q,p,g,o){f.directiveID=k.helperGenerateUUID();f.directiveCss="tm1-"+_.kebabCase("UiTableVirtualScroll");f.tableHeight="50px";f.priorEffectiveWidths=[];f.applyCellWidths=true;f.debug=false;f.log=function(m,l){if(f.debug){$rootScope.$broadcast(tm1UiSettings.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(p.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(p.tm1UiTableVirtualScroll)&&angular.isDefined(f.tm1UiTableVirtualScroll)&&angular.isDefined(f.tm1UiTableVirtualScroll.height)){f.tableHeight=f.tm1UiTableVirtualScroll.height}f.initTableStyle=function(){q.addClass(f.directiveCss);q.css({position:"relative",overflow:"hidden",borderCollapse:"collapse"});q.find("thead").each(function(m,l){angular.element(l).css({position:"relative",display:"block",overflow:"auto"})});q.find("tbody").each(function(m,l){angular.element(l).css({position:"relative",display:"block",overflow:"auto",height:f.tableHeight})})};f.getElementHeaderCount=function(){var l=0;if(angular.isDefined(f.tm1UiTableVirtualScrollRows)&&f.tm1UiTableVirtualScrollRows.length>0){l=f.tm1UiTableVirtualScrollRows[0].elements.length;l++}return l};f.getRowHeaderWithMaxCells=function(l){var m=0,n=0;q.find("thead tr").each(function(w,v){var u=angular.element(v).find("th").length;if(l>0&&w==0){u-=l}if(u>=n){n=u;m=w}});return m};f.setHeaderWidthsPrior=function(){if(f.priorEffectiveWidths.length>0){q.find("tbody tr:first-child td").each(function(m,l){angular.element(l).css({minWidth:f.priorEffectiveWidths[m]+"px",width:f.priorEffectiveWidths[m]+"px",maxWidth:f.priorEffectiveWidths[m]+"px"})})}};f.setHeaderWidths=function(){var u=[];var m=[],l=[];var n=f.getElementHeaderCount();var t=f.getRowHeaderWithMaxCells(n);q.find("thead tr").each(function(s,r){if(s==0){angular.element(r).find("th").each(function(x,y){if(x<n){u.push(angular.element(y).outerWidth());m.push(angular.element(y).outerWidth())}})}if(s==t){angular.element(r).find("th").each(function(x,y){if(s==0){if(x>=n){u.push(angular.element(y).outerWidth());m.push(angular.element(y).outerWidth())}}else{u.push(angular.element(y).outerWidth());m.push(angular.element(y).outerWidth())}})}});q.find("tbody tr:first-child td").each(function(s,r){var w=angular.element(r).outerWidth();l.push(w);if(w>u[s]){u[s]=w}});q.find("thead tr").each(function(s,r){if(s==0){angular.element(r).find("th").each(function(x,y){if(x<n){angular.element(y).css({minWidth:u[x]+"px",width:u[x]+"px"})}})}if(s==t){angular.element(r).find("th").each(function(y,A){if(s==0){angular.element(A).css({minWidth:u[y]+"px",width:u[y]+"px"})}else{var z=y+n;angular.element(A).css({minWidth:u[z]+"px",width:u[z]+"px"})}})}});if(f.applyCellWidths){q.find("tbody tr:first-child td").each(function(s,r){angular.element(r).css({minWidth:u[s]+"px",width:u[s]+"px"})})}f.priorEffectiveWidths.length=0;f.priorEffectiveWidths=_.cloneDeep(u)};f.directiveProcessingStart=function(){f.$emit(d.Name+".event.start");f.$broadcast(d.Name+".event.start")};f.directiveProcessingEnd=function(){f.$emit(d.Name+".event.finish");f.$broadcast(d.Name+".event.finish")};f.calculateVisibleRows=_.debounce(function(){f.setHeaderWidthsPrior();f.setHeaderWidths();f.checkCount=0;f.applyCellWidths=true;var l=setInterval(function(){var m=0,n=0;q.find("thead tr:first-child").each(function(u,t){n=angular.element(t).outerWidth()});q.find("tbody tr:first-child").each(function(u,t){m=angular.element(t).outerWidth()});if(n==m){f.directiveProcessingEnd();clearInterval(l)}else{if(m==0){f.directiveProcessingEnd();clearInterval(l)}else{if(Math.abs(n-m)<20){f.applyCellWidths=false;f.setHeaderWidths()}else{if(f.checkCount>10){b.error("UI Is taking awhile to render.");f.directiveProcessingEnd();clearInterval(l)}else{f.directiveProcessingStart();f.setHeaderWidths()}}}}f.checkCount++},500);f.$apply(function(){var v=q.find("tbody").scrollTop();var u=q.find("tbody tr:first-child").height();var m=q.find("tbody").height();var w=_.toInteger(m/u);var n=_.toInteger(v/u);f.$parent.$$tm1UiTableVirtualScroll={visibleIndexStart:n,visibleIndexEnd:n+w-1,visibleRowNoStart:n+1,visibleRowNoEnd:n+w}})},100);f.$on(d.Name+".event.recalculate",function(l){f.calculateVisibleRows()});f.$on(d.Name+".event.scroll-reset",function(l){q.find("tbody").scrollTop(0)});var e=_.debounce(function(){f.calculateVisibleRows()},50);q.find("tbody").scroll(e);$(window).bind("load resize",e);f.$on("$destroy",function(){$(window).unbind("load resize",e)});f.initTableStyle()}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiTable";d.Controller="Tm1UiTableCtrl";d.Template="assets/html/tm1-ui-table.html";d.Charts={line:true,bar:true};c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope","$log",function(a,j,h,k,b){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Id:"@id",tm1Mdx:"@",tm1Cube:"@",tm1View:"@",tm1ShowServerResponseTime:"=",tm1ShowChart:"=",tm1ChartType:"@",tm1ChartHeight:"@",tm1TableClass:"@",tm1UiClass:"@",tm1DataDecimal:"@",tm1Debug:"=",ngModel:"="},link:function(f,e,o,g,n){f.directiveID=h.newguid();f.tableId=f.directiveID;f.isCustomTableClass=false;f.mdxError=true;f.mdxData={};f.columnsIndex=[];f.rowsIndex=[];f.rowDimensionColumns=-1;f.mdxErrorMessage="Preparing MDX...";f.hasModel=false;f.mdxByView=false;f.NO_ACTION=0;f.PREPARING=1;f.WAITING_RESPONSE=2;f.FINISHED=3;f.requestStatus=f.NO_ACTION;f.showChart=false;f.chartType="bar";f.chartHeight=50;f.directiveClasses="";f.tableClasses="";f.debug=false;f.log=function(l){f.logObj(l,{message:l})};f.logObj=function(m,l){if(f.debug){k.$broadcast(j.frameworkLogID,{id:f.directiveID,name:d.Name,message:m,object:l})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(!o.tm1Instance){throw"tm1-instance is a REQUIRED attribute."}if((angular.isUndefined(o.tm1Mdx)&&angular.isUndefined(o.tm1View))||(angular.isDefined(o.tm1Mdx)&&angular.isDefined(o.tm1View))){throw"Please set either tm1-mdx OR tm1-view"}if(angular.isDefined(o.tm1View)){if(angular.isUndefined(o.tm1Cube)){throw"tm1-cube is a REQUIRED attribute when using tm1-view"}}if(angular.isDefined(o.tm1Cube)){if(angular.isUndefined(o.tm1View)){throw"tm1-view is a REQUIRED attribute when using tm1-cube"}}if(angular.isDefined(o.tm1Cube)||angular.isDefined(o.tm1View)){f.mdxByView=true}if(angular.isDefined(f.tm1Class)){f.tableClass=f.tm1Class;f.isCustomTableClass=true}if(angular.isDefined(f.tm1Id)){f.tableId=f.tm1Id}if(angular.isDefined(o.ngModel)){f.hasModel=true}if(angular.isDefined(f.tm1ShowChart)){f.showChart=f.tm1ShowChart}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isDefined(o.tm1TableClass)&&!_.isEmpty(f.tm1TableClass)){f.tableClasses=f.tm1TableClass}f.getColumnTitle=function(m){var l="";if(m>=f.rowDimensionColumns){angular.forEach(f.mdxData.Axes[0].Tuples[m-f.rowDimensionColumns].Members,function(q){l=l+","+q.Name});if(l.length>0){l=l.substr(1)}}else{l=f.mdxData.Axes[1].Hierarchies[m].Name}return l};f.getColumnData=function(A,B,y){var m="";if(B>=f.rowDimensionColumns){var z=1,x=1,C=B-f.rowDimensionColumns;for(var l=0;l<f.mdxData.Cells.length;l++){if((l!=0)&&l%f.mdxData.Axes[0].Tuples.length==0){z++;x=1}if(z==(A+1)&&(x==(C+1))){m=f.mdxData.Cells[l].Value;if(y&&angular.isDefined(o.tm1DataDecimal)&&!isNaN(f.tm1DataDecimal)){var w=parseInt(f.tm1DataDecimal);m=a("number")(m,w)}}x++}}else{m=f.mdxData.Axes[1].Tuples[A].Members[B].Name}return m};f.getRowData=function(l){var v=[];var u=1,x=1;var m="";var y="";for(var w=0;w<f.mdxData.Cells.length;w++){if((w!=0)&&w%f.mdxData.Axes[0].Tuples.length==0){u++;x=1}if(u==(l+1)){m="";angular.forEach(f.mdxData.Axes[0].Tuples[x-1].Members,function(p){m=m+"|"+p.Name});m=(m.length>0)?m.substr(1):m;if(angular.isNumber(f.mdxData.Cells[w].Value)){v.push({label:m,value:f.mdxData.Cells[w].Value});y=y+","+m+":"+f.mdxData.Cells[w].Value}else{v.push({label:m,value:0});y=y+","+m+":0"}}x++}if(y.length>0){y=y.substr(1)}return y};f.hasCompleteParams=function(){if(_.isEmpty(f.tm1Cube)||_.isEmpty(f.tm1View)){f.log("Still Awaiting for View or Cube");return false}f.log("Ready for retrieving cube data");return true};if(angular.isDefined(o.tm1Mdx)){o.$observe("tm1Mdx",function(l){if(!_.isEmpty(l)){f.log("MDX: "+l);g.refreshData()}})}if(angular.isDefined(o.tm1ShowChart)){f.$watch("tm1ShowChart",function(l,m){f.showChart=l})}if(angular.isDefined(o.tm1ChartType)){o.$observe("tm1ChartType",function(l){if(!_.isEmpty(l)){l=l.toLowerCase().trim();if(!d.Charts[l]){throw"Chart Type ["+l+"] Not Supported."}}})}if(angular.isDefined(o.tm1ChartHeight)){o.$observe("tm1ChartHeight",function(l){if(l>0){f.chartHeight=l}})}if(angular.isDefined(o.tm1UiClass)){f.$watch("tm1UiClass",function(l,m){f.directiveClasses=_.isEmpty(l)?"":l})}if(angular.isDefined(o.tm1TableClass)){o.$observe("tm1TableClass",function(l){f.tableClasses=_.isEmpty(l)?"":l})}if(angular.isDefined(o.tm1Cube)){f.$watch("tm1Cube",function(l,m){f.log("Cube: "+l);if(!_.isEmpty(l)){if(f.hasCompleteParams()&&f.requestStatus==f.NO_ACTION){g.refreshData()}}})}if(angular.isDefined(o.tm1View)){f.$watch("tm1View",function(l,m){f.log("View: "+l);if(!_.isEmpty(l)){if(f.hasCompleteParams()&&f.requestStatus==f.NO_ACTION){g.refreshData()}}})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","tm1UiSettings","$timeout","$tm1Ui",function(l,a,m,j,k){var b=this;b.refreshData=function(){l.mdxError=true;if(l.columnsIndex&&angular.isArray(l.columnsIndex)){l.columnsIndex.length=0}else{l.columnsIndex=[]}if(l.rowsIndex&&angular.isArray(l.rowsIndex)){l.rowsIndex.length=0}else{l.rowsIndex=[]}l.logObj("Sending Request...");l.requestStatus=l.WAITING_RESPONSE;var e=undefined;l.timeStart=_.now();l.timeEnd=0;if(l.mdxByView){e=k.cubeExecuteView(l.tm1Instance,l.tm1Cube,l.tm1View)}else{e=k.cubeExecuteMdx(l.tm1Instance,l.tm1Mdx)}e.then(function(f){l.log("Response Received ["+f+"]");l.timeEnd=_.now();l.mdxError=false;l.mdxData=f;b.prepareTableMetaData(l.mdxData);l.mdxData=b.addFormattedData(l.mdxData);if(l.hasModel&&angular.isDefined(l.mdxData.table)){if(l.ngModel&&angular.isArray(l.ngModel)){l.ngModel.length=0}else{l.ngModel=[]}angular.copy(l.mdxData.table,l.ngModel)}l.logObj("After Formatting Received Data",l.mdxData);l.requestStatus=l.NO_ACTION})};b.addFormattedData=function(f){if(f!=undefined){if(f.table&&angular.isArray(f.table)){f.table.length=0}else{f.table=[]}var B={};var x=f.Cells.length;var A=f.Axes[0].Cardinality;var z=f.Axes[1].Cardinality;var C=f.Axes[1].Hierarchies.length;var E=z*(A+C);f.table_column_count=A+C;if(l.dataColumns&&angular.isArray(l.dataColumns)){l.dataColumns.length=0}else{l.dataColumns=[]}for(var t=C;t<f.table_column_count;t++){l.dataColumns.push(t)}var g="";for(var D=0;D<(A+C);D++){g="col_"+(D+1);if(D<C){B[g]=f.Axes[1].Hierarchies[D].Name}else{B[g]=f.Axes[0].Tuples[D-C].Members[0].Name}}f.table.push(B);B={};var e=0;var y=1;for(var t=0;t<x;t++){if(y==1){B={};for(var h=1;h<=C;h++){g="col_"+h;B[g]=f.Axes[1].Tuples[e].Members[0].Name;e++}}g="col_"+(C+y);B[g]=f.Cells[t].Value;y++;if(y==(A+C)){f.table.push(B);y=1;B={}}}}return f};b.prepareTableMetaData=function(e){var f=-1,h=-1;l.rowDimensionColumns=e.Axes[1].Hierarchies.length;f=e.Axes[0].Tuples.length;f=f+l.rowDimensionColumns;for(var g=0;g<f;g++){l.columnsIndex.push(g)}h=e.Cells.length/e.Axes[0].Tuples.length;for(var g=0;g<h;g++){l.rowsIndex.push(g)}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiUpload";d.Controller="Tm1UiUploadCtrl";d.Template="assets/html/tm1-ui-upload.html";c.directive(d.Name,["Upload","tm1UiSettings","$tm1Ui","$rootScope","$translate","$filter","$http",function(m,n,l,o,k,b,a){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1MaxSize:"@",tm1DisplayName:"@",tm1ImageOptions:"=",tm1Debug:"=",tm1UiClass:"@",tm1Path:"@",tm1AfterUpload:"&",tm1RetainName:"=?",ngModel:"="},link:function(j,h,g,e,f){j.directiveID=l.helperGenerateUUID();j.directiveClasses="";j.hasModel=false;j.maxSize="5";j.errorMessage="";j.retainName=false;j.displayMessage="";j.TRANSLATE_ON_READY="UPLOADFILE";j.TRANSLATE_ON_UPLOADING="UPLOADINGFILE";j.MESSAGE_ON_READY=j.TRANSLATE_ON_READY;j.MESSAGE_ON_UPLOADING=j.TRANSLATE_ON_UPLOADING;j.STATUS_ON_READY=1;j.STATUS_ON_UPLOADING=2;j.status=j.STATUS_ON_READY;j.internalFilePath="";j.debug=false;j.log=function(q){j.logObj(q,{message:q})};j.logObj=function(s,r){if(j.debug){o.$broadcast(n.frameworkLogID,{id:j.directiveID,name:d.Name,message:s,object:r})}};if(angular.isDefined(g.tm1Debug)&&j.tm1Debug){j.debug=true}if(angular.isDefined(g.tm1UiClass)&&!_.isEmpty(j.tm1UiClass)){j.directiveClasses=j.tm1UiClass}if(angular.isUndefined(g.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(j.tm1Instance)){throw"tm1-instance cannot be empty."}}if(angular.isDefined(g.ngModel)){j.hasModel=true}if(angular.isDefined(g.tm1MaxSize)&&!_.isEmpty(j.tm1MaxSize)){j.maxSize=j.tm1MaxSize}if(angular.isDefined(g.tm1RetainName)&&j.tm1RetainName){j.retainName=true}k(j.TRANSLATE_ON_READY).then(function(q){if(angular.isDefined(g.tm1DisplayName)){j.MESSAGE_ON_READY=j.tm1DisplayName}else{j.MESSAGE_ON_READY=q}});k(j.TRANSLATE_ON_UPLOADING).then(function(q){j.MESSAGE_ON_UPLOADING=q});l.applicationInstance(j.tm1Instance).then(function(q){});j.upload=function(){j.status=j.STATUS_ON_UPLOADING;j.logObj("upload.file",j.upload.file);a.post("api/files/"+j.tm1Instance+"/upload-parameter/save",{internalInstancePath:j.internalFilePath}).then(function(r,s){if(l.helperIsSuccessful(r)){m.upload({url:"api/file/upload/"+j.tm1Instance+"?retain-name="+j.retainName,data:{file:j.upload.file}}).then(function(p){j.logObj("upload.files status",p);if(l.helperIsSuccessful(p)){if(j.hasModel){j.ngModel=p.data[0]}if(angular.isDefined(g.tm1AfterUpload)){j.log("executeAfterSuccessfulUpload() - Custom Function Found");j.tm1AfterUpload({file:p.data[0]})}l.dataRefresh();j.upload.file=undefined}j.status=j.STATUS_ON_READY},function(p){j.logObj("upload failed",p)},function(q){j.logObj("upload status",q);var p=parseInt(100*q.loaded/q.total);j.progress=p+"% "+q.config.data.file.name;j.logObj("upload status progressPercentage",p)})}else{$log.error(r)}})};j.onReceivedFile=function(A,C,y,z,w,B){j.errorMessage="";if(w&&w.length>0){j.errorMessage="Error ["+w[0].$error+"]. Limit is ["+w[0].$errorParam+"]";try{j.errorMessage+=". Size: "+b("number")(y[0].size/1000000,2)+" MB"}catch(x){}}};if(angular.isDefined(g.tm1UiClass)){j.$watch("tm1UiClass",function(r,s){j.directiveClasses=_.isEmpty(r)?"":r})}if(angular.isDefined(g.tm1Path)){g.$observe("tm1Path",function(q){j.internalFilePath=q.split(" ").join("")})}if(angular.isDefined(g.tm1RetainName)){j.$watch("tm1RetainName",function(r,s){j.retainName=r?true:false})}j.$watch("status",function(r,s){switch(r){case j.STATUS_ON_READY:j.displayMessage=j.MESSAGE_ON_READY;break;case j.STATUS_ON_UPLOADING:j.displayMessage=j.MESSAGE_ON_UPLOADING;break;default:j.displayMessage=j.MESSAGE_ON_READY}});j.status=j.STATUS_ON_READY},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$tm1Ui","tm1UiSettings","$log",function(j,h,k,b){var a=this}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiUser";d.Controller="Tm1UiUserCtrl";d.Template="assets/html/tm1-ui-user.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$rootScope",function(a,g,b,h){return{restrict:"E",templateUrl:d.Template,transclude:false,replace:true,scope:{tm1Instance:"@",tm1Debug:"=?",tm1UiClass:"@",ngModel:"=?"},link:function(f,e,o,m,n){f.directiveID=b.newguid();f.directiveClasses="";f.hasInstance=false;f.hasModel=false;f.usersInfo=undefined;f.debug=false;f.log=function(j){f.logObj(j,{message:j})};f.logObj=function(j,k){if(f.debug){h.$broadcast(g.frameworkLogID,{id:f.directiveID,name:d.Name,message:j,object:k})}};if(angular.isDefined(o.tm1Debug)&&f.tm1Debug){f.debug=true}if(angular.isDefined(o.tm1UiClass)&&!_.isEmpty(f.tm1UiClass)){f.directiveClasses=f.tm1UiClass}if(angular.isDefined(o.tm1Instance)){f.hasInstance=true}if(angular.isDefined(o.ngModel)){f.hasModel=true}if(o.id){e.attr("id",f.id)}if(o.name){e.attr("name",f.name)}f.$on(d.Name+".event.refresh",function(j){m.refreshData()});f.$on("tm1.event.refresh",function(j){m.refreshData()});if(f.hasInstance){o.$observe("tm1Instance",function(j){f.log("Instance Receveid "+j);if(!_.isEmpty(j)){m.refreshData()}})}else{m.refreshData()}if(angular.isDefined(o.tm1UiClass)){o.$observe("tm1UiClass",function(j){f.directiveClasses=_.isEmpty(j)?"":j})}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","$tm1UiHelper","tm1UiSettings","$log","$tm1Ui",function(m,a,n,o,k,l){var b=this;b.updateModel=function(e){m.log("ng-model was defined: "+m.hasModel);if(m.hasModel){var f={};angular.copy(e,f);m.ngModel=f}};b.refreshData=function(){if(m.hasInstance){l.applicationUser(m.tm1Instance).then(function(e){m.logObj("User Info Received",e);m.usersInfo=e;b.updateModel(e)})}else{l.applicationUsers().then(function(e){m.logObj("Users Info Received",e);m.usersInfo=e;b.updateModel(e)})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiBase";d.Controller="Tm1UiBaseCtrl";d.Template="assets/html/tm1-ui-base.html";c.directive("autoHeight",["$window",function(a){return{restrict:"EA",transclude:true,replace:true,scope:{autoHeightOptions:"="},template:'<div class="auto-height" ng-class="{\'auto-height-scroll\': !autoHeightOptions.noScroll}" ng-transclude ></div>',link:function(k,b,h){var j=_.throttle(function(){setTimeout(function(){var m=a.innerHeight;var e=b[0].getBoundingClientRect().top;if(e>0){var g=m-e-10;if(g<0){g=0}if(k.autoHeightOptions&&k.autoHeightOptions.updateChild){b.children().first().css("height",g+"px")}else{if(k.autoHeightOptions&&k.autoHeightOptions.updateElement){var f=b[0].getElementsByClassName(k.autoHeightOptions.updateElement);if(f){angular.element(f).css("height",g+"px")}}else{b.css("height",g+"px")}}if(k.divHeight!=g){k.divHeight=g;k.$emit("auto-height-changed");k.$broadcast("auto-height-changed")}}})});k.$on("auto-height-resize",function(){j()});angular.element(a).bind("resize",function(){j()});j()}}}]);c.directive("priorityIf",["$compile","$animate",function(b,a){return{multiElement:true,transclude:"element",priority:10000,terminal:true,restrict:"A",link:function(r,q,u,y,t){var v,s,x;function p(h){var e=h[0];var j=h[h.length-1];var f;for(var g=1;e!==j&&(e=e.nextSibling);g++){if(f||h[g]!==e){if(!f){f=$(h.slice(0,g))}f.push(e)}}return f||h}r.$watch(u.priorityIf,function w(e){if(e){if(!s){t(function(f,g){s=g;f[f.length++]=b.$$createComment("end priorityIf",u.priorityIf);v={clone:f};a.enter(f,q.parent(),q)})}}else{if(x){x.remove();x=null}if(s){s.$destroy();s=null}if(v){x=p(v.clone);a.leave(x).done(function(f){if(f!==false){x=null}});v=null}}})}}}]);c.directive("tableFixedHeader",["$rootScope","$compile","$timeout","$window",function(h,b,g,a){return{restrict:"A",scope:{},compile:function(f){var n=f.parent();var e=n.find("table");var m=e[0].outerHTML;var o=angular.element(m);o.find("tbody").remove();e.addClass("table-fixed-header-source");o.addClass("table-fixed-header-target");f.addClass("table-fixed-header");f.append(o);return{pre:function(j,k,l){},post:function(F,j,G){var k=j.parent();var H=j.find("table");var D=k.find(".table-fixed-header-source");var C=0;k.scroll(function(){I();J()});angular.element(a).bind("resize",function(){J()});F.$on("auto-height-resize",function(){J(true)});F.$parent.$watch(G.tableFixedHeader,function(p){F[G.tableFixedHeader]=p;if(!p){j.css("display","none")}setTimeout(function(){J()})});function B(){var p=$("<div>").css({visibility:"hidden",width:100,overflow:"scroll"}).appendTo("body"),q=$("<div>").css({width:"100%"}).appendTo(p).outerWidth();p.remove();return 100-q}function E(){j.css({width:k.innerWidth()-B()+"px"});var q=D.find("thead").find("tr");var p=H.find("thead").find("tr");_.each(q,function(s,r){_.each($(s).children(),function(t,v){var u=t.getBoundingClientRect().width;p.eq(r).children().eq(v).css({minWidth:u+"px",width:u+"px",maxWidth:u+"px"})})});if(F[G.tableFixedHeader]){setTimeout(function(){j.css("display","inherit")})}}function I(){var p=k.scrollLeft();if(Math.round(p)!=p){p=Math.round(p);l(p)}H.css({marginLeft:(-p)+".px"})}var l=_.debounce(function(p){k.scrollLeft(p)},100);var J=_.throttle(function(p){j.css({width:k.innerWidth()-B()+"px"});var r=k.scrollTop();if(F[G.tableFixedHeader]&&typeof F[G.tableFixedHeader]=="object"){var t=j.find("tbody").children().length;var v=k.height();v-=A();var u=K();var s=20;var w=v/u;var q=Math.max(0,(r/u)-w);w+=w*2;if(p){F[G.tableFixedHeader]["tableFixedHeader"]={start:q,end:q+w}}else{F.$apply(function(){F[G.tableFixedHeader]["tableFixedHeader"]={start:q,end:q+w}})}setTimeout(function(){E()})}},100);function A(){var p=j.find("thead");if(p.length){return p[0].getBoundingClientRect().height}return 30}function K(){if(C){return C}var p=j.find("tbody").find("tr");if(p.length){C=p[0].getBoundingClientRect().height}return 30}E();J()}}}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiWatcher";d.Controller="Tm1UiWatcherCtrl";d.Template="assets/html/tm1-ui-watcher.html";c.directive(d.Name,["$tm1Ui","$compile",function(b,a){return{restrict:"E",templateUrl:d.Template,scope:true,link:function(l,k,o,m,n){l.directiveWatcherCount=b.helperGetWatchersCount(k);console.info(d.Name+" WatcherCount: %o",l.directiveWatcherCount);l.watcherCount=0;l.set=0;console.info("InitialScope %o",l);l.setWatch=function(){l.set++;if(l.watchID){clearInterval(l.watchID);k.find("div").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-watcher-directive")){angular.element(e).empty()}})}k.append(l.html);a(k.contents())(l);console.info("UpdatedScope %o",l);l.watchID=setInterval(function(){l.watcherCount=b.helperGetWatchersCount(k)-l.directiveWatcherCount;console.info("DirectiveWatcherCount: %o",l.watcherCount)},1*1000)};l.$on("$destroy",function(){console.info(d.Name+" is to be destroyed..");clearInterval(l.watchID)})}}}])})();(function(){var c=angular.module("tm1Ui");var d={};d.Name="tm1UiWeb";d.Controller="Tm1UiWebCtrl";d.Template="assets/html/tm1-ui-web.html";c.directive(d.Name,["$filter","tm1UiSettings","uuid2","$window","$timeout","$rootScope","$tm1Ui",function(b,n,l,a,k,o,m){return{restrict:"E",templateUrl:d.Template,transclude:true,replace:true,scope:{name:"@",id:"@","class":"@",tm1Instance:"@",tm1Application:"@",tm1Cube:"@",tm1CubeView:"@",tm1Titles:"@",tm1ShowUrl:"=?",tm1ShowToolBar:"=?",tm1AccessType:"@",tm1Height:"@tm1Height",tm1Width:"@tm1Width",tm1UiClass:"@",tm1Debug:"=?"},link:function(j,h,g,e,f){j.directiveID=l.newguid();j.urlApi="UrlApi.jsp#";j.url="";j.urlWeb="";j.credentials="";j.error=false;j.errorMessage="";j.message="Loading...";j.isEmptySessionToken=false;j.isCubeViewer=true;j.hideToolBar=true;j.sessionToken="";j.hasTitles=false;j.hasCubeView=false;j.accessType="PUBLIC";j.initPage=false;j.iframeStyle={height:"100%",width:"100%","border-style":"none"};j.containerStyle={height:"400px",width:"100%"};j.DEFAULT_CUBE_VIEW="Default";j.retryCount=0;j.retryCountForSessionId=0;j.tm1WebUri="";j.adminHost="";j.tm1Server="";j.user="";j.pass="";j.camPassport="";j.tokenNotFoundErrorMessage="There was an error retrieving <strong>session token</strong> info. Check your browser's console.";j.directiveClassesPrior="";j.directiveClasses="";j.debug=false;j.log=function(s,r){if(j.debug){o.$broadcast(n.frameworkLogID,{id:j.directiveID,name:d.Name,message:s,object:r})}};if(angular.isDefined(g.tm1Debug)&&j.tm1Debug){j.debug=true}if(angular.isUndefined(g.tm1Instance)){throw"tm1-instance is a required attribute."}if(angular.isUndefined(g.tm1Application)&&angular.isUndefined(g.tm1Cube)){throw"tm1-application OR tm1-cube is a required attribute."}if(angular.isDefined(g.tm1Application)&&angular.isDefined(g.tm1Cube)){throw"Please choose EITHER tm1-application OR tm1-cube BUT NOT BOTH."}if(angular.isDefined(g.tm1Application)){j.isCubeViewer=false}if(angular.isDefined(g.tm1Titles)){j.hasTitles=true}if(angular.isDefined(g.tm1CubeView)){j.hasCubeView=true}if(angular.isDefined(g.tm1Height)&&!_.isEmpty(j.tm1Height)){j.containerStyle.height=j.tm1Height}if(angular.isDefined(g.tm1Width)&&!_.isEmpty(j.tm1Width)){j.containerStyle.width=j.tm1Width}if(angular.isDefined(g.tm1AccessType)&&!_.isEmpty(j.tm1AccessType)){j.accessType=j.tm1AccessType}j.hideToolBar=(angular.isDefined(g.tm1ShowToolBar)&&j.tm1ShowToolBar)?false:true;if(angular.isDefined(g.tm1UiClass)&&!_.isEmpty(j.tm1UiClass)){j.directiveClasses=j.tm1UiClass}j.hasCompleteParams=function(){var r=true;if(angular.isDefined(g.tm1Application)&&_.isEmpty(j.tm1Application)){r=false}else{if(angular.isDefined(g.tm1Titles)){var s=Papa.parse(j.tm1Titles);if(angular.isDefined(s.data)&&s.data.length==1&&s.data[0].length>0){angular.forEach(s.data[0],function(p){if((r&&_.isEmpty(p))||(!_.isEmpty(p)&&p.trim()=="")){r=false}else{if(r){var q=p.split("=");if(_.isEmpty(q[1])){r=false}}}})}}else{if(angular.isDefined(g.tm1Cube)&&_.isEmpty(j.tm1Cube)){r=false}else{if(angular.isDefined(g.tm1CubeView)&&_.isEmpty(j.tm1CubeView)){r=false}}}}return r};j.getUrlBase=function(){return j.isCubeViewer?j.urlApi+"HideToolbar="+j.hideToolBar+"&Action=Open&Type=CubeViewer&Cube=":j.urlApi+"HideToolbar="+j.hideToolBar+"&Action=Open&Type=WebSheet&Workbook="};j.getFormattedTitles=function(u){var s=Papa.parse(j.tm1Titles);var t="";angular.forEach(s.data[0],function(p){var q=p.split("=");t=t+"&Title_"+encodeURIComponent(q[0].trim())+"="+encodeURIComponent(q[1].trim())});t=t.substr(1);j.log("getFormattedTitles() titles: "+t);return t};j.getFormattedCube=function(){return encodeURIComponent(j.tm1Cube.trim())};j.getFormattedCubeView=function(){return encodeURIComponent(j.tm1CubeView.trim())};j.getFormattedApplication=function(){return encodeURIComponent(j.tm1Application.trim())};j.getWebViewerUrl=function(){var q="";if(j.isCubeViewer){q=j.getUrlBase()+j.getFormattedCube()+"&View="+j.DEFAULT_CUBE_VIEW;if(j.hasCubeView){q=j.getUrlBase()+j.getFormattedCube()+"&View="+j.getFormattedCubeView()}}else{q=j.getUrlBase()+j.getFormattedApplication()}if(j.hasTitles){q=q+"&"+j.getFormattedTitles(j.tm1Titles)}return q};j.updateWithSessionId=function(){if(_.isNil(j.tm1SessionId)){m.applicationSession(j.tm1Instance).then(function(q){if(q){j.tm1SessionId=q.tm1SessionId;j.tm1WebUri=q.tm1WebUri;e.updateSessionToken(j.tm1Instance)}else{j.retryCountForSessionId++;j.log("No session yet.");if(j.retryCountForSessionId==1){k(function(){j.updateWithSessionId()},3000)}}})}else{e.updateSessionToken(j.tm1Instance)}};j.refreshWebView=_.debounce(function(){j.log("refreshWebView()");if(!_.isEmpty(j.tm1Instance)){j.initPage=false;j.url=j.getWebViewerUrl();j.log("refreshWebView() - $scope.isAbleToUseTM1SessionId: "+j.isAbleToUseTM1SessionId);if(_.isNil(j.isAbleToUseTM1SessionId)){m.applicationInstanceCapabilities(j.tm1Instance).then(function(q){j.log("refreshWebView() capabilities",q);if(q.failed){j.log("refreshWebView() - failed")}else{if(q.TM1WebLoginWithTM1SessionId){j.log("refreshWebView() use TM1SessionID");j.isAbleToUseTM1SessionId=true;j.updateWithSessionId()}else{j.log("refreshWebView() use TM1WebToken");j.isAbleToUseTM1SessionId=false;e.updateSessionToken(j.tm1Instance)}}})}else{if(j.isAbleToUseTM1SessionId){j.updateWithSessionId()}else{e.updateSessionToken(j.tm1Instance)}}}},100);j.$on("tm1.event.refresh",function(r,s){if(j.hasCompleteParams()){j.refreshWebView()}});if(angular.isDefined(g.tm1Application)){g.$observe("tm1Application",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){j.refreshWebView()}})}if(angular.isDefined(g.tm1Titles)){g.$observe("tm1Titles",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){j.refreshWebView()}})}if(angular.isDefined(g.tm1Cube)){g.$observe("tm1Cube",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){j.refreshWebView()}})}if(angular.isDefined(g.tm1CubeView)){g.$observe("tm1CubeView",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){j.refreshWebView()}})}if(angular.isDefined(g.tm1AccessType)){g.$observe("tm1AccessType",function(q){if(!_.isEmpty(q)&&j.hasCompleteParams()){j.accessType=q;j.refreshWebView()}})}if(angular.isDefined(g.tm1ShowToolBar)){j.$watch("tm1ShowToolBar",function(r,s){if(j.hasCompleteParams()){j.hideToolBar=!r;j.refreshWebView()}})}if(angular.isDefined(g.tm1UiClass)){g.$observe("tm1UiClass",function(q){h.removeClass(j.directiveClassesPrior);j.directiveClasses=q;j.directiveClassesPrior=q;h.addClass(j.directiveClasses)})}if(j.hasCompleteParams()){j.refreshWebView()}},controller:d.Controller}}]);c.controller(d.Controller,["$scope","$http","$tm1UiHelper","tm1UiSettings","$rootScope","$timeout","$tm1Ui",function(n,a,o,p,q,l,m){var b=this;b.requestInProgress=false;b.updateSessionToken=function(e){n.log("updateSessionToken()");n.log("updateSessionToken() isAbleToUseTM1SessionId: "+n.isAbleToUseTM1SessionId);if(n.isAbleToUseTM1SessionId){b.requestInProgress=true;m.applicationInstance(n.tm1Instance).then(function(f){n.log("updateSessionToken() instanceConfiguration",f);if(f&&!f.failed){n.adminHost=f.AdminHost;if(_.isEmpty(n.adminHost)){n.adminHost="localhost"}n.tm1Server=f.ServerName;b.updateDirectiveState()}b.requestInProgress=false})}else{a.get("api/tokens/"+e).then(function(h,f){n.log("updateSessionToken() success",h);b.requestInProgress=true;n.retryCount++;n.log("getting session with status: "+h.status);if(o.isSuccessful(h)||h.status==404){n.log("updateSessionToken() success",h);if(!_.isEmpty(h.data.tm1WebUri)){n.log("updateSessionToken() on Success");n.sessionToken=h.data.sessionToken;n.tm1WebUri=h.data.tm1WebUri;n.adminHost=h.data.tm1AdminServer;n.tm1Server=h.data.tm1Server;n.user=h.data.username;n.pass=h.data.password;n.camPassport=h.data.camPassport;var g="Web Parts - ";g+="$scope.sessionToken: "+n.sessionToken;g+=", $scope.tm1WebUri: "+n.tm1WebUri;g+=", $scope.adminHost: "+n.adminHost;g+=", $scope.tm1Server: "+n.tm1Server;n.log(g);b.updateDirectiveState()}else{if(n.retryCount==1){n.log("updateSessionToken() retrying....");l(function(){b.updateSessionToken(e)},3*1000)}else{n.error=true;n.errorMessage=n.tokenNotFoundErrorMessage}}}else{n.error=true;n.errorMessage=n.tokenNotFoundErrorMessage}b.requestInProgress=false})}};b.updateDirectiveState=function(){n.log("updateDirectiveState()");n.credentials="&AccessType="+n.accessType;if(n.isAbleToUseTM1SessionId&&!_.isEmpty(n.tm1SessionId)){n.credentials+="&TM1SessionId="+n.tm1SessionId}else{if(!_.isEmpty(n.camPassport)){n.credentials+="&CAMPassport="+n.camPassport}else{if(!_.isEmpty(n.sessionToken)){n.credentials+="&SessionToken="+n.sessionToken}else{n.isEmptySessionToken=true}}}n.credentials+="&AdminHost="+n.adminHost+"&TM1Server="+n.tm1Server;if(!n.isEmptySessionToken){n.urlWeb=n.tm1WebUri+"/"+n.url+n.credentials;n.log("updateDirectiveState() URL: "+n.urlWeb);n.log("$scope.urlWeb "+n.urlWeb);n.initPage=true}}}])})();(function(){var b=angular.module("tm1Ui");b.filter("formatNumber",function(){var a=_.cloneDeep(accounting.settings);var d=accounting.settings.precision;return function(g,h,c){if(_.isFinite(g)){if(angular.isDefined(h)){a.currency.precision=h}else{a.currency.precision=d}return accounting.formatMoney(g,a.currency)}else{return g}}});b.filter("formatPercentage",function(){var a=_.cloneDeep(accounting.settings);var d=accounting.settings.precision;a.currency.format={pos:"%v%",neg:"(%v%)",zero:"-%"};return function(g,h,c){if(_.isFinite(g)){if(angular.isDefined(h)){a.currency.precision=h}else{a.currency.precision=d}g*=100;return accounting.formatMoney(g,a.currency)}else{return g}}});b.filter("gridNumber",function(){return function(a,d){if(a){return accounting.formatNumber(a.value,d)}else{return accounting.formatNumber(0,d)}}})})();(function(){var b=angular.module("tm1Ui.provider",["ui.router"])})();(function(){var b=angular.module("tm1Ui.provider");b.provider("tm1UiLogin",["$stateProvider",function(d){var a;this.$get=["$http","$state","$injector",function(c,h,g){return{setUpRoutes:function(){var e=g.get("$rootScope");c.get(a).then(function(f){var l=l.data;for(var m in l){if(!h.get(m)){d.state(m,l[m])}}if(!_.isEmpty(e)){e.$broadcast("tm1.event.states.loaded")}})}}}];this.setCollectionUrl=function(c){a=c}}])})();(function(){var b=angular.module("tm1Ui.provider");b.provider("tm1UiRouter",["$stateProvider",function(d){var a;this.$get=["$http","$state","$injector",function(c,h,g){return{setUpRoutes:function(){var e=g.get("$rootScope");c.get(a).then(function(f){for(var k in f.data){if(!h.get(k)){d.state(k,f.data[k])}}if(!_.isEmpty(e)){e.$broadcast("tm1.event.states.loaded")}})}}}];this.setCollectionUrl=function(c){a=c}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiApp",["$rootScope","$http","$q","tm1UiSettings","$base64","$tm1UiHelper","$log","$tm1UiInstance","$location",function(n,o,r,s,u,q,a,m,t){var p=this;p.debug=false;p.serviceID=q.generateUUID();p.log=function(d,c){a.debug("$tm1Ui - "+d);a.debug(c);if(p.debug){n.$broadcast(s.frameworkLogID,{id:p.serviceID,name:"$tm1UiApp",message:d,object:c})}};p.info=function(){var d=o.get("api/app/info");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.users=function(){var d=o.get("api/users");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.menus=function(){var d=o.get("api/app/menus");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.userMenus=function(){var d=o.get("api/app/menus-user");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.saveUserMenus=function(d){var e=o.post("api/app/menus-user",d);var c=c||r.defer();e.then(function(f){c.resolve({success:q.isSuccessful(f),message:f.data})},function(f){c.reject(f)});return c.promise};p.states=function(){var d=o.get("api/app/states");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.userStates=function(){var d=o.get("api/app/states-user");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.saveUserStates=function(c){var d=o.post("api/app/states-user",c);var e=e||r.defer();d.then(function(f){e.resolve({success:q.isSuccessful(f),message:f.data})},function(f){e.reject(f)});return e.promise};p.user=function(c){var d=o.get("api/users/"+c);var e=e||r.defer();d.then(function(f){e.resolve(f.data)},function(f){e.reject(f)});return e.promise};p.login=function(x,f,y,j){if(angular.isUndefined(x)||angular.isUndefined(f)){throw"instance and username are required fields."}if(angular.isUndefined(y)){y=""}var d=false;if(j&&j.silentlyFail){d=true}var g="";if(j&&j.cam){g=j.cam}var c=undefined;var e=1;if(angular.isDefined(g)&&!_.isEmpty(g)){e=5;c="CAMNamespace "+q.encode(f.trim()+":"+y+":"+g.trim())}else{c="Basic "+q.encode(f.trim()+":"+y)}var l={};var k=o.post("api/sessions/"+x+"/login",{authorizationHeader:c,integratedSecurityMode:e,silentlyFail:d});var h=h||r.defer();k.then(function(v){if(q.isSuccessful(v)){p.log("Successfully logged in!");if(!_.isNil(v.data)){l=_.cloneDeep(v.data)}p.user(x).then(function(w){q.logPage()});p.log("Now preparing session to save...");m.instances().then(function(A){var w=undefined;_.forEach(A,function(z){if(z.name==x){w=z}});w.isLoggedIn=true;w.userName=f;w.cam=g;p.log("Session object to save...",w);o.post("api/sessions/save",w).then(function(z,C){p.log("Session object is saved too!",v.data);m.configuration(x).then(function(B){var H=B.AdminHost;var I=B.ServerName;var G={};angular.copy(w,G);G.cam=g;G.username=f;G.tm1AdminServer=H;G.tm1Server=I;G.instance=x;if(!_.isNil(l)&&(!_.isNil(l.SessionToken)||!_.isNil(l.CAMPassport))){G.sessionToken=l.SessionToken;G.camPassport=l.CAMPassport;o.post("api/tokens/save",G).then(function(D,E){if(!q.isSuccessful(D)){a.error("unable to save tokens")}})}else{if(angular.isDefined(w.tm1WebUri)&&!_.isEmpty(w.tm1WebUri)){o({method:"POST",url:w.tm1WebUri+"/dwrx/jsonp/TM1Service/login",headers:{"Content-Type":"application/x-www-form-urlencoded"},transformRequest:function(E){var D=[];for(var F in E){D.push(encodeURIComponent(F)+"="+encodeURIComponent(E[F]))}return D.join("&")},data:{param0:H,param1:I,param2:f,param3:y}}).then(function(D,E){var F=D.data;if(!_.isNil(F)&&!_.isNil(F.reply)&&!_.isNil(F.reply.sessionToken)){G.sessionToken=F.reply.sessionToken;o.post("api/tokens/save",G).then(function(L,M){if(!q.isSuccessful(L)){a.error("unable to save tokens")}})}else{a.error("Framework is not ready for UrlApi");a.error(F)}},function(D){a.error("UrlApi is unavailable as token is not retrievable.");a.error("Framework is not ready for UrlApi. Check console for errors.");a.error(D)})}else{a.warn("URL API is not configured. tm1-ui-web directive is not supported.")}}});h.resolve({success:q.isSuccessful(v),message:v.data})})})}else{p.log("Unable to login. Check credentials passed.");h.resolve({success:false,message:v.data})}},function(v){h.reject(v)});return h.promise};p.extractCamPassportFromUrl=function(d){var e="";if(!_.isEmpty(d)&&d.indexOf("cam_passport")!=-1){var c=d.substr(d.indexOf("cam_passport"));c=c.split("&")[0];e=c.split("=")[1]}return e};p.extractPropertyValueFromUrl=function(d,e){var c="";if(!_.isEmpty(d)&&d.indexOf(e)!=-1){var f=d.substr(d.indexOf(e));f=f.split("&")[0];c=f.split("=")[1]}return c};p._retrieveCamPassport=function(d){var c="";var e=$.parseHTML(d);$.each(e,function(){var h="cam_passport=";var j="&CAMNamespace";if($(this).attr("content")&&$(this).attr("content").toLowerCase().indexOf(h)!=-1){var f=$(this).attr("content").substring($(this).attr("content").toLowerCase().indexOf(h));try{var k=f.split("&");_.forEach(k,function(l){if(l.indexOf(h)!=-1){f=l.split("=")[1]}})}catch(g){a.warn(g);f=f.substring(h.length);if(f.indexOf(j)!=-1){f=f.slice(0,f.indexOf(j))}}c=f}});return c};p.loginWithWindowsAuthentication=function(c){var d=d||r.defer();var e=o.post("api/sessions/login-wia?instance="+encodeURIComponent(c));e.then(function(f){if(q.isSuccessful(f)){p.user(c).then(function(g){q.logPage()});m.instances().then(function(h){var g=undefined;_.forEach(h,function(j){if(j.name==c){g=j}});g.isLoggedIn=true;o.post("api/sessions/save",g).then(function(j,k){if(q.isSuccessful(j)){d.resolve({success:true,message:"OK"})}else{a.error("UNABLE TO SAVE WIA SESSION");a.error(j);d.resolve({success:false,message:j.data})}})})}else{d.resolve({success:false,message:f.data})}},function(f){d.reject(f)});return d.promise};p.loginWithOIDC_AuthorizationFlow=function(c,d){var e=e||r.defer();var f=o.post("api/sessions/"+encodeURIComponent(c)+"/login-oidc",d);f.then(function(g){if(q.isSuccessful(g)){p.user(c).then(function(h){q.logPage()});m.instances().then(function(j){var h=undefined;_.forEach(j,function(k){if(k.name==c){h=k}});h.isLoggedIn=true;o.post("api/sessions/save",h).then(function(k,l){if(q.isSuccessful(k)){if(angular.isDefined(h.tm1WebUri)&&!_.isEmpty(h.tm1WebUri)){m.configuration(c).then(function(C){var A=C.AdminHost;var B=C.ServerName;var z={};angular.copy(h,z);z.tm1AdminServer=A;z.tm1Server=B;z.instance=c;o.post("api/tokens/save",z).then(function(v,w){if(!q.isSuccessful(v)){e.resolve({success:false,message:"unable to save SSO tokens"})}else{e.resolve({success:true,message:"TM1Web with SSO is Ready!"})}})})}else{e.resolve({success:true,message:"No TM1Web URL Found."})}}else{a.error("UNABLE TO SAVE SSO SESSION");a.error(k);e.resolve({success:false,message:k.data})}})})}else{e.resolve({success:false,message:g.data})}},function(g){e.reject(g)});return e.promise};p.loginWithCAMPassport=function(h,c,g){var d=d||r.defer();var f={authorizationHeader:"CAMPassport "+g,integratedSecurityMode:5};var e=o.post("api/sessions/"+h+"/login",f);e.then(function(j){if(q.isSuccessful(j)){p.user(h).then(function(k){q.logPage()});m.instances().then(function(l){var k=undefined;_.forEach(l,function(w){if(w.name==h){k=w}});k.isLoggedIn=true;k.cam=c;k.camPassport=g;o.post("api/sessions/save",k).then(function(x,y){if(q.isSuccessful(x)){if(angular.isDefined(k.tm1WebUri)&&!_.isEmpty(k.tm1WebUri)){m.configuration(h).then(function(w){var C=w.AdminHost;var v=w.ServerName;var B={};angular.copy(k,B);B.cam=c;B.tm1AdminServer=C;B.tm1Server=v;B.instance=h;B.camPassport=g;o.post("api/tokens/save",B).then(function(z,A){if(!q.isSuccessful(z)){d.resolve({success:false,message:"unable to save SSO tokens"})}else{d.resolve({success:true,message:"TM1Web with SSO is Ready!"})}})})}else{d.resolve({success:true,message:"No TM1Web URL Found."})}}else{a.error("UNABLE TO SAVE SSO SESSION");a.error(x);d.resolve({success:false,message:x.data})}})})}else{d.resolve({success:false,message:j.data})}},function(j){d.reject(j)});return d.promise};p.getOIDCConfiguration=function(c){p.log("getOIDCConfiguration() Retrieving OIDC URI for instance ["+c+"]");var d=o.get("api/instances/"+c+"/oidc-configuration");var e=e||r.defer();d.then(function(f){if(q.isSuccessful(f)){e.resolve(f.data)}else{a.error("$tm1UiApp: OIDC Configuration Retrieval Error");a.error(f);e.reject(f.data)}},function(f){a.error("$tm1UiApp: OIDC Configuration Retrieval Error");a.error(f);e.reject(f.data)});return e.promise};p.extractOIDCInfoFromUrl=function(e,c){var d={};d.code=p.extractPropertyValueFromUrl(e,"code");d.state=p.extractPropertyValueFromUrl(e,"state");d.instance=d.state.substr(0,d.state.indexOf(c.OIDC_STATE_SEPARATOR));d.appBaseUrl={protocol:t.protocol(),host:t.host(),port:t.port()};d.lastUrlBeforeAuthorization=d.state.substr(d.state.indexOf(c.OIDC_STATE_SEPARATOR)+c.OIDC_STATE_SEPARATOR.length);if(d.lastUrlBeforeAuthorization.indexOf(c.OIDC_STATE_SEPARATOR)!=-1){d.lastUrlBeforeAuthorization=d.lastUrlBeforeAuthorization.substr(0,d.lastUrlBeforeAuthorization.indexOf(c.OIDC_STATE_SEPARATOR))}return d};p.getCamUri=function(f,c){p.log("getCamUri() Retrieving CAM URI for instance ["+f+"] with Namespace ["+c+"]");var d=o.get("api/instances/"+f+"/settings");var e=e||r.defer();d.then(function(g){var h=g.data;o.get("api/instances/"+f+"/cam-uri").then(function(k){var y=k.data.split(" ");var j="";for(var l=0;l<y.length;l++){if(_.toLower(y[l])=="campassport"){j=y[l+1];break}}j=j.trim();if(_.last(j)==","){j=_.dropRight(j,1).join("")}var x=j;x+="?b_action=xts.run&m=portal/bridge.xts";if(!_.isNil(c)&&!_.isEmpty(c)){x+="&CAMNamespace="+c}x+="&c_env=portal/variables_TM1.xml&c_mode=get&c_cmd=";if(h.useSSORedirecWithBaseURL){x+=t.protocol()+"://";x+=t.host()+":"+t.port();x+=h.baseApp+"/"}else{x+=t.absUrl()}e.resolve(x)},function(j){a.error("$tm1UiApp: Client CAM Uri Retrieval Error");a.error(j);e.reject(j)})},function(g){a.error("$tm1UiApp: Instance settings retrieval error");a.error(g);e.reject(g)});return e.promise};p.getCamPassport=function(e,c){p.log("getCamPassport() Retrieving Passport for instance ["+e+"] with Namespace ["+c+"]");if(_.isEmpty(e)||_.isEmpty(c)){a.warn("getCamPassport() instance and/or camNamespace were not defined.")}var d=r.defer();m.instances().then(function(f){var g=undefined;_.forEach(f,function(j){if(j.name==e){g=j}});p.log("getCamPassport() Target Instance Found...",g);if(g&&g.useSSOWithCAM&&!_.isEmpty(g.clientCAMURI)){var h=g.clientCAMURI;h+="?b_action=xts.run&m=portal/bridge.xts";if(!_.isNil(c)&&!_.isEmpty(c)){h+="&CAMNamespace="+c}h+="&c_env=portal/variables_TM1.xml&c_mode=get&c_cmd=";h+=t.protocol()+"://";h+=t.host()+":"+t.port();h+=g.baseApp+"/";p.log("getCamPassport() Preparing URL for CAM Passport Request: "+h);o.get(h).then(function(j){p.log("getCamPassport() CAM Passport Response: "+j.data);if(q.isSuccessful(j)){var k=p._retrieveCamPassport(j.data);p.log("getCamPassport() CAM Passport Retrieved: "+k);if(_.isEmpty(k)){p.log("getCamPassport() UNABLE TO IDENTIFY PASSPORT. Please Check Response",j.data);return d.reject(j)}else{return d.resolve(p._retrieveCamPassport(j.data))}}else{a.error(j);throw"Unable to get cam passport via "+h}})}else{throw"Instance ["+e+"] is not configured/supported for CAM with SSO. Check help documentation for this."}});return d.promise};p.logout=function(c){if(angular.isUndefined(c)){throw"instance is a required field."}var d=o.get("api/sessions/"+c+"/delete");var e=e||r.defer();d.then(function(f){o.get("api/tokens/"+c+"/delete").then(function(g,h){p.log("logged out of UrlApi too",g)});e.resolve({success:q.isSuccessful(f),message:f.data})},function(f){e.reject(f)});return e.promise};p.sessions=function(){var d=o.get("api/sessions");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.session=function(c){var d=o.get("api/sessions/"+c);var e=e||r.defer();d.then(function(f){e.resolve(f.data)},function(f){e.reject(f)});return e.promise};p.loginCamPassportWithSavedSessionLoginInstance=function(f){var c={method:"POST",url:"api/sessions/session-instance-login",headers:{cam_passport:f}};var d=o(c);var e=e||r.defer();d.then(function(g){e.resolve({success:q.isSuccessful(g),message:g.data})},function(g){e.reject(g)});return e.promise};p.saveSessionLoginInstance=function(c){var d=o.post("api/sessions/"+encodeURIComponent(c.instance)+"/session-instance",c);var e=e||r.defer();d.then(function(f){e.resolve({success:q.isSuccessful(f),message:f.data})},function(f){e.reject(f)});return e.promise};p.getSessionLoginInstance=function(){var d=o.get("api/sessions/session-instance-login");var c=c||r.defer();d.then(function(e){c.resolve(e.data)},function(e){c.reject(e)});return c.promise};p.resetSessionLoginInstance=function(){var d=o.get("api/sessions/session-instance-login-reset");var c=c||r.defer();d.then(function(e){c.resolve({success:q.isSuccessful(e),message:e.data})},function(e){c.reject(e)});return c.promise};p.tryCamPassportLoginWithInstance=function(c){var d=o.post("api/sessions/"+encodeURIComponent(c)+"/relogin");var e=e||r.defer();d.then(function(f){e.resolve({success:q.isSuccessful(f),message:f.data})},function(f){e.reject(f)});return e.promise};p.fileDelete=function(c,f){if(angular.isUndefined(c)||angular.isUndefined(f)){throw"instance and relativeFilePath are required fields."}var g={id:q.generateUUID(),instance:c,relativeFilePath:f};var d=o.post("api/files/"+c+"/delete",g);var e=e||r.defer();d.then(function(h){e.resolve({success:q.isSuccessful(h),message:h.data})},function(h){e.reject(h)});return e.promise};p.fileGetText=function(c,f){if(angular.isUndefined(c)||angular.isUndefined(f)){throw"instance and relativeFilePath are required fields."}var d=o.get("api/file/text?instance="+encodeURIComponent(c)+"&file="+encodeURIComponent(f));var e=e||r.defer();d.then(function(g){e.resolve(g.data)},function(g){e.reject(g)});return e.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiChore",["$rootScope","$http","$q","$tm1UiHelper","$base64",function(a,h,l,m,k){var j=this;j.chores=function(e){var c=h.get("api/chores/"+encodeURIComponent(e));var d=d||l.defer();c.then(function(f){d.resolve(f.data)},function(f){d.reject(f)});return d.promise};j.chore=function(e,f){var c=h.get("api/chores/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/detail");var d=d||l.defer();c.then(function(g){d.resolve(g.data)},function(g){d.reject(g)});return d.promise};j.execute=function(f,e){var c=h.post("api/chores/"+encodeURIComponent(f)+"/"+encodeURIComponent(e)+"/execute");var d=d||l.defer();c.then(function(g){d.resolve({success:m.isSuccessful(g),message:g.data})},function(g){d.reject(g)});return d.promise};j.updateTasks=function(g,f,e){var c=h.post("api/chores/"+encodeURIComponent(g)+"/"+encodeURIComponent(f)+"/update-tasks",e);var d=d||l.defer();c.then(function(o){d.resolve({success:m.isSuccessful(o),message:o.data})},function(o){d.reject(o)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiCore",["$rootScope","$http","$q","$tm1UiHelper","tm1UiSettings","$log",function(o,j,m,n,a,l){var k=this;k.requestIDs=[];k.escape=function(c){if(c){c=c.split("/").join("|>");c=c.split("\\").join("<|");c=c.split("%").join("%25");c=c.split("#").join("%23")}return c};k.getToken=function(){var c=c||m.defer();var d={};d.url=a.tu;d.method=a.tum;d.headers={};d.headers[a.t]=a.tv;j(d).then(function(e){if(n.isSuccessful(e)){c.resolve(e.headers(a.t))}else{c.reject("")}},function(e){c.reject(e)});return c.promise};k.dbrBatched=function(f,g,h){var c={};if(h.length>=5){c=angular.isUndefined(h[4])?c:h[4]}var d=angular.isDefined(h[3])?h[3]:n.generateUUID();if(a.batchingDbrRequestEnabled){var q={id:d,dbr:{id:d,instance:f,cube:g,cubeElements:h[2],isValueOnly:c.isValueOnly}};if(!(angular.isArray(q.dbr.cubeElements)&&q.dbr.cubeElements.length>1)){throw"$tm1Ui: There must be at least 2 elements. "}var e=m.defer();o.$broadcast(a.batcherRequestID,q);o.$on(a.batcherResponseID,function(p,s){if(!_.isEmpty(s)){if(s[d]){e.resolve(s[d])}}else{e.reject({success:false,message:"No response received."})}});return e.promise}else{return k.multipleDbr([{id:d,instance:f,cube:g,cubeElements:h[2],isValueOnly:c.isValueOnly}])}};k.dbr=function(c,d,h){if(h.length<4){throw"$tm1Ui: Minimum number of arguments not met (instance, cube, element1, element2)."}var f=undefined;var u="";var e=0;_.forEach(h,function(p){if(e>=2&&angular.isDefined(p)){if(angular.isObject(p)){f=p}else{u+=","+p}}e++});u=u.substring(1);var t=n.generateUUID();var g={method:"POST",url:"api/dbr/batch",data:[{id:t,instance:c,cube:d,elements:u}]};if(f){_.forEach(f,function(p,q){g.data[0][q]=p})}var w=j(g);var v=v||m.defer();w.then(function(p){v.resolve(p.data[t])},function(p){v.reject(p)});return v.promise};k.dbrPicklistValues=function(d,e,h){if(h.length<3){throw"$tm1Ui: Minimum number of arguments not met (instance, cube, [element1, element2] | element1, element2)."}var s=n.generateUUID();var g={method:"POST",url:"api/dbr/picklist-values",data:{id:s,instance:d,cube:e}};if(h.length>3){var t="";var f=0;_.forEach(h,function(p){if(f>=2&&angular.isDefined(p)){t+=","+p}f++});t=t.substring(1);g.data.elements=t}else{if(angular.isArray(h[2])){g.data.cubeElements=h[2]}else{throw"$tm1Ui() Unknown CellGetPicklistValues Request."}}var c=j(g);var u=u||m.defer();c.then(function(p){u.resolve(p.data)},function(p){u.reject(p)});return u.promise};k.multipleDbr=function(e){if(!angular.isArray(e)){l.error(e);throw"$tm1Ui: Parameter passed must be an array!"}_.forEach(e,function(g){if(angular.isUndefined(g.id)){g.id=n.generateUUID()}if(_.indexOf(k.requestIDs,g.id)==-1){k.requestIDs.push(g.id)}});var f={method:"POST",url:"api/dbr/batch",data:e};var c=j(f);var d=d||m.defer();c.then(function(g){var h=[];for(var t=0,u=k.requestIDs.length;t<u;t++){var s=k.requestIDs[t];if(g.data[s]){h.push(g.data[s]);k.requestIDs.splice(t,1);t--;u--}}d.resolve(h)},function(h){if(h.data&&angular.isObject(h.data)){for(var g=0,q=k.requestIDs.length;g<q;g++){if(h.data[k.requestIDs[g]]){k.requestIDs.splice(g,1);g--;q--}}}d.reject(h)});return d.promise};k.dbra=function(f,c,e,d){if(angular.isUndefined(f)||angular.isUndefined(c)||angular.isUndefined(e)||angular.isUndefined(d)){throw"$tm1Ui: instance, cube, element and attribute are required fields."}return k.dbr(f,"}ElementAttributes_"+c.trim(),arguments)};k.cellPut=function(g,e,f,c,d){return k.dbs(g,e,f,arguments)};k.dbs=function(e,f,g,h){if(h.length<5){throw"$tm1Ui: Minimum number of arguments not met (value, instance, cube, element1, element2)."}var s=undefined;var d=0;var c=[];_.forEach(h,function(p){if(d>=3&&angular.isDefined(p)){if(angular.isObject(p)){s=p}else{c.push(p)}}d++});var r={value:e,instance:f,cube:g,cubeElements:c};if(s){_.forEach(s,function(p,q){r[q]=p})}return k.multipleDbs([r])};k.multipleDbs=function(d){_.forEach(d,function(e){if(angular.isUndefined(e.id)){e.id=n.generateUUID()}});var c=c||m.defer();k.getToken().then(function(e){var f={method:"POST",url:"api/dbs/batch",data:d};f.headers={};f.headers[a.t]=e;j(f).then(function(g){c.resolve({success:n.isSuccessful(g),message:g.data})},function(g){c.reject(g)})});return c.promise};k.dbsa=function(c,f,h,e,d){var g=g||m.defer();k.getToken().then(function(s){var u={};u.instance=f;u.dimension=h;u.element=e;u.attribute=d;u.value=c;var t={method:"POST",url:"api/dbra",data:u};t.headers={};t.headers[a.t]=s;j(t).then(function(p){g.resolve({success:n.isSuccessful(p),message:p.data})},function(p){g.reject(p)})});return g.promise};k.annotations=function(e,g,d){var f={id:n.generateUUID(),instance:e,cube:g,cubeElements:d};var h=j.post("api/dbr/comments",f);var c=c||m.defer();h.then(function(q){c.resolve(q.data)},function(q){c.reject(q)});return c.promise};k.saveAnnotation=function(e,f,g,c){var d={id:n.generateUUID(),instance:f,cube:g,cubeElements:c,comment:e};var h=h||m.defer();k.getToken().then(function(r){var s={method:"POST",url:"api/dbr/comments/save",data:d};s.headers={};s.headers[a.t]=r;j(s).then(function(p){h.resolve({success:n.isSuccessful(p),message:p.data})},function(p){h.reject(p)})});return h.promise};k.drillNames=function(f,g,d){var e={id:n.generateUUID(),instance:f,cube:g,cubeElements:d};var h=j.post("api/dbr/"+f+"/drills",e);var c=c||m.defer();h.then(function(q){c.resolve(q.data)},function(q){c.reject(q)});return c.promise};k.drillTransactions=function(f,g,c,e){var d={id:n.generateUUID(),instance:f,cube:g,cubeElements:c,drillName:e};var h=j.post("api/dbr/"+f+"/drills/"+e+"/transactions",d);var q=q||m.defer();h.then(function(p){q.resolve(p.data)},function(p){q.reject(p)});return q.promise};k.traceCalculations=function(y,c,h){var f=false;if(h.length==3&&angular.isArray(h[2])){f=true}else{if(h.length<4){throw"$tm1Ui: Minimum number of arguments not met (instance, cube, element1, element2)."}}var e=undefined;var v="";if(f){v=h[2].join(",")}else{var d=0;_.forEach(h,function(p){if(d>=2&&angular.isDefined(p)){if(angular.isObject(p)&&!angular.isArray(p)){e=p}else{v+=","+p}}d++});v=v.substring(1)}var u=n.generateUUID();var g={method:"POST",url:"api/dbr/"+encodeURIComponent(y)+"/trace-calculations",data:{id:u,instance:y,cube:c,elements:v}};if(e){_.forEach(e,function(p,q){g.data[q]=p})}var x=j(g);var w=w||m.defer();x.then(function(p){w.resolve(p.data)},function(p){w.reject(p)});return w.promise};k.traceFeeders=function(y,c,h){var f=false;if(h.length==3&&angular.isArray(h[2])){f=true}else{if(h.length<4){throw"$tm1Ui: Minimum number of arguments not met (instance, cube, element1, element2)."}}var e=undefined;var v="";if(f){v=h[2].join(",")}else{var d=0;_.forEach(h,function(p){if(d>=2&&angular.isDefined(p)){if(angular.isObject(p)){e=p}else{v+=","+p}}d++});v=v.substring(1)}var u=n.generateUUID();var g={method:"POST",url:"api/dbr/"+encodeURIComponent(y)+"/trace-feeders",data:{id:u,instance:y,cube:c,elements:v}};if(e){_.forEach(e,function(p,q){g.data[q]=p})}var x=j(g);var w=w||m.defer();x.then(function(p){w.resolve(p.data)},function(p){w.reject(p)});return w.promise};k.checkFeeders=function(y,c,h){var f=false;if(h.length==3&&angular.isArray(h[2])){f=true}else{if(h.length<4){throw"$tm1Ui: Minimum number of arguments not met (instance, cube, element1, element2)."}}var e=undefined;var v="";if(f){v=h[2].join(",")}else{var d=0;_.forEach(h,function(p){if(d>=2&&angular.isDefined(p)){if(angular.isObject(p)){e=p}else{v+=","+p}}d++});v=v.substring(1)}var u=n.generateUUID();var g={method:"POST",url:"api/dbr/"+encodeURIComponent(y)+"/check-feeders",data:{id:u,instance:y,cube:c,elements:v}};if(e){_.forEach(e,function(p,q){g.data[q]=p})}var x=j(g);var w=w||m.defer();x.then(function(p){w.resolve(p.data)},function(p){w.reject(p)});return w.promise};k.email=function(d){var c=c||m.defer();k.getToken().then(function(e){var f={method:"POST",url:"api/email",data:d};f.headers={};f.headers[a.t]=e;j(f).then(function(g){c.resolve({success:n.isSuccessful(g),message:g.data})},function(g){c.reject(g)})});return c.promise};k.refresh=function(c){if(c){o.$broadcast("tm1UiDbr.event.refresh",{tm1RefreshGroup:c,updateTimestamp:_.now()})}else{o.$broadcast("tm1.event.refresh")}};k.sandboxes=function(e){if(angular.isUndefined(e)){throw"$tm1Ui: instance is a required fields."}var c=j.get("api/sandboxes/"+encodeURIComponent(e.trim()));var d=d||m.defer();c.then(function(f){d.resolve(f.data)},function(f){d.reject(f)});return d.promise};k.sandboxCreate=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"$tm1Ui: instance and name are required fields."}var c=j.post("api/sandboxes/"+encodeURIComponent(f.trim())+"/create",{name:e});var d=d||m.defer();c.then(function(g){d.resolve({success:n.isSuccessful(g),message:g.data})},function(g){d.reject(g)});return d.promise};k.sandboxDelete=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"$tm1Ui: instance and name are required fields."}var c=j.post("api/sandboxes/"+encodeURIComponent(f.trim())+"/"+encodeURIComponent(e.trim())+"/delete");var d=d||m.defer();c.then(function(g){d.resolve({success:n.isSuccessful(g),message:g.data})},function(g){d.reject(g)});return d.promise};k.sandboxPublishChanges=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"$tm1Ui: instance and name are required fields."}var c=j.post("api/sandboxes/"+encodeURIComponent(f.trim())+"/"+encodeURIComponent(e.trim())+"/publish-changes");var d=d||m.defer();c.then(function(g){d.resolve({success:n.isSuccessful(g),message:g.data})},function(g){d.reject(g)});return d.promise};k.sandboxDiscardChanges=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"$tm1Ui: instance and name are required fields."}var c=j.post("api/sandboxes/"+encodeURIComponent(f.trim())+"/"+encodeURIComponent(e.trim())+"/discard-changes");var d=d||m.defer();c.then(function(g){d.resolve({success:n.isSuccessful(g),message:g.data})},function(g){d.reject(g)});return d.promise};k.sandbox=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"$tm1Ui: instance and name are required fields."}var c=j.get("api/sandboxes/"+encodeURIComponent(f.trim())+"/"+encodeURIComponent(e.trim()));var d=d||m.defer();c.then(function(g){d.resolve(g.data)},function(g){d.reject(g)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiCube",["$http","$q","$tm1UiHelper","tm1UiSettings","$tm1UiCore","$log",function(j,n,o,a,l,m){var k=this;k.executeMdx=function(f,d,e){var c=c||n.defer();l.getToken().then(function(g){var h={method:"POST",url:"api/mdx",data:{instance:f,mdx:d,restPath:e}};h.headers={};h.headers[a.t]=g;j(h).then(function(q){c.resolve(q.data)},function(q){c.reject(q)})});return c.promise};k.executeView=function(e,f,d,q){var c="api/cubes/"+e+"/"+f+"/"+d+"/execute";if(q!=undefined&&!_.isEmpty(q)){c+="?"+q.trim()}var g=j.get(c);var h=h||n.defer();g.then(function(p){h.resolve(p.data)},function(p){h.reject(p)});return h.promise};k.executeNamedMdx=function(f,c,e){var g="";if(e&&e.showEmpty){g="?show-empty=true"}if(e&&angular.isObject(e)){var d="";if(e.parameters&&angular.isObject(e.parameters)){_.forEach(e.parameters,function(p,s){d+="&"+encodeURIComponent(s)+"="+encodeURIComponent(p)})}if(_.isEmpty(g)){d=d.substring(1);g+="?"+d}else{g+=d}}var h=j.get("api/mdx/"+f+"/"+c+g);var q=q||n.defer();h.then(function(p){q.resolve(p.data)},function(p){q.reject(p)});return q.promise};k.cubes=function(e){var c=j.get("api/cubes/"+e);var d=d||n.defer();c.then(function(f){d.resolve(f.data.value)},function(f){d.reject(f)});return d.promise};k.views=function(e,f,d){var g=undefined;if(_.isNil(d)){g=j.get("api/cubes/"+e+"/"+f+"/views")}else{g=j.post("api/cubes/"+e+"/"+f+"/views",d)}var c=c||n.defer();g.then(function(h){c.resolve(h.data)},function(h){c.reject(h)});return c.promise};k.viewAdhoc=function(e,f,d){var g=j.post("api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/canvas-view-data",d);var c=c||n.defer();g.then(function(h){c.resolve(h.data)},function(h){c.reject(h)});return c.promise};k.viewSave=function(e,f,d,c){var g=j.post("api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(d)+"/save",c);var h=h||n.defer();g.then(function(q){h.resolve({success:o.isSuccessful(q),message:q.data})},function(q){h.reject(q)});return h.promise};k.viewConvert=function(d,e,f,r,s){if(angular.isUndefined(d)||angular.isUndefined(e)||angular.isUndefined(f)||angular.isUndefined(r)){throw"$tm1Ui: instance, cube, sourceView and targetView are REQUIRED FIELDS."}else{if(angular.isUndefined(s)){throw"$tm1Ui: config is a REQUIRED FIELD."}else{if(!angular.isObject(s)){throw"$tm1Ui: config must be an OBJECT."}}}function c(p,q){if(!(q=="canvas"||q=="native"||q=="mdx")){throw"$tm1Ui: "+p+' can only be "canvas", "native" or "mdx"'}}c("sourceView",f);c("targetView",r);s.sourceView=f;s.targetView=r;var g=j.post("api/cubes/"+encodeURIComponent(d)+"/"+encodeURIComponent(e)+"/convert-view",s);var h=h||n.defer();g.then(function(p){h.resolve(p.data)},function(p){h.reject(p)});return h.promise};k.canvasView=function(e,f,d,c){var q="api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(d);if(!_.isNil(c)&&c.isPrivate){q+="/canvas-private-view-definition"}else{q+="/canvas-view-definition"}var g=j.get(q);var h=h||n.defer();g.then(function(p){h.resolve(p.data)},function(p){h.reject(p)});return h.promise};k.canvasViewVerify=function(e,f,d){var c="api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/canvas-view-verification";var g=j.post(c,d);var h=h||n.defer();g.then(function(q){h.resolve(q.data)},function(q){h.reject(q)});return h.promise};k.canvasViewMDX=function(e,f,d){var c="api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/canvas-view-mdx";var g=j.post(c,d);var h=h||n.defer();g.then(function(q){h.resolve({mdx:q.data})},function(q){h.reject(q)});return h.promise};k.view=function(e,f,d,s){var g=false;var c="api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(d);if(!_.isEmpty(s)){g=true;c+="?"+s}var h=j.get(c);var r=r||n.defer();h.then(function(p){if(g){r.resolve(p.data)}else{var x=p.data;var y={cube:f,name:d,suppressEmptyColumns:x.SuppressEmptyColumns,suppressEmptyRows:x.SuppressEmptyRows,titles:[],columns:[],rows:[]};for(var w=0;w<x.Titles.length;w++){var q=x.Titles[w];y.titles.push({index:w,subset:q.Subset.Name,hierarchy:q.Subset.Hierarchy.Name,dimension:q.Subset.Hierarchy.Dimension.Name,alias:q.Subset.Alias,elementCount:q.Subset["Elements@odata.count"],selected:q.Selected.Name})}for(var w=0;w<x.Columns.length;w++){var q=x.Columns[w];y.columns.push({index:w,subset:q.Subset.Name,hierarchy:q.Subset.Hierarchy.Name,dimension:q.Subset.Hierarchy.Dimension.Name,alias:q.Subset.Alias,elementCount:q.Subset["Elements@odata.count"]})}for(var w=0;w<x.Rows.length;w++){var q=x.Rows[w];y.rows.push({index:w,subset:q.Subset.Name,hierarchy:q.Subset.Hierarchy.Name,dimension:q.Subset.Hierarchy.Dimension.Name,alias:q.Subset.Alias,elementCount:q.Subset["Elements@odata.count"]})}r.resolve(y)}},function(p){r.reject(p)});return r.promise};k.dimensions=function(e,f){var c=j.get("api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f));var d=d||n.defer();c.then(function(g){var h=[];if(o.isSuccessful(g)){_.forEach(g.data.Dimensions,function(q){h.push(q.Name)})}else{m.error(g)}d.resolve(h)},function(g){d.reject(g)});return d.promise};k.dimensionsAndHierarchies=function(e,f){var c=j.get("api/cubes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f)+"/dimensions-hierarchies");var d=d||n.defer();c.then(function(g){if(!_.isNil(g.data)&&!_.isNil(g.data["@odata.context"])){_.unset(g.data,"@odata.context")}d.resolve(g.data)},function(g){d.reject(g)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiDbr",["$rootScope","$log","$tm1Ui","tm1UiSettings","$timeout","$ngBootbox","$compile","$filter","textAngularManager","$templateCache",function(o,a,n,r,w,u,t,q,s,v){var p=this;p.NAME="tm1UiDbr";p.PARENT_NAME="tm1UiDbr";p.COMMON_DBR_CLASS="tm1-ui-dbr-common";p.ALLOWED_BUTTONS={h1:true,h2:true,h3:true,h4:true,h5:true,h6:true,p:true,pre:true,quote:true,bold:true,italics:true,underline:true,strikeThrough:true,ul:true,ol:true,undo:true,redo:true,clear:true,justifyLeft:true,justifyCenter:true,justifyRight:true,justifyFull:true,indent:true,outdent:true,html:true,insertImage:true,insertLink:true,insertVideo:true,wordcount:true,charcount:true};p.emptyDisplay="-";p.getBaseTemplate=function(c){if(c.isImageDBR){return v.get("assets/html/tm1-ui-dbr-tpl-image.html")}else{if(c.picklistRadio){return v.get("assets/html/tm1-ui-dbr-tpl-input-radio.html")}else{if(c.formatHtml){return v.get("assets/html/tm1-ui-dbr-tpl-input-html.html")}else{if(c.isMultiLine){return v.get("assets/html/tm1-ui-dbr-tpl-multiline.html")}else{return v.get("assets/html/tm1-ui-dbr-tpl-readonly.html")}}}}};p.initTemplate=function(d,c,e){d.directiveConfig.isDynamicTemplate=true;d.directiveElements=c;c.append(p.getBaseTemplate(d));t(c.contents())(d)};p.updateTemplate=function(d,c){if(d.directiveConfig.isDynamicTemplate){if(c&&!d.entry.isList){if(!d.inputAlreadyAppended){d.inputAlreadyAppended=true;if(d.isMultiLine){d.directiveElements.find("textarea").each(function(g,f){if(angular.element(f).hasClass("dbr-multiline-disabled")){d.textareaFormScope=d.$new();var h=v.get("assets/html/tm1-ui-dbr-tpl-input-multiline.html");var e=t(h)(d.textareaFormScope);angular.element(f).parent().after(e);angular.element(f).parent().remove()}})}else{d.directiveElements.find("span").each(function(g,f){if(angular.element(f).hasClass("tm1-ui-dbr-readonly-span")){d.inputSimpleFormScope=d.$new();var h=v.get("assets/html/tm1-ui-dbr-tpl-input-simple.html");var e=t(h)(d.inputSimpleFormScope);angular.element(f).after(e);angular.element(f).remove()}})}}}else{if(c&&d.entry.isList&&!d.picklistRadio){if(!d.selectDirectiveAdded){d.selectDirectiveAdded=true;d.directiveElements.find("span").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-dbr-readonly-span")){d.selectScope=d.$new();d.selectConfig={};d.selectConfig.tm1List=d.entry.picklist;d.selectConfig.value=d.entry.value;d.selectConfig.tm1IncludeEmpty=true;if(d.picklistDisableSearch){d.selectConfig.disableSearch=true}var h="<tm1-ui-select ";h+='tm1-config="selectConfig" ';h+="></tm1-ui-select>";var g=t(h)(d.selectScope);angular.element(e).after(g);angular.element(e).remove()}})}}else{if(!c){d.foundReadOnlyElement=false;if(d.isMultiLine){d.directiveElements.find("textarea").each(function(f,e){if(angular.element(e).hasClass("dbr-multiline-disabled")){d.foundReadOnlyElement=true}})}else{d.directiveElements.find("span").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-dbr-readonly-span")){d.foundReadOnlyElement=true}})}p.log(d,"Found ReadOnly Section: "+d.foundReadOnlyElement);if(!d.foundReadOnlyElement){d.directiveElements.empty();d.directiveElements.append(p.getBaseTemplate(d));t(d.directiveElements.contents())(d);d.inputAlreadyAppended=false;d.selectDirectiveAdded=false}}}}d.directiveElements.find("span").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-dbr-readonly-span")){angular.element(e).empty();angular.element(e).append(d.entry.value)}});d.directiveElements.find("img").each(function(f,e){if(!_.isEmpty(d.imgAlt)){angular.element(e).attr("alt",d.imgAlt)}angular.element(e).attr("src",d.entry.value)});d.directiveElements.find("input").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-dbr-input-simple")){angular.element(e).attr("placeholder",d.emptyDisplay)}});d.directiveElements.find("textarea").each(function(f,e){if(angular.element(e).hasClass("dbr-multiline-input")||angular.element(e).hasClass("dbr-multiline-disabled")){angular.element(e).attr("placeholder",d.emptyDisplay)}if(angular.element(e).hasClass("dbr-multiline-disabled")){angular.element(e).val(d.entry.value)}});d.directiveElements.find("input").each(function(f,e){if(angular.element(e).hasClass("tm1-ui-dbr-input-simple")){if(d.isDateFormatted&&!angular.element(e).hasClass("tm1-ui-dbr-datepicker")){angular.element(e).addClass("tm1-ui-dbr-datepicker");angular.element(e).attr("readonly","readonly")}}});p.updateTemplateSandboxClasses(d)}};p.updateTemplateWithError=function(c){if(c.directiveConfig.isDynamicTemplate){c.directiveElements.contents().remove();c.directiveElements.append(v.get("assets/html/tm1-ui-dbr-tpl-error.html"));t(c.directiveElements.contents())(c)}};p.updateTemplateWithAttributes=function(d,c,e){if(e.id!=undefined){c.attr("id",d.id)}if(e.name!=undefined){c.attr("name",d.name)}if(d.baseClass!=undefined){c.addClass(d.baseClass)}c.addClass(p.COMMON_DBR_CLASS)};p.updateTemplateAddContext=function(e){if(e.directiveConfig.isDynamicTemplate){var d=false;e.directiveElements.find("span").each(function(h,g){if(angular.element(g).hasClass("tm1-ui-dbr-context-button")){d=true}});if(!d){var c="";if(e.directiveOptions.contextPopUpMode){c=v.get("assets/html/tm1-ui-dbr-tpl-context-popup-button.html");e.showContextMenus=undefined;e.showContextMenus=function(){e.showContextPop=undefined;u.setDefaults({size:null});var g=t(v.get("assets/html/tm1-ui-dbr-tpl-context-popup-body.html"));var h=e.$new();e.showContextPop=u.customDialog({message:g(h),onEscape:function(){h.$destroy()},backdrop:true,size:"small"})}}else{c=v.get("assets/html/tm1-ui-dbr-tpl-context.html")}e.contextScope=e.$new();var f=t(c)(e.contextScope);e.directiveElements.append(f);e.directiveElements.addClass("tm1-ui-dbr-context");e.directiveElements.addClass("input-group")}}};p.updateTemplateRemoveContext=function(c){if(c.directiveConfig.isDynamicTemplate){c.directiveElements.find("span").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-context-button")){angular.element(d).remove()}});c.directiveElements.find("ul").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-context-menu")){angular.element(d).remove()}});c.directiveElements.removeClass("tm1-ui-dbr-context");c.directiveElements.removeClass("input-group");c.contextScope.$destroy()}};p.updateTemplateWithCommentClass=function(c){if(c.directiveConfig.isDynamicTemplate){if(c.hasComments()){if(!c.directiveElements.hasClass("tm1-has-comment")){c.directiveElements.addClass("tm1-has-comment")}c.directiveElements.find("span").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-readonly-span")){if(!angular.element(d).hasClass("tm1-ui-dbr-note")){angular.element(d).addClass("tm1-ui-dbr-note")}}});c.directiveElements.find("div").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-readonly-div-ta")){if(!angular.element(d).hasClass("tm1-ui-dbr-note")){angular.element(d).addClass("tm1-ui-dbr-note")}}})}else{if(c.directiveElements.hasClass("tm1-has-comment")){c.directiveElements.removeClass("tm1-has-comment")}c.directiveElements.find("span").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-readonly-span")){if(angular.element(d).hasClass("tm1-ui-dbr-note")){angular.element(d).removeClass("tm1-ui-dbr-note")}}});c.directiveElements.find("div").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-readonly-div-ta")){if(angular.element(d).hasClass("tm1-ui-dbr-note")){angular.element(d).removeClass("tm1-ui-dbr-note")}}})}}};p.updateTemplateWithValidationClass=function(c){if(!c.isValid){c.directiveElements.attr("title",c.validationMessage);if(!_.isEmpty(c.validationMessage)){c.directiveElements.find("form").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-form-simple")&&!angular.element(d).hasClass("has-error")){angular.element(d).addClass("has-error")}})}}else{c.directiveElements.find("form").each(function(e,d){if(angular.element(d).hasClass("tm1-ui-dbr-form-simple")&&angular.element(d).hasClass("has-error")){angular.element(d).removeClass("has-error")}})}};p.updateTemplateSandboxClasses=function(c){if(c.sandbox.valueDiffersFromBase){if(_.isEmpty(c.sandbox.changeSandboxCSS)&&!c.directiveElements.hasClass("tm1-ui-dbr-sandbox-changes")){c.directiveElements.addClass("tm1-ui-dbr-sandbox-changes")}else{if(!c.directiveElements.hasClass(c.sandbox.changeSandboxCSS)){c.directiveElements.addClass(c.sandbox.changeSandboxCSS)}}}else{if(c.directiveElements.hasClass(c.sandbox.changeSandboxCSS)){c.directiveElements.removeClass(c.sandbox.changeSandboxCSS)}if(c.directiveElements.hasClass("tm1-ui-dbr-sandbox-changes")){c.directiveElements.removeClass("tm1-ui-dbr-sandbox-changes")}}};p.updateWithRptView=function(c){if(c.tm1RptViewModel()){c.tm1Instance=c.tm1RptViewModel().instance;c.tm1Cube=c.tm1RptViewModel().cube;c.tm1Elements="";_.forEach(c.tm1RptRowCell().reference(),function(d){c.tm1Elements+=","+d});c.tm1Elements=c.tm1Elements.substr(1)}};p.initWithRptView=function(c,d){if(d.tm1RptViewModel!=undefined){p.updateWithRptView(c);c.isNormalMode=false}};p.init=function(c){c.directiveConfig={isDynamicTemplate:false};c.formatNumberFlag=false;c.isReadOnly=false;c.isCommentReadOnly=false;c.entry={value:c.emptyDisplay,picklist:[],isList:false,isUpdateable:false,valueText:""};c.dimensions=[];c.elements=[];c.currentEntryValue="";c.cubeDimensionsRequests=0;c.directiveID=n.helperGenerateUUID();c.directiveCommentID=n.helperGenerateUUID();c.directiveClasses="";c.picklistRadio=false;c.picklistRadioClasses=[];c.isMultiLine=false;c.multiLine=0;c.emptyDisplay="";c.errorDisplay="#VALUE!";c.isDateFormatted=false;c.formatHtml=false;c.editMode=false;c.TA_TOOLBAR_DEFAULT=[["h1","h2","h3"],["bold","italics","underline","justifyLeft","justifyCenter","justifyRight","justifyFull"],["indent","outdent","ul","ol"]];c.taToolbarButtons=c.TA_TOOLBAR_DEFAULT;c.taCommentToolbarButtons=c.TA_TOOLBAR_DEFAULT;c.comment={};c.hasValidation=false;c.hasValidationMessage=false;c.validate="";c.validateMessage="Not a valid entry. Please Check.";c.KEY_VALUE="@Value";c.KEY_REGEX="@RegEx";c.formatPercentage=false;c.formatNegativeInParenthesis=false;c.hasModel=false;c.rawValue="";if(c.tm1DataDecimal!=undefined){c.formatNumberFlag=true}c.isConsolidated=false;c.isNumeric=false;c.isAnnotated=false;c.hasDrillThrough=false;c.errorMessage=null;c.validationMessage=null;c.hasFunctionToCallBeforeUpdate=false;c.formatHtmlButtonEnabled=false;c.formatHtmlButtonText="Save";c.formatHtmlButtonClass="btn btn-primary";c.formatHtmlPopup=false;c.hideReference=false;c.hideComment=false;c.hideSpread=false;c.hideDrill=false;c.hideTraceCalculation=false;c.hasDrillModel=false;c.hasApi=false;c.hideContextMenu=false;c.customContextMenus=[];c.contextTimeout=5;c.clickID=0;c.isInputActive=false;c.updateTimestamp=_.now();c.hasPending=false;c.hasOnLoadFunction=false;c.hasOnChangeFunction=false;c.hasChangeFunction=false;c.skipOnChangeOnce=true;c.consolInput=false;c.consolInputSpreadMethod="p";c.hasAccountingSettingsOverride=false;c.isNormalMode=true;c.picklistDisableSearch=false;c.dataScale=1;c.directiveOptions={contextPopUpMode:false};c.sandbox={};c.sandbox.valueDiffersFromBase=false;c.sandbox.changeSandboxCSS="";c.debug=false};p.validate=function(d,e){if(angular.isDefined(e.tm1Debug)&&d.tm1Debug()){d.debug=true}if(angular.isDefined(e.ngModel)){d.hasModel=true}if(e.tm1RptViewModel!=undefined){d.isNormalMode=false}if(d.isNormalMode){if(angular.isUndefined(e.tm1Instance)){throw"tm1-instance is a required attribute."}else{if(_.isEmpty(d.tm1Instance)){throw"tm1-instance cannot be empty."}}if(angular.isUndefined(e.tm1Cube)){throw"tm1-cube is a required attribute."}if(angular.isUndefined(e.tm1Elements)){throw"tm1-elements is a required attribute."}}if(angular.isDefined(e.tm1EnableRtf)){throw"Do not use tm1-enable-rtf. Use tm1-format-html instead."}if(angular.isDefined(e.tm1FormatHtml)&&angular.isDefined(e.tm1MultiLine)){throw"tm1-multi-line CANNOT BE COMBINED with tm1-format-html"}if(angular.isDefined(e.tm1DateOption)&&angular.isDefined(e.tm1MultiLine)){throw"tm1-multi-line CANNOT BE COMBINED with tm1-date-option"}if(angular.isDefined(e.tm1PicklistRadio)&&angular.isDefined(e.tm1MultiLine)){throw"tm1-multi-line CANNOT BE COMBINED with tm1-picklist-radio"}if(angular.isDefined(e.tm1Validate)){d.hasValidation=true}if(d.isNormalMode&&(_.isEmpty(d.tm1Cube)||_.isEmpty(d.tm1Dimensions))){d.isReadOnly=true}if(angular.isDefined(e.tm1PicklistRadio)){if(!(d.tm1PicklistRadio.trim().toLowerCase()=="vertical"||d.tm1PicklistRadio.trim().toLowerCase()=="horizontal")){throw'tm1-picklist-radio can only be "vertical" or "horizontal". Please check.'}d.picklistRadio=true;if(d.tm1PicklistRadio.trim()=="horizontal"){d.picklistRadioClasses.push("radio-inline")}else{d.picklistRadioClasses.push("radio")}}if(d.isNormalMode){d.tm1Cube=_.isEmpty(d.tm1Cube)?"":d.tm1Cube;d.tm1Elements=_.isEmpty(d.tm1Elements)?"":d.tm1Elements}d.tm1CommentCube=_.isEmpty(d.tm1CommentCube)?d.tm1Cube:d.tm1CommentCube;d.tm1CommentElements=_.isEmpty(d.tm1CommentElements)?"":d.tm1CommentElements;if(angular.isDefined(e.tm1FormatPercentage)&&d.tm1FormatPercentage()){d.formatPercentage=true}if(angular.isDefined(e.tm1FormatParenthesis)&&d.tm1FormatParenthesis()){d.formatNegativeInParenthesis=true}if(!d.formatNegativeInParenthesis&&angular.isDefined(o.instanceSettings)&&angular.isDefined(o.instanceSettings[d.tm1Instance])&&angular.isDefined(o.instanceSettings[d.tm1Instance]["applyParenthesisFormatting"])&&o.instanceSettings[d.tm1Instance]["applyParenthesisFormatting"]){d.formatNegativeInParenthesis=true}if(angular.isDefined(e.tm1FormatParenthesis)&&!d.tm1FormatParenthesis()){d.formatNegativeInParenthesis=false}if(angular.isDefined(e.tm1CommentReadOnly)&&d.tm1CommentReadOnly()){d.isCommentReadOnly=true}if(angular.isDefined(e.tm1MultiLine)){try{d.multiLine=parseInt(d.tm1MultiLine);if(d.multiLine>1){d.isMultiLine=true}}catch(c){throw"Value of tm1-multi-line is not a valid integer!"}}if(angular.isDefined(e.tm1Placeholder)&&!_.isEmpty(d.tm1Placeholder)){d.emptyDisplay=d.tm1Placeholder}if(angular.isDefined(e.tm1DateOption)&&!angular.isObject(d.tm1DateOption())){throw"tm1-date-option must be an OBJECT."}if(angular.isDefined(e.tm1DateOption)&&angular.isObject(d.tm1DateOption())){d.isDateFormatted=true;d.dateOption=d.tm1DateOption()}if(angular.isDefined(e.tm1UiClass)&&!_.isEmpty(d.tm1UiClass)){d.directiveClasses=d.tm1UiClass}if(angular.isDefined(e.tm1FormatHtml)&&d.tm1FormatHtml()){d.formatHtml=true}if(d.formatHtml){if(angular.isDefined(e.tm1FormatHtmlButtons)){p.validateToolbarButtons(d.tm1FormatHtmlButtons(),"tm1-format-html-buttons");d.taToolbarButtons=d.tm1FormatHtmlButtons()}if(angular.isDefined(e.tm1FormatHtmlPopup)&&d.tm1FormatHtmlPopup()){d.formatHtmlPopup=true;d.showEditor=function(){d.entry.valueText=d.entry.value;$("#tm1-ui-dbr-popup-"+d.directiveID).modal("show")};d.saveValue=function(){d.entry.value=d.entry.valueText;d.updateData();$("#tm1-ui-dbr-popup-"+d.directiveID).modal("hide")}}}else{if(angular.isDefined(e.tm1FormatHtmlButtons)){throw"tm1-format-html-buttons is to be combined with tm1-format-html. REMOVED THIS."}}if(angular.isDefined(e.tm1CommentFormatHtmlButtons)){p.validateToolbarButtons(d.tm1CommentFormatHtmlButtons(),"tm1-comment-format-html-buttons");d.taCommentToolbarButtons=d.tm1CommentFormatHtmlButtons()}if(angular.isDefined(e.tm1BeforeUpdate)){d.hasFunctionToCallBeforeUpdate=true}if(angular.isDefined(e.tm1FormatHtmlButtonEnabled)&&d.tm1FormatHtmlButtonEnabled()){d.formatHtmlButtonEnabled=true}if(angular.isDefined(e.tm1FormatHtmlButtonText)&&!_.isEmpty(d.tm1FormatHtmlButtonText)){d.formatHtmlButtonText=d.tm1FormatHtmlButtonText}if(angular.isDefined(e.tm1FormatHtmlButtonClass)&&!_.isEmpty(d.tm1FormatHtmlButtonClass)){d.formatHtmlButtonClass=d.tm1FormatHtmlButtonClass}if(angular.isDefined(e.tm1HideReference)&&d.tm1HideReference()){d.hideReference=true}if(angular.isDefined(e.tm1HideComment)&&d.tm1HideComment()){d.hideComment=true}if(angular.isDefined(e.tm1HideSpread)&&d.tm1HideSpread()){d.hideSpread=true}if(angular.isDefined(e.tm1HideDrill)&&d.tm1HideDrill()){d.hideDrill=true}if(angular.isDefined(e.tm1HideTraceCalculation)&&d.tm1HideTraceCalculation()){d.hideTraceCalculation=true}if(angular.isDefined(e.tm1HideContextMenu)&&d.tm1HideContextMenu()){d.hideContextMenu=true}if(angular.isDefined(e.tm1DrillModel)&&!_.isEmpty(e.tm1DrillModel)){d.hasDrillModel=true}if(angular.isDefined(e.tm1Api)){d.hasApi=true}if(angular.isDefined(e.tm1Change)){d.hasChangeFunction=true}if(angular.isDefined(e.tm1OnLoad)){d.hasOnLoadFunction=true}if(angular.isDefined(e.tm1OnChange)){d.hasOnChangeFunction=true}if(angular.isDefined(e.tm1ConsolInput)&&d.tm1ConsolInput()){d.consolInput=true;if(angular.isDefined(e.tm1ConsolInputSpreadMethod)&&!_.isEmpty(d.tm1ConsolInputSpreadMethod)){d.consolInputSpreadMethod=d.tm1ConsolInputSpreadMethod.trim()}}if(angular.isDefined(e.tm1AccountingSettingsOverride)&&_.isObject(d.tm1AccountingSettingsOverride())){d.hasAccountingSettingsOverride=true;d.accountingSettingsOverride=angular.merge({},accounting.settings,d.tm1AccountingSettingsOverride())}if(angular.isDefined(e.tm1AddContextMenu)&&angular.isArray(d.tm1AddContextMenu())){d.customContextMenus=[];_.forEach(d.tm1AddContextMenu(),function(f){if(angular.isUndefined(f.display)||angular.isUndefined(f.action)){throw"Required context menu properties (display and/or action) missing. Please check."}var g=_.isEmpty(f.display)?"none":_.kebabCase(f.display);d.customContextMenus.push({display:f.display,action:f.action,contextID:g})})}if(angular.isDefined(e.tm1PicklistDisableSearch)){if(d.tm1PicklistDisableSearch()){d.picklistDisableSearch=true}}if(angular.isDefined(e.tm1DataScale)&&!_.isEmpty(e.tm1DataScale)){d.dataScale=p.convertToNumber(d.tm1DataScale)}};p.validateToolbarButtons=function(c,d){if(!angular.isArray(c)){throw d+" MUST BE AN ARRAY."}if(c.length==0){throw d+" CANNOT BE EMPTY"}_.forEach(c,function(e){if(!angular.isArray(e)){throw angular.toJson(e)+" must be an ARRAY of BUTTON Strings"}_.forEach(e,function(f){if(!angular.isString(f)){throw angular.toJson(f)+" MUST BE A STRING."}if(!p.ALLOWED_BUTTONS[f]){throw f+" is NOT A VALID BUTTON STRING."}})})};p.initializeHelpers=function(c){c.isContextApplicable=function(){var d=false;if(!c.hideContextMenu){if(!c.hideReference||!c.hideComment||!c.hideTraceCalculation){d=true}else{if(!c.hideSpread&&c.isConsolidated&&c.isNumeric){d=true}else{if(!c.hideDrill&&c.hasDrillThrough){d=true}}}}return d};c.checkDatePicker=function(){if(c.isDateFormatted&&!c.isReadOnly){if(angular.isUndefined(c.dateOption.autoclose)){c.dateOption.autoclose=true}if(angular.isUndefined(c.dateOption.format)){c.dateOption.format="yyyy-mm-dd"}if(angular.isUndefined(c.dateOption.todayHighlight)){c.dateOption.todayHighlight=true}c.dateOption.zIndexOffset=10000;$("#"+c.directiveID).datepicker(c.dateOption);$("#"+c.directiveID).datepicker("show")}};c.hasComments=function(){if((c.comment&&c.comment.value&&c.comment.value.length>0)||c.isAnnotated){return true}return false};if(c.formatHtml){c.activateTextAngular=function(){if(c.formatHtmlPopup){c.showEditor()}else{c.editMode=true;var d=s.retrieveEditor("ta-"+c.directiveID).scope;w(function(){d.displayElements.text.trigger("focus")})}}}if(c.customContextMenus.length>0){c.executeCustomMenu=function(d){_.forEach(c.customContextMenus,function(e){if(e.display==d){e.action.apply(this,[{instance:c.tm1Instance,cube:c.tm1Cube,cubeElements:n.helperConvertElementsToArray(c.tm1Elements),value:c.rawValue}])}})}}};p.initializeApi=function(d){if(d.hasApi){var c={setContextTimeout:function(e){try{d.contextTimeout=parseInt(e)}catch(f){}},getWatchers:function(e){return n.helperGetWatchers(d.directiveElements,e)},getWatchersCount:function(){return n.helperGetWatchersCount(d.directiveElements)}};d.tm1Api=angular.merge({},d.tm1Api,c)}};p.initializeWatchers=function(d,e,c){if(!d.isNormalMode){d.$watch("tm1RptRowCell",function(f,g){if(p.hasCompleteParams(d)){p.refreshData(d)}})}e.$observe("tm1Cube",function(f){if(!_.isEmpty(f)){if(p.hasCompleteParams(d)){p.refreshData(d)}}});e.$observe("tm1Elements",function(f){if(!_.isEmpty(f)){if(p.hasCompleteParams(d)){p.refreshData(d)}}});if(angular.isDefined(d.tm1CommentCube)){e.$observe("tm1CommentCube",function(f){if(!_.isEmpty(f)){if(p.hasCompleteParams(d)){p.refreshData(d)}}})}if(angular.isDefined(d.tm1CommentElements)){e.$observe("tm1CommentElements",function(f){if(!_.isEmpty(f)){if(p.hasCompleteParams(d)){p.refreshData(d)}}})}if(angular.isDefined(d.tm1ReadOnly)){e.$observe("tm1ReadOnly",function(f){if(p.hasCompleteParams(d)){p.refreshData(d)}})}if(angular.isDefined(d.tm1DataScale)){e.$observe("tm1DataScale",function(f){if(!_.isEmpty(f)){d.dataScale=p.convertToNumber(f)}else{d.dataScale=1}if(p.hasCompleteParams(d)){p.refreshData(d)}})}if(angular.isDefined(d.tm1DefaultEmpty)){e.$observe("tm1DefaultEmpty",function(f){if(p.hasCompleteParams(d)){p.refreshData(d)}})}if(angular.isDefined(e.tm1UiClass)){e.$observe("tm1UiClass",function(f){if(!_.isEmpty(d.directiveClasses)){c.removeClass(d.directiveClasses)}d.directiveClasses=_.isEmpty(f)?"":f;if(!_.isEmpty(d.directiveClasses)){c.addClass(d.directiveClasses)}if(d.isImageDBR){c.find("img").removeClass("img-rounded")}})}if(angular.isDefined(e.tm1Sandbox)){e.$observe("tm1Sandbox",function(f){if(!_.isEmpty(f)){if(p.hasCompleteParams(d)){p.refreshData(d)}}})}if(angular.isDefined(e.tm1SandboxClass)){e.$observe("tm1SandboxClass",function(f){if(d.sandbox.changeSandboxCSS!=f&&d.directiveElements.hasClass(d.sandbox.changeSandboxCSS)){d.directiveElements.removeClass(d.sandbox.changeSandboxCSS)}d.sandbox.changeSandboxCSS=f;p.updateTemplateSandboxClasses(d)})}if(angular.isDefined(e.tm1Validate)){e.$observe("tm1Validate",function(f){d.isValid=true;if(!_.isEmpty(f)){if(f.indexOf(d.KEY_VALUE)!=-1&&f.indexOf(d.KEY_REGEX)!=-1){d.validationMessage=d.KEY_VALUE+" or "+d.KEY_REGEX+" must be defined, but not BOTH. Please Check tm1-validate: "+f;d.isValid=false;p.updateTemplateWithValidationClass(d)}else{if(f.indexOf(d.KEY_VALUE)==-1&&f.indexOf(d.KEY_REGEX)==-1){d.validationMessage="Either "+d.KEY_VALUE+" or "+d.KEY_REGEX+" must be defined. Please Check tm1-validate: "+f;d.isValid=false;p.updateTemplateWithValidationClass(d)}}}});if(angular.isDefined(e.tm1ValidateMessage)){d.hasValidationMessage=true;e.$observe("tm1ValidateMessage",function(f){d.validateMessage=_.isEmpty(f)?"Not a valid entry. Please Check.":f})}}if(angular.isDefined(e.tm1Options)){d.$watch("tm1Options",function(f){d.directiveOptions=angular.merge({},d.directiveOptions,f)},true)}};p.initializeEventReceivers=function(c){c.$on(p.NAME+".event.refresh",function(d,e){if(p.hasCompleteParams(c)&&(!e||(e&&e.updateTimestamp>=c.updateTimestamp))){if(!c.isInputActive||(c.isInputActive&&p.isSpreadingAction(c,c.entry.value))||(c.isInputActive&&c.onInputEnterKey)){if(e&&angular.isDefined(e.tm1RefreshGroup)){if(e.tm1RefreshGroup==c.tm1RefreshGroup){p.refreshData(c)}}else{p.refreshData(c)}}}});c.$on("login.success",function(d){c.hasPending=false;if(p.hasCompleteParams(c)){p.refreshData(c)}});c.$on("tm1.event.refresh",function(d){if(p.hasCompleteParams(c)){p.refreshData(c)}});if(!c.isNormalMode){c.$on("tm1UiRptView.event.cell.refresh",function(d){if(p.hasCompleteParams(c)){p.refreshData(c)}});c.$on("tm1UiRptView.event.dimension.elements.refresh",function(d){p.updateWithRptView(c);p.refreshData(c)})}c.$on(r.batcherResponseID,function(d,e){if(!_.isEmpty(e)){if(e[c.directiveID]){p.updateDirectiveState(c,e[c.directiveID]);c.hasPending=false}if(e[c.directiveCommentID]){p.updateDirectiveState(c,e[c.directiveCommentID]);c.hasPending=false}}});c.$on("tm1UiSelect.item.selected",function(e,d){c.entry.value=d;c.updateData()});c.$on("tm1UiSelect.dropdown.open",function(d){c.showContext(9)})};p.log=function(e,d,c){if(e&&e.debug){n.log(e.directiveID,"tm1UiDbr",d,c)}};p.convertToNumber=function(d){var c=parseFloat(d);if(!_.isFinite(c)){throw"["+d+"] must be a finite number!"}else{if(c==0){throw"["+d+"] cannot be zero!"}}return c};p.getTableTdIndex=function(c){if($(c).parents("td")){return $(c).parents("td").index()}return -1};p.getTableRowIndex=function(c){if($(c).parents("tr")){return $(c).parents("tr").index()}return -1};p.getTableTdInRowTotal=function(c){if($(c).parents("tr")&&$(c).parents("tr").children()){return $(c).parents("tr").children().length}return -1};p.getTableRowsTotal=function(c){if($(c).parents("tr")){return $(c).parents("tr").parent().children().length}return -1};p.getTableTdElement=function(c){if($(c).parents("td")){return $(c).parents("td")}return undefined};p.getTableParentOfRow=function(c){return $(c).parents("tr").parent()};p.evaluateIfReadOnly=function(c){c.isReadOnly=false;if(c.tm1ReadOnly!=undefined){c.isReadOnly=c.tm1ReadOnly}};p.refreshData=function(d,c){setTimeout(function(){if(d.hasPending){return}else{d.hasPending=true}if(d.tm1UiDbrHiddenOptions&&d.tm1UiDbrHiddenOptions.isValueOnly){c=d.tm1UiDbrHiddenOptions}if(d.tm1UiDbrReadOnlyOptions&&d.tm1UiDbrReadOnlyOptions.isValueOnly){c=d.tm1UiDbrReadOnlyOptions}if(c==undefined){c={isValueOnly:false}}if(d.isNormalMode){var f={id:d.id,dbr:{id:d.directiveID,instance:d.tm1Instance,cube:d.tm1Cube,cubeElements:n.helperConvertElementsToArray(d.tm1Elements),isValueOnly:c.isValueOnly,sandbox:d.tm1Sandbox}};d.$emit(r.batcherRequestID,f)}else{p.updateDirectiveStateViaRptView(d);d.hasPending=false}d.tm1CommentCube=_.isEmpty(d.tm1CommentCube)?d.tm1Cube:d.tm1CommentCube;if(!_.isEmpty(d.tm1CommentElements)){var e={id:d.id,dbr:{id:d.directiveCommentID,instance:d.tm1Instance,cube:d.tm1CommentCube,cubeElements:n.helperConvertElementsToArray(d.tm1CommentElements),isValueOnly:c.isValueOnly,sandbox:d.tm1Sandbox}};d.$emit(r.batcherRequestID,e)}})};p.isSpreadingAction=function(e,c){var d=false;if(c&&c.length>0&&c.trim().toLowerCase().indexOf("r")==0){d=true}if(e.entry&&e.entry.isList){d=false}if(e.rawValueCopy&&angular.isString(e.rawValueCopy)){d=false}p.log(e,"This is a spread: "+d+" via expression "+c);return d};p.prepareDbsRequest=function(g,d){var e=undefined;var h=g.find("input[type=text],input[type=number],textarea");if(h.length){try{var f=angular.element(h).scope().$parent;if(f&&f.entry&&f.entry.value){e={id:f.directiveID,instance:f.tm1Instance,cube:f.tm1Cube,elements:f.tm1Elements,value:d,sandbox:$scope.tm1Sandbox}}}catch(c){p.log($scope,"Unable to repeat cell value",c);a.error("Unable to repeat cell value %o",c)}}return e};p.isConsolUpdateable=function(c){if(c.isConsolidated&&c.isNumeric&&c.consolInput&&!c.tm1ReadOnly){return true}return false};p.updateData=function(k,e,m,y){p.log(k,"saving value",y);k.isValid=true;if(k.hasFunctionToCallBeforeUpdate){var f="The update was cancelled";p.cancel=function j(x){k.isValid=false;if(x){k.validationMessage=x}else{k.validationMessage=f}};var g={value:y,cancel:p.cancel};var l=k.tm1BeforeUpdate({$event:g,data:{value:y,cancel:false}});if((l&&l.cancel)||!k.isValid){if(l){k.isValid=false;k.validationMessage=f;if(l.message&&!_.isEmpty(l.message)){k.validationMessage=l.message}}p.updateTemplateWithValidationClass(k);return}}if(k.hasPendingValue){return}var h=undefined;if(k.entry&&k.entry.spreadValue!=null){h=y}else{h=k.isNumeric?accounting.unformat(y):y;if(k.formatPercentage){h/=100}h=k.isNumeric?h*k.dataScale:y}k.validationMessage="";p.updateTemplateWithValidationClass(k);if(k.hasValidation){k.isValid=false;if(k.tm1Validate.indexOf(k.KEY_REGEX)!=-1){k.validate=k.tm1Validate.split(k.KEY_REGEX).join("").trim();p.log(k,"evaluating regex "+k.validate);var c=new RegExp(k.validate);k.isValid=c.test(h);p.log(k,"evaluated regular expression",k.isValid)}else{k.validate=k.tm1Validate.split(k.KEY_VALUE).join(h);k.isValid=k.$eval(k.validate);p.log(k,"evaluating "+k.validate);p.log(k,"evaluated validation expression",k.isValid)}if(!k.isValid){if(k.hasValidationMessage&&k.tm1ValidateMessage.indexOf(k.KEY_VALUE)!=-1){k.validateMessage=k.tm1ValidateMessage.split(k.KEY_VALUE).join(h)}k.validationMessage=k.validateMessage;p.updateTemplateWithValidationClass(k);return}}if(!m.isComment&&p.isSpreadingAction(k,y)){h=p.spreadRepeatDbrValue(k,e,y)}k.hasPendingValue=true;p.log(k,"final value being sent for saving",h);if(!m.isComment&&p.isConsolUpdateable(k)){h=k.consolInputSpreadMethod+h}if(k.isNormalMode){var d={};d.instance=k.tm1Instance;d.value=h;d.cube=k.tm1Cube;d.cubeElements=n.helperConvertElementsToArray(k.tm1Elements);d.sandbox=k.tm1Sandbox;if(m.isComment){d.cube=k.tm1CommentCube;d.cubeElements=n.helperConvertElementsToArray(k.tm1CommentElements)}n.cellPuts([d]).then(function(x){if(k.hasApi&&k.tm1Api.onUpdate){k.tm1Api.onUpdate(x,d)}if(x.success){o.$broadcast(p.NAME+".event.refresh",{source:k.directiveID,updateTimestamp:k.updateTimestamp,tm1RefreshGroup:k.tm1RefreshGroup});o.$broadcast("tm1UiRptView.event.refresh")}else{p.log(k,"cell update error",x.message);k.isValid=false;k.validationMessage="There was an error updating cube. Please check your input.";if(x.message&&x.message.error&&x.message.error.message){k.validationMessage=x.message.error.message}p.updateTemplateWithValidationClass(k)}k.hasPendingValue=false})}else{if(k.onAfterCellUpdate==undefined){k.onAfterCellUpdate=function(){if(k.hasApi&&k.tm1Api.onUpdate){k.tm1Api.onUpdate(h,{cube:k.tm1RptRowCell().cube,elements:k.tm1RptRowCell().reference()})}o.$broadcast(p.NAME+".event.refresh",{source:k.directiveID,updateTimestamp:k.updateTimestamp,tm1RefreshGroup:k.tm1RefreshGroup});o.$broadcast("tm1UiRptView.event.refresh");k.hasPendingValue=false}}k.tm1RptRowCell().value=h;k.tm1RptRowCell().update(k.onAfterCellUpdate,false)}};p.updateListEntries=function(e,d){if(!e.picklistRadio&&!_.isEmpty(e.rawValueForPickListUsageOnly)){var c=false;_.forEach(e.entry.picklist,function(f){if(f==e.rawValue){c=true}});if(!c){e.entry.picklist.unshift(e.rawValue)}}e.$broadcast("tm1UiSelect.items.ready",e.entry.picklist)};p.updateDirectiveState=function(e,f){if(e.hasPendingValue){return}if(f.id==e.directiveID){p.log(e,"Received Response ["+e.tm1Cube+"]:["+e.tm1Elements+"]",f);e.errorMessage=null;e.rawValueForPickListUsageOnly=f.Value;e.rawValueCopy=f.Value;if(f.Value==undefined){e.isNumericOverride=true;f.Value=0}e.entry.value=f.Value;e.rawValue=f.Value;if(f.HasPicklist!=undefined&&f.HasPicklist){e.entry.isList=true;if(e.entry.picklist==undefined||e.entry.picklist.length==0){e.entry.picklist=[e.rawValue]}if(e.picklistRadio){p.updatePicklistValues(e)}else{p.updateListEntries(e,true)}e.entry.value=(e.entry.value=="")?p.emptyDisplay:e.entry.value}e.isConsolidated=f.isConsolidated?true:false;e.isNumeric=angular.isNumber(f.Value);if(e.isNumericOverride&&!e.isNumeric){e.isNumeric=true}e.isAnnotated=f.isAnnotated;e.hasDrillThrough=f.HasDrillthrough?true:false;if(!e.hideTraceCalculation){e.hideTraceCalculation=f.isRuleTraceAvailable?false:true}e.sandbox.valueDiffersFromBase=f.isBaseValueDifferentInSandbox;e.entryIsPreviouslyUpdateable=false;if(e.entry.isUpdateable){e.entryIsPreviouslyUpdateable=true}e.entry.isUpdateable=!f.isReadOnly&&!e.tm1ReadOnly;if(p.isConsolUpdateable(e)){e.entry.isUpdateable=true}if(e.isForcedReadOnly){e.entry.isUpdateable=false}if(!e.entry.isUpdateable&&e.entryIsPreviouslyUpdateable){e.inputAlreadyAppended=false}e.valueCell={directiveID:e.directiveID,oDataId:f.odataId,oDataPatch:{Ordinal:f.Ordinal,Value:f.Value}};if(e.hasModel){e.ngModel=f.Value}if(e.hasOnLoadFunction){e.hasOnLoadFunction=false;e.tm1OnLoad({data:angular.isDefined(e.ngModel)?e.ngModel:f.Value})}if(e.hasOnChangeFunction){if(e.skipOnChangeOnce){e.skipOnChangeOnce=false}else{setTimeout(function(){e.tm1OnChange({data:angular.isDefined(e.ngModel)?e.ngModel:f.Value})})}}if(e.hasChangeFunction){setTimeout(function(){e.tm1Change({data:angular.isDefined(e.ngModel)?e.ngModel:f.Value})})}e.currentEntryValue=f.Value;if(!e.entry.isList){e.entry.value=e.entry.value.toString();if(e.isNumeric){var g=e.formatPercentage?e.rawValue*100:e.rawValue;g=g/e.dataScale;if(angular.isUndefined(e.directiveAccountingSettings)){if(e.hasAccountingSettingsOverride){e.directiveAccountingSettings=e.accountingSettingsOverride}else{e.directiveAccountingSettings=_.cloneDeep(accounting.settings);if(e.formatNumberFlag){e.directiveAccountingSettings.currency.precision=_.toNumber(e.tm1DataDecimal)}if(e.formatPercentage){e.directiveAccountingSettings.currency.format={pos:"%v%",neg:"(%v%)",zero:"-%"}}if(!e.formatNegativeInParenthesis){e.directiveAccountingSettings.currency.format="%v"}}}e.entry.value=accounting.formatMoney(g,e.directiveAccountingSettings.currency);e.currentEntryValue=e.entry.value;p.log(e,"after applying accoungint.formatMoney()",e.entry.value)}if(angular.isDefined(e.tm1DefaultEmpty)&&(e.rawValue==0||e.rawValue=="")){e.entry.value=e.tm1DefaultEmpty;e.currentEntryValue=e.tm1DefaultEmpty}}p.updateTemplate(e,e.entry.isUpdateable);e.$broadcast("tm1UiSelect.item.select",e.currentEntryValue);p.updateTemplateWithCommentClass(e);if(!(n.helperIsStatusSuccessful(f.statusCode))){e.entry.value=e.errorDisplay;e.currentEntryValue=e.errorDisplay;a.error("dbr(ERROR) - instance: "+e.tm1Instance+", cube: "+e.tm1Cube+", elements: "+e.tm1Elements);a.error(f);if(angular.isDefined(f.errorMessage)){try{var d=angular.fromJson(f.errorMessage);a.debug(d);e.errorMessage=d.error.message}catch(c){e.errorMessage=f.errorMessage}p.updateTemplateWithError(e)}}}else{if(f.id==e.directiveCommentID){e.commentCell={directiveID:e.directiveCommentID,isComment:true,oDataId:f.odataId,oDataPatch:{Ordinal:f.Ordinal,Value:f.Value}};p.log(e,"Received Response For Comment ["+e.tm1CommentCube+"]:["+e.tm1CommentElements+"]",f);e.comment.isUpdateable=!f.isReadOnly&&!e.isCommentReadOnly;e.comment.value=f.Value;p.updateTemplateWithCommentClass(e)}}};p.updateDirectiveStateViaRptView=function(c){if(c.hasPendingValue){return}p.log(c,"Received Response via Rpt View ["+c.tm1Cube+"]:["+c.tm1Elements+"]");c.errorMessage=null;c.rawValueForPickListUsageOnly=c.tm1RptRowCell().value;c.entry.value=c.tm1RptRowCell().value;c.rawValue=c.tm1RptRowCell().value;if(!c.tm1RptRowCell().value&&c.tm1DefaultEmpty!=undefined){c.entry.value=c.tm1DefaultEmpty}if(c.tm1RptRowCell().HasPicklist!=undefined&&c.tm1RptRowCell().HasPicklist){c.entry.isList=true;if(c.entry.picklist==undefined||c.entry.picklist.length==0){c.entry.picklist=[c.rawValue]}if(c.picklistRadio){p.updatePicklistValues(c)}else{p.updateListEntries(c,true)}c.entry.value=(c.entry.value=="")?p.emptyDisplay:c.entry.value}c.isConsolidated=c.tm1RptRowCell().isConsolidated?true:false;c.isNumeric=angular.isNumber(c.rawValue);c.isAnnotated=c.tm1RptRowCell().isAnnotated;c.hasDrillThrough=c.tm1RptRowCell().HasDrillthrough;if(!c.hideTraceCalculation){c.hideTraceCalculation=c.tm1RptRowCell().isRuleTraceAvailable?false:true}c.sandbox.valueDiffersFromBase=c.tm1RptRowCell().isBaseValueDifferentInSandbox;c.entry.isUpdateable=!c.tm1RptRowCell().isReadOnly&&!c.tm1ReadOnly;if(p.isConsolUpdateable(c)){c.entry.isUpdateable=true}if(c.isForcedReadOnly){c.entry.isUpdateable=false}if(c.hasModel){c.ngModel=c.rawValue}if(c.hasOnLoadFunction){c.hasOnLoadFunction=false;c.tm1OnLoad({data:angular.isDefined(c.ngModel)?c.ngModel:c.rawValue})}if(c.hasOnChangeFunction){if(c.skipOnChangeOnce){c.skipOnChangeOnce=false}else{setTimeout(function(){c.tm1OnChange({data:angular.isDefined(c.ngModel)?c.ngModel:c.rawValue})})}}if(c.hasChangeFunction){setTimeout(function(){c.tm1Change({data:angular.isDefined(c.ngModel)?c.ngModel:c.rawValue})})}c.currentEntryValue=c.rawValue;c.valueCell={directiveID:c.directiveID,oDataPatch:{Value:c.rawValue}};if(!c.entry.isList){c.entry.value=c.entry.value.toString();if(c.isNumeric&&isFinite(c.rawValue)){var d=c.formatPercentage?c.rawValue*100:c.rawValue;d=d/c.dataScale;if(angular.isUndefined(c.directiveAccountingSettings)){if(c.hasAccountingSettingsOverride){c.directiveAccountingSettings=c.accountingSettingsOverride}else{c.directiveAccountingSettings=_.cloneDeep(accounting.settings);if(c.formatNumberFlag){c.directiveAccountingSettings.currency.precision=_.toNumber(c.tm1DataDecimal)}if(c.formatPercentage){c.directiveAccountingSettings.currency.format={pos:"%v%",neg:"(%v%)",zero:"-%"}}if(!c.formatNegativeInParenthesis){c.directiveAccountingSettings.currency.format="%v"}}}c.entry.value=accounting.formatMoney(d,c.directiveAccountingSettings.currency);c.currentEntryValue=c.entry.value;p.log(c,"after applying accoungint.formatMoney()",c.entry.value)}}p.updateTemplate(c,c.entry.isUpdateable);c.$broadcast("tm1UiSelect.item.select",c.currentEntryValue);p.updateTemplateWithCommentClass(c)};p.spreadRepeatDbrValue=function(f,K,e){var h=e.trim().split(" ").join("");var L=[];var J=null;for(var c=1;c<h.length;c++){var k=h.charAt(c);if(k=="^"||k=="<"||k==">"||k=="|"){L.push(k)}else{J=h.substr(c);if(isNaN(J)){return e}else{break}}}if(!J){p.log(f,"No value provided: "+h);return f.currentEntryValue}p.log(f,"value to repeat: "+J+", direction is "+L);var g=p.getTableRowIndex(K);var d=p.getTableTdIndex(K);var M=p.getTableTdInRowTotal(K);var N=p.getTableRowsTotal(K);var G=p.getTableTdElement(K);var I=G.parents("tr");var H=[];var j=undefined;for(var c=0;c<L.length;c++){var k=L[c];switch(k){case"^":p.log(f,"repeat up");if(I&&G){var l=0;var m=0;p.getTableParentOfRow(K).children().each(function(){if(l<g){I=$(this);m=0;I.children().each(function(){if(m==d){G=$(this);j=p.prepareDbsRequest(G,J);if(j){H.push(j)}else{p.log(f,"Not allowed to update. Error Setting DBR Value on Row Index "+l)}}m++})}l++})}break;case"|":p.log(f,"repeat down");if(I&&G){var l=0;var m=0;p.getTableParentOfRow(K).children().each(function(){if(l>g){I=$(this);m=0;I.children().each(function(){if(m==d){G=$(this);j=p.prepareDbsRequest(G,J);if(j){H.push(j)}else{p.log(f,"Not allowed to update. Error Setting DBR Value on Row Index "+l)}}m++})}l++})}break;case">":p.log(f,"repeat right");if(I&&G){var m=0;I.children().each(function(){if(m>d){G=$(this);j=p.prepareDbsRequest(G,J);if(j){H.push(j)}else{p.log(f,"Not allowed to update. Error Setting DBR Value on Column Index "+m)}}m++})}break;case"<":p.log(f,"repeat left");if(I&&G){var m=0;I.children().each(function(){if(m<d){G=$(this);j=p.prepareDbsRequest(G,J);if(j){H.push(j)}else{p.log(f,"Not allowed to update. Error Setting DBR Value on Column Index "+m)}}m++})}break}}p.log(f,"dbsRequests",H);if(H.length>0){n.cellPuts(H).then(function(x){if(x.success){o.$broadcast(p.NAME+".event.refresh",{source:f.directiveID,updateTimestamp:f.updateTimestamp,tm1RefreshGroup:f.tm1RefreshGroup})}else{a.error("Spreading Error. Check Server Logs.")}})}return J};p.hasCompleteParams=function(f){var c=true;if(_.isEmpty(f.tm1Cube)||_.isEmpty(f.tm1Elements)){c=false}else{p.evaluateIfReadOnly(f);var d=Papa.parse(f.tm1Elements);if(angular.isDefined(d.data)&&d.data.length==1&&d.data[0].length>0){angular.forEach(d.data[0],function(g){if((c&&_.isEmpty(g))||(!_.isEmpty(g)&&g.trim()=="")){c=false}})}var e=Papa.parse(f.tm1CommentElements);if(angular.isDefined(e.data)&&e.data.length==1&&e.data[0].length>0){angular.forEach(e.data[0],function(g){if((c&&_.isEmpty(g))||(!_.isEmpty(g)&&g.trim()=="")){c=false}})}}return c};p.showContextReference=function(c){u.setDefaults({size:null});c.tm1ReferenceConfig={};c.tm1ReferenceConfig.tm1Instance=c.tm1Instance;c.tm1ReferenceConfig.tm1Cube=c.tm1Cube;c.tm1ReferenceConfig.tm1Elements=c.tm1Elements;c.tm1ReferenceConfig.tm1Value=c.entry.value;if(!_.isEmpty(c.tm1CommentCube)){c.tm1ReferenceConfig.tm1CommentCube=c.tm1CommentCube}if(!_.isEmpty(c.tm1CommentElements)){c.tm1ReferenceConfig.tm1CommentElements=c.tm1CommentElements}var d=t('<tm1-ui-dbr-cm-reference tm1-reference-config="tm1ReferenceConfig"></tm1-ui-dbr-cm-reference>');var e=c.$new();u.alert(d(e)).then(function(){e.$destroy()})};p.showContextSpread=function(d){u.setDefaults({size:null});d.spreadAction={action:""};d.spreadConfirmClear=false;d.spreadAction={spreadValue:d.rawValue};var c='<tm1-ui-dbr-cm-spread tm1-spread-action="spreadAction" tm1-dbr-entry="entry"></tm1-ui-dbr-cm-spread>';var e=d.$new();var f=t(c);d.spreadDialog=u.customDialog({title:"Spread",message:f(e),onEscape:function(){e.$destroy()}})};p.showContextComment=function(d){u.setDefaults({size:null});d.comment={value:"",isUpdateable:!d.isCommentReadOnly};d.newCommentValue=d.comment.value;var c="<tm1-ui-dbr-cm-comment";c+=' tm1-instance="'+d.tm1Instance+'"';c+=' tm1-cube="tm1Cube"';c+=' tm1-elements="tm1Elements"';c+=' tm1-comment-cube="tm1CommentCube"';c+=' tm1-comment-elements="tm1CommentElements"';c+=' tm1-format-html-buttons="taCommentToolbarButtons"';c+=' tm1-has-annotations="false"';c+=' tm1-read-only="'+(d.comment.isUpdateable?false:true)+'"';c+=' tm1-parent-directive="tm1UiDbr"';if(angular.isDefined(d.tm1RefreshGroup)&&!_.isEmpty(d.tm1RefreshGroup)){c+=' tm1-refresh-group="'+d.tm1RefreshGroup+'"'}c+="></tm1-ui-dbr-cm-comment>";var e=d.$new();var f=t(c);u.customDialog({message:f(e),onEscape:function(){e.$destroy()}})};p.showContextDrill=function(d){u.setDefaults({size:"large"});var c="<tm1-ui-dbr-cm-drill";c+=' tm1-instance="'+d.tm1Instance+'"';c+=' tm1-cube="tm1Cube"';c+=' tm1-elements="tm1Elements"';c+=' tm1-value="entry.value"';if(d.hasDrillModel){c+=' tm1-drill-data="tm1DrillModel"'}c+="></tm1-ui-dbr-cm-drill>";var e=d.$new();var f=t(c);u.alert(f(e)).then(function(){if(d.hasDrillModel&&e.tm1DrillModel){d.tm1DrillModel=_.cloneDeep(e.tm1DrillModel)}e.$destroy()})};p.showContextTraceCalculation=function(c){u.setDefaults({size:"large"});c.tm1ContextOptions={};c.tm1ContextOptions.tm1Instance=c.tm1Instance;c.tm1ContextOptions.tm1Cube=c.tm1Cube;c.tm1ContextOptions.tm1Elements=c.tm1Elements;c.tm1ContextOptions.isConsolidated=c.isConsolidated;var d=t('<tm1-ui-dbr-cm-trace-calculation tm1-options="tm1ContextOptions"></tm1-ui-dbr-cm-trace-calculation>');var e=c.$new();u.alert(d(e)).then(function(){e.$destroy()})};p.eventOnClickForContext=function(c,d){c.clickID=d;p.log(c,"showContext("+d+")");if(c.isContextApplicable()&&d!=9){p.updateTemplateAddContext(c);if(c.timer){w.cancel(c.timer);c.timer=null}p.log(c,"showContext() contextTimeout: "+c.contextTimeout);c.timer=w(function(){p.updateTemplateRemoveContext(c)},c.contextTimeout*1000)}};p.eventKeyDown=function(j,g){j.onInputEnterKey=false;if(!j.isMultiLine&&g.keyCode==13){j.onInputEnterKey=true;j.updateData()}var l=$(g.target).parents("td");while(true){var d=null;if(g.keyCode==38){if(l&&l.length){var h=l.closest("tr").prev();if(h&&h.length){d=h.children().eq(l.index())}}}else{if(g.keyCode==39){if(l&&l.length){d=l.next()}}else{if(g.keyCode==40){if(l&&l.length){var k=l.closest("tr").next();if(k&&k.length){d=k.children().eq(l.index())}}}else{if(g.keyCode==37){if(l&&l.length){d=l.prev()}}}}}if(d&&d.length){var m=d.find("input[type=text],input[type=number],textarea");var e=$(g.target).val();if(e.length>1&&isNaN(e)){var f=g.target.selectionStart;var c=g.target.selectionEnd;if(f===0&&c===e.length-1){}else{if(g.keyCode==37&&f!==0){return}else{if(g.keyCode==39&&f!==e.length){return}}}}if(m&&m.length){m.focus();m.select();g.stopPropagation();g.preventDefault();return}else{l=d}}else{return}}};p.eventPaste=function(I,g){var j=g.originalEvent.clipboardData||window.clipboardData;if(j){var L=j.getData("Text");if(L&&(L.indexOf("\t")>-1||L.indexOf("\n")>-1)){g.stopPropagation();g.preventDefault();var N=L.split(/\r?\n/);var f=[];angular.forEach(N,function(y){if(y.length>0){var x=y.split(/\t/);f.push(x)}});var J=$(g.target).parents("td");if(J.length){var M=J.index();var c=J;for(var K=0;K<f.length;K++){var l=f[K];for(var k=0;k<l.length;k++){var m=l[k];var e=c.find("input[type=text],input[type=number],textarea");if(e.length){try{var h=angular.element(e).scope().$parent;if(h&&h.entry&&angular.isDefined(h.entry.value)){h.entry.value=m;h.updateData()}}catch(G){p.log(I,"Unable to paste cell value",G)}}var d=$(c).next();if(!d.length){break}else{c=d}}var H=c.closest("tr").next();if(!H.length){break}c=H.children().eq(M);if(!c.length){break}}$(g.target).focus()}}}};p.eventUpdateData=function(d,c){d.updateTimestamp=_.now();d.editMode=false;w(function(){if(d.currentEntryValue!=d.entry.value){p.updateData(d,c,d.valueCell,d.entry.value)}else{if(d.entry.spreadValue){p.updateData(d,c,d.valueCell,d.entry.spreadValue);d.entry.spreadValue=null}}},1000)};p.updatePicklistValues=function(c){n.cellGetPicklistValues(c.tm1Instance,c.tm1Cube,n.helperConvertElementsToArray(c.tm1Elements)).then(function(d){c.entry.picklist=d;p.updateListEntries(c)})}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiDimension",["$http","$q","uuid2","$tm1UiHelper",function(g,k,j,a){var h=this;h.extractDimensionAndHierarchy=function(e){var d={dimension:e,hierarchy:e};if(angular.isDefined(e)){if(e.indexOf("::")!=-1){var c=e.split("::");d.dimension=c[0].trim();d.hierarchy=c[1].trim()}}return d};h.elements=function(N,M,f,O,d,L,I,T,G,e){if(angular.isUndefined(N)||angular.isUndefined(M)){throw"instance and dimension are required fields. Please check."}var Z=h.extractDimensionAndHierarchy(M);var S=Z.dimension;var U=Z.hierarchy;var V=j.newguid();var Q=f;var c=O;var H=d;var R=L;var aa=_.toInteger(I);var K=false;var X=true;var P=e;if(angular.isDefined(T)&&T){K=true}if(angular.isDefined(G)&&!G){X=false}if(angular.isObject(f)){Q=f.attributes;c=f.subset;H=f.mdx;R=f.filter;P=f.defaultElement;aa=_.toInteger(f.batchSize);if(angular.isDefined(f.showHierarchy)&&f.showHierarchy){K=true}if(angular.isDefined(f.elementsOnly)&&!f.elementsOnly){X=false}if(angular.isDefined(f.hierarchy)&&!_.isEmpty(f.hierarchy)){U=f.hierarchy}}var Y={id:V,instance:N,dimension:S,hierarchy:U,attribute:Q,subset:c,mdx:H,filter:R,batchSize:aa,showHierarchy:K,elementsOnly:X,defaultElement:P};var J=g.post("api/dimensions",[Y]);var W=W||k.defer();J.then(function(l){W.resolve(l.data[V])},function(l){W.reject(l)});return W.promise};h.element=function(e,v,f,u){if(angular.isUndefined(e)||angular.isUndefined(v)||angular.isUndefined(f)){throw"instance, dimension and elementOrAlias are required fields. Please check."}var x=h.extractDimensionAndHierarchy(v);var w=x.dimension;var d=x.hierarchy;var s=j.newguid();var t={id:s,instance:e,dimension:w,hierarchy:d,attribute:u,element:f,showHierarchy:false,elementsOnly:false};var c=g.post("api/dimensions",[t]);var y=y||k.defer();c.then(function(l){y.resolve(l.data[s])},function(l){y.reject(l)});return y.promise};h.attributes=function(p,e){if(angular.isUndefined(p)||angular.isUndefined(e)){throw"instance and dimension are required fields. Please check."}var q=h.extractDimensionAndHierarchy(e);var f=q.dimension;var o=q.hierarchy;var c=g.get("api/dimensions/"+encodeURIComponent(p)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(o)+"/attributes");var d=d||k.defer();c.then(function(l){d.resolve(l.data)},function(l){d.reject(l)});return d.promise};h.hierarchy=function(m,e,f){if(angular.isUndefined(m)||angular.isUndefined(e)||angular.isUndefined(f)){throw"instance, dimension and hierarchy are required fields. Please check."}var c=g.get("api/dimensions/"+encodeURIComponent(m)+"/"+encodeURIComponent(e)+"/hierarchies?hierarchy="+encodeURIComponent(f));var d=d||k.defer();c.then(function(l){d.resolve(l.data)},function(l){d.reject(l)});return d.promise};h.hierarchies=function(f,e){if(angular.isUndefined(f)||angular.isUndefined(e)){throw"instance and dimension are required fields. Please check."}var c=g.get("api/dimensions/"+encodeURIComponent(f)+"/"+encodeURIComponent(e)+"/hierarchies");var d=d||k.defer();c.then(function(m){d.resolve(m.data)},function(m){d.reject(m)});return d.promise};h.dimensions=function(f,e){if(angular.isUndefined(f)){throw"instance is a required field. Please check."}var c=g.post("api/dimensions/"+encodeURIComponent(f)+"/list",e);var d=d||k.defer();c.then(function(m){d.resolve(m.data)},function(m){d.reject(m)});return d.promise};h.subsets=function(m,e,f){if(angular.isUndefined(m)||angular.isUndefined(e)){throw"instance and dimension are required fields. Please check."}var c=g.post("api/dimensions/"+encodeURIComponent(m)+"/"+encodeURIComponent(e)+"/subsets",f);var d=d||k.defer();c.then(function(l){d.resolve(l.data)},function(l){d.reject(l)});return d.promise};h.subsetAlias=function(q,d,e){if(angular.isUndefined(q)||angular.isUndefined(d)||angular.isUndefined(e)){throw"instance, dimension and subset are required fields. Please check."}var r=h.extractDimensionAndHierarchy(d);var f=r.dimension;var p=r.hierarchy;var s=g.get("api/dimensions/"+encodeURIComponent(q)+"/"+encodeURIComponent(f)+"/"+encodeURIComponent(p)+"/"+encodeURIComponent(e)+"/alias");var c=c||k.defer();s.then(function(l){c.resolve(l.data)},function(l){c.reject(l)});return c.promise};h.subsetCreateOrUpdate=function(p,d,e,f){if(angular.isUndefined(p)||angular.isUndefined(d)||angular.isUndefined(e)){throw"instance, dimension and subset are required fields. Please check."}var s=g.post("api/dimensions/"+encodeURIComponent(p)+"/"+encodeURIComponent(d)+"/subset",f);var q={};if(angular.isDefined(f)){q=f}var r=h.extractDimensionAndHierarchy(d);q.dimension=r.dimension;q.hierarchy=r.hierarchy;q.instance=p;q.name=e;if(angular.isDefined(q.hierarchy)){q.hierarchy=q.hierarchy}var c=c||k.defer();s.then(function(l){c.resolve({success:a.isSuccessful(l),message:l.data})},function(l){c.reject(l)});return c.promise};h.subsetDelete=function(q,d,e,p){if(angular.isUndefined(q)||angular.isUndefined(d)||angular.isUndefined(e)){throw"instance, dimension and subset are required fields. Please check."}var r=h.extractDimensionAndHierarchy(d);var f=r.hierarchy;if(p&&angular.isDefined(p.hierarchy)&&!_.isEmpty(p.hierarchy)){f=p.hierarchy}var p={instance:q,dimension:r.dimension,hierarchy:f,subset:e};var s=g.post("api/dimensions/subset-delete",p);var c=c||k.defer();s.then(function(l){c.resolve({success:a.isSuccessful(l),message:l.data})},function(l){c.reject(l)});return c.promise};h.applyDrillAction=function(m,e,f){f.dimension=e;var c=g.post("api/dimensions/"+encodeURIComponent(m)+"/drill-mdx",f);var d=d||k.defer();c.then(function(l){d.resolve(l.data)},function(l){d.reject(l)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiHelper",["$rootScope","$timeout","$http","$interval","$q","uuid2","$filter","$log","$location","$transitions","tm1UiSettings",function(p,z,q,v,u,A,s,a,x,t,w){this.version=function(){return 1};var r=this;r.batchRequestID="tm1.core.data.request";r.batchResponseID="tm1.core.data.response";r.batchElementRequestID="tm1.core.element.request";r.batchElementResponseID="tm1.core.element.response";var y=p;r.getWatchersCount=function(c){c=angular.element(c||document.documentElement);if(c&&c.data()&&c.data().$isolateScope){return c.data().$isolateScope.$$watchersCount}else{if(c&&c.data()&&c.data().$scope){return c.data().$scope.$$watchersCount}else{return 0}}};r.getWatchers=function(g,c){g=angular.element(g||document.documentElement);var e=0;function d(l){var k=f(l.data().$isolateScope);var h=f(l.data().$scope);var j=h.concat(k);if(c){}else{angular.forEach(l.children(),function(m){j=j.concat(d(angular.element(m)))})}return j}function f(h){if(h){return h.$$watchers||[]}else{return[]}}return d(g)};r.formatNumber=function(c,d){return s("formatNumber")(c,d)};r.formatPercentage=function(c,d){return s("formatPercentage")(c,d)};r.generateUUID=function(){return A.newguid()};r.encode=function(c){return btoa(encodeURIComponent(c).replace(/%([0-9A-F]{2})/g,function(e,d){return String.fromCharCode("0x"+d)}))};r.log=function(g,c,f,d){try{if(d){console.info("[%s] %s -> %o",c,f,d)}else{console.info("[%s] %s",c,f)}}catch(e){a.info("["+c+"] "+f+(d?" ->":""));if(d){a.info(_.cloneDeep(d))}}p.$broadcast(w.frameworkLogID,{id:g,name:c,message:f,object:d})};r.convertElementsToArray=function(e,d){if(d){return r.papaparseConvertElementsToArray(e,d)}else{var c=[];if(_.isEmpty(e)){return c}else{var l=[];var m=e.split('"');var j=e.split(",");if(m<2){var h=[];for(var k=0;k<j.length;k++){l.push(j[k].trim())}}else{var l=[];var f;for(var k=0;k<j.length;k++){f=j[k];if(_.startsWith(f.trim(),'"')&&!_.endsWith(f.trim(),'"')){for(var g=k+1;g<j.length;g++){f+=","+j[g];k++;if(_.endsWith(f.trim(),'"')){break}}}if(_.startsWith(f.trim(),'"')&&_.endsWith(f.trim(),'"')){f=f.trim();f=f.substr(1,f.length-2)}l.push(f.trim())}}j.length=0;j=null;m.length=0;m=null;return l}}};r.papaparseConvertElementsToArray=function(d,e){var c=angular.isDefined(e)?Papa.parse(d,e):Papa.parse(d);if(angular.isDefined(c.data)&&c.data.length==1&&c.data[0].length>0){var f=[];_.forEach(c.data[0],function(g){f.push(g.trim())});return f}else{throw"Unable to parse elements ["+d+"] into an array. Please check."}};r.isSuccessful=function(c){var e=false;try{if((r.isStatusSuccessful(c.status))){e=true}}catch(d){}return e};r.isStatusSuccessful=function(d){var e=false;try{if(d>=200&&d<300){e=true}}catch(c){}return e};r.doesPageExists=function(e){var c=q.get(e);var d=d||u.defer();c.then(function(f){d.resolve({success:r.isSuccessful(f),message:f.data})},function(f){d.reject(f)});return d.promise};r.buildTable=function(f,j){var g=j.Axes[0].Tuples.length;var l=j.Axes[1].Tuples.length;var k=0;for(var n=0;n<g;n++){var d=j.Axes[0].Tuples[n];if(k<d.Members.length){k=d.Members.length}}var e=0;for(var n=0;n<l;n++){var d=j.Axes[1].Tuples[n];if(e<d.Members.length){e=d.Members.length}}$(f).append("<thead></thead>");for(var h=0;h<k;h++){$(f).find("thead").append("<tr></tr>");var Q=$(f).find("tr:last");if(h==0){for(var R=0;R<e;R++){$(Q).append("<th rowspan='"+k+"'>&nbsp;</th>")}}var N="";var P=1;for(var n=0;n<g;n++){var o=j.Axes[0].Tuples[n].Members[h].Name;if(N!=o||n==g-1){$(Q).append("<th colspan='"+P+"'>"+o+"</th>");P=0}P++;N=o}}var O=[];$(f).append("<tbody></tbody>");var S=$(f).find("tbody");var L=0;for(var R=0;R<l;R++){$(S).append("<tr></tr>");var Q=$(S).find("tr:last");for(var n=0;n<j.Axes[1].Tuples[R].Members.length;n++){var o=j.Axes[1].Tuples[R].Members[n].Name;if(O[n]==null){O[n]=""}var M=1;for(var m=R+1;m<j.Axes[1].Tuples.length;m++){if(j.Axes[1].Tuples[m].Members[n].Name==o){M++}else{break}}if(O[n]!=o){$(Q).append("<th rowspan='"+M+"'>"+o+"</th>")}O[n]=o}for(var h=0;h<g;h++){var c=parseFloat(j.Cells[L].Value);$(Q).append("<td>"+c+"</td>");L++}}};r.initLoggers=function(){q.get("api/app/settings").then(function(c,d){if(r.isSuccessful(c)){if(c.data){p.settings=c.data;if(c.data.logToFile||!_.isEmpty(c.data.logPulseAddress)){r.logPage();p.$on("$locationChangeSuccess",function(e){r.logPage()})}}}else{a.error(c)}})};r.logPage=function(){if(p.settings&&(p.settings.logToFile||!_.isEmpty(p.settings.logPulseAddress))){var c={pageName:x.path(),pageUrl:x.absUrl(),parameters:x.search()};q.post("api/logs/page",c).then(function(d,e){if(d.status!=200){a.error("Pulse Logging Error");a.error(d.data)}})}};r.initBatcher=function(c){r.dbrList=[];r.elementList=[];y.batchRequestCount=0;y.isPollerRunning=false;y.batchElementRequestCount=0;y.isElementPollerRunning=false;r.tm1MaxElementRequest=c.maxRequestElementCount;r.tm1MaxRequest=c.maxRequestCount;r.tm1MaxTime=c.maxTime;y.$on(r.batchRequestID,function(d,e){if(!_.isEmpty(e)){r.dbrList.push(e.dbr);y.batchRequestCount++}});y.$on(r.batchElementRequestID,function(d,e){if(!_.isEmpty(e)){r.elementList.push(e.element);y.batchElementRequestCount++}});setInterval(function(){if(!y.isPollerRunning&&y.batchRequestCount>0){y.isPollerRunning=true;r.fetchData()}if(!y.isElementPollerRunning&&y.batchElementRequestCount>0){y.isElementPollerRunning=true;r.fetchElements()}},c.maxTime);r.fetchData=function(){if(r.dbrList.length>0){var d=_.clone(r.dbrList);d=_.slice(d,0,r.tm1MaxRequest);r.dbrList=_.difference(r.dbrList,d);var e={method:"POST",url:"api/dbr/batch",data:d};q(e).then(function(f,g){y.$broadcast(r.batchResponseID,f.data);y.isPollerRunning=false;y.batchRequestCount=r.dbrList.length})}};r.fetchElements=function(){if(r.elementList.length>0){var d=_.clone(r.elementList);d=_.slice(d,0,r.tm1MaxElementRequest);r.elementList=_.difference(r.elementList,d);var e={method:"POST",url:"api/dimensions",data:d};q(e).then(function(f,g){y.$broadcast(r.batchElementResponseID,f.data);y.isElementPollerRunning=false;y.batchElementRequestCount=r.elementList.length})}}};r.escapeText=function(c){return c.replace(/\]/g,"]]")}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiInstance",["$rootScope","$http","$q",function(a,f,h){var g=this;g.instances=function(){var c=c||h.defer();if(a.instances){c.resolve(a.instances)}else{f.get("api/instances").then(function(d){a.instances=d.data;c.resolve(d.data)},function(d){c.reject(d)})}return c.promise};g.configuration=function(e){if(_.isEmpty(e)){throw"$tm1Ui: instance is a required parameter."}var c=f.get("api/instances/"+encodeURIComponent(e));var d=d||h.defer();c.then(function(k){d.resolve(k.data)},function(k){d.reject(k)});return d.promise};g.capabilities=function(e){if(_.isEmpty(e)){throw"$tm1Ui: instance is a required parameter."}var c=f.get("api/instances/"+encodeURIComponent(e)+"/capabilities");var d=d||h.defer();c.then(function(k){d.resolve(k.data)},function(k){d.reject(k)});return d.promise};g.authentications=function(e){if(_.isEmpty(e)){throw"$tm1Ui: instance is a required parameter."}var c=f.get("api/instances/"+encodeURIComponent(e)+"/authentications");var d=d||h.defer();c.then(function(k){d.resolve(k.data)},function(k){d.reject(k)});return d.promise};g.getInstanceSettings=function(e){var c=f.get("api/instances/"+e+"/settings");var d=d||h.defer();c.then(function(k){d.resolve(k.data)},function(k){$log.error("$tm1Ui: Instance settings retrieval error");$log.error(k);d.reject(k)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiJob",["$rootScope","$http","$q","tm1UiSettings","$base64","$tm1UiHelper","$log","$tm1UiInstance",function(m,n,q,r,s,p,a,l){var o=this;o.debug=false;o.serviceID=p.generateUUID();o.log=function(c,d){a.debug("$tm1Ui - "+c);a.debug(d);if(o.debug){m.$broadcast(r.frameworkLogID,{id:o.serviceID,name:"$tm1UiJob",message:c,object:d})}};o.jobs=function(){var c=n.get("api/admin/scheduler");var d=d||q.defer();c.then(function(e){d.resolve(e.data)},function(e){d.reject(e)});return d.promise};o.job=function(d){if(_.isEmpty(d)){throw"$tm1UiJob: ID is EMPTY"}var e=n.get("api/admin/scheduler/"+encodeURIComponent(d.trim()));var c=c||q.defer();e.then(function(f){c.resolve(f.data)},function(f){c.reject(f)});return c.promise};o.saveOrUpdateJob=function(d){if(_.isEmpty(d)){throw"$tm1UiJob: Nothing to save"}var e=n.post("api/admin/scheduler",d);var c=c||q.defer();e.then(function(f){c.resolve({success:p.isSuccessful(f),message:f.data})},function(f){c.reject(f)});return c.promise};o.deleteJob=function(d){if(_.isEmpty(d)){throw"$tm1UiJob: ID is EMPTY"}var e=n({method:"POST",url:"api/admin/scheduler/"+encodeURIComponent(d.trim())+"/delete"});var c=c||q.defer();e.then(function(f){c.resolve({success:p.isSuccessful(f),message:f.data})},function(f){c.reject(f)});return c.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiOdataHelper",["$log","$tm1UiCube","$tm1UiCore",function(h,a,g){this.version=function(){return"0.0.1"};var f=this;f.isCellUpdateable=function(c){var d=false;if(c!=undefined&&c.RuleDerived!=undefined&&c.Consolidated!=undefined){d=(!c.RuleDerived&&!c.Consolidated)?true:false}return d};f.getMDXSelectQuery=function(e){var c="";if(e!=undefined&&e.length>0){var r=e.split("|");if(r.length>2){var q=[];var d=false;var s="",o="";q=r[1].split(":");s=q[0].trim();o=q[1].trim();c="SELECT {["+s+"].["+o+"]} ON COLUMNS";q=r[2].split(":");s=q[0].trim();o=q[1].trim();c=c+", {["+s+"].["+o+"]} ON ROWS";c=c+" FROM ["+r[0].trim()+"]";if(r.length>3){c=c+" WHERE (";for(var p=3;p<r.length;p++){q=r[p].split(":");s=q[0].trim();o=q[1].trim();c=c+"["+s+"].&["+o+"]"+((p==r.length-1)?"":",")}c=c+")"}}}return c};f.getMDXSelectQueryWithDBRA=function(m){var d="";if(m!=undefined&&m.length>0){var n=m.split("|");if(n.length==3){var c="",e="",o="";c=n[0].trim();e=n[1].trim();o=n[2].trim();d="SELECT {["+c+"].["+e+"]} ON COLUMNS, {[}ElementAttributes_"+c+"].["+o+"]} ON ROWS FROM [}ElementAttributes_"+c+"]"}}return d};f.parseMDXParams=function(c){var d={};return d};f.getChartJSLineLabel=function(l){var c=[];var m=l.Axes[0].Cardinality;var d=l.Axes[1].Cardinality;if(m>0&&d>0){for(var e=0;e<m;e++){c.push(l.Axes[0].Tuples[e].Members[0].Name)}}return c};f.getChartJSLineDataSet=function(e,y){var v=[];var x=e.Cells.length;var r=e.Axes[0].Cardinality;var d=e.Axes[1].Cardinality;var w=e.Axes[1].Hierarchies.length;var s=d*(r+w);var u=true;if(e.table==undefined){e=f.addFormattedData(e);u=false}var c=1;angular.forEach(e.table[y],function(j,k){c++},v);var t=1;angular.forEach(e.table[y],function(j,k){if(t>=(c-r)){this.push(j)}t++},v);if(!u){e.table=undefined}return v};f.getChartJSLineDataSetv2=function(m,c){var e=[];var l=m.Axes[1].Hierarchies.length;var d=1;angular.forEach(c,function(j){if(d>l){this.push(j)}d++},e);return e};f.addFormattedChartJSData=function(e,c){if(e!=undefined){var w=e.Cells.length;var q=e.Axes[0].Cardinality;var d=e.Axes[1].Cardinality;var v=e.Axes[1].Hierarchies.length;var r=d*(q+v);var s=e["data-chartjs-line"]={};s.labels=[];s.datasets=[];var t=true;if(e.table==undefined){e=f.addFormattedData(e);t=false}var u="";for(i=0;i<q;i++){u="col_"+(i+1);s.labels.push(e.table[0][u])}if(!t){e.table=undefined}}return e};f.addTableData=function(J,c){J.table={};if(J!=undefined&&J.Cells!=undefined&&J.Cells.length>0){var O=0,G=0,H=0,S=0;var D=0,M=0,d=0;O=J.Cells.length;G=J.Axes[0].Cardinality;if(J.Axes.length>1&&J.Axes[1].Cardinality){H=J.Axes[1].Cardinality;D=J.Axes[0].Hierarchies.length}if(J.Axes.length>1&&J.Axes[1].Hierarchies){S=J.Axes[1].Hierarchies.length;M=J.Axes[1].Hierarchies.length}if(J.Axes.length>2&&J.Axes[2].Hierarchies){d=J.Axes[2].Hierarchies.length}var L=H*G;if(L!=O){throw"addTableData() Check odata response. Calculated table size is not the same as Cell size. Cannot proceed."}var Q=function(j){return j.UniqueName.split("].[")[0].substr(1).split("^").join("")};var F=function(j){return j.Name};var N=0;var P=function(k,j){if(j.Attributes&&c&&c.alias&&j.Attributes[c.alias[k]]){return j.Attributes[c.alias[k]]}else{return j.Name}};J.table.rows=[];var I=0,B=0;axis=0;if(!(c&&c.skipCellData)){var R=-1;for(var e=1;e<=O;e++){var E={};if(e==1||(e%G==1)){J.table.rows.push([]);R++}E.CubeValue=J.Cells[e-1].Value;E.CubeFormattedValue=J.Cells[e-1].FormattedValue;I=I==G?0:I;_.forEach(J.Axes[0].Tuples[I].Members,function(j){E[Q(j)]=F(j)});if(J.Axes.length>1){_.forEach(J.Axes[1].Tuples[R].Members,function(j){E[Q(j)]=F(j)})}if(J.Axes.length>2){_.forEach(J.Axes[2].Tuples[0].Members,function(j){E[Q(j)]=F(j)})}J.table.rows[R].push(E);I++}}J.table.metadata={elements:{column:[],row:[],title:[]},dimensions:{column:[],row:[],title:[]},cellCount:O,dimensionCount:{column:D,row:M,title:d}};var K=function(m,k,j){if(k<m.Axes.length){for(var l=0;l<m.Axes[k].Tuples.length;l++){if(m.Axes[k].Tuples[l].Members&&m.Axes[k].Tuples[l].Members.length>0){var n={};_.forEach(m.Axes[k].Tuples[l].Members,function(o){n[Q(o)]=P(Q(o),o)});m.table.metadata.elements[j].push(n)}}}};var C=function(m,l,j){if(l<m.Axes.length){for(var k=0;k<m.Axes[l].Hierarchies.length;k++){m.table.metadata.dimensions[j].push(m.Axes[l].Hierarchies[k].Name)}}};K(J,0,"column");K(J,1,"row");K(J,2,"title");C(J,0,"column");C(J,1,"row");C(J,2,"title")}return J};f.addFormattedData=function(u){if(u!=undefined&&u.Cells!=undefined&&u.Cells.length>0){u.table=[];u.info={dimensionCount:{row:0,column:0,title:0}};var C={};var y=u.Cells.length;var B=u.Axes[0].Cardinality;var A=u.Axes[1].Cardinality;var c=u.Axes[1].Hierarchies.length;var e=A*(B+c);u.table_column_count=B+c;u.info.dimensionCount.row=c;u.info.dimensionCount.column=B;if(u.Axes.length>2){u.info.dimensionCount.title=u.Axes[2].Hierarchies.length}var v="";for(var d=0;d<(B+c);d++){v="col_"+(d+1);if(d<c){C[v]=u.Axes[1].Hierarchies[d].Name}else{C[v]=u.Axes[0].Tuples[d-c].Members[0].Name}}u.table.push(C);C={};var t=0;var z=1;for(var x=0;x<y;x++){if(z==1){C={};for(var w=1;w<=c;w++){v="col_"+w;C[v]=u.Axes[1].Tuples[t].Members[0].Name;t++}}v="col_"+(c+z);C[v]=u.Cells[x].Value;z++;if(z==(B+c)){u.table.push(C);z=1;C={}}}}return u};f.addFormattedData_WithConfig=function(d,B){if(d!=undefined){d.table=[];var F={};var z=d.Cells.length;var D=d.Axes[0].Cardinality;var C=d.Axes[1].Cardinality;var G=d.Axes[1].Hierarchies.length;var I=C*(D+G);var E=f.findMaximumLevel(d);d.table_column_count=D+G;var e="";for(var H=0;H<(D+G);H++){e="col_"+(H+1);if(H<G){F[e]=d.Axes[1].Hierarchies[H].Name}else{if(B.col.attribute!=undefined&&B.col.attribute!=""){F[e]=d.Axes[0].Tuples[H-G].Members[0].Attributes[B.col.attribute]}else{F[e]=d.Axes[0].Tuples[H-G].Members[0].Name}}}d.table.push(F);F={};var c=0;var A=1;var t=0;for(var y=0;y<z;y++){if(A==1){F={};for(var x=1;x<=G;x++){e="col_"+x;t=parseFloat(d.Axes[1].Tuples[c].Members[0].Element.Level);t=E-t;if(B.row.attribute!=undefined&&B.row.attribute!=""){F[e]=f.utility_padders(t,"-")+d.Axes[1].Tuples[c].Members[0].Attributes[B.row.attribute]}else{F[e]=f.utility_padders(t,"-")+d.Axes[1].Tuples[c].Members[0].Name}c++}}e="col_"+(G+A);F[e]=d.Cells[y].Value;A++;if(A==(D+G)){d.table.push(F);A=1;F={}}}}return d};f.utility_padders=function(e,c){var d="";for(var k=0;k<e;k++){d=d+c}return d};f.findMaximumLevel=function(d){var c=d.Axes[1].Hierarchies.length;var e=0,m=0;for(var l=0;l<c;l++){m=parseFloat(d.Axes[1].Tuples[l].Members[0].Element.Level);if(m>e){e=m}}return e};f.extractMember=function(k){var d="";try{var e=k.indexOf("Member")+9;d=k.substr(e,k.length-e+6);d=d.substr(0,d.length-2);d=decodeURIComponent(d)}catch(c){h.error("extractMember(ERROR): "+k);h.error(c.message);d=k}return d};f.extractDimension=function(m){var l="";var e="Dimensions";var c=e.length;try{l=m.substr(c+2,m.length);c=l.indexOf(")");l=l.substr(0,c-1);l=decodeURIComponent(l)}catch(d){h.error("extractDimension(ERROR): "+m);h.error(d.message);l=m}return l}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiOdataResultHelper",["$tm1UiCube","$tm1UiCore","$log","$timeout",function(j,h,k,a){var g=this;g.resultsetTransform=function(m,U,Q,ah){var ai={alias:null,collapseAll:false,collapse:[],expand:[],suppressZeroRows:false,suppressZeroColumns:false,maxRows:-1,ruleTracingAllowed:false};var V={instance:m,cube:U,dimensions:{order:[],titles:[],columns:[],rows:[],hierarchies:{columns:[],rows:[],titles:[]}},metadata:{},elements:[],headers:[],rows:[],_rows:[],collapseAll:function(){for(var p=0;p<this.dimensions.rows.length;p++){var n=this.metadata[this.dimensions.rows[p]];if(n){for(var l in n){if(!n.hasOwnProperty(l)){continue}var o=n[l];if(o&&o.topLevel==0){o.toggle(true)}}}}this.filter()},expandAll:function(){for(var p=0;p<this.dimensions.rows.length;p++){var n=this.metadata[this.dimensions.rows[p]];if(n){for(var l in n){if(!n.hasOwnProperty(l)){continue}var o=n[l];if(o&&o.topLevel==0){o.toggle(false)}}}}this.filter()},collapse:function(o){var l=[];var s=true;for(var p=0;p<o.length;p++){if(o[p].indexOf("].[")!=-1){s=false;break}}if(s){for(var v=0;v<this.dimensions.rows.length;v++){var u=this.metadata[this.dimensions.rows[v]];if(u){for(var q=0;q<o.length;q++){for(var n in u){if(!u.hasOwnProperty(n)){continue}if(_.eq(u[n].name,o[q])){l.push(n)}}}}}}else{l=o}for(var v=0;v<this.dimensions.rows.length;v++){var u=this.metadata[this.dimensions.rows[v]];if(u){for(var q=0;q<l.length;q++){var w=u[l[q]];if(w){w.toggle(true)}}}}this.filter()},expand:function(p){var l=[];var u=true;for(var o=0;o<p.length;o++){if(p[o].indexOf("].[")!=-1){u=false;break}}if(u){for(var w=0;w<this.dimensions.rows.length;w++){var v=this.metadata[this.dimensions.rows[w]];if(v){for(var s=0;s<p.length;s++){for(var n in v){if(!v.hasOwnProperty(n)){continue}if(_.eq(v[n].name,p[s])){l.push(n)}}}}}}else{l=p}for(var w=0;w<this.dimensions.rows.length;w++){var v=this.metadata[this.dimensions.rows[w]];if(v){for(var s=0;s<l.length;s++){var y=v[l[s]];if(y){y.toggle(false);while(y&&y.parent){y.parent.hidden=false;y.parent.collapsed=false;if(y.parent.children){for(var q=0;q<y.parent.children.length;q++){y.parent.children[q].hidden=false}}y=y.parent}}}}}this.filter()},collapsed:function(){var n=[];for(var o=0;o<this.dimensions.rows.length;o++){var q=V.metadata[this.dimensions.rows[o]];if(q){for(var p in q){if(!q.hasOwnProperty(p)){continue}var l=q[p];if(l&&l.collapsed){n.push(l.uniqueName)}}}}return n},expanded:function(){var n=[];for(var o=0;o<this.dimensions.rows.length;o++){var q=V.metadata[this.dimensions.rows[o]];if(q){for(var p in q){if(!q.hasOwnProperty(p)){continue}var l=q[p];if(l&&!l.collapsed){n.push(l.uniqueName)}}}}return n},filter:function(){this.rows.length=0;for(var l=0;l<this._rows.length;l++){var n=this._rows[l];if(!n.isHidden()){this.rows.push(n)}}},recalculate:function(){for(var o=0;o<this.rows.length;o++){this.rows[o].index=o+1}if(this.rows.length>0){for(var n=0;n<this.rows[0].elements.length;n++){for(var o=0;o<this.rows.length;o++){this.rows[o].elements[n].visible=true;this.rows[o].elements[n].visible=o==0?true:false;this.rows[o].elements[n].rowspan=1;for(var l=o+1;l<this.rows.length;l++){if(this.rows[o].elements[n].uniqueName==this.rows[l].elements[n].uniqueName){this.rows[o].elements[n].rowspan++}else{break}}if(n==this.rows[0].length-1){this.rows[o].elements[n].visible=true}else{if(o-1>=0){if(this.rows[o].elements[n].uniqueName==this.rows[o-1].elements[n].uniqueName){this.rows[o].elements[n].visible=false}else{this.rows[o].elements[n].visible=true}}}}}}},page:function(){return this.metadata._page?this.metadata._page.current:1},pages:function(){if(this.metadata._page&&this.rows.length>0){if(this.metadata._page.size==0){return 1}else{var l=parseInt(this.rows.length/this.metadata._page.size);return(this.rows.length%this.metadata._page.size>0)?l+1:l}}return 1},isPageSize:function(l){if(this.metadata._page){return this.metadata._page.size==l?true:false}return false},setPageSize:function(l){if(this.metadata._page){this.metadata._page.size=parseInt(l);this.pageUpdate()}},pageReset:function(){if(this.metadata._page){if(this.metadata._page.size&&this.metadata._page.size>0){for(var l=0;l<this._rows.length;l++){this._rows[l].inPage=true}}}},pageUpdate:function(){if(this.metadata._page&&this.metadata._page.size&&this.metadata._page.size>0){var p=this.metadata._page.current*this.metadata._page.size;var n=p-this.metadata._page.size;var l=false;for(var o=0;o<this.rows.length;o++){this.rows[o].inPage=false;if(o>=n&&o<p){this.rows[o].inPage=true;if(!l){l=true;this.metadata._page.firstRowIndex=o}}}}},pageFirst:function(){if(this.metadata._page){this.metadata._page.current=1;this.pageUpdate()}},pageNext:function(){if(this.metadata._page){if((this.metadata._page.current+1)<=this.pages()){this.metadata._page.current++;this.pageUpdate()}}},pagePrevious:function(){if(this.metadata._page){this.metadata._page.current--;if(this.metadata._page.current*this.metadata._page.size<=0){this.metadata._page.current=1}this.pageUpdate()}},pageLast:function(){if(this.metadata._page){this.metadata._page.current=this.pages();this.pageUpdate()}},pageGoto:function(l){if(this.metadata._page){var n=this.metadata._page.current;this.metadata._page.current=parseInt(l);if(this.metadata._page.current<=0){k.error("Target Page No is not allowed ["+l+"]")}else{if((this.metadata._page.current*this.metadata._page.size)>this.rows.length){if((this.rows.length%this.metadata._page.size)!=0&&(((this.metadata._page.current-1)*this.metadata._page.size)<this.rows.length)){}else{k.error("Target Page No is not allowed ["+l+"]")}}}if(isFinite(this.metadata._page.current)){this.pageUpdate()}else{this.metadata._page.current=n}}},sortValues:function(o){this.metadata.sort=this.metadata.sort==undefined?{}:this.metadata.sort;var n=o.split(" ").join("").toLowerCase();if(this.metadata.sort[n]==undefined){this.metadata.sort[n]={ascending:false}}this.metadata.sort[n].ascending=!this.metadata.sort[n].ascending;if(this.metadata.sort[n].ascending){this.rows=_.sortBy(this.rows,[function(q){return q[n].value}])}else{this.rows=_.reverse(this.rows)}for(var p=0;p<this.rows[0].elements.length;p++){for(var l=0;l<this.rows.length;l++){this.rows[l].elements[p].visible=true;this.rows[l].elements[p].rowspan=1;this.rows[l].index=l+1}}},filterDimension:function(p,n){if(!_.isEmpty(n)){var o=_.filter(this.rows,function(s){return(s[p].key.toLowerCase().indexOf(n.trim().toLowerCase())!=-1)||(s[p].alias.toLowerCase().indexOf(n.trim().toLowerCase())!=-1)});this.rows.length=0;this.rows=o;for(var q=0;q<this.rows[0].elements.length;q++){for(var l=0;l<this.rows.length;l++){this.rows[l].elements[q].visible=true;this.rows[l].elements[q].rowspan=1;this.rows[l].index=l+1}}}},getAttribute:function(p,n,l){if(_.isEmpty(l)){return n}else{var s=this.metadata[p];if(s){for(var o in s){if(!s.hasOwnProperty(o)){continue}if(_.eq(s[o].name,n)){var q=s[o].attributes[l];if(!_.isEmpty(q)){return q}}}}return n}}};if(ah){angular.extend(ai,ah)}if(Q==null){return V}V.metadata.updateDimensionOrder=function(l){if(!(V.dimensions.order&&V.dimensions.order.length>0)){V.dimensions.order=l}};j.dimensions(m,U).then(function(l){V.dimensions.order=l});function aa(o,n){if(angular.isUndefined(n)){throw"Member is a required information."}if(angular.isUndefined(n.UniqueName)){throw"Member.UniqueName is a required information."}var p=V.metadata[o][n.UniqueName];if(p){return p}p={key:n.Name,name:n.Name,uniqueName:n.UniqueName,alias:n.Name,attributes:n.Attributes};if(n.Element){p.level=n.Element.Level;if(n.Element.Type){p.type=n.Element.Type.substring(0,1)}}if(n.Parent){if(angular.isUndefined(n.Parent.UniqueName)){throw"Member.Parent.UniqueName is a required information."}p.parent=n.Parent.Name;p.parentUniqueName=n.Parent.UniqueName}if(ai.alias&&ai.alias[o]){var l=p.attributes[ai.alias[o]];if(!_.isEmpty(l)){p.alias=l}}V.metadata[o][p.uniqueName]=p;return p}var ab=Q.Axes[0].Tuples.length;var X=Q.Axes[1].Tuples.length;for(var x=0;x<Q.Axes[0].Hierarchies.length;x++){V.dimensions.columns.push(Q.Axes[0].Hierarchies[x].Name);V.dimensions.hierarchies.columns.push({dimension:Q.Axes[0].Hierarchies[x].Dimension.Name,hierarchy:Q.Axes[0].Hierarchies[x].Name})}for(var x=0;x<Q.Axes[1].Hierarchies.length;x++){V.dimensions.rows.push(Q.Axes[1].Hierarchies[x].Name);V.dimensions.hierarchies.rows.push({dimension:Q.Axes[1].Hierarchies[x].Dimension.Name,hierarchy:Q.Axes[1].Hierarchies[x].Name})}if(Q.Axes.length>2){for(var x=0;x<Q.Axes[2].Hierarchies.length;x++){V.dimensions.titles.push(Q.Axes[2].Hierarchies[x].Name);V.dimensions.hierarchies.titles.push({dimension:Q.Axes[2].Hierarchies[x].Dimension.Name,hierarchy:Q.Axes[2].Hierarchies[x].Name})}for(var x=0;x<Q.Axes[2].Tuples.length;x++){for(var W=0;W<Q.Axes[2].Tuples[x].Members.length;W++){var f=Q.Axes[2].Hierarchies[W].Dimension.Name;var al=Q.Axes[2].Tuples[x].Members[W];if(V.metadata[f]==null){V.metadata[f]={}}var ak={dataset:V,dimension:f,hierarchy:Q.Axes[2].Hierarchies[W].Name,element:aa(f,al)};ak.name=ak.element.name;V.elements.push(ak)}}}for(var ad=0;ad<Q.Axes[0].Hierarchies.length;ad++){var af={rows:[],columns:[]};V.headers.push(af);for(var d=0;d<Q.Axes[1].Hierarchies.length;d++){if(ad==0){af.rows.push({dimension:Q.Axes[1].Hierarchies[d].Name,colspan:1,rowspan:Q.Axes[0].Hierarchies.length,visible:true})}else{af.rows.push({dimension:Q.Axes[1].Hierarchies[d].Name,colspan:0,rowspan:0,visible:false})}}}for(var x=0;x<Q.Axes[0].Hierarchies.length;x++){var af=V.headers[x];for(var ae=0;ae<Q.Axes[0].Tuples.length;ae++){var f=Q.Axes[0].Hierarchies[x].Dimension.Name;var al=Q.Axes[0].Tuples[ae].Members[x];if(V.metadata[f]==null){V.metadata[f]={}}var ak={dataset:V,dimension:Q.Axes[0].Hierarchies[x].Dimension.Name,hierarchy:Q.Axes[0].Hierarchies[x].Name,element:aa(f,al),colspan:1,rowspan:1,visible:true,index:x};ak.key=ak.element.key;ak.name=ak.element.name;ak.uniqueName=ak.element.uniqueName;ak.alias=ak.element.alias;af.columns.push(ak)}}for(var ad=0;ad<V.headers.length;ad++){var af=V.headers[ad];var Y=null;for(var d=0;d<af.columns.length;d++){if(d>0&&af.columns[d-1].element===af.columns[d].element){if(Y==null){Y=af.columns[d-1]}Y.colspan++;af.columns[d].colspan=0;af.columns[d].rowspan=0;af.columns[d].visible=false}else{Y=null}}}for(var ad=0;ad<Q.Axes[1].Tuples.length;ad++){var T=Q.Axes[1].Tuples[ad];var af={index:ad+1,elements:[],cells:[],isHidden:function(){for(var l=0;l<this.elements.length;l++){if(this.elements[l].element.hidden){return true}}return false},getCell:function(l){return this[l.split(" ").join("").toLowerCase()]},inPage:true};V.rows.push(af);for(var W=0;W<T.Members.length;W++){var f=Q.Axes[1].Hierarchies[W].Dimension.Name;if(V.metadata[f]==null){V.metadata[f]={}}var al=T.Members[W];var ak={dataset:V,dimension:Q.Axes[1].Hierarchies[W].Dimension.Name,hierarchy:Q.Axes[1].Hierarchies[W].Name,element:aa(f,al),colspan:1,rowspan:1,visible:true,index:W};ak.key=ak.element.key;ak.name=ak.element.name;ak.uniqueName=ak.element.uniqueName;ak.alias=ak.element.alias;af.elements.push(ak);af[ak.dimension]=ak;if(!ak.element.rows){ak.element.rows=[];ak.element.toggle=function(n){if((this.collapsed&&n==undefined)||(n!=undefined&&!n)){if(this.children){for(var l=0;l<this.children.length;l++){this.children[l].hidden=false;this.children[l].toggle(true)}}}else{if(this.children){for(var l=0;l<this.children.length;l++){this.children[l].hidden=true;this.children[l].toggle(true)}}}if(n==undefined){this.collapsed=!this.collapsed}else{this.collapsed=n}V.filter()}}ak.element.rows.push(af);if(ad>0&&V.rows[ad-1].elements[W].element.uniqueName==af.elements[W].element.uniqueName){for(var Z=1;ad-Z>=0;Z++){var R=V.rows[ad-Z].elements[W];if(R.element.uniqueName===af.elements[W].element.uniqueName){R.rowspan=Z+1}else{break}}ak.visible=false}}for(var d=0;d<ab;d++){var t=Q.Axes[0].Tuples[d];var r=[];var c="";for(var x=0;x<t.Members.length;x++){var ak={dimension:Q.Axes[0].Hierarchies[x].Name,name:t.Members[x].Name};r.push(ak);if(x>0){c+=","}c+=ak.name.split(" ").join("").toLowerCase()}var ag=ad*ab+d;var am={dataset:V,row:af,elements:r,key:c,isConsolidated:Q.Cells[ag].Consolidated,isRuleDerived:Q.Cells[ag].RuleDerived,isAnnotated:Q.Cells[ag].Annotated,isReadOnly:false,isNumeric:angular.isNumber(Q.Cells[ag].Value),isRuleTraceAvailable:ai.ruleTracingAllowed,isBaseValueDifferentInSandbox:Q.Cells[ag].Updateable==274?true:false,HasPicklist:Q.Cells[ag].HasPicklist,HasDrillthrough:Q.Cells[ag].HasDrillthrough,value:Q.Cells[ag].Value,lastValue:Q.Cells[ag].Value,reference:function(){var n=[];for(var q=0;q<this.dataset.dimensions.order.length;q++){var l=this.dataset.dimensions.order[q].toLowerCase();var o=false;for(var p=0;p<this.dataset.elements.length;p++){if(this.dataset.elements[p].dimension.toLowerCase()===l){n.push(this.dataset.elements[p].name);o=true;break}}if(!o){for(var p=0;p<this.row.elements.length;p++){if(this.row.elements[p].dimension.toLowerCase()===l){n.push(this.row.elements[p].name);o=true;break}}}if(!o){for(var p=0;p<this.elements.length;p++){if(this.elements[p].dimension.toLowerCase()===l){n.push(this.elements[p].name);o=true;break}}}}return n},update:function(s,q){if(this.lastValue==this.value){return}var o=this.reference();if(this.dataset.dimensions.order.length==o.length){var p=this.value;if(!this.isConsolidated){p=this.isNumeric?accounting.unformat(this.value):this.value}o.unshift(p,this.dataset.instance,this.dataset.cube);this.message=null;var n=false;if(!_.isNil(ai)&&!_.isNil(ai.sandbox)&&!_.isEmpty(ai.sandbox)){o.push({sandbox:ai.sandbox});n=true}var l=this;h.cellPut.apply(this,o).then(function(u){if(u.success){l.lastValue=l.value;if(n){l.isBaseValueDifferentInSandbox=true}if(s){if(q){s.apply(this,q)}else{s()}}}else{l.value=l.lastValue;if(u.message.error){if(u.message.error.message){l.message=u.message.error.message}else{l.message=u.message.error}}else{l.message=u.message}}})}}};if(am.isConsolidated||am.isRuleDerived||Q.Cells[ag].Updateable==268435713){am.isReadOnly=true}if(am.value==null){am.value=0;am.isNumeric=true}af.cells.push(am);af[c]=am}}function ac(n){for(var w=0;w<n.length;w++){var u=n[w];var v=V.metadata[u.Name];if(v){for(var p in v){if(!v.hasOwnProperty(p)){continue}var l=v[p];if(l&&(l.parentUniqueName==undefined||v[l.parentUniqueName]==undefined)){delete l.parent;delete l.parentUniqueName;l.topLevel=0}}var o=false;for(var s=0;s<100&&!o;s++){o=true;for(var p in v){var l=v[p];if(l.topLevel!=undefined){continue}var q=v[l.parentUniqueName];if(q.topLevel==undefined){o=false}else{l.topLevel=q.topLevel+1;l.indent=[];for(var s=1;s<=l.topLevel;s++){l.indent.push(s)}l.parent=q;if(q.children==undefined){q.children=[]}q.children.push(l)}}}}}}ac(Q.Axes[1].Hierarchies);ac(Q.Axes[0].Hierarchies);V._rows=V.rows.slice();if(ai.collapseAll){V.collapseAll()}if(ai.expand&&ai.expand.length){V.collapseAll();V.expand(ai.expand)}if(ai.collapse&&ai.collapse.length){V.collapse(ai.collapse)}var e=[];if(ai.suppressZeroRows||ai.suppressZeroColumns){var aj=[];_.each(V.rows,function(o,n){var l=false;_.each(o.cells,function(p,q){if(p.isNumeric){if(Math.abs(p.value)>0){l=true;e[q]=true;if(!ai.suppressZeroColumns){return false}}}else{if(!_.isEmpty(p.value)){l=true;e[q]=true;if(!ai.suppressZeroColumns){return false}}}});if(l&&ai.suppressZeroRows){o.index=aj.length;aj.push(o);if(aj.length==1){_.each(o.elements,function(p){p.visible=true})}else{_.each(o.elements,function(s,p){var u=0;for(var w=aj.length-1;w>=0;w--){u++;var q=aj[w].elements[p];if(q.alias==s.alias){q.rowspan=u}else{var v=aj[w+1].elements[p];v.visible=true;break}}})}if(ai.maxRows>-1&&aj.length>=ai.maxRows){return false}}});if(ai.suppressZeroRows){V.rows=aj}}else{if(ai.maxRows>-1&&V.rows.length>=ai.maxRows){V.rows=V.rows.slice(0,ai.maxRows-1)}}if(ai.suppressZeroColumns){var S=[];_.each(e,function(n,l){if(!n){S.push(l)}});if(S.length){S.reverse();_.each(V.headers,function(l){_.each(S,function(n){l.columns.splice(n,1)})});_.each(V.headers,function(l){if(l.columns.length){l.columns[0].visible=true;_.each(l.columns,function(p,u){var q=0;for(var n=u;n>=0;n--){q++;var o=l.columns[n];if(o.alias==p.alias){o.colspan=q;if(n>0){o.visible=false}}else{var s=l.columns[n+1];s.visible=true;break}}})}});_.each(V.rows,function(l){_.each(S,function(n){l.cells.splice(n,1)})})}}return V}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiProcess",["$rootScope","$http","$q","$tm1UiHelper","tm1UiSettings","$tm1UiCore",function(o,j,m,n,a,l){var k=this;k.process=function(e,f){var c=j.get("api/processes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f));var d=d||m.defer();c.then(function(g){d.resolve(g.data)},function(g){d.reject(g)});return d.promise};k.processExecuteWithObject=function(d){var c=c||m.defer();l.getToken().then(function(e){var f={method:"POST",url:"api/processes",data:d};f.headers={};f.headers[a.t]=e;j(f).then(function(g){if(!_.isEmpty(g.data)&&angular.isObject(g.data)&&g.data.failed){c.resolve({success:false,message:g.data})}else{c.resolve({success:n.isSuccessful(g),message:g.data})}},function(g){c.reject(g)})});return c.promise};k.processExecute=function(e,f,d){var g=g||m.defer();var c=j.get("api/processes/"+encodeURIComponent(e)+"/"+encodeURIComponent(f));c.then(function(h){var x=false;var v={Parameters:[]};if(h.data&&h.data.Parameters&&h.data.Parameters.length>0){x=true;v.Parameters=h.data.Parameters}var y={};try{var A=undefined;if(d.length==3){A=d[2];if(angular.isDefined(A)){_.forEach(A,function(p){y[p.Name]={Value:p.Value}})}}else{if(d.length>3){for(var z=2;z<d.length;z=z+2){y[d[z]]={Value:d[z+1]}}}}}catch(w){throw'parameters passed on must be an ARRAY of OBJECTS with "Name" and "Value" properties!'}if(v.Parameters.length>0){_.forEach(v.Parameters,function(p){_.forEach(y,function(q,r){if(r.toLowerCase()==p.Name.toLowerCase()){p.Value=q.Value}});p.Prompt=undefined})}k.processExecuteWithObject({instance:e,processName:f,processExecuteBody:v}).then(function(p){g.resolve({success:p.success,message:p.message})},function(p){g.reject(p)})},function(h){g.reject(h)});return g.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1Ui",["$tm1UiSetting","$tm1UiCube","$tm1UiApp","$tm1UiHelper","$tm1UiInstance","$tm1UiTable","$tm1UiDimension","$tm1UiCore","$tm1UiProcess","$tm1UiOdataHelper","$tm1UiOdataResultHelper","$tm1UiJob","$tm1UiChore","$tm1UiTask",function(t,D,A,w,s,x,y,z,a,u,B,E,r,C){var v=this;v.setDebug=function(c){A.debug=c};v.cellAnnotationGet=function(d,e,c){return z.annotations(d,e,c)};v.cellAnnotationPut=function(c,e,f,d){return z.saveAnnotation(c,e,f,d)};v.cellGet=function(e,f,c,d){return z.dbr(e,f,arguments)};v.cellGetBatch=function(c,d){return z.dbrBatched(c,d,arguments)};v.cellsetGet=function(c){return z.multipleDbr(c)};v.cellSetGet=function(c){return z.multipleDbr(c)};v.cellGets=function(c){return z.multipleDbr(c)};v.cellGetPicklistValues=function(d,e,c){return z.dbrPicklistValues(d,e,arguments)};v.cellPut=function(c,f,g,d,e){return z.dbs(c,f,g,arguments)};v.cellsetPut=function(c){return z.multipleDbs(c)};v.cellSetPut=function(c){return z.multipleDbs(c)};v.cellPuts=function(c){return z.multipleDbs(c)};v.attributeGet=function(f,c,e,d){return z.dbra(f,c,e,d)};v.attributePut=function(d,g,c,f,e){return z.dbsa(d,g,c,f,e)};v.cellGetDrillNames=function(d,e,c){return z.drillNames(d,e,c)};v.cellGetDrillNameTransactions=function(e,f,c,d){return z.drillTransactions(e,f,c,d)};v.cellTraceCalculations=function(e,f,c,d){return z.traceCalculations(e,f,arguments)};v.cellTraceFeeders=function(e,f,c,d){return z.traceFeeders(e,f,arguments)};v.cellCheckFeeders=function(e,f,c,d){return z.checkFeeders(e,f,arguments)};v.dataRefresh=function(c){z.refresh(c)};v.getToken=function(){return z.getToken()};v.emailSend=function(c){return z.email(c)};v.sandboxes=function(c){return z.sandboxes(c)};v.sandbox=function(d,c){return z.sandbox(d,c)};v.sandboxCreate=function(d,c){return z.sandboxCreate(d,c)};v.sandboxPublishChanges=function(d,c){return z.sandboxPublishChanges(d,c)};v.sandboxDelete=function(d,c){return z.sandboxDelete(d,c)};v.sandboxDiscardChanges=function(d,c){return z.sandboxDiscardChanges(d,c)};v.helperIsStatusSuccessful=function(c){return w.isStatusSuccessful(c)};v.helperIsSuccessful=function(c){return w.isSuccessful(c)};v.helperDoesPageExists=function(c){return w.doesPageExists(c)};v.helperGenerateUUID=function(){return w.generateUUID()};v.helperConvertElementsToArray=function(c,d){return w.convertElementsToArray(c,d)};v.helperBase64Encode=function(c){return w.encode(c)};v.helperEscapeText=function(c){return w.escapeText(c)};v.log=function(d,f,e,c){w.log(d,f,e,c)};v.cubeDimensions=function(c,d){return D.dimensions(c,d)};v.cubeExecuteMdx=function(e,c,d){return D.executeMdx(e,c,d)};v.cubeExecuteNamedMdx=function(e,c,d){return D.executeNamedMdx(e,c,d)};v.cubeExecuteView=function(e,f,d,c){return D.executeView(e,f,d,c)};v.cubes=function(c){return D.cubes(c)};v.cubeViews=function(d,e,c){return D.views(d,e,c)};v.cubeView=function(e,f,d,c){return D.view(e,f,d,c)};v.cubeCanvasView=function(e,f,d,c){return D.canvasView(e,f,d,c)};v.cubeCanvasViewVerify=function(d,e,c){return D.canvasViewVerify(d,e,c)};v.cubeCanvasViewMDX=function(d,e,c){return D.canvasViewMDX(d,e,c)};v.cubeDimensionsAndHierarchies=function(c,d){return D.dimensionsAndHierarchies(c,d)};v.cubeAdhocView=function(d,e,c){return D.viewAdhoc(d,e,c)};v.cubeViewSave=function(e,f,d,c){return D.viewSave(e,f,d,c)};v.cubeViewConvert=function(e,f,g,c,d){return D.viewConvert(e,f,g,c,d)};v.dimensions=function(d,c){return y.dimensions(d,c)};v.dimensionElements=function(e,k,d,l,h,c,j,g,m,f){return y.elements(e,k,d,l,h,c,j,g,m,f)};v.dimensionElement=function(f,c,d,e){return y.element(f,c,d,e)};v.dimensionAttributes=function(d,c){return y.attributes(d,c)};v.dimensionHierarchies=function(d,c){return y.hierarchies(d,c)};v.dimensionHierarchy=function(e,c,d){return y.hierarchy(e,c,d)};v.dimensionSubsetAlias=function(e,c,d){return y.subsetAlias(e,c,d)};v.dimensionSubsets=function(e,c,d){return y.subsets(e,c,d)};v.dimensionSubsetCreateOrUpdate=function(f,c,d,e){return y.subsetCreateOrUpdate(f,c,d,e)};v.dimensionSubsetDelete=function(f,c,d,e){return y.subsetDelete(f,c,d,e)};v.dimensionApplyDrillAction=function(e,c,d){return y.applyDrillAction(e,c,d)};v.applicationLogin=function(f,c,e,d){return A.login(f,c,e,{cam:d})};v.applicationSilentLogin=function(f,c,e,d){return A.login(f,c,e,{cam:d,silentlyFail:true})};v.applicationGetCAMPassport=function(c,d){return A.getCamPassport(c,d)};v.applicationLoginWithCAMPassport=function(d,e,c){return A.loginWithCAMPassport(d,e,c)};v.applicationLoginWithWindowsAuthentication=function(c){return A.loginWithWindowsAuthentication(c)};v.applicationLoginWithOIDCAndAuthorization=function(d,c){return A.loginWithOIDC_AuthorizationFlow(d,c)};v.applicationGetOIDCConfiguration=function(c){return A.getOIDCConfiguration(c)};v.applicationExtractOIDCInfoFromUrl=function(c,d){return A.extractOIDCInfoFromUrl(c,d)};v.applicationGetCAMUri=function(c,d){return A.getCamUri(c,d)};v.applicationExtractCamPassportFromUrl=function(c){return A.extractCamPassportFromUrl(c)};v.applicationExtractPropertyValueFromUrl=function(c,d){return A.extractPropertyValueFromUrl(c,d)};v.applicationSaveSessionLoginInstance=function(c){return A.saveSessionLoginInstance(c)};v.applicationLoginCamPassportWithSavedSessionLoginInstance=function(c){return A.loginCamPassportWithSavedSessionLoginInstance(c)};v.applicationGetSessionLoginInstance=function(){return A.getSessionLoginInstance()};v.applicationResetSessionLoginInstance=function(){return A.resetSessionLoginInstance()};v.applicationTryCamPassportLoginWithInstance=function(c){return A.tryCamPassportLoginWithInstance(c)};v.applicationLogout=function(c){return A.logout(c)};v.applicationUser=function(c){return A.user(c)};v.applicationUsers=function(){return A.users()};v.applicationInfo=function(){return A.info()};v.applicationMenus=function(){return A.menus()};v.applicationUserMenus=function(){return A.userMenus()};v.applicationSaveUserMenus=function(c){return A.saveUserMenus(c)};v.applicationStates=function(){return A.states()};v.applicationUserStates=function(){return A.userStates()};v.applicationSaveUserStates=function(c){return A.saveUserStates(c)};v.applicationDeleteFile=function(d,c){return A.fileDelete(d,c)};v.applicationGetTextFile=function(d,c){return A.fileGetText(d,c)};v.applicationSessions=function(){return A.sessions()};v.applicationSession=function(c){return A.session(c)};v.applicationInstances=function(){return s.instances()};v.applicationInstance=function(c){return s.configuration(c)};v.applicationInstanceCapabilities=function(c){return s.capabilities(c)};v.applicationInstanceSettings=function(c){return s.getInstanceSettings(c)};v.applicationInstanceAuthentications=function(c){return s.authentications(c)};v.applicationName=function(){return t.applicationName()};v.applicationAdminLogout=function(){return t.logout()};v.applicationAdminLogin=function(c,d){return t.login(c,d)};v.applicationSettings=function(){return t.get()};v.applicationSettingsSave=function(c){return t.save(c)};v.process=function(d,c){return a.process(d,c)};v.processExecute=function(d,c){return a.processExecute(d,c,arguments)};v.processExecuteWithObject=function(c){return a.processExecuteWithObject(c)};v.chore=function(d,c){return r.chore(d,c)};v.chores=function(c){return r.chores(c)};v.choreExecute=function(d,c){return r.execute(d,c)};v.choreUpdateTasks=function(e,d,c){return r.updateTasks(e,d,c)};v.tableCreate=function(d,c,e){return x.create(d,c,e)};v.addTableData=function(d,c){return u.addTableData(d,c)};v.resultsetTransform=function(d,e,f,c){return B.resultsetTransform(d,e,f,c)};v.formatNumber=function(c,d){return w.formatNumber(c,d)};v.formatPercentage=function(c,d){return w.formatPercentage(c,d)};v.helperGetWatchers=function(d,c){return w.getWatchers(d,c)};v.helperGetWatchersCount=function(c){return w.getWatchersCount(c)};v.scheduledJobs=function(){return E.jobs()};v.scheduledJob=function(c){return E.job(c)};v.saveOrUpdateScheduledJob=function(c){return E.saveOrUpdateJob(c)};v.deleteScheduledJob=function(c){return E.deleteJob(c)};v.tasks=function(){return C.tasks()};v.task=function(c){return C.task(c)};v.saveOrUpdateTask=function(c){return C.saveOrUpdateTask(c)};v.deleteTask=function(c){return C.deleteTask(c)};v.taskRun=function(c){return C.taskRun(c)};v.taskRunStatus=function(c){return C.taskRunStatus(c)}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiSetting",["$rootScope","$http","$q","$tm1UiHelper","$base64",function(a,h,l,m,k){var j=this;j.applicationName=function(){var c=h.get("api/app/name");var d=d||l.defer();c.then(function(e){d.resolve(e.data)},function(e){d.reject(e)});return d.promise};j.logout=function(){var c=h.get("api/admin/sessions/logout");var d=d||l.defer();c.then(function(e){d.resolve({success:m.isSuccessful(e),message:e.data})},function(e){d.reject(e)});return d.promise};j.login=function(c,f){if(angular.isUndefined(c)){throw"username is a required field"}if(angular.isUndefined(f)){f=""}var g={};g.username=c;g.encryptedPassword=k.encode(f);var d=h.post("api/admin/sessions/login",g);var e=e||l.defer();d.then(function(o){e.resolve({success:m.isSuccessful(o),message:o.data})},function(o){e.reject(o)});return e.promise};j.get=function(){var c=h.get("api/admin/settings");var d=d||l.defer();c.then(function(e){d.resolve(e.data)},function(e){d.reject(e)});return d.promise};j.save=function(e){var c=h.post("api/admin/settings/save",e);var d=d||l.defer();c.then(function(f){d.resolve({success:m.isSuccessful(f),message:f.data})},function(f){d.reject(f)});return d.promise}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiTable",["uuid2","$filter",function(a,d){this.create=function(k,c,j){if(!(k&&k.$evalAsync&&k.$watch)){throw"The page's Angular Scope (i.e. $scope) must be the FIRST PARAMETER passed to this TABLE CREATE function. "}if(!c){c=[]}var h=a.newguid();if(k.tm1Table==undefined){k.tm1Table={}}k.tm1Table[h]={dataSource:c,options:{index:0,pageSize:10,sortType:null,sortReverse:false,filter:null,preload:true,watch:true},_data:null,_sortType:null,_sortReverse:false,_filter:null,_index:0,_pageSize:0};if(j){angular.extend(k.tm1Table[h].options,j)}if(k.tm1Table[h].options.watch){k.$watch(function(){return k.tm1Table[h].dataSource},function(e){k.tm1Table[h]._data=null},true)}k.tm1Table[h].data=function(){if(this._data&&(!angular.equals(this._sortType,this.options.sortType)||!angular.equals(this._sortReverse,this.options.sortReverse))){this._data=null}if(this._data&&!this.options.preload&&(!angular.equals(this._filter,this.options.filter)||!angular.equals(this._index,this.options.index)||!angular.equals(this._pageSize,this.options.pageSize))){this._data=null}if(this._data){return this._data}var e=d("orderBy")(this.dataSource.slice(0),this.options.sortType,this.options.sortReverse);var g=false;if(!_.isEmpty(this.options.filter)){_.forEach(this.options.filter,function(n,o){if(!g&&!_.isEmpty(n)){g=true}})}if(!this.options.preload||g){if(this.options.filter){e=d("filter")(e,this.options.filter)}this._data=[];this._pages=e.length;for(var f=0;f<e.length;f++){if(f<this.options.index){continue}if(f>=(this.options.index+this.options.pageSize)){break}this._data.push(e[f])}}else{this._data=e}e=undefined;this._sortType=this.options.sortType;this._sortReverse=this.options.sortReverse;this._filter=this.options.filter;this._index=this.options.index;this._pageSize=this.options.pageSize;return this._data};k.tm1Table[h].size=function(){return this.dataSource.length};k.tm1Table[h].next=function(){if(!((this.options.index+this.options.pageSize)>=this.dataSource.length)){this.options.index=this.options.index+this.options.pageSize}};k.tm1Table[h].previous=function(){this.options.index=Math.max(0,this.options.index-this.options.pageSize)};k.tm1Table[h].pageSize=function(e){this.options.index=0;this.options.pageSize=e};k.tm1Table[h].isPageSize=function(e){return this.options.pageSize==e};k.tm1Table[h].page=function(){return Math.min(this.pages(),Math.ceil((this.options.index/this.options.pageSize)+1))};k.tm1Table[h].pages=function(){if(this.options.preload){return Math.ceil(this.dataSource.length/this.options.pageSize)}else{if(this._pages){return Math.ceil(this._pages/this.options.pageSize)}else{return 1}}};k.tm1Table[h].show=function(e,g){if(g<this.options.index||g>=this.options.index+this.options.pageSize){return false}if(!this.options.filter){return true}var f=[e];var m=d("filter")(f,this.options.filter);f=undefined;if(m.length==1){return true}else{return false}};k.tm1Table[h].sort=function(e){this.options.sortType=e;this.options.sortReverse=!this.options.sortReverse};k.tm1Table[h].sortClear=function(){this.options.sortType=null};k.tm1Table[h].isSorted=function(){return this.options.sortType};k.tm1Table[h].sortClass=function(e){if(this.options.sortType==e){if(this.options.sortReverse){return"tm1-ui-desc"}else{return"tm1-ui-asc"}}};k.tm1Table[h].refresh=function(){this.options.index=0;this._data=null};k.tm1Table[h].filter=function(e,f){this._data=null;if(e){if(f&&f.length==0){k.tm1Table[h].options.filter=null}else{k.tm1Table[h].options.filter={};k.tm1Table[h].options.filter[e]=f}}};return k.tm1Table[h]}}])})();(function(){var b=angular.module("tm1Ui");b.service("$tm1UiTask",["$rootScope","$http","$q","tm1UiSettings","$tm1UiHelper","$log",function(o,j,m,a,n,l){var k=this;k.debug=false;k.serviceID=n.generateUUID();k.log=function(c,d){if(k.debug){l.debug("$tm1Ui - "+c);l.debug(d);o.$broadcast(a.frameworkLogID,{id:k.serviceID,name:"$tm1UiTask",message:c,object:d})}};k.tasks=function(){var c=j.get("api/admin/tasks");var d=d||m.defer();c.then(function(e){d.resolve(e.data)},function(e){d.reject(e)});return d.promise};k.taskRunStatus=function(e){if(_.isEmpty(e)){throw"$tm1UiTask: ID is EMPTY"}var c=j.get("api/admin/tasks/"+encodeURIComponent(e.trim())+"/status");var d=d||m.defer();c.then(function(f){d.resolve(f.data)},function(f){d.reject(f)});return d.promise};k.taskRun=function(e){if(_.isEmpty(e)){throw"$tm1UiTask: ID is EMPTY"}var c=j.post("api/admin/tasks/"+encodeURIComponent(e.trim())+"/run");var d=d||m.defer();c.then(function(f){d.resolve(f.data)},function(f){d.reject(f)});return d.promise};k.task=function(e){if(_.isEmpty(e)){throw"$tm1UiTask: ID is EMPTY"}var c=j.get("api/admin/tasks/"+encodeURIComponent(e.trim()));var d=d||m.defer();c.then(function(f){d.resolve(f.data)},function(f){d.reject(f)});return d.promise};k.saveOrUpdateTask=function(e){if(_.isEmpty(e)){throw"$tm1UiTask: Nothing to save"}var c=j.post("api/admin/tasks",e);var d=d||m.defer();c.then(function(f){d.resolve({success:n.isSuccessful(f),message:f.data})},function(f){d.reject(f)});return d.promise};k.deleteTask=function(e){if(_.isEmpty(e)){throw"$tm1UiTask: ID is EMPTY"}var c=j({method:"POST",url:"api/admin/tasks/"+encodeURIComponent(e.trim())+"/delete"});var d=d||m.defer();c.then(function(f){d.resolve({success:n.isSuccessful(f),message:f.data})},function(f){d.reject(f)});return d.promise}}])})();angular.module("tm1Ui").run(["$templateCache",function(b){b.put("assets/html/tm1-ui-about.html",'<div class="tm1-ui-base {{directiveClasses}}"><table class="table table-hover"><thead><tr><th translate="LIBRARY"></th><th translate="VERSION"></th><th translate="LICENSE"></th></tr></thead><tbody><tr ng-repeat="lib in libraries"><td><a href="{{lib.url}}" target="_blank">{{lib.name}}</a></td><td>{{lib.version}}</td><td><a href="{{lib.licenseUrl}}" target="_blank">{{lib.license}}</a></td></tr></tbody></table></div>');b.put("assets/html/tm1-ui-active-form.html",'<div class="tm1-ui-rpt-view {{directiveClasses}}"><div ng-transclude="tm1UiRptConfig" ng-if="cubeIsReady"></div><div ng-transclude="tm1UiRptTemplate" ng-if="cubeIsReady"></div><div ng-if="message.length > 0" class="alert alert-warning text-center" role="alert">{{message}}</div></div>');b.put("assets/html/tm1-ui-base.html",'<span class="tm1-ui-base {{directiveClasses}}">{{message}}</span>');b.put("assets/html/tm1-ui-chart-dbr.html","<span>{{message}}</span>");b.put("assets/html/tm1-ui-chart-template.html",'<div ng-attr-id="{{directiveID}}" class="tm1-ui-chart {{directiveClasses}}" class="tm1-ui-chart"><nvd3 options="options" data="data" api="api" config="config"></nvd3><div ng-hide="true"><ng-transclude></ng-transclude></div><div class="row" ng-if="tm1ShowData"><div class="panel panel-info" ng-if="!(tm1ChartType == \'pie\' || tm1ChartType == \'donut\')" ng-repeat="seriesData in data track by $index"><div class="panel-heading">Series: {{seriesData.key}}</div><div class="panel-body"><div class="table-responsive"><table class="table table-condensed"><thead><tr ng-repeat="chartValue in seriesData.values | limitTo:1"><th ng-repeat="(key, value) in chartValue">{{key}}</th></tr></thead><tbody><tr ng-repeat="chartValue in seriesData.values track by $index"><td ng-repeat="(key, value) in chartValue">{{value}}</td></tr></tbody></table></div></div></div><div class="panel panel-info" ng-if="tm1ChartType == \'pie\' || tm1ChartType == \'donut\'"><div class="panel-heading">Data</div><div class="panel-body"><div class="table-responsive"><table class="table table-condensed"><thead><tr ng-repeat="chartValue in data | limitTo:1"><th ng-repeat="(key, value) in chartValue">{{key}}</th></tr></thead><tbody><tr ng-repeat="chartValue in data track by $index"><td ng-repeat="(key, value) in chartValue">{{value}}</td></tr></tbody></table></div></div></div></div></div>');b.put("assets/html/tm1-ui-chart-value.html","<span>{{message}}</span>");b.put("assets/html/tm1-ui-configurator-chore.html",'<div class="tm1-ui-configurator-chore {{directiveClasses}}"><style>div.row{\r\n      margin-top: 0px;\r\n    }</style><div class="row"><div class="col-md-6"><div class="form-group"><label class="control-label">{{\'INSTANCE\' | translate}}</label><select class="form-control" ng-model="tm1Instance" ng-change="updateChoreList(tm1Instance)"><option ng-repeat="credential in tm1Instances" ng-value="credential.instance">{{credential.instance}}</option></select></div></div><div class="col-md-6"><div class="form-group"><label class="control-label">{{\'CHORE\' | translate}}</label><tm1-ui-select ng-if="showSelect" tm1-config="selectConfig"></tm1-ui-select></div></div></div><div class="row"><div class="col-md-12"><hr></div></div><table class="table table-bordered table-hover table-striped"><thead><tr><th class="text-center" translate="PROCESS"></th><th class="text-center" translate="PARAMETER"></th><th class="text-center" translate="VALUE"></th></tr></thead><tbody ng-repeat="task in chore.chore.Tasks track by $index"><tr ng-if="task.Parameters.length > 0" ng-repeat="parameter in task.Parameters track by $index"><td class="text-center" rowspan="{{task.Parameters.length > 0 ? task.Parameters.length : 1}}" ng-if="$first">{{task.ProcessName}}</td><td class="text-center">{{parameter.Name}}</td><td class="text-center"><input ng-if="tm1EnableUpdate" class="form-control" ng-model="parameter.Value"> <span ng-if="!tm1EnableUpdate">{{parameter.Value}}</span></td></tr><tr ng-if="!(task.Parameters.length > 0)"><td class="text-center">{{task.ProcessName}}</td><td class="text-center" colspan="2" translate="NOPARAMETERS"></td></tr></tbody></table><div class="row"><div class="col-md-12"><hr></div></div><div class="row" ng-if="chore.name.length > 0"><div class="col-md-6"><div ng-if="tm1EnableUpdate && chore.chore.Active" class="panel panel-warning"><div class="panel-heading" translate="CHOREISACTIVEMESSAGE"></div></div></div><div class="col-md-6"><div class="pull-right"><button type="button" class="btn btn-primary" ng-click="onUpdate()" ng-if="tm1EnableUpdate" ng-disabled="chore.chore.Active"><i class="fa fa-save"></i> <span class="tm1-ui-indent" translate="UPDATE"></span></button> <button type="button" class="btn" ng-class="{\'btn-default\':executeStatus == 0, \'btn-danger\':executeStatus == 5, \'btn-success\':executeStatus != 0 && executeStatus != 5}" ng-disabled="executeStatus != 0" ng-click="executeChore()" ng-if="tm1EnableExecute"><i class="fa fa-flash"></i> <span class="tm1-ui-indent">{{executeText}}</span></button> <button type="button" class="btn btn-success" ng-click="onApply()" ng-if="!(tm1UpdateButtonText.length > 0)"><i class="fa fa-link"></i> <span class="tm1-ui-indent" translate="APPLY"></span></button> <button type="button" class="{{tm1UpdateButtonClass}}" ng-click="onApply()" ng-if="tm1UpdateButtonText.length > 0"><i class="fa fa-save"></i> <span class="tm1-ui-indent">{{tm1UpdateButtonText}}</span></button></div></div></div></div>');b.put("assets/html/tm1-ui-cron.html",'<div class="panel panel-default tm1-ui-cron {{directiveClasses}}"><div class="panel-body"><div class="row"><div class="col-md-12"><ul class="nav nav-tabs"><li role="presentation" ng-class="{\'active\':cron.type == CRON_MONTHLY}"><a ng-click="cron.type = CRON_MONTHLY">{{\'EVERYMONTH\' | translate}}</a></li><li role="presentation" ng-class="{\'active\':cron.type == CRON_WEEKLY && !cron.monthlyOptionsUpdated, \'disabled\':cron.monthlyOptionsUpdated}"><a ng-click="cron.type = CRON_WEEKLY">{{\'EVERYWEEK\' | translate}}</a></li><li role="presentation" ng-class="{\'active\':cron.type == CRON_DAILY}"><a ng-click="cron.type = CRON_DAILY">{{\'EVERYDAY\' | translate}}</a></li><li role="presentation" ng-class="{\'active\':cron.type == CRON_CUSTOM}"><a ng-click="cron.type = CRON_CUSTOM">{{\'CUSTOM\' | translate}}</a></li></ul></div></div><div class="row" ng-if="cron.type == CRON_MONTHLY"><div class="col-md-1"></div><div class="col-md-10"><div class="radio"><label><input type="radio" name="optionsMonthly" value="{{CRON_MONTHLY_SPECIFIC}}" ng-model="cron.monthlyOption" ng-change="recalculateCron()">{{\'MONTHLYOPTION1\' | translate}}</label></div><label class="checkbox-inline" ng-repeat="day in cron.days" ng-if="cron.monthlyOption == CRON_MONTHLY_SPECIFIC"><input type="checkbox" value="{{day.key}}" ng-model="day.selected" ng-change="recalculateCron()"> {{day.key}}</label><div class="radio"><label><input type="radio" name="optionsMonthly" value="{{CRON_MONTHLY_LASTDAY}}" ng-model="cron.monthlyOption" ng-change="recalculateCron()">{{\'MONTHLYOPTION2\' | translate}}</label></div><div class="radio"><label><input type="radio" name="optionsMonthly" value="{{CRON_MONTHLY_LASTWEEKDAY}}" ng-model="cron.monthlyOption" ng-change="recalculateCron()">{{\'MONTHLYOPTION3\' | translate}}</label></div><div class="radio"><label><input type="radio" name="optionsMonthly" value="{{CRON_MONTHLY_SPECIFICWEEKDAY}}" ng-model="cron.monthlyOption" ng-change="recalculateCron()">{{\'MONTHLYOPTION4\' | translate}}</label></div><div class="radio"><label><input type="radio" name="optionsMonthly" value="{{CRON_MONTHLY_SPECIFICWORKINGDAY}}" ng-model="cron.monthlyOption" ng-change="recalculateCron()">{{\'MONTHLYOPTION5\' | translate}}</label></div><form class="form-inline" ng-if="cron.monthlyOption == CRON_MONTHLY_SPECIFICWEEKDAY"><div class="form-group"><select id="cron-monthly-occurence" class="form-control tm1-ui-indent" ng-model="cron.monthlyOccurence" ng-change="recalculateCron()"><option ng-repeat="weekorder in cron.weekmonthorder" value="{{weekorder.key}}">{{weekorder.desc}}</option></select><select id="cron-monthly-weekday" class="form-control tm1-ui-indent" ng-model="cron.monthlyWeekday" ng-change="recalculateCron()"><option ng-repeat="week in cron.weeknames" value="{{week.key}}">{{week.desc}}</option></select></div></form><form class="form-inline" ng-if="cron.monthlyOption == CRON_MONTHLY_SPECIFICWORKINGDAY"><div class="form-group"><select id="cron-monthly-working-day-no" class="form-control tm1-ui-indent" ng-model="cron.monthlyWorkingDay" ng-change="recalculateCron()"><option ng-repeat="day in dayNo" value="{{day.key}}">{{day.display}}</option></select></div></form></div><div class="col-md-1"></div></div><div class="row" ng-if="cron.type == CRON_WEEKLY"><div class="col-md-1"></div><div class="col-md-10"><p translate="WEEKLYOPTION1"></p><label class="checkbox-inline" ng-repeat="weekday in cron.weeknames"><input type="checkbox" value="{{weekday.key}}" ng-model="weekday.selected" ng-change="recalculateCron()" ng-disabled="cron.monthlyOptionsUpdated"> {{weekday.desc}}</label></div><div class="col-md-1"></div></div><div class="row" ng-if="cron.type == CRON_DAILY"><div class="col-md-1"></div><div class="col-md-10"><div class="radio"><label><input type="radio" name="optionsDaily" value="{{CRON_DAILY_SPECIFIC}}" ng-model="cron.dailyOption" ng-change="recalculateCron()">At {{cron.hour}}:{{cron.minute}}{{cron.ampm}}</label></div><div class="radio"><label><input type="radio" name="optionsDaily" value="{{CRON_DAILY_EVERYHOUR}}" ng-model="cron.dailyOption" ng-change="recalculateCron()">Every hour starting from {{cron.hour}}:{{cron.minute}}{{cron.ampm}} until {{cron.dailyOptionIntervalHourDesciption}}</label></div><form class="form-inline" ng-if="cron.dailyOption == CRON_DAILY_EVERYHOUR"><div class="form-group"><select class="form-control" ng-model="cron.dailyOptionIntervalHour" ng-change="recalculateCron()"><option ng-repeat="absolutehour in cron.absoluteHours">{{absolutehour}}</option></select><label class="tm1-ui-indent" translate="LASTHOURRUN"></label></div></form></div><div class="col-md-1"></div></div><div class="row" ng-show="cron.type == CRON_CUSTOM"><div class="col-md-1"></div><div class="col-md-10"><form><div class="form-group"><label for="custom-cron" translate="CRON"></label><input type="text" class="form-control" id="custom-cron" placeholder="{{\'CRON\' | translate}}" ng-model="generatedCron"></div><div class="form-group"><label for="custom-cron-description" translate="DESCRIPTION"></label><input type="text" class="form-control" id="custom-cron-description" placeholder="{{\'DESCRIPTION\' | translate}}" ng-model="generatedCronMessage"></div></form></div><div class="col-md-1"></div></div><div class="row"><div class="col-md-1"></div><div class="col-md-10"><form class="form-inline"><div class="form-group"><label translate="TIME"></label><select id="cron-hour" class="form-control tm1-ui-indent" ng-model="cron.hour" ng-change="recalculateCron()"><option ng-repeat="hour in cron.hours" value="{{hour}}">{{hour}}</option></select><select id="cron-minute" class="form-control tm1-ui-indent" ng-model="cron.minute" ng-change="recalculateCron()" ng-options="minute as minute for minute in minutes"></select><select id="cron-ampm" class="form-control tm1-ui-indent" ng-model="cron.ampm" ng-change="recalculateCron()"><option value="am">AM</option><option value="pm">PM</option></select></div></form></div><div class="col-md-1"></div></div><div class="row"><div class="col-md-12"><hr></div></div><div class="row"><div class="col-md-12"><form class="form-inline"><div class="form-group"><input type="text" class="form-control" placeholder="CRON" ng-model="generatedCron" ng-disabled="true"></div><small class="tm1-ui-indent">{{generatedCronMessage}}</small> <button type="button" class="btn btn-link" ngclipboard data-clipboard-text="{{generatedCronMessage}}"><i class="fa fa-copy"></i></button> <button type="button" class="btn btn-info pull-right" ng-click="checkCron()"><i class="fa fa-clock-o"></i> <span class="h5 tm1-ui-indent" translate="CHECKCRON"></span></button></form></div></div><div class="row" ng-if="cron.nextRuns.length > 0"><div class="col-md-12"><hr></div></div><div class="row"><div class="col-md-12"><div ng-if="cron.nextRunFlagError" class="panel panel-danger"><div class="panel-heading">{{cron.nextRunErrorMessage}}</div></div><ul ng-if="!cron.nextRunFlagError && cron.nextRuns.length > 0" class="list-group"><li class="list-group-item disabled" translate="NEXTRUNS"></li><li ng-repeat="nextRun in cron.nextRuns track by $index" ng-if="nextRun" class="list-group-item">{{nextRun | date:\'y MMM d, h:mm a, EEE\'}}</li></ul></div></div><div class="row"><div class="col-md-12"><hr></div></div><div class="row"><div class="col-md-12"><button type="button" class="btn btn-success pull-right" ng-click="applyCron()"><i class="fa fa-calendar-check-o"></i> <span class="h5 tm1-ui-indent" translate="APPLYCRON"></span></button></div></div><div class="row"><div class="col-md-1"></div><div class="col-md-10"></div><div class="col-md-1"></div></div></div></div>');b.put("assets/html/tm1-ui-cube-viewer-tpl-hierarchy-drag-drop.html",'<div class="row"><div class="col-md-12"><div class="panel panel-default"><div class="panel-body" ng-class="{\'scroll-y\': !selections.showHierarchies, \'visible-y\': selections.showHierarchies}"><div ng-class="selections.showHierarchies ? \'tm1-ui-cv-hierarchy-expanded\' : \'tm1-ui-cv-hierarchy-collapsed\'" dnd-list="dimObj.Hierarchies" dnd-drop="onHierarchyDrop(index, item, external, type, constants.AXIS_NONE)"><div class="form-group" style="margin-bottom: 5px"><div class="input-group"><div class="input-group-btn"><button class="btn btn-default btn-sm" type="button" ng-click="selections.showHierarchies = !selections.showHierarchies;"><i class="fa fa-expand" ng-if="!selections.showHierarchies" style="transform: rotate(-90deg)"></i> <i class="fa fa-compress" ng-if="selections.showHierarchies" style="transform: rotate(-90deg)"></i></button></div><input class="form-control input-sm" type="text" placeholder="{{\'SEARCH\' | translate}}" ng-model-options="{debounce: 500}" ng-model="directiveConfigurations.hierarchySearch"><div class="input-group-btn"><button class="btn btn-default btn-sm" type="button" ng-disabled="!directiveConfigurations.hierarchySearch.length" ng-click="directiveConfigurations.hierarchySearch = \'\'"><i class="fa fa-remove text-danger"></i></button></div></div></div><label class="dndPlaceholder text-mute"><span class="tm1-ui-cube-viewer-dimension-drag-icon label-default"><span class="tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span></span></label><div ng-repeat="dimObj in directiveConfigurations.dimensionsAndHierarchies | tm1DimensionsFilter:directiveConfigurations.hierarchySearch:true" class="btn btn-default btn-sm text-left label-default" style="display: block; margin-top: 2px" ng-click="dimObj.expanded = !dimObj.expanded;"><div ng-if="dimObj.Hierarchies.length == 1"><div class="btn btn-default btn-sm text-left" style="display: block; text-align: left" dnd-effect-allowed="move" dnd-draggable="dimObj.Hierarchies[0]" dnd-dragstart="onHierarchyDragStart(event, $index, constants.AXIS_NONE, dimObj.Hierarchies[0])" dnd-moved="onHierarchyMoved($index, dimObj.Hierarchies)"><dnd-nodrag><span dnd-handle class="handle tm1-ui-cube-viewer-dimension-handle"><i class="fa fa-arrows fa-fw"></i></span> <span class="tm1-ui-indent">{{dimObj.Hierarchies[0].Name}}</span></dnd-nodrag></div></div><div ng-if="dimObj.Hierarchies.length > 1" style="text-align: left"><span ng-if="!dimObj.expanded" class="pull-right label" style="font-size: 100%"><i class="fa fa-fw fa-chevron-circle-up"></i> </span><span ng-if="dimObj.expanded" class="pull-right label" style="font-size: 100%"><i class="fa fa-fw fa-chevron-circle-down"></i> </span><strong class="label" style="font-size: 100%">{{dimObj.Name}}</strong><div class="btn btn-default btn-sm text-left" style="display: block; text-align: left" ng-repeat="hierObj in dimObj.Hierarchies track by $index" ng-show="dimObj.expanded" dnd-effect-allowed="move" dnd-draggable="hierObj" dnd-dragstart="onHierarchyDragStart(event, $index, constants.AXIS_NONE, hierObj)" dnd-moved="onHierarchyMoved($index, dimObj.Hierarchies)"><dnd-nodrag><span dnd-handle class="handle tm1-ui-cube-viewer-dimension-handle"><i class="fa fa-arrows fa-fw"></i></span> <span class="tm1-ui-indent">{{hierObj.Name}}</span></dnd-nodrag></div></div></div></div></div></div></div></div>');b.put("assets/html/tm1-ui-cube-viewer-tpl-hierarchy-updater.html",'<div class="row"><div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><div class="row"><div class="col-md-12"><span class="h3" translate="HIERARCHIES"></span></div></div><div class="row"><div class="col-md-12"><div class="form-group"><label translate="DIMENSION"></label><select class="form-control" ng-change="refreshCubeDimensionHierarchyList(selectedDimension)" ng-options="item for item in directiveConfigurations.cubeDimensions" ng-model="selectedDimension"></select></div><div class="form-group"><label translate="HIERARCHY"></label><select class="form-control" ng-change="refreshHierarchyAxisList(selectedDimension, selectedHierarchy)" ng-options="item as item.Name for item in directiveConfigurations.dimensionHierarchies" ng-model="selectedHierarchy"></select></div><div class="row"><div class="col-md-6"><div class="form-group"><label translate="AXISLOCATION"></label><p>{{hierarchyAxisFrom.display}}</p></div></div><div class="col-md-6"><div class="form-group"><label translate="AXISTO"></label><select class="form-control" ng-change="updateAxisMovementActionStatus(selectedDimension, selectedHierarchy)" ng-options="item as item.display for item in directiveConfigurations.dimensionAxes" ng-model="selectedAxisTo"></select></div></div></div><div class="pull-right"><button type="button" class="btn btn-primary" ng-disabled="blockAddToHierarchy" ng-click="addHierarchy(selectedDimension, selectedHierarchy, selectedAxisTo)"><i class="fa fa-plus-circle"></i> <span class="tm1-ui-indent" translate="ADD"></span></button> <button type="button" class="btn btn-default" ng-disabled="blockMoveAxisOfHierarchy" ng-click="updateHierarchy(selectedDimension, selectedHierarchy, hierarchyAxisFrom, selectedAxisTo)"><i class="fa fa-pencil"></i> <span class="tm1-ui-indent" translate="UPDATE"></span></button></div></div></div></div></div></div></div>');b.put("assets/html/tm1-ui-cube-viewer-tpl-mdxview-save-as.html",'<div><div class="form-group" ng-class="{\'has-error\':!viewOptions.isValid}"><label class="control-label" translate="NAME"></label><input type="text" class="form-control" placeholder="View Name" ng-model="viewOptions.view" ng-change="validateView(viewOptions.view)" ng-model-options="{debounce: 500}"> <span class="help-block">{{viewOptions.message}}</span></div><div class="checkbox"><label><input type="checkbox" ng-model="viewOptions.saveAsPrivateView">{{\'PRIVATE\' | translate}}</label></div></div>');b.put("assets/html/tm1-ui-cube-viewer-tpl-table-edit.html",'<table ng-if="directiveConfigurations.showTable" ng-attr-id="{{::directiveConfigurations.tableId}}" class="tm1-ui-cube-viewer-table" ng-class="directiveConfigurations.tableClass.length > 0 ? directiveConfigurations.tableClass : \'table\'" tm1-ui-table-virtual-scroll="{height: \'500px\'}" tm1-ui-table-virtual-scroll-rows="dataset.rows"><thead><tr class="active"><th class="text-center" ng-if="dataset" rowspan="{{dataset.headers.length}}"><div>#</div></th><th ng-repeat="dimension in dataset.dimensions.rows" rowspan="{{dataset.dimensions.columns.length}}" class="text-left">{{dimension}}</th><th ng-repeat="dimObj in dataset.headers[0].columns" class="text-left tm1-ui-rpt-column-text" ng-if="dimObj.visible" colspan="{{dimObj.colspan}}"><i ng-if="dimObj.element.type == \'C\'" class="fa tm1-ui-rpt-column-label-icon" ng-class="dimObj.element.children.length > 0 ? \'fa-minus-square-o\' : \'fa-plus-square-o\'" ng-click="expandOrCollapse(dimObj);"></i> <span ng-class="{\'tm1-ui-indent\':dimObj.element.type == \'C\'}">{{dimObj.alias}}</span></th></tr><tr ng-repeat="headersDimObj in dataset.headers | limitTo:100:1" class="active"><th ng-repeat="dimObj in headersDimObj.columns" class="text-left tm1-ui-rpt-column-text" ng-if="dimObj.visible" colspan="{{dimObj.colspan}}"><i ng-if="dimObj.element.type == \'C\'" class="fa tm1-ui-rpt-column-label-icon" ng-class="dimObj.element.children.length > 0 ? \'fa-minus-square-o\':\'fa-plus-square-o\'" ng-click="expandOrCollapse(dimObj);"></i> <span ng-class="{\'tm1-ui-indent\':dimObj.element.type == \'C\'}">{{dimObj.alias}}</span></th></tr></thead><tbody><tr ng-repeat="row in dataset.rows track by $index" ng-if="row.inPage"><td class="text-center"><div><b>{{$index+1}}</b></div></td><td ng-repeat="rowEl in row.elements" class="text-left" rowspan="{{rowEl.rowspan}}" colspan="{{rowEl.colspan}}" ng-if="rowEl.visible || $parent.$parent.$index == dataset.metadata._page.firstRowIndex" nowrap><div ng-if="row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd"><span class="tm1-ui-indent" ng-repeat="item in getIndentation(rowEl.element) track by $index"></span> <i ng-if="rowEl.element.type == \'C\'" class="fa tm1-ui-rpt-row-label-icon" ng-class="rowEl.element.children.length > 0 ? \'fa-minus-square-o\' : \'fa-plus-square-o\'" ng-click="expandOrCollapse(rowEl);"></i> <span ng-class="{\'tm1-ui-indent\':rowEl.element.type == \'C\'}">{{rowEl.alias}}</span></div><div ng-if="!(row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd)">&nbsp;</div></td><td ng-repeat="cell in row.cells" class="text-right" ng-class="{\'tm1-ui-sandbox-changes\':cell.isBaseValueDifferentInSandbox}"><div ng-if="row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd"><span ng-if="!cell.HasPicklist && cell.isReadOnly">{{cell.value | formatNumber:2}}</span> <span ng-if="!cell.HasPicklist && !cell.isReadOnly"><input class="input-sm" type="text" ng-click="onCellClick(cell)" ng-blur="onCellUpdate(cell)" ng-model="cell.value"></span><div class="picklist" uib-dropdown dropdown-append-to-body="true" on-toggle="onCellClick(cell)" ng-if="cell.HasPicklist"><div uib-dropdown-toggle>{{cell.value}} <span class="caret"></span></div><ul class="dropdown-menu dropdown-menu-right" uib-dropdown-menu role="menu"><li ng-repeat="item in picklistItems" class="tm1-ui-cube-viewer-picklist-item" ng-class="{\'active\':item == cell.value}"><a ng-click="onCellUpdate(cell, item)">{{item}}</a></li></ul></div></div><div ng-if="!(row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd)">&nbsp;</div></td></tr></tbody></table>');b.put("assets/html/tm1-ui-cube-viewer-tpl-table-read-only.html",'<table ng-if="directiveConfigurations.showTable" ng-attr-id="{{::directiveConfigurations.tableId}}" class="tm1-ui-cube-viewer-table" ng-class="directiveConfigurations.tableClass.length > 0 ? directiveConfigurations.tableClass : \'table\'" tm1-ui-table-virtual-scroll="{height: \'500px\'}" tm1-ui-table-virtual-scroll-rows="dataset.rows"><thead><tr class="active"><th class="text-center" ng-if="dataset" rowspan="{{dataset.headers.length}}"><div>#</div></th><th ng-repeat="dimension in dataset.dimensions.rows" rowspan="{{dataset.dimensions.columns.length}}" class="text-left">{{dimension}}</th><th ng-repeat="dimObj in dataset.headers[0].columns" class="text-left tm1-ui-rpt-column-text" ng-if="dimObj.visible" colspan="{{dimObj.colspan}}"><i ng-if="dimObj.element.type == \'C\'" class="fa tm1-ui-rpt-column-label-icon" ng-class="dimObj.element.children.length > 0 ? \'fa-minus-square-o\' : \'fa-plus-square-o\'" ng-click="expandOrCollapse(dimObj);"></i> <span ng-class="{\'tm1-ui-indent\':dimObj.element.type == \'C\'}">{{dimObj.alias}}</span></th></tr><tr ng-repeat="headersDimObj in dataset.headers | limitTo:100:1" class="active"><th ng-repeat="dimObj in headersDimObj.columns" class="text-left tm1-ui-rpt-column-text" ng-if="dimObj.visible" colspan="{{dimObj.colspan}}"><i ng-if="dimObj.element.type == \'C\'" class="fa tm1-ui-rpt-column-label-icon" ng-class="dimObj.element.children.length > 0 ? \'fa-minus-square-o\':\'fa-plus-square-o\'" ng-click="expandOrCollapse(dimObj);"></i> <span ng-class="{\'tm1-ui-indent\':dimObj.element.type == \'C\'}">{{dimObj.alias}}</span></th></tr></thead><tbody><tr ng-repeat="row in dataset.rows track by $index" ng-if="row.inPage"><td class="text-center"><div><b>{{$index+1}}</b></div></td><td ng-repeat="rowEl in row.elements" class="text-left" rowspan="{{rowEl.rowspan}}" colspan="{{rowEl.colspan}}" ng-if="rowEl.visible || $parent.$parent.$index == dataset.metadata._page.firstRowIndex" nowrap><div ng-if="row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd"><span class="tm1-ui-indent" ng-repeat="item in getIndentation(rowEl.element) track by $index"></span> <i ng-if="rowEl.element.type == \'C\'" class="fa tm1-ui-rpt-row-label-icon" ng-class="rowEl.element.children.length > 0 ? \'fa-minus-square-o\' : \'fa-plus-square-o\'" ng-click="expandOrCollapse(rowEl);"></i> <span ng-class="{\'tm1-ui-indent\':rowEl.element.type == \'C\'}">{{rowEl.alias}}</span></div><div ng-if="!(row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd)">&nbsp;</div></td><td ng-repeat="cell in row.cells" class="text-right" ng-class="{\'tm1-ui-sandbox-changes\':cell.isBaseValueDifferentInSandbox}"><div ng-if="row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd">{{cell.value | formatNumber:2}}</div><div ng-if="!(row.index >= $$tm1UiTableVirtualScroll.visibleRowNoStart && row.index <= $$tm1UiTableVirtualScroll.visibleRowNoEnd)">&nbsp;</div></td></tr></tbody></table>');b.put("assets/html/tm1-ui-cube-viewer-tpl-view-save-as.html",'<div><div class="form-group" ng-class="{\'has-error\':!viewOptions.isValid}"><label class="control-label" translate="NAME"></label><input type="text" class="form-control" placeholder="View Name" ng-model="viewOptions.view" ng-change="validateView()" ng-model-options="{debounce: 500}"> <span class="help-block">{{viewOptions.message}}</span></div><div class="alert alert-info" role="alert" translate="MESSAGESAVEASCANVASVIEW" ng-show="!viewOptions.saveAsNativeView && !directiveConfigurations.isMDXViewSaveable"></div><br><div class="checkbox" ng-show="viewOptions.isNativeViewCompatible"><label><input type="checkbox" ng-model="viewOptions.saveAsNativeView">{{\'MESSAGESAVEASNATIVEVIEW\' | translate}}</label></div><div class="checkbox"><label><input type="checkbox" ng-model="viewOptions.saveAsPrivateView">{{\'PRIVATE\' | translate}}</label></div></div>');b.put("assets/html/tm1-ui-cube-viewer-tpl-view-save.html",'<div><div class="form-group" ng-class="{\'has-error\':!viewOptions.isValid}"><label translate="NAME"></label><input type="text" class="form-control" placeholder="View Name" ng-model="viewOptions.view" ng-change="validateView()" ng-model-options="{debounce: 500}"> <span class="help-block">{{viewOptions.message}}</span></div><div class="alert alert-info" role="alert" translate="MESSAGESAVEASCANVASVIEW" ng-show="!saveAsNativeView && !directiveConfigurations.isMDXViewSaveable"></div><br><div class="checkbox" ng-show="viewOptions.isNativeViewCompatible"><label><input type="checkbox" ng-model="saveAsNativeView">{{\'MESSAGESAVEASNATIVEVIEW\' | translate}}</label></div><div class="checkbox"><label><input type="checkbox" ng-model="viewOptions.overwriteView" ng-change="validateView()">{{\'OVERWRITE\' | translate}}</label></div><div class="checkbox"><label><input type="checkbox" ng-model="viewOptions.saveAsPrivateView">{{\'PRIVATE\' | translate}}</label></div></div>');b.put("assets/html/tm1-ui-cube-viewer.html",'<div class="tm1-ui-cube-viewer {{directiveClasses}}"><div class="row" ng-if="directiveConfigurations.mdxMode"><div class="col-md-12"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title"><i class="fa fa-play-circle"></i> <span class="tm1-ui-indent" translate="MDX"></span></h3></div><div class="panel-body"><pre ui-ace="{ onLoad : aceLoaded }" style="height: 300px; font-size: 1.1em" ng-model="viewConfiguration.mdx"></pre><button type="button" class="btn btn-primary" ng-click="updateTableViaMDX(viewConfiguration.mdx)" title="{{MESSAGEEXECUTEHINT}}"><i class="fa fa-flash"></i><span class="tm1-ui-indent">{{\'EXECUTE\' | translate}}</span></button> <button type="button" class="btn btn-default" ng-click="saveAsMDXView(viewConfiguration.mdx)" title="{{MESSAGESAVEHINT}}"><i class="fa fa-floppy-o"></i><span class="tm1-ui-indent">{{\'SAVEAS\' | translate}}</span></button></div></div></div></div><div class="row" ng-hide="directiveConfigurations.mdxMode || directiveConfigurations.hideHierarchies"><div class="col-md-3 tm1-ui-cv-hierarchy-updater"></div><div class="col-md-9 tm1-ui-cv-axis"><div class="row"><div class="col-md-12"><div class="panel panel-default"><div class="panel-body tm1-ui-cube-viewer-title-axis-container"><div class="row"><div class="col-md-12 tm1-ui-cube-viewer-hierarchy-drop-section" dnd-list="tableDrivers.title" dnd-drop="onHierarchyDrop(index, item, external, type, \'title\')"><img src="assets/img/table-title-black.svg" class="tm1-ui-cube-viewer-icon pull-left" title="{{\'TITLES\' | translate}}"> <span ng-repeat="dimension in tableDrivers.title track by $index" class="tm1-ui-cube-viewer-dimension-title label-default" dnd-draggable="dimension" dnd-effect-allowed="move" dnd-dragstart="onHierarchyDragStart(event, $index, \'title\')" dnd-moved="onHierarchyMoved($index, tableDrivers.title, \'title\')"><dnd-nodrag><span dnd-handle class="handle tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span><div class="btn-group tm1-ui-indent" uib-dropdown keyboard-nav><div class="btn-group btn-group-sm" role="group"><button ng-attr-id="{{dimension.hierarchy}}" type="button" class="btn btn-default" uib-dropdown-toggle><span class="text-muted">{{dimension.dimension}}</span> <span ng-show="dimension.hierarchy != dimension.dimension" class="text-info tm1-ui-indent">{{dimension.hierarchy}}</span> <span class="tm1-ui-indent">{{dimension.elementSelectedAlias}}</span> <i class="tm1-ui-indent"></i> <span class="caret"></span></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-click="onHierarchyClick(dimension)"><i class="fa fa-list"></i></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-hide="getHierarchyCount(dimension) < 2" title="Remove {{dimension.hierarchy}}" ng-click="onHierarchyRemove(dimension, \'title\')"><i class="fa fa-trash"></i></button></div><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="{{dimension.hierarchy}}"><li role="menuitem" ng-repeat="element in dimension.elements"><a ng-click="onHierarchyTitleSelect(dimension, element)">{{element.alias}}</a></li></ul></div></dnd-nodrag></span><label class="dndPlaceholder text-mute"><span class="tm1-ui-cube-viewer-dimension-drag-icon label-default"><span class="tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span></span></label></div></div></div></div></div></div><div class="row"><div class="col-md-6 tm1-ui-cv-hierarchy-panel-row"><div class="panel panel-default"><div class="panel-body tm1-ui-cube-viewer-row-axis-container"><div class="row"><div class="col-md-12 tm1-ui-cube-viewer-hierarchy-drop-section" dnd-list="tableDrivers.row" dnd-drop="onHierarchyDrop(index, item, external, type, \'row\')"><img src="assets/img/table-row-black.svg" class="tm1-ui-cube-viewer-icon pull-left" title="{{\'ROWS\' | translate}}"> <span ng-repeat="dimension in tableDrivers.row track by $index" class="tm1-ui-cube-viewer-dimension-row label-default" dnd-draggable="dimension" dnd-effect-allowed="move" dnd-dragstart="onHierarchyDragStart(event, $index, \'row\')" dnd-moved="onHierarchyMoved($index, tableDrivers.row, \'row\')"><dnd-nodrag><span dnd-handle class="handle tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span><div class="btn-group tm1-ui-indent" uib-dropdown keyboard-nav><div class="btn-group btn-group-sm" role="group"><button ng-attr-id="{{dimension.hierarchy}}" type="button" class="btn btn-default" uib-dropdown-toggle><span class="text-muted">{{dimension.dimension}}</span> <span ng-show="dimension.hierarchy != dimension.dimension" class="text-info tm1-ui-indent">{{dimension.hierarchy}}</span> <span class="text-primary tm1-ui-indent" ng-if="dimension.subset">{{dimension.subset}}&nbsp;({{getSubsetElementCount(dimension)}})</span> <span class="text-primary tm1-ui-indent" ng-if="!dimension.subset" translate="SUBSETEXPRESSION"></span> <i class="tm1-ui-indent"></i> <span class="caret"></span></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-click="onHierarchyClick(dimension)"><i class="fa fa-list"></i></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-hide="getHierarchyCount(dimension) < 2" title="Remove {{dimension.hierarchy}}" ng-click="onHierarchyRemove(dimension, \'row\')"><i class="fa fa-trash"></i></button></div><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="{{dimension.hierarchy}}"><li role="menuitem" ng-repeat="subset in dimension.subsets"><a ng-click="onHierarchySubsetSelect(dimension, subset)">{{subset.Name}}&nbsp;({{subset[\'Elements@odata.count\']}})</a></li></ul></div></dnd-nodrag></span><label class="dndPlaceholder text-mute"><span class="tm1-ui-cube-viewer-dimension-drag-icon label-default"><span class="tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span></span></label></div></div></div></div></div><div class="col-md-6 tm1-ui-cv-hierarchy-panel-column"><div class="panel panel-default"><div class="panel-body tm1-ui-cube-viewer-column-axis-container"><div class="row"><div class="col-md-12 tm1-ui-cube-viewer-hierarchy-drop-section" dnd-list="tableDrivers.column" dnd-drop="onHierarchyDrop(index, item, external, type, \'column\')"><img src="assets/img/table-col-black.svg" class="tm1-ui-cube-viewer-icon pull-left" title="{{\'COLUMNS\' | translate}}"> <span ng-repeat="dimension in tableDrivers.column track by $index" class="tm1-ui-cube-viewer-dimension-column label-default" dnd-draggable="dimension" dnd-effect-allowed="move" dnd-dragstart="onHierarchyDragStart(event, $index, \'column\')" dnd-moved="onHierarchyMoved($index, tableDrivers.column, \'column\')"><dnd-nodrag><span dnd-handle class="handle tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span><div class="btn-group tm1-ui-indent" uib-dropdown keyboard-nav><div class="btn-group btn-group-sm" role="group"><button ng-attr-id="{{dimension.hierarchy}}" type="button" class="btn btn-default" uib-dropdown-toggle><span class="text-muted">{{dimension.dimension}}</span> <span ng-show="dimension.hierarchy != dimension.dimension" class="text-info tm1-ui-indent">{{dimension.hierarchy}}</span> <span class="text-primary tm1-ui-indent" ng-if="dimension.subset">{{dimension.subset}}&nbsp;({{getSubsetElementCount(dimension)}})</span> <span class="text-primary tm1-ui-indent" ng-if="!dimension.subset" translate="SUBSETEXPRESSION"></span> <i class="tm1-ui-indent"></i> <span class="caret"></span></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-click="onHierarchyClick(dimension)"><i class="fa fa-list"></i></button> <button class="btn btn-default label label-default tm1-input-btn-append" type="button" ng-hide="getHierarchyCount(dimension) < 2" title="Remove {{dimension.hierarchy}}" ng-click="onHierarchyRemove(dimension, \'column\')"><i class="fa fa-trash"></i></button></div><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="{{dimension.hierarchy}}"><li role="menuitem" ng-repeat="subset in dimension.subsets"><a ng-click="onHierarchySubsetSelect(dimension, subset)">{{subset.Name}}&nbsp;({{subset[\'Elements@odata.count\']}})</a></li></ul></div></dnd-nodrag></span><label class="dndPlaceholder text-mute"><span class="tm1-ui-cube-viewer-dimension-drag-icon label-default"><span class="tm1-ui-cube-viewer-dimension-handle label label-default"><i class="fa fa-arrows fa-fw"></i></span></span></label></div></div></div></div></div></div></div></div><div ng-if="directiveConfigurations.error.length > 0" uib-alert class="alert-danger" close="clearErrorAlert()">{{directiveConfigurations.error}}</div><div class="panel panel-default tm1-ui-cv-toolbar" ng-hide="directiveConfigurations.hideTitle && (directiveConfigurations.mdxMode || directiveConfigurations.hideToolbar)"><div class="panel-heading" ng-hide="directiveConfigurations.hideTitle"><span class="panel-title"><i class="fa fa-cube"></i> <span class="tm1-ui-indent">{{tm1Cube}}</span></span></div><div class="panel-heading" ng-hide="directiveConfigurations.mdxMode || directiveConfigurations.hideToolbar"><div class="clearfix"><div><div class="btn-group tm1-ui-indent" uib-dropdown keyboard-nav><div class="btn-group" role="group"><button ng-if="directiveConfigurations.allowViewSave" class="btn btn-default" type="button" ng-disabled="directiveConfigurations.viewIsModified || selectedView.Name == constants.NEW_CANVAS_VIEW.Name" ng-click="saveViewAs(selectedView)" title="Save View As..." tooltip-append-to-body="true"><i class="fa fa-copy fa-fw"></i></button> <button ng-if="directiveConfigurations.allowViewSave" class="btn btn-default" type="button" ng-disabled="!directiveConfigurations.viewIsModified" ng-click="saveView(selectedView)" title="Save View" tooltip-append-to-body="true"><i class="fa fa-save fa-fw text-success"></i></button> <button id="tm1-ui-cube-viewer-views" type="button" class="btn btn-default" uib-dropdown-toggle><span class="text-muted" translate="VIEW"></span> <span class="text-primary tm1-ui-indent">{{selectedView.display}}</span> <i class="tm1-ui-indent"></i> <span class="caret"></span></button> <button type="button" class="btn btn-default" ng-disabled="!directiveConfigurations.viewIsModified" ng-click="resetViewDefinitionAndData()" title="Reload View" tooltip-append-to-body="true"><i class="fa fa-refresh fa-fw text-danger"></i></button> <button type="button" class="btn btn-default" ng-click="refreshData({forceRecalculate: true})" title="Execute" tooltip-append-to-body="true"><i class="fa fa-flash fa-fw"></i></button> <button type="button" class="btn btn-default tm1-ui-cv-button-auto-recalculate" data-toggle="button" title="Auto Calculate After Selection Changes" tooltip-append-to-body="true" ng-click="directiveConfigurations.autoRecalculate = !directiveConfigurations.autoRecalculate;"><i class="fa fa-calculator fa-fw"></i></button> <button type="button" class="btn btn-default tm1-ui-cv-button-suppress-rows" data-toggle="button" title="Suppress Empty Rows" tooltip-append-to-body="true" ng-click="toggleZeroSuppression(\'rows\');"><img src="assets/img/table-row-black.svg" class="tm1-ui-icon-svg"></button> <button type="button" class="btn btn-default tm1-ui-cv-button-suppress-columns" data-toggle="button" title="Suppress Empty Columns" tooltip-append-to-body="true" ng-click="toggleZeroSuppression(\'columns\');"><img src="assets/img/table-col-black.svg" class="tm1-ui-icon-svg"></button> <button id="tm1-ui-cube-viewer-mdx" type="button" class="btn btn-default" ng-click="generateCurrentViewMDX()" title="MDX" ng-if="!directiveConfigurations.hideMdx"><i class="fa fa-code fa-fw"></i></button></div><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="tm1-ui-cube-viewer-views"><li role="menuitem" ng-repeat="view in directiveConfigurations.views | orderBy:\'display\' track by $index"><a ng-click="updateWithView(view)"><span ng-class="view.viewType == \'canvas\' ? \'\' : ( view.viewType == \'native\' ? \'text-muted\' : \'text-primary\' )">{{view.display}}</span></a></li></ul></div><div class="btn-group tm1-ui-indent" ng-if="directiveConfigurations.allowSandboxOperation" uib-dropdown keyboard-nav><div class="btn-group" role="group"><button ng-if="directiveConfigurations.allowSandboxCreateDelete" class="btn btn-default" type="button" title="Create Sandbox" tooltip-append-to-body="true"><i class="fa fa-connectdevelop fa-fw text-primary" ng-click="createSandbox()"></i></button> <button ng-if="directiveConfigurations.allowSandboxPublishChanges" class="btn btn-default" type="button" ng-disabled="selectedSandbox == constants.SANDBOX_BASE" title="Publish Sandbox Changes" tooltip-append-to-body="true"><i class="fa fa-check-square-o fa-fw text-success" ng-click="publishSandbox(selectedSandbox)"></i></button> <button ng-if="!(directiveConfigurations.forceSandboxName.length > 0)" id="tm1-ui-cube-viewer-sandboxes" type="button" class="btn" ng-class="directiveConfigurations.forceSandboxName.length > 0 ? \'btn-primary\' : \'btn-default\'" uib-dropdown-toggle><span ng-if="!(directiveConfigurations.forceSandboxName.length > 0)" class="text-muted" translate="SANDBOX"></span> <span ng-class="directiveConfigurations.forceSandboxName.length > 0 ? \'\' : \'text-primary tm1-ui-indent\'">{{selectedSandbox.Name}}</span> <i ng-if="!(directiveConfigurations.forceSandboxName.length > 0)" class="tm1-ui-indent"></i> <span ng-if="!(directiveConfigurations.forceSandboxName.length > 0)" class="caret"></span></button> <button class="btn btn-default" type="button" ng-disabled="selectedSandbox == constants.SANDBOX_BASE" title="Discard Sandbox Changes" tooltip-append-to-body="true"><i class="fa fa-rotate-left fa-fw text-danger" ng-click="discardSandboxChanges(selectedSandbox)"></i></button> <button ng-if="directiveConfigurations.allowSandboxCreateDelete" class="btn btn-default" type="button" ng-disabled="selectedSandbox == constants.SANDBOX_BASE" title="Delete Sandbox" tooltip-append-to-body="true"><i class="fa fa-trash-o fa-fw text-danger" ng-click="deleteSandbox(selectedSandbox)"></i></button></div><ul class="dropdown-menu" uib-dropdown-menu role="menu" aria-labelledby="tm1-ui-cube-viewer-sandboxes"><li role="menuitem" ng-repeat="sandbox in directiveConfigurations.sandboxes | orderBy:\'Name\' track by $index"><a ng-click="activateSandbox(sandbox)">{{sandbox.Name}}</a></li></ul></div></div></div></div></div><div class="tm1-ui-cv-table-wait"></div><div class="tm1-ui-cv-table-data"></div><div class="row" ng-if="directiveConfigurations.showBuiltInPagination && directiveConfigurations.pageSize > 0"><div class="col-md-12"><div class="btn-group" role="group"><button type="button" class="btn btn-default" ng-click="dataset.pagePrevious()"><i class="fa fa-angle-left"></i></button> <span class="btn btn-default" style="width: 70px">{{dataset.page()}} of {{dataset.pages()}}</span> <button type="button" class="btn btn-default" ng-click="dataset.pageNext()"><i class="fa fa-angle-right"></i></button></div><div class="btn-group pull-right" role="group"><button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(10)}" ng-click="dataset.setPageSize(10)">10</button> <button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(15)}" ng-click="dataset.setPageSize(15)">15</button> <button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(20)}" ng-click="dataset.setPageSize(20)">20</button> <button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(30)}" ng-click="dataset.setPageSize(30)">30</button> <button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(50)}" ng-click="dataset.setPageSize(50)">50</button> <button type="button" class="btn btn-default" ng-class="{\'active\': dataset.isPageSize(100)}" ng-click="dataset.setPageSize(100)">100</button></div></div></div></div>');b.put("assets/html/tm1-ui-dbr-cm-comment.html",'<div class="tm1-ui-dbr-cm-comment"><div class="modal-header"><h4 class="modal-title" translate="COMMENT"></h4></div><div ng-if="readOnly" ng-bind-html="comment"></div><text-angular ng-hide="readOnly" ng-model="comment" ta-toolbar="tm1FormatHtmlButtons"></text-angular><table class="table" ng-if="useAnnotations" ng-show="annotationSelected.length > 0 && showAnnotationViewer"><tbody><tr><td><div class="well" ng-bind-html="annotationSelected"></div></td><td style="width: 20%"><button type="button" class="btn btn-default btn-block" ng-click="hideViewer()" translate="HIDE"></button> <button ng-if="!readOnly" type="button" class="btn btn-info btn-block" ng-click="updateCommentBox()" translate="USE"></button></td></tr></tbody></table><div ng-if="useAnnotations" class="panel panel-default" style="height: 200px; overflow:scroll"><div class="panel-body"><table class="table table-hover"><thead><tr><th translate="COMMENT"></th><th translate="USER"></th><th translate="DATE"></th></tr></thead><tbody><tr ng-repeat="annotation in annotations | orderBy:\'-Created\'"><td ng-bind-html="annotation.commentValue" style="cursor: pointer" ng-click="setAnnotationView(annotation)"></td><td>{{annotation.Creator}}</td><td>{{annotation.Created | date:\'MM/dd/yyyy, hh:mm:ss a\'}}</td></tr></tbody></table></div></div><div class="modal-footer"><button type="button" class="btn btn-default" ng-click="dismissModal()">Cancel</button> <button type="button" class="btn btn-primary" ng-click="saveComments()">OK</button></div></div>');b.put("assets/html/tm1-ui-dbr-cm-drill.html",'<div class="tm1-ui-dbr-cm-drill {{directiveClasses}}"><div class="row"><div class="col-md-12"><h5 class="pull-right"></h5><h4>{{\'DRILLNAMES\' | translate}}</h4><div class="row"><div class="col-md-12"><div class="btn-group"><button ng-repeat="drill in drills track by $index" type="button" ng-class="{\'btn\':true, \'btn-default\':!drill.isSelected, \'btn-success\':drill.isSelected}" ng-click="drill.isSelected = !drill.isSelected; updateDrillTransactions(drill);">{{drill.name}}</button></div></div></div><tm1-ui-progress><tm1-ui-progress-pending>...</tm1-ui-progress-pending><tm1-ui-progress-ready><div ng-if="hasDrillsSelected" ng-hide="true" class="row"><div class="col-md-12"><input class="form-control" type="text" ng-change="updateSearchValue(searchText)" ng-model="searchText" placeholder="{{\'SEARCH\' | translate}}..."></div></div></tm1-ui-progress-ready></tm1-ui-progress><div class="panel panel-default" ng-show="hasDrillsSelected"><div class="panel-body" style="overflow-y: auto"><div class="row" ng-repeat="drill in drills | filter:{isSelected:true} track by $index"><div class="col-md-12"><table class="table" ng-if="drill.type == \'RelationalDrillthrough\' && drill.transactions.value && drill.transactions.value.length > 0"><thead><tr><th ng-repeat="(key, value) in drill.transactions.value[0]">{{key}}</th></tr></thead><tbody><tr ng-repeat="transaction in drill.transactions.value | filter:searchValue | limitTo:pageSize:currentPage track by $index"><td ng-repeat="(key, value) in transaction">{{value}}</td></tr></tbody></table><table class="table" ng-if="drill.type == \'CubeDrillthrough\' && drill.transactions.table.rows.length > 0"><thead><tr class="active" ng-if="drill.transactions.table.metadata.elements.title.length > 0"><th colspan="{{drill.transactions.table.metadata.dimensionCount.row + drill.transactions.table.metadata.elements.column.length}}"><label ng-repeat="(key, value) in drill.transactions.table.metadata.elements.title[0]" class="bg-info tm1-ui-dbr-cm-drill-title">{{key}}:{{value}}</label></th></tr><tr class="active"><th ng-repeat="(key, value) in drill.transactions.table.metadata.elements.row[0]"></th><th colspan="{{drill.transactions.Axes[0].Tuples.length}}"><label ng-repeat="dimensionName in drill.transactions.table.metadata.dimensions.column" class="bg-info tm1-ui-dbr-cm-drill-column">{{dimensionName}}</label></th></tr><tr class="active"><th ng-repeat="(key, value) in drill.transactions.table.metadata.elements.row[0]" rowspan="{{drill.transactions.table.metadata.dimensionCount.column}}" class="text-right"><label class="bg-info tm1-ui-dbr-cm-drill-row">{{key}}</label></th><th ng-repeat="colDimObj in drill.transactions.table.metadata.elements.column" class="text-right">{{colDimObj[drill.transactions.table.metadata.dimensions.column[0]]}}</th></tr><tr ng-repeat="dimensionName in drill.transactions.table.metadata.dimensions.column | limitTo:100:1" class="active"><th ng-repeat="colDimObj in drill.transactions.table.metadata.elements.column" class="text-right">{{colDimObj[dimensionName]}}</th></tr></thead><tbody><tr ng-repeat="rowObj in drill.transactions.table.rows | filter:searchValue | limitTo:pageSize:currentPage track by $index"><td ng-repeat="(key, value) in drill.transactions.table.metadata.elements.row[$index]" class="text-left">{{value}}</td><td ng-repeat="dataObj in rowObj track by $index" class="text-right">{{dataObj.CubeFormattedValue}}</td></tr></tbody></table><tm1-ui-progress><tm1-ui-progress-pending>{{\'MESSAGEWAIT\' | translate}} <i class="fa fa-circle-o-notch fa-spin fa-fw"></i></tm1-ui-progress-pending><tm1-ui-progress-ready><div ng-if="drill.type == \'RelationalDrillthrough\' && !drill.transactions.value && !drill.transactions.error.message" class="alert alert-warning" role="alert">{{drill.name}}: {{\'DRILLDATANOTFOUND\' | translate}}</div><div ng-if="drill.type == \'CubeDrillthrough\' && !drill.transactions.table && !drill.transactions.error.message" class="alert alert-warning" role="alert">{{drill.name}}: {{\'DRILLDATANOTFOUND\' | translate}}</div><div ng-if="drill.transactions.error.message" class="alert alert-danger" role="alert">{{drill.name}}: {{drill.transactions.error.message}}</div></tm1-ui-progress-ready></tm1-ui-progress></div></div><div ng-if="hasDrillsSelected && maxRowsTotal > pageSize" class="row"><div class="col-md-6"><div class="btn-group" role="group" aria-label="Navigation"><button type="button" class="btn btn-default" ng-click="getPreviousPage()" ng-class="{\'disabled\':activePage <= 1}" ng-disabled="activePage <= 1"><i class="fa fa-angle-left" aria-hidden="true"></i></button> <button type="button" class="btn btn-default">{{activePage + \' of \' + pageArray.length}}</button> <button type="button" class="btn btn-default" ng-click="getNextPage()" ng-class="{\'disabled\':activePage == pageArray.length}" ng-disabled="activePage == pageArray.length"><i class="fa fa-angle-right" aria-hidden="true"></i></button></div></div><div class="col-md-6"><div class="btn-group pull-right" role="group" aria-label="Navigation"><button type="button" class="btn btn-default" ng-repeat="pageSizeOption in pageSizeOptions track by $index" ng-if="pageSizeOption <= maxRowsTotal" ng-class="{\'active\':pageSizeOption == pageSize}" ng-click="setPageSize(pageSizeOption)">{{pageSizeOption}}</button></div></div></div></div></div></div></div></div>');b.put("assets/html/tm1-ui-dbr-cm-reference.html",'<div class="tm1-ui-dbr-cm-reference"><div class="row"><div class="col-md-12"><h4><span translate="CUBE"></span>: {{tm1Cube}}</h4><table class="table table-hover"><thead><tr><th translate="DIMENSION"></th><th translate="ELEMENT"></th></tr></thead><tbody><tr ng-repeat="dimEl in dimensionElements"><td>{{dimEl.dimension}}</td><td>{{dimEl.element}}</td></tr></tbody></table></div></div><div class="row" ng-if="tm1CommentElements"><div class="col-md-12"><h4 ng-if="tm1CommentCube != tm1Cube"><span translate="COMMENTCUBE"></span>: {{tm1CommentCube}}</h4><h4 ng-if="tm1CommentCube == tm1Cube" translate="COMMENTELEMENTDIFFERENCE"></h4><table class="table table-hover"><thead><tr><th translate="DIMENSION"></th><th translate="ELEMENT"></th></tr></thead><tbody ng-if="tm1CommentCube != tm1Cube"><tr ng-repeat="dimEl in commentDimensionElements"><td>{{dimEl.dimension}}</td><td>{{dimEl.element}}</td></tr></tbody><tbody ng-if="tm1CommentCube == tm1Cube"><tr ng-repeat="dimEl in commentDimensionElements" ng-if="dimensionElements[$index].element != dimEl.element"><td>{{dimEl.dimension}}</td><td>{{dimEl.element}}</td></tr></tbody></table></div></div><div class="row" ng-if="tm1PickList.length > 0"><div class="col-md-12"><br><div><label translate="PICKLISTOPTIONS"></label>:</div><ul class="square"><li ng-repeat="item in tm1PickList track by $index">{{item}}</li></ul></div></div></div>');b.put("assets/html/tm1-ui-dbr-cm-spread.html",'<div class="tm1-ui-dbr-cm-spread {{directiveClasses}}"><div class="row" style="margin-bottom: 20px"><div class="col-md-12"><label class="radio-inline"><input type="radio" name="{{directiveID}}-spreadAction" ng-attr-id="{{directiveID}}-0" ng-init="tm1SpreadAction.action = \'\'" value="" ng-model="tm1SpreadAction.action"> {{\'NONE\' | translate}}</label><label class="radio-inline"><input type="radio" name="{{directiveID}}-spreadAction" ng-attr-id="{{directiveID}}-1" value="clear" ng-model="tm1SpreadAction.action"> {{\'CLEAR\' | translate}}</label><label class="radio-inline"><input type="radio" name="{{directiveID}}-spreadAction" ng-attr-id="{{directiveID}}-2" value="proportional" ng-model="tm1SpreadAction.action"> {{\'PROPORTIONAL\' | translate}}</label><label class="radio-inline"><input type="radio" name="{{directiveID}}-spreadAction" ng-attr-id="{{directiveID}}-3" value="custom" ng-model="tm1SpreadAction.action"> {{\'CUSTOM\' | translate}}</label></div></div><div ng-if="tm1SpreadAction.action == \'clear\'" class="row"><div class="col-md-12"><span class="alert alert-danger" translate="SPREADCLEARMESSAGE"></span></div></div><div ng-if="tm1SpreadAction.action == \'proportional\'" class="row"><div class="col-md-12"><input type="number" class="form-control" ng-model="tm1SpreadAction.spreadValue" placeholder="{{\'SPREADPROPORTIONALPLACEHOLDER\' | translate}}"></div></div><div ng-if="tm1SpreadAction.action == \'custom\'" class="row"><div class="col-md-12"><input type="text" class="form-control" ng-model="tm1SpreadAction.customSpreadCommand" placeholder="{{\'SPREADCUSTOMCOMMAND\' | translate}}"></div></div><div class="row modal-footer text-right"><button class="btn btn-primary" ng-if="tm1SpreadAction.action && tm1SpreadAction.action != \'none\' && !confirmClear" ng-click="apply()" ng-disabled="tm1SpreadAction.action == \'custom\' && tm1SpreadAction.customSpreadCommand.length == 0" translate="APPLY"></button> <button class="btn btn-danger" ng-if="confirmClear" ng-click="confirm()" translate="CONFIRM"></button></div></div>');b.put("assets/html/tm1-ui-dbr-cm-trace-calculation.html",'<div class="tm1-ui-dbr-cm-trace-calculation"><h4><i ng-if="false" class="fa fa-indent fa-lg pull-right text-info tm1-ui-clickable" title="{{\'TRACEFEEDERS\' | translate}}" ng-click="showTraceFeeders()"></i> <span translate="CUBE"></span>:&nbsp;{{tm1Cube}}&nbsp;-&nbsp;<span translate="CALCULATIONS"></span></h4><div class="row" ng-if="values.enableChart"><div class="col-md-12"><label class="radio-inline"><input type="radio" name="traceDisplayOptions" value="{{constants.MODE_TABLE1}}" ng-model="values.displayMode" ng-click="refreshDisplay(values.displayMode)">{{\'TABLE\' | translate}}</label><label class="radio-inline"><input type="radio" name="traceDisplayOptions" value="{{constants.MODE_CHART1}}" ng-model="values.displayMode" ng-click="refreshDisplay(values.displayMode)">{{\'CHART\' | translate}}</label></div></div><hr><div class="row" style="margin-top: 0px" ng-if="values.displayMode == constants.MODE_TABLE1"><style>ul {\r\n        list-style-type: none;\r\n      }</style><div class="col-md-12"><script type="text/ng-template" id="trace-tree-node__.html"><span>\r\n              <span ng-class="(node.hasChildren || node.typeLC === constants.CELLTYPE_RULE) ? \'text-primary tm1-ui-clickable\' : \'text-info\'" ng-click="expandOrCollapse(node)">\r\n                <i class="fa fa-fw {{getFaNodeIcon(node)}}"></i>\r\n              </span>\r\n              <span class="text-muted tm1-ui-indent"><strong ng-if="node.cubeIsDiff && node.cube">{{node.cube}}&nbsp;</strong>{{node.reference}}</span>\r\n              <span ng-class="{\'text-success\':node.value >= 0, \'text-danger\':node.value < 0}" ng-click="expandOrCollapse(node)">{{node.value | formatNumber}}</span>\r\n            </span>\r\n\r\n            <p ng-if="node.typeLC === constants.CELLTYPE_RULE" />\r\n            <ul ng-if="(node.prereqRules.length > 0) && node.prereqRulesIsExpanded">              \r\n              <li style="margin-bottom: 10px;" ng-repeat="prereqRule in node.prereqRules track by $index">\r\n                <table><tbody><tr><td class="h6" style="padding-left: 25px;">{{prereqRule}}</td></tr></tbody></table>\r\n              </li>\r\n            </ul>\r\n            \r\n            <table style="border: 0;" ng-if="node.expanded && node.typeLC === constants.CELLTYPE_RULE">\r\n              <tbody>\r\n                <tr>\r\n                  <td>\r\n                    <button \r\n                      class="btn btn-link btn-xs" \r\n                      ng-class="{\'tm1-ui-transparent\': !(node.prereqRules.length > 0)}" \r\n                      ng-click="node.prereqRulesIsExpanded = !node.prereqRulesIsExpanded;">\r\n                      <i class="fa fa-fw" ng-class="node.prereqRulesIsExpanded ? \'fa-search-minus\' : \'fa-search-plus\'"></i>\r\n                    </button>\r\n                  </td>\r\n                  <td style="padding-left: 10px;">\r\n                    <span ng-bind-html="node.rule"></span>\r\n                  </td>\r\n                </tr>\r\n              </tbody>\r\n            </table>\r\n            \r\n            <p />\r\n\r\n            <ul ng-if="node.children.length > 0 && node.expanded">\r\n              <li ng-repeat="node in node.children" ng-include="\'trace-tree-node__.html\'"></li>\r\n            </ul><\/script><div style="height: 400px; overflow-y: auto"><ul><li ng-repeat="node in lists.tableData" ng-include="\'trace-tree-node__.html\'"></li></ul></div></div></div><div class="row" ng-if="values.displayMode == constants.MODE_CHART1"><div class="col-md-12"><nvd3 ng-if="showGraph" options="options" data="data" api="api" class="with-3d-shadow with-transitions"></nvd3><table ng-if="showTable" class="table table-condensed"><thead><tr><th translate="VALUE"></th><th translate="TYPE"></th><th translate="REFERENCE"></th><th translate="RULES"></th></tr></thead><tbody><tr ng-repeat="statement in values.calculationComponents.Statements track by $index"><td ng-if="$first" rowspan="{{values.tableRowSpan}}">{{values.calculationComponents.Value}}</td><td ng-if="$first" rowspan="{{values.tableRowSpan}}">{{values.calculationComponents.Type}}</td><td ng-if="$first" rowspan="{{values.tableRowSpan}}">{{values.calculationComponents.reference}}</td><td><div class="text-info">{{statement}}</div></td></tr></tbody></table></div></div></div>');b.put("assets/html/tm1-ui-dbr-cm-trace-feeder.html",'<div class="tm1-ui-dbr-cm-trace-calculation"><h4><span translate="FEEDERS"></span></h4><div class="row" ng-if="lists.fedCellDescriptorRows.length > 0"><div class="col-md-12"><div class="table-responsive" style="height: 400px"><table class="table table-bordered table-condensed"><tbody><tr ng-repeat="fedCellDescriptorRow in lists.fedCellDescriptorRows track by $index"><td ng-repeat="fedCellDescriptor in fedCellDescriptorRow track by $index" ng-class="fedCellDescriptor.Fed ? \'success\' : \'danger\'" title="{{fedCellDescriptor.reference}}"></td></tr></tbody></table></div></div></div><div class="row" ng-if="!(lists.fedCellDescriptorRows.length > 0)"><div class="col-md-12"><div class="alert alert-warning" role="alert" translate="CHECKFEEDERSMISSING"></div></div></div><div class="row" ng-if="!isConsolidated"><div class="col-md-12"><table class="table table-condensed table-bordered"><thead><tr class="active"><th translate="REFERENCE"></th><th class="text-center" translate="STATUS"></th></tr></thead><tbody><tr ng-repeat="fedCell in lists.feederTrace.FedCells track by $index"><td>{{fedCell.reference}}</td><td ng-class="fedCell.Fed ? \'success\' : \'danger\'" class="text-center">{{fedCell.Fed ? \'Fed\' : \'Not Fed\'}}</td></tr><tr ng-if="lists.feederTrace.Statements.length > 0"><td colspan="2"><strong translate="RULES"></strong></td></tr><tr ng-repeat="statement in lists.feederTrace.Statements track by $index"><td colspan="2"><em>{{statement}}</em></td></tr></tbody></table></div></div></div>');b.put("assets/html/tm1-ui-dbr-date.html",'<span name="{{name}}" id="{{id}}" uib-tooltip="{{validationMessage}}" tooltip-placement="bottom" ng-class="{\'tm1-ui-dbr-context\':hasContext, \'input-group\':hasContext, \'tm1-has-comment\': hasComments()}" class="tm1-ui-dbr-date tm1-ui-dbr-common {{directiveClasses}}"><span ng-if="!errorMessage && !entry.isUpdateable" ng-class="{\'tm1-ui-dbr-note\':hasComments() }" ng-bind-html="entry.value" ng-click="showContext(1)"></span><form ng-if="!errorMessage && entry.isUpdateable && !isReadOnly" ng-class="{\'has-error\':validationMessage.length > 0}" ng-submit="updateData()"><input type="text" ng-attr-id="{{directiveID}}" ng-model="entry.value" ng-change="onChange()" ng-focus="checkDatePicker()" ng-blur="updateData()" ng-class="{\'form-control\':true, \'tm1-ui-dbr-datepicker\':isDateFormatted}" ng-value="entry.value" placeholder="{{emptyDisplay}}" ng-readonly="isDateFormatted" ng-click="showContext(3)"></form><span ng-if="hasContext" class="input-group-addon dropdown-toggle tm1-ui-dbr-context-button" ng-class="{\'tm1-ui-dbr-context-button-readonly\':clickID == 1}" ng-style="!errorMessage && !entry.isUpdateable && {\'display\':\'inline\'}" data-toggle="dropdown"><i class="fa fa-ellipsis-v"></i></span><ul ng-if="hasContext" class="dropdown-menu dropdown-menu-right tm1-ui-dbr-context-menu"><li ng-if="!hideReference"><a ng-click="showReference()">Reference</a></li><li ng-if="!hideReference" role="separator" class="divider"></li><li ng-if="!hideSpread && isConsolidated && isNumeric"><a ng-click="showSpread()">Spread</a></li><li ng-if="!hideDrill && hasDrillThrough"><a ng-click="showDrill()">Drill</a></li><li ng-if="!hideComment"><a ng-click="showComment()">Comment</a></li></ul><span ng-if="errorMessage" class="alert alert-danger" role="alert" uib-tooltip="{{errorMessage}}" tooltip-placement="right">{{entry.value}}</span></span>');b.put("assets/html/tm1-ui-dbr-tpl-context-popup-body.html",'<div><div class="row" ng-if="!hideReference"><div class="col-md-12"><a id="context-reference" class="btn btn-default btn-block" ng-click="showReference()" translate="REFERENCE"></a></div></div><div class="row" ng-if="!hideSpread && isConsolidated && isNumeric"><div class="col-md-12"><a id="context-spread" class="btn btn-default btn-block" ng-click="showSpread()" translate="SPREAD"></a></div></div><div class="row" ng-if="!hideDrill && hasDrillThrough"><div class="col-md-12"><a id="context-drill" class="btn btn-default btn-block" ng-click="showDrill()" translate="DRILL"></a></div></div><div class="row" ng-if="!hideComment"><div class="col-md-12"><a id="context-comment" class="btn btn-default btn-block" ng-click="showComment()" translate="COMMENT"></a></div></div><div class="row" ng-if="!hideTraceCalculation"><div class="col-md-12"><a id="context-trace-calculation" class="btn btn-default btn-block" ng-click="showTraceCalculation()" translate="CALCULATIONS"></a></div></div><div class="row" ng-if="customContextMenus.length > 0" ng-repeat="customMenu in customContextMenus"><div class="col-md-12"><a ng-click="executeCustomMenu(customMenu.display)" class="btn btn-default btn-block" ng-attr-id="{{customMenu.contextID}}">{{customMenu.display}}</a></div></div></div>');b.put("assets/html/tm1-ui-dbr-tpl-context-popup-button.html",'<span class="input-group-addon tm1-ui-dbr-context-button" ng-class="{\'tm1-ui-dbr-context-button-readonly\':clickID == 1}" ng-style="!errorMessage && !entry.isUpdateable && !isMultiLine && {\'display\':\'inline\'}" ng-click="showContextMenus()"><i class="fa fa-ellipsis-v"></i></span>');b.put("assets/html/tm1-ui-dbr-tpl-context.html",'<span class="input-group-addon dropdown-toggle tm1-ui-dbr-context-button" ng-class="{\'tm1-ui-dbr-context-button-readonly\':clickID == 1}" ng-style="!errorMessage && !entry.isUpdateable && !isMultiLine && {\'display\':\'inline\'}" data-toggle="dropdown"><i class="fa fa-ellipsis-v"></i></span><ul class="dropdown-menu dropdown-menu-right tm1-ui-dbr-context-menu"><li ng-if="!hideReference"><a id="context-reference" ng-click="showReference()" translate="REFERENCE"></a></li><li ng-if="!hideReference" role="separator" class="divider"></li><li ng-if="!hideSpread && isConsolidated && isNumeric"><a id="context-spread" ng-click="showSpread()" translate="SPREAD"></a></li><li ng-if="!hideDrill && hasDrillThrough"><a id="context-drill" ng-click="showDrill()" translate="DRILL"></a></li><li ng-if="!hideComment"><a id="context-comment" ng-click="showComment()" translate="COMMENT"></a></li><li ng-if="!hideTraceCalculation"><a id="context-trace-calculation" ng-click="showTraceCalculation()" translate="CALCULATIONS"></a></li><li ng-if="customContextMenus.length > 0" ng-repeat="customMenu in customContextMenus"><a ng-click="executeCustomMenu(customMenu.display)" ng-attr-id="{{customMenu.contextID}}">{{customMenu.display}}</a></li></ul>');b.put("assets/html/tm1-ui-dbr-tpl-error.html",'<span class="alert alert-danger" role="alert" uib-tooltip="{{errorMessage}}" tooltip-placement="right">{{entry.value}}</span>');b.put("assets/html/tm1-ui-dbr-tpl-image.html",'<img class="img-rounded" alt="{{::imageAlt}}">');b.put("assets/html/tm1-ui-dbr-tpl-input-html.html",'<div ng-click="activateTextAngular()" class="tm1-ui-dbr-readonly-div-ta" ng-class="{\'tm1-ui-dbr-rtf\':!editMode}" ng-show="!editMode" ng-bind-html="entry.value" data-text="{{emptyDisplay}}" ng-click="showContext(5)"></div><text-angular name="{{::\'ta-\' + directiveID}}" ng-if="!errorMessage && formatHtml && !entry.isList && entry.isUpdateable && !isReadOnly" ng-submit="updateData()" ng-blur="updateData()" ng-show="editMode" ta-toolbar="taToolbarButtons" class="tm1-ui-dbr-html-editor" ta-disabled="!editMode" ng-model="entry.value"></text-angular><button ng-if="editMode && formatHtmlButtonEnabled" class="{{formatHtmlButtonClass}}">{{formatHtmlButtonText}}</button><div class="modal fade" ng-attr-id="tm1-ui-dbr-popup-{{::directiveID}}" tabindex="-1" role="dialog" ng-if="formatHtmlPopup"><div class="modal-dialog modal-lg" role="document"><div class="modal-content"><div class="modal-body"><text-angular ta-toolbar="taToolbarButtons" class="tm1-ui-dbr-html-editor" ng-model="entry.valueText"></text-angular></div><div class="modal-footer"><button type="button" class="btn btn-default" data-dismiss="modal">Cancel</button> <button type="button" class="btn btn-primary" ng-click="saveValue()">Save</button></div></div></div></div>');b.put("assets/html/tm1-ui-dbr-tpl-input-multiline.html",'<form ng-submit="updateData()"><textarea ng-model="entry.value" class="form-control input-no-borders dbr-multiline-input" rows="{{::multiLine}}" ng-blur="updateData()" ng-keydown="onKeyDown($event)" ng-paste="paste($event)" ng-click="showContext(4)"></textarea></form>');b.put("assets/html/tm1-ui-dbr-tpl-input-radio.html",'<div ng-class="picklistRadioClasses" ng-repeat="item in entry.picklist"><label><input type="radio" name="{{directiveID}}" ng-model="entry.value" ng-change="updateData()" ng-value="item" ng-click="showContext(8)">{{item}}</label></div>');b.put("assets/html/tm1-ui-dbr-tpl-input-simple.html",'<form class="tm1-ui-dbr-form-simple" ng-submit="updateData()"><input type="text" ng-attr-id="{{::directiveID}}" ng-model="entry.value" ng-change="onChange()" ng-keydown="onKeyDown($event)" ng-focus="onInputFocus()" ng-blur="onInputBlur()" ng-paste="paste($event)" class="form-control tm1-ui-dbr-input-simple" ng-click="showContext(3)"></form>');b.put("assets/html/tm1-ui-dbr-tpl-multiline.html",'<form ng-submit="updateData()"><textarea class="form-control input-no-borders dbr-multiline-disabled" rows="{{::multiLine}}" disabled ng-click="showContext(2)"></textarea></form>');b.put("assets/html/tm1-ui-dbr-tpl-readonly.html",'<span class="tm1-ui-dbr-readonly-span" ng-click="showContext(1)"></span>');b.put("assets/html/tm1-ui-dbr-tpl-root.html",'<span data-placement="bottom" data-toggle="tooltip"></span>');b.put("assets/html/tm1-ui-dbra.html",'<span uib-tooltip="{{validationMessage}}" tooltip-placement="bottom" ng-class="{\'tm1-ui-dbra-context\':hasContext, \'input-group\':hasContext}" class="tm1-ui-dbra"><form ng-submit="updateData()" ng-if="!isReadOnly" ng-class="{\'has-error\':validationMessage.length > 0}"><input ng-blur="updateData()" ng-model="entry.value" type="text" ng-if="!isReadOnly" class="form-control" ng-value="entry.value" placeholder="{{emptyDisplay}}" ng-click="showContext(1)"></form><span ng-if="isReadOnly" ng-bind-html="getReadonlyData(entry.value)" ng-click="showContext(2)"></span><span ng-if="hasContext" class="input-group-addon dropdown-toggle tm1-ui-dbra-context-button" ng-style="isReadOnly && {\'display\':\'inline\'}" ng-class="{\'tm1-ui-dbra-context-button-readonly\':isReadOnly}" data-toggle="dropdown"><i class="fa fa-ellipsis-v"></i></span><ul ng-if="hasContext" class="dropdown-menu dropdown-menu-right tm1-ui-dbra-context-menu"><li ng-if="!hideReference"><a ng-click="showReference()">Reference</a></li></ul></span>');b.put("assets/html/tm1-ui-element-list-item.html",'<span class="tm1-ui-element-list-item" ng-class="directiveClasses"><span></span> <span ng-if="indent" class="tm1-ui-indent" ng-repeat="item in indentArray track by $index"></span> <i class="fa" ng-class="{\'tm1-ui-element-consol-icon\': !isLeaf, \'tm1-ui-element-leaf-icon\': isLeaf}"></i> <span ng-bind-html="itemDisplay"></span></span>');b.put("assets/html/tm1-ui-export.html",'<div class="tm1-ui-export {{directiveClasses}}"><a ng-click="exportTable(\'excel\');">Excel</a>&nbsp;|&nbsp;<a ng-click="exportTable(\'csv\');">CSV</a></div>');b.put("assets/html/tm1-ui-log.html",'<table ng-class="tableClass"><thead><tr><th translate="ACTIONS"></th><th colspan="4"><a ng-click="clearLogs()">{{\'CLEAR\' | translate}} <i class="fa fa-eraser"></i></a></th></tr><tr><th translate="TIME"></th><th translate="DIRECTIVE"></th><th translate="ID"></th><th translate="MESSAGE"></th><th translate="OBJECT"></th></tr></thead><tbody><tr ng-repeat="log in logs"><td>{{log.time}}</td><td>{{log.name}}</td><td>{{log.id}}</td><td>{{log.message}}</td><td>{{log.object}}</td></tr></tbody></table>');b.put("assets/html/tm1-ui-login.html",'<div class="tm1-ui-login {{directiveClasses}}"><div class="panel panel-default"><div class="panel-heading"><h3 class="panel-title" ng-show="instances.length == 1">{{\'SIGNIN\' | translate}}<span ng-if="useOIDCROPGLogin" translate="LOGINWITHOPENID"></span></h3><h3 class="panel-title" ng-show="instances.length != 1">{{\'MESSAGESIGNTOINSTANCE\' | translate}}:<select name="login1" ng-model="login.instance" ng-change="checkCam()" ng-options="env.name as env.name for env in instances"></select></h3></div><div class="panel-body"><form role="form" method="post" ng-show="!(useCAMwithSSO || useWindowsAuthentication)"><fieldset ng-hide="nativeTM1AuthenticationIsNotAvailable"><div class="form-group" ng-show="useCAM"><select ng-disabled="!loginEnabled" name="cams" class="form-control" ng-model="credentials.cam" ng-options="cam for cam in camNamespaces"></select></div><div ng-class="[\'form-group\', {\'has-error\':errorMessage.length > 0}]"><input id="tm1-login-user" class="form-control" ng-disabled="!loginEnabled" placeholder="{{\'USERNAME\' | translate}}" type="text" autofocus ng-model="credentials.userName" ng-change="onUpdate()"></div><div ng-class="[\'form-group\', {\'has-error\':errorMessage.length > 0}]"><input id="tm1-login-pass" class="form-control" ng-disabled="!loginEnabled" placeholder="{{\'PASSWORD\' | translate}}" type="password" ng-model="credentials.password" aria-describedby="errorMessageBlock" ng-change="onUpdate()"> <span ng-if="errorMessage.length > 0" id="errorMessageBlock" class="help-block">{{errorMessage}}</span></div><button id="tm1-login-button" ng-click="login()" ng-disabled="!login.instance.length > 0" class="btn btn-lg btn-block {{loginButtonClass}}" ng-class="{\'disabled\':!loginEnabled}">{{loginButtonText}}</button></fieldset><div ng-show="nativeTM1AuthenticationIsNotAvailable"><div ng-if="!authMethods.Basic" class="alert alert-warning" role="alert"><p class="text-center">{{\'MESSAGEUNSUCCESSFULBASICAUTHENTICATION\' | translate}}</p></div><div ng-if="authMethods.WindowsIntegrated" class="alert alert-warning" role="alert"><p class="text-center">{{\'MESSAGEUNSUCCESSFULWINDOWSAUTHENTICATION\' | translate}}</p></div></div></form></div><div class="panel-body" ng-show="useCAMwithSSO || useWindowsAuthentication"><div class="alert alert-warning" role="alert"><p class="text-center">{{\'MESSAGEWAIT\' | translate}} <i class="fa fa-cog fa-spin"></i></p></div></div><div class="panel-body" ng-show="useOIDCAuthentication"><div class="alert alert-warning" role="alert"><p class="text-center">{{\'OIDCMESSAGEWAIT\' | translate}} <i class="fa fa-cog fa-spin"></i></p></div></div></div></div>');b.put("assets/html/tm1-ui-process.html",'<div class="tm1-ui-process"><button ng-if="!showDialog" type="button" class="btn btn-lg btn-block btn-primary tm1-ui-process-button {{buttonClasses}}" ng-class="silentModeClasses" ng-disabled="isDisabled" ng-click="runProcessDirect()">{{displayName}}<i ng-if="processStatus == PROCESS_RUNNING" class="fa fa-cog fa-spin"></i></button> <button ng-if="showDialog" type="button" class="btn btn-primary btn-lg btn-block tm1-ui-process-button {{buttonClasses}}" ng-disabled="isDisabled" data-toggle="modal" data-target="#{{directiveID}}" ng-click="prepareProcessInfo()">{{displayName}}</button><div ng-if="showDialog" class="modal fade" ng-attr-id="{{directiveID}}" tabindex="-1" role="dialog" aria-labelledby="processLabel"><div class="modal-dialog" role="document"><div class="modal-content"><div class="modal-header"><button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">&times;</span></button><h4 class="modal-title" ng-if="isExistingProcess" id="processLabel">{{\'MESSAGEXECUTEPROCESS\' | translate}} <strong>{{process.name}}</strong></h4><h4 class="modal-title" ng-if="!isExistingProcess" id="processLabel">{{\'CHECK\' | translate}} <strong>{{process.name}}</strong></h4></div><div class="modal-body" ng-if="isExistingProcess && process.parameters.length > 0"><table class="table table-hover"><thead><tr><th translate="NAME"></th><th translate="VALUE"></th></tr></thead><tbody><tr ng-repeat="processParam in parameters.Parameters" ng-class="{\'danger\':processParam.hasError}"><td>{{processParam.Name}}</td><td><div ng-class="[\'form-group\', {\'has-error\':processParam.hasError}]"><input type="text" class="form-control" ng-model="processParam.Value"></div></td></tr></tbody></table></div><div class="modal-body" ng-if="isExistingProcess && process.parameters.length == 0" translate="MESSAGENOPARAMETERS"></div><div class="modal-body" ng-if="!isExistingProcess"><div class="alert alert-danger" role="alert" translate="MESSAGEPROCESSNOTVALID"></div></div><div class="modal-footer"><span ng-show="processStatus == PROCESS_RUNNING" class="alert alert-info pull-left tm1-ui-process-modal-on-running" role="alert">{{messageRunning}}<i class="fa fa-cog fa-spin"></i></span> <span ng-show="processStatus == COMPLETED_SUCCESSFULLY" class="alert alert-success pull-left tm1-ui-process-modal-on-success" role="alert">{{messageSuccess}}</span> <span ng-show="processStatus == COMPLETED_WITH_ERRORS" class="alert alert-danger pull-left tm1-ui-process-modal-on-error" role="alert">{{messageError}}</span> <span ng-show="processStatus == REVALUATED_PARAMS_HAS_ERROR" class="alert alert-danger pull-left tm1-ui-process-modal-on-param-error" role="alert">{{messageParamError}}</span> <button ng-if="isExistingProcess" type="button" class="btn btn-primary tm1-ui-process-button {{buttonClasses}}" ng-class="{\'disabled\':!(processStatus == READY_FOR_RUN || processStatus == NO_ACTION)}" ng-click="runProcess()" translate="RUN"></button> <button type="button" ng-class="{\'btn btn-default tm1-ui-process-cancel-button\':true, \'disabled\':!(processStatus == READY_FOR_RUN || processStatus == NO_ACTION)}" data-dismiss="modal" translate="CANCEL"></button></div></div></div></div></div>');b.put("assets/html/tm1-ui-progress.html",'<span class="tm1-ui-progress {{directiveClasses}}"><div ng-transclude="tm1UiProgressPending" ng-show="!isReady"><i class="fa fa-cog fa-2x fa-spin fa-fw"></i></div><div ng-transclude="tm1UiProgressReady" ng-show="isReady"></div></span>');b.put("assets/html/tm1-ui-repeat.html","<span></span>");b.put("assets/html/tm1-ui-rpt-data.html",'<div><div ng-class="{\'{{bootstrapColumn}}\':true}" ng-repeat="cubeElementColumn in cubeElements"><span ng-repeat="cubeElement in cubeElementColumn"><tm1-ui-dbr tm1-instance="{{instance}}" tm1-cube="{{cube}}" tm1-elements="{{cubeElement}}" tm1-data-decimal="{{dataDecimal}}"></tm1-ui-dbr></span></div><div ng-class="{\'{{bootstrapExcessColumn}}\':true}" ng-if="bootstrapExcessSpace > 0">&nbsp;</div></div>');b.put("assets/html/tm1-ui-rpt-row-cell.html",'<span class="tm1-ui-rpt-row-cell {{directiveClasses}}"></span>');b.put("assets/html/tm1-ui-rpt-row-header.html",'<span class="tm1-ui-rpt-row-header {{directiveClasses}}"><span ng-if="!hasTranscludedContent">{{titles}}</span><ng-transclude ng-if="hasTranscludedContent"></ng-transclude></span>');b.put("assets/html/tm1-ui-rpt-row-label.html",'<div class="tm1-ui-rpt-row-label {{directiveClasses}}"><span class="tm1-ui-indent" ng-repeat="item in indent() track by $index"></span> <i ng-if="tm1RowData[tm1Dimension].element.children.length > 0" class="fa tm1-ui-rpt-row-label-icon" ng-class="{\'fa-caret-right\':tm1RowData[tm1Dimension].element.collapsed, \'fa-caret-down\':!tm1RowData[tm1Dimension].element.collapsed}" ng-click="expandOrCollapse(tm1RowData);"></i> <i ng-if="!tm1RowData[tm1Dimension].element.children" class="fa fa-angle-right"></i> <span class="tm1-ui-rpt-row-label-text">{{tm1RowData[tm1Dimension].alias}}</span></div>');b.put("assets/html/tm1-ui-rpt-view.html",'<div class="tm1-ui-rpt-view {{directiveClasses}}" id="{{::id}}"><div ng-transclude="tm1UiRptConfig" ng-if="cubeIsReady"></div><div ng-transclude="tm1UiRptTemplate" ng-if="cubeIsReady"></div><div ng-if="showMessage && message.length > 0" class="alert alert-warning text-center" role="alert">{{message}}</div></div>');b.put("assets/html/tm1-ui-select.html",'<div class="tm1-ui-select"><form><div class="input-group"><input type="text" class="form-control" ng-model="value" ng-click="onCaret()" ng-change="textChange()"><div class="input-group-addon" ng-click="onCaret()"><i class="fa fa-caret-down"></i></div></div></form><div ng-show="showDropdown" style="position: absolute; z-index: 100" class="tm1-select-plain-style"><ul></ul></div></div>');b.put("assets/html/tm1-ui-session.html",'<div class="tm1-ui-session {{directiveClasses}}"><a ng-click="showSessions()"><i class="fa fa-lg fa-users"></i></a><script type="text/ng-template" id="session-management"><div>\r\n		<table class="table table-hover">\r\n			<thead>\r\n				<tr>\r\n					<th translate="USER"></th>\r\n					<th translate="INSTANCE"></th>\r\n					<th translate="STATUS"></th>\r\n					<th translate="ACTION"></th>\r\n				</tr>\r\n			</thead>\r\n			<tbody>\r\n				<tr ng-repeat="session in sessions">\r\n					<td>{{session.user}}</td>\r\n					<td>{{session.name}}</td>\r\n					<td ng-if="session.active" translate="ACTIVE"></td>\r\n          <td ng-if="!session.active" translate="INACTIVE"></td>\r\n					<td><span ng-show="session.active"><a ng-click="logout(session.name)" translate="LOGOUT"></a></span></td>\r\n				</tr>\r\n			</tbody>\r\n\r\n      <tbody ng-if="sessionError">\r\n        <tr class="danger">\r\n          <td colspan="4" class="text-center">{{sessionErrorInfo}}</td>\r\n        </tr>\r\n      </tbody>\r\n		</table>\r\n	</div><\/script></div>');b.put("assets/html/tm1-ui-store.html",'<div><span ng-if="isReady" class="alert alert-success" role="alert" translate="READY"></span> <span ng-if="!isReady" class="alert alert-warning" role="alert">{{message}}</span></div>');b.put("assets/html/tm1-ui-subnm-tpl-hierarchy-flat.html",'<div ng-show="showDropdown" style="position: absolute; z-index: 100" class="tm1-subnm-plain-style"><ul></ul></div>');b.put("assets/html/tm1-ui-subnm-tpl-hierarchy-full.html",'<div ng-show="showDropdown" style="position: absolute; z-index: 100" class="tm1-subnm-hierarchy-style"><script type="text/ng-template" id="tree-node__.html"><span ng-show="node.show">\r\n        <i ng-if="node.Components.length" class="fa" ng-class="{\'fa-caret-down\': !node.collapse, \'fa-caret-right\': node.collapse}" ng-click="toggle(node);$event.stopPropagation()"></i>\r\n        <i ng-if="!node.Components.length" class="fa fa-angle-right"></i>\r\n        <span ng-click="selectNode(node)" class="subnm-node">{{getDisplay(node)}}</span>\r\n      </span>\r\n      <ul ng-if="!node.collapse">\r\n        <li ng-repeat="node in node.Components" ng-include="\'tree-node__.html\'"></li>\r\n      </ul>\r\n      <ul ng-if="node.collapse"></ul><\/script><ul><li ng-repeat="node in elements" ng-include="\'tree-node__.html\'"></li></ul></div>');b.put("assets/html/tm1-ui-subnm-tpl-input.html",'<form><div class="input-group"><input ng-class="selectClasses" type="text" ng-model="input.text" ng-change="textChange()" ng-focus="onFocus()"><div class="input-group-addon" ng-click="onCaret()"><i ng-class="{\'fa fa-caret-down\':!showDropdown, \'fa fa-caret-up\':showDropdown && !requestingData, \'fa fa-spinner\':requestingData}"></i></div></div></form>');b.put("assets/html/tm1-ui-subnm-tpl-radio.html",'<div ng-class="selectClasses" ng-repeat="element in elements"><label><input type="radio" name="{{directiveID}}" ng-value="element" ng-model="entry.radio" ng-change="onSelectionChange(entry.radio)">{{tm1UiSubnmCtrl.getDisplay(element, tm1Attribute)}}</label></div>');b.put("assets/html/tm1-ui-subnm-tpl-select.html",'<select ng-class="selectClasses" ng-model="selectedElement" ng-change="onSelectionChange(selectedElement)" ng-options="element as tm1UiSubnmCtrl.getDisplay(element, tm1Attribute) for element in elements"></select>');b.put("assets/html/tm1-ui-subset-editor-mdx-definition.html",'<div><pre ui-ace="{ onLoad : editorLoaded, onChange: editorChanged }" style="height: 250px"></pre></div>');b.put("assets/html/tm1-ui-subset-editor-save-dialog.html",'<div><div class="form-group" ng-class="{\'has-error\':!isValidSubset}"><label translate="NAME"></label><input type="text" class="form-control" placeholder="Name" ng-model="subsetName" ng-change="validateSubsetName(subsetName)" ng-model-options="{debounce: 500}"> <span class="help-block">{{subsetValidationMessage}}</span></div><div class="checkbox" ng-if="false"><label><input type="checkbox" ng-model="isPrivateSubset">{{\'PRIVATE\' | translate}}</label></div></div>');b.put("assets/html/tm1-ui-subset-editor.html",'<div class="tm1-ui-subset-editor {{directiveClasses}}"><div class="btn-toolbar"><div class="input-group tm1-se-btn-subset" style="width: 200px; min-width: 150px"><select class="form-control" ng-model="selections.subsetName" ng-change="onSubsetChange(selections.subsetName)" style="min-width: 150px" title="{{\'SUBSET\' | translate}}"><option ng-repeat="item in lists.subsets track by item.Name">{{item.Name}}</option></select><span class="input-group-btn"><button class="btn btn-primary" title="{{\'SAVE\' | translate}}" ng-hide="directiveOptions.hideSaveButton" ng-disabled="!values.subsetObj.HasChanged || values.subsetObj.Name == constants.NO_SUBSET || values.subsetObj.Name == constants.ADHOC_SUBSET" ng-click="onSaveSubset(selections.subsetName)"><i class="fa fa-fw fa-save"></i></button> <button class="btn btn-info" title="{{\'SAVEAS\' | translate}}" ng-click="onSaveSubsetAs(selections.subsetName)"><i class="fa fa-fw fa-clone"></i></button> <button class="btn btn-danger" title="{{\'DELETE\' | translate}}" ng-disabled="values.subsetObj.Name == constants.NO_SUBSET || values.subsetObj.Name == constants.ADHOC_SUBSET" ng-click="onDeleteSubset(selections.subsetName)"><i class="fa fa-fw fa-trash"></i></button></span></div><div class="btn-group"><div class="btn-group" uib-dropdown dropdown-append-to-body="true"><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'FILTERBYLEVEL\' | translate}}" ng-disabled="!selections.selectedElementsCopy.length"><span>{{selections.selectedElementsCopy.length}}</span> <span class="caret"></span></button><ul class="dropdown-menu li-right-padded" uib-dropdown-menu role="menu" style="z-index: 10000"><li><button class="btn btn-link btn-sm no-underline" ng-click="checkedRemoveAll()" style="width: 100%"><i class="fa fa-check-square-o text-danger"></i> <span class="text-danger" translate="REMOVEALL"></span></button></li><li role="menuitem" ng-repeat="item in selections.selectedElementsCopy track by item.UniqueName"><span><a ng-click="checkedRemove(item, $index, $event)"><i class="fa fa-check-square-o text-danger"></i></a> <a ng-click="checkedUp(item, $index, $event)"><i class="fa fa-chevron-circle-up"></i></a> <a ng-click="checkedDown(item, $index, $event)"><i class="fa fa-chevron-circle-down"></i></a> <span>{{item.alias}}</span></span></li></ul></div><button class="btn btn-success" title="{{\'KEEP\' | translate}}" ng-disabled="!selections.selectedElements.length" ng-click="keepElementsOnList()"><i class="fa fa-fw fa-check-square-o"></i></button> <button class="btn btn-danger" title="{{\'REMOVE\' | translate}}" ng-disabled="!selections.selectedElements.length" ng-click="deleteElementsOnList()"><i class="fa fa-fw fa-remove"></i></button></div><div class="btn-group tm1-se-btn-filter"><button class="btn btn-default" title="{{\'ALL\' | translate}}" ng-click="expandAll()"><strong>&forall;</strong></button> <button class="btn btn-default" title="{{\'EXPANDALLELEMENTS\' | translate}}" ng-click="expandSelectedElementOnList()" ng-disabled="!selections.selectedElements.length"><i class="fa fa-fw fa-plus-square-o"></i> <span ng-if="selections.selectedElements.length">{{selections.selectedElements.length}}</span></button><div class="btn-group" uib-dropdown dropdown-append-to-body="true"><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'FILTERBYLEVEL\' | translate}}"><i class="fa fa-list-ol"></i> <span class="caret"></span></button><ul class="dropdown-menu li-right-padded" uib-dropdown-menu role="menu" style="z-index: 10000"><li role="menuitem" style="cursor: pointer" ng-click="onFilterLevelClick($event, item)" ng-repeat="item in lists.levels track by item" style="padding-right: 15px"><i class="fa fa-fw fa-square-o" ng-if="!selections.levelFilter[item]"></i> <i class="fa fa-fw fa-check-square-o" ng-if="selections.levelFilter[item]"></i> {{item}}</li><li><button class="btn btn-default btn-sm btn-block" ng-click="onFilterLevelApply()" translate="FILTER"></button></li></ul></div><div class="btn-group" uib-dropdown><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'FILTERBYATTRIBUTE\' | translate}}"><i class="fa fa-filter"></i> <span class="caret"></span></button><ul class="dropdown-menu li-left-padded li-right-padded" uib-dropdown-menu role="menu" style="z-index: 10000"><li><span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.filterType" value="attribute"><span class="ml-1 mr-2" translate="ATTRIBUTE"></span></span> <span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.filterType" value="custom"><span class="ml-1 mr-2" translate="CUSTOM"></span></span></li><li role="menuitem" style="cursor: pointer" ng-if="selections.filterType === \'attribute\'"><select type="text" class="form-control form-control-sm" ng-model="selections.filterAttribute" ng-click="$event.stopPropagation()"><option ng-repeat="item in lists.dimensionAttributes track by item.Name">{{item.Name}}</option></select></li><li role="menuitem" style="cursor: pointer"><input type="text" class="form-control form-control-sm" ng-model="selections.filterText" ng-click="$event.stopPropagation()" ng-keyup="$event.keyCode == 13 && filterApply()"></li><li><button class="btn btn-default btn-sm btn-block" ng-disabled="!selections.filterText.length || (selections.filterType === \'attribute\' && !selections.filterAttribute.length)" ng-click="filterApply()"><span translate="FILTER"></span></button></li></ul></div><div class="btn-group" uib-dropdown><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'FILTERBYWILDCARD\' | translate}}"><i class="fa fa-asterisk"></i> <span class="caret"></span></button><ul class="dropdown-menu li-left-padded li-right-padded" uib-dropdown-menu role="menu" style="z-index: 10000"><li role="menuitem" style="cursor: pointer"><input type="text" class="form-control form-control-sm" ng-model="selections.wildcardFilter" ng-click="$event.stopPropagation()" ng-keyup="$event.keyCode == 13 && filterWildcardApply()"></li><li><span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.filterWildcardType" value="contains"><span class="ml-1 mr-2" translate="CONTAINS"></span></span> <span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.filterWildcardType" value="wildcard"><span class="ml-1 mr-2" translate="WILDCARD"></span></span></li><li><button class="btn btn-default btn-sm" ng-disabled="!selections.wildcardFilter.length" ng-click="filterWildcardApply()" style="width: 100%"><span translate="FILTER"></span></button></li></ul></div></div><div class="btn-group tm1-se-btn-sort"><button class="btn btn-default" title="{{\'SORTHIERARCHY\' | translate}}" ng-click="sortHierarchy()"><i class="fa fa-fw fa-sort-amount-asc"></i></button><div class="btn-group" uib-dropdown dropdown-append-to-body="true"><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'SORT\' | translate}}"><i class="fa fa-sort-alpha-asc"></i> <span class="caret"></span></button><ul class="dropdown-menu li-right-padded" uib-dropdown-menu role="menu" style="max-height: 300px; z-index: 10000"><li role="menuitem" ng-click="$event.stopPropagation()"><span><input type="radio" ng-model="selections.sortBy" value="name"><span class="ml-2" translate="SORTBYNAME"></span></span></li><li role="menuitem" ng-click="$event.stopPropagation()"><span><input type="radio" ng-model="selections.sortBy" value="attribute"><span class="ml-2" translate="SORTBYATTRIBUTE"></span></span></li><li role="menuitem" ng-click="$event.stopPropagation()"><span><input type="radio" ng-model="selections.sortBy" value="index"><span class="ml-2" translate="SORTBYINDEX"></span></span></li><li ng-if="selections.sortBy === \'attribute\'"><select type="text" class="form-control form-control-sm" ng-model="selections.sortAttribute" ng-click="$event.stopPropagation()"><option ng-repeat="item in lists.dimensionAttributes track by item.Name">{{item.Name}}</option></select></li><li ng-if="selections.sortBy !== \'index\'"><span><input type="checkbox" ng-model="selections.sortWithinHierarchy" ng-click="$event.stopPropagation()"> <span class="ml-1 mr-2" translate="SORTWITHHIERARCHY"></span></span></li><li><span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.sortOrder" value="ASC"><span class="ml-1 mr-2" translate="SORTASC"></span></span> <span ng-click="$event.stopPropagation()"><input type="radio" ng-model="selections.sortOrder" value="DESC"><span class="ml-1 mr-2" translate="SORTDESC"></span></span></li><li><button class="btn btn-default btn-sm" ng-disabled="selections.sortBy == \'attribute\' && !selections.sortAttribute.length" ng-click="sortApply()" style="width: 100%"><span translate="SORT"></span></button></li></ul></div></div></div><div class="btn-toolbar"><div class="input-group tm1-se-btn-alias" style="width: 200px; min-width: 150px"><select ng-model="values.subsetObj.Alias" ng-change="onAliasSelection(values.subsetObj.Alias, {forceChange: true})" class="form-control" style="min-width: 150px" title="{{\'ALIAS\' | translate}}"><option ng-repeat="item in lists.dimensionAliases track by item.Name">{{item.Name}}</option></select><span class="input-group-btn"><button class="btn btn-default" ng-disabled="!values.subsetObj.Alias" ng-click="onAliasRemove();" title="{{\'REMOVE\' | translate}} {{\'ALIAS\' | translate}}"><i class="fa fa-remove text-danger"></i></button></span></div><div class="input-group tm1-se-btn-search" style="width: 150px"><input type="text" class="form-control" ng-change="onSearch(selections.search)" ng-model-options="{debounce: 500}" ng-model="selections.search" style="width: 150px" placeholder="{{\'SEARCH\' | translate}}"> <span class="input-group-btn"><button class="btn btn-default" ng-disabled="!selections.search.length" ng-click="selections.search = \'\'; onSearch(selections.search);"><i class="fa fa-remove text-danger"></i></button></span></div><div class="btn-group"><div class="btn-group tm1-se-btn-attribute-toggle" uib-dropdown dropdown-append-to-body="true"><button type="button" class="btn btn-default" uib-dropdown-toggle title="{{\'TOGGLEATTRIBUTES\' | translate}}"><i class="fa fa-columns"></i> <span class="caret"></span></button><ul class="dropdown-menu li-right-padded" uib-dropdown-menu role="menu" style="z-index: 10000"><li role="menuitem" style="cursor: pointer" ng-click="onToggleAttributesColumns($event, item.Name)" ng-repeat="item in lists.dimensionAttributes track by item.Name"><i class="fa fa-fw fa-square-o" ng-if="!selections.attributes[item.Name]"></i> <i class="fa fa-fw fa-check-square-o" ng-if="selections.attributes[item.Name]"></i> {{item.Name}}</li></ul></div><button class="btn btn-default tm1-se-btn-mdx" title="{{\'MDX\' | translate}}" ng-click="onShowMDXDefinition()"><i class="fa fa-fw fa-code"></i></button> <button class="btn btn-default tm1-se-btn-refresh" title="{{\'REFRESH\' | translate}}" ng-click="resetDirectiveDebounced({subsetNameToSet: selections.subsetName})"><i class="fa fa-fw fa-refresh" ng-class="{\'fa-spin\': refreshing}"></i></button></div><div class="btn-group ml-2"><button class="btn btn-success" ng-if="saved"><span translate="SAVED"></span></button> <button class="btn btn-warning" ng-if="message"><i class="fa fa-warning" aria-hidden="true"></i> <span>{{message}}</span></button> <button ng-if="selections.filterByWildcardWarning" class="btn btn-warning" uib-tooltip="{{\'ELEMENTNAMEFILTEREDONLY\' | translate}}" tooltip-placement="bottom" tooltip-append-to-body="true"><i class="fa fa-warning"></i></button> <button ng-if="selections.elementLimitExceeded" class="btn btn-warning" uib-tooltip="{{selections.elementLimitExceeded}}" tooltip-placement="bottom" tooltip-append-to-body="true"><i class="fa fa-warning"></i></button></div></div><div class="row"><div class="col-md-12"><div ui-grid="gridOptions" ui-grid-resize-columns ui-grid-selection></div></div></div><div ng-if="debugView" class="row"><div class="col-md-12"><table class="table table-condensed table-bordered"><thead><tr><th>Property</th><th>Value</th></tr></thead><tbody><tr><td>Dimension</td><td>{{tm1Dimension}}</td></tr><tr><td>Hierarchy</td><td>{{values.hierarchy}}</td></tr><tr><td>Subset</td><td>{{values.subsetObj.Name}}<strong ng-if="values.subsetObj.HasChanged">*</strong></td></tr><tr><td>Alias</td><td>{{values.subsetObj.Alias}}</td></tr><tr><td>MDX</td><td>{{values.subsetObj.Expression}}</td></tr><tr><td>MDX Modified</td><td>{{values.subsetObj.ExpressionModified}}</td></tr></tbody></table></div></div></div>');b.put("assets/html/tm1-ui-system.html",'<div class="tm1-ui-system"><table class="table table-condensed"><thead><tr><th translate="PROPERTY"></th><th translate="VALUE"></th></tr></thead><tbody><tr ng-repeat="systemProperty in lists.systemProperties track by $index"><td>{{systemProperty.key}}</td><td>{{systemProperty.value}}</td></tr></tbody></table></div>');b.put("assets/html/tm1-ui-table-mdx.html",'<div class="tm1-ui-table-mdx {{directiveClasses}}"><div class="text-center" ng-if="loading"><i class="fa fa-spinner fa-pulse fa-3x fa-fw"></i> <span class="sr-only">Loading...</span></div><div ng-if="dataset" class="table-responsive"><table class="table table-striped" ng-if="!loading"><thead><tr ng-repeat="row in dataset.headers"><th ng-repeat="col in row.rows" ng-if="col.visible" colspan="{{col.colspan}}" rowspan="{{col.rowspan}}" class="text-center">{{col.dimension}}</th><th ng-repeat="col in row.columns" ng-if="col.visible" colspan="{{col.colspan}}" rowspan="{{col.rowspan}}" class="text-center">{{col.name}}</th></tr></thead><tbody><tr ng-repeat="row in table.data()"><th ng-repeat="el in row.elements" ng-if="el.visible || $parent.$index == 0" colspan="{{el.colspan}}" rowspan="{{el.rowspan}}">{{el.name}}</th><td ng-repeat="cell in row.cells" class="text-right"><input ng-if="cell.isNumeric && !cell.isReadOnly" type="text" class="form-control text-right" tm1-ui-format-number="0" ng-model="cell.value" ng-blur="cell.update(refreshData);"> <span ng-if="cell.isNumeric && cell.isReadOnly" style="padding-right: 10px">{{cell.value | formatNumber:0}}</span> <input ng-if="!cell.isNumeric && !cell.isReadOnly" type="text" class="form-control text-right" ng-model="cell.value" ng-blur="cell.update(refreshData);"> <span ng-if="!cell.isNumeric && cell.isReadOnly" style="padding-right: 10px">{{cell.value}}</span></td></tr></tbody></table><div><div class="btn-group" role="group"><button type="button" class="btn btn-default" ng-click="table.previous()"><i class="fa fa-angle-left"></i></button> <span class="btn btn-default" style="width: 100px">{{table.page()}} of {{table.pages()}}</span> <button type="button" class="btn btn-default" ng-click="table.next()"><i class="fa fa-angle-right"></i></button></div><div class="btn-group pull-right" role="group"><button type="button" class="btn btn-default" ng-class="{\'active\': table.isPageSize(10)}" ng-click="table.pageSize(10)">10</button> <button type="button" class="btn btn-default" ng-class="{\'active\': table.isPageSize(15)}" ng-click="table.pageSize(15)">15</button> <button type="button" class="btn btn-default" ng-class="{\'active\': table.isPageSize(30)}" ng-click="table.pageSize(30)">30</button> <button type="button" class="btn btn-default" ng-class="{\'active\': table.isPageSize(50)}" ng-click="table.pageSize(50)">50</button> <button type="button" class="btn btn-default" ng-class="{\'active\': table.isPageSize(100)}" ng-click="table.pageSize(100)">100</button></div></div></div></div>');b.put("assets/html/tm1-ui-table.html",'<div class="table-responsive tm1-ui-table {{directiveClasses}}"><p ng-if="tm1ShowServerResponseTime"><small class="pull-right text-info" ng-if="timeEnd > 0">Network response time in {{(timeEnd - timeStart) / 1000 | formatNumber:3}} second(s)</small></p><table ng-attr-id="{{tableId}}" class="{{tableClasses}}"><thead ng-if="!mdxError"><tr><th ng-repeat="columnIndex in columnsIndex track by $index" ng-class="{\'text-center\':!isCustomTableClass}">{{getColumnTitle(columnIndex)}}</th><th ng-if="showChart" ng-class="{\'text-center\':!isCustomTableClass}">Chart ({{chartType}})</th></tr></thead><tbody ng-if="!mdxError"><tr ng-repeat="rowIndex in rowsIndex track by $index"><td ng-repeat="columnIndex in columnsIndex track by $index" ng-class="{\'text-right\':!isCustomTableClass && columnIndex>=rowDimensionColumns, \'text-center\':!isCustomTableClass && columnIndex<rowDimensionColumns}">{{getColumnData(rowIndex, columnIndex, true)}}</td><td ng-if="showChart && chartType == \'line\'">{{getRowData(rowIndex)}}</td><td style="width: 15%" ng-if="showChart && chartType == \'bar\'"><tm1-ui-chart tm1-chart-type="multiBar" tm1-legend="none" tm1-hide-controls="true" tm1-axis-label-x="" tm1-axis-label-y="" tm1-height="50" tm1-margin="{top:1,right:1,bottom:1,left:1}"><tm1-ui-chart-value ng-repeat="columnIndex in dataColumns track by $index" tm1-label="{{$index}}" tm1-value="{{getColumnData(rowIndex, columnIndex, false)}}"></tm1-ui-chart-value></tm1-ui-chart></td></tr></tbody><tbody ng-if="mdxError"><tr><td>{{mdxErrorMessage}}</td></tr></tbody></table></div>');b.put("assets/html/tm1-ui-upload.html",'<div class="tm1-ui-upload {{directiveClasses}}"><div class="row"><div class="col-md-12"><div class="alert alert-info" role="alert" ngf-drop ngf-select ng-model="upload.file" ngf-max-size="{{maxSize}}MB" ngf-change="onReceivedFile($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)" ngf-drag-over-class="\'alert alert-warning\'" ngf-select-disabled="true" ngf-resize="tm1ImageOptions"><p class="text-center"><button class="btn btn-default" type="button" ngf-select ngf-change="onReceivedFile($files, $file, $newFiles, $duplicateFiles, $invalidFiles, $event)" ng-model="upload.file" ngf-max-size="{{maxSize}}MB" ngf-resize="tm1ImageOptions" ngf-capture="camera">{{displayMessage}} <i class="fa fa-hand-pointer-o" ng-if="status == STATUS_ON_READY"></i> <i class="fa fa-spinner fa-spin fa-fw" ng-if="status == STATUS_ON_UPLOADING"></i></button></p><p ng-if="errorMessage.length > 0" class="alert alert-danger text-center">{{errorMessage}}</p><p ng-if="upload.file.name && upload.file.size < 1000000" class="text-center"><strong>[{{upload.file.name}} - {{upload.file.size / 1000 | number:2}} KB]</strong></p><p ng-if="upload.file.name && upload.file.size >= 1000000" class="text-center"><strong>[{{upload.file.name}} - {{upload.file.size / 1000000 | number:2}} MB]</strong></p><p ng-if="upload.file.name" ng-hide="status == STATUS_ON_UPLOADING"><button type="button" ng-click="upload()" class="btn btn-primary btn-block">{{\'UPLOAD\' | translate}} <i class="fa fa-upload"></i></button></p></div><div ngf-no-file-drop>File Drag/Drop is not supported for this browser</div></div></div></div>');b.put("assets/html/tm1-ui-user.html",'<div class="table-responsive tm1-ui-user {{directiveClasses}}"><table class="table table-striped" ng-if="!hasInstance"><thead><tr><th translate="INSTANCE"></th><th><div class="row"><div class="col-md-6" translate="PARAMETER"></div><div class="col-md-6" translate="VALUE"></div></div></th></tr></thead><tbody ng-repeat="(instance, userInfo) in usersInfo"><tr><td>{{instance}}</td><td><div ng-repeat="(parameter, value) in userInfo" class="row"><div class="col-md-6">{{parameter}}</div><div class="col-md-6">{{value}}</div></div></td></tr></tbody></table><table class="table table-striped" ng-if="hasInstance"><thead><tr><th translate="PARAMETER"></th><th translate="VALUE"></th></tr></thead><tbody><tr ng-repeat="(key, value) in usersInfo"><td>{{key}}</td><td>{{value}}</td></tr></tbody></table></div>');b.put("assets/html/tm1-ui-watcher.html",'<div class="row"><div class="col-md-5"><textarea rows="5" class="form-control" ng-model="html"></textarea></div><div class="col-md-2"><button ng-disabled="set > 0" class="btn btn-primary" ng-click="setWatch()">Set</button></div><div class="col-md-2">Total Watchers: {{watcherCount}}</div><div class="col-md-3 tm1-ui-watcher-directive"></div></div>');b.put("assets/html/tm1-ui-web.html",'<div name="{{::name}}" id="{{::id}}" class="tm1-ui-web" ng-style="containerStyle"><span ng-if="!initPage && !error && !isEmptySessionToken" class="alert alert-info">{{message}}</span> <span ng-if="tm1ShowUrl" ng-bind-html="urlWeb" class="alert alert-info"></span><iframe ng-if="initPage && !error" ng-src="{{urlWeb}}" ng-style="iframeStyle">{{\'MESSAGETM1WEBIFRAMEERROR\' | translate}}</iframe><div ng-if="isEmptySessionToken || error" class="row"><div class="col-md-12"><p class="text-justify">{{\'MESSAGETM1WEBERRORTITLE1\' | translate}} <span class="label label-primary" translate="MESSAGETM1WEBERRORTITLE2"></span> {{\'MESSAGETM1WEBERRORTITLE3\' | translate}} <span class="label label-primary" translate="MESSAGETM1WEBERRORTITLE4"></span> {{\'MESSAGETM1WEBERRORTITLE5\' | translate}} <span class="label label-danger" translate="MESSAGETM1WEBERRORTITLE6"></span>. {{\'MESSAGETM1WEBERRORTITLE7\' | translate}}:</p><ul class="list-group"><li class="list-group-item list-group-item-info">{{\'MESSAGETM1WEBERROR1PARTIAL1\' | translate}} <strong translate="MESSAGETM1WEBERROR1PARTIAL2"></strong></li><li class="list-group-item list-group-item-info">{{\'MESSAGETM1WEBERROR2PARTIAL1\' | translate}} <strong translate="MESSAGETM1WEBERROR2PARTIAL2"></strong> {{\'MESSAGETM1WEBERROR2PARTIAL3\' | translate}}</li><li class="list-group-item list-group-item-info">{{\'MESSAGETM1WEBERROR3PARTIAL1\' | translate}} <strong translate="MESSAGETM1WEBERROR3PARTIAL2"></strong> {{\'MESSAGETM1WEBERROR3PARTIAL3\' | translate}}</li><li class="list-group-item list-group-item-info">{{\'MESSAGETM1WEBERROR4PARTIAL1\' | translate}} <strong translate="MESSAGETM1WEBERROR4PARTIAL2"></strong> {{\'MESSAGETM1WEBERROR4PARTIAL3\' | translate}}</li><li ng-if="error" class="list-group-item list-group-item-info" ng-bind-html="errorMessage"></li></ul><p>{{\'MESSAGETM1WEBERRORFOOTER1\' | translate}} <u translate="MESSAGETM1WEBERRORFOOTER2"></u>.</p></div></div></div>')}]);